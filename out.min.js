"use strict";(()=>{var UIe=Object.create;var M_=Object.defineProperty;var N0e=Object.getOwnPropertyDescriptor;var $Ie=Object.getOwnPropertyNames;var jIe=Object.getPrototypeOf,HIe=Object.prototype.hasOwnProperty;var ao=(t,e)=>()=>(t&&(e=t(t=0)),e);var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),qo=(t,e)=>{for(var r in e)M_(t,r,{get:e[r],enumerable:!0})},F0e=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of $Ie(e))!HIe.call(t,i)&&i!==r&&M_(t,i,{get:()=>e[i],enumerable:!(n=N0e(e,i))||n.enumerable});return t};var Na=(t,e,r)=>(r=t!=null?UIe(jIe(t)):{},F0e(e||!t||!t.__esModule?M_(r,"default",{value:t,enumerable:!0}):r,t)),w0e=t=>F0e(M_({},"__esModule",{value:!0}),t),Uo=(t,e,r,n)=>{for(var i=n>1?void 0:n?N0e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&M_(e,r,i),i};var ke=v(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.overload=yt.minAnalytic=yt.minAggregate=yt.minScalar=yt.maxAnalytic=yt.maxUngroupedAggregate=yt.anyExprType=yt.maxAggregate=yt.maxScalar=yt.makeParam=yt.param=yt.params=yt.literal=yt.output=yt.constant=yt.sql=yt.sqlFragment=yt.spread=yt.arg=void 0;function L0e(t){return{type:"function_parameter",name:t}}yt.arg=L0e;function zIe(t){return{type:"spread",e:[t]}}yt.spread=zIe;function GIe(...t){return{type:"sql_expression",e:t}}yt.sqlFragment=GIe;function QIe(t,...e){return[{type:"sql_expression",e:VIe([...t],e)}]}yt.sql=QIe;function VIe(t,e){let r=[];for(let n=0;n<t.length;n++)r.push(t[n]),n<e.length&&r.push(e[n]);return r}function WIe(t){return{...t,evalSpace:"constant"}}yt.constant=WIe;function YIe(t){return{...t,evalSpace:"output"}}yt.output=YIe;function KIe(t){return{...t,evalSpace:"literal"}}yt.literal=KIe;function XIe(t,...e){return{name:t,isVariadic:!0,allowedTypes:e}}yt.params=XIe;function I0e(t,...e){return{name:t,isVariadic:!1,allowedTypes:e}}yt.param=I0e;function JIe(t,...e){return{param:I0e(t,...e),arg:L0e(t)}}yt.makeParam=JIe;function ZIe(t){return{dataType:t,expressionType:"scalar",evalSpace:"input"}}yt.maxScalar=ZIe;function eMe(t){return{dataType:t,expressionType:"aggregate",evalSpace:"input"}}yt.maxAggregate=eMe;function tMe(t){return{dataType:t,expressionType:void 0,evalSpace:"input"}}yt.anyExprType=tMe;function rMe(t){return{dataType:t,expressionType:"ungrouped_aggregate",evalSpace:"input"}}yt.maxUngroupedAggregate=rMe;function nMe(t){return{dataType:t,expressionType:"aggregate_analytic",evalSpace:"input"}}yt.maxAnalytic=nMe;function iMe(t){return{dataType:t,expressionType:"scalar",evalSpace:"input"}}yt.minScalar=iMe;function sMe(t){return{dataType:t,expressionType:"aggregate",evalSpace:"input"}}yt.minAggregate=sMe;function oMe(t){return{dataType:t,expressionType:"scalar_analytic",evalSpace:"input"}}yt.minAnalytic=oMe;function aMe(t,e,r,n){return{returnType:t,params:e,e:r,needsWindowOrderBy:n?.needsWindowOrderBy,between:n?.between}}yt.overload=aMe});var Xe=v(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.isMatrixOperation=Y.isIndexSegment=Y.isRawSegment=Y.isSamplingEnable=Y.isSamplingPercent=Y.isSamplingRows=Y.isQuerySegment=Y.isProjectSegment=Y.isPartialSegment=Y.isReduceSegment=Y.refIsStructDef=Y.isByExpression=Y.isByName=Y.ValueType=Y.isExtractUnit=Y.isTimestampUnit=Y.isDateUnit=Y.FieldIsIntrinsic=Y.isCastType=Y.isAtomicFieldType=Y.isTimeFieldType=Y.hasExpression=Y.maxOfExpressionTypes=Y.maxExpressionType=Y.isExpressionTypeLEQ=Y.expressionIsAnalytic=Y.expressionIsCalculation=Y.expressionInvolvesAggregate=Y.expressionIsUngroupedAggregate=Y.expressionIsAggregate=Y.expressionIsScalar=Y.mkExpr=Y.isApplyFragment=Y.isApplyValue=Y.isParameterFragment=Y.isFieldFragment=Y.isSpreadFragment=Y.isSQLExpressionFragment=Y.isFunctionCallFragment=Y.isFunctionParameterFragment=Y.isUngroupFragment=Y.isAsymmetricFragment=Y.isAggregateFragment=Y.isDialectFragment=Y.isFilterFragment=Y.isOutputFieldFragment=Y.isFilteredAliasedName=Y.paramHasValue=Y.isConditionParameter=Y.isValueParameter=void 0;Y.isValueDate=Y.isValueTimestamp=Y.isValueBoolean=Y.isValueNumber=Y.isValueString=Y.isMeasureLike=Y.getPhysicalFields=Y.getDimensions=Y.isPhysical=Y.isDimensional=Y.isAtomicField=Y.isTurtleDef=Y.getIdentifier=Y.isFieldStructDef=Y.isFieldTimeBased=Y.isFieldTypeDef=Y.isSQLBlockStruct=Y.mergeEvalSpaces=Y.isSQLFragment=Y.isJoinOn=void 0;function k0e(t){return t.value!==void 0}Y.isValueParameter=k0e;function uMe(t){return t.condition!==void 0}Y.isConditionParameter=uMe;function lMe(t){return k0e(t)||t.condition!==null}Y.paramHasValue=lMe;function cMe(t){for(let e of Object.keys(t))if(!["name","as","filterList"].includes(e))return!1;return!0}Y.isFilteredAliasedName=cMe;function fMe(t){return t?.type==="outputField"}Y.isOutputFieldFragment=fMe;function xMe(t){return t?.type==="filterExpression"}Y.isFilterFragment=xMe;function dMe(t){return t?.type==="dialect"}Y.isDialectFragment=dMe;function B0e(t){return t?.type==="aggregate"}Y.isAggregateFragment=B0e;function hMe(t){return B0e(t)&&["sum","avg","count"].includes(t.function)}Y.isAsymmetricFragment=hMe;function pMe(t){let e=t?.type;return e==="all"||e==="exclude"}Y.isUngroupFragment=pMe;function mMe(t){return t?.type==="function_parameter"}Y.isFunctionParameterFragment=mMe;function gMe(t){return t?.type==="function_call"}Y.isFunctionCallFragment=gMe;function yMe(t){return t?.type==="sql_expression"}Y.isSQLExpressionFragment=yMe;function EMe(t){return t?.type==="spread"}Y.isSpreadFragment=EMe;function AMe(t){return t?.type==="field"}Y.isFieldFragment=AMe;function SMe(t){return t?.type==="parameter"}Y.isParameterFragment=SMe;function vMe(t){return t?.type==="applyVal"}Y.isApplyValue=vMe;function _Me(t){return t?.type==="apply"}Y.isApplyFragment=_Me;function bMe(t,...e){let r=[],n;for(n=0;n<e.length;n++){let i=e[n];t[n].length>0&&r.push(t[n]),typeof i=="string"?r.push(i):r.push(...i)}return t[n].length>0&&r.push(t[n]),r}Y.mkExpr=bMe;function TMe(t){return t===void 0||t==="scalar"}Y.expressionIsScalar=TMe;function CMe(t){return t==="aggregate"||t==="ungrouped_aggregate"}Y.expressionIsAggregate=CMe;function RMe(t){return t==="ungrouped_aggregate"}Y.expressionIsUngroupedAggregate=RMe;function OMe(t){return t==="aggregate"||t==="ungrouped_aggregate"||t==="aggregate_analytic"}Y.expressionInvolvesAggregate=OMe;function DMe(t){return t==="aggregate"||t==="scalar_analytic"||t==="aggregate_analytic"||t==="ungrouped_aggregate"}Y.expressionIsCalculation=DMe;function NMe(t){return t==="aggregate_analytic"||t==="scalar_analytic"}Y.expressionIsAnalytic=NMe;function M0e(t){return{scalar:0,aggregate:1,ungrouped_aggregate:2,scalar_analytic:2,aggregate_analytic:3}[t]}function FMe(t,e){return t===e||M0e(t)<M0e(e)}Y.isExpressionTypeLEQ=FMe;function q0e(t,e){let r="scalar";return(t==="aggregate"||e==="aggregate")&&(r="aggregate"),(t==="ungrouped_aggregate"||e==="ungrouped_aggregate")&&(r="ungrouped_aggregate"),(t==="scalar_analytic"||e==="scalar_analytic")&&(r="scalar_analytic"),(t==="aggregate_analytic"||e==="aggregate_analytic")&&(r="aggregate_analytic"),(t==="scalar_analytic"&&e==="aggregate"||t==="aggregate"&&e==="scalar_analytic")&&(r="aggregate_analytic"),r}Y.maxExpressionType=q0e;function wMe(t){return t.reduce(q0e,"scalar")}Y.maxOfExpressionTypes=wMe;function U0e(t){return t.e!==void 0}Y.hasExpression=U0e;function LMe(t){return t==="date"||t==="timestamp"}Y.isTimeFieldType=LMe;function fz(t){return["string","number","date","timestamp","boolean","json","unsupported","error"].includes(t)}Y.isAtomicFieldType=fz;function IMe(t){return["string","number","date","timestamp","boolean","json"].includes(t)}Y.isCastType=IMe;function MMe(t){return fz(t.type)&&!U0e(t)?!0:t.type==="struct"&&(t.structSource.type==="inline"||t.structSource.type==="nested")}Y.FieldIsIntrinsic=MMe;function $0e(t){return["day","week","month","quarter","year"].includes(t)}Y.isDateUnit=$0e;function j0e(t){return $0e(t)||["hour","minute","second"].includes(t)}Y.isTimestampUnit=j0e;function PMe(t){return j0e(t)||t==="day_of_week"||t==="day_of_year"}Y.isExtractUnit=PMe;var P0e;(function(t){t.Date="date",t.Timestamp="timestamp",t.Number="number",t.String="string"})(P0e||(Y.ValueType=P0e={}));function kMe(t){return t===void 0?!1:t.by==="name"}Y.isByName=kMe;function BMe(t){return t===void 0?!1:t.by==="name"}Y.isByExpression=BMe;function qMe(t){return typeof t!="string"&&t.type==="struct"}Y.refIsStructDef=qMe;function H0e(t){return t.type==="reduce"}Y.isReduceSegment=H0e;function UMe(t){return t.type==="partial"}Y.isPartialSegment=UMe;function z0e(t){return t.type==="project"}Y.isProjectSegment=z0e;function $Me(t){return z0e(t)||H0e(t)}Y.isQuerySegment=$Me;function jMe(t){return t.rows!==void 0}Y.isSamplingRows=jMe;function HMe(t){return t.percent!==void 0}Y.isSamplingPercent=HMe;function zMe(t){return t.enable!==void 0}Y.isSamplingEnable=zMe;function GMe(t){return t.type==="raw"}Y.isRawSegment=GMe;function QMe(t){return t.type==="index"}Y.isIndexSegment=QMe;function VMe(t){return["left","right","full","inner"].includes(t)}Y.isMatrixOperation=VMe;function WMe(t){return["one","many","cross"].includes(t.type)}Y.isJoinOn=WMe;function YMe(t){return t.sql!==void 0}Y.isSQLFragment=YMe;function KMe(...t){return t.every(e=>e==="constant"||e==="literal")?"constant":t.every(e=>e==="output"||e==="constant"||e==="literal")?"output":"input"}Y.mergeEvalSpaces=KMe;function XMe(t){let e=t.structSource;return e.type==="sql"&&e.method==="subquery"}Y.isSQLBlockStruct=XMe;function G0e(t){return t.type==="string"||t.type==="date"||t.type==="number"||t.type==="timestamp"||t.type==="boolean"||t.type==="json"}Y.isFieldTypeDef=G0e;function JMe(t){return t.type==="date"||t.type==="timestamp"}Y.isFieldTimeBased=JMe;function Q0e(t){return t.type==="struct"}Y.isFieldStructDef=Q0e;function ZMe(t){return t.as!==void 0?t.as:t.name}Y.getIdentifier=ZMe;function ePe(t){return t.type==="turtle"}Y.isTurtleDef=ePe;function tPe(t){return fz(t.type)}Y.isAtomicField=tPe;function V0e(t){var e;return"resultMetadata"in t?((e=t.resultMetadata)===null||e===void 0?void 0:e.fieldKind)==="dimension":!1}Y.isDimensional=V0e;function W0e(t){return G0e(t)&&t.e===void 0||Q0e(t)&&(t.structSource.type==="nested"||t.structSource.type==="inline")}Y.isPhysical=W0e;function rPe(t){return t.fields.filter(V0e)}Y.getDimensions=rPe;function nPe(t){return t.fields.filter(W0e)}Y.getPhysicalFields=nPe;function iPe(t){var e,r;return"resultMetadata"in t?((e=t.resultMetadata)===null||e===void 0?void 0:e.fieldKind)==="measure"||((r=t.resultMetadata)===null||r===void 0?void 0:r.fieldKind)==="struct":!1}Y.isMeasureLike=iPe;function sPe(t,e){return e.type==="string"}Y.isValueString=sPe;function oPe(t,e){return e.type==="number"}Y.isValueNumber=oPe;function aPe(t,e){return e.type==="boolean"}Y.isValueBoolean=aPe;function uPe(t,e){return e.type==="timestamp"}Y.isValueTimestamp=uPe;function lPe(t,e){return e.type==="date"}Y.isValueDate=lPe});var P_=v(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.Dialect=Fl.qtz=Fl.inDays=Fl.dayIndex=void 0;var Y0e=Xe(),K0e=["microsecond","millisecond","second","minute","hour","day","week","month","quarter","year"];Fl.dayIndex=K0e.indexOf("day");function cPe(t){return K0e.indexOf(t)>=Fl.dayIndex}Fl.inDays=cPe;function fPe(t){let e=t.queryTimezone;if(!(e===void 0||e===t.systemTimezone))return e}Fl.qtz=fPe;var xz=class{constructor(){this.cantPartitionWindowFunctionsOnExpressions=!1}sqlFinalStage(e,r){throw new Error("Dialect has no final Stage but called Anyway")}sqlDateToString(e){return this.castToString(`DATE(${e})`)}ignoreInProject(e){return!1}sqlLiteralNumber(e){return e}dialectExpr(e,r){switch(r.function){case"now":return this.sqlNow();case"timeDiff":return this.sqlMeasureTime(r.left,r.right,r.units);case"delta":return this.sqlAlterTime(r.op,r.base,r.delta,r.units);case"trunc":return this.sqlTrunc(e,r.expr,r.units);case"extract":return this.sqlExtract(e,r.expr,r.units);case"cast":return this.sqlCast(e,r);case"regexpMatch":return this.sqlRegexpMatch(r.expr,r.regexp);case"div":return this.divisionIsInteger?(0,Y0e.mkExpr)`${r.numerator}*1.0/${r.denominator}`:(0,Y0e.mkExpr)`${r.numerator}/${r.denominator}`;case"timeLiteral":return[this.sqlLiteralTime(e,r.literal,r.literalType,r.timezone)];case"stringLiteral":return[this.sqlLiteralString(r.literal)];case"numberLiteral":return[this.sqlLiteralNumber(r.literal)];case"regexpLiteral":return[this.sqlLiteralRegexp(r.literal)]}}sqlSumDistinct(e,r,n){return"sqlSumDistinct called but not implemented"}sqlAggDistinct(e,r,n){return"sqlAggDistinct called but not implemented"}sqlSampleTable(e,r){if(r!==void 0)throw new Error(`Sampling is not supported on dialect ${this.name}.`);return e}sqlOrderBy(e){return`ORDER BY ${e.join(",")}`}sqlTzStr(e){return`"${e.queryTimezone}"`}};Fl.Dialect=xz});function k_(){if(!ND&&(ND=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ND))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ND(xPe)}var ND,xPe,dz=ao(()=>{xPe=new Uint8Array(16)});var X0e,J0e=ao(()=>{X0e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function dPe(t){return typeof t=="string"&&X0e.test(t)}var Od,B_=ao(()=>{J0e();Od=dPe});function hPe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Xi[t[e+0]]+Xi[t[e+1]]+Xi[t[e+2]]+Xi[t[e+3]]+"-"+Xi[t[e+4]]+Xi[t[e+5]]+"-"+Xi[t[e+6]]+Xi[t[e+7]]+"-"+Xi[t[e+8]]+Xi[t[e+9]]+"-"+Xi[t[e+10]]+Xi[t[e+11]]+Xi[t[e+12]]+Xi[t[e+13]]+Xi[t[e+14]]+Xi[t[e+15]]).toLowerCase();if(!Od(r))throw TypeError("Stringified UUID is invalid");return r}var Xi,FD,Dd,q_=ao(()=>{B_();Xi=[];for(FD=0;FD<256;++FD)Xi.push((FD+256).toString(16).substr(1));Dd=hPe});function pPe(t,e,r){var n=e&&r||0,i=e||new Array(16);t=t||{};var s=t.node||Z0e,o=t.clockseq!==void 0?t.clockseq:hz;if(s==null||o==null){var a=t.random||(t.rng||k_)();s==null&&(s=Z0e=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=hz=(a[6]<<8|a[7])&16383)}var u=t.msecs!==void 0?t.msecs:Date.now(),l=t.nsecs!==void 0?t.nsecs:mz+1,c=u-pz+(l-mz)/1e4;if(c<0&&t.clockseq===void 0&&(o=o+1&16383),(c<0||u>pz)&&t.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");pz=u,mz=l,hz=o,u+=122192928e5;var f=((u&268435455)*1e4+l)%4294967296;i[n++]=f>>>24&255,i[n++]=f>>>16&255,i[n++]=f>>>8&255,i[n++]=f&255;var x=u/4294967296*1e4&268435455;i[n++]=x>>>8&255,i[n++]=x&255,i[n++]=x>>>24&15|16,i[n++]=x>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(var d=0;d<6;++d)i[n+d]=s[d];return e||Dd(i)}var Z0e,hz,pz,mz,ece,tce=ao(()=>{dz();q_();pz=0,mz=0;ece=pPe});function mPe(t){if(!Od(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var wD,gz=ao(()=>{B_();wD=mPe});function gPe(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function LD(t,e,r){function n(i,s,o,a){if(typeof i=="string"&&(i=gPe(i)),typeof s=="string"&&(s=wD(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+i.length);if(u.set(s),u.set(i,s.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=u[l];return o}return Dd(u)}try{n.name=t}catch{}return n.DNS=yPe,n.URL=EPe,n}var yPe,EPe,yz=ao(()=>{q_();gz();yPe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",EPe="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function APe(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return SPe(vPe(_Pe(t),t.length*8))}function SPe(t){for(var e=[],r=t.length*32,n="0123456789abcdef",i=0;i<r;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(o)}return e}function rce(t){return(t+64>>>9<<4)+14+1}function vPe(t,e){t[e>>5]|=128<<e%32,t[rce(e)-1]=e;for(var r=1732584193,n=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=r,u=n,l=i,c=s;r=Ss(r,n,i,s,t[o],7,-680876936),s=Ss(s,r,n,i,t[o+1],12,-389564586),i=Ss(i,s,r,n,t[o+2],17,606105819),n=Ss(n,i,s,r,t[o+3],22,-1044525330),r=Ss(r,n,i,s,t[o+4],7,-176418897),s=Ss(s,r,n,i,t[o+5],12,1200080426),i=Ss(i,s,r,n,t[o+6],17,-1473231341),n=Ss(n,i,s,r,t[o+7],22,-45705983),r=Ss(r,n,i,s,t[o+8],7,1770035416),s=Ss(s,r,n,i,t[o+9],12,-1958414417),i=Ss(i,s,r,n,t[o+10],17,-42063),n=Ss(n,i,s,r,t[o+11],22,-1990404162),r=Ss(r,n,i,s,t[o+12],7,1804603682),s=Ss(s,r,n,i,t[o+13],12,-40341101),i=Ss(i,s,r,n,t[o+14],17,-1502002290),n=Ss(n,i,s,r,t[o+15],22,1236535329),r=vs(r,n,i,s,t[o+1],5,-165796510),s=vs(s,r,n,i,t[o+6],9,-1069501632),i=vs(i,s,r,n,t[o+11],14,643717713),n=vs(n,i,s,r,t[o],20,-373897302),r=vs(r,n,i,s,t[o+5],5,-701558691),s=vs(s,r,n,i,t[o+10],9,38016083),i=vs(i,s,r,n,t[o+15],14,-660478335),n=vs(n,i,s,r,t[o+4],20,-405537848),r=vs(r,n,i,s,t[o+9],5,568446438),s=vs(s,r,n,i,t[o+14],9,-1019803690),i=vs(i,s,r,n,t[o+3],14,-187363961),n=vs(n,i,s,r,t[o+8],20,1163531501),r=vs(r,n,i,s,t[o+13],5,-1444681467),s=vs(s,r,n,i,t[o+2],9,-51403784),i=vs(i,s,r,n,t[o+7],14,1735328473),n=vs(n,i,s,r,t[o+12],20,-1926607734),r=_s(r,n,i,s,t[o+5],4,-378558),s=_s(s,r,n,i,t[o+8],11,-2022574463),i=_s(i,s,r,n,t[o+11],16,1839030562),n=_s(n,i,s,r,t[o+14],23,-35309556),r=_s(r,n,i,s,t[o+1],4,-1530992060),s=_s(s,r,n,i,t[o+4],11,1272893353),i=_s(i,s,r,n,t[o+7],16,-155497632),n=_s(n,i,s,r,t[o+10],23,-1094730640),r=_s(r,n,i,s,t[o+13],4,681279174),s=_s(s,r,n,i,t[o],11,-358537222),i=_s(i,s,r,n,t[o+3],16,-722521979),n=_s(n,i,s,r,t[o+6],23,76029189),r=_s(r,n,i,s,t[o+9],4,-640364487),s=_s(s,r,n,i,t[o+12],11,-421815835),i=_s(i,s,r,n,t[o+15],16,530742520),n=_s(n,i,s,r,t[o+2],23,-995338651),r=bs(r,n,i,s,t[o],6,-198630844),s=bs(s,r,n,i,t[o+7],10,1126891415),i=bs(i,s,r,n,t[o+14],15,-1416354905),n=bs(n,i,s,r,t[o+5],21,-57434055),r=bs(r,n,i,s,t[o+12],6,1700485571),s=bs(s,r,n,i,t[o+3],10,-1894986606),i=bs(i,s,r,n,t[o+10],15,-1051523),n=bs(n,i,s,r,t[o+1],21,-2054922799),r=bs(r,n,i,s,t[o+8],6,1873313359),s=bs(s,r,n,i,t[o+15],10,-30611744),i=bs(i,s,r,n,t[o+6],15,-1560198380),n=bs(n,i,s,r,t[o+13],21,1309151649),r=bs(r,n,i,s,t[o+4],6,-145523070),s=bs(s,r,n,i,t[o+11],10,-1120210379),i=bs(i,s,r,n,t[o+2],15,718787259),n=bs(n,i,s,r,t[o+9],21,-343485551),r=Nd(r,a),n=Nd(n,u),i=Nd(i,l),s=Nd(s,c)}return[r,n,i,s]}function _Pe(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(rce(e)),n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function Nd(t,e){var r=(t&65535)+(e&65535),n=(t>>16)+(e>>16)+(r>>16);return n<<16|r&65535}function bPe(t,e){return t<<e|t>>>32-e}function ID(t,e,r,n,i,s){return Nd(bPe(Nd(Nd(e,t),Nd(n,s)),i),r)}function Ss(t,e,r,n,i,s,o){return ID(e&r|~e&n,t,e,i,s,o)}function vs(t,e,r,n,i,s,o){return ID(e&n|r&~n,t,e,i,s,o)}function _s(t,e,r,n,i,s,o){return ID(e^r^n,t,e,i,s,o)}function bs(t,e,r,n,i,s,o){return ID(r^(e|~n),t,e,i,s,o)}var nce,ice=ao(()=>{nce=APe});var TPe,sce,oce=ao(()=>{yz();ice();TPe=LD("v3",48,nce),sce=TPe});function CPe(t,e,r){t=t||{};var n=t.random||(t.rng||k_)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return Dd(n)}var ace,uce=ao(()=>{dz();q_();ace=CPe});function RPe(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function Ez(t,e){return t<<e|t>>>32-e}function OPe(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=[];for(var i=0;i<n.length;++i)t.push(n.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),u=0;u<o;++u){for(var l=new Uint32Array(16),c=0;c<16;++c)l[c]=t[u*64+c*4]<<24|t[u*64+c*4+1]<<16|t[u*64+c*4+2]<<8|t[u*64+c*4+3];a[u]=l}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var f=0;f<o;++f){for(var x=new Uint32Array(80),d=0;d<16;++d)x[d]=a[f][d];for(var h=16;h<80;++h)x[h]=Ez(x[h-3]^x[h-8]^x[h-14]^x[h-16],1);for(var p=r[0],m=r[1],g=r[2],y=r[3],A=r[4],S=0;S<80;++S){var T=Math.floor(S/20),_=Ez(p,5)+RPe(T,m,g,y)+A+e[T]+x[S]>>>0;A=y,y=g,g=Ez(m,30)>>>0,m=p,p=_}r[0]=r[0]+p>>>0,r[1]=r[1]+m>>>0,r[2]=r[2]+g>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+A>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var lce,cce=ao(()=>{lce=OPe});var DPe,fce,xce=ao(()=>{yz();cce();DPe=LD("v5",80,lce),fce=DPe});var dce,hce=ao(()=>{dce="00000000-0000-0000-0000-000000000000"});function NPe(t){if(!Od(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var pce,mce=ao(()=>{B_();pce=NPe});var Az={};qo(Az,{NIL:()=>dce,parse:()=>wD,stringify:()=>Dd,v1:()=>ece,v3:()=>sce,v4:()=>ace,v5:()=>fce,validate:()=>Od,version:()=>pce});var Sz=ao(()=>{tce();oce();uce();xce();hce();mce();B_();q_();gz()});var Fd=v(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.range=pi.joinWith=pi.exprWalk=pi.exprMap=pi.generateHash=pi.AndChain=pi.generateSQLStringLiteral=pi.indent=void 0;var FPe=(Sz(),w0e(Az));function wPe(t){let e=/(^|\n)/g,r=/\n {2}$/;return t.replace(e,"$1  ").replace(r,`
`)}pi.indent=wPe;function LPe(t){return`'${t.replace(/\\/g,"\\\\").replace(/'/g,"\\'")}'`}pi.generateSQLStringLiteral=LPe;var vz=class t{constructor(e){this.clauses=[],e&&this.clauses.push(e)}clone(){let e=new t;return e.addChain(this),e}add(e){return this.clauses.push(e),this}addChain(e){return this.clauses.push(...e.clauses),this}empty(){return this.clauses.length===0}present(){return this.clauses.length>0}sqlOr(){return this.empty()?"":this.clauses.map(e=>`(${e})`).join("OR ")+`
`}sql(e){if(this.empty())return"";let r="",n="";return e&&(r=e.toUpperCase()+" ",n=`
`),this.clauses.length===1?r+this.clauses[0]+n:r+this.clauses.map(i=>`(${i})`).join(`
AND `)+n}};pi.AndChain=vz;function IPe(t){return(0,FPe.v5)(t,"76c17e9d-f3ce-5f2d-bfde-98ad3d2a37f6")}pi.generateHash=IPe;function $o(t,e){return t.flatMap(r=>e(r).map(i=>{if(typeof i=="string")return i;switch(i.type){case"aggregate":case"all":case"spread":case"sql_expression":case"exclude":return{...i,e:$o(i.e,e)};case"apply":return{...i,to:$o(i.to,e),value:$o(i.value,e)};case"applyVal":case"field":case"function_parameter":case"parameter":case"outputField":return i;case"function_call":return{...i,args:i.args.map(s=>$o(s,e))};case"filterExpression":return{...i,e:$o(i.e,e),filterList:i.filterList.map(s=>({...s,expression:$o(s.expression,e)}))};case"dialect":switch(i.function){case"cast":case"regexpMatch":return{...i,expr:$o(i.expr,e)};case"delta":return{...i,delta:$o(i.delta,e)};case"div":return{...i,denominator:$o(i.denominator,e),numerator:$o(i.numerator,e)};case"now":case"numberLiteral":case"stringLiteral":case"timeLiteral":case"regexpLiteral":return i;case"extract":case"trunc":return{...i,expr:{...i.expr,value:$o(i.expr.value,e)}};case"timeDiff":return{...i,left:{...i.left,value:$o(i.left.value,e)},right:{...i.left,value:$o(i.left.value,e)}};default:throw new Error("unexpected dialect function")}default:throw new Error("unexpected")}}))}pi.exprMap=$o;function jo(t,e){t.forEach(r=>{if(e(r),typeof r=="string")return r;switch(r.type){case"aggregate":case"all":case"spread":case"sql_expression":case"exclude":return{...r,e:jo(r.e,e)};case"apply":return{...r,to:jo(r.to,e),value:jo(r.value,e)};case"applyVal":case"field":case"function_parameter":case"parameter":case"outputField":return r;case"function_call":return{...r,args:r.args.map(n=>jo(n,e))};case"filterExpression":return{...r,e:jo(r.e,e),filterList:r.filterList.map(n=>({...n,expression:jo(n.expression,e)}))};case"dialect":switch(r.function){case"cast":case"regexpMatch":return{...r,expr:jo(r.expr,e)};case"delta":return{...r,delta:jo(r.delta,e)};case"div":return{...r,denominator:jo(r.denominator,e),numerator:jo(r.numerator,e)};case"now":case"numberLiteral":case"stringLiteral":case"timeLiteral":case"regexpLiteral":return r;case"extract":case"trunc":return{...r,expr:{...r.expr,value:jo(r.expr.value,e)}};case"timeDiff":return{...r,left:{...r.left,value:jo(r.left.value,e)},right:{...r.left,value:jo(r.left.value,e)}};default:throw new Error("unexpected dialect function")}default:throw new Error("unexpected")}})}pi.exprWalk=jo;function MPe(t,e){let r=[];for(let n=0;n<t.length;n++)r.push(...t[n]),n<t.length-1&&r.push(e);return r}pi.joinWith=MPe;function PPe(t,e){return Array.from({length:e-t},(r,n)=>n+t)}pi.range=PPe});var gce=v(MD=>{"use strict";Object.defineProperty(MD,"__esModule",{value:!0});MD.fnConcat=void 0;var Fa=ke();function kPe(){return[(0,Fa.overload)((0,Fa.minScalar)("string"),[],[{type:"dialect",function:"stringLiteral",literal:""}]),(0,Fa.overload)((0,Fa.minScalar)("string"),[(0,Fa.params)("values",(0,Fa.anyExprType)("string"),(0,Fa.anyExprType)("number"),(0,Fa.anyExprType)("date"),(0,Fa.anyExprType)("timestamp"),(0,Fa.anyExprType)("boolean"))],(0,Fa.sql)`CONCAT(${(0,Fa.spread)((0,Fa.arg)("values"))})`)]}MD.fnConcat=kPe});var yce=v(PD=>{"use strict";Object.defineProperty(PD,"__esModule",{value:!0});PD.fnTrunc=void 0;var V0=ke();function BPe(){let t=(0,V0.makeParam)("value",(0,V0.anyExprType)("number")),e=(0,V0.makeParam)("precision",(0,V0.anyExprType)("number"));return[(0,V0.overload)((0,V0.minScalar)("number"),[t.param],(0,V0.sql)`TRUNC(${t.arg})`),(0,V0.overload)((0,V0.minScalar)("number"),[t.param,e.param],(0,V0.sql)`TRUNC(${t.arg}, ${e.arg})`)]}PD.fnTrunc=BPe});var Ece=v(kD=>{"use strict";Object.defineProperty(kD,"__esModule",{value:!0});kD.fnStddev=void 0;var U_=ke();function qPe(){let t=(0,U_.makeParam)("value",(0,U_.maxScalar)("number"));return[(0,U_.overload)((0,U_.minAggregate)("number"),[t.param],(0,U_.sql)`STDDEV(${t.arg})`)]}kD.fnStddev=qPe});var Ace=v(BD=>{"use strict";Object.defineProperty(BD,"__esModule",{value:!0});BD.fnRound=void 0;var W0=ke();function UPe(){let t=(0,W0.makeParam)("value",(0,W0.anyExprType)("number")),e=(0,W0.makeParam)("precision",(0,W0.anyExprType)("number"));return[(0,W0.overload)((0,W0.minScalar)("number"),[t.param],(0,W0.sql)`ROUND(${t.arg})`),(0,W0.overload)((0,W0.minScalar)("number"),[t.param,e.param],(0,W0.sql)`ROUND(${t.arg}, ${e.arg})`)]}BD.fnRound=UPe});var Sce=v(qD=>{"use strict";Object.defineProperty(qD,"__esModule",{value:!0});qD.fnLower=void 0;var $_=ke();function $Pe(){let t=(0,$_.makeParam)("base",(0,$_.anyExprType)("string"));return[(0,$_.overload)((0,$_.minScalar)("string"),[t.param],(0,$_.sql)`LOWER(${t.arg})`)]}qD.fnLower=$Pe});var vce=v(wd=>{"use strict";Object.defineProperty(wd,"__esModule",{value:!0});wd.fnUnicode=wd.fnAscii=wd.fnChr=void 0;var Xn=ke();function jPe(){return[(0,Xn.overload)((0,Xn.minScalar)("string"),[(0,Xn.param)("value",(0,Xn.anyExprType)("number"))],(0,Xn.sql)`CASE WHEN ${(0,Xn.arg)("value")} = 0 THEN '' ELSE CHR(${(0,Xn.arg)("value")}) END`)]}wd.fnChr=jPe;function HPe(){return[(0,Xn.overload)((0,Xn.minScalar)("number"),[(0,Xn.param)("value",(0,Xn.anyExprType)("string"))],(0,Xn.sql)`ASCII(${(0,Xn.arg)("value")})`)]}wd.fnAscii=HPe;function zPe(){return[(0,Xn.overload)((0,Xn.minScalar)("number"),[(0,Xn.param)("value",(0,Xn.anyExprType)("string"))],(0,Xn.sql)`UNICODE(${(0,Xn.arg)("value")})`)]}wd.fnUnicode=zPe});var _ce=v(UD=>{"use strict";Object.defineProperty(UD,"__esModule",{value:!0});UD.fnUpper=void 0;var j_=ke();function GPe(){let t=(0,j_.makeParam)("value",(0,j_.anyExprType)("string"));return[(0,j_.overload)((0,j_.minScalar)("string"),[t.param],(0,j_.sql)`UPPER(${t.arg})`)]}UD.fnUpper=GPe});var bce=v($D=>{"use strict";Object.defineProperty($D,"__esModule",{value:!0});$D.fnSubstr=void 0;var bu=ke();function QPe(){let t=(0,bu.makeParam)("value",(0,bu.anyExprType)("string")),e=(0,bu.makeParam)("position",(0,bu.anyExprType)("number")),r=(0,bu.makeParam)("length",(0,bu.anyExprType)("number"));return[(0,bu.overload)((0,bu.minScalar)("string"),[t.param,e.param],(0,bu.sql)`SUBSTR(${t.arg}, ${e.arg})`),(0,bu.overload)((0,bu.minScalar)("string"),[t.param,e.param,r.param],(0,bu.sql)`SUBSTR(${t.arg}, ${e.arg}, ${r.arg})`)]}$D.fnSubstr=QPe});var Tce=v(jD=>{"use strict";Object.defineProperty(jD,"__esModule",{value:!0});jD.fnRegexpExtract=void 0;var p1=ke();function VPe(){let t=(0,p1.makeParam)("value",(0,p1.anyExprType)("string")),e=(0,p1.makeParam)("pattern",(0,p1.anyExprType)("regular expression"));return[(0,p1.overload)((0,p1.minScalar)("string"),[t.param,e.param],(0,p1.sql)`REGEXP_EXTRACT(${t.arg}, ${e.arg})`)]}jD.fnRegexpExtract=VPe});var Cce=v(HD=>{"use strict";Object.defineProperty(HD,"__esModule",{value:!0});HD.fnReplace=void 0;var Ho=ke();function WPe(){let t=(0,Ho.makeParam)("value",(0,Ho.anyExprType)("string")),e=(0,Ho.makeParam)("pattern",(0,Ho.anyExprType)("string")),r=(0,Ho.makeParam)("pattern",(0,Ho.anyExprType)("regular expression")),n=(0,Ho.makeParam)("replacement",(0,Ho.anyExprType)("string"));return[(0,Ho.overload)((0,Ho.minScalar)("string"),[t.param,e.param,n.param],(0,Ho.sql)`REPLACE(${t.arg}, ${e.arg}, ${n.arg})`),(0,Ho.overload)((0,Ho.minScalar)("string"),[t.param,r.param,n.param],(0,Ho.sql)`REGEXP_REPLACE(${t.arg}, ${r.arg}, ${n.arg})`)]}HD.fnReplace=WPe});var Rce=v(j3=>{"use strict";Object.defineProperty(j3,"__esModule",{value:!0});j3.fnByteLength=j3.fnLength=void 0;var Tu=ke();function YPe(){return[(0,Tu.overload)((0,Tu.minScalar)("number"),[(0,Tu.param)("value",(0,Tu.anyExprType)("string"))],(0,Tu.sql)`LENGTH(${(0,Tu.arg)("value")})`)]}j3.fnLength=YPe;function KPe(){return[(0,Tu.overload)((0,Tu.minScalar)("number"),[(0,Tu.param)("value",(0,Tu.anyExprType)("string"))],(0,Tu.sql)`BYTE_LENGTH(${(0,Tu.arg)("value")})`)]}j3.fnByteLength=KPe});var Oce=v(zD=>{"use strict";Object.defineProperty(zD,"__esModule",{value:!0});zD.fnIfnull=void 0;var jf=ke(),XPe=["string","number","timestamp","date","json"];function JPe(){return XPe.map(t=>(0,jf.overload)((0,jf.minScalar)(t),[(0,jf.param)("value",(0,jf.anyExprType)(t)),(0,jf.param)("default",(0,jf.anyExprType)(t))],(0,jf.sql)`IFNULL(${(0,jf.arg)("value")}, ${(0,jf.arg)("default")})`))}zD.fnIfnull=JPe});var Dce=v(GD=>{"use strict";Object.defineProperty(GD,"__esModule",{value:!0});GD.fnNullif=void 0;var m1=ke(),ZPe=["string","number","timestamp","date","json"];function eke(){return ZPe.map(t=>{let e=(0,m1.makeParam)("value1",(0,m1.anyExprType)(t)),r=(0,m1.makeParam)("value2",(0,m1.anyExprType)(t));return(0,m1.overload)((0,m1.minScalar)(t),[e.param,r.param],(0,m1.sql)`NULLIF(${e.arg}, ${r.arg})`)})}GD.fnNullif=eke});var Nce=v(QD=>{"use strict";Object.defineProperty(QD,"__esModule",{value:!0});QD.fnRowNumber=void 0;var _z=ke();function tke(){return[(0,_z.overload)((0,_z.minAnalytic)("number"),[],(0,_z.sql)`ROW_NUMBER()`,{needsWindowOrderBy:!0})]}QD.fnRowNumber=tke});var Fce=v(VD=>{"use strict";Object.defineProperty(VD,"__esModule",{value:!0});VD.fnLag=void 0;var mi=ke(),rke=["string","number","timestamp","date","json","boolean"];function nke(){return rke.flatMap(t=>{let e=(0,mi.makeParam)("value",(0,mi.output)((0,mi.maxAggregate)(t))),r=(0,mi.makeParam)("offset",(0,mi.literal)((0,mi.maxScalar)("number"))),n=(0,mi.makeParam)("default",(0,mi.constant)((0,mi.maxAggregate)(t)));return[(0,mi.overload)((0,mi.minAnalytic)(t),[e.param],(0,mi.sql)`LAG(${e.arg})`,{needsWindowOrderBy:!0}),(0,mi.overload)((0,mi.minAnalytic)(t),[e.param,r.param],(0,mi.sql)`LAG(${e.arg}, ${r.arg})`,{needsWindowOrderBy:!0}),(0,mi.overload)((0,mi.minAnalytic)(t),[e.param,r.param,n.param],(0,mi.sql)`LAG(${e.arg}, ${r.arg}, ${n.arg})`,{needsWindowOrderBy:!0})]})}VD.fnLag=nke});var wce=v(WD=>{"use strict";Object.defineProperty(WD,"__esModule",{value:!0});WD.fnLead=void 0;var gi=ke(),ike=["string","number","timestamp","date","json","boolean"];function ske(){return ike.flatMap(t=>{let e=(0,gi.makeParam)("value",(0,gi.output)((0,gi.maxAggregate)(t))),r=(0,gi.makeParam)("offset",(0,gi.literal)((0,gi.maxScalar)("number"))),n=(0,gi.makeParam)("default",(0,gi.constant)((0,gi.maxAggregate)(t)));return[(0,gi.overload)((0,gi.minAnalytic)(t),[e.param],(0,gi.sql)`LEAD(${e.arg})`,{needsWindowOrderBy:!0}),(0,gi.overload)((0,gi.minAnalytic)(t),[e.param,r.param],(0,gi.sql)`LEAD(${e.arg}, ${r.arg})`,{needsWindowOrderBy:!0}),(0,gi.overload)((0,gi.minAnalytic)(t),[e.param,r.param,n.param],(0,gi.sql)`LEAD(${e.arg}, ${r.arg}, ${n.arg})`,{needsWindowOrderBy:!0})]})}WD.fnLead=ske});var Lce=v(YD=>{"use strict";Object.defineProperty(YD,"__esModule",{value:!0});YD.fnRank=void 0;var bz=ke();function oke(){return[(0,bz.overload)((0,bz.minAnalytic)("number"),[],(0,bz.sql)`RANK()`,{needsWindowOrderBy:!0})]}YD.fnRank=oke});var Mce=v(H3=>{"use strict";Object.defineProperty(H3,"__esModule",{value:!0});H3.fnLastValueWindow=H3.fnFirstValueWindow=void 0;var zo=ke(),Ice=["string","number","timestamp","date","json"];function ake(){return Ice.flatMap(t=>[(0,zo.overload)((0,zo.minAnalytic)(t),[(0,zo.param)("value",(0,zo.output)((0,zo.maxAggregate)(t)))],(0,zo.sql)`FIRST_VALUE(${(0,zo.arg)("value")})`,{needsWindowOrderBy:!0})])}H3.fnFirstValueWindow=ake;function uke(){return Ice.flatMap(t=>[(0,zo.overload)((0,zo.minAnalytic)(t),[(0,zo.param)("value",(0,zo.output)((0,zo.maxAggregate)(t)))],(0,zo.sql)`LAST_VALUE(${(0,zo.arg)("value")})`,{needsWindowOrderBy:!0,between:{preceding:-1,following:-1}})])}H3.fnLastValueWindow=uke});var Pce=v(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.fnSumWindow=Go.fnMaxWindow=Go.fnMinWindow=Go.fnSumCumulative=Go.fnMaxCumulative=Go.fnMinCumulative=void 0;var Nt=ke(),z3=["string","number","timestamp","date"];function lke(){return z3.flatMap(t=>{let e=(0,Nt.makeParam)("value",(0,Nt.output)((0,Nt.maxAggregate)(t)));return[(0,Nt.overload)((0,Nt.minAnalytic)(t),[e.param],(0,Nt.sql)`MIN(${e.arg})`,{needsWindowOrderBy:!0})]})}Go.fnMinCumulative=lke;function cke(){return z3.flatMap(t=>{let e=(0,Nt.makeParam)("value",(0,Nt.output)((0,Nt.maxAggregate)(t)));return[(0,Nt.overload)((0,Nt.minAnalytic)(t),[e.param],(0,Nt.sql)`MAX(${e.arg})`,{needsWindowOrderBy:!0})]})}Go.fnMaxCumulative=cke;function fke(){return z3.flatMap(t=>{let e=(0,Nt.makeParam)("value",(0,Nt.output)((0,Nt.maxAggregate)(t)));return[(0,Nt.overload)((0,Nt.minAnalytic)(t),[e.param],(0,Nt.sql)`SUM(${e.arg})`,{needsWindowOrderBy:!0})]})}Go.fnSumCumulative=fke;function xke(){return z3.flatMap(t=>{let e=(0,Nt.makeParam)("value",(0,Nt.output)((0,Nt.maxAggregate)(t)));return[(0,Nt.overload)((0,Nt.minAnalytic)(t),[e.param],(0,Nt.sql)`MIN(${e.arg})`,{needsWindowOrderBy:!1})]})}Go.fnMinWindow=xke;function dke(){return z3.flatMap(t=>{let e=(0,Nt.makeParam)("value",(0,Nt.output)((0,Nt.maxAggregate)(t)));return[(0,Nt.overload)((0,Nt.minAnalytic)(t),[e.param],(0,Nt.sql)`MAX(${e.arg})`,{needsWindowOrderBy:!1})]})}Go.fnMaxWindow=dke;function hke(){return z3.flatMap(t=>{let e=(0,Nt.makeParam)("value",(0,Nt.output)((0,Nt.maxAggregate)(t)));return[(0,Nt.overload)((0,Nt.minAnalytic)(t),[e.param],(0,Nt.sql)`SUM(${e.arg})`,{needsWindowOrderBy:!1})]})}Go.fnSumWindow=hke});var kce=v(G3=>{"use strict";Object.defineProperty(G3,"__esModule",{value:!0});G3.fnEndsWith=G3.fnStartsWith=void 0;var Qo=ke();function pke(){let t=(0,Qo.makeParam)("value",(0,Qo.anyExprType)("string")),e=(0,Qo.makeParam)("prefix",(0,Qo.anyExprType)("string"));return[(0,Qo.overload)((0,Qo.minScalar)("boolean"),[t.param,e.param],(0,Qo.sql)`COALESCE(STARTS_WITH(${t.arg}, ${e.arg}), false)`)]}G3.fnStartsWith=pke;function mke(){let t=(0,Qo.makeParam)("value",(0,Qo.anyExprType)("string")),e=(0,Qo.makeParam)("suffix",(0,Qo.anyExprType)("string"));return[(0,Qo.overload)((0,Qo.minScalar)("boolean"),[t.param,e.param],(0,Qo.sql)`COALESCE(ENDS_WITH(${t.arg}, ${e.arg}), false)`)]}G3.fnEndsWith=mke});var Bce=v(KD=>{"use strict";Object.defineProperty(KD,"__esModule",{value:!0});KD.fnIsInf=void 0;var Q3=ke();function gke(){return[(0,Q3.overload)((0,Q3.minScalar)("boolean"),[(0,Q3.param)("value",(0,Q3.anyExprType)("number"))],(0,Q3.sql)`COALESCE(IS_INF(${(0,Q3.arg)("value")}), false)`)]}KD.fnIsInf=gke});var qce=v(XD=>{"use strict";Object.defineProperty(XD,"__esModule",{value:!0});XD.fnIsNan=void 0;var V3=ke();function yke(){return[(0,V3.overload)((0,V3.minScalar)("boolean"),[(0,V3.param)("value",(0,V3.anyExprType)("number"))],(0,V3.sql)`COALESCE(IS_NAN(${(0,V3.arg)("value")}), false)`)]}XD.fnIsNan=yke});var Uce=v(JD=>{"use strict";Object.defineProperty(JD,"__esModule",{value:!0});JD.fnAtan2=void 0;var Hf=ke();function Eke(){return[(0,Hf.overload)((0,Hf.minScalar)("number"),[(0,Hf.param)("y",(0,Hf.anyExprType)("number")),(0,Hf.param)("x",(0,Hf.anyExprType)("number"))],(0,Hf.sql)`ATAN2(${(0,Hf.arg)("y")}, ${(0,Hf.arg)("x")})`)]}JD.fnAtan2=Eke});var $ce=v(ZD=>{"use strict";Object.defineProperty(ZD,"__esModule",{value:!0});ZD.fnPow=void 0;var g1=ke();function Ake(){let t=(0,g1.makeParam)("base",(0,g1.anyExprType)("number")),e=(0,g1.makeParam)("exponent",(0,g1.anyExprType)("number"));return[(0,g1.overload)((0,g1.minScalar)("number"),[t.param,e.param],(0,g1.sql)`POW(${t.arg}, ${e.arg})`)]}ZD.fnPow=Ake});var jce=v(eN=>{"use strict";Object.defineProperty(eN,"__esModule",{value:!0});eN.fnLog=void 0;var y1=ke();function Ske(){let t=(0,y1.makeParam)("value",(0,y1.anyExprType)("number")),e=(0,y1.makeParam)("base",(0,y1.anyExprType)("number"));return[(0,y1.overload)((0,y1.minScalar)("number"),[t.param,e.param],(0,y1.sql)`LOG(${t.arg}, ${e.arg})`)]}eN.fnLog=Ske});var Hce=v(tN=>{"use strict";Object.defineProperty(tN,"__esModule",{value:!0});tN.fnStrpos=void 0;var E1=ke();function vke(){let t=(0,E1.makeParam)("test_string",(0,E1.anyExprType)("string")),e=(0,E1.makeParam)("search_string",(0,E1.anyExprType)("string"));return[(0,E1.overload)((0,E1.minScalar)("number"),[t.param,e.param],(0,E1.sql)`STRPOS(${t.arg}, ${e.arg})`)]}tN.fnStrpos=vke});var zce=v(rN=>{"use strict";Object.defineProperty(rN,"__esModule",{value:!0});rN.fnDiv=void 0;var zf=ke();function _ke(){return[(0,zf.overload)((0,zf.minScalar)("number"),[(0,zf.param)("dividend",(0,zf.anyExprType)("number")),(0,zf.param)("divisor",(0,zf.anyExprType)("number"))],(0,zf.sql)`DIV(${(0,zf.arg)("dividend")}, ${(0,zf.arg)("divisor")})`)]}rN.fnDiv=_ke});var Qce=v(W3=>{"use strict";Object.defineProperty(W3,"__esModule",{value:!0});W3.fnLeast=W3.fnGreatest=void 0;var A1=ke(),bke=["string","number","timestamp","date","json"];function Gce(t){return bke.map(e=>(0,A1.overload)((0,A1.minScalar)(e),[(0,A1.params)("values",(0,A1.anyExprType)(e))],[(0,A1.sqlFragment)(`${t}(`,(0,A1.spread)((0,A1.arg)("values")),")")]))}var Tke=()=>Gce("GREATEST");W3.fnGreatest=Tke;var Cke=()=>Gce("LEAST");W3.fnLeast=Cke});var Vce=v(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});Ld.fnRtrim=Ld.fnLtrim=Ld.fnTrim=void 0;var uo=ke();function Tz(t){return[(0,uo.overload)((0,uo.minScalar)("string"),[(0,uo.param)("value",(0,uo.anyExprType)("string"))],[(0,uo.sqlFragment)(`${t}(`,(0,uo.arg)("value"),")")]),(0,uo.overload)((0,uo.minScalar)("string"),[(0,uo.param)("value",(0,uo.anyExprType)("string")),(0,uo.param)("trim_characters",(0,uo.anyExprType)("string"))],[(0,uo.sqlFragment)(`${t}(`,(0,uo.arg)("value"),",",(0,uo.arg)("trim_characters"),")")])]}var Rke=()=>Tz("TRIM");Ld.fnTrim=Rke;var Oke=()=>Tz("LTRIM");Ld.fnLtrim=Oke;var Dke=()=>Tz("RTRIM");Ld.fnRtrim=Dke});var Wce=v(nN=>{"use strict";Object.defineProperty(nN,"__esModule",{value:!0});nN.fnRand=void 0;var Cz=ke();function Nke(){return[(0,Cz.overload)((0,Cz.minScalar)("number"),[],(0,Cz.sql)`RAND()`)]}nN.fnRand=Nke});var Yce=v(iN=>{"use strict";Object.defineProperty(iN,"__esModule",{value:!0});iN.fnPi=void 0;var Rz=ke();function Fke(){return[(0,Rz.overload)((0,Rz.minScalar)("number"),[],(0,Rz.sql)`PI()`)]}iN.fnPi=Fke});var Kce=v(sN=>{"use strict";Object.defineProperty(sN,"__esModule",{value:!0});sN.fnRepeat=void 0;var S1=ke();function wke(){let t=(0,S1.makeParam)("value",(0,S1.anyExprType)("string")),e=(0,S1.makeParam)("count",(0,S1.anyExprType)("number"));return[(0,S1.overload)((0,S1.minScalar)("string"),[t.param,e.param],(0,S1.sql)`REPEAT(${t.arg}, ${e.arg})`)]}sN.fnRepeat=wke});var Xce=v(oN=>{"use strict";Object.defineProperty(oN,"__esModule",{value:!0});oN.fnReverse=void 0;var H_=ke();function Lke(){let t=(0,H_.makeParam)("value",(0,H_.anyExprType)("string"));return[(0,H_.overload)((0,H_.minScalar)("string"),[t.param],(0,H_.sql)`REVERSE(${t.arg})`)]}oN.fnReverse=Lke});var Jce=v(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.fnExp=Kt.fnLn=Kt.fnSqrt=Kt.fnAbs=Kt.fnFloor=Kt.fnCeil=Kt.fnSign=Kt.fnAtan=Kt.fnTan=Kt.fnAsin=Kt.fnSin=Kt.fnAcos=Kt.fnCos=Kt.simple=void 0;var Y3=ke();function Vo(t){return[(0,Y3.overload)((0,Y3.minScalar)("number"),[(0,Y3.param)("value",(0,Y3.anyExprType)("number"))],[(0,Y3.sqlFragment)(`${t}(`,(0,Y3.arg)("value"),")")])]}Kt.simple=Vo;var Ike=()=>Vo("COS");Kt.fnCos=Ike;var Mke=()=>Vo("ACOS");Kt.fnAcos=Mke;var Pke=()=>Vo("SIN");Kt.fnSin=Pke;var kke=()=>Vo("ASIN");Kt.fnAsin=kke;var Bke=()=>Vo("TAN");Kt.fnTan=Bke;var qke=()=>Vo("ATAN");Kt.fnAtan=qke;var Uke=()=>Vo("SIGN");Kt.fnSign=Uke;var $ke=()=>Vo("CEIL");Kt.fnCeil=$ke;var jke=()=>Vo("FLOOR");Kt.fnFloor=jke;var Hke=()=>Vo("ABS");Kt.fnAbs=Hke;var zke=()=>Vo("SQRT");Kt.fnSqrt=zke;var Gke=()=>Vo("LN");Kt.fnLn=Gke;var Qke=()=>Vo("EXP");Kt.fnExp=Qke});var Zce=v(aN=>{"use strict";Object.defineProperty(aN,"__esModule",{value:!0});aN.fnAvgRolling=void 0;var lo=ke(),Vke=["string","number","timestamp","date"];function Wke(){return Vke.flatMap(t=>{let e=(0,lo.makeParam)("value",(0,lo.output)((0,lo.maxAggregate)(t))),r=(0,lo.makeParam)("preceding",(0,lo.literal)((0,lo.maxScalar)("number"))),n=(0,lo.makeParam)("following",(0,lo.literal)((0,lo.maxScalar)("number")));return[(0,lo.overload)((0,lo.minAnalytic)(t),[e.param,r.param],(0,lo.sql)`AVG(${e.arg})`,{needsWindowOrderBy:!0,between:{preceding:"preceding",following:0}}),(0,lo.overload)((0,lo.minAnalytic)(t),[e.param,r.param,n.param],(0,lo.sql)`AVG(${e.arg})`,{needsWindowOrderBy:!0,between:{preceding:"preceding",following:"following"}})]})}aN.fnAvgRolling=Wke});var efe=v(uN=>{"use strict";Object.defineProperty(uN,"__esModule",{value:!0});uN.FunctionMap=void 0;var Oz=class t{constructor(e){this.functions=new Map,this.sealed=!1,this.getters=e??new Map}clone(){return new t(new Map(this.getters))}add(e,r){this.ensureNotSealed(),this.getters.set(e,r)}get(e){this.ensureSealed();let r=this.functions.get(e);if(r)return r;let n=this.getters.get(e);if(n===void 0)return;let i=n();return this.functions.set(e,i),i}delete(e){this.ensureNotSealed(),this.functions.delete(e),this.getters.delete(e)}seal(){this.sealed=!0}ensureNotSealed(){if(this.sealed)throw new Error("Cannot update sealed FunctionMap")}ensureSealed(){if(!this.sealed)throw new Error("Cannot get from unsealed FunctionMap")}};uN.FunctionMap=Oz});var tfe=v(lN=>{"use strict";Object.defineProperty(lN,"__esModule",{value:!0});lN.fnCoalesce=void 0;var v1=ke(),Yke=["string","number","timestamp","date","json"];function Kke(){return Yke.map(t=>(0,v1.overload)((0,v1.minScalar)(t),[(0,v1.params)("values",(0,v1.anyExprType)(t))],(0,v1.sql)`COALESCE(${(0,v1.spread)((0,v1.arg)("values"))})`))}lN.fnCoalesce=Kke});var ofe=v(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.FUNCTIONS=void 0;var Xke=gce(),Jke=yce(),Zke=Ece(),eBe=Ace(),tBe=Sce(),Dz=vce(),rBe=_ce(),nBe=bce(),iBe=Tce(),sBe=Cce(),rfe=Rce(),oBe=Oce(),aBe=Dce(),uBe=Nce(),lBe=Fce(),cBe=wce(),fBe=Lce(),nfe=Mce(),K3=Pce(),ife=kce(),xBe=Bce(),dBe=qce(),hBe=Uce(),pBe=$ce(),mBe=jce(),gBe=Hce(),yBe=zce(),sfe=Qce(),Nz=Vce(),EBe=Wce(),ABe=Yce(),SBe=Kce(),vBe=Xce(),wa=Jce(),_Be=Zce(),bBe=efe(),TBe=tfe();Be.FUNCTIONS=new bBe.FunctionMap;Be.FUNCTIONS.add("concat",Xke.fnConcat);Be.FUNCTIONS.add("round",eBe.fnRound);Be.FUNCTIONS.add("trunc",Jke.fnTrunc);Be.FUNCTIONS.add("floor",wa.fnFloor);Be.FUNCTIONS.add("ceil",wa.fnCeil);Be.FUNCTIONS.add("cos",wa.fnCos);Be.FUNCTIONS.add("acos",wa.fnAcos);Be.FUNCTIONS.add("sin",wa.fnSin);Be.FUNCTIONS.add("asin",wa.fnAsin);Be.FUNCTIONS.add("tan",wa.fnTan);Be.FUNCTIONS.add("atan",wa.fnAtan);Be.FUNCTIONS.add("atan2",hBe.fnAtan2);Be.FUNCTIONS.add("lower",tBe.fnLower);Be.FUNCTIONS.add("upper",rBe.fnUpper);Be.FUNCTIONS.add("sqrt",wa.fnSqrt);Be.FUNCTIONS.add("pow",pBe.fnPow);Be.FUNCTIONS.add("abs",wa.fnAbs);Be.FUNCTIONS.add("sign",wa.fnSign);Be.FUNCTIONS.add("is_inf",xBe.fnIsInf);Be.FUNCTIONS.add("is_nan",dBe.fnIsNan);Be.FUNCTIONS.add("greatest",sfe.fnGreatest);Be.FUNCTIONS.add("least",sfe.fnLeast);Be.FUNCTIONS.add("div",yBe.fnDiv);Be.FUNCTIONS.add("strpos",gBe.fnStrpos);Be.FUNCTIONS.add("starts_with",ife.fnStartsWith);Be.FUNCTIONS.add("ends_with",ife.fnEndsWith);Be.FUNCTIONS.add("trim",Nz.fnTrim);Be.FUNCTIONS.add("ltrim",Nz.fnLtrim);Be.FUNCTIONS.add("rtrim",Nz.fnRtrim);Be.FUNCTIONS.add("rand",EBe.fnRand);Be.FUNCTIONS.add("pi",ABe.fnPi);Be.FUNCTIONS.add("substr",nBe.fnSubstr);Be.FUNCTIONS.add("regexp_extract",iBe.fnRegexpExtract);Be.FUNCTIONS.add("replace",sBe.fnReplace);Be.FUNCTIONS.add("length",rfe.fnLength);Be.FUNCTIONS.add("byte_length",rfe.fnByteLength);Be.FUNCTIONS.add("ifnull",oBe.fnIfnull);Be.FUNCTIONS.add("coalesce",TBe.fnCoalesce);Be.FUNCTIONS.add("nullif",aBe.fnNullif);Be.FUNCTIONS.add("chr",Dz.fnChr);Be.FUNCTIONS.add("ascii",Dz.fnAscii);Be.FUNCTIONS.add("unicode",Dz.fnUnicode);Be.FUNCTIONS.add("repeat",SBe.fnRepeat);Be.FUNCTIONS.add("reverse",vBe.fnReverse);Be.FUNCTIONS.add("log",mBe.fnLog);Be.FUNCTIONS.add("ln",wa.fnLn);Be.FUNCTIONS.add("exp",wa.fnExp);Be.FUNCTIONS.add("stddev",Zke.fnStddev);Be.FUNCTIONS.add("row_number",uBe.fnRowNumber);Be.FUNCTIONS.add("lag",lBe.fnLag);Be.FUNCTIONS.add("lead",cBe.fnLead);Be.FUNCTIONS.add("rank",fBe.fnRank);Be.FUNCTIONS.add("first_value",nfe.fnFirstValueWindow);Be.FUNCTIONS.add("last_value",nfe.fnLastValueWindow);Be.FUNCTIONS.add("min_cumulative",K3.fnMinCumulative);Be.FUNCTIONS.add("max_cumulative",K3.fnMaxCumulative);Be.FUNCTIONS.add("sum_cumulative",K3.fnSumCumulative);Be.FUNCTIONS.add("min_window",K3.fnMinWindow);Be.FUNCTIONS.add("max_window",K3.fnMaxWindow);Be.FUNCTIONS.add("sum_window",K3.fnSumWindow);Be.FUNCTIONS.add("avg_moving",_Be.fnAvgRolling);Be.FUNCTIONS.seal()});var z_=v(cN=>{"use strict";Object.defineProperty(cN,"__esModule",{value:!0});cN.FUNCTIONS=void 0;var CBe=ofe();Object.defineProperty(cN,"FUNCTIONS",{enumerable:!0,get:function(){return CBe.FUNCTIONS}})});var afe=v(fN=>{"use strict";Object.defineProperty(fN,"__esModule",{value:!0});fN.fnChr=void 0;var G_=ke();function RBe(){let t=(0,G_.makeParam)("value",(0,G_.anyExprType)("number"));return[(0,G_.overload)((0,G_.minScalar)("string"),[t.param],(0,G_.sql)`CASE WHEN IFNULL(${t.arg}, 1) = 0 THEN '' ELSE CHR(${t.arg}) END`)]}fN.fnChr=RBe});var ufe=v(xN=>{"use strict";Object.defineProperty(xN,"__esModule",{value:!0});xN.fnPi=void 0;var Fz=ke();function OBe(){return[(0,Fz.overload)((0,Fz.minScalar)("number"),[],(0,Fz.sql)`ACOS(-1)`)]}xN.fnPi=OBe});var lfe=v(_1=>{"use strict";Object.defineProperty(_1,"__esModule",{value:!0});_1.STANDARDSQL_FUNCTIONS=void 0;var DBe=z_(),NBe=afe(),FBe=ufe();_1.STANDARDSQL_FUNCTIONS=DBe.FUNCTIONS.clone();_1.STANDARDSQL_FUNCTIONS.add("pi",FBe.fnPi);_1.STANDARDSQL_FUNCTIONS.add("chr",NBe.fnChr);_1.STANDARDSQL_FUNCTIONS.seal()});var cfe=v(dN=>{"use strict";Object.defineProperty(dN,"__esModule",{value:!0});dN.STANDARDSQL_FUNCTIONS=void 0;var wBe=lfe();Object.defineProperty(dN,"STANDARDSQL_FUNCTIONS",{enumerable:!0,get:function(){return wBe.STANDARDSQL_FUNCTIONS}})});var Lz=v(pN=>{"use strict";Object.defineProperty(pN,"__esModule",{value:!0});pN.StandardSQLDialect=void 0;var ffe=Fd(),Ln=Xe(),LBe=cfe(),IBe=P_();function xfe(t){return["microsecond","millisecond","second","minute","hour","day"].includes(t)}function MBe(t){return["day","week","month","quarter","year"].includes(t)}var PBe={day_of_week:"dayofweek",day_of_year:"dayofyear"};function hN(t){let e=t.queryTimezone;if(e&&e!=="UTC")return e}var kBe={DATE:{type:"date"},STRING:{type:"string"},INTEGER:{type:"number",numberType:"integer"},INT64:{type:"number",numberType:"integer"},FLOAT:{type:"number",numberType:"float"},FLOAT64:{type:"number",numberType:"float"},NUMERIC:{type:"number",numberType:"float"},BIGNUMERIC:{type:"number",numberType:"float"},TIMESTAMP:{type:"timestamp"},BOOLEAN:{type:"boolean"},BOOL:{type:"boolean"},JSON:{type:"json"}},wz=class extends IBe.Dialect{constructor(){super(...arguments),this.name="standardsql",this.defaultNumberType="FLOAT64",this.defaultDecimalType="NUMERIC",this.udfPrefix="__udf",this.hasFinalStage=!1,this.divisionIsInteger=!1,this.supportsSumDistinctFunction=!1,this.unnestWithNumbers=!1,this.defaultSampling={enable:!1},this.supportUnnestArrayAgg=!1,this.supportsAggDistinct=!1,this.supportsCTEinCoorelatedSubQueries=!1,this.dontUnionIndex=!0,this.supportsQualify=!0,this.supportsSafeCast=!0,this.supportsNesting=!0,this.cantPartitionWindowFunctionsOnExpressions=!0,this.keywords=`
  ALL
  AND
  ANY
  ARRAY
  AS
  ASC
  ASSERT_ROWS_MODIFIED
  AT
  BETWEEN
  BY
  CASE
  CAST
  COLLATE
  CONTAINS
  CREATE
  CROSS
  CUBE
  CURRENT
  DEFAULT
  DEFINE
  DESC
  DISTINCT
  ELSE
  END
  ENUM
  ESCAPE
  EXCEPT
  EXCLUDE
  EXISTS
  EXTRACT
  FALSE
  FETCH
  FOLLOWING
  FOR
  FROM
  FULL
  GROUP
  GROUPING
  GROUPS
  HASH
  HAVING
  IF
  IGNORE
  IN
  INNER
  INTERSECT
  INTERVAL
  INTO
  IS
  JOIN
  LATERAL
  LEFT
  LIKE
  LIMIT
  LOOKUP
  MERGE
  NATURAL
  NEW
  NO
  NOT
  NULL
  NULLS
  OF
  ON
  OR
  ORDER
  OUTER
  OVER
  PARTITION
  PRECEDING
  PROTO
  RANGE
  RECURSIVE
  RESPECT
  RIGHT
  ROLLUP
  ROWS
  SELECT
  SET
  SOME
  STRUCT
  TABLESAMPLE
  THEN
  TO
  TREAT
  TRUE
  UNBOUNDED
  UNION
  UNNEST
  USING
  WHEN
  WHERE
  WINDOW
  WITH
  WITHIN`.split(/\s/)}quoteTablePath(e){return`\`${e}\``}sqlGroupSetTable(e){return`CROSS JOIN (SELECT row_number() OVER() -1  group_set FROM UNNEST(GENERATE_ARRAY(0,${e},1)))`}sqlAnyValue(e,r){return`ANY_VALUE(CASE WHEN group_set=${e} THEN ${r} END)`}sqlAggregateTurtle(e,r,n,i){let s="";i!==void 0&&(s+=` LIMIT ${i}`);let o=r.map(a=>`
  ${a.sqlExpression} as ${a.sqlOutputName}`).join(", ");return`ARRAY_AGG(CASE WHEN group_set=${e} THEN STRUCT(${o}
  ) END IGNORE NULLS ${n} ${s})`}sqlAnyValueTurtle(e,r){let n=r.map(i=>`${i.sqlExpression} as ${i.sqlOutputName}`).join(", ");return`ANY_VALUE(CASE WHEN group_set=${e} THEN STRUCT(${n}))`}sqlAnyValueLastTurtle(e,r,n){return`ANY_VALUE(CASE WHEN group_set=${r} THEN ${e} END) as ${n}`}sqlCoaleseMeasuresInline(e,r){let n=r.map(s=>`${s.sqlExpression} as ${s.sqlOutputName}`).join(", "),i=r.map(s=>`NULL as ${s.sqlOutputName}`).join(", ");return`COALESCE(ANY_VALUE(CASE WHEN group_set=${e} THEN STRUCT(${n}) END), STRUCT(${i}))`}sqlUnnestAlias(e,r,n,i,s,o){return s?i?`LEFT JOIN UNNEST(ARRAY(( SELECT AS STRUCT row_number() over() as __row_id, value FROM UNNEST(${e}) value))) as ${r}`:`LEFT JOIN UNNEST(ARRAY((SELECT AS STRUCT value FROM unnest(${e}) value))) as ${r}`:i?`LEFT JOIN UNNEST(ARRAY(( SELECT AS STRUCT row_number() over() as __row_id, * FROM UNNEST(${e})))) as ${r}`:`LEFT JOIN UNNEST(${e}) as ${r}`}sqlSumDistinctHashedKey(e){e=`CAST(${e} AS STRING)`;let r=`cast(cast(concat('0x', substr(to_hex(md5(${e})), 1, 15)) as int64) as numeric) * 4294967296`,n=`cast(cast(concat('0x', substr(to_hex(md5(${e})), 16, 8)) as int64) as numeric)`;return`(${r} + ${n}) * 0.000000001`}sqlGenerateUUID(){return"GENERATE_UUID()"}sqlFieldReference(e,r,n,i,s){return`${e}.${r}`}sqlUnnestPipelineHead(e,r){let n=r;return e&&(n=`[${n}]`),`UNNEST(${n})`}sqlCreateFunction(e,r){return`CREATE TEMPORARY FUNCTION ${e}(__param ANY TYPE) AS ((
${(0,ffe.indent)(r)}));
`}sqlCreateTableAsSelect(e,r){return`
CREATE TABLE IF NOT EXISTS \`${e}\`
OPTIONS (
    expiration_timestamp=TIMESTAMP_ADD(current_timestamp(),  INTERVAL 1 hour)
)
AS (
${(0,ffe.indent)(r)}
);
`}sqlCreateFunctionCombineLastStage(e){return`SELECT ARRAY((SELECT AS STRUCT * FROM ${e}))
`}sqlSelectAliasAsStruct(e){return`(SELECT AS STRUCT ${e}.*)`}sqlMaybeQuoteIdentifier(e){return"`"+e+"`"}sqlNow(){return(0,Ln.mkExpr)`CURRENT_TIMESTAMP()`}sqlTrunc(e,r,n){let i=hN(e),s=i?`, "${i}"`:"";return r.valueType==="date"?MBe(n)?(0,Ln.mkExpr)`DATE_TRUNC(${r.value},${n})`:(0,Ln.mkExpr)`TIMESTAMP(${r.value}${s})`:(0,Ln.mkExpr)`TIMESTAMP_TRUNC(${r.value},${n}${s})`}sqlExtract(e,r,n){let i=PBe[n]||n,s=r.valueType==="timestamp"&&hN(e),o=s?` AT TIME ZONE '${s}'`:"";return(0,Ln.mkExpr)`EXTRACT(${i} FROM ${r.value}${o})`}sqlAlterTime(e,r,n,i){let s=r.value,o=r.valueType;i!=="day"&&xfe(i)?(o="timestamp",r.valueType!=="timestamp"&&(s=(0,Ln.mkExpr)`TIMESTAMP(${s})`)):r.valueType==="timestamp"&&(s=(0,Ln.mkExpr)`DATETIME(${s})`,o="datetime");let a=o.toUpperCase()+(e==="+"?"_ADD":"_SUB"),u=(0,Ln.mkExpr)`${a}(${s}, INTERVAL ${n} ${i})`;return o===r.valueType?u:(0,Ln.mkExpr)`${r.valueType.toUpperCase()}(${u})`}ignoreInProject(e){return e==="_PARTITIONTIME"}sqlCast(e,r){let n=`${r.srcType}::${r.dstType}`,i=hN(e);if(n==="timestamp::date"&&i)return(0,Ln.mkExpr)`DATE(${r.expr},'${i}')`;if(n==="date::timestamp"&&i)return(0,Ln.mkExpr)`TIMESTAMP(${r.expr}, '${i}')`;if(r.srcType!==r.dstType){let s=typeof r.dstType=="string"?this.malloyTypeToSQLType({type:r.dstType}):r.dstType.raw,o=r.safe?"SAFE_CAST":"CAST";return(0,Ln.mkExpr)`${o}(${r.expr} AS ${s})`}return r.expr}sqlRegexpMatch(e,r){return(0,Ln.mkExpr)`REGEXP_CONTAINS(${e}, ${r})`}sqlLiteralTime(e,r,n,i){if(n==="date")return`DATE('${r}')`;if(n==="timestamp"){let s=`'${r}'`,o=i||hN(e);return o&&o!=="UTC"&&(s+=`,'${o}'`),`TIMESTAMP(${s})`}else throw new Error(`Unsupported Literal time format ${n}`)}sqlMeasureTime(e,r,n){let i={microsecond:{use:"microsecond",ratio:1},millisecond:{use:"microsecond",ratio:1e3},second:{use:"millisecond",ratio:1e3},minute:{use:"second",ratio:60},hour:{use:"minute",ratio:60},day:{use:"hour",ratio:24},week:{use:"day",ratio:7}},s=e.value,o=r.value;if(i[n]){let{use:a,ratio:u}=i[n];if(!xfe(a))throw new Error(`Measure in '${a} not implemented`);if(e.valueType!==r.valueType)throw new Error("Can't measure difference between different types");e.valueType==="date"&&(s=(0,Ln.mkExpr)`TIMESTAMP(${s})`,o=(0,Ln.mkExpr)`TIMESTAMP(${o})`);let l=(0,Ln.mkExpr)`TIMESTAMP_DIFF(${o},${s},${a})`;return u!==1&&(l=(0,Ln.mkExpr)`FLOOR(${l}/${u.toString()}.0)`),l}throw new Error(`Measure '${n} not implemented`)}sqlSampleTable(e,r){if(r!==void 0){if((0,Ln.isSamplingEnable)(r)&&r.enable&&(r=this.defaultSampling),(0,Ln.isSamplingRows)(r))throw new Error("StandardSQL doesn't support sampling by rows only percent");if((0,Ln.isSamplingPercent)(r))return`(SELECT * FROM ${e}  TABLESAMPLE SYSTEM (${r.percent} PERCENT))`}return e}sqlLiteralString(e){return"'"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"}sqlLiteralRegexp(e){return"'"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"}getGlobalFunctionDef(e){return LBe.STANDARDSQL_FUNCTIONS.get(e)}malloyTypeToSQLType(e){return e.type==="number"?e.numberType==="integer"?"INT64":"FLOAT64":e.type}sqlTypeToMalloyType(e){var r,n;let i=(n=(r=e.match(/^(\w+)/))===null||r===void 0?void 0:r.at(0))!==null&&n!==void 0?n:e;return kBe[i.toUpperCase()]}castToString(e){return`CAST(${e} as STRING)`}concat(...e){return e.join(" || ")}validateTypeName(e){return e.match(/^[A-Za-z\s(),<>0-9]*$/)!==null}};pN.StandardSQLDialect=wz});var Iz=v(b1=>{"use strict";var BBe=b1&&b1.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qBe=b1&&b1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&BBe(e,t,r)};Object.defineProperty(b1,"__esModule",{value:!0});qBe(Lz(),b1)});var dfe=v(mN=>{"use strict";Object.defineProperty(mN,"__esModule",{value:!0});mN.fnByteLength=void 0;var X3=ke();function UBe(){return[(0,X3.overload)((0,X3.minScalar)("number"),[(0,X3.param)("value",(0,X3.anyExprType)("string"))],(0,X3.sql)`OCTET_LENGTH(${(0,X3.arg)("value")})`)]}mN.fnByteLength=UBe});var hfe=v(gN=>{"use strict";Object.defineProperty(gN,"__esModule",{value:!0});gN.fnEndsWith=void 0;var T1=ke();function $Be(){let t=(0,T1.makeParam)("value",(0,T1.anyExprType)("string")),e=(0,T1.makeParam)("suffix",(0,T1.anyExprType)("string"));return[(0,T1.overload)((0,T1.minScalar)("boolean"),[t.param,e.param],(0,T1.sql)`COALESCE(RIGHT(${t.arg}, LENGTH(${e.arg})) = ${e.arg}, false)`)]}gN.fnEndsWith=$Be});var mfe=v(J3=>{"use strict";Object.defineProperty(J3,"__esModule",{value:!0});J3.fnLeast=J3.fnGreatest=void 0;var Gf=ke(),jBe=["string","number","timestamp","date","json"];function pfe(t){return jBe.map(e=>(0,Gf.overload)((0,Gf.minScalar)(e),[(0,Gf.params)("values",(0,Gf.anyExprType)(e))],[(0,Gf.sqlFragment)("CASE WHEN NUM_NULLS(",(0,Gf.spread)((0,Gf.arg)("values")),`) > 0 THEN NULL ELSE ${t}(`,(0,Gf.spread)((0,Gf.arg)("values")),") END")]))}var HBe=()=>pfe("GREATEST");J3.fnGreatest=HBe;var zBe=()=>pfe("LEAST");J3.fnLeast=zBe});var gfe=v(yN=>{"use strict";Object.defineProperty(yN,"__esModule",{value:!0});yN.fnIfnull=void 0;var Qf=ke(),GBe=["string","number","timestamp","date","json"];function QBe(){return GBe.map(t=>(0,Qf.overload)((0,Qf.minScalar)(t),[(0,Qf.param)("value",(0,Qf.anyExprType)(t)),(0,Qf.param)("default",(0,Qf.anyExprType)(t))],(0,Qf.sql)`COALESCE(${(0,Qf.arg)("value")}, ${(0,Qf.arg)("default")})`))}yN.fnIfnull=QBe});var yfe=v(EN=>{"use strict";Object.defineProperty(EN,"__esModule",{value:!0});EN.fnIsInf=void 0;var Q_=ke();function VBe(){let t=(0,Q_.makeParam)("value",(0,Q_.anyExprType)("number"));return[(0,Q_.overload)((0,Q_.minScalar)("boolean"),[t.param],(0,Q_.sql)`COALESCE(${t.arg} = DOUBLE PRECISION 'Infinity' OR ${t.arg} = DOUBLE PRECISION '-Infinity', false)`)]}EN.fnIsInf=VBe});var Efe=v(AN=>{"use strict";Object.defineProperty(AN,"__esModule",{value:!0});AN.fnIsNan=void 0;var Z3=ke();function WBe(){return[(0,Z3.overload)((0,Z3.minScalar)("boolean"),[(0,Z3.param)("value",(0,Z3.anyExprType)("number"))],(0,Z3.sql)`COALESCE(${(0,Z3.arg)("value")} = NUMERIC 'NaN', false)`)]}AN.fnIsNan=WBe});var Afe=v(SN=>{"use strict";Object.defineProperty(SN,"__esModule",{value:!0});SN.fnLog=void 0;var C1=ke();function YBe(){let t=(0,C1.makeParam)("value",(0,C1.anyExprType)("number")),e=(0,C1.makeParam)("base",(0,C1.anyExprType)("number"));return[(0,C1.overload)((0,C1.minScalar)("number"),[t.param,e.param],(0,C1.sql)`LOG(${e.arg}, ${t.arg})`)]}SN.fnLog=YBe});var Sfe=v(vN=>{"use strict";Object.defineProperty(vN,"__esModule",{value:!0});vN.fnRand=void 0;var Mz=ke();function KBe(){return[(0,Mz.overload)((0,Mz.minScalar)("number"),[],(0,Mz.sql)`RANDOM()`)]}vN.fnRand=KBe});var vfe=v(_N=>{"use strict";Object.defineProperty(_N,"__esModule",{value:!0});_N.fnRegexpExtract=void 0;var R1=ke();function XBe(){let t=(0,R1.makeParam)("value",(0,R1.anyExprType)("string")),e=(0,R1.makeParam)("pattern",(0,R1.anyExprType)("regular expression"));return[(0,R1.overload)((0,R1.minScalar)("string"),[t.param,e.param],(0,R1.sql)`SUBSTRING(${t.arg}, ${e.arg})`)]}_N.fnRegexpExtract=XBe});var _fe=v(bN=>{"use strict";Object.defineProperty(bN,"__esModule",{value:!0});bN.fnReplace=void 0;var Wo=ke();function JBe(){let t=(0,Wo.makeParam)("value",(0,Wo.anyExprType)("string")),e=(0,Wo.makeParam)("pattern",(0,Wo.anyExprType)("string")),r=(0,Wo.makeParam)("pattern",(0,Wo.anyExprType)("regular expression")),n=(0,Wo.makeParam)("replacement",(0,Wo.anyExprType)("string"));return[(0,Wo.overload)((0,Wo.minScalar)("string"),[t.param,e.param,n.param],(0,Wo.sql)`REPLACE(${t.arg}, ${e.arg}, ${n.arg})`),(0,Wo.overload)((0,Wo.minScalar)("string"),[t.param,r.param,n.param],(0,Wo.sql)`REGEXP_REPLACE(${t.arg}, ${r.arg}, ${n.arg}, 'g')`)]}bN.fnReplace=JBe});var bfe=v(TN=>{"use strict";Object.defineProperty(TN,"__esModule",{value:!0});TN.fnRound=void 0;var Y0=ke();function ZBe(){let t=(0,Y0.makeParam)("value",(0,Y0.anyExprType)("number")),e=(0,Y0.makeParam)("precision",(0,Y0.anyExprType)("number"));return[(0,Y0.overload)((0,Y0.minScalar)("number"),[t.param],(0,Y0.sql)`ROUND((${t.arg})::NUMERIC)`),(0,Y0.overload)((0,Y0.minScalar)("number"),[t.param,e.param],(0,Y0.sql)`ROUND((${t.arg})::NUMERIC, ${e.arg})`)]}TN.fnRound=ZBe});var Tfe=v(CN=>{"use strict";Object.defineProperty(CN,"__esModule",{value:!0});CN.fnStddev=void 0;var V_=ke();function eqe(){let t=(0,V_.makeParam)("value",(0,V_.maxScalar)("number"));return[(0,V_.overload)((0,V_.minAggregate)("number"),[t.param],(0,V_.sql)`STDDEV(${t.arg}::DOUBLE PRECISION)`)]}CN.fnStddev=eqe});var Cfe=v(RN=>{"use strict";Object.defineProperty(RN,"__esModule",{value:!0});RN.fnSubstr=void 0;var Cu=ke();function tqe(){let t=(0,Cu.makeParam)("value",(0,Cu.anyExprType)("string")),e=(0,Cu.makeParam)("position",(0,Cu.anyExprType)("number")),r=(0,Cu.makeParam)("length",(0,Cu.anyExprType)("number"));return[(0,Cu.overload)((0,Cu.minScalar)("string"),[t.param,e.param],(0,Cu.sql)`SUBSTR(${t.arg}, CASE WHEN ${e.arg} < 0 THEN LENGTH(${t.arg}) + ${e.arg} + 1 ELSE ${e.arg} END)`),(0,Cu.overload)((0,Cu.minScalar)("string"),[t.param,e.param,r.param],(0,Cu.sql)`SUBSTR(${t.arg}, CASE WHEN ${e.arg} < 0 THEN LENGTH(${t.arg}) + ${e.arg} + 1 ELSE ${e.arg} END, ${r.arg})`)]}RN.fnSubstr=tqe});var Rfe=v(ON=>{"use strict";Object.defineProperty(ON,"__esModule",{value:!0});ON.fnTrunc=void 0;var K0=ke();function rqe(){let t=(0,K0.makeParam)("value",(0,K0.anyExprType)("number")),e=(0,K0.makeParam)("precision",(0,K0.anyExprType)("number"));return[(0,K0.overload)((0,K0.minScalar)("number"),[t.param],(0,K0.sql)`TRUNC(${t.arg}::NUMERIC)`),(0,K0.overload)((0,K0.minScalar)("number"),[t.param,e.param],(0,K0.sql)`TRUNC((${t.arg}::NUMERIC), ${e.arg})`)]}ON.fnTrunc=rqe});var Ofe=v(DN=>{"use strict";Object.defineProperty(DN,"__esModule",{value:!0});DN.fnUnicode=void 0;var ey=ke();function nqe(){return[(0,ey.overload)((0,ey.minScalar)("number"),[(0,ey.param)("value",(0,ey.anyExprType)("string"))],(0,ey.sql)`ASCII(${(0,ey.arg)("value")})`)]}DN.fnUnicode=nqe});var Nfe=v(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.POSTGRES_FUNCTIONS=void 0;var iqe=z_(),sqe=dfe(),oqe=hfe(),Dfe=mfe(),aqe=gfe(),uqe=yfe(),lqe=Efe(),cqe=Afe(),fqe=Sfe(),xqe=vfe(),dqe=_fe(),hqe=bfe(),pqe=Tfe(),mqe=Cfe(),gqe=Rfe(),yqe=Ofe();vn.POSTGRES_FUNCTIONS=iqe.FUNCTIONS.clone();vn.POSTGRES_FUNCTIONS.add("regexp_extract",xqe.fnRegexpExtract);vn.POSTGRES_FUNCTIONS.add("stddev",pqe.fnStddev);vn.POSTGRES_FUNCTIONS.add("rand",fqe.fnRand);vn.POSTGRES_FUNCTIONS.add("greatest",Dfe.fnGreatest);vn.POSTGRES_FUNCTIONS.add("least",Dfe.fnLeast);vn.POSTGRES_FUNCTIONS.add("is_nan",lqe.fnIsNan);vn.POSTGRES_FUNCTIONS.add("is_inf",uqe.fnIsInf);vn.POSTGRES_FUNCTIONS.add("round",hqe.fnRound);vn.POSTGRES_FUNCTIONS.add("byte_length",sqe.fnByteLength);vn.POSTGRES_FUNCTIONS.add("unicode",yqe.fnUnicode);vn.POSTGRES_FUNCTIONS.add("ifnull",aqe.fnIfnull);vn.POSTGRES_FUNCTIONS.add("trunc",gqe.fnTrunc);vn.POSTGRES_FUNCTIONS.add("substr",mqe.fnSubstr);vn.POSTGRES_FUNCTIONS.add("replace",dqe.fnReplace);vn.POSTGRES_FUNCTIONS.add("ends_with",oqe.fnEndsWith);vn.POSTGRES_FUNCTIONS.add("log",cqe.fnLog);vn.POSTGRES_FUNCTIONS.seal()});var Ffe=v(NN=>{"use strict";Object.defineProperty(NN,"__esModule",{value:!0});NN.POSTGRES_FUNCTIONS=void 0;var Eqe=Nfe();Object.defineProperty(NN,"POSTGRES_FUNCTIONS",{enumerable:!0,get:function(){return Eqe.POSTGRES_FUNCTIONS}})});var Ife=v(FN=>{"use strict";Object.defineProperty(FN,"__esModule",{value:!0});FN.PostgresDialect=void 0;var Aqe=Fd(),ar=Xe(),wfe=Ffe(),W_=P_(),Sqe={day_of_week:"dow",day_of_year:"doy"},vqe={year:"years",month:"months",week:"weeks",day:"days",hour:"hours",minute:"mins",second:"secs"},Lfe={second:1,minute:60,hour:3600,day:24*3600,week:7*24*3600},_qe={"character varying":{type:"string"},name:{type:"string"},text:{type:"string"},date:{type:"date"},integer:{type:"number",numberType:"integer"},bigint:{type:"number",numberType:"integer"},"double precision":{type:"number",numberType:"float"},"timestamp without time zone":{type:"timestamp"},oid:{type:"string"},boolean:{type:"boolean"},timestamp:{type:"timestamp"},'"char"':{type:"string"},character:{type:"string"},smallint:{type:"number",numberType:"integer"},xid:{type:"string"},real:{type:"number",numberType:"float"},interval:{type:"string"},inet:{type:"string"},regtype:{type:"string"},numeric:{type:"number",numberType:"float"},bytea:{type:"string"},pg_ndistinct:{type:"number",numberType:"integer"},varchar:{type:"string"}},Pz=class extends W_.Dialect{constructor(){super(...arguments),this.name="postgres",this.defaultNumberType="DOUBLE PRECISION",this.defaultDecimalType="NUMERIC",this.udfPrefix="pg_temp.__udf",this.hasFinalStage=!0,this.divisionIsInteger=!0,this.supportsSumDistinctFunction=!1,this.unnestWithNumbers=!1,this.defaultSampling={rows:5e4},this.supportUnnestArrayAgg=!0,this.supportsAggDistinct=!0,this.supportsCTEinCoorelatedSubQueries=!0,this.supportsSafeCast=!1,this.dontUnionIndex=!1,this.supportsQualify=!1,this.globalFunctions=wfe.POSTGRES_FUNCTIONS,this.supportsNesting=!0}quoteTablePath(e){return e.split(".").map(r=>`"${r}"`).join(".")}sqlGroupSetTable(e){return`CROSS JOIN GENERATE_SERIES(0,${e},1) as group_set`}sqlAnyValue(e,r){return`MAX(${r})`}mapFields(e){return e.map(r=>`
  ${r.sqlExpression}${r.type==="number"?`::${this.defaultNumberType}`:""} as ${r.sqlOutputName}`).join(", ")}sqlAggregateTurtle(e,r,n,i){let s="";return i!==void 0&&(s+=`[1:${i}]`),`COALESCE(TO_JSONB((ARRAY_AGG((SELECT TO_JSONB(__x) FROM (SELECT ${this.mapFields(r)}
  ) as __x) ${n} ) FILTER (WHERE group_set=${e}))${s}),'[]'::JSONB)`}sqlAnyValueTurtle(e,r){let n=r.map(i=>`${i.sqlExpression} as ${i.sqlOutputName}`).join(", ");return`ANY_VALUE(CASE WHEN group_set=${e} THEN STRUCT(${n}))`}sqlAnyValueLastTurtle(e,r,n){return`(ARRAY_AGG(${e}) FILTER (WHERE group_set=${r} AND ${e} IS NOT NULL))[1] as ${n}`}sqlCoaleseMeasuresInline(e,r){return`TO_JSONB((ARRAY_AGG((SELECT __x FROM (SELECT ${this.mapFields(r)}) as __x)) FILTER (WHERE group_set=${e}))[1])`}sqlUnnestAlias(e,r,n,i,s,o){return s?i?`LEFT JOIN UNNEST(ARRAY((SELECT jsonb_build_object('__row_id', row_number() over (), 'value', v) FROM UNNEST(${e}) as v))) as ${r} ON true`:`LEFT JOIN UNNEST(ARRAY((SELECT jsonb_build_object('value', v) FROM UNNEST(${e}) as v))) as ${r} ON true`:i?`LEFT JOIN UNNEST(ARRAY((SELECT jsonb_build_object('__row_number', row_number() over())|| __xx::jsonb as b FROM  JSONB_ARRAY_ELEMENTS(${e}) __xx ))) as ${r} ON true`:`LEFT JOIN JSONB_ARRAY_ELEMENTS(${e}) as ${r} ON true`}sqlSumDistinctHashedKey(e){return`('x' || MD5(${e}::varchar))::bit(64)::bigint::DECIMAL(65,0)  *18446744073709551616 + ('x' || SUBSTR(MD5(${e}::varchar),17))::bit(64)::bigint::DECIMAL(65,0)`}sqlGenerateUUID(){return"GEN_RANDOM_UUID()"}sqlFieldReference(e,r,n,i,s){let o=`${e}->>'${r}'`;if(i){switch(n){case"string":break;case"number":o=`(${o})::double precision`;break;case"struct":o=`(${o})::jsonb`;break}return o}else return`${e}."${r}"`}sqlUnnestPipelineHead(e,r){return e?`UNNEST(ARRAY((SELECT ${r})))`:`JSONB_ARRAY_ELEMENTS(${r})`}sqlCreateFunction(e,r){return`CREATE FUNCTION ${e}(JSONB) RETURNS JSONB AS $$
${(0,Aqe.indent)(r)}
$$ LANGUAGE SQL;
`}sqlCreateFunctionCombineLastStage(e){return`SELECT JSONB_AGG(__stage0) FROM ${e}
`}sqlFinalStage(e,r){return`SELECT row_to_json(finalStage) as row FROM ${e} AS finalStage`}sqlSelectAliasAsStruct(e){return`ROW(${e})`}sqlMaybeQuoteIdentifier(e){return`"${e}"`}sqlCreateTableAsSelect(e,r){throw new Error("Not implemented Yet")}sqlNow(){return(0,ar.mkExpr)`LOCALTIMESTAMP`}sqlTrunc(e,r,n){let i=n==="week",s=i?(0,ar.mkExpr)`${r.value} + INTERVAL '1' DAY`:r.value;if(r.valueType==="timestamp"){let a=(0,W_.qtz)(e);if(a){let u=(0,ar.mkExpr)`(${s}::TIMESTAMPTZ AT TIME ZONE '${a}')`,l=(0,ar.mkExpr)`DATE_TRUNC('${n}', ${u})`;l=(0,ar.mkExpr)`${l}::TIMESTAMP`;let c=(0,ar.mkExpr)`${l} AT TIME ZONE '${a}'`;return(0,ar.mkExpr)`(${c})::TIMESTAMP`}}let o=(0,ar.mkExpr)`DATE_TRUNC('${n}', ${s})`;return i&&(o=(0,ar.mkExpr)`(${o} - INTERVAL '1' DAY)`),o}sqlExtract(e,r,n){let i=Sqe[n]||n,s=r.value;if(r.valueType==="timestamp"){let a=(0,W_.qtz)(e);a&&(s=(0,ar.mkExpr)`(${s}::TIMESTAMPTZ AT TIME ZONE '${a}')`)}let o=(0,ar.mkExpr)`EXTRACT(${i} FROM ${s})`;return n==="day_of_week"?(0,ar.mkExpr)`(${o}+1)`:o}sqlAlterTime(e,r,n,i){i==="quarter"&&(i="month",n=(0,ar.mkExpr)`${n}*3`);let s=(0,ar.mkExpr)`make_interval(${vqe[i]}=>${n})`;return(0,ar.mkExpr)`((${r.value})${e}${s})`}sqlCast(e,r){let n=`${r.srcType}::${r.dstType}`,i=(0,W_.qtz)(e);if(n==="timestamp::date"&&i){let s=(0,ar.mkExpr)`${r.expr}::TIMESTAMPTZ`;return(0,ar.mkExpr)`CAST((${s}) AT TIME ZONE '${i}' AS DATE)`}else if(n==="date::timestamp"&&i)return(0,ar.mkExpr)`CAST((${r.expr})::TIMESTAMP AT TIME ZONE '${i}' AS TIMESTAMP)`;if(r.srcType!==r.dstType){let s=typeof r.dstType=="string"?this.malloyTypeToSQLType({type:r.dstType}):r.dstType.raw;if(r.safe)throw new Error("Postgres dialect doesn't support Safe Cast");return(0,ar.mkExpr)`${"CAST"}(${r.expr} AS ${s})`}return r.expr}sqlRegexpMatch(e,r){return(0,ar.mkExpr)`(${e} ~ ${r})`}sqlLiteralTime(e,r,n,i){if(n==="date")return`DATE '${r}'`;let s=i||(0,W_.qtz)(e);return s?`TIMESTAMPTZ '${r} ${s}'::TIMESTAMP`:`TIMESTAMP '${r}'`}sqlMeasureTime(e,r,n){let i=e.value,s=r.value;if(Lfe[n]){i=(0,ar.mkExpr)`EXTRACT(EPOCH FROM ${i})`,s=(0,ar.mkExpr)`EXTRACT(EPOCH FROM ${s})`;let o=(0,ar.mkExpr)`${s}-${i}`;return n==="second"?(0,ar.mkExpr)`FLOOR(${o})`:(0,ar.mkExpr)`FLOOR((${o})/${Lfe[n].toString()}.0)`}throw new Error(`Unknown or unhandled postgres time unit: ${n}`)}sqlSumDistinct(e,r,n){return`(
      SELECT ${n}((a::json->>'f2')::DOUBLE PRECISION) as value
      FROM (
        SELECT UNNEST(array_agg(distinct row_to_json(row(${e},${r}))::text)) a
      ) a
    )`}sqlAggDistinct(e,r,n){return`(
      SELECT ${n(r.map((i,s)=>`(a::json->>'f${s+2}')`))} as value
      FROM (
        SELECT UNNEST(array_agg(distinct row_to_json(row(${e},${r.join(",")}))::text)) a
      ) a
    )`}sqlSampleTable(e,r){if(r!==void 0){if((0,ar.isSamplingEnable)(r)&&r.enable&&(r=this.defaultSampling),(0,ar.isSamplingRows)(r))return`(SELECT * FROM ${e} TABLESAMPLE SYSTEM_ROWS(${r.rows}))`;if((0,ar.isSamplingPercent)(r))return`(SELECT * FROM ${e} TABLESAMPLE SYSTEM (${r.percent}))`}return e}sqlOrderBy(e){return`ORDER BY ${e.map(r=>`${r} NULLS LAST`).join(",")}`}sqlLiteralString(e){return"'"+e.replace(/'/g,"''")+"'"}sqlLiteralRegexp(e){return"'"+e.replace(/'/g,"''")+"'"}getGlobalFunctionDef(e){return wfe.POSTGRES_FUNCTIONS.get(e)}malloyTypeToSQLType(e){return e.type==="number"?e.numberType==="integer"?"integer":"double precision":e.type==="string"?"varchar":e.type}sqlTypeToMalloyType(e){var r,n;let i=(n=(r=e.match(/^([\w\s]+)/))===null||r===void 0?void 0:r.at(0))!==null&&n!==void 0?n:e;return _qe[i.trim().toLowerCase()]}castToString(e){return`CAST(${e} as VARCHAR)`}concat(...e){return e.join(" || ")}validateTypeName(e){return e.match(/^[A-Za-z\s(),[\]0-9]*$/)!==null}};FN.PostgresDialect=Pz});var kz=v(O1=>{"use strict";var bqe=O1&&O1.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Tqe=O1&&O1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&bqe(e,t,r)};Object.defineProperty(O1,"__esModule",{value:!0});Tqe(Ife(),O1)});var Mfe=v(wN=>{"use strict";Object.defineProperty(wN,"__esModule",{value:!0});wN.fnByteLength=void 0;var ty=ke();function Cqe(){return[(0,ty.overload)((0,ty.minScalar)("number"),[(0,ty.param)("value",(0,ty.anyExprType)("string"))],(0,ty.sql)`(BIT_LENGTH(${(0,ty.arg)("value")}) / 8)`)]}wN.fnByteLength=Cqe});var Pfe=v(LN=>{"use strict";Object.defineProperty(LN,"__esModule",{value:!0});LN.fnDiv=void 0;var D1=ke();function Rqe(){let t=(0,D1.makeParam)("dividend",(0,D1.anyExprType)("number")),e=(0,D1.makeParam)("divisor",(0,D1.anyExprType)("number"));return[(0,D1.overload)((0,D1.minScalar)("number"),[t.param,e.param],(0,D1.sql)`CASE WHEN ${t.arg} / ${e.arg} < 0 THEN CEIL(${t.arg} / ${e.arg}) ELSE FLOOR(${t.arg} / ${e.arg}) END`)]}LN.fnDiv=Rqe});var kfe=v(IN=>{"use strict";Object.defineProperty(IN,"__esModule",{value:!0});IN.fnEndsWith=void 0;var N1=ke();function Oqe(){let t=(0,N1.makeParam)("value",(0,N1.anyExprType)("string")),e=(0,N1.makeParam)("suffix",(0,N1.anyExprType)("string"));return[(0,N1.overload)((0,N1.minScalar)("boolean"),[t.param,e.param],(0,N1.sql)`COALESCE(SUFFIX(${t.arg}, ${e.arg}), false)`)]}IN.fnEndsWith=Oqe});var qfe=v(ry=>{"use strict";Object.defineProperty(ry,"__esModule",{value:!0});ry.fnLeast=ry.fnGreatest=void 0;var Vf=ke(),Dqe=["string","number","timestamp","date","json"];function Bfe(t){return Dqe.map(e=>(0,Vf.overload)((0,Vf.minScalar)(e),[(0,Vf.params)("values",(0,Vf.anyExprType)(e))],[(0,Vf.sqlFragment)("CASE WHEN LEN(LIST_FILTER([",(0,Vf.spread)((0,Vf.arg)("values")),`], x -> x is null)) > 0 THEN NULL ELSE ${t}(`,(0,Vf.spread)((0,Vf.arg)("values")),") END")]))}var Nqe=()=>Bfe("GREATEST");ry.fnGreatest=Nqe;var Fqe=()=>Bfe("LEAST");ry.fnLeast=Fqe});var Ufe=v(MN=>{"use strict";Object.defineProperty(MN,"__esModule",{value:!0});MN.fnIsInf=void 0;var ny=ke();function wqe(){return[(0,ny.overload)((0,ny.minScalar)("boolean"),[(0,ny.param)("value",(0,ny.anyExprType)("number"))],(0,ny.sql)`COALESCE(ISINF(${(0,ny.arg)("value")}), false)`)]}MN.fnIsInf=wqe});var $fe=v(PN=>{"use strict";Object.defineProperty(PN,"__esModule",{value:!0});PN.fnIsNan=void 0;var iy=ke();function Lqe(){return[(0,iy.overload)((0,iy.minScalar)("boolean"),[(0,iy.param)("value",(0,iy.anyExprType)("number"))],(0,iy.sql)`COALESCE(ISNAN(${(0,iy.arg)("value")}), false)`)]}PN.fnIsNan=Lqe});var jfe=v(kN=>{"use strict";Object.defineProperty(kN,"__esModule",{value:!0});kN.fnLog=void 0;var F1=ke();function Iqe(){let t=(0,F1.makeParam)("value",(0,F1.anyExprType)("number")),e=(0,F1.makeParam)("base",(0,F1.anyExprType)("number"));return[(0,F1.overload)((0,F1.minScalar)("number"),[t.param,e.param],(0,F1.sql)`(LN(${t.arg}) / LN(${e.arg}))`)]}kN.fnLog=Iqe});var Hfe=v(BN=>{"use strict";Object.defineProperty(BN,"__esModule",{value:!0});BN.fnRand=void 0;var Bz=ke();function Mqe(){return[(0,Bz.overload)((0,Bz.minScalar)("number"),[],(0,Bz.sql)`RANDOM()`)]}BN.fnRand=Mqe});var zfe=v(qN=>{"use strict";Object.defineProperty(qN,"__esModule",{value:!0});qN.fnReplace=void 0;var Yo=ke();function Pqe(){let t=(0,Yo.makeParam)("value",(0,Yo.anyExprType)("string")),e=(0,Yo.makeParam)("pattern",(0,Yo.anyExprType)("string")),r=(0,Yo.makeParam)("pattern",(0,Yo.anyExprType)("regular expression")),n=(0,Yo.makeParam)("replacement",(0,Yo.anyExprType)("string"));return[(0,Yo.overload)((0,Yo.minScalar)("string"),[t.param,e.param,n.param],(0,Yo.sql)`REPLACE(${t.arg}, ${e.arg}, ${n.arg})`),(0,Yo.overload)((0,Yo.minScalar)("string"),[t.param,r.param,n.param],(0,Yo.sql)`REGEXP_REPLACE(${t.arg}, ${r.arg}, ${n.arg}, 'g')`)]}qN.fnReplace=Pqe});var Gfe=v(UN=>{"use strict";Object.defineProperty(UN,"__esModule",{value:!0});UN.fnTrunc=void 0;var X0=ke();function kqe(){let t=(0,X0.makeParam)("value",(0,X0.anyExprType)("number")),e=(0,X0.makeParam)("precision",(0,X0.anyExprType)("number"));return[(0,X0.overload)((0,X0.minScalar)("number"),[t.param],(0,X0.sql)`CASE WHEN ${t.arg} < 0 THEN CEIL(${t.arg}) ELSE FLOOR(${t.arg}) END`),(0,X0.overload)((0,X0.minScalar)("number"),[t.param,e.param],(0,X0.sql)`CASE WHEN ${t.arg} < 0 THEN CEIL(${t.arg} * POW(10, ${e.arg})) / POW(10, ${e.arg}) ELSE FLOOR(${t.arg} * POW(10, ${e.arg})) / POW(10, ${e.arg}) END`)]}UN.fnTrunc=kqe});var Qfe=v($N=>{"use strict";Object.defineProperty($N,"__esModule",{value:!0});$N.fnUnicode=void 0;var Y_=ke();function Bqe(){let t=(0,Y_.makeParam)("value",(0,Y_.anyExprType)("string"));return[(0,Y_.overload)((0,Y_.minScalar)("number"),[t.param],(0,Y_.sql)`CASE WHEN ${t.arg} = '' THEN 0 ELSE UNICODE(${t.arg}) END`)]}$N.fnUnicode=Bqe});var Wfe=v(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.DUCKDB_FUNCTIONS=void 0;var qqe=z_(),Uqe=Mfe(),$qe=Pfe(),jqe=kfe(),Vfe=qfe(),Hqe=Ufe(),zqe=$fe(),Gqe=jfe(),Qqe=Hfe(),Vqe=zfe(),Wqe=Gfe(),Yqe=Qfe();Ji.DUCKDB_FUNCTIONS=qqe.FUNCTIONS.clone();Ji.DUCKDB_FUNCTIONS.add("trunc",Wqe.fnTrunc);Ji.DUCKDB_FUNCTIONS.add("rand",Qqe.fnRand);Ji.DUCKDB_FUNCTIONS.add("is_nan",zqe.fnIsNan);Ji.DUCKDB_FUNCTIONS.add("is_inf",Hqe.fnIsInf);Ji.DUCKDB_FUNCTIONS.add("greatest",Vfe.fnGreatest);Ji.DUCKDB_FUNCTIONS.add("least",Vfe.fnLeast);Ji.DUCKDB_FUNCTIONS.add("div",$qe.fnDiv);Ji.DUCKDB_FUNCTIONS.add("byte_length",Uqe.fnByteLength);Ji.DUCKDB_FUNCTIONS.add("unicode",Yqe.fnUnicode);Ji.DUCKDB_FUNCTIONS.add("replace",Vqe.fnReplace);Ji.DUCKDB_FUNCTIONS.add("ends_with",jqe.fnEndsWith);Ji.DUCKDB_FUNCTIONS.add("log",Gqe.fnLog);Ji.DUCKDB_FUNCTIONS.seal()});var Yfe=v(jN=>{"use strict";Object.defineProperty(jN,"__esModule",{value:!0});jN.DUCKDB_FUNCTIONS=void 0;var Kqe=Wfe();Object.defineProperty(jN,"DUCKDB_FUNCTIONS",{enumerable:!0,get:function(){return Kqe.DUCKDB_FUNCTIONS}})});var Xfe=v(HN=>{"use strict";Object.defineProperty(HN,"__esModule",{value:!0});HN.DuckDBDialect=void 0;var ur=Xe(),Xqe=Fd(),Jqe=Yfe(),sy=P_(),Kfe="-- hack: split on this",Zqe={day_of_week:"dow",day_of_year:"doy"},eUe={BIGINT:{type:"number",numberType:"integer"},INTEGER:{type:"number",numberType:"integer"},TINYINT:{type:"number",numberType:"integer"},SMALLINT:{type:"number",numberType:"integer"},UBIGINT:{type:"number",numberType:"integer"},UINTEGER:{type:"number",numberType:"integer"},UTINYINT:{type:"number",numberType:"integer"},USMALLINT:{type:"number",numberType:"integer"},HUGEINT:{type:"number",numberType:"integer"},DOUBLE:{type:"number",numberType:"float"},FLOAT:{type:"number",numberType:"float"},VARCHAR:{type:"string"},DATE:{type:"date"},TIMESTAMP:{type:"timestamp"},TIME:{type:"string"},DECIMAL:{type:"number",numberType:"float"},BOOLEAN:{type:"boolean"}},qz=class extends sy.Dialect{constructor(){super(...arguments),this.name="duckdb",this.defaultNumberType="DOUBLE",this.defaultDecimalType="NUMERIC",this.hasFinalStage=!1,this.divisionIsInteger=!0,this.supportsSumDistinctFunction=!0,this.unnestWithNumbers=!1,this.defaultSampling={rows:5e4},this.supportUnnestArrayAgg=!0,this.supportsAggDistinct=!0,this.supportsCTEinCoorelatedSubQueries=!0,this.dontUnionIndex=!0,this.supportsQualify=!0,this.supportsSafeCast=!0,this.supportsNesting=!0}get udfPrefix(){return`__udf${Math.floor(Math.random()*1e5)}`}quoteTablePath(e){return e.match(/\//)?`'${e}'`:e}sqlGroupSetTable(e){return`CROSS JOIN (SELECT UNNEST(GENERATE_SERIES(0,${e},1)) as group_set  ) as group_set`}sqlAnyValue(e,r){return`FIRST(${r}) FILTER (WHERE ${r} IS NOT NULL)`}mapFields(e){return e.join(", ")}sqlAggregateTurtle(e,r,n,i){let s="";return i!==void 0&&(s+=`[1:${i}]`),`COALESCE(LIST({${r.map(a=>`
  ${a.sqlOutputName}: ${a.sqlExpression}`).join(", ")}} ${n}) FILTER (WHERE group_set=${e})${s},[])`}sqlAnyValueTurtle(e,r){let n=r.map(i=>`${i.sqlExpression} as ${i.sqlOutputName}`).join(", ");return`ANY_VALUE(CASE WHEN group_set=${e} THEN STRUCT_PACK(${n}))`}sqlAnyValueLastTurtle(e,r,n){return`MAX(CASE WHEN group_set=${r} THEN ${e} END) as ${n}`}sqlCoaleseMeasuresInline(e,r){let n=r.map(s=>`${s.sqlOutputName}: ${s.sqlExpression} `).join(", "),i=r.map(s=>`${s.sqlOutputName}: NULL`).join(", ");return`COALESCE(FIRST({${n}}) FILTER(WHERE group_set=${e}), {${i}})`}sqlUnnestAlias(e,r,n,i,s,o){return this.unnestWithNumbers?`LEFT JOIN (select UNNEST(generate_series(1,
        ${o?"100000":`array_length(${e})`},
        1)) as __row_id) as ${r} ON  ${r}.__row_id <= array_length(${e})`:i?`LEFT JOIN LATERAL (SELECT UNNEST(GENERATE_SERIES(1, length(${e}),1)) as __row_id, UNNEST(${e}), 1 as ignoreme) as ${r}_outer(__row_id, ${r},ignoreme) ON  ${r}_outer.ignoreme=1`:`LEFT JOIN LATERAL (SELECT UNNEST(${e}), 1 as ignoreme) as ${r}_outer(${r},ignoreme) ON ${r}_outer.ignoreme=1`}sqlSumDistinctHashedKey(e){return"uses sumDistinctFunction, should not be called"}sqlGenerateUUID(){return"GEN_RANDOM_UUID()"}sqlDateToString(e){return`(${e})::date::varchar`}sqlFieldReference(e,r,n,i,s){return!this.unnestWithNumbers&&r==="__row_id"?`${e}_outer.__row_id`:s?e:`${e}.${this.sqlMaybeQuoteIdentifier(r)}`}sqlUnnestPipelineHead(e,r){let n=r;return e&&(n=`[${n}]`),`(SELECT UNNEST(${n}) as base)`}sqlCreateFunction(e,r){return`DROP MACRO IF EXISTS ${e}; 
${Kfe}
 CREATE MACRO ${e}(_param) AS (
${(0,Xqe.indent)(r)}
);
${Kfe}
`}sqlCreateFunctionCombineLastStage(e,r){return`SELECT LIST(STRUCT_PACK(${r.fields.map(n=>this.sqlMaybeQuoteIdentifier((0,ur.getIdentifier)(n))).join(",")})) FROM ${e}
`}sqlSelectAliasAsStruct(e,r){return`STRUCT_PACK(${r.map(n=>`${e}.${n}`).join(", ")})`}sqlMaybeQuoteIdentifier(e){return'"'+e+'"'}sqlCreateTableAsSelect(e,r){throw new Error("Not implemented Yet")}sqlMeasureTime(e,r,n){let i=e.value,s=r.value;return(0,sy.inDays)(n)||(e.valueType==="date"&&(i=(0,ur.mkExpr)`(${i})::TIMESTAMP`),r.valueType==="date"&&(s=(0,ur.mkExpr)`(${s})::TIMESTAMP`)),(0,ur.mkExpr)`DATE_SUB('${n}',${i},${s})`}sqlNow(){return(0,ur.mkExpr)`LOCALTIMESTAMP`}sqlTrunc(e,r,n){let i=n==="week",s=i?(0,ur.mkExpr)`${r.value} + INTERVAL 1 DAY`:r.value;if(r.valueType==="timestamp"){let a=(0,sy.qtz)(e);if(a){let u=(0,ur.mkExpr)`(${s}::TIMESTAMPTZ AT TIME ZONE '${a}')`,l=(0,ur.mkExpr)`DATE_TRUNC('${n}', ${u})`;l=(0,ur.mkExpr)`${l}::TIMESTAMP`;let c=(0,ur.mkExpr)`${l} AT TIME ZONE '${a}'`;return(0,ur.mkExpr)`(${c})::TIMESTAMP`}}let o=(0,ur.mkExpr)`DATE_TRUNC('${n}', ${s})`;return i&&(o=(0,ur.mkExpr)`(${o} - INTERVAL 1 DAY)`),o}sqlExtract(e,r,n){let i=Zqe[n]||n,s=r.value;if(r.valueType==="timestamp"){let a=(0,sy.qtz)(e);a&&(s=(0,ur.mkExpr)`(${s}::TIMESTAMPTZ AT TIME ZONE '${a}')`)}let o=(0,ur.mkExpr)`EXTRACT(${i} FROM ${s})`;return n==="day_of_week"?(0,ur.mkExpr)`(${o}+1)`:o}sqlAlterTime(e,r,n,i){i==="quarter"&&(i="month",n=(0,ur.mkExpr)`${n}*3`),i==="week"&&(i="day",n=(0,ur.mkExpr)`${n}*7`);let s=(0,ur.mkExpr)`INTERVAL (${n}) ${i}`;return(0,ur.mkExpr)`${r.value} ${e} ${s}`}sqlCast(e,r){let n=`${r.srcType}::${r.dstType}`,i=(0,sy.qtz)(e);if(n==="timestamp::date"&&i){let s=(0,ur.mkExpr)`${r.expr}::TIMESTAMPTZ`;return(0,ur.mkExpr)`CAST((${s}) AT TIME ZONE '${i}' AS DATE)`}else if(n==="date::timestamp"&&i)return(0,ur.mkExpr)`CAST((${r.expr})::TIMESTAMP AT TIME ZONE '${i}' AS TIMESTAMP)`;if(r.srcType!==r.dstType){let s=typeof r.dstType=="string"?this.malloyTypeToSQLType({type:r.dstType}):r.dstType.raw,o=r.safe?"TRY_CAST":"CAST";return(0,ur.mkExpr)`${o}(${r.expr} AS ${s})`}return r.expr}sqlRegexpMatch(e,r){return(0,ur.mkExpr)`REGEXP_MATCHES(${e}, ${r})`}sqlLiteralTime(e,r,n,i){if(n==="date")return`DATE '${r}'`;let s=i||(0,sy.qtz)(e);return s?`TIMESTAMPTZ '${r} ${s}'::TIMESTAMP`:`TIMESTAMP '${r}'`}sqlSumDistinct(e,r,n){return`(
      SELECT ${n}(a.val) as value
      FROM (
        SELECT UNNEST(list(distinct {key:${e}, val: ${r}})) a
      )
    )`}sqlAggDistinct(e,r,n){return`(
      SELECT ${n(r.map((i,s)=>`a.val${s}`))} as value
      FROM (
        SELECT UNNEST(list(distinct {key:${e}, ${r.map((i,s)=>`val${s}: ${i}`).join(",")}})) a
      )
    )`}sqlSampleTable(e,r){if(r!==void 0){if((0,ur.isSamplingEnable)(r)&&r.enable&&(r=this.defaultSampling),(0,ur.isSamplingRows)(r))return`(SELECT * FROM ${e} USING SAMPLE ${r.rows})`;if((0,ur.isSamplingPercent)(r))return`(SELECT * FROM ${e} USING SAMPLE ${r.percent} PERCENT (bernoulli))`}return e}sqlOrderBy(e){return`ORDER BY ${e.map(r=>`${r} NULLS LAST`).join(",")}`}sqlLiteralString(e){return"'"+e.replace(/'/g,"''")+"'"}sqlLiteralRegexp(e){return"'"+e.replace(/'/g,"''")+"'"}getGlobalFunctionDef(e){return Jqe.DUCKDB_FUNCTIONS.get(e)}malloyTypeToSQLType(e){return e.type==="number"?e.numberType==="integer"?"integer":"double precision":e.type==="string"?"varchar":e.type}sqlTypeToMalloyType(e){var r,n;let i=(n=(r=e.match(/^(\w+)/))===null||r===void 0?void 0:r.at(0))!==null&&n!==void 0?n:e;return eUe[i.toUpperCase()]}castToString(e){return`CAST(${e} as VARCHAR)`}concat(...e){return e.join(" || ")}validateTypeName(e){return e.match(/^[A-Za-z\s(),[\]0-9]*$/)!==null}};HN.DuckDBDialect=qz});var Uz=v(w1=>{"use strict";var tUe=w1&&w1.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),rUe=w1&&w1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&tUe(e,t,r)};Object.defineProperty(w1,"__esModule",{value:!0});rUe(Xfe(),w1)});var GN=v(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});Id.getDialectFunction=Id.registerDialect=Id.getDialect=void 0;var nUe=Uz(),iUe=kz(),sUe=Iz(),$z=new Map;function oUe(t){let e=$z.get(t);if(e===void 0)throw new Error(`Unknown Dialect ${t}`);return e}Id.getDialect=oUe;function zN(t){$z.set(t.name,t)}Id.registerDialect=zN;zN(new iUe.PostgresDialect);zN(new sUe.StandardSQLDialect);zN(new nUe.DuckDBDialect);function Jfe(t,e){return t.params.length===e.params.length&&t.params.every((r,n)=>{let i=e.params[n];return r.isVariadic===i.isVariadic&&r.name===i.name&&r.allowedTypes.length===i.allowedTypes.length&&r.allowedTypes.every(s=>i.allowedTypes.some(o=>s.dataType===o.dataType&&s.expressionType===o.expressionType))})}function aUe(t,e){return Jfe(t,e)}function uUe(t,e){return t.returnType.dataType===e.returnType.dataType&&t.returnType.expressionType===e.returnType.expressionType}function lUe(t){let e={type:"function",name:t,overloads:[]},r=!1;for(let n of $z.values()){let i=n.getGlobalFunctionDef(t);if(i){for(let s of i){let o=!1;for(let a of e.overloads)if(aUe(s,a)){if(!Jfe(s,a))throw new Error("params are compatible but not equal");if(!uUe(s,a))throw new Error("params match but return types differ!");a.dialect[n.name]=s.e,o=!0}o||e.overloads.push({returnType:s.returnType,params:s.params,dialect:{[n.name]:s.e},needsWindowOrderBy:s.needsWindowOrderBy,between:s.between,isSymmetric:s.isSymmetric})}r=!0}}return r?e:void 0}Id.getDialectFunction=lUe});var QN=v(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.FUNCTIONS=dt.getDialectFunction=dt.registerDialect=dt.getDialect=dt.DuckDBDialect=dt.PostgresDialect=dt.StandardSQLDialect=dt.qtz=dt.Dialect=dt.sql=dt.param=dt.sqlFragment=dt.spread=dt.maxScalar=dt.minAggregate=dt.minScalar=dt.overload=dt.makeParam=dt.anyExprType=dt.arg=void 0;var wl=ke();Object.defineProperty(dt,"arg",{enumerable:!0,get:function(){return wl.arg}});Object.defineProperty(dt,"anyExprType",{enumerable:!0,get:function(){return wl.anyExprType}});Object.defineProperty(dt,"makeParam",{enumerable:!0,get:function(){return wl.makeParam}});Object.defineProperty(dt,"overload",{enumerable:!0,get:function(){return wl.overload}});Object.defineProperty(dt,"minScalar",{enumerable:!0,get:function(){return wl.minScalar}});Object.defineProperty(dt,"minAggregate",{enumerable:!0,get:function(){return wl.minAggregate}});Object.defineProperty(dt,"maxScalar",{enumerable:!0,get:function(){return wl.maxScalar}});Object.defineProperty(dt,"spread",{enumerable:!0,get:function(){return wl.spread}});Object.defineProperty(dt,"sqlFragment",{enumerable:!0,get:function(){return wl.sqlFragment}});Object.defineProperty(dt,"param",{enumerable:!0,get:function(){return wl.param}});Object.defineProperty(dt,"sql",{enumerable:!0,get:function(){return wl.sql}});var Zfe=P_();Object.defineProperty(dt,"Dialect",{enumerable:!0,get:function(){return Zfe.Dialect}});Object.defineProperty(dt,"qtz",{enumerable:!0,get:function(){return Zfe.qtz}});var cUe=Iz();Object.defineProperty(dt,"StandardSQLDialect",{enumerable:!0,get:function(){return cUe.StandardSQLDialect}});var fUe=kz();Object.defineProperty(dt,"PostgresDialect",{enumerable:!0,get:function(){return fUe.PostgresDialect}});var xUe=Uz();Object.defineProperty(dt,"DuckDBDialect",{enumerable:!0,get:function(){return xUe.DuckDBDialect}});var jz=GN();Object.defineProperty(dt,"getDialect",{enumerable:!0,get:function(){return jz.getDialect}});Object.defineProperty(dt,"registerDialect",{enumerable:!0,get:function(){return jz.registerDialect}});Object.defineProperty(dt,"getDialectFunction",{enumerable:!0,get:function(){return jz.getDialectFunction}});var dUe=z_();Object.defineProperty(dt,"FUNCTIONS",{enumerable:!0,get:function(){return dUe.FUNCTIONS}})});var iG=v(ay=>{"use strict";Object.defineProperty(ay,"__esModule",{value:!0});ay.QueryModel=ay.Segment=void 0;var hUe=QN(),pUe=Lz(),qe=Xe(),Zi=Fd();function Hz(t){return`'${t}'`}function exe(t){return t.replace(/[^a-zA-Z0-9_]/g,"_o_")}var L1=class{constructor(e=!0,r){this.parent=r,this.withs=[],this.udfs=[],this.pdts=[],this.stagePrefix="__stage",this.useCTE=e}getName(e){return`${this.stagePrefix}${e}`}root(){return this.parent===void 0?this:this.parent.root()}addStage(e){return this.useCTE?(this.withs.push(e),this.getName(this.withs.length-1)):(this.withs[0]=e,(0,Zi.indent)(`
(${e})
`))}addUDF(e,r,n){let{sql:i,lastStageName:s}=e.combineStages(!0);if(s===void 0)throw new Error("Internal Error: no stage to combine");i+=r.sqlCreateFunctionCombineLastStage(s,n);let o=`${r.udfPrefix}${this.root().udfs.length}`;return i=r.sqlCreateFunction(o,i),this.root().udfs.push(i),o}addPDT(e,r){let n=this.combineStages(!1).sql+this.withs[this.withs.length-1],i="scratch."+e+(0,Zi.generateHash)(n);return this.root().pdts.push(r.sqlCreateTableAsSelect(i,n)),i}combineStages(e){if(!this.useCTE)return{sql:this.withs[0],lastStageName:this.withs[0]};let r=this.getName(0),n="WITH ",i="";for(let s=0;s<this.withs.length-(e?0:1);s++){let o=this.withs[s];if(r=this.getName(s),o===void 0)throw new Error(`Expected sql WITH to be present for stage ${r}.`);i+=`${n}${r} AS (
${(0,Zi.indent)(o)})
`,n=", "}return{sql:i,lastStageName:r}}generateSQLStages(){let e=this.withs.length-1;if(e<0)throw new Error("No SQL generated");let r=this.udfs.join(`
`),n=this.pdts.join(`
`),i=this.combineStages(!1).sql;return r+n+i+this.withs[e]}generateCoorelatedSubQuery(e,r){return this.useCTE?this.combineStages(!0).sql+e.sqlCreateFunctionCombineLastStage(this.getName(this.withs.length-1),r):e.sqlCreateFunctionCombineLastStage(`(${this.withs[0]})`,r)}},zz=class t{constructor(){this.totalGroupSet=-1}withWhere(e){let r=new t;return r.whereSQL=e,r.applyValue=this.applyValue,r.totalGroupSet=this.totalGroupSet,r}withApply(e){let r=new t;return r.whereSQL=this.whereSQL,r.applyValue=e,r.totalGroupSet=this.totalGroupSet,r}withTotal(e){let r=new t;return r.whereSQL=this.whereSQL,r.applyValue=this.applyValue,r.totalGroupSet=e,r}},WN=class{constructor(e){this.fieldDef=e}getIdentifier(){return(0,qe.getIdentifier)(this.fieldDef)}getChildByName(e){}},oy=class extends WN{constructor(e,r){super(e),this.parent=r,this.fieldDef=e}mayNeedUniqueKey(){return!1}getJoinableParent(){let e=this.parent;if(e.fieldDef.structRelationship.type==="inline"){if(e)return e.getJoinableParent();throw new Error("Internal Error: inline struct cannot be root")}return e}caseGroup(e,r){return e.length===0?r:`CASE WHEN group_set${e.length===1?`=${e[0]}`:` IN (${e.join(",")})`} THEN
  ${r}
  END`}getFullOutputName(){return this.parent.getFullOutputName()+this.getIdentifier()}generateFieldFragment(e,r,n,i){let s=r.getFieldByName(n.path);return(0,qe.hasExpression)(s.fieldDef)?`(${this.generateExpressionFromExpr(e,s.parent,s.fieldDef.e,i)})`:s.generateExpression(e)}generateOutputFieldFragment(e,r,n,i){return`(${e.getField(n.name).getAnalyticalSQL(!1)})`}generateSQLExpression(e,r,n,i){return this.generateExpressionFromExpr(e,r,n.e,i)}getParameterMap(e,r){return new Map(e.params.map((n,i)=>{let s=n.isVariadic?(0,Zi.range)(i,r):[i];return[n.name,{param:n,argIndexes:s}]}))}expandFunctionCall(e,r,n){let i=this.getParameterMap(r,n.length);if(r.dialect[e]===void 0)throw new Error(`Function is not defined for dialect ${e}`);return(0,Zi.exprMap)(r.dialect[e],s=>{if(typeof s=="string")return[s];if(s.type==="spread"){let o=s.e[0];if(s.e.length!==1||typeof o=="string"||o.type!=="function_parameter")throw new Error("Invalid function definition. Argument to spread must be a function parameter.");let a=i.get(o.name);return a===void 0?[s]:(0,Zi.joinWith)(a.argIndexes.map(u=>n[u]),",")}else if(s.type==="function_parameter"){let o=i.get(s.name);return o===void 0?[s]:o.param.isVariadic?["[",...(0,Zi.joinWith)(o.argIndexes.map(u=>n[u]),","),"]"]:n[o.argIndexes[0]]}return[s]})}generateFunctionCallExpression(e,r,n,i){var s;let o=n.overload,a=n.args,u=(s=n.overload.isSymmetric)!==null&&s!==void 0?s:!1,l=(0,qe.expressionIsAggregate)(o.returnType.expressionType)&&!u&&this.generateDistinctKeyIfNecessary(e,r,n.structPath);if(l){if(!r.dialect.supportsAggDistinct)throw new Error(`Asymmetric aggregates are not supported for custom functions in ${r.dialect.name}.`);let c=a.map(f=>this.generateDimFragment(e,r,f,i));return r.dialect.sqlAggDistinct(l,c,f=>{let x=this.expandFunctionCall(r.dialect.name,o,f.map(d=>[d]));return this.generateExpressionFromExpr(e,r,x,i)})}else{let c=(0,qe.expressionIsAggregate)(o.returnType.expressionType)?a.map(x=>[this.generateDimFragment(e,r,x,i)]):a,f=this.expandFunctionCall(r.dialect.name,o,c);return(0,qe.expressionIsAnalytic)(o.returnType.expressionType)?this.generateAnalyticFragment(e,r,f,o,i,a):this.generateExpressionFromExpr(e,r,f,i)}}generateSpread(e,r,n,i){throw new Error("Unexpanded spread encountered during SQL generation")}generateParameterFragment(e,r,n,i){let s=r.parameters()[n.path];if((0,qe.isValueParameter)(s)){if(s.value)return this.generateExpressionFromExpr(e,r,s.value,i)}else if(s.condition)return this.generateExpressionFromExpr(e,r,s.condition,i);throw new Error(`Can't generate SQL, no value for ${n.path}`)}generateFilterFragment(e,r,n,i){let s=new Zi.AndChain(i.whereSQL);for(let o of n.filterList)s.add(this.generateExpressionFromExpr(e,r,o.expression,i.withWhere()));return this.generateExpressionFromExpr(e,r,n.e,i.withWhere(s.sql()))}generateDimFragment(e,r,n,i){let s=this.generateExpressionFromExpr(e,r,n,i);return i.whereSQL&&(s=`CASE WHEN ${i.whereSQL} THEN ${s} END`),s}generateUngroupedFragment(e,r,n,i){if(i.totalGroupSet!==-1)throw new Error("Already in ALL.  Cannot nest within an all calcuation.");let s,o;if(n.fields&&n.fields.length>0){let f=n.fields.sort().join("|")+n.type;if(o=e.ungroupedSets.get(f),o===void 0)throw new Error(`Internal Error, cannot find groupset with key ${f}`);s=o.groupSet}else s=e.parent?e.parent.groupSet:0;let a=this.generateExpressionFromExpr(e,r,n.e,i.withTotal(s)),u=e.getUngroupPartitions(o),l="",c=u.map(f=>f.getAnalyticalSQL(!0)).join(", ");return c.length>0&&(l=`PARTITION BY ${c}`),`MAX(${a}) OVER (${l})`}generateDistinctKeyIfNecessary(e,r,n){let i=r;if(n&&(i=this.parent.root().getStructByName(n)),i.needsSymetricCalculation(e))return i.getDistinctKey().generateExpression(e)}generateSumFragment(e,r,n,i){let s=this.generateDimFragment(e,r,n.e,i),o=this.generateDistinctKeyIfNecessary(e,r,n.structPath),a;return o?this.parent.dialect.supportsSumDistinctFunction?a=this.parent.dialect.sqlSumDistinct(o,s,"SUM"):a=rxe(this.parent.dialect,s,o):a=`SUM(${s})`,`COALESCE(${a},0)`}generateSymmetricFragment(e,r,n,i){let s=this.generateDimFragment(e,r,n.e,i);return`${n.function==="count_distinct"?"count(distinct ":n.function+"("}${s})`}generateAvgFragment(e,r,n,i){let s=this.generateDimFragment(e,r,n.e,i),o=this.generateDistinctKeyIfNecessary(e,r,n.structPath);if(o){let a=o;i.whereSQL&&(a=`CASE WHEN ${i.whereSQL} THEN ${o} END`);let u,l;return this.parent.dialect.supportsSumDistinctFunction?l=this.parent.dialect.sqlSumDistinct(o,s,"AVG"):(u=rxe(this.parent.dialect,s,o),l=`(${u})/NULLIF(COUNT(DISTINCT CASE WHEN ${s} IS NOT NULL THEN ${a} END),0)`),l}else return`AVG(${s})`}generateCountFragment(e,r,n,i){let s="COUNT(",o="1",a=this.generateDistinctKeyIfNecessary(e,r,n.structPath);return a&&(s="COUNT(DISTINCT",o=a),i.whereSQL?`${s} CASE WHEN ${i.whereSQL} THEN ${o} END)`:`${s} ${o})`}generateDialect(e,r,n,i){return this.generateExpressionFromExpr(e,r,r.dialect.dialectExpr(e.getQueryInfo(),n),i)}getAnalyticPartitions(e){let r=[],n=e.parent;for(;n!==void 0;){let s=n.fields(o=>es(o.f)&&o.fieldUsage.type==="result").map(o=>o.getAnalyticalSQL(!0));r.push(...s),n=n.parent}return r.join(", ")}generateAnalyticFragment(e,r,n,i,s,o){let a="",u=e.root().isComplexQuery,l=this.getAnalyticPartitions(e);(u||l.length>0)&&(a="PARTITION BY ",u&&(a+="group_set"),l.length>0&&(a+=`, ${l}`));let c="";if(i.needsWindowOrderBy){let d=[],h,p=e.firstSegment.orderBy||e.calculateDefaultOrderBy();for(let m of p){typeof m.field=="string"?h={name:m.field,fif:e.getField(m.field)}:h=e.getFieldByNumber(m.field);let g=h.fif.f.fieldDef.expressionType;if(!(0,qe.expressionIsAnalytic)(g))if(e.firstSegment.type==="reduce"){let y=h.fif.getAnalyticalSQL(!1);d.push(` ${y} ${m.dir||"ASC"}`)}else e.firstSegment.type==="project"&&d.push(` ${h.fif.f.generateExpression(e)} ${m.dir||"ASC"}`)}d.length>0&&(c=" "+this.parent.dialect.sqlOrderBy(d))}let f="";if(i.between){let[d,h]=[i.between.preceding,i.between.following].map(p=>{if(p===-1)return"UNBOUNDED";if(typeof p=="number")return p;let m=i.params.findIndex(y=>y.name===p),g=o[m];if(g.length!==1||typeof g[0]=="string"||g[0].type!=="dialect"||g[0].function!=="numberLiteral")throw new Error("Invalid number of rows for window spec");return g[0].literal});f=`ROWS BETWEEN ${d} PRECEDING AND ${h} FOLLOWING`}return`${this.generateExpressionFromExpr(e,r,n,s)} OVER(${a} ${c} ${f})`}generateExpressionFromExpr(e,r,n,i=new zz){let s="";for(let o of n)if(typeof o=="string")s+=o;else if((0,qe.isFieldFragment)(o))s+=this.generateFieldFragment(e,r,o,i);else if((0,qe.isParameterFragment)(o))s+=this.generateParameterFragment(e,r,o,i);else if((0,qe.isFilterFragment)(o))s+=this.generateFilterFragment(e,r,o,i);else if((0,qe.isUngroupFragment)(o))s+=this.generateUngroupedFragment(e,r,o,i);else if((0,qe.isAggregateFragment)(o)){let a;if(o.function==="sum")a=this.generateSumFragment(e,r,o,i);else if(o.function==="avg")a=this.generateAvgFragment(e,r,o,i);else if(o.function==="count")a=this.generateCountFragment(e,r,o,i);else if(["count_distinct","min","max"].includes(o.function))a=this.generateSymmetricFragment(e,r,o,i);else throw new Error(`Internal Error: Unknown aggregate function ${o.function}`);if(e.root().isComplexQuery){let u=e.groupSet;i.totalGroupSet!==-1&&(u=i.totalGroupSet),s+=this.caseGroup([u],a)}else s+=a}else if((0,qe.isApplyFragment)(o)){let a=this.generateExpressionFromExpr(e,r,o.value,i);s+=this.generateExpressionFromExpr(e,r,o.to,i.withApply(a))}else if((0,qe.isApplyValue)(o))if(i.applyValue)s+=i.applyValue;else throw new Error("Internal Error: Partial application value referenced but not provided");else{if((0,qe.isFunctionParameterFragment)(o))throw new Error("Internal Error: Function parameter fragment remaining during SQL generation");if((0,qe.isOutputFieldFragment)(o))s+=this.generateOutputFieldFragment(e,r,o,i);else if((0,qe.isSQLExpressionFragment)(o))s+=this.generateSQLExpression(e,r,o,i);else if((0,qe.isFunctionCallFragment)(o))s+=this.generateFunctionCallExpression(e,r,o,i);else if((0,qe.isSpreadFragment)(o))s+=this.generateSpread(e,r,o,i);else if(o.type==="dialect")s+=this.generateDialect(e,r,o,i);else throw new Error(`Internal Error: Unknown expression fragment ${JSON.stringify(o,void 0,2)}`)}return s}getExpr(){return(0,qe.hasExpression)(this.fieldDef)?this.fieldDef.e:[this.parent.dialect.sqlFieldReference(this.parent.getSQLIdentifier(),this.fieldDef.name,this.fieldDef.type,this.parent.fieldDef.structSource.type==="nested"||this.parent.fieldDef.structSource.type==="inline"||this.parent.fieldDef.structSource.type==="sql"&&this.parent.fieldDef.structSource.method==="nested",this.parent.fieldDef.structRelationship.type==="nested"&&this.parent.fieldDef.structRelationship.isArray)]}generateExpression(e){return this.generateExpressionFromExpr(e,this.parent,this.getExpr())}};function VN(t){return t instanceof In&&t.isCalculated()}function nxe(t){return t instanceof In&&t.isAggregate()}function es(t){return t instanceof In&&!t.isCalculated()}var In=class extends oy{includeInWildcard(){return!0}isCalculated(){return(0,qe.expressionIsCalculation)(this.fieldDef.expressionType)}isAggregate(){return(0,qe.expressionIsAggregate)(this.fieldDef.expressionType)}getFilterList(){return[]}hasExpression(){return(0,qe.hasExpression)(this.fieldDef)}},Gz=class extends In{},Qz=class extends In{},K_=class extends In{},Vz=class extends In{},Wz=class extends In{},X_=class extends In{constructor(e,r,n){super(e,r),this.primaryKey=n}getName(){return(0,qe.getIdentifier)(this.fieldDef)}getAsJoinedStructDef(e){return{...this.parent.fieldDef,structRelationship:{type:"one",matrixOperation:"left",onExpression:[{type:"field",path:this.primaryKey},"=",{type:"field",path:e}]}}}},YN=class t extends In{generateExpression(e){let r=this.fieldDef;if(r.timeframe){let n=this.parent.dialect.sqlTrunc(e.getQueryInfo(),{value:this.getExpr(),valueType:"date"},r.timeframe);return this.generateExpressionFromExpr(e,this.parent,n)}else return super.generateExpression(e)}getChildByName(e){let r={...this.fieldDef,as:`${this.getIdentifier()}_${e}`,timeframe:e};return new t(r,this.parent)}},KN=class t extends In{getChildByName(e){let r={...this.fieldDef,as:`${this.getIdentifier()}_${e}`,timeframe:e};return new t(r,this.parent)}},Yz=class extends In{generateExpression(e){var r;return this.parent.primaryKey()?this.parent.getPrimaryKeyField(this.fieldDef).generateExpression(e):this.parent.fieldDef.structSource.type==="nested"?`CONCAT(${(r=this.parent.parent)===null||r===void 0?void 0:r.getDistinctKey().generateExpression(e)}, 'x', ${this.parent.dialect.sqlFieldReference(this.parent.getIdentifier(),"__row_id","string",!0,!1)})`:this.parent.dialect.sqlFieldReference(this.parent.getIdentifier(),"__distinct_key","string",this.parent.fieldDef.structRelationship.type==="nested",!1)}includeInWildcard(){return!1}},txe=9;function rxe(t,e,r){let i=t.sqlSumDistinctHashedKey(r),s=10**(9-txe),a=`(${`
  (
    SUM(DISTINCT
      (CAST(ROUND(COALESCE(${e},0)*(${s}*1.0), ${txe}) AS ${t.defaultDecimalType}) +
      ${i}
    ))
    -
     SUM(DISTINCT ${i})
  )`}/(${s}*1.0))`;return a=`CAST(${a} as ${t.defaultNumberType})`,a}var ts=class{constructor(e,r,n){this.f=e,this.fieldUsage=r,this.parent=n,this.type="field",this.additionalGroupSets=[]}root(){return this.parent.root()}getSQL(){let e=this.f.generateExpression(this.parent);return es(this.f)&&(e=this.f.caseGroup(this.parent.groupSet>0?this.parent.childGroups.concat(this.additionalGroupSets):[],e)),e}getAnalyticalSQL(e){return this.analyticalSQL===void 0?this.getSQL():e&&this.partitionSQL?this.partitionSQL:this.analyticalSQL}},J0=class t{constructor(e,r){this.turtleDef=e,this.parent=r,this.type="query",this.allFields=new Map,this.groupSet=0,this.depth=0,this.childGroups=[],this.hasHaving=!1,this.ungroupedSets=new Map,this.resultUsesUngrouped=!1,this.firstSegment=e.pipeline[0]}getQueryInfo(){if(!(0,qe.isIndexSegment)(this.firstSegment)&&!(0,qe.isRawSegment)(this.firstSegment)){let{queryTimezone:e}=this.firstSegment;if(e)return{queryTimezone:e}}return{}}addField(e,r,n){let i=this.allFields.get(e);if(i){if(i.type==="query")throw new Error(`Redefinition of field ${r.fieldDef.name} as struct`);if(i.fieldUsage.type==="result"){if(n.type!=="result")return;throw new Error(`Ambiguous output field name '${r.fieldDef.name}'.`)}}this.add(e,new ts(r,n,this))}parentGroupSet(){return this.parent?this.parent.groupSet:0}add(e,r){this.allFields.set(e,r)}hasField(e){let r=this.allFields.get(e);return r!==void 0&&r instanceof ts}getField(e){let r=this.allFields.get(e);if(r===void 0)throw new Error(`Internal Error, field Not defined ${e}`);if(r instanceof ts)return r;throw new Error(`can't use a query here ${e}`)}getFieldByNumber(e){for(let[r,n]of this.allFields)if(n instanceof ts&&n.fieldUsage.type==="result"&&n.fieldUsage.resultIndex===e)return{name:r,fif:n};throw new Error(`Invalid Order By index '${e}`)}computeGroups(e,r){e===0&&this.resultUsesUngrouped&&this.root().computeOnlyGroups.push(e++);for(let[o,a]of this.ungroupedSets){let u=e++;a.groupSet=u,this.root().computeOnlyGroups.push(u)}this.groupSet=e++,this.depth=r;let n=r,i=!1,s=[this.groupSet];for(let[o,a]of this.allFields)if(a.type==="query"){let u=a;if(i=!0,u.firstSegment.type==="reduce"){let l=u.computeGroups(e,r+1);s=s.concat(l.children),e=l.nextGroupSetNumber,l.maxDepth>n&&(n=l.maxDepth)}}return this.childGroups=s,{nextGroupSetNumber:e,maxDepth:n,children:s,isComplex:i}}fields(e=void 0){let r=[];for(let n of this.allFields.values())n instanceof ts&&(e===void 0||e(n))&&r.push(n);return r}fieldNames(e){let r=[];for(let[n,i]of this.allFields)i instanceof ts&&(e===void 0||e(i))&&r.push(n);return r}getRepeatedResultType(){let e="inline_all_numbers";for(let r of this.fields())if(r.fieldUsage.type==="result"){if(es(r.f))return"nested";r.f instanceof La&&(e="inline")}return e}structs(){let e=[];for(let r of this.allFields.values())r instanceof t&&e.push(r);return e}selectStructs(e,r){r(this)&&e.push(this);for(let n of this.structs())n.selectStructs(e,r);return e}calculateDefaultOrderBy(){let e;for(let[r,n]of this.allFields)if(n instanceof ts&&n.fieldUsage.type==="result"){if(e||(e=n.fieldUsage.resultIndex),["date","timestamp"].indexOf(n.f.fieldDef.type)>-1)return[{dir:"desc",field:n.fieldUsage.resultIndex}];if(nxe(n.f))return[{dir:"desc",field:n.fieldUsage.resultIndex}]}return e?[{dir:"asc",field:e}]:[]}addStructToJoin(e,r,n,i){var s;let o=e.getIdentifier();if(i.indexOf(o)!==-1)return;let a;if(a=this.root().joins.get(o)){a.mayNeedUniqueKey||(a.mayNeedUniqueKey=n);return}let u,l=(s=e.parent)===null||s===void 0?void 0:s.getJoinableParent();l&&(this.addStructToJoin(l,r,!1,i),u=this.root().joins.get(l.getIdentifier()));let c=e.fieldDef.structRelationship;(0,qe.isJoinOn)(c)&&e.parent&&c.onExpression!==void 0&&i.indexOf(o)===-1&&r.addDependantExpr(this,e.parent,c.onExpression,[...i,o]),(a=this.root().joins.get(o))||(a=new Xz(e,o,u),this.root().joins.set(o,a)),a.mayNeedUniqueKey||(a.mayNeedUniqueKey=n)}findJoins(e){for(let r of this.fields())this.addStructToJoin(r.f.getJoinableParent(),e,r.f.mayNeedUniqueKey(),[]);for(let r of this.structs())r.findJoins(e)}root(){if(this.parent)return this.parent.root();throw new Error("Internal Error, Null parent FieldInstanceResult")}getUngroupPartitions(e){let r=[],n=this,i=[],s=[];if(e===void 0||e.type==="all"){let a=e?.fields||[];i=this.fields(u=>es(u.f)&&u.fieldUsage.type==="result"&&a.indexOf(u.f.getIdentifier())===-1).map(u=>u.f.getIdentifier())}else i=e.fields;let o=!0;for(;n!==void 0;)(o||e?.type==="exclude")&&(s=s.concat(n.fields(a=>es(a.f)&&a.fieldUsage.type==="result").map(a=>a.f.getIdentifier()))),r=r.concat(n.fields(a=>es(a.f)&&a.fieldUsage.type==="result"&&i.indexOf(a.f.getIdentifier())===-1)),n=n.parent,o=!1;for(let a of e?.fields||[])if(s.indexOf(a)===-1)throw new Error(`${e?.type}(): unknown field name "${a}" or name not in scope.`);return r}assignFieldsToGroups(){for(let[e,r]of this.ungroupedSets)for(let n of this.getUngroupPartitions(r))n.additionalGroupSets.push(r.groupSet);for(let e of this.structs())e.assignFieldsToGroups()}},Kz=class extends J0{constructor(e){super(e,void 0),this.joins=new Map,this.havings=new Zi.AndChain,this.isComplexQuery=!1,this.queryUsesPartitioning=!1,this.computeOnlyGroups=[],this.elimatedComputeGroups=!1}root(){return this}eliminateComputeGroupsSQL(){return this.elimatedComputeGroups||this.computeOnlyGroups.length===0?"":(this.elimatedComputeGroups=!0,`group_set NOT IN (${this.computeOnlyGroups.join(",")})`)}calculateSymmetricAggregates(){let e;for(let[r,n]of this.joins)if(n.parentRelationship()==="many_to_many"||n.forceAllSymmetricCalculations())e="0never";else if(e===void 0)e=r;else if(n.parentRelationship()==="one_to_many"){let s=n.queryStruct;s.parent&&s.parent.getIdentifier()===e?e=r:e="0never"}for(let[r,n]of this.joins)n.leafiest=r===e;for(let[r,n]of this.joins)if(!n.leafiest&&n.mayNeedUniqueKey){let i=n;for(;i;)i.queryStruct.primaryKey()||(i.makeUniqueKey=!0),i.queryStruct.fieldDef.structRelationship.type==="nested"?i=i.parent:i=void 0}}},Xz=class{constructor(e,r,n){if(this.queryStruct=e,this.alias=r,this.parent=n,this.mayNeedUniqueKey=!1,this.makeUniqueKey=!1,this.leafiest=!1,this.children=[],n&&n.children.push(this),this.queryStruct.fieldDef.filterList){this.joinFilterConditions=[];for(let i of this.queryStruct.fieldDef.filterList){let s=new K_({type:"boolean",name:"ignoreme",e:i.expression},this.queryStruct);this.joinFilterConditions.push(s)}}}parentRelationship(){if(this.queryStruct.parent===void 0)return"root";switch(this.queryStruct.fieldDef.structRelationship.type){case"one":return"many_to_one";case"cross":return"many_to_many";case"many":return"one_to_many";case"nested":return"one_to_many";case"inline":return"one_to_one";default:throw new Error(`Internal error unknown relationship type to parent for ${this.queryStruct.fieldDef.name}`)}}forceAllSymmetricCalculations(){let e=this.queryStruct.fieldDef.structRelationship;return this.queryStruct.parent===void 0||!(0,qe.isJoinOn)(e)?!1:e.matrixOperation==="right"||e.matrixOperation==="full"}getDialectFieldList(){let e=[];for(let r of this.queryStruct.fieldDef.fields.filter(qe.isPhysical))e.push({type:r.type,sqlExpression:(0,qe.getIdentifier)(r),sqlOutputName:(0,qe.getIdentifier)(r)});return e}},XN=class extends oy{},Jz=class{static nextStructDef(e,r){let n=new La(e,{model:new JN(void 0)}),i={type:"turtle",name:"ignoreme",pipeline:[r]};return Z0.makeQuery(i,n,new L1(!0,void 0),!1).getResultStructDef()}};ay.Segment=Jz;var Z0=class t extends oy{constructor(e,r,n,i){super(e,r),this.prepared=!1,this.maxDepth=0,this.maxGroupSet=0,this.fieldDef=e,this.rootResult=new Kz(e),this.stageWriter=n,this.firstSegment=e.pipeline[0],this.isJoinedSubquery=i}static makeQuery(e,r,n=void 0,i){let s=r,o=r.applyStructFiltersToTurtleDef(e),a=o.pipeline[0],u=r.fieldDef;switch(n!==void 0&&(0,qe.isQuerySegment)(a)&&a.extendSource!==void 0&&(s=new La({...u,fields:[...u.fields,...a.extendSource]},s.parent?{struct:s}:{model:s.model}),o={...o,pipeline:[{...a,extendSource:void 0},...o.pipeline.slice(1)]}),u.queryTimezone&&(0,qe.isQuerySegment)(a)&&a.queryTimezone===void 0&&(a.queryTimezone=u.queryTimezone),a.type){case"reduce":return new Zz(o,s,n,i);case"project":return new eG(o,s,n,i);case"index":return new nG(o,s,n,i);case"raw":return new rG(o,s,n,i);case"partial":throw new Error("Attempt to make query out of partial stage")}}inNestedPipeline(){return this.parent.fieldDef.structSource.type==="sql"&&this.parent.fieldDef.structSource.method==="nested"}getFieldList(){switch(this.firstSegment.type){case"reduce":return this.firstSegment.fields;case"project":return this.firstSegment.fields;default:throw new Error(`Query contains no fields ${JSON.stringify(this.fieldDef)}`)}}expandField(e){let r,n;if(typeof e=="string")n=this.parent.getQueryFieldByName(e);else if("type"in e)n=this.parent.makeQueryField(e);else if("name"in e&&"as"in e){if(n=this.parent.getQueryFieldByName(e.name),r=n.fieldDef.as||e.as,n instanceof X_)throw new Error("Syntax currently disallowed. Semantics up for discussion");if(n instanceof t){let i=structuredClone(n.fieldDef);i.as=e.name,i.filterList=e.filterList,n=t.makeQuery(i,this.parent,void 0,this.isJoinedSubquery)}else if(!(n instanceof KN||n instanceof YN))throw new Error(`No longer generate code this way. 
 ${JSON.stringify(e,void 0,2)}`)}else throw new Error(`Unrecognized field definition ${JSON.stringify(e,void 0,2)}`);return r||(r=n.getIdentifier()),{as:r,field:n}}expandDependantField(e,r){this.expandField(r)}expandWildCardStruct(e,r,n=void 0){let i=[],s=[];for(let[o,a]of e.nameMap)a instanceof In&&es(a)&&a.includeInWildcard()&&!this.parent.dialect.ignoreInProject(a.fieldDef.name)&&(!n||n(a))?i.push(a.getFullOutputName()):a instanceof La&&r&&s.push(a);for(let o of s)i=i.concat(this.expandWildCardStruct(o,r,n));return i}expandWildCards(e,r=void 0){let n=[];for(let i of e)if(typeof i!="string")n.push(i);else{let o=i.split(".");if(!o[o.length-1].startsWith("*"))n.push(i);else{let a=o.pop()==="**",u=this.parent,l;for(;o.length>0&&(l=o.shift());){let c=u.getChildByName(l);if(c===void 0)throw new Error(`Nested source not found '${l}'`);if(c instanceof La)u=c;else throw new Error(`'${l}' is not a source object`)}n=n.concat(this.expandWildCardStruct(u,a,r))}}return n}addDependantPath(e,r,n,i,s){let o=r.getFieldByName(n),a;if(o instanceof oy)a=o.parent;else if(o instanceof La)a=o;else throw new Error("Internal Error:  Unknown object type");e.root().addStructToJoin(a.getJoinableParent(),this,i,s)}addDependantExpr(e,r,n,i){for(let s of n)if((0,qe.isFunctionCallFragment)(s)&&(0,qe.expressionIsAnalytic)(s.overload.returnType.expressionType)&&this.parent.dialect.cantPartitionWindowFunctionsOnExpressions&&(e.root().isComplexQuery=!0,e.root().queryUsesPartitioning=!0),(0,qe.isUngroupFragment)(s)){if(e.resultUsesUngrouped=!0,e.root().isComplexQuery=!0,e.root().queryUsesPartitioning=!0,s.fields&&s.fields.length>0){let o=s.fields.sort().join("|")+s.type;e.ungroupedSets.get(o)===void 0&&e.ungroupedSets.set(o,{type:s.type,fields:s.fields,groupSet:-1})}this.addDependantExpr(e,r,s.e,i)}else if((0,qe.isFieldFragment)(s)){let o=r.getDimensionOrMeasureByName(s.path);(0,qe.hasExpression)(o.fieldDef)?this.addDependantExpr(e,o.parent,o.fieldDef.e,i):e.root().addStructToJoin(o.parent.getJoinableParent(),this,!1,i)}else if((0,qe.isFilterFragment)(s)){for(let o of s.filterList)this.addDependantExpr(e,r,o.expression,i),this.addDependantExpr(e,r,s.e,i);this.addDependantExpr(e,r,s.e,i)}else if((0,qe.isDialectFragment)(s)){let o=[];switch(s.function){case"now":break;case"div":o.push(s.denominator),o.push(s.numerator);break;case"numberLiteral":case"timeLiteral":case"stringLiteral":case"regexpLiteral":break;case"timeDiff":o.push(s.left.value,s.right.value);break;case"delta":o.push(s.base.value,s.delta);break;case"trunc":case"extract":o.push(s.expr.value);break;case"regexpMatch":case"cast":o.push(s.expr);break;default:throw new Error("Unknown dialect Fragment type.  Can't generate dependancies")}for(let a of o)this.addDependantExpr(e,r,a,i)}else if((0,qe.isAggregateFragment)(s))(0,qe.isAsymmetricFragment)(s)&&(s.structPath?this.addDependantPath(e,r,s.structPath,!0,i):e.addStructToJoin(r,this,!0,i)),this.addDependantExpr(e,r,s.e,i);else if((0,qe.isFunctionCallFragment)(s)){s.structPath&&this.addDependantPath(e,r,s.structPath,!0,i);for(let o of s.args)this.addDependantExpr(e,r,o,i);(0,qe.expressionIsAnalytic)(s.overload.returnType.expressionType)&&(e.root().queryUsesPartitioning=!0)}}addDependancies(e,r){(0,qe.hasExpression)(r.fieldDef)&&this.addDependantExpr(e,r.parent,r.fieldDef.e,[])}expandFields(e){let r=1;for(let n of this.expandWildCards(e.firstSegment.fields)){let{as:i,field:s}=this.expandField(n);if(s instanceof XN||s instanceof t){if(this.firstSegment.type==="project")throw new Error(`Nested views cannot be used in select - '${s.fieldDef.name}'`);let o=new J0(s.fieldDef,e);this.expandFields(o),e.add(i,o)}else if(s instanceof In&&(e.addField(i,s,{resultIndex:r,type:"result"}),this.addDependancies(e,s),nxe(s)&&this.firstSegment.type==="project"))throw new Error(`Aggregate Fields cannot be used in select - '${s.fieldDef.name}'`);r++}this.expandFilters(e)}expandFilters(e){if(e.firstSegment.filterList!==void 0){for(let r of e.firstSegment.filterList||[]){let n=this.parent;this.addDependantExpr(e,n,r.expression,[])}for(let r of e.root().joins.values()||[])for(let n of r.joinFilterConditions||[])n.fieldDef.type==="boolean"&&n.fieldDef.e&&this.addDependantExpr(e,n.parent,n.fieldDef.e,[])}}generateSQLFilters(e,r,n=void 0){let i=new Zi.AndChain,s=n||e.firstSegment.filterList;if(s===void 0)return i;for(let o of s||[]){let a=this.parent;if(r==="having"&&(0,qe.expressionIsCalculation)(o.expressionType)||r==="where"&&(0,qe.expressionIsScalar)(o.expressionType)){let u=this.generateExpressionFromExpr(e,a,o.expression,void 0);i.add(u)}}return i}prepare(e){this.prepared||(this.expandFields(this.rootResult),this.rootResult.addStructToJoin(this.parent,this,!1,[]),this.rootResult.findJoins(this),this.rootResult.calculateSymmetricAggregates(),this.prepared=!0)}getResultMetadata(e){if(e instanceof ts){if(e.fieldUsage.type==="result"){let r=e.f.fieldDef,n,i=e.f.parent.getFullOutputName()+(r.name||r.as||"undefined"),s=r.code,o=[i];return VN(e.f)?(n=e.f.getFilterList(),{sourceField:i,sourceExpression:s,filterList:n,sourceClasses:o,fieldKind:"measure"}):es(e.f)?{sourceField:i,sourceExpression:s,filterList:n,sourceClasses:o,fieldKind:"dimension"}:void 0}return}else if(e instanceof J0){let r=e.turtleDef.name||e.turtleDef.as,n=r?[r]:[],i=e.firstSegment.filterList,s=e.turtleDef.pipeline[e.turtleDef.pipeline.length-1],o=(0,qe.isRawSegment)(s)?void 0:s.limit,a;if((0,qe.isQuerySegment)(s)&&(a=s.orderBy),r)return{sourceField:r,filterList:i,sourceClasses:n,fieldKind:"struct",limit:o,orderBy:a}}}getResultStructDef(e=this.rootResult,r=!0){let n=[],i;this.prepare(void 0);let s=0;for(let[a,u]of e.allFields){let l=this.getResultMetadata(u);if(u instanceof J0){let{structDef:c}=this.generateTurtlePipelineSQL(u,new L1(!0,void 0),"<nosource>"),f=u.getRepeatedResultType()==="nested"?"nested":"inline";c.name=a,c.structRelationship={field:a,type:f,isArray:!1},c.structSource={type:f},c.resultMetadata=l,n.push(c)}else if(u instanceof ts&&u.fieldUsage.type==="result"){u.f instanceof X_&&n.push(u.f.getAsJoinedStructDef(a)),es(u.f)&&(s===0&&r?i=a:i=void 0,s++);let c=u.f.fieldDef.location,f=u.f.fieldDef.annotation;switch(u.f.fieldDef.type){case"boolean":case"json":case"string":n.push({name:a,type:u.f.fieldDef.type,resultMetadata:l,location:c,annotation:f});break;case"timestamp":{let x=u.f.fieldDef.timeframe;x?n.push({name:a,type:"timestamp",timeframe:x,resultMetadata:l,location:c,annotation:f}):n.push({name:a,type:"timestamp",resultMetadata:l,location:c,annotation:f});break}case"date":{n.push({name:a,type:u.f.fieldDef.type,timeframe:u.f.fieldDef.timeframe,resultMetadata:l,location:c,annotation:f});break}case"number":n.push({name:a,numberType:u.f.fieldDef.numberType,type:"number",resultMetadata:l,location:c,annotation:f});break;case"unsupported":n.push({...u.f.fieldDef,resultMetadata:l,location:c});break;default:throw new Error(`unknown Field Type in query ${JSON.stringify(u.f.fieldDef)}`)}}}let o={fields:n,name:this.resultStage||"result",dialect:this.parent.dialect.name,primaryKey:i,structRelationship:{type:"basetable",connectionName:this.parent.connectionName},structSource:{type:"query_result"},resultMetadata:this.getResultMetadata(this.rootResult),type:"struct",queryTimezone:e.getQueryInfo().queryTimezone};return this.parent.fieldDef.modelAnnotation&&(o.modelAnnotation=this.parent.fieldDef.modelAnnotation),o}generateSQLJoinBlock(e,r){let n="",i=r.queryStruct,s=i.fieldDef.structRelationship,o=i.structSourceSQL(e);if((0,qe.isJoinOn)(s)){let a=s.matrixOperation.toUpperCase();if(r.makeUniqueKey){let f=this.generateSQLPassthroughKeys(i);o=`(SELECT ${i.dialect.sqlGenerateUUID()} as __distinct_key, x.* ${f} FROM ${o} as x)`}let u="";if(i.parent===void 0)throw new Error("Expected joined struct to have a parent.");s.onExpression?u=new K_({type:"boolean",name:"ignoreme",e:s.onExpression},i.parent).generateExpression(this.rootResult):u="1=1";let l="",c;if(r.joinFilterConditions&&(c=r.joinFilterConditions.map(f=>f.generateExpression(this.rootResult))),r.children.length===0||c===void 0)c!==void 0&&c.length>=1&&(l=` AND (${c.join(" AND ")})`),n+=` ${a} JOIN ${o} AS ${r.alias}
  ON ${u}${l}
`;else{let f=`SELECT ${r.alias}.*`,x="";for(let d of r.children){x+=this.generateSQLJoinBlock(e,d);let h=(0,qe.getPhysicalFields)(d.queryStruct.fieldDef).map(p=>this.parent.dialect.sqlMaybeQuoteIdentifier(p.name));f+=`, ${this.parent.dialect.sqlSelectAliasAsStruct(d.alias,h)} AS ${d.alias}`}return f+=`
FROM ${o} AS ${r.alias}
${x}
WHERE ${c?.join(" AND ")}
`,n+=`${a} JOIN (
${(0,Zi.indent)(f)}) AS ${r.alias}
  ON ${u}
`,n}}else if(s.type==="nested"){if(i.parent===void 0||r.parent===void 0)throw new Error("Internal Error, nested structure with no parent.");let a=this.parent.dialect.sqlFieldReference(i.parent.getSQLIdentifier(),s.field,"struct",i.parent.fieldDef.structRelationship.type==="nested",this.parent.fieldDef.structRelationship.type==="nested"&&this.parent.fieldDef.structRelationship.isArray);n+=`${this.parent.dialect.sqlUnnestAlias(a,r.alias,r.getDialectFieldList(),r.makeUniqueKey,s.isArray,this.inNestedPipeline())}
`}else throw s.type==="inline"?new Error("Internal Error: inline structs should never appear in join trees"):new Error(`Join type not implemented ${JSON.stringify(i.fieldDef.structRelationship)}`);for(let a of r.children)n+=this.generateSQLJoinBlock(e,a);return n}generateSQLPassthroughKeys(e){let r="";if(e.dialect.name==="standardsql"){let n=["_TABLE_SUFFIX","_PARTITIONDATE","_PARTITIONTIME"].filter(i=>e.getChildByName(i)!==void 0);n.length>0&&(r=", "+n.join(", "))}return r}generateSQLJoins(e){let r="",[[,n]]=this.rootResult.joins,i=n.queryStruct,s=i.structSourceSQL(e);if((0,qe.isIndexSegment)(this.firstSegment)&&(s=this.parent.dialect.sqlSampleTable(s,this.firstSegment.sample),this.firstSegment.sample&&(s=e.addStage(`SELECT * from ${s} as x limit 100000 `))),i.fieldDef.structRelationship.type==="basetable"){if(n.makeUniqueKey){let a=this.generateSQLPassthroughKeys(i);s=`(SELECT ${i.dialect.sqlGenerateUUID()} as __distinct_key, x.* ${a} FROM ${s} as x)`}r+=`FROM ${s} as ${n.alias}
`}else throw new Error("Internal Error, queries must start from a basetable");for(let a of n.children)r+=this.generateSQLJoinBlock(e,a);return r}genereateSQLOrderBy(e,r){let n="";if(this.firstSegment.type==="project"&&!e.orderBy||this.fieldDef.pipeline.length>1&&e.limit===void 0||r.getRepeatedResultType()==="inline_all_numbers"||this.isJoinedSubquery&&this.fieldDef.pipeline.length===1&&e.limit===void 0)return"";let i=e.orderBy||r.calculateDefaultOrderBy(),s=[];for(let o of i)if(typeof o.field=="string"){let a=r.getField(o.field);if(a&&a.fieldUsage.type==="result")s.push(`${a.fieldUsage.resultIndex} ${o.dir||"ASC"}`);else throw new Error(`Unknown field in ORDER BY ${o.field}`)}else s.push(`${o.field} ${o.dir||"ASC"}`);return s.length>0&&(n=this.parent.dialect.sqlOrderBy(s)+`
`),n}generateSimpleSQL(e){let r="";r+=`SELECT 
`;let n=[];for(let[i,s]of this.rootResult.allFields){let o=s,a=this.parent.dialect.sqlMaybeQuoteIdentifier(i);o.fieldUsage.type==="result"&&n.push(` ${o.f.generateExpression(this.rootResult)} as ${a}`)}if(r+=(0,Zi.indent)(n.join(`,
`))+`
`,r+=this.generateSQLJoins(e),r+=this.generateSQLFilters(this.rootResult,"where").sql("where"),this.firstSegment.type==="reduce"){let i=[];for(let s of this.rootResult.fields()){let o=s;o.fieldUsage.type==="result"&&es(o.f)&&i.push(o.fieldUsage.resultIndex.toString())}i.length>0&&(r+=`GROUP BY ${i.join(",")}
`)}return r+=this.generateSQLFilters(this.rootResult,"having").sql("having"),r+=this.genereateSQLOrderBy(this.firstSegment,this.rootResult),!(0,qe.isRawSegment)(this.firstSegment)&&this.firstSegment.limit&&(r+=`LIMIT ${this.firstSegment.limit}
`),this.resultStage=e.addStage(r),this.resultStage}generatePipelinedStages(e,r,n){if(e.length===0)return r;let i=e.map(s=>`${s.pipelineSQL} as ${s.sqlFieldName}
      `).join(`,
`);return n.addStage(`SELECT * replace (${i}) FROM ${r}
      `)}generateStage0Fields(e,r,n){for(let[s,o]of e.allFields){let a=this.parent.dialect.sqlMaybeQuoteIdentifier(`${s}__${e.groupSet}`);if(o instanceof ts){if(o.fieldUsage.type==="result"){let u=o.getSQL();if(es(o.f)){if(this.parent.dialect.cantPartitionWindowFunctionsOnExpressions&&this.rootResult.queryUsesPartitioning){let l=`__lateral_join_bag.${a}`;if(o.analyticalSQL=l,r.lateralJoinSQLExpressions.push(`${u} as ${a}`),r.sql.push(l),o.f.fieldDef.type==="number"){let c=this.parent.dialect.sqlMaybeQuoteIdentifier(`${s}__${e.groupSet}_string`),f=`__lateral_join_bag.${c}`;r.sql.push(f),r.dimensionIndexes.push(r.fieldIndex++),r.lateralJoinSQLExpressions.push(`CAST(${u} as STRING) as ${c}`),o.partitionSQL=f}}else r.sql.push(`${u} as ${a}`);r.dimensionIndexes.push(r.fieldIndex++)}else VN(o.f)&&(r.sql.push(`${u} as ${a}`),r.fieldIndex++)}}else if(o instanceof J0){if(o.firstSegment.type==="reduce")this.generateStage0Fields(o,r,n);else if(o.firstSegment.type==="project"){let u=this.generateTurtleSQL(o,n,a,r.outputPipelinedSQL);r.sql.push(`${u} as ${a}`),r.fieldIndex++}}}let i=this.generateSQLFilters(e,"having");i.empty()||(e.childGroups.length===1?e.root().havings.add(`(group_set<>${e.groupSet} OR (group_set=${e.groupSet} AND ${i.sql()}))`):(e.hasHaving=!0,r.sql.push(`CASE WHEN group_set=${e.groupSet} THEN CASE WHEN ${i.sql()} THEN 0 ELSE 1 END END as __delete__${e.groupSet}`),r.fieldIndex++))}generateSQLWhereChildren(e){let r=new Zi.AndChain;for(let[,n]of e.allFields)if(n.type==="query"){let i=n,s=this.generateSQLFilters(i,"where");if(s.present()){let o=i.childGroups.join(",");r.add(`(group_set NOT IN (${o}) OR (group_set IN (${o}) AND ${s.sql()}))`)}r.addChain(this.generateSQLWhereChildren(i))}return r}generateSQLWhereTurtled(){let e=this.generateSQLFilters(this.rootResult,"where");return e.addChain(this.generateSQLWhereChildren(this.rootResult)),e.sql("where")}generateSQLHavingLimit(e,r){let n=[],i=this.rootResult.selectStructs([],s=>s.hasHaving);if(i.length>0)for(let s of i){let o=[],a=s;for(;a;){for(let u of a.fieldNames(l=>es(l.f)))o.push(this.parent.dialect.sqlMaybeQuoteIdentifier(`${u}__${a.groupSet}`));a=a.parent}n.push(`MAX(CASE WHEN group_set IN (${s.childGroups.join(",")}) THEN __delete__${s.groupSet} END) OVER(partition by ${o.map(this.parent.dialect.castToString).join(",")}) as __shaving__${s.groupSet}`)}if(i.length>0){r=e.addStage(`SELECT
  *,
  ${n.join(`,
  `)} 
FROM ${r}`);let s=new Zi.AndChain;for(let o of i)s.add(`group_set IN (${o.childGroups.join(",")}) AND __shaving__${o.groupSet}=1`);r=e.addStage(`SELECT *
FROM ${r}
WHERE NOT (${s.sqlOr()})`)}return r}generateSQLStage0(e){let r=`SELECT
`,n=this.generateSQLJoins(e),i=this.generateSQLWhereTurtled(),s={dimensionIndexes:[1],fieldIndex:2,sql:["group_set"],lateralJoinSQLExpressions:[],groupsAggregated:[],outputPipelinedSQL:[]};if(this.generateStage0Fields(this.rootResult,s,e),this.firstSegment.type==="project")throw new Error("PROJECT cannot be used on queries with turtles");let o="GROUP BY "+s.dimensionIndexes.join(",")+`
`;n+=this.parent.dialect.sqlGroupSetTable(this.maxGroupSet)+`
`,r+=(0,Zi.indent)(s.sql.join(`,
`))+`
`,s.lateralJoinSQLExpressions.length>0&&(n+=`LEFT JOIN UNNEST([STRUCT(${s.lateralJoinSQLExpressions.join(`,
`)})]) as __lateral_join_bag
`),r+=n+i+o+this.rootResult.havings.sql("having");let a=e.addStage(r);return this.resultStage=this.generateSQLHavingLimit(e,a),this.resultStage=this.generatePipelinedStages(s.outputPipelinedSQL,this.resultStage,e),this.resultStage}generateDepthNFields(e,r,n,i){let s=[];for(let[o,a]of r.allFields){let u=this.parent.dialect.sqlMaybeQuoteIdentifier(`${o}__${r.groupSet}`);if(a instanceof ts){if(a.fieldUsage.type==="result"){if(es(a.f)){let l=this.caseGroup(r.groupSet>0?r.childGroups:[],u);n.sql.push(`${l} as ${u}`),n.dimensionIndexes.push(n.fieldIndex++)}else if(VN(a.f)){let l=this.parent.dialect.sqlAnyValue(r.groupSet,u);n.sql.push(`${l} as ${u}`),n.fieldIndex++}}}else if(a instanceof J0&&!(a.depth>e))if(a.depth===e){let l=this.generateTurtleSQL(a,i,u,n.outputPipelinedSQL);n.groupsAggregated.push({fromGroup:a.groupSet,toGroup:r.groupSet}),s.push(a.groupSet),n.sql.push(`${l} as ${u}`),n.fieldIndex++}else this.generateDepthNFields(e,a,n,i)}if(n.groupsAggregated.length>0){n.sql[0]="CASE ";for(let o of n.groupsAggregated)n.sql[0]+=`WHEN group_set=${o.fromGroup} THEN ${o.toGroup} `;n.sql[0]+=" ELSE group_set END as group_set"}}generateSQLDepthN(e,r,n){let i=`SELECT 
`,s={dimensionIndexes:[1],fieldIndex:2,sql:["group_set"],lateralJoinSQLExpressions:[],groupsAggregated:[],outputPipelinedSQL:[]};this.generateDepthNFields(e,this.rootResult,s,r),i+=(0,Zi.indent)(s.sql.join(`,
`))+`
`,i+=`FROM ${n}
`;let o=this.rootResult.eliminateComputeGroupsSQL();return o.length>0&&(i+=`WHERE ${o}
`),s.dimensionIndexes.length>0&&(i+=`GROUP BY ${s.dimensionIndexes.join(",")}
`),this.resultStage=r.addStage(i),this.resultStage=this.generatePipelinedStages(s.outputPipelinedSQL,this.resultStage,r),this.resultStage}genereateSQLCombineTurtles(e,r){let n=`SELECT
`,i=[],s=1,o=[],a=[];for(let[l,c]of this.rootResult.allFields){let f=this.parent.dialect.sqlMaybeQuoteIdentifier(l);c instanceof ts?c.fieldUsage.type==="result"&&(es(c.f)?(i.push(this.parent.dialect.sqlMaybeQuoteIdentifier(`${l}__${this.rootResult.groupSet}`)+` as ${f}`),a.push(s++)):VN(c.f)&&(i.push(this.parent.dialect.sqlAnyValueLastTurtle(this.parent.dialect.sqlMaybeQuoteIdentifier(`${l}__${this.rootResult.groupSet}`),this.rootResult.groupSet,f)),s++)):c instanceof J0&&(c.firstSegment.type==="reduce"?(i.push(`${this.generateTurtleSQL(c,e,f,o)} as ${f}`),s++):c.firstSegment.type==="project"&&(i.push(this.parent.dialect.sqlAnyValueLastTurtle(this.parent.dialect.sqlMaybeQuoteIdentifier(`${l}__${this.rootResult.groupSet}`),this.rootResult.groupSet,f)),s++))}n+=(0,Zi.indent)(i.join(`,
`))+`
FROM ${r}
`;let u=this.rootResult.eliminateComputeGroupsSQL();return u.length>0&&(n+=`WHERE ${u}
`),a.length>0&&(n+=`GROUP BY ${a.join(",")}
`),n+=this.genereateSQLOrderBy(this.firstSegment,this.rootResult),!(0,qe.isRawSegment)(this.firstSegment)&&this.firstSegment.limit&&(n+=`LIMIT ${this.firstSegment.limit}
`),this.resultStage=e.addStage(n),this.resultStage=this.generatePipelinedStages(o,this.resultStage,e),this.resultStage}generateTurtleSQL(e,r,n,i){let s=[],o="",a=(0,qe.isRawSegment)(e.firstSegment)?void 0:e.firstSegment.limit,u=[],l,c=e.firstSegment.orderBy||e.calculateDefaultOrderBy();for(let m of c)typeof m.field=="string"?l={name:m.field,fif:e.getField(m.field)}:l=e.getFieldByNumber(m.field),e.firstSegment.type==="reduce"?u.push(" "+this.parent.dialect.sqlMaybeQuoteIdentifier(`${l.name}__${e.groupSet}`)+` ${m.dir||"ASC"}`):e.firstSegment.type==="project"&&u.push(` ${l.fif.f.generateExpression(e)} ${m.dir||"ASC"}`);u.length>0&&(o=" "+this.parent.dialect.sqlOrderBy(u));for(let[m,g]of e.allFields){let y=this.parent.dialect.sqlMaybeQuoteIdentifier(m);e.firstSegment.type==="reduce"&&(g instanceof J0||g instanceof ts&&g.fieldUsage.type==="result")?s.push({type:g instanceof ts?g.f.fieldDef.type:"struct",sqlExpression:this.parent.dialect.sqlMaybeQuoteIdentifier(`${m}__${e.groupSet}`),sqlOutputName:y}):e.firstSegment.type==="project"&&g instanceof ts&&g.fieldUsage.type==="result"&&s.push({type:g.type,sqlExpression:g.f.generateExpression(e),sqlOutputName:y})}let f,x;(f=e.getRepeatedResultType())!=="nested"?f==="inline_all_numbers"?x=this.parent.dialect.sqlCoaleseMeasuresInline(e.groupSet,s):x=this.parent.dialect.sqlAnyValueTurtle(e.groupSet,s):x=this.parent.dialect.sqlAggregateTurtle(e.groupSet,s,o,a);let d=new L1(this.parent.dialect.supportsCTEinCoorelatedSubQueries,r),{structDef:h,pipeOut:p}=this.generateTurtlePipelineSQL(e,d,this.parent.dialect.supportUnnestArrayAgg?x:n);if(p!==void 0){let m=d.generateCoorelatedSubQuery(this.parent.dialect,h);this.parent.dialect.supportUnnestArrayAgg?x=`(${m})`:i.push({sqlFieldName:n,pipelineSQL:`(${m})`})}return x}generateTurtlePipelineSQL(e,r,n){let i=this.getResultStructDef(e,!1),s=e.getRepeatedResultType(),o=e.turtleDef.pipeline.length>1,a;if(o){let u=[...e.turtleDef.pipeline];u.shift();let l={type:"turtle",name:"starthere",pipeline:u};i.name=this.parent.dialect.sqlUnnestPipelineHead(s==="inline_all_numbers",n),i.structSource={type:"sql",method:"nested"};let c=new La(i,{model:this.parent.getModel()});a=t.makeQuery(l,c,r,this.isJoinedSubquery).generateSQLFromPipeline(r),i=a.outputStruct}return i.annotation=e.turtleDef.annotation,{structDef:i,pipeOut:a}}generateComplexSQL(e){let r=this.generateSQLStage0(e);if(this.maxDepth>1){let n=this.maxDepth;for(;n>1;)r=this.generateSQLDepthN(n,e,r),n--}return this.genereateSQLCombineTurtles(e,r)}generateSQL(e){var r;let n=this.rootResult.computeGroups(0,0);return this.maxDepth=n.maxDepth,this.maxGroupSet=n.nextGroupSetNumber-1,this.rootResult.assignFieldsToGroups(),(r=this.rootResult).isComplexQuery||(r.isComplexQuery=this.maxDepth>0||n.isComplex),this.rootResult.isComplexQuery?this.generateComplexSQL(e):this.generateSimpleSQL(e)}toMalloy(){let e=`EXPLORE ${(0,qe.getIdentifier)(this.parent.fieldDef)} | `;return e+=this.fieldDef.type.toUpperCase()+" ",e}generateSQLFromPipeline(e){this.prepare(e);let r=this.generateSQL(e),n=this.getResultStructDef();if(this.fieldDef.pipeline.length>1){let i=[...this.fieldDef.pipeline],s={...n,structSource:{type:"sql",method:"lastStage"}};i.shift();for(let o of i){let a=new La(s,{model:this.parent.getModel()}),u=t.makeQuery({type:"turtle",name:"ignoreme",pipeline:[o]},a,e,this.isJoinedSubquery);u.prepare(e),r=u.generateSQL(e),n=u.getResultStructDef(),s={...n,structSource:{type:"sql",method:"lastStage"}}}}return{lastStageName:r,outputStruct:n}}},Zz=class extends Z0{},eG=class extends Z0{},tG=class extends Z0{constructor(e,r,n,i){super(e,r,n,i),this.fieldDef=e}expandField(e){let r=this.parent.getFieldByName(e);return{as:e,field:r}}expandFields(e){let r=1,n=e.groupSet;this.maxGroupSet=n;let i=this.firstSegment.fields||[];for(let o of i){let{as:a,field:u}=this.expandField(o);e.addField(a,u,{resultIndex:r,type:"result"}),u instanceof In&&this.addDependancies(e,u),r++}let s=this.firstSegment.weightMeasure;if(s!==void 0){let o=this.parent.getFieldByName(s);e.addField(s,o,{resultIndex:r,type:"result"}),this.addDependancies(e,o)}this.expandFilters(e)}generateSQL(e){let r="COUNT(*)",n=this.parent.dialect,i=n.sqlMaybeQuoteIdentifier("fieldName"),s=n.sqlMaybeQuoteIdentifier("fieldValue"),o=n.sqlMaybeQuoteIdentifier("fieldType"),a=n.sqlMaybeQuoteIdentifier("fieldRange"),u=this.firstSegment.weightMeasure;u&&(r=this.rootResult.getField(u).f.generateExpression(this.rootResult));let l=[];for(let[x,d]of this.rootResult.allFields){let h=d;if(h.fieldUsage.type==="result"&&es(h.f)){let p=h.f.generateExpression(this.rootResult);l.push({name:x,type:h.f.fieldDef.type,expression:p})}}let c=`SELECT
  group_set,
`;c+=`  CASE group_set
`;for(let x=0;x<l.length;x++)c+=`    WHEN ${x} THEN '${l[x].name}'
`;c+=`  END as ${i},`,c+=`  CASE group_set
`;for(let x=0;x<l.length;x++)c+=`    WHEN ${x} THEN '${l[x].type}'
`;c+=`  END as ${o},`,c+=`  CASE group_set WHEN 99999 THEN NULL
`;for(let x=0;x<l.length;x++)l[x].type==="string"&&(c+=`    WHEN ${x} THEN ${l[x].expression}
`);c+=`  END as ${s},
`,c+=` ${r} as weight,
`,c+=`  CASE group_set
    WHEN 99999 THEN ''`;for(let x=0;x<l.length;x++)l[x].type==="number"&&(c+=`    WHEN ${x} THEN ${n.concat(`MIN(${n.castToString(l[x].expression)})`,"' to '",n.castToString(`MAX(${l[x].expression})`))}
`),(l[x].type==="timestamp"||l[x].type==="date")&&(c+=`    WHEN ${x} THEN ${n.concat(`MIN(${n.sqlDateToString(l[x].expression)})`,"' to '",`MAX(${n.sqlDateToString(l[x].expression)})`)}
`);c+=`  END as ${a}
`,c+=this.generateSQLJoins(e),c+=n.sqlGroupSetTable(l.length)+`
`,c+=this.generateSQLFilters(this.rootResult,"where").sql("where"),c+=`GROUP BY 1,2,3,4
`,!(0,qe.isRawSegment)(this.firstSegment)&&this.firstSegment.limit&&(c+=`LIMIT ${this.firstSegment.limit}
`);let f=e.addStage(c);return this.resultStage=e.addStage(`SELECT
  ${i},
  ${o},
  COALESCE(${s}, ${a}) as ${s},
  weight
FROM ${f}
`),this.resultStage}},rG=class extends Z0{generateSQL(e){let r=this.parent.fieldDef.structSource;if(r.type!=="sql"||r.method!=="subquery")throw new Error("Invalid struct for QueryQueryRaw, currently only supports SQL");let n=r.sqlBlock.selectStr;return e.addStage(n)}prepare(){}getResultStructDef(){return this.parent.fieldDef}getResultMetadata(e){}},nG=class extends Z0{constructor(e,r,n,i){super(e,r,n,i),this.rootFields=[],this.fanPrefixMap={},this.fieldDef=e,this.findFanPrefexes(r)}findFanPrefexes(e){for(let[r,n]of e.nameMap)if(n instanceof La&&(n.fieldDef.structRelationship.type==="many"||n.fieldDef.structRelationship.type==="nested")&&n.fieldDef.fields.length>1&&this.parent.dialect.dontUnionIndex===!1){let i=n.getFullOutputName();this.fanPrefixMap[i]=[],this.findFanPrefexes(n)}}expandIndexWildCards(){let e=this.firstSegment.fields||[];return e.length===0&&e.push("**"),e=this.expandWildCards(e,r=>["string","number","timestamp","date"].indexOf(r.fieldDef.type)!==-1),e}getStageFields(){let e=[];this.rootFields.length>0&&e.push(this.rootFields);for(let r of Object.values(this.fanPrefixMap))r.length>0&&e.push(r);return e}mapFieldsIntoStages(e){let r=Object.keys(this.fanPrefixMap).sort((n,i)=>n.length<i.length?1:n.length>i.length?-1:0);for(let n of e){let i=!1;for(let s of r)n.startsWith(s)&&(this.fanPrefixMap[s].push(n),i=!0);i||this.rootFields.push(n)}}expandFields(e){let r=this.expandIndexWildCards();this.mapFieldsIntoStages(r)}generateSQL(e){let r=this.getStageFields(),n=[];for(let i of r){let s=new tG({...this.fieldDef,pipeline:[{...this.fieldDef.pipeline[0],fields:i}]},this.parent,e,this.isJoinedSubquery);s.prepare(e);let o=s.generateSQL(e);n.push(o)}return n.length===1?this.resultStage=n[0]:this.resultStage=e.addStage(n.map(i=>`SELECT * FROM ${i}
`).join(` UNION ALL 
`)),this.resultStage}getResultStructDef(){let e={type:"struct",name:this.resultStage||"result",dialect:this.parent.fieldDef.dialect,fields:[{type:"string",name:"fieldName"},{type:"string",name:"fieldValue"},{type:"string",name:"fieldType"},{type:"number",name:"weight",numberType:"integer"}],structRelationship:{type:"basetable",connectionName:this.parent.connectionName},structSource:{type:"query_result"}};return this.parent.fieldDef.modelAnnotation&&(e.modelAnnotation=this.parent.fieldDef.modelAnnotation),e}},La=class t extends WN{constructor(e,r){if(super(e),this.nameMap=new Map,this.setParent(r),"model"in r)if(this.model=r.model,this.pathAliasMap=new Map,e.structRelationship.type==="basetable")this.connectionName=e.structRelationship.connectionName;else throw new Error("All root StructDefs should be a baseTable");else this.model=this.getModel(),this.pathAliasMap=this.root().pathAliasMap,this.connectionName=this.root().connectionName;this.fieldDef=e,this.dialect=(0,hUe.getDialect)(this.fieldDef.dialect),this.addFieldsFromFieldList(this.fieldDef.fields)}parameters(){return this.fieldDef.parameters||{}}addFieldsFromFieldList(e){for(let r of e){let n=(0,qe.getIdentifier)(r);switch(r.type){case"struct":{this.addFieldToNameMap(n,new t(r,{struct:this}));break}case"turtle":{this.addFieldToNameMap(n,Z0.makeQuery(r,this,void 0,!1));break}default:this.addFieldToNameMap(n,this.makeQueryField(r))}}this.nameMap.has("__distinct_key")||this.addFieldToNameMap("__distinct_key",new Yz({type:"string",name:"__distinct_key"},this))}getAliasIdentifier(){let e=this.getFullOutputName(),r=this.pathAliasMap.get(e);if(r===void 0){let n=Array.from(this.pathAliasMap.values()),i=exe((0,qe.getIdentifier)(this.fieldDef)),s=`${i}_0`,o=1;for(;n.includes(s)&&o<1e3;)o++,s=`${i}_${o}`;if(o<1e3)return this.pathAliasMap.set(e,s),s;throw new Error("Internal Error: cannot create unique alias name")}else return r}getAsQueryField(){if(this.fieldDef.primaryKey===void 0)throw new Error(`Joined explores can only be included in queries if a primary key is defined: '${this.getFullOutputName()}' has no primary key`);let e=this.getPrimaryKeyField(this.fieldDef),r=e.fieldDef.type;if(r!=="string"&&r!=="number")throw new Error(`Unknown Primary key data type for ${e.fieldDef.name}`);let n=(0,qe.getIdentifier)(this.fieldDef),i=this.fieldDef.primaryKey,s={type:r,name:`${n}_id`,e:[{type:"field",path:e.getIdentifier()}]};return new X_(s,this,`${n}.${i}`)}getSQLIdentifier(){return this.unnestWithNumbers()&&this.parent!==void 0?this.parent.getSQLIdentifier()+"."+(0,qe.getIdentifier)(this.fieldDef)+`[${this.getIdentifier()}.__row_id]`:this.getIdentifier()}getIdentifier(){return this.fieldDef.structRelationship.type==="basetable"?this.fieldDef.as===void 0?"base":exe(super.getIdentifier()):this.fieldDef.structRelationship.type==="inline"&&this.parent?this.parent.getSQLIdentifier()+"."+super.getIdentifier():this.getAliasIdentifier()}getFullOutputName(){return this.parent?this.parent.getFullOutputName()+(0,qe.getIdentifier)(this.fieldDef)+".":""}needsSymetricCalculation(e){let r=this.getJoinableParent().getIdentifier(),n=e.root().joins.get(r);if(n)return!n.leafiest;throw new Error(`Join ${r} not found in result set`)}unnestWithNumbers(){return this.dialect.unnestWithNumbers&&this.fieldDef.structRelationship.type==="nested"}getJoinableParent(){if(this.fieldDef.structRelationship.type==="inline"){if(this.parent)return this.parent.getJoinableParent();throw new Error("Internal Error: inline struct cannot be root")}return this}addFieldToNameMap(e,r){if(this.nameMap.has(e))throw new Error(`Redefinition of ${e}`);this.nameMap.set(e,r)}getPrimaryKeyField(e){let r;if(r=this.primaryKey())return r;throw new Error(`Missing primary key for ${e}`)}resolveQueryFields(){if(this.fieldDef.structSource.type==="query"){let e=this.model.loadQuery(this.fieldDef.structSource.query,void 0).structs.pop();if(!e)throw new Error("Internal Error, query didn't produce a struct");let r={...this.fieldDef};for(let n of e.fields){let i;this.nameMap.has(i=(0,qe.getIdentifier)(n))||(r.fields.push(n),this.nameMap.set(i,this.makeQueryField(n)))}this.fieldDef=r,!this.fieldDef.primaryKey&&e.primaryKey&&(this.fieldDef.primaryKey=e.primaryKey)}for(let[,e]of this.nameMap)e instanceof t&&e.resolveQueryFields()}getModel(){if(this.model)return this.model;if(this.parent===void 0)throw new Error("Expected this query struct to have a parent, as no model was present.");return this.parent.getModel()}setParent(e){"struct"in e&&(this.parent=e.struct),"model"in e?this.model=e.model:this.model=this.getModel()}makeQueryField(e){switch(e.type){case"string":return new Gz(e,this);case"date":return new YN(e,this);case"timestamp":return new KN(e,this);case"number":return new Qz(e,this);case"boolean":return new K_(e,this);case"json":return new Vz(e,this);case"unsupported":return new Wz(e,this);case"turtle":return new XN(e,this);default:throw new Error(`unknown field definition ${JSON.stringify(e)}`)}}getOrMakeField(e){return typeof e=="string"?this.getFieldByName(e):this.makeQueryField(e)}getOrMakeDimension(e){let r=this.getOrMakeField(e);if(r instanceof In&&es(r))return r;throw new Error(`${e} is not of type a scalar'`)}structSourceSQL(e){switch(this.fieldDef.structSource.type){case"table":{let r=this.fieldDef.structSource.tablePath;return this.dialect.quoteTablePath(r)}case"sql":if(this.fieldDef.structSource.method==="nested"||this.fieldDef.structSource.method==="lastStage")return this.fieldDef.name;if(this.fieldDef.structSource.method==="subquery")return`(${this.fieldDef.structSource.sqlBlock.selectStr})`;throw new Error("Internal Error: Unknown structSource type 'sql' method");case"nested":return"UNNEST(this.fieldDef.name)";case"inline":return"";case"query":{let r=(0,qe.getIdentifier)(this.fieldDef);if(r.includes("cache")){let n=new L1(!0,e);return this.model.loadQuery(this.fieldDef.structSource.query,n,!1,!1),n.addPDT(r,this.dialect)}else return this.model.loadQuery(this.fieldDef.structSource.query,e,!1,!0).lastStageName}default:throw new Error(`unknown structSource ${this.fieldDef}`)}}root(){return this.parent===void 0?this:this.parent.root()}primaryKey(){if(this.fieldDef.primaryKey)return this.getDimensionByName(this.fieldDef.primaryKey)}static resolvePath(e){return e.split(".")}getChildByName(e){return this.nameMap.get(e)}getFieldByName(e){let r=t.resolvePath(e),n=this;for(let i of r){let s=n.getChildByName(i);if(s===void 0)throw new Error(`Path not found ${e}`);n=s}return n}getQueryFieldByName(e){let r=this.getFieldByName(e);return r instanceof t&&(r=r.getAsQueryField()),r}getDimensionOrMeasureByName(e){let r=this.getFieldByName(e);if(r instanceof In)return r;throw new Error(`${e} is not of type a scalar'`)}getDimensionByName(e){let r=this.getFieldByName(e);if(r instanceof In&&es(r))return r;throw new Error(`${e} is not of type a scalar'`)}getStructByName(e){let r=this.getFieldByName(e);if(r instanceof t)return r;throw new Error(`Error: Path to structure not found '${e}'`)}getDistinctKey(){if(this.fieldDef.structRelationship.type!=="inline")return this.getDimensionByName("__distinct_key");if(this.parent)return this.parent.getDistinctKey();throw new Error("Internal Error.  inline struct can not be top level")}applyStructFiltersToTurtleDef(e){let r=e.pipeline,n=e.annotation,i=e.filterList||[];return r=structuredClone(r),r[0].filterList=i.concat(r[0].filterList||[],this.fieldDef.filterList||[]),{type:"turtle",name:e.name,pipeline:r,annotation:n,location:e.location}}},JN=class{constructor(e){this.dialect=new pUe.StandardSQLDialect,this.modelDef=void 0,this.structs=new Map,this.exploreSearchSQLMap=new Map,e&&this.loadModelFromDef(e)}loadModelFromDef(e){this.modelDef=e;for(let r of Object.values(this.modelDef.contents)){let n;if(r.type==="struct")n=new La(r,{model:this}),this.structs.set((0,qe.getIdentifier)(r),n),n.resolveQueryFields();else if(r.type!=="query")throw new Error("Internal Error: Unknown structure type")}}parseQueryPath(e){let r=e.split("."),n;if(n=this.structs.get(r[0])){if(r.length>1)r.shift();else throw new Error(`No query specified in Struct '${r[0]}'`);return{queryName:r.join("."),struct:n}}else throw new Error(`Cannot find Struct '${r[0]}' Model`)}getStructByName(e){let r;if(r=this.structs.get(e))return r;throw new Error(`Struct ${e} not found in model.`)}getStructFromRef(e){let r;if(typeof e=="string")return this.getStructByName(e);if(e.type==="struct")r=e;else throw new Error("Broken for now");return new La(r,{model:this})}loadQuery(e,r,n=!1,i=!1){let s="";r||(r=new L1(!0,void 0));let o={type:"turtle",name:"ignoreme",pipeline:e.pipeline,filterList:e.filterList},a=Z0.makeQuery(o,this.getStructFromRef(e.structRef),r,i),u=a.generateSQLFromPipeline(r);if(n&&a.parent.dialect.hasFinalStage){let l=(0,qe.getPhysicalFields)(u.outputStruct).map(c=>a.parent.dialect.sqlMaybeQuoteIdentifier(c.name));u.lastStageName=r.addStage(a.parent.dialect.sqlFinalStage(u.lastStageName,l))}return{lastStageName:u.lastStageName,malloy:s,stageWriter:r,structs:[u.outputStruct],connectionName:a.parent.connectionName}}compileQuery(e,r=!0){let s=(void 0||this).loadQuery(e,void 0,r,!1),o=typeof e.structRef=="string"?e.structRef:e.structRef.type==="struct"?e.structRef.as||e.structRef.name:"(need to figure this out)";return r&&this.dialect.hasFinalStage&&(s.lastStageName=s.stageWriter.addStage(this.dialect.sqlFinalStage(s.lastStageName,[]))),{lastStageName:s.lastStageName,malloy:s.malloy,sql:s.stageWriter.generateSQLStages(),structs:s.structs,sourceExplore:o,sourceFilters:e.filterList,queryName:e.name,connectionName:s.connectionName,annotation:e.annotation}}async searchIndex(e,r,n,i=1e3,s=void 0){if(!e.canPersist())return;let o=this.getStructByName(r),a={structRef:r,pipeline:[{type:"index",fields:["*"],sample:o.dialect.defaultSampling}]},u=o.dialect.sqlMaybeQuoteIdentifier("fieldName"),l=o.dialect.sqlMaybeQuoteIdentifier("fieldValue"),c=o.dialect.sqlMaybeQuoteIdentifier("fieldType"),f=this.exploreSearchSQLMap.get(r);f===void 0&&(f=this.compileQuery(a,!1).sql,this.exploreSearchSQLMap.set(r,f));let x=`SELECT
              ${u},
              ${l},
              ${c},
              weight,
              CASE WHEN lower(${l}) LIKE  lower(${Hz(n+"%")}) THEN 1 ELSE 0 END as match_first
            FROM  ${await e.manifestTemporaryTable(f)}
            WHERE lower(${l}) LIKE lower(${Hz("%"+n+"%")}) ${s!==void 0?` AND ${u} = '`+s+`' 
`:""}
            ORDER BY CASE WHEN lower(${l}) LIKE  lower(${Hz(n+"%")}) THEN 1 ELSE 0 END DESC, weight DESC
            LIMIT ${i}
          `;return o.dialect.hasFinalStage&&(x=`WITH __stage0 AS(
${x}
)
${o.dialect.sqlFinalStage("__stage0",[u,l,c,"weight","match_first"])}`),(await e.runSQL(x,{rowLimit:1e3})).rows}};ay.QueryModel=JN});var Wf=v(Ia=>{"use strict";var mUe=Ia&&Ia.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gUe=Ia&&Ia.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&mUe(e,t,r)};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.indent=Ia.QueryModel=Ia.Segment=void 0;gUe(Xe(),Ia);var ixe=iG();Object.defineProperty(Ia,"Segment",{enumerable:!0,get:function(){return ixe.Segment}});Object.defineProperty(Ia,"QueryModel",{enumerable:!0,get:function(){return ixe.QueryModel}});var yUe=Fd();Object.defineProperty(Ia,"indent",{enumerable:!0,get:function(){return yUe.indent}})});var oxe=v(sxe=>{"use strict";Object.defineProperty(sxe,"__esModule",{value:!0})});var uxe=v(axe=>{"use strict";Object.defineProperty(axe,"__esModule",{value:!0})});var sG=v((Mwt,lxe)=>{"use strict";lxe.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0}});var ZN=v((Pwt,cxe)=>{"use strict";var EUe=sG();cxe.exports=function(){return EUe()&&!!Symbol.toStringTag}});var dxe=v((kwt,xxe)=>{"use strict";var fxe=typeof Symbol<"u"&&Symbol,AUe=sG();xxe.exports=function(){return typeof fxe!="function"||typeof Symbol!="function"||typeof fxe("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:AUe()}});var mxe=v((Bwt,pxe)=>{"use strict";var hxe={foo:{}},SUe=Object;pxe.exports=function(){return{__proto__:hxe}.foo===hxe.foo&&!({__proto__:null}instanceof SUe)}});var yxe=v((qwt,gxe)=>{"use strict";var vUe="Function.prototype.bind called on incompatible ",oG=Array.prototype.slice,_Ue=Object.prototype.toString,bUe="[object Function]";gxe.exports=function(e){var r=this;if(typeof r!="function"||_Ue.call(r)!==bUe)throw new TypeError(vUe+r);for(var n=oG.call(arguments,1),i,s=function(){if(this instanceof i){var c=r.apply(this,n.concat(oG.call(arguments)));return Object(c)===c?c:this}else return r.apply(e,n.concat(oG.call(arguments)))},o=Math.max(0,r.length-n.length),a=[],u=0;u<o;u++)a.push("$"+u);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i}});var eF=v((Uwt,Exe)=>{"use strict";var TUe=yxe();Exe.exports=Function.prototype.bind||TUe});var Sxe=v(($wt,Axe)=>{"use strict";var CUe=eF();Axe.exports=CUe.call(Function.call,Object.prototype.hasOwnProperty)});var xy=v((jwt,Cxe)=>{"use strict";var Ft,fy=SyntaxError,Txe=Function,cy=TypeError,aG=function(t){try{return Txe('"use strict"; return ('+t+").constructor;")()}catch{}},I1=Object.getOwnPropertyDescriptor;if(I1)try{I1({},"")}catch{I1=null}var uG=function(){throw new cy},RUe=I1?function(){try{return arguments.callee,uG}catch{try{return I1(arguments,"callee").get}catch{return uG}}}():uG,uy=dxe()(),OUe=mxe()(),yi=Object.getPrototypeOf||(OUe?function(t){return t.__proto__}:null),ly={},DUe=typeof Uint8Array>"u"||!yi?Ft:yi(Uint8Array),M1={"%AggregateError%":typeof AggregateError>"u"?Ft:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ft:ArrayBuffer,"%ArrayIteratorPrototype%":uy&&yi?yi([][Symbol.iterator]()):Ft,"%AsyncFromSyncIteratorPrototype%":Ft,"%AsyncFunction%":ly,"%AsyncGenerator%":ly,"%AsyncGeneratorFunction%":ly,"%AsyncIteratorPrototype%":ly,"%Atomics%":typeof Atomics>"u"?Ft:Atomics,"%BigInt%":typeof BigInt>"u"?Ft:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ft:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ft:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ft:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ft:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ft:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ft:FinalizationRegistry,"%Function%":Txe,"%GeneratorFunction%":ly,"%Int8Array%":typeof Int8Array>"u"?Ft:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ft:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ft:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":uy&&yi?yi(yi([][Symbol.iterator]())):Ft,"%JSON%":typeof JSON=="object"?JSON:Ft,"%Map%":typeof Map>"u"?Ft:Map,"%MapIteratorPrototype%":typeof Map>"u"||!uy||!yi?Ft:yi(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ft:Promise,"%Proxy%":typeof Proxy>"u"?Ft:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ft:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ft:Set,"%SetIteratorPrototype%":typeof Set>"u"||!uy||!yi?Ft:yi(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ft:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":uy&&yi?yi(""[Symbol.iterator]()):Ft,"%Symbol%":uy?Symbol:Ft,"%SyntaxError%":fy,"%ThrowTypeError%":RUe,"%TypedArray%":DUe,"%TypeError%":cy,"%Uint8Array%":typeof Uint8Array>"u"?Ft:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ft:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ft:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ft:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ft:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ft:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ft:WeakSet};if(yi)try{null.error}catch(t){vxe=yi(yi(t)),M1["%Error.prototype%"]=vxe}var vxe,NUe=function t(e){var r;if(e==="%AsyncFunction%")r=aG("async function () {}");else if(e==="%GeneratorFunction%")r=aG("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=aG("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&yi&&(r=yi(i.prototype))}return M1[e]=r,r},_xe={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},J_=eF(),tF=Sxe(),FUe=J_.call(Function.call,Array.prototype.concat),wUe=J_.call(Function.apply,Array.prototype.splice),bxe=J_.call(Function.call,String.prototype.replace),rF=J_.call(Function.call,String.prototype.slice),LUe=J_.call(Function.call,RegExp.prototype.exec),IUe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,MUe=/\\(\\)?/g,PUe=function(e){var r=rF(e,0,1),n=rF(e,-1);if(r==="%"&&n!=="%")throw new fy("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new fy("invalid intrinsic syntax, expected opening `%`");var i=[];return bxe(e,IUe,function(s,o,a,u){i[i.length]=a?bxe(u,MUe,"$1"):o||s}),i},kUe=function(e,r){var n=e,i;if(tF(_xe,n)&&(i=_xe[n],n="%"+i[0]+"%"),tF(M1,n)){var s=M1[n];if(s===ly&&(s=NUe(n)),typeof s>"u"&&!r)throw new cy("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new fy("intrinsic "+e+" does not exist!")};Cxe.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new cy("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new cy('"allowMissing" argument must be a boolean');if(LUe(/^%?[^%]*%?$/,e)===null)throw new fy("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=PUe(e),i=n.length>0?n[0]:"",s=kUe("%"+i+"%",r),o=s.name,a=s.value,u=!1,l=s.alias;l&&(i=l[0],wUe(n,FUe([0,1],l)));for(var c=1,f=!0;c<n.length;c+=1){var x=n[c],d=rF(x,0,1),h=rF(x,-1);if((d==='"'||d==="'"||d==="`"||h==='"'||h==="'"||h==="`")&&d!==h)throw new fy("property names with quotes must have matching quotes");if((x==="constructor"||!f)&&(u=!0),i+="."+x,o="%"+i+"%",tF(M1,o))a=M1[o];else if(a!=null){if(!(x in a)){if(!r)throw new cy("base intrinsic for "+e+" exists, but the property is not available.");return}if(I1&&c+1>=n.length){var p=I1(a,x);f=!!p,f&&"get"in p&&!("originalValue"in p.get)?a=p.get:a=a[x]}else f=tF(a,x),a=a[x];f&&!u&&(M1[o]=a)}}return a}});var Z_=v((Hwt,nF)=>{"use strict";var lG=eF(),dy=xy(),Dxe=dy("%Function.prototype.apply%"),Nxe=dy("%Function.prototype.call%"),Fxe=dy("%Reflect.apply%",!0)||lG.call(Nxe,Dxe),Rxe=dy("%Object.getOwnPropertyDescriptor%",!0),P1=dy("%Object.defineProperty%",!0),BUe=dy("%Math.max%");if(P1)try{P1({},"a",{value:1})}catch{P1=null}nF.exports=function(e){var r=Fxe(lG,Nxe,arguments);if(Rxe&&P1){var n=Rxe(r,"length");n.configurable&&P1(r,"length",{value:1+BUe(0,e.length-(arguments.length-1))})}return r};var Oxe=function(){return Fxe(lG,Dxe,arguments)};P1?P1(nF.exports,"apply",{value:Oxe}):nF.exports.apply=Oxe});var cG=v((zwt,Ixe)=>{"use strict";var wxe=xy(),Lxe=Z_(),qUe=Lxe(wxe("String.prototype.indexOf"));Ixe.exports=function(e,r){var n=wxe(e,!!r);return typeof n=="function"&&qUe(e,".prototype.")>-1?Lxe(n):n}});var kxe=v((Gwt,Pxe)=>{"use strict";var UUe=ZN()(),$Ue=cG(),fG=$Ue("Object.prototype.toString"),iF=function(e){return UUe&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:fG(e)==="[object Arguments]"},Mxe=function(e){return iF(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&fG(e)!=="[object Array]"&&fG(e.callee)==="[object Function]"},jUe=function(){return iF(arguments)}();iF.isLegacyArguments=Mxe;Pxe.exports=jUe?iF:Mxe});var Uxe=v((Qwt,qxe)=>{"use strict";var HUe=Object.prototype.toString,zUe=Function.prototype.toString,GUe=/^\s*(?:function)?\*/,Bxe=ZN()(),xG=Object.getPrototypeOf,QUe=function(){if(!Bxe)return!1;try{return Function("return function*() {}")()}catch{}},dG;qxe.exports=function(e){if(typeof e!="function")return!1;if(GUe.test(zUe.call(e)))return!0;if(!Bxe){var r=HUe.call(e);return r==="[object GeneratorFunction]"}if(!xG)return!1;if(typeof dG>"u"){var n=QUe();dG=n?xG(n):!1}return xG(e)===dG}});var zxe=v((Vwt,Hxe)=>{"use strict";var jxe=Function.prototype.toString,hy=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,hG,sF;if(typeof hy=="function"&&typeof Object.defineProperty=="function")try{hG=Object.defineProperty({},"length",{get:function(){throw sF}}),sF={},hy(function(){throw 42},null,hG)}catch(t){t!==sF&&(hy=null)}else hy=null;var VUe=/^\s*class\b/,pG=function(e){try{var r=jxe.call(e);return VUe.test(r)}catch{return!1}},WUe=function(e){try{return pG(e)?!1:(jxe.call(e),!0)}catch{return!1}},YUe=Object.prototype.toString,KUe="[object Function]",XUe="[object GeneratorFunction]",JUe=typeof Symbol=="function"&&!!Symbol.toStringTag,$xe=typeof document=="object"&&typeof document.all>"u"&&document.all!==void 0?document.all:{};Hxe.exports=hy?function(e){if(e===$xe)return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(typeof e=="function"&&!e.prototype)return!0;try{hy(e,null,hG)}catch(r){if(r!==sF)return!1}return!pG(e)}:function(e){if(e===$xe)return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(typeof e=="function"&&!e.prototype)return!0;if(JUe)return WUe(e);if(pG(e))return!1;var r=YUe.call(e);return r===KUe||r===XUe}});var Vxe=v((Wwt,Qxe)=>{"use strict";var ZUe=zxe(),e$e=Object.prototype.toString,Gxe=Object.prototype.hasOwnProperty,t$e=function(e,r,n){for(var i=0,s=e.length;i<s;i++)Gxe.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},r$e=function(e,r,n){for(var i=0,s=e.length;i<s;i++)n==null?r(e.charAt(i),i,e):r.call(n,e.charAt(i),i,e)},n$e=function(e,r,n){for(var i in e)Gxe.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},i$e=function(e,r,n){if(!ZUe(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),e$e.call(e)==="[object Array]"?t$e(e,r,i):typeof e=="string"?r$e(e,r,i):n$e(e,r,i)};Qxe.exports=i$e});var Yxe=v((Ywt,Wxe)=>{"use strict";var mG=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],s$e=typeof globalThis>"u"?global:globalThis;Wxe.exports=function(){for(var e=[],r=0;r<mG.length;r++)typeof s$e[mG[r]]=="function"&&(e[e.length]=mG[r]);return e}});var gG=v((Kwt,Kxe)=>{"use strict";var o$e=xy(),oF=o$e("%Object.getOwnPropertyDescriptor%",!0);if(oF)try{oF([],"length")}catch{oF=null}Kxe.exports=oF});var vG=v((Xwt,ede)=>{"use strict";var uF=Vxe(),a$e=Yxe(),Xxe=Z_(),AG=cG(),aF=gG(),u$e=AG("Object.prototype.toString"),Zxe=ZN()(),Jxe=typeof globalThis>"u"?global:globalThis,EG=a$e(),SG=AG("String.prototype.slice"),yG=Object.getPrototypeOf,l$e=AG("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},lF={__proto__:null};Zxe&&aF&&yG?uF(EG,function(t){var e=new Jxe[t];if(Symbol.toStringTag in e){var r=yG(e),n=aF(r,Symbol.toStringTag);if(!n){var i=yG(r);n=aF(i,Symbol.toStringTag)}lF["$"+t]=Xxe(n.get)}}):uF(EG,function(t){var e=new Jxe[t];lF["$"+t]=Xxe(e.slice)});var c$e=function(e){var r=!1;return uF(lF,function(n,i){if(!r)try{"$"+n(e)===i&&(r=SG(i,1))}catch{}}),r},f$e=function(e){var r=!1;return uF(lF,function(n,i){if(!r)try{n(e),r=SG(i,1)}catch{}}),r};ede.exports=function(e){if(!e||typeof e!="object")return!1;if(!Zxe){var r=SG(u$e(e),8,-1);return l$e(EG,r)>-1?r:r!=="Object"?!1:f$e(e)}return aF?c$e(e):null}});var rde=v((Jwt,tde)=>{"use strict";var x$e=vG();tde.exports=function(e){return!!x$e(e)}});var mde=v(Rt=>{"use strict";var d$e=kxe(),h$e=Uxe(),Ll=vG(),nde=rde();function py(t){return t.call.bind(t)}var ide=typeof BigInt<"u",sde=typeof Symbol<"u",Ru=py(Object.prototype.toString),p$e=py(Number.prototype.valueOf),m$e=py(String.prototype.valueOf),g$e=py(Boolean.prototype.valueOf);ide&&(ode=py(BigInt.prototype.valueOf));var ode;sde&&(ade=py(Symbol.prototype.valueOf));var ade;function t5(t,e){if(typeof t!="object")return!1;try{return e(t),!0}catch{return!1}}Rt.isArgumentsObject=d$e;Rt.isGeneratorFunction=h$e;Rt.isTypedArray=nde;function y$e(t){return typeof Promise<"u"&&t instanceof Promise||t!==null&&typeof t=="object"&&typeof t.then=="function"&&typeof t.catch=="function"}Rt.isPromise=y$e;function E$e(t){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(t):nde(t)||lde(t)}Rt.isArrayBufferView=E$e;function A$e(t){return Ll(t)==="Uint8Array"}Rt.isUint8Array=A$e;function S$e(t){return Ll(t)==="Uint8ClampedArray"}Rt.isUint8ClampedArray=S$e;function v$e(t){return Ll(t)==="Uint16Array"}Rt.isUint16Array=v$e;function _$e(t){return Ll(t)==="Uint32Array"}Rt.isUint32Array=_$e;function b$e(t){return Ll(t)==="Int8Array"}Rt.isInt8Array=b$e;function T$e(t){return Ll(t)==="Int16Array"}Rt.isInt16Array=T$e;function C$e(t){return Ll(t)==="Int32Array"}Rt.isInt32Array=C$e;function R$e(t){return Ll(t)==="Float32Array"}Rt.isFloat32Array=R$e;function O$e(t){return Ll(t)==="Float64Array"}Rt.isFloat64Array=O$e;function D$e(t){return Ll(t)==="BigInt64Array"}Rt.isBigInt64Array=D$e;function N$e(t){return Ll(t)==="BigUint64Array"}Rt.isBigUint64Array=N$e;function cF(t){return Ru(t)==="[object Map]"}cF.working=typeof Map<"u"&&cF(new Map);function F$e(t){return typeof Map>"u"?!1:cF.working?cF(t):t instanceof Map}Rt.isMap=F$e;function fF(t){return Ru(t)==="[object Set]"}fF.working=typeof Set<"u"&&fF(new Set);function w$e(t){return typeof Set>"u"?!1:fF.working?fF(t):t instanceof Set}Rt.isSet=w$e;function xF(t){return Ru(t)==="[object WeakMap]"}xF.working=typeof WeakMap<"u"&&xF(new WeakMap);function L$e(t){return typeof WeakMap>"u"?!1:xF.working?xF(t):t instanceof WeakMap}Rt.isWeakMap=L$e;function bG(t){return Ru(t)==="[object WeakSet]"}bG.working=typeof WeakSet<"u"&&bG(new WeakSet);function I$e(t){return bG(t)}Rt.isWeakSet=I$e;function dF(t){return Ru(t)==="[object ArrayBuffer]"}dF.working=typeof ArrayBuffer<"u"&&dF(new ArrayBuffer);function ude(t){return typeof ArrayBuffer>"u"?!1:dF.working?dF(t):t instanceof ArrayBuffer}Rt.isArrayBuffer=ude;function hF(t){return Ru(t)==="[object DataView]"}hF.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&hF(new DataView(new ArrayBuffer(1),0,1));function lde(t){return typeof DataView>"u"?!1:hF.working?hF(t):t instanceof DataView}Rt.isDataView=lde;var _G=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function e5(t){return Ru(t)==="[object SharedArrayBuffer]"}function cde(t){return typeof _G>"u"?!1:(typeof e5.working>"u"&&(e5.working=e5(new _G)),e5.working?e5(t):t instanceof _G)}Rt.isSharedArrayBuffer=cde;function M$e(t){return Ru(t)==="[object AsyncFunction]"}Rt.isAsyncFunction=M$e;function P$e(t){return Ru(t)==="[object Map Iterator]"}Rt.isMapIterator=P$e;function k$e(t){return Ru(t)==="[object Set Iterator]"}Rt.isSetIterator=k$e;function B$e(t){return Ru(t)==="[object Generator]"}Rt.isGeneratorObject=B$e;function q$e(t){return Ru(t)==="[object WebAssembly.Module]"}Rt.isWebAssemblyCompiledModule=q$e;function fde(t){return t5(t,p$e)}Rt.isNumberObject=fde;function xde(t){return t5(t,m$e)}Rt.isStringObject=xde;function dde(t){return t5(t,g$e)}Rt.isBooleanObject=dde;function hde(t){return ide&&t5(t,ode)}Rt.isBigIntObject=hde;function pde(t){return sde&&t5(t,ade)}Rt.isSymbolObject=pde;function U$e(t){return fde(t)||xde(t)||dde(t)||hde(t)||pde(t)}Rt.isBoxedPrimitive=U$e;function $$e(t){return typeof Uint8Array<"u"&&(ude(t)||cde(t))}Rt.isAnyArrayBuffer=$$e;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(t){Object.defineProperty(Rt,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})})});var yde=v((e7t,gde)=>{gde.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var Ede=v((t7t,TG)=>{typeof Object.create=="function"?TG.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:TG.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var Pd=v(Ot=>{var Ade=Object.getOwnPropertyDescriptors||function(e){for(var r=Object.keys(e),n={},i=0;i<r.length;i++)n[r[i]]=Object.getOwnPropertyDescriptor(e,r[i]);return n},j$e=/%[sdj%]/g;Ot.format=function(t){if(!SF(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(Md(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,i=n.length,s=String(t).replace(j$e,function(a){if(a==="%%")return"%";if(r>=i)return a;switch(a){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return a}}),o=n[r];r<i;o=n[++r])AF(o)||!my(o)?s+=" "+o:s+=" "+Md(o);return s};Ot.deprecate=function(t,e){if(typeof process<"u"&&process.noDeprecation===!0)return t;if(typeof process>"u")return function(){return Ot.deprecate(t,e).apply(this,arguments)};var r=!1;function n(){if(!r){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}return n};var pF={},Sde=/^$/;process.env.NODE_DEBUG&&(mF=process.env.NODE_DEBUG,mF=mF.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),Sde=new RegExp("^"+mF+"$","i"));var mF;Ot.debuglog=function(t){if(t=t.toUpperCase(),!pF[t])if(Sde.test(t)){var e=process.pid;pF[t]=function(){var r=Ot.format.apply(Ot,arguments);console.error("%s %d: %s",t,e,r)}}else pF[t]=function(){};return pF[t]};function Md(t,e){var r={seen:[],stylize:z$e};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),DG(e)?r.showHidden=e:e&&Ot._extend(r,e),B1(r.showHidden)&&(r.showHidden=!1),B1(r.depth)&&(r.depth=2),B1(r.colors)&&(r.colors=!1),B1(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=H$e),yF(r,t,r.depth)}Ot.inspect=Md;Md.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Md.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function H$e(t,e){var r=Md.styles[e];return r?"\x1B["+Md.colors[r][0]+"m"+t+"\x1B["+Md.colors[r][1]+"m":t}function z$e(t,e){return t}function G$e(t){var e={};return t.forEach(function(r,n){e[r]=!0}),e}function yF(t,e,r){if(t.customInspect&&e&&gF(e.inspect)&&e.inspect!==Ot.inspect&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(r,t);return SF(n)||(n=yF(t,n,r)),n}var i=Q$e(t,e);if(i)return i;var s=Object.keys(e),o=G$e(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),n5(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return CG(e);if(s.length===0){if(gF(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(r5(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(EF(e))return t.stylize(Date.prototype.toString.call(e),"date");if(n5(e))return CG(e)}var u="",l=!1,c=["{","}"];if(vde(e)&&(l=!0,c=["[","]"]),gF(e)){var f=e.name?": "+e.name:"";u=" [Function"+f+"]"}if(r5(e)&&(u=" "+RegExp.prototype.toString.call(e)),EF(e)&&(u=" "+Date.prototype.toUTCString.call(e)),n5(e)&&(u=" "+CG(e)),s.length===0&&(!l||e.length==0))return c[0]+u+c[1];if(r<0)return r5(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var x;return l?x=V$e(t,e,r,o,s):x=s.map(function(d){return OG(t,e,r,o,d,l)}),t.seen.pop(),W$e(x,u,c)}function Q$e(t,e){if(B1(e))return t.stylize("undefined","undefined");if(SF(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(_de(e))return t.stylize(""+e,"number");if(DG(e))return t.stylize(""+e,"boolean");if(AF(e))return t.stylize("null","null")}function CG(t){return"["+Error.prototype.toString.call(t)+"]"}function V$e(t,e,r,n,i){for(var s=[],o=0,a=e.length;o<a;++o)bde(e,String(o))?s.push(OG(t,e,r,n,String(o),!0)):s.push("");return i.forEach(function(u){u.match(/^\d+$/)||s.push(OG(t,e,r,n,u,!0))}),s}function OG(t,e,r,n,i,s){var o,a,u;if(u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},u.get?u.set?a=t.stylize("[Getter/Setter]","special"):a=t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),bde(n,i)||(o="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(AF(r)?a=yF(t,u.value,null):a=yF(t,u.value,r-1),a.indexOf(`
`)>-1&&(s?a=a.split(`
`).map(function(l){return"  "+l}).join(`
`).substr(2):a=`
`+a.split(`
`).map(function(l){return"   "+l}).join(`
`))):a=t.stylize("[Circular]","special")),B1(o)){if(s&&i.match(/^\d+$/))return a;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function W$e(t,e,r){var n=0,i=t.reduce(function(s,o){return n++,o.indexOf(`
`)>=0&&n++,s+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}Ot.types=mde();function vde(t){return Array.isArray(t)}Ot.isArray=vde;function DG(t){return typeof t=="boolean"}Ot.isBoolean=DG;function AF(t){return t===null}Ot.isNull=AF;function Y$e(t){return t==null}Ot.isNullOrUndefined=Y$e;function _de(t){return typeof t=="number"}Ot.isNumber=_de;function SF(t){return typeof t=="string"}Ot.isString=SF;function K$e(t){return typeof t=="symbol"}Ot.isSymbol=K$e;function B1(t){return t===void 0}Ot.isUndefined=B1;function r5(t){return my(t)&&NG(t)==="[object RegExp]"}Ot.isRegExp=r5;Ot.types.isRegExp=r5;function my(t){return typeof t=="object"&&t!==null}Ot.isObject=my;function EF(t){return my(t)&&NG(t)==="[object Date]"}Ot.isDate=EF;Ot.types.isDate=EF;function n5(t){return my(t)&&(NG(t)==="[object Error]"||t instanceof Error)}Ot.isError=n5;Ot.types.isNativeError=n5;function gF(t){return typeof t=="function"}Ot.isFunction=gF;function X$e(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}Ot.isPrimitive=X$e;Ot.isBuffer=yde();function NG(t){return Object.prototype.toString.call(t)}function RG(t){return t<10?"0"+t.toString(10):t.toString(10)}var J$e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Z$e(){var t=new Date,e=[RG(t.getHours()),RG(t.getMinutes()),RG(t.getSeconds())].join(":");return[t.getDate(),J$e[t.getMonth()],e].join(" ")}Ot.log=function(){console.log("%s - %s",Z$e(),Ot.format.apply(Ot,arguments))};Ot.inherits=Ede();Ot._extend=function(t,e){if(!e||!my(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};function bde(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var k1=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;Ot.promisify=function(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if(k1&&e[k1]){var r=e[k1];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,k1,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var n,i,s=new Promise(function(u,l){n=u,i=l}),o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);o.push(function(u,l){u?i(u):n(l)});try{e.apply(this,o)}catch(u){i(u)}return s}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),k1&&Object.defineProperty(r,k1,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,Ade(e))};Ot.promisify.custom=k1;function eje(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}function tje(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return i.apply(s,arguments)};t.apply(this,r).then(function(a){process.nextTick(o.bind(null,null,a))},function(a){process.nextTick(eje.bind(null,a,o))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,Ade(t)),e}Ot.callbackify=tje});var IG=v((n7t,Rde)=>{"use strict";function gy(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gy=function(r){return typeof r}:gy=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},gy(t)}function rje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nje(t,e){return e&&(gy(e)==="object"||typeof e=="function")?e:ije(t)}function ije(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wG(t){return wG=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},wG(t)}function sje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&LG(t,e)}function LG(t,e){return LG=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},LG(t,e)}var Cde={},yy,FG;function i5(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}var i=function(s){sje(o,s);function o(a,u,l){var c;return rje(this,o),c=nje(this,wG(o).call(this,n(a,u,l))),c.code=t,c}return o}(r);Cde[t]=i}function Tde(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function oje(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function aje(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function uje(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}i5("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);i5("ERR_INVALID_ARG_TYPE",function(t,e,r){yy===void 0&&(yy=Ts()),yy(typeof t=="string","'name' must be a string");var n;typeof e=="string"&&oje(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(aje(t," argument"))i="The ".concat(t," ").concat(n," ").concat(Tde(e,"type"));else{var s=uje(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(Tde(e,"type"))}return i+=". Received type ".concat(gy(r)),i},TypeError);i5("ERR_INVALID_ARG_VALUE",function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";FG===void 0&&(FG=Pd());var n=FG.inspect(e);return n.length>128&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(t,"' ").concat(r,". Received ").concat(n)},TypeError,RangeError);i5("ERR_INVALID_RETURN_VALUE",function(t,e,r){var n;return r&&r.constructor&&r.constructor.name?n="instance of ".concat(r.constructor.name):n="type ".concat(gy(r)),"Expected ".concat(t,' to be returned from the "').concat(e,'"')+" function but got ".concat(n,".")},TypeError);i5("ERR_MISSING_ARGS",function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];yy===void 0&&(yy=Ts()),yy(e.length>0,"At least one arg needs to be specified");var n="The ",i=e.length;switch(e=e.map(function(s){return'"'.concat(s,'"')}),i){case 1:n+="".concat(e[0]," argument");break;case 2:n+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:n+=e.slice(0,i-1).join(", "),n+=", and ".concat(e[i-1]," arguments");break}return"".concat(n," must be specified")},TypeError);Rde.exports.codes=Cde});var wde=v((i7t,Fde)=>{"use strict";function lje(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){cje(t,i,r[i])})}return t}function cje(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ode(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xje(t,e,r){return e&&Ode(t.prototype,e),r&&Ode(t,r),t}function Ey(t,e){return e&&(Ou(e)==="object"||typeof e=="function")?e:MG(t)}function MG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u5(t,e)}function PG(t){var e=typeof Map=="function"?new Map:void 0;return PG=function(n){if(n===null||!pje(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return vF(n,arguments,kd(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u5(i,n)},PG(t)}function hje(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function vF(t,e,r){return hje()?vF=Reflect.construct:vF=function(i,s,o){var a=[null];a.push.apply(a,s);var u=Function.bind.apply(i,a),l=new u;return o&&u5(l,o.prototype),l},vF.apply(null,arguments)}function pje(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function u5(t,e){return u5=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},u5(t,e)}function kd(t){return kd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},kd(t)}function Ou(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ou=function(r){return typeof r}:Ou=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ou(t)}var mje=Pd(),kG=mje.inspect,gje=IG(),yje=gje.codes.ERR_INVALID_ARG_TYPE;function Dde(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Eje(t,e){if(e=Math.floor(e),t.length==0||e==0)return"";var r=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+=t.substring(0,r-t.length),t}var Il="",s5="",o5="",rs="",q1={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},Aje=10;function Nde(t){var e=Object.keys(t),r=Object.create(Object.getPrototypeOf(t));return e.forEach(function(n){r[n]=t[n]}),Object.defineProperty(r,"message",{value:t.message}),r}function a5(t){return kG(t,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function Sje(t,e,r){var n="",i="",s=0,o="",a=!1,u=a5(t),l=u.split(`
`),c=a5(e).split(`
`),f=0,x="";if(r==="strictEqual"&&Ou(t)==="object"&&Ou(e)==="object"&&t!==null&&e!==null&&(r="strictEqualObject"),l.length===1&&c.length===1&&l[0]!==c[0]){var d=l[0].length+c[0].length;if(d<=Aje){if((Ou(t)!=="object"||t===null)&&(Ou(e)!=="object"||e===null)&&(t!==0||e!==0))return"".concat(q1[r],`

`)+"".concat(l[0]," !== ").concat(c[0],`
`)}else if(r!=="strictEqualObject"){var h=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(d<h){for(;l[0][f]===c[0][f];)f++;f>2&&(x=`
  `.concat(Eje(" ",f),"^"),f=0)}}}for(var p=l[l.length-1],m=c[c.length-1];p===m&&(f++<2?o=`
  `.concat(p).concat(o):n=p,l.pop(),c.pop(),!(l.length===0||c.length===0));)p=l[l.length-1],m=c[c.length-1];var g=Math.max(l.length,c.length);if(g===0){var y=u.split(`
`);if(y.length>30)for(y[26]="".concat(Il,"...").concat(rs);y.length>27;)y.pop();return"".concat(q1.notIdentical,`

`).concat(y.join(`
`),`
`)}f>3&&(o=`
`.concat(Il,"...").concat(rs).concat(o),a=!0),n!==""&&(o=`
  `.concat(n).concat(o),n="");var A=0,S=q1[r]+`
`.concat(s5,"+ actual").concat(rs," ").concat(o5,"- expected").concat(rs),T=" ".concat(Il,"...").concat(rs," Lines skipped");for(f=0;f<g;f++){var _=f-s;if(l.length<f+1)_>1&&f>2&&(_>4?(i+=`
`.concat(Il,"...").concat(rs),a=!0):_>3&&(i+=`
  `.concat(c[f-2]),A++),i+=`
  `.concat(c[f-1]),A++),s=f,n+=`
`.concat(o5,"-").concat(rs," ").concat(c[f]),A++;else if(c.length<f+1)_>1&&f>2&&(_>4?(i+=`
`.concat(Il,"...").concat(rs),a=!0):_>3&&(i+=`
  `.concat(l[f-2]),A++),i+=`
  `.concat(l[f-1]),A++),s=f,i+=`
`.concat(s5,"+").concat(rs," ").concat(l[f]),A++;else{var b=c[f],R=l[f],O=R!==b&&(!Dde(R,",")||R.slice(0,-1)!==b);O&&Dde(b,",")&&b.slice(0,-1)===R&&(O=!1,R+=","),O?(_>1&&f>2&&(_>4?(i+=`
`.concat(Il,"...").concat(rs),a=!0):_>3&&(i+=`
  `.concat(l[f-2]),A++),i+=`
  `.concat(l[f-1]),A++),s=f,i+=`
`.concat(s5,"+").concat(rs," ").concat(R),n+=`
`.concat(o5,"-").concat(rs," ").concat(b),A+=2):(i+=n,n="",(_===1||f===0)&&(i+=`
  `.concat(R),A++))}if(A>20&&f<g-2)return"".concat(S).concat(T,`
`).concat(i,`
`).concat(Il,"...").concat(rs).concat(n,`
`)+"".concat(Il,"...").concat(rs)}return"".concat(S).concat(a?T:"",`
`).concat(i).concat(n).concat(o).concat(x)}var vje=function(t){dje(e,t);function e(r){var n;if(fje(this,e),Ou(r)!=="object"||r===null)throw new yje("options","Object",r);var i=r.message,s=r.operator,o=r.stackStartFn,a=r.actual,u=r.expected,l=Error.stackTraceLimit;if(Error.stackTraceLimit=0,i!=null)n=Ey(this,kd(e).call(this,String(i)));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(Il="\x1B[34m",s5="\x1B[32m",rs="\x1B[39m",o5="\x1B[31m"):(Il="",s5="",rs="",o5="")),Ou(a)==="object"&&a!==null&&Ou(u)==="object"&&u!==null&&"stack"in a&&a instanceof Error&&"stack"in u&&u instanceof Error&&(a=Nde(a),u=Nde(u)),s==="deepStrictEqual"||s==="strictEqual")n=Ey(this,kd(e).call(this,Sje(a,u,s)));else if(s==="notDeepStrictEqual"||s==="notStrictEqual"){var c=q1[s],f=a5(a).split(`
`);if(s==="notStrictEqual"&&Ou(a)==="object"&&a!==null&&(c=q1.notStrictEqualObject),f.length>30)for(f[26]="".concat(Il,"...").concat(rs);f.length>27;)f.pop();f.length===1?n=Ey(this,kd(e).call(this,"".concat(c," ").concat(f[0]))):n=Ey(this,kd(e).call(this,"".concat(c,`

`).concat(f.join(`
`),`
`)))}else{var x=a5(a),d="",h=q1[s];s==="notDeepEqual"||s==="notEqual"?(x="".concat(q1[s],`

`).concat(x),x.length>1024&&(x="".concat(x.slice(0,1021),"..."))):(d="".concat(a5(u)),x.length>512&&(x="".concat(x.slice(0,509),"...")),d.length>512&&(d="".concat(d.slice(0,509),"...")),s==="deepEqual"||s==="equal"?x="".concat(h,`

`).concat(x,`

should equal

`):d=" ".concat(s," ").concat(d)),n=Ey(this,kd(e).call(this,"".concat(x).concat(d)))}return Error.stackTraceLimit=l,n.generatedMessage=!i,Object.defineProperty(MG(n),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),n.code="ERR_ASSERTION",n.actual=a,n.expected=u,n.operator=s,Error.captureStackTrace&&Error.captureStackTrace(MG(n),o),n.stack,n.name="AssertionError",Ey(n)}return xje(e,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:kG.custom,value:function(n,i){return kG(this,lje({},i,{customInspect:!1,depth:0}))}}]),e}(PG(Error));Fde.exports=vje});var Mde=v((s7t,Ide)=>{"use strict";function Lde(t,e){if(t==null)throw new TypeError("Cannot convert first argument to object");for(var r=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s=Object.keys(Object(i)),o=0,a=s.length;o<a;o++){var u=s[o],l=Object.getOwnPropertyDescriptor(i,u);l!==void 0&&l.enumerable&&(r[u]=i[u])}}return r}function _je(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:Lde})}Ide.exports={assign:Lde,polyfill:_je}});var BG=v((o7t,kde)=>{"use strict";var Pde=Object.prototype.toString;kde.exports=function(e){var r=Pde.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Pde.call(e.callee)==="[object Function]"),n}});var Qde=v((a7t,Gde)=>{"use strict";var zde;Object.keys||(l5=Object.prototype.hasOwnProperty,qG=Object.prototype.toString,Bde=BG(),UG=Object.prototype.propertyIsEnumerable,qde=!UG.call({toString:null},"toString"),Ude=UG.call(function(){},"prototype"),c5=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],_F=function(t){var e=t.constructor;return e&&e.prototype===t},$de={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},jde=function(){if(typeof window>"u")return!1;for(var t in window)try{if(!$de["$"+t]&&l5.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{_F(window[t])}catch{return!0}}catch{return!0}return!1}(),Hde=function(t){if(typeof window>"u"||!jde)return _F(t);try{return _F(t)}catch{return!1}},zde=function(e){var r=e!==null&&typeof e=="object",n=qG.call(e)==="[object Function]",i=Bde(e),s=r&&qG.call(e)==="[object String]",o=[];if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var a=Ude&&n;if(s&&e.length>0&&!l5.call(e,0))for(var u=0;u<e.length;++u)o.push(String(u));if(i&&e.length>0)for(var l=0;l<e.length;++l)o.push(String(l));else for(var c in e)!(a&&c==="prototype")&&l5.call(e,c)&&o.push(String(c));if(qde)for(var f=Hde(e),x=0;x<c5.length;++x)!(f&&c5[x]==="constructor")&&l5.call(e,c5[x])&&o.push(c5[x]);return o});var l5,qG,Bde,UG,qde,Ude,c5,_F,$de,jde,Hde;Gde.exports=zde});var Kde=v((u7t,Yde)=>{"use strict";var bje=Array.prototype.slice,Tje=BG(),Vde=Object.keys,bF=Vde?function(e){return Vde(e)}:Qde(),Wde=Object.keys;bF.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return Tje(n)?Wde(bje.call(n)):Wde(n)})}else Object.keys=bF;return Object.keys||bF};Yde.exports=bF});var HG=v((l7t,Xde)=>{"use strict";var Cje=xy(),$G=Cje("%Object.defineProperty%",!0),jG=function(){if($G)try{return $G({},"a",{value:1}),!0}catch{return!1}return!1};jG.hasArrayLengthDefineBug=function(){if(!jG())return null;try{return $G([],"length",{value:1}).length!==1}catch{return!0}};Xde.exports=jG});var ehe=v((c7t,Zde)=>{"use strict";var Rje=HG()(),zG=xy(),f5=Rje&&zG("%Object.defineProperty%",!0);if(f5)try{f5({},"a",{value:1})}catch{f5=!1}var Oje=zG("%SyntaxError%"),Ay=zG("%TypeError%"),Jde=gG();Zde.exports=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Ay("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Ay("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Ay("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Ay("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Ay("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Ay("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!Jde&&Jde(e,r);if(f5)f5(e,r,{configurable:o===null&&u?u.configurable:!o,enumerable:i===null&&u?u.enumerable:!i,value:n,writable:s===null&&u?u.writable:!s});else if(a||!i&&!s&&!o)e[r]=n;else throw new Oje("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var x5=v((f7t,ihe)=>{"use strict";var Dje=Kde(),Nje=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Fje=Object.prototype.toString,wje=Array.prototype.concat,the=ehe(),Lje=function(t){return typeof t=="function"&&Fje.call(t)==="[object Function]"},rhe=HG()(),Ije=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!Lje(n)||!n())return}rhe?the(t,e,r,!0):the(t,e,r)},nhe=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Dje(e);Nje&&(n=wje.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)Ije(t,n[i],e[n[i]],r[n[i]])};nhe.supportsDescriptors=!!rhe;ihe.exports=nhe});var GG=v((x7t,ohe)=>{"use strict";var she=function(t){return t!==t};ohe.exports=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||she(e)&&she(r))}});var QG=v((d7t,ahe)=>{"use strict";var Mje=GG();ahe.exports=function(){return typeof Object.is=="function"?Object.is:Mje}});var lhe=v((h7t,uhe)=>{"use strict";var Pje=QG(),kje=x5();uhe.exports=function(){var e=Pje();return kje(Object,{is:e},{is:function(){return Object.is!==e}}),e}});var VG=v((p7t,xhe)=>{"use strict";var Bje=x5(),qje=Z_(),Uje=GG(),che=QG(),$je=lhe(),fhe=qje(che(),Object);Bje(fhe,{getPolyfill:che,implementation:Uje,shim:$je});xhe.exports=fhe});var WG=v((m7t,dhe)=>{"use strict";dhe.exports=function(e){return e!==e}});var YG=v((g7t,hhe)=>{"use strict";var jje=WG();hhe.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:jje}});var mhe=v((y7t,phe)=>{"use strict";var Hje=x5(),zje=YG();phe.exports=function(){var e=zje();return Hje(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}});var Ahe=v((E7t,Ehe)=>{"use strict";var Gje=Z_(),Qje=x5(),Vje=WG(),ghe=YG(),Wje=mhe(),yhe=Gje(ghe(),Number);Qje(yhe,{getPolyfill:ghe,implementation:Vje,shim:Wje});Ehe.exports=yhe});var qhe=v((A7t,Bhe)=>{"use strict";function She(t,e){return Xje(t)||Kje(t,e)||Yje()}function Yje(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Kje(t,e){var r=[],n=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),a;!(n=(a=o.next()).done)&&(r.push(a.value),!(e&&r.length===e));n=!0);}catch(u){i=!0,s=u}finally{try{!n&&o.return!=null&&o.return()}finally{if(i)throw s}}return r}function Xje(t){if(Array.isArray(t))return t}function Ma(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ma=function(r){return typeof r}:Ma=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ma(t)}var Jje=/a/g.flags!==void 0,FF=function(e){var r=[];return e.forEach(function(n){return r.push(n)}),r},vhe=function(e){var r=[];return e.forEach(function(n,i){return r.push([i,n])}),r},Lhe=Object.is?Object.is:VG(),DF=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},KG=Number.isNaN?Number.isNaN:Ahe();function JG(t){return t.call.bind(t)}var h5=JG(Object.prototype.hasOwnProperty),NF=JG(Object.prototype.propertyIsEnumerable),_he=JG(Object.prototype.toString),co=Pd().types,Zje=co.isAnyArrayBuffer,eHe=co.isArrayBufferView,bhe=co.isDate,TF=co.isMap,The=co.isRegExp,CF=co.isSet,tHe=co.isNativeError,rHe=co.isBoxedPrimitive,Che=co.isNumberObject,Rhe=co.isStringObject,Ohe=co.isBooleanObject,Dhe=co.isBigIntObject,nHe=co.isSymbolObject,iHe=co.isFloat32Array,sHe=co.isFloat64Array;function oHe(t){if(t.length===0||t.length>10)return!0;for(var e=0;e<t.length;e++){var r=t.charCodeAt(e);if(r<48||r>57)return!0}return t.length===10&&t>=Math.pow(2,32)}function RF(t){return Object.keys(t).filter(oHe).concat(DF(t).filter(Object.prototype.propertyIsEnumerable.bind(t)))}function Ihe(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}var OF=void 0,aHe=!0,uHe=!1,XG=0,ZG=1,Mhe=2,Phe=3;function lHe(t,e){return Jje?t.source===e.source&&t.flags===e.flags:RegExp.prototype.toString.call(t)===RegExp.prototype.toString.call(e)}function cHe(t,e){if(t.byteLength!==e.byteLength)return!1;for(var r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function fHe(t,e){return t.byteLength!==e.byteLength?!1:Ihe(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))===0}function xHe(t,e){return t.byteLength===e.byteLength&&Ihe(new Uint8Array(t),new Uint8Array(e))===0}function dHe(t,e){return Che(t)?Che(e)&&Lhe(Number.prototype.valueOf.call(t),Number.prototype.valueOf.call(e)):Rhe(t)?Rhe(e)&&String.prototype.valueOf.call(t)===String.prototype.valueOf.call(e):Ohe(t)?Ohe(e)&&Boolean.prototype.valueOf.call(t)===Boolean.prototype.valueOf.call(e):Dhe(t)?Dhe(e)&&BigInt.prototype.valueOf.call(t)===BigInt.prototype.valueOf.call(e):nHe(e)&&Symbol.prototype.valueOf.call(t)===Symbol.prototype.valueOf.call(e)}function Du(t,e,r,n){if(t===e)return t!==0?!0:r?Lhe(t,e):!0;if(r){if(Ma(t)!=="object")return typeof t=="number"&&KG(t)&&KG(e);if(Ma(e)!=="object"||t===null||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1}else{if(t===null||Ma(t)!=="object")return e===null||Ma(e)!=="object"?t==e:!1;if(e===null||Ma(e)!=="object")return!1}var i=_he(t),s=_he(e);if(i!==s)return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;var o=RF(t,OF),a=RF(e,OF);return o.length!==a.length?!1:d5(t,e,r,n,ZG,o)}if(i==="[object Object]"&&(!TF(t)&&TF(e)||!CF(t)&&CF(e)))return!1;if(bhe(t)){if(!bhe(e)||Date.prototype.getTime.call(t)!==Date.prototype.getTime.call(e))return!1}else if(The(t)){if(!The(e)||!lHe(t,e))return!1}else if(tHe(t)||t instanceof Error){if(t.message!==e.message||t.name!==e.name)return!1}else if(eHe(t)){if(!r&&(iHe(t)||sHe(t))){if(!cHe(t,e))return!1}else if(!fHe(t,e))return!1;var u=RF(t,OF),l=RF(e,OF);return u.length!==l.length?!1:d5(t,e,r,n,XG,u)}else{if(CF(t))return!CF(e)||t.size!==e.size?!1:d5(t,e,r,n,Mhe);if(TF(t))return!TF(e)||t.size!==e.size?!1:d5(t,e,r,n,Phe);if(Zje(t)){if(!xHe(t,e))return!1}else if(rHe(t)&&!dHe(t,e))return!1}return d5(t,e,r,n,XG)}function Nhe(t,e){return e.filter(function(r){return NF(t,r)})}function d5(t,e,r,n,i,s){if(arguments.length===5){s=Object.keys(t);var o=Object.keys(e);if(s.length!==o.length)return!1}for(var a=0;a<s.length;a++)if(!h5(e,s[a]))return!1;if(r&&arguments.length===5){var u=DF(t);if(u.length!==0){var l=0;for(a=0;a<u.length;a++){var c=u[a];if(NF(t,c)){if(!NF(e,c))return!1;s.push(c),l++}else if(NF(e,c))return!1}var f=DF(e);if(u.length!==f.length&&Nhe(e,f).length!==l)return!1}else{var x=DF(e);if(x.length!==0&&Nhe(e,x).length!==0)return!1}}if(s.length===0&&(i===XG||i===ZG&&t.length===0||t.size===0))return!0;if(n===void 0)n={val1:new Map,val2:new Map,position:0};else{var d=n.val1.get(t);if(d!==void 0){var h=n.val2.get(e);if(h!==void 0)return d===h}n.position++}n.val1.set(t,n.position),n.val2.set(e,n.position);var p=yHe(t,e,r,s,n,i);return n.val1.delete(t),n.val2.delete(e),p}function Fhe(t,e,r,n){for(var i=FF(t),s=0;s<i.length;s++){var o=i[s];if(Du(e,o,r,n))return t.delete(o),!0}return!1}function khe(t){switch(Ma(t)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":t=+t;case"number":if(KG(t))return!1}return!0}function hHe(t,e,r){var n=khe(r);return n??(e.has(n)&&!t.has(n))}function pHe(t,e,r,n,i){var s=khe(r);if(s!=null)return s;var o=e.get(s);return o===void 0&&!e.has(s)||!Du(n,o,!1,i)?!1:!t.has(s)&&Du(n,o,!1,i)}function mHe(t,e,r,n){for(var i=null,s=FF(t),o=0;o<s.length;o++){var a=s[o];if(Ma(a)==="object"&&a!==null)i===null&&(i=new Set),i.add(a);else if(!e.has(a)){if(r||!hHe(t,e,a))return!1;i===null&&(i=new Set),i.add(a)}}if(i!==null){for(var u=FF(e),l=0;l<u.length;l++){var c=u[l];if(Ma(c)==="object"&&c!==null){if(!Fhe(i,c,r,n))return!1}else if(!r&&!t.has(c)&&!Fhe(i,c,r,n))return!1}return i.size===0}return!0}function whe(t,e,r,n,i,s){for(var o=FF(t),a=0;a<o.length;a++){var u=o[a];if(Du(r,u,i,s)&&Du(n,e.get(u),i,s))return t.delete(u),!0}return!1}function gHe(t,e,r,n){for(var i=null,s=vhe(t),o=0;o<s.length;o++){var a=She(s[o],2),u=a[0],l=a[1];if(Ma(u)==="object"&&u!==null)i===null&&(i=new Set),i.add(u);else{var c=e.get(u);if(c===void 0&&!e.has(u)||!Du(l,c,r,n)){if(r||!pHe(t,e,u,l,n))return!1;i===null&&(i=new Set),i.add(u)}}}if(i!==null){for(var f=vhe(e),x=0;x<f.length;x++){var d=She(f[x],2),u=d[0],h=d[1];if(Ma(u)==="object"&&u!==null){if(!whe(i,t,u,h,r,n))return!1}else if(!r&&(!t.has(u)||!Du(t.get(u),h,!1,n))&&!whe(i,t,u,h,!1,n))return!1}return i.size===0}return!0}function yHe(t,e,r,n,i,s){var o=0;if(s===Mhe){if(!mHe(t,e,r,i))return!1}else if(s===Phe){if(!gHe(t,e,r,i))return!1}else if(s===ZG)for(;o<t.length;o++)if(h5(t,o)){if(!h5(e,o)||!Du(t[o],e[o],r,i))return!1}else{if(h5(e,o))return!1;for(var a=Object.keys(t);o<a.length;o++){var u=a[o];if(!h5(e,u)||!Du(t[u],e[u],r,i))return!1}return a.length===Object.keys(e).length}for(o=0;o<n.length;o++){var l=n[o];if(!Du(t[l],e[l],r,i))return!1}return!0}function EHe(t,e){return Du(t,e,uHe)}function AHe(t,e){return Du(t,e,aHe)}Bhe.exports={isDeepEqual:EHe,isDeepStrictEqual:AHe}});var Ts=v((S7t,tpe)=>{"use strict";function Bd(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bd=function(r){return typeof r}:Bd=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Bd(t)}function SHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var vHe=IG(),m5=vHe.codes,Uhe=m5.ERR_AMBIGUOUS_ARGUMENT,p5=m5.ERR_INVALID_ARG_TYPE,_He=m5.ERR_INVALID_ARG_VALUE,bHe=m5.ERR_INVALID_RETURN_VALUE,Ud=m5.ERR_MISSING_ARGS,U1=wde(),THe=Pd(),CHe=THe.inspect,zhe=Pd().types,RHe=zhe.isPromise,eQ=zhe.isRegExp,OHe=Object.assign?Object.assign:Mde().assign,Ghe=Object.is?Object.is:VG(),qd,wF;function g5(){var t=qhe();qd=t.isDeepEqual,wF=t.isDeepStrictEqual}var $he=!1,Mr=tpe.exports=tQ,LF={};function Ml(t){throw t.message instanceof Error?t.message:new U1(t)}function Qhe(t,e,r,n,i){var s=arguments.length,o;if(s===0)o="Failed";else if(s===1)r=t,t=void 0;else{if($he===!1){$he=!0;var a=process.emitWarning?process.emitWarning:console.warn.bind(console);a("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}s===2&&(n="!=")}if(r instanceof Error)throw r;var u={actual:t,expected:e,operator:n===void 0?"fail":n,stackStartFn:i||Qhe};r!==void 0&&(u.message=r);var l=new U1(u);throw o&&(l.message=o,l.generatedMessage=!0),l}Mr.fail=Qhe;Mr.AssertionError=U1;function Vhe(t,e,r,n){if(!r){var i=!1;if(e===0)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var s=new U1({actual:r,expected:!0,message:n,operator:"==",stackStartFn:t});throw s.generatedMessage=i,s}}function tQ(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];Vhe.apply(void 0,[tQ,e.length].concat(e))}Mr.ok=tQ;Mr.equal=function t(e,r,n){if(arguments.length<2)throw new Ud("actual","expected");e!=r&&Ml({actual:e,expected:r,message:n,operator:"==",stackStartFn:t})};Mr.notEqual=function t(e,r,n){if(arguments.length<2)throw new Ud("actual","expected");e==r&&Ml({actual:e,expected:r,message:n,operator:"!=",stackStartFn:t})};Mr.deepEqual=function t(e,r,n){if(arguments.length<2)throw new Ud("actual","expected");qd===void 0&&g5(),qd(e,r)||Ml({actual:e,expected:r,message:n,operator:"deepEqual",stackStartFn:t})};Mr.notDeepEqual=function t(e,r,n){if(arguments.length<2)throw new Ud("actual","expected");qd===void 0&&g5(),qd(e,r)&&Ml({actual:e,expected:r,message:n,operator:"notDeepEqual",stackStartFn:t})};Mr.deepStrictEqual=function t(e,r,n){if(arguments.length<2)throw new Ud("actual","expected");qd===void 0&&g5(),wF(e,r)||Ml({actual:e,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:t})};Mr.notDeepStrictEqual=Whe;function Whe(t,e,r){if(arguments.length<2)throw new Ud("actual","expected");qd===void 0&&g5(),wF(t,e)&&Ml({actual:t,expected:e,message:r,operator:"notDeepStrictEqual",stackStartFn:Whe})}Mr.strictEqual=function t(e,r,n){if(arguments.length<2)throw new Ud("actual","expected");Ghe(e,r)||Ml({actual:e,expected:r,message:n,operator:"strictEqual",stackStartFn:t})};Mr.notStrictEqual=function t(e,r,n){if(arguments.length<2)throw new Ud("actual","expected");Ghe(e,r)&&Ml({actual:e,expected:r,message:n,operator:"notStrictEqual",stackStartFn:t})};var jhe=function t(e,r,n){var i=this;SHe(this,t),r.forEach(function(s){s in e&&(n!==void 0&&typeof n[s]=="string"&&eQ(e[s])&&e[s].test(n[s])?i[s]=n[s]:i[s]=e[s])})};function DHe(t,e,r,n,i,s){if(!(r in t)||!wF(t[r],e[r])){if(!n){var o=new jhe(t,i),a=new jhe(e,i,t),u=new U1({actual:o,expected:a,operator:"deepStrictEqual",stackStartFn:s});throw u.actual=t,u.expected=e,u.operator=s.name,u}Ml({actual:t,expected:e,message:n,operator:s.name,stackStartFn:s})}}function Yhe(t,e,r,n){if(typeof e!="function"){if(eQ(e))return e.test(t);if(arguments.length===2)throw new p5("expected",["Function","RegExp"],e);if(Bd(t)!=="object"||t===null){var i=new U1({actual:t,expected:e,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var s=Object.keys(e);if(e instanceof Error)s.push("name","message");else if(s.length===0)throw new _He("error",e,"may not be an empty object");return qd===void 0&&g5(),s.forEach(function(o){typeof t[o]=="string"&&eQ(e[o])&&e[o].test(t[o])||DHe(t,e,o,r,s,n)}),!0}return e.prototype!==void 0&&t instanceof e?!0:Error.isPrototypeOf(e)?!1:e.call({},t)===!0}function Khe(t){if(typeof t!="function")throw new p5("fn","Function",t);try{t()}catch(e){return e}return LF}function Hhe(t){return RHe(t)||t!==null&&Bd(t)==="object"&&typeof t.then=="function"&&typeof t.catch=="function"}function Xhe(t){return Promise.resolve().then(function(){var e;if(typeof t=="function"){if(e=t(),!Hhe(e))throw new bHe("instance of Promise","promiseFn",e)}else if(Hhe(t))e=t;else throw new p5("promiseFn",["Function","Promise"],t);return Promise.resolve().then(function(){return e}).then(function(){return LF}).catch(function(r){return r})})}function Jhe(t,e,r,n){if(typeof r=="string"){if(arguments.length===4)throw new p5("error",["Object","Error","Function","RegExp"],r);if(Bd(e)==="object"&&e!==null){if(e.message===r)throw new Uhe("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===r)throw new Uhe("error/message",'The error "'.concat(e,'" is identical to the message.'));n=r,r=void 0}else if(r!=null&&Bd(r)!=="object"&&typeof r!="function")throw new p5("error",["Object","Error","Function","RegExp"],r);if(e===LF){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var s=t.name==="rejects"?"rejection":"exception";Ml({actual:void 0,expected:r,operator:t.name,message:"Missing expected ".concat(s).concat(i),stackStartFn:t})}if(r&&!Yhe(e,r,n,t))throw e}function Zhe(t,e,r,n){if(e!==LF){if(typeof r=="string"&&(n=r,r=void 0),!r||Yhe(e,r)){var i=n?": ".concat(n):".",s=t.name==="doesNotReject"?"rejection":"exception";Ml({actual:e,expected:r,operator:t.name,message:"Got unwanted ".concat(s).concat(i,`
`)+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:t})}throw e}}Mr.throws=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];Jhe.apply(void 0,[t,Khe(e)].concat(n))};Mr.rejects=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Xhe(e).then(function(s){return Jhe.apply(void 0,[t,s].concat(n))})};Mr.doesNotThrow=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];Zhe.apply(void 0,[t,Khe(e)].concat(n))};Mr.doesNotReject=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Xhe(e).then(function(s){return Zhe.apply(void 0,[t,s].concat(n))})};Mr.ifError=function t(e){if(e!=null){var r="ifError got unwanted exception: ";Bd(e)==="object"&&typeof e.message=="string"?e.message.length===0&&e.constructor?r+=e.constructor.name:r+=e.message:r+=CHe(e);var n=new U1({actual:e,expected:null,operator:"ifError",message:r,stackStartFn:t}),i=e.stack;if(typeof i=="string"){var s=i.split(`
`);s.shift();for(var o=n.stack.split(`
`),a=0;a<s.length;a++){var u=o.indexOf(s[a]);if(u!==-1){o=o.slice(0,u);break}}n.stack="".concat(o.join(`
`),`
`).concat(s.join(`
`))}throw n}};function epe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];Vhe.apply(void 0,[epe,e.length].concat(e))}Mr.strict=OHe(epe,Mr,{equal:Mr.strictEqual,deepEqual:Mr.deepStrictEqual,notEqual:Mr.notStrictEqual,notDeepEqual:Mr.notDeepStrictEqual});Mr.strict.strict=Mr.strict});var re=v(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.SuppressWarnings=ec.Override=ec.Nullable=ec.NotNull=void 0;function NHe(t,e,r){}ec.NotNull=NHe;function FHe(t,e,r){}ec.Nullable=FHe;function wHe(t,e,r){}ec.Override=wHe;function LHe(t){return(e,r,n)=>{}}ec.SuppressWarnings=LHe});var Yf=v(y5=>{"use strict";Object.defineProperty(y5,"__esModule",{value:!0});y5.IntStream=void 0;var IHe;(function(t){t.EOF=-1,t.UNKNOWN_SOURCE_NAME="<unknown>"})(IHe=y5.IntStream||(y5.IntStream={}))});var rpe=v(Sy=>{"use strict";var tc=Sy&&Sy.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(Sy,"__esModule",{value:!0});Sy.ANTLRInputStream=void 0;var MHe=Ts(),rc=re(),IF=Yf(),Pa=class{constructor(e){this.p=0,this.data=e,this.n=e.length}reset(){this.p=0}consume(){if(this.p>=this.n)throw MHe(this.LA(1)===IF.IntStream.EOF),new Error("cannot consume EOF");this.p<this.n&&this.p++}LA(e){return e===0?0:e<0&&(e++,this.p+e-1<0)||this.p+e-1>=this.n?IF.IntStream.EOF:this.data.charCodeAt(this.p+e-1)}LT(e){return this.LA(e)}get index(){return this.p}get size(){return this.n}mark(){return-1}release(e){}seek(e){if(e<=this.p){this.p=e;return}for(e=Math.min(e,this.n);this.p<e;)this.consume()}getText(e){let r=e.a,n=e.b;n>=this.n&&(n=this.n-1);let i=n-r+1;return r>=this.n?"":this.data.substr(r,i)}get sourceName(){return this.name?this.name:IF.IntStream.UNKNOWN_SOURCE_NAME}toString(){return this.data}};tc([rc.Override],Pa.prototype,"consume",null);tc([rc.Override],Pa.prototype,"LA",null);tc([rc.Override],Pa.prototype,"index",null);tc([rc.Override],Pa.prototype,"size",null);tc([rc.Override],Pa.prototype,"mark",null);tc([rc.Override],Pa.prototype,"release",null);tc([rc.Override],Pa.prototype,"seek",null);tc([rc.Override],Pa.prototype,"getText",null);tc([rc.Override],Pa.prototype,"sourceName",null);tc([rc.Override],Pa.prototype,"toString",null);Sy.ANTLRInputStream=Pa});var nc=v($d=>{"use strict";var rQ=$d&&$d.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty($d,"__esModule",{value:!0});$d.ATNState=void 0;var nQ=re(),$1=class t{constructor(){this.stateNumber=t.INVALID_STATE_NUMBER,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.optimizedTransitions=this.transitions}getStateNumber(){return this.stateNumber}get nonStopStateNumber(){return this.getStateNumber()}hashCode(){return this.stateNumber}equals(e){return e instanceof t?this.stateNumber===e.stateNumber:!1}get isNonGreedyExitState(){return!1}toString(){return String(this.stateNumber)}getTransitions(){return this.transitions.slice(0)}get numberOfTransitions(){return this.transitions.length}addTransition(e,r){if(this.transitions.length===0)this.epsilonOnlyTransitions=e.isEpsilon;else if(this.epsilonOnlyTransitions!==e.isEpsilon)throw this.epsilonOnlyTransitions=!1,new Error("ATN state "+this.stateNumber+" has both epsilon and non-epsilon transitions.");this.transitions.splice(r!==void 0?r:this.transitions.length,0,e)}transition(e){return this.transitions[e]}setTransition(e,r){this.transitions[e]=r}removeTransition(e){return this.transitions.splice(e,1)[0]}get onlyHasEpsilonTransitions(){return this.epsilonOnlyTransitions}setRuleIndex(e){this.ruleIndex=e}get isOptimized(){return this.optimizedTransitions!==this.transitions}get numberOfOptimizedTransitions(){return this.optimizedTransitions.length}getOptimizedTransition(e){return this.optimizedTransitions[e]}addOptimizedTransition(e){this.isOptimized||(this.optimizedTransitions=new Array),this.optimizedTransitions.push(e)}setOptimizedTransition(e,r){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions[e]=r}removeOptimizedTransition(e){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions.splice(e,1)}};rQ([nQ.Override],$1.prototype,"hashCode",null);rQ([nQ.Override],$1.prototype,"equals",null);rQ([nQ.Override],$1.prototype,"toString",null);$d.ATNState=$1;(function(t){t.INVALID_STATE_NUMBER=-1})($1=$d.ATNState||($d.ATNState={}))});var Ei=v(E5=>{"use strict";Object.defineProperty(E5,"__esModule",{value:!0});E5.ATNStateType=void 0;var PHe;(function(t){t[t.INVALID_TYPE=0]="INVALID_TYPE",t[t.BASIC=1]="BASIC",t[t.RULE_START=2]="RULE_START",t[t.BLOCK_START=3]="BLOCK_START",t[t.PLUS_BLOCK_START=4]="PLUS_BLOCK_START",t[t.STAR_BLOCK_START=5]="STAR_BLOCK_START",t[t.TOKEN_START=6]="TOKEN_START",t[t.RULE_STOP=7]="RULE_STOP",t[t.BLOCK_END=8]="BLOCK_END",t[t.STAR_LOOP_BACK=9]="STAR_LOOP_BACK",t[t.STAR_LOOP_ENTRY=10]="STAR_LOOP_ENTRY",t[t.PLUS_LOOP_BACK=11]="PLUS_LOOP_BACK",t[t.LOOP_END=12]="LOOP_END"})(PHe=E5.ATNStateType||(E5.ATNStateType={}))});var ic=v(MF=>{"use strict";Object.defineProperty(MF,"__esModule",{value:!0});MF.RecognitionException=void 0;var iQ=class extends Error{constructor(e,r,n,i){super(i),this._offendingState=-1,this._recognizer=e,this.input=r,this.ctx=n,e&&(this._offendingState=e.state)}get offendingState(){return this._offendingState}setOffendingState(e){this._offendingState=e}get expectedTokens(){if(this._recognizer)return this._recognizer.atn.getExpectedTokens(this._offendingState,this.ctx)}get context(){return this.ctx}get inputStream(){return this.input}getOffendingToken(e){if(!(e&&e!==this._recognizer))return this.offendingToken}setOffendingToken(e,r){e===this._recognizer&&(this.offendingToken=r)}get recognizer(){return this._recognizer}};MF.RecognitionException=iQ});var Kf=v(jd=>{"use strict";var npe=jd&&jd.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},kHe=jd&&jd.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(jd,"__esModule",{value:!0});jd.Transition=void 0;var ipe=re(),A5=class{constructor(e){if(e==null)throw new Error("target cannot be null.");this.target=e}get isEpsilon(){return!1}get label(){}};A5.serializationNames=["INVALID","EPSILON","RANGE","RULE","PREDICATE","ATOM","ACTION","SET","NOT_SET","WILDCARD","PRECEDENCE"];npe([ipe.NotNull],A5.prototype,"target",void 0);A5=npe([kHe(0,ipe.NotNull)],A5);jd.Transition=A5});var kF=v(PF=>{"use strict";Object.defineProperty(PF,"__esModule",{value:!0});PF.AbstractPredicateTransition=void 0;var BHe=Kf(),sQ=class extends BHe.Transition{constructor(e){super(e)}};PF.AbstractPredicateTransition=sQ});var an=v(S5=>{"use strict";Object.defineProperty(S5,"__esModule",{value:!0});S5.MurmurHash=void 0;var qHe;(function(t){function r(a=0){return a}t.initialize=r;function n(a,u){u==null?u=0:typeof u=="string"?u=o(u):typeof u=="object"&&(u=u.hashCode());let p=u;return p=Math.imul(p,3432918353),p=p<<15|p>>>17,p=Math.imul(p,461845907),a=a^p,a=a<<13|a>>>19,a=Math.imul(a,5)+3864292196,a&4294967295}t.update=n;function i(a,u){return a=a^u*4,a=a^a>>>16,a=Math.imul(a,2246822507),a=a^a>>>13,a=Math.imul(a,3266489909),a=a^a>>>16,a}t.finish=i;function s(a,u=0){let l=r(u),c=0;for(let f of a)l=n(l,f),c++;return l=i(l,c),l}t.hashCode=s;function o(a){let u=a.length;if(u===0)return 0;let l=0;for(let c=0;c<u;c++){let f=a.charCodeAt(c);l=(l<<5>>>0)-l+f,l|=0}return l}})(qHe=S5.MurmurHash||(S5.MurmurHash={}))});var Pl=v(vy=>{"use strict";var spe=vy&&vy.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(vy,"__esModule",{value:!0});vy.ObjectEqualityComparator=void 0;var ope=re(),j1=class{hashCode(e){return e==null?0:e.hashCode()}equals(e,r){return e==null?r==null:e.equals(r)}};j1.INSTANCE=new j1;spe([ope.Override],j1.prototype,"hashCode",null);spe([ope.Override],j1.prototype,"equals",null);vy.ObjectEqualityComparator=j1});var cpe=v(_y=>{"use strict";var upe=_y&&_y.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(_y,"__esModule",{value:!0});_y.DefaultEqualityComparator=void 0;var lpe=re(),UHe=an(),ape=Pl(),H1=class{hashCode(e){return e==null?0:typeof e=="string"||typeof e=="number"?UHe.MurmurHash.hashCode([e]):ape.ObjectEqualityComparator.INSTANCE.hashCode(e)}equals(e,r){return e==null?r==null:typeof e=="string"||typeof e=="number"?e===r:ape.ObjectEqualityComparator.INSTANCE.equals(e,r)}};H1.INSTANCE=new H1;upe([lpe.Override],H1.prototype,"hashCode",null);upe([lpe.Override],H1.prototype,"equals",null);_y.DefaultEqualityComparator=H1});var Xf=v(Hd=>{"use strict";var Cs=Hd&&Hd.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},$He=Hd&&Hd.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Hd,"__esModule",{value:!0});Hd.Array2DHashSet=void 0;var jHe=Ts(),HHe=cpe(),Rs=re(),oQ=an(),BF=16,aQ=.75,Jn=class t{constructor(e,r=BF){if(this.n=0,this.threshold=Math.floor(BF*aQ),e instanceof t){this.comparator=e.comparator,this.buckets=e.buckets.slice(0);for(let n=0;n<this.buckets.length;n++){let i=this.buckets[n];i&&(this.buckets[n]=i.slice(0))}this.n=e.n,this.threshold=e.threshold}else this.comparator=e||HHe.DefaultEqualityComparator.INSTANCE,this.buckets=this.createBuckets(r)}getOrAdd(e){return this.n>this.threshold&&this.expand(),this.getOrAddImpl(e)}getOrAddImpl(e){let r=this.getBucket(e),n=this.buckets[r];if(!n)return n=[e],this.buckets[r]=n,this.n++,e;for(let i of n)if(this.comparator.equals(i,e))return i;return n.push(e),this.n++,e}get(e){if(e==null)return e;let r=this.getBucket(e),n=this.buckets[r];if(n){for(let i of n)if(this.comparator.equals(i,e))return i}}getBucket(e){return this.comparator.hashCode(e)&this.buckets.length-1}hashCode(){let e=oQ.MurmurHash.initialize();for(let r of this.buckets)if(r!=null)for(let n of r){if(n==null)break;e=oQ.MurmurHash.update(e,this.comparator.hashCode(n))}return e=oQ.MurmurHash.finish(e,this.size),e}equals(e){return e===this?!0:!(e instanceof t)||e.size!==this.size?!1:this.containsAll(e)}expand(){let e=this.buckets,r=this.buckets.length*2,n=this.createBuckets(r);this.buckets=n,this.threshold=Math.floor(r*aQ);let i=this.size;for(let s of e)if(s)for(let o of s){let a=this.getBucket(o),u=this.buckets[a];u||(u=[],this.buckets[a]=u),u.push(o)}jHe(this.n===i)}add(e){return this.getOrAdd(e)===e}get size(){return this.n}get isEmpty(){return this.n===0}contains(e){return this.containsFast(this.asElementType(e))}containsFast(e){return e==null?!1:this.get(e)!=null}*[Symbol.iterator](){yield*this.toArray()}toArray(){let e=new Array(this.size),r=0;for(let n of this.buckets)if(n!=null)for(let i of n){if(i==null)break;e[r++]=i}return e}containsAll(e){if(e instanceof t){let r=e;for(let n of r.buckets)if(n!=null)for(let i of n){if(i==null)break;if(!this.containsFast(this.asElementType(i)))return!1}}else for(let r of e)if(!this.containsFast(this.asElementType(r)))return!1;return!0}addAll(e){let r=!1;for(let n of e)this.getOrAdd(n)!==n&&(r=!0);return r}clear(){this.buckets=this.createBuckets(BF),this.n=0,this.threshold=Math.floor(BF*aQ)}toString(){if(this.size===0)return"{}";let e="{",r=!0;for(let n of this.buckets)if(n!=null)for(let i of n){if(i==null)break;r?r=!1:e+=", ",e+=i.toString()}return e+="}",e}toTableString(){let e="";for(let r of this.buckets){if(r==null){e+=`null
`;continue}e+="[";let n=!0;for(let i of r)n?n=!1:e+=" ",i==null?e+="_":e+=i.toString();e+=`]
`}return e}asElementType(e){return e}createBuckets(e){return new Array(e)}};Cs([Rs.NotNull],Jn.prototype,"comparator",void 0);Cs([Rs.Override],Jn.prototype,"hashCode",null);Cs([Rs.Override],Jn.prototype,"equals",null);Cs([Rs.Override],Jn.prototype,"add",null);Cs([Rs.Override],Jn.prototype,"size",null);Cs([Rs.Override],Jn.prototype,"isEmpty",null);Cs([Rs.Override],Jn.prototype,"contains",null);Cs([$He(0,Rs.Nullable)],Jn.prototype,"containsFast",null);Cs([Rs.Override],Jn.prototype,Symbol.iterator,null);Cs([Rs.Override],Jn.prototype,"toArray",null);Cs([Rs.Override],Jn.prototype,"containsAll",null);Cs([Rs.Override],Jn.prototype,"addAll",null);Cs([Rs.Override],Jn.prototype,"clear",null);Cs([Rs.Override],Jn.prototype,"toString",null);Cs([Rs.SuppressWarnings("unchecked")],Jn.prototype,"asElementType",null);Cs([Rs.SuppressWarnings("unchecked")],Jn.prototype,"createBuckets",null);Hd.Array2DHashSet=Jn});var v5=v(by=>{"use strict";var fpe=by&&by.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(by,"__esModule",{value:!0});by.ArrayEqualityComparator=void 0;var xpe=re(),zHe=an(),GHe=Pl(),z1=class{hashCode(e){return e==null?0:zHe.MurmurHash.hashCode(e,0)}equals(e,r){if(e==null)return r==null;if(r==null||e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!GHe.ObjectEqualityComparator.INSTANCE.equals(e[n],r[n]))return!1;return!0}};z1.INSTANCE=new z1;fpe([xpe.Override],z1.prototype,"hashCode",null);fpe([xpe.Override],z1.prototype,"equals",null);by.ArrayEqualityComparator=z1});var ka=v(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.toCharArray=Nu.toMap=Nu.equals=Nu.join=Nu.escapeWhitespace=void 0;function QHe(t,e){return e?t.replace(/ /,"\xB7"):t.replace(/\t/,"\\t").replace(/\n/,"\\n").replace(/\r/,"\\r")}Nu.escapeWhitespace=QHe;function VHe(t,e){let r="",n=!0;for(let i of t)n?n=!1:r+=e,r+=i;return r}Nu.join=VHe;function WHe(t,e){return t===e?!0:t===void 0||e===void 0?!1:t.equals(e)}Nu.equals=WHe;function YHe(t){let e=new Map;for(let r=0;r<t.length;r++)e.set(t[r],r);return e}Nu.toMap=YHe;function KHe(t){if(typeof t=="string"){let e=new Uint16Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}else return t.toCharArray()}Nu.toCharArray=KHe});var Q1=v(sc=>{"use strict";var Pr=sc&&sc.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},qF=sc&&sc.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(sc,"__esModule",{value:!0});sc.SemanticContext=void 0;var dpe=Xf(),hpe=v5(),G1=an(),br=re(),ppe=Pl(),mpe=ka();function XHe(t){let e;for(let r of t){if(e===void 0){e=r;continue}e.compareTo(r)<0&&(e=r)}return e}function JHe(t){let e;for(let r of t){if(e===void 0){e=r;continue}e.compareTo(r)>0&&(e=r)}return e}var jF=class t{static get NONE(){return t._NONE===void 0&&(t._NONE=new t.Predicate),t._NONE}evalPrecedence(e,r){return this}static and(e,r){if(!e||e===t.NONE)return r;if(r===t.NONE)return e;let n=new t.AND(e,r);return n.opnds.length===1?n.opnds[0]:n}static or(e,r){if(!e)return r;if(e===t.NONE||r===t.NONE)return t.NONE;let n=new t.OR(e,r);return n.opnds.length===1?n.opnds[0]:n}};sc.SemanticContext=jF;(function(t){function n(l){let c=[];for(let f=0;f<l.length;f++){let x=l[f];x instanceof t.PrecedencePredicate&&(c.push(x),l.splice(f,1),f--)}return c}class i extends t{constructor(c=-1,f=-1,x=!1){super(),this.ruleIndex=c,this.predIndex=f,this.isCtxDependent=x}eval(c,f){let x=this.isCtxDependent?f:void 0;return c.sempred(x,this.ruleIndex,this.predIndex)}hashCode(){let c=G1.MurmurHash.initialize();return c=G1.MurmurHash.update(c,this.ruleIndex),c=G1.MurmurHash.update(c,this.predIndex),c=G1.MurmurHash.update(c,this.isCtxDependent?1:0),c=G1.MurmurHash.finish(c,3),c}equals(c){return c instanceof i?this===c?!0:this.ruleIndex===c.ruleIndex&&this.predIndex===c.predIndex&&this.isCtxDependent===c.isCtxDependent:!1}toString(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"}}Pr([br.Override],i.prototype,"eval",null),Pr([br.Override],i.prototype,"hashCode",null),Pr([br.Override],i.prototype,"equals",null),Pr([br.Override],i.prototype,"toString",null),t.Predicate=i;class s extends t{constructor(c){super(),this.precedence=c}eval(c,f){return c.precpred(f,this.precedence)}evalPrecedence(c,f){if(c.precpred(f,this.precedence))return t.NONE}compareTo(c){return this.precedence-c.precedence}hashCode(){let c=1;return c=31*c+this.precedence,c}equals(c){return c instanceof s?this===c?!0:this.precedence===c.precedence:!1}toString(){return"{"+this.precedence+">=prec}?"}}Pr([br.Override],s.prototype,"eval",null),Pr([br.Override],s.prototype,"evalPrecedence",null),Pr([br.Override],s.prototype,"compareTo",null),Pr([br.Override],s.prototype,"hashCode",null),Pr([br.Override],s.prototype,"equals",null),Pr([br.Override],s.prototype,"toString",null),t.PrecedencePredicate=s;class o extends t{}t.Operator=o;let a=class UF extends o{constructor(c,f){super();let x=new dpe.Array2DHashSet(ppe.ObjectEqualityComparator.INSTANCE);c instanceof UF?x.addAll(c.opnds):x.add(c),f instanceof UF?x.addAll(f.opnds):x.add(f),this.opnds=x.toArray();let d=n(this.opnds),h=JHe(d);h&&this.opnds.push(h)}get operands(){return this.opnds}equals(c){return this===c?!0:c instanceof UF?hpe.ArrayEqualityComparator.INSTANCE.equals(this.opnds,c.opnds):!1}hashCode(){return G1.MurmurHash.hashCode(this.opnds,40363613)}eval(c,f){for(let x of this.opnds)if(!x.eval(c,f))return!1;return!0}evalPrecedence(c,f){let x=!1,d=[];for(let p of this.opnds){let m=p.evalPrecedence(c,f);if(x=x||m!==p,m==null)return;m!==t.NONE&&d.push(m)}if(!x)return this;if(d.length===0)return t.NONE;let h=d[0];for(let p=1;p<d.length;p++)h=t.and(h,d[p]);return h}toString(){return mpe.join(this.opnds,"&&")}};Pr([br.Override],a.prototype,"operands",null),Pr([br.Override],a.prototype,"equals",null),Pr([br.Override],a.prototype,"hashCode",null),Pr([br.Override],a.prototype,"eval",null),Pr([br.Override],a.prototype,"evalPrecedence",null),Pr([br.Override],a.prototype,"toString",null),a=Pr([qF(0,br.NotNull),qF(1,br.NotNull)],a),t.AND=a;let u=class $F extends o{constructor(c,f){super();let x=new dpe.Array2DHashSet(ppe.ObjectEqualityComparator.INSTANCE);c instanceof $F?x.addAll(c.opnds):x.add(c),f instanceof $F?x.addAll(f.opnds):x.add(f),this.opnds=x.toArray();let d=n(this.opnds),h=XHe(d);h&&this.opnds.push(h)}get operands(){return this.opnds}equals(c){return this===c?!0:c instanceof $F?hpe.ArrayEqualityComparator.INSTANCE.equals(this.opnds,c.opnds):!1}hashCode(){return G1.MurmurHash.hashCode(this.opnds,486279973)}eval(c,f){for(let x of this.opnds)if(x.eval(c,f))return!0;return!1}evalPrecedence(c,f){let x=!1,d=[];for(let p of this.opnds){let m=p.evalPrecedence(c,f);if(x=x||m!==p,m===t.NONE)return t.NONE;m&&d.push(m)}if(!x)return this;if(d.length===0)return;let h=d[0];for(let p=1;p<d.length;p++)h=t.or(h,d[p]);return h}toString(){return mpe.join(this.opnds,"||")}};Pr([br.Override],u.prototype,"operands",null),Pr([br.Override],u.prototype,"equals",null),Pr([br.Override],u.prototype,"hashCode",null),Pr([br.Override],u.prototype,"eval",null),Pr([br.Override],u.prototype,"evalPrecedence",null),Pr([br.Override],u.prototype,"toString",null),u=Pr([qF(0,br.NotNull),qF(1,br.NotNull)],u),t.OR=u})(jF=sc.SemanticContext||(sc.SemanticContext={}))});var uQ=v(zd=>{"use strict";var _5=zd&&zd.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},ZHe=zd&&zd.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(zd,"__esModule",{value:!0});zd.PredicateTransition=void 0;var eze=kF(),Ty=re(),tze=Q1(),V1=class extends eze.AbstractPredicateTransition{constructor(e,r,n,i){super(e),this.ruleIndex=r,this.predIndex=n,this.isCtxDependent=i}get serializationType(){return 4}get isEpsilon(){return!0}matches(e,r,n){return!1}get predicate(){return new tze.SemanticContext.Predicate(this.ruleIndex,this.predIndex,this.isCtxDependent)}toString(){return"pred_"+this.ruleIndex+":"+this.predIndex}};_5([Ty.Override],V1.prototype,"serializationType",null);_5([Ty.Override],V1.prototype,"isEpsilon",null);_5([Ty.Override],V1.prototype,"matches",null);_5([Ty.Override,Ty.NotNull],V1.prototype,"toString",null);V1=_5([ZHe(0,Ty.NotNull)],V1);zd.PredicateTransition=V1});var Cy=v(Gd=>{"use strict";var gpe=Gd&&Gd.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},rze=Gd&&Gd.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Gd,"__esModule",{value:!0});Gd.FailedPredicateException=void 0;var nze=ic(),ype=re(),ize=uQ(),HF=class Epe extends nze.RecognitionException{constructor(e,r,n){super(e,e.inputStream,e.context,Epe.formatMessage(r,n));let s=e.interpreter.atn.states[e.state].transition(0);s instanceof ize.PredicateTransition?(this._ruleIndex=s.ruleIndex,this._predicateIndex=s.predIndex):(this._ruleIndex=0,this._predicateIndex=0),this._predicate=r,super.setOffendingToken(e,e.currentToken)}get ruleIndex(){return this._ruleIndex}get predicateIndex(){return this._predicateIndex}get predicate(){return this._predicate}static formatMessage(e,r){return r||`failed predicate: {${e}}?`}};gpe([ype.NotNull],HF,"formatMessage",null);HF=gpe([rze(0,ype.NotNull)],HF);Gd.FailedPredicateException=HF});var b5=v(Qd=>{"use strict";var sze=Qd&&Qd.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},oze=Qd&&Qd.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Qd,"__esModule",{value:!0});Qd.InputMismatchException=void 0;var aze=ic(),uze=re(),lQ=class extends aze.RecognitionException{constructor(e,r,n){n===void 0&&(n=e.context),super(e,e.inputStream,n),r!==void 0&&this.setOffendingState(r),this.setOffendingToken(e,e.currentToken)}};lQ=sze([oze(0,uze.NotNull)],lQ);Qd.InputMismatchException=lQ});var zF=v(T5=>{"use strict";Object.defineProperty(T5,"__esModule",{value:!0});T5.Arrays=void 0;var lze;(function(t){function e(i,s,o,a){return r(i,o!==void 0?o:0,a!==void 0?a:i.length,s)}t.binarySearch=e;function r(i,s,o,a){let u=s,l=o-1;for(;u<=l;){let c=u+l>>>1,f=i[c];if(f<a)u=c+1;else if(f>a)l=c-1;else return c}return-(u+1)}function n(i){let s="[",o=!0;for(let a of i)o?o=!1:s+=", ",a===null?s+="null":a===void 0?s+="undefined":s+=a;return s+="]",s}t.toString=n})(lze=T5.Arrays||(T5.Arrays={}))});var VF=v(Ry=>{"use strict";var GF=Ry&&Ry.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(Ry,"__esModule",{value:!0});Ry.IntegerList=void 0;var cze=zF(),QF=re(),cQ=new Int32Array(0),fze=4,fQ=(1<<31>>>0)-1-8,W1=class t{constructor(e){if(!e)this._data=cQ,this._size=0;else if(e instanceof t)this._data=e._data.slice(0),this._size=e._size;else if(typeof e=="number")e===0?(this._data=cQ,this._size=0):(this._data=new Int32Array(e),this._size=0);else{this._data=cQ,this._size=0;for(let r of e)this.add(r)}}add(e){this._data.length===this._size&&this.ensureCapacity(this._size+1),this._data[this._size]=e,this._size++}addAll(e){if(Array.isArray(e))this.ensureCapacity(this._size+e.length),this._data.subarray(this._size,this._size+e.length).set(e),this._size+=e.length;else if(e instanceof t)this.ensureCapacity(this._size+e._size),this._data.subarray(this._size,this._size+e.size).set(e._data),this._size+=e._size;else{this.ensureCapacity(this._size+e.size);let r=0;for(let n of e)this._data[this._size+r]=n,r++;this._size+=e.size}}get(e){if(e<0||e>=this._size)throw RangeError();return this._data[e]}contains(e){for(let r=0;r<this._size;r++)if(this._data[r]===e)return!0;return!1}set(e,r){if(e<0||e>=this._size)throw RangeError();let n=this._data[e];return this._data[e]=r,n}removeAt(e){let r=this.get(e);return this._data.copyWithin(e,e+1,this._size),this._data[this._size-1]=0,this._size--,r}removeRange(e,r){if(e<0||r<0||e>this._size||r>this._size||e>r)throw RangeError();this._data.copyWithin(r,e,this._size),this._data.fill(0,this._size-(r-e),this._size),this._size-=r-e}get isEmpty(){return this._size===0}get size(){return this._size}trimToSize(){this._data.length!==this._size&&(this._data=this._data.slice(0,this._size))}clear(){this._data.fill(0,0,this._size),this._size=0}toArray(){return this._size===0?[]:Array.from(this._data.subarray(0,this._size))}sort(){this._data.subarray(0,this._size).sort()}equals(e){if(e===this)return!0;if(!(e instanceof t)||this._size!==e._size)return!1;for(let r=0;r<this._size;r++)if(this._data[r]!==e._data[r])return!1;return!0}hashCode(){let e=1;for(let r=0;r<this._size;r++)e=31*e+this._data[r];return e}toString(){return this._data.toString()}binarySearch(e,r,n){if(r===void 0&&(r=0),n===void 0&&(n=this._size),r<0||n<0||r>this._size||n>this._size)throw new RangeError;if(r>n)throw new RangeError;return cze.Arrays.binarySearch(this._data,e,r,n)}ensureCapacity(e){if(e<0||e>fQ)throw new RangeError;let r;for(this._data.length===0?r=fze:r=this._data.length;r<e;)r=r*2,(r<0||r>fQ)&&(r=fQ);let n=new Int32Array(r);n.set(this._data),this._data=n}toCharArray(){let e=new Uint16Array(this._size),r=0,n=!1;for(let i=0;i<this._size;i++){let s=this._data[i];if(s>=0&&s<65536){e[r]=s,r++;continue}if(!n){let a=new Uint16Array(this.charArraySize());a.set(e,0),e=a,n=!0}let o=String.fromCodePoint(s);e[r]=o.charCodeAt(0),e[r+1]=o.charCodeAt(1),r+=2}return e}charArraySize(){let e=0;for(let r=0;r<this._size;r++)e+=this._data[r]>=65536?2:1;return e}};GF([QF.NotNull],W1.prototype,"_data",void 0);GF([QF.Override],W1.prototype,"equals",null);GF([QF.Override],W1.prototype,"hashCode",null);GF([QF.Override],W1.prototype,"toString",null);Ry.IntegerList=W1});var Os=v(Oy=>{"use strict";var xQ=Oy&&Oy.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(Oy,"__esModule",{value:!0});Oy.Interval=void 0;var dQ=re(),Ape=1e3,Jf=class t{constructor(e,r){this.a=e,this.b=r}static get INVALID(){return t._INVALID}static of(e,r){return e!==r||e<0||e>Ape?new t(e,r):(t.cache[e]==null&&(t.cache[e]=new t(e,e)),t.cache[e])}get length(){return this.b<this.a?0:this.b-this.a+1}equals(e){return e===this?!0:e instanceof t?this.a===e.a&&this.b===e.b:!1}hashCode(){let e=23;return e=e*31+this.a,e=e*31+this.b,e}startsBeforeDisjoint(e){return this.a<e.a&&this.b<e.a}startsBeforeNonDisjoint(e){return this.a<=e.a&&this.b>=e.a}startsAfter(e){return this.a>e.a}startsAfterDisjoint(e){return this.a>e.b}startsAfterNonDisjoint(e){return this.a>e.a&&this.a<=e.b}disjoint(e){return this.startsBeforeDisjoint(e)||this.startsAfterDisjoint(e)}adjacent(e){return this.a===e.b+1||this.b===e.a-1}properlyContains(e){return e.a>=this.a&&e.b<=this.b}union(e){return t.of(Math.min(this.a,e.a),Math.max(this.b,e.b))}intersection(e){return t.of(Math.max(this.a,e.a),Math.min(this.b,e.b))}differenceNotProperlyContained(e){let r;return e.startsBeforeNonDisjoint(this)?r=t.of(Math.max(this.a,e.b+1),this.b):e.startsAfterNonDisjoint(this)&&(r=t.of(this.a,e.a-1)),r}toString(){return this.a+".."+this.b}};Jf._INVALID=new Jf(-1,-2);Jf.cache=new Array(Ape+1);xQ([dQ.Override],Jf.prototype,"equals",null);xQ([dQ.Override],Jf.prototype,"hashCode",null);xQ([dQ.Override],Jf.prototype,"toString",null);Oy.Interval=Jf});var gr=v(C5=>{"use strict";Object.defineProperty(C5,"__esModule",{value:!0});C5.Token=void 0;var xze=Yf(),dze;(function(t){t.INVALID_TYPE=0,t.EPSILON=-2,t.MIN_USER_TOKEN_TYPE=1,t.EOF=xze.IntStream.EOF,t.DEFAULT_CHANNEL=0,t.HIDDEN_CHANNEL=1,t.MIN_USER_CHANNEL_VALUE=2})(dze=C5.Token||(C5.Token={}))});var Dy=v(Vd=>{"use strict";var Ko=Vd&&Vd.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},vpe=Vd&&Vd.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Vd,"__esModule",{value:!0});Vd.CommonToken=void 0;var hze=Os(),Xo=re(),Spe=gr(),ns=class R5{constructor(e,r,n=R5.EMPTY_SOURCE,i=Spe.Token.DEFAULT_CHANNEL,s=0,o=0){this._line=0,this._charPositionInLine=-1,this._channel=Spe.Token.DEFAULT_CHANNEL,this.index=-1,this._text=r,this._type=e,this.source=n,this._channel=i,this.start=s,this.stop=o,n.source!=null&&(this._line=n.source.line,this._charPositionInLine=n.source.charPositionInLine)}static fromToken(e){let r=new R5(e.type,void 0,R5.EMPTY_SOURCE,e.channel,e.startIndex,e.stopIndex);return r._line=e.line,r.index=e.tokenIndex,r._charPositionInLine=e.charPositionInLine,e instanceof R5?(r._text=e._text,r.source=e.source):(r._text=e.text,r.source={source:e.tokenSource,stream:e.inputStream}),r}get type(){return this._type}set type(e){this._type=e}get line(){return this._line}set line(e){this._line=e}get text(){if(this._text!=null)return this._text;let e=this.inputStream;if(e==null)return;let r=e.size;return this.start<r&&this.stop<r?e.getText(hze.Interval.of(this.start,this.stop)):"<EOF>"}set text(e){this._text=e}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(e){this._charPositionInLine=e}get channel(){return this._channel}set channel(e){this._channel=e}get startIndex(){return this.start}set startIndex(e){this.start=e}get stopIndex(){return this.stop}set stopIndex(e){this.stop=e}get tokenIndex(){return this.index}set tokenIndex(e){this.index=e}get tokenSource(){return this.source.source}get inputStream(){return this.source.stream}toString(e){let r="";this._channel>0&&(r=",channel="+this._channel);let n=this.text;n!=null?(n=n.replace(/\n/g,"\\n"),n=n.replace(/\r/g,"\\r"),n=n.replace(/\t/g,"\\t")):n="<no text>";let i=String(this._type);return e&&(i=e.vocabulary.getDisplayName(this._type)),"[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+n+"',<"+i+">"+r+","+this._line+":"+this.charPositionInLine+"]"}};ns.EMPTY_SOURCE={source:void 0,stream:void 0};Ko([Xo.NotNull],ns.prototype,"source",void 0);Ko([Xo.Override],ns.prototype,"type",null);Ko([Xo.Override],ns.prototype,"line",null);Ko([Xo.Override],ns.prototype,"text",null);Ko([Xo.Override],ns.prototype,"charPositionInLine",null);Ko([Xo.Override],ns.prototype,"channel",null);Ko([Xo.Override],ns.prototype,"startIndex",null);Ko([Xo.Override],ns.prototype,"stopIndex",null);Ko([Xo.Override],ns.prototype,"tokenIndex",null);Ko([Xo.Override],ns.prototype,"tokenSource",null);Ko([Xo.Override],ns.prototype,"inputStream",null);Ko([Xo.Override],ns.prototype,"toString",null);Ko([vpe(0,Xo.NotNull)],ns,"fromToken",null);ns=Ko([vpe(2,Xo.NotNull)],ns);Vd.CommonToken=ns});var WF=v(Wd=>{"use strict";var bpe=Wd&&Wd.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(Wd,"__esModule",{value:!0});Wd.CommonTokenFactory=void 0;var _pe=Dy(),pze=Os(),Tpe=re(),Ny=class{constructor(e=!1){this.copyText=e}create(e,r,n,i,s,o,a,u){let l=new _pe.CommonToken(r,n,e,i,s,o);return l.line=a,l.charPositionInLine=u,n==null&&this.copyText&&e.stream!=null&&(l.text=e.stream.getText(pze.Interval.of(s,o))),l}createSimple(e,r){return new _pe.CommonToken(e,r)}};bpe([Tpe.Override],Ny.prototype,"create",null);bpe([Tpe.Override],Ny.prototype,"createSimple",null);Wd.CommonTokenFactory=Ny;(function(t){t.DEFAULT=new t})(Ny=Wd.CommonTokenFactory||(Wd.CommonTokenFactory={}))});var pQ=v(YF=>{"use strict";Object.defineProperty(YF,"__esModule",{value:!0});YF.IntegerStack=void 0;var mze=VF(),hQ=class extends mze.IntegerList{constructor(e){super(e)}push(e){this.add(e)}pop(){return this.removeAt(this.size-1)}peek(){return this.get(this.size-1)}};YF.IntegerStack=hQ});var gQ=v(KF=>{"use strict";Object.defineProperty(KF,"__esModule",{value:!0});KF.AcceptStateInfo=void 0;var mQ=class{constructor(e,r){this._prediction=e,this._lexerActionExecutor=r}get prediction(){return this._prediction}get lexerActionExecutor(){return this._lexerActionExecutor}};KF.AcceptStateInfo=mQ});var Y1=v(XF=>{"use strict";Object.defineProperty(XF,"__esModule",{value:!0});XF.Array2DHashMap=void 0;var Cpe=Xf(),yQ=class{constructor(e){this.keyComparator=e}hashCode(e){return this.keyComparator.hashCode(e.key)}equals(e,r){return this.keyComparator.equals(e.key,r.key)}},EQ=class t{constructor(e){e instanceof t?this.backingStore=new Cpe.Array2DHashSet(e.backingStore):this.backingStore=new Cpe.Array2DHashSet(new yQ(e))}clear(){this.backingStore.clear()}containsKey(e){return this.backingStore.contains({key:e})}get(e){let r=this.backingStore.get({key:e});if(r)return r.value}get isEmpty(){return this.backingStore.isEmpty}put(e,r){let n=this.backingStore.get({key:e,value:r}),i;return n?(i=n.value,n.value=r):this.backingStore.add({key:e,value:r}),i}putIfAbsent(e,r){let n=this.backingStore.get({key:e,value:r}),i;return n?i=n.value:this.backingStore.add({key:e,value:r}),i}get size(){return this.backingStore.size}hashCode(){return this.backingStore.hashCode()}equals(e){return e instanceof t?this.backingStore.equals(e.backingStore):!1}};XF.Array2DHashMap=EQ});var Yd=v(JF=>{"use strict";Object.defineProperty(JF,"__esModule",{value:!0});JF.DecisionState=void 0;var gze=nc(),AQ=class extends gze.ATNState{constructor(){super(...arguments),this.decision=-1,this.nonGreedy=!1,this.sll=!1}};JF.DecisionState=AQ});var tw=v(Kd=>{"use strict";var ZF=Kd&&Kd.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(Kd,"__esModule",{value:!0});Kd.PredictionContextCache=void 0;var SQ=Y1(),ew=re(),vQ=Pl(),Rpe=Fu(),Ope=Ts(),Fy=class t{constructor(e=!0){this.contexts=new SQ.Array2DHashMap(vQ.ObjectEqualityComparator.INSTANCE),this.childContexts=new SQ.Array2DHashMap(vQ.ObjectEqualityComparator.INSTANCE),this.joinContexts=new SQ.Array2DHashMap(vQ.ObjectEqualityComparator.INSTANCE),this.enableCache=e}getAsCached(e){if(!this.enableCache)return e;let r=this.contexts.get(e);return r||(r=e,this.contexts.put(e,e)),r}getChild(e,r){if(!this.enableCache)return e.getChild(r);let n=new t.PredictionContextAndInt(e,r),i=this.childContexts.get(n);return i||(i=e.getChild(r),i=this.getAsCached(i),this.childContexts.put(n,i)),i}join(e,r){if(!this.enableCache)return Rpe.PredictionContext.join(e,r,this);let n=new t.IdentityCommutativePredictionContextOperands(e,r),i=this.joinContexts.get(n);return i||(i=Rpe.PredictionContext.join(e,r,this),i=this.getAsCached(i),this.joinContexts.put(n,i),i)}};Kd.PredictionContextCache=Fy;Fy.UNCACHED=new Fy(!1);(function(t){class e{constructor(i,s){this.obj=i,this.value=s}equals(i){if(i instanceof e){if(i===this)return!0}else return!1;let s=i;return this.value===s.value&&(this.obj===s.obj||this.obj!=null&&this.obj.equals(s.obj))}hashCode(){let i=5;return i=7*i+(this.obj!=null?this.obj.hashCode():0),i=7*i+this.value,i}}ZF([ew.Override],e.prototype,"equals",null),ZF([ew.Override],e.prototype,"hashCode",null),t.PredictionContextAndInt=e;class r{constructor(i,s){Ope(i!=null),Ope(s!=null),this._x=i,this._y=s}get x(){return this._x}get y(){return this._y}equals(i){if(i instanceof r){if(this===i)return!0}else return!1;let s=i;return this._x===s._x&&this._y===s._y||this._x===s._y&&this._y===s._x}hashCode(){return this._x.hashCode()^this._y.hashCode()}}ZF([ew.Override],r.prototype,"equals",null),ZF([ew.Override],r.prototype,"hashCode",null),t.IdentityCommutativePredictionContextOperands=r})(Fy=Kd.PredictionContextCache||(Kd.PredictionContextCache={}))});var Fu=v(wu=>{"use strict";var ht=wu&&wu.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},Xd=wu&&wu.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(wu,"__esModule",{value:!0});wu.SingletonPredictionContext=wu.PredictionContext=void 0;var yze=Y1(),Eze=Xf(),Aze=zF(),oc=an(),at=re(),Dpe=tw(),rw=Ts(),_Q=1,Qr=class t{constructor(e){this.cachedHashCode=e}static calculateEmptyHashCode(){let e=oc.MurmurHash.initialize(_Q);return e=oc.MurmurHash.finish(e,0),e}static calculateSingleHashCode(e,r){let n=oc.MurmurHash.initialize(_Q);return n=oc.MurmurHash.update(n,e),n=oc.MurmurHash.update(n,r),n=oc.MurmurHash.finish(n,2),n}static calculateHashCode(e,r){let n=oc.MurmurHash.initialize(_Q);for(let i of e)n=oc.MurmurHash.update(n,i);for(let i of r)n=oc.MurmurHash.update(n,i);return n=oc.MurmurHash.finish(n,2*e.length),n}static fromRuleContext(e,r,n=!0){if(r.isEmpty)return n?t.EMPTY_FULL:t.EMPTY_LOCAL;let i;r._parent?i=t.fromRuleContext(e,r._parent,n):i=n?t.EMPTY_FULL:t.EMPTY_LOCAL;let o=e.states[r.invokingState].transition(0);return i.getChild(o.followState.stateNumber)}static addEmptyContext(e){return e.addEmptyContext()}static removeEmptyContext(e){return e.removeEmptyContext()}static join(e,r,n=Dpe.PredictionContextCache.UNCACHED){if(e===r)return e;if(e.isEmpty)return t.isEmptyLocal(e)?e:t.addEmptyContext(r);if(r.isEmpty)return t.isEmptyLocal(r)?r:t.addEmptyContext(e);let i=e.size,s=r.size;if(i===1&&s===1&&e.getReturnState(0)===r.getReturnState(0)){let d=n.join(e.getParent(0),r.getParent(0));return d===e.getParent(0)?e:d===r.getParent(0)?r:d.getChild(e.getReturnState(0))}let o=0,a=new Array(i+s),u=new Array(a.length),l=0,c=0,f=!0,x=!0;for(;l<i&&c<s;)e.getReturnState(l)===r.getReturnState(c)?(a[o]=n.join(e.getParent(l),r.getParent(c)),u[o]=e.getReturnState(l),f=f&&a[o]===e.getParent(l),x=x&&a[o]===r.getParent(c),l++,c++):e.getReturnState(l)<r.getReturnState(c)?(a[o]=e.getParent(l),u[o]=e.getReturnState(l),x=!1,l++):(rw(r.getReturnState(c)<e.getReturnState(l)),a[o]=r.getParent(c),u[o]=r.getReturnState(c),f=!1,c++),o++;for(;l<i;)a[o]=e.getParent(l),u[o]=e.getReturnState(l),l++,x=!1,o++;for(;c<s;)a[o]=r.getParent(c),u[o]=r.getReturnState(c),c++,f=!1,o++;return f?e:x?r:(o<a.length&&(a=a.slice(0,o),u=u.slice(0,o)),a.length===0?t.EMPTY_FULL:a.length===1?new Zn(a[0],u[0]):new is(a,u))}static isEmptyLocal(e){return e===t.EMPTY_LOCAL}static getCachedContext(e,r,n){if(e.isEmpty)return e;let i=n.get(e);if(i)return i;if(i=r.get(e),i)return n.put(e,i),i;let s=!1,o=new Array(e.size);for(let u=0;u<o.length;u++){let l=t.getCachedContext(e.getParent(u),r,n);if(s||l!==e.getParent(u)){if(!s){o=new Array(e.size);for(let c=0;c<e.size;c++)o[c]=e.getParent(c);s=!0}o[u]=l}}if(!s)return i=r.putIfAbsent(e,e),n.put(e,i??e),e;let a;if(o.length===1)a=new Zn(o[0],e.getReturnState(0));else{let u=new Array(e.size);for(let l=0;l<e.size;l++)u[l]=e.getReturnState(l);a=new is(o,u,e.hashCode())}return i=r.putIfAbsent(a,a),n.put(a,i||a),n.put(e,i||a),a}appendSingleContext(e,r){return this.appendContext(t.EMPTY_FULL.getChild(e),r)}getChild(e){return new Zn(this,e)}hashCode(){return this.cachedHashCode}toStrings(e,r,n=t.EMPTY_FULL){let i=[];e:for(let s=0;;s++){let o=0,a=!0,u=this,l=r,c="";for(c+="[";!u.isEmpty&&u!==n;){let f=0;if(u.size>0){let x=1;for(;1<<x>>>0<u.size;)x++;let d=(1<<x>>>0)-1;if(f=s>>o&d,a=a&&f>=u.size-1,f>=u.size)continue e;o+=x}if(e){c.length>1&&(c+=" ");let d=e.atn.states[l],h=e.ruleNames[d.ruleIndex];c+=h}else u.getReturnState(f)!==t.EMPTY_FULL_STATE_KEY&&(u.isEmpty||(c.length>1&&(c+=" "),c+=u.getReturnState(f)));l=u.getReturnState(f),u=u.getParent(f)}if(c+="]",i.push(c),a)break}return i}};ht([at.Override],Qr.prototype,"hashCode",null);ht([Xd(0,at.NotNull),Xd(1,at.NotNull),Xd(2,at.NotNull)],Qr,"join",null);ht([Xd(0,at.NotNull),Xd(1,at.NotNull),Xd(2,at.NotNull)],Qr,"getCachedContext",null);wu.PredictionContext=Qr;var Ds=class extends Qr{constructor(e){super(Qr.calculateEmptyHashCode()),this.fullContext=e}get isFullContext(){return this.fullContext}addEmptyContext(){return this}removeEmptyContext(){throw new Error("Cannot remove the empty context from itself.")}getParent(e){throw new Error("index out of bounds")}getReturnState(e){throw new Error("index out of bounds")}findReturnState(e){return-1}get size(){return 0}appendSingleContext(e,r){return r.getChild(this,e)}appendContext(e,r){return e}get isEmpty(){return!0}get hasEmpty(){return!0}equals(e){return this===e}toStrings(e,r,n){return["[]"]}};ht([at.Override],Ds.prototype,"addEmptyContext",null);ht([at.Override],Ds.prototype,"removeEmptyContext",null);ht([at.Override],Ds.prototype,"getParent",null);ht([at.Override],Ds.prototype,"getReturnState",null);ht([at.Override],Ds.prototype,"findReturnState",null);ht([at.Override],Ds.prototype,"size",null);ht([at.Override],Ds.prototype,"appendSingleContext",null);ht([at.Override],Ds.prototype,"appendContext",null);ht([at.Override],Ds.prototype,"isEmpty",null);ht([at.Override],Ds.prototype,"hasEmpty",null);ht([at.Override],Ds.prototype,"equals",null);ht([at.Override],Ds.prototype,"toStrings",null);var is=class K1 extends Qr{constructor(e,r,n){super(n||Qr.calculateHashCode(e,r)),rw(e.length===r.length),rw(r.length>1||r[0]!==Qr.EMPTY_FULL_STATE_KEY,"Should be using PredictionContext.EMPTY instead."),this.parents=e,this.returnStates=r}getParent(e){return this.parents[e]}getReturnState(e){return this.returnStates[e]}findReturnState(e){return Aze.Arrays.binarySearch(this.returnStates,e)}get size(){return this.returnStates.length}get isEmpty(){return!1}get hasEmpty(){return this.returnStates[this.returnStates.length-1]===Qr.EMPTY_FULL_STATE_KEY}addEmptyContext(){if(this.hasEmpty)return this;let e=this.parents.slice(0),r=this.returnStates.slice(0);return e.push(Qr.EMPTY_FULL),r.push(Qr.EMPTY_FULL_STATE_KEY),new K1(e,r)}removeEmptyContext(){if(!this.hasEmpty)return this;if(this.returnStates.length===2)return new Zn(this.parents[0],this.returnStates[0]);{let e=this.parents.slice(0,this.parents.length-1),r=this.returnStates.slice(0,this.returnStates.length-1);return new K1(e,r)}}appendContext(e,r){return K1.appendContextImpl(this,e,new Qr.IdentityHashMap)}static appendContextImpl(e,r,n){if(r.isEmpty){if(Qr.isEmptyLocal(r)){if(e.hasEmpty)return Qr.EMPTY_LOCAL;throw new Error("what to do here?")}return e}if(r.size!==1)throw new Error("Appending a tree suffix is not yet supported.");let i=n.get(e);if(!i){if(e.isEmpty)i=r;else{let s=e.size;e.hasEmpty&&s--;let o=new Array(s),a=new Array(s);for(let u=0;u<s;u++)a[u]=e.getReturnState(u);for(let u=0;u<s;u++)o[u]=K1.appendContextImpl(e.getParent(u),r,n);o.length===1?i=new Zn(o[0],a[0]):(rw(o.length>1),i=new K1(o,a)),e.hasEmpty&&(i=Qr.join(i,r))}n.put(e,i)}return i}equals(e){if(this===e)return!0;if(!(e instanceof K1)||this.hashCode()!==e.hashCode())return!1;let r=e;return this.equalsImpl(r,new Eze.Array2DHashSet)}equalsImpl(e,r){let n=[],i=[];for(n.push(this),i.push(e);;){let s=n.pop(),o=i.pop();if(!s||!o)break;let a=new Dpe.PredictionContextCache.IdentityCommutativePredictionContextOperands(s,o);if(!r.add(a))continue;let u=a.x.size;if(u===0){if(!a.x.equals(a.y))return!1;continue}let l=a.y.size;if(u!==l)return!1;for(let c=0;c<u;c++){if(a.x.getReturnState(c)!==a.y.getReturnState(c))return!1;let f=a.x.getParent(c),x=a.y.getParent(c);if(f.hashCode()!==x.hashCode())return!1;f!==x&&(n.push(f),i.push(x))}}return!0}};ht([at.NotNull],is.prototype,"parents",void 0);ht([at.NotNull],is.prototype,"returnStates",void 0);ht([at.Override],is.prototype,"getParent",null);ht([at.Override],is.prototype,"getReturnState",null);ht([at.Override],is.prototype,"findReturnState",null);ht([at.Override],is.prototype,"size",null);ht([at.Override],is.prototype,"isEmpty",null);ht([at.Override],is.prototype,"hasEmpty",null);ht([at.Override],is.prototype,"addEmptyContext",null);ht([at.Override],is.prototype,"removeEmptyContext",null);ht([at.Override],is.prototype,"appendContext",null);ht([at.Override],is.prototype,"equals",null);is=ht([Xd(0,at.NotNull)],is);var Zn=class Npe extends Qr{constructor(e,r){super(Qr.calculateSingleHashCode(e,r)),this.parent=e,this.returnState=r}getParent(e){return this.parent}getReturnState(e){return this.returnState}findReturnState(e){return this.returnState===e?0:-1}get size(){return 1}get isEmpty(){return!1}get hasEmpty(){return!1}appendContext(e,r){return r.getChild(this.parent.appendContext(e,r),this.returnState)}addEmptyContext(){let e=[this.parent,Qr.EMPTY_FULL],r=[this.returnState,Qr.EMPTY_FULL_STATE_KEY];return new is(e,r)}removeEmptyContext(){return this}equals(e){if(e===this)return!0;if(!(e instanceof Npe))return!1;let r=e;return this.hashCode()!==r.hashCode()?!1:this.returnState===r.returnState&&this.parent.equals(r.parent)}};ht([at.NotNull],Zn.prototype,"parent",void 0);ht([at.Override],Zn.prototype,"getParent",null);ht([at.Override],Zn.prototype,"getReturnState",null);ht([at.Override],Zn.prototype,"findReturnState",null);ht([at.Override],Zn.prototype,"size",null);ht([at.Override],Zn.prototype,"isEmpty",null);ht([at.Override],Zn.prototype,"hasEmpty",null);ht([at.Override],Zn.prototype,"appendContext",null);ht([at.Override],Zn.prototype,"addEmptyContext",null);ht([at.Override],Zn.prototype,"removeEmptyContext",null);ht([at.Override],Zn.prototype,"equals",null);Zn=ht([Xd(0,at.NotNull)],Zn);wu.SingletonPredictionContext=Zn;(function(t){t.EMPTY_LOCAL=new Ds(!1),t.EMPTY_FULL=new Ds(!0),t.EMPTY_LOCAL_STATE_KEY=-(1<<31>>>0),t.EMPTY_FULL_STATE_KEY=(1<<31>>>0)-1;class e extends yze.Array2DHashMap{constructor(){super(r.INSTANCE)}}t.IdentityHashMap=e;class r{IdentityEqualityComparator(){}hashCode(i){return i.hashCode()}equals(i,s){return i===s}}r.INSTANCE=new r,ht([at.Override],r.prototype,"hashCode",null),ht([at.Override],r.prototype,"equals",null),t.IdentityEqualityComparator=r})(Qr=wu.PredictionContext||(wu.PredictionContext={}))});var D5=v(Jd=>{"use strict";var Mn=Jd&&Jd.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},Ba=Jd&&Jd.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Jd,"__esModule",{value:!0});Jd.ATNConfig=void 0;var Sze=Y1(),vze=Yd(),Zf=an(),yr=re(),_ze=Pl(),Fpe=Fu(),X1=Q1(),wpe=Ts(),bQ=2147483648,fo=class O5{constructor(e,r,n){typeof r=="number"?(wpe((r&16777215)===r),this._state=e,this.altAndOuterContextDepth=r,this._context=n):(this._state=e,this.altAndOuterContextDepth=r.altAndOuterContextDepth,this._context=n)}static create(e,r,n,i=X1.SemanticContext.NONE,s){return i!==X1.SemanticContext.NONE?s!=null?new Ly(s,i,e,r,n,!1):new J1(i,e,r,n):s!=null?new wy(s,e,r,n,!1):new O5(e,r,n)}get state(){return this._state}get alt(){return this.altAndOuterContextDepth&16777215}get context(){return this._context}set context(e){this._context=e}get reachesIntoOuterContext(){return this.outerContextDepth!==0}get outerContextDepth(){return this.altAndOuterContextDepth>>>24&127}set outerContextDepth(e){wpe(e>=0),e=Math.min(e,127),this.altAndOuterContextDepth=e<<24|(this.altAndOuterContextDepth&-2130706433)>>>0}get lexerActionExecutor(){}get semanticContext(){return X1.SemanticContext.NONE}get hasPassedThroughNonGreedyDecision(){return!1}clone(){return this.transform(this.state,!1)}transform(e,r,n){return n==null?this.transformImpl(e,this._context,this.semanticContext,r,this.lexerActionExecutor):n instanceof Fpe.PredictionContext?this.transformImpl(e,n,this.semanticContext,r,this.lexerActionExecutor):n instanceof X1.SemanticContext?this.transformImpl(e,this._context,n,r,this.lexerActionExecutor):this.transformImpl(e,this._context,this.semanticContext,r,n)}transformImpl(e,r,n,i,s){let o=i&&O5.checkNonGreedyDecision(this,e);return n!==X1.SemanticContext.NONE?s!=null||o?new Ly(s,n,e,this,r,o):new J1(n,e,this,r):s!=null||o?new wy(s,e,this,r,o):new O5(e,this,r)}static checkNonGreedyDecision(e,r){return e.hasPassedThroughNonGreedyDecision||r instanceof vze.DecisionState&&r.nonGreedy}appendContext(e,r){if(typeof e=="number"){let n=this.context.appendSingleContext(e,r);return this.transform(this.state,!1,n)}else{let n=this.context.appendContext(e,r);return this.transform(this.state,!1,n)}}contains(e){if(this.state.stateNumber!==e.state.stateNumber||this.alt!==e.alt||!this.semanticContext.equals(e.semanticContext))return!1;let r=[],n=[];for(r.push(this.context),n.push(e.context);;){let i=r.pop(),s=n.pop();if(!i||!s)break;if(i===s)return!0;if(i.size<s.size)return!1;if(s.isEmpty)return i.hasEmpty;for(let o=0;o<s.size;o++){let a=i.findReturnState(s.getReturnState(o));if(a<0)return!1;r.push(i.getParent(a)),n.push(s.getParent(o))}}return!1}get isPrecedenceFilterSuppressed(){return(this.altAndOuterContextDepth&bQ)!==0}set isPrecedenceFilterSuppressed(e){e?this.altAndOuterContextDepth|=bQ:this.altAndOuterContextDepth&=~bQ}equals(e){return this===e?!0:e instanceof O5?this.state.stateNumber===e.state.stateNumber&&this.alt===e.alt&&this.reachesIntoOuterContext===e.reachesIntoOuterContext&&this.context.equals(e.context)&&this.semanticContext.equals(e.semanticContext)&&this.isPrecedenceFilterSuppressed===e.isPrecedenceFilterSuppressed&&this.hasPassedThroughNonGreedyDecision===e.hasPassedThroughNonGreedyDecision&&_ze.ObjectEqualityComparator.INSTANCE.equals(this.lexerActionExecutor,e.lexerActionExecutor):!1}hashCode(){let e=Zf.MurmurHash.initialize(7);return e=Zf.MurmurHash.update(e,this.state.stateNumber),e=Zf.MurmurHash.update(e,this.alt),e=Zf.MurmurHash.update(e,this.reachesIntoOuterContext?1:0),e=Zf.MurmurHash.update(e,this.context),e=Zf.MurmurHash.update(e,this.semanticContext),e=Zf.MurmurHash.update(e,this.hasPassedThroughNonGreedyDecision?1:0),e=Zf.MurmurHash.update(e,this.lexerActionExecutor),e=Zf.MurmurHash.finish(e,7),e}toDotString(){let e="";e+=`digraph G {
`,e+=`rankdir=LR;
`;let r=new Sze.Array2DHashMap(Fpe.PredictionContext.IdentityEqualityComparator.INSTANCE),n=[];function i(s){let o=r.size,a=r.putIfAbsent(s,o);return a??(n.push(s),o)}for(n.push(this.context),r.put(this.context,0);;){let s=n.pop();if(!s)break;for(let o=0;o<s.size;o++)e+="  s"+i(s),e+="->",e+="s"+i(s.getParent(o)),e+='[label="'+s.getReturnState(o)+`"];
`}return e+=`}
`,e.toString()}toString(e,r,n){n==null&&(n=r!=null),r==null&&(r=!0);let i="",s;n?s=this.context.toStrings(e,this.state.stateNumber):s=["?"];let o=!0;for(let a of s)o?o=!1:i+=", ",i+="(",i+=this.state,r&&(i+=",",i+=this.alt),this.context&&(i+=",",i+=a),this.semanticContext!==X1.SemanticContext.NONE&&(i+=",",i+=this.semanticContext),this.reachesIntoOuterContext&&(i+=",up="+this.outerContextDepth),i+=")";return i.toString()}};Mn([yr.NotNull],fo.prototype,"_state",void 0);Mn([yr.NotNull],fo.prototype,"_context",void 0);Mn([yr.NotNull],fo.prototype,"state",null);Mn([yr.NotNull,Ba(0,yr.NotNull)],fo.prototype,"context",null);Mn([yr.NotNull],fo.prototype,"semanticContext",null);Mn([yr.Override],fo.prototype,"clone",null);Mn([Ba(0,yr.NotNull),Ba(2,yr.NotNull)],fo.prototype,"transformImpl",null);Mn([yr.Override],fo.prototype,"equals",null);Mn([yr.Override],fo.prototype,"hashCode",null);Mn([Ba(0,yr.NotNull),Ba(3,yr.NotNull)],fo,"create",null);fo=Mn([Ba(0,yr.NotNull),Ba(2,yr.NotNull)],fo);Jd.ATNConfig=fo;var J1=class extends fo{constructor(e,r,n,i){typeof n=="number"?super(r,n,i):super(r,n,i),this._semanticContext=e}get semanticContext(){return this._semanticContext}};Mn([yr.NotNull],J1.prototype,"_semanticContext",void 0);Mn([yr.Override],J1.prototype,"semanticContext",null);J1=Mn([Ba(1,yr.NotNull),Ba(2,yr.NotNull)],J1);var wy=class extends fo{constructor(e,r,n,i,s){if(typeof n=="number")super(r,n,i);else if(super(r,n,i),n.semanticContext!==X1.SemanticContext.NONE)throw new Error("Not supported");this._lexerActionExecutor=e,this.passedThroughNonGreedyDecision=s}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};Mn([yr.Override],wy.prototype,"lexerActionExecutor",null);Mn([yr.Override],wy.prototype,"hasPassedThroughNonGreedyDecision",null);wy=Mn([Ba(1,yr.NotNull),Ba(2,yr.NotNull)],wy);var Ly=class extends J1{constructor(e,r,n,i,s,o){typeof i=="number"?super(r,n,i,s):super(r,n,i,s),this._lexerActionExecutor=e,this.passedThroughNonGreedyDecision=o}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};Mn([yr.Override],Ly.prototype,"lexerActionExecutor",null);Mn([yr.Override],Ly.prototype,"hasPassedThroughNonGreedyDecision",null);Ly=Mn([Ba(1,yr.NotNull),Ba(2,yr.NotNull)],Ly)});var ex=v(nw=>{"use strict";Object.defineProperty(nw,"__esModule",{value:!0});nw.BitSet=void 0;var bze=Pd(),Tze=an(),N5=new Uint16Array(0);function qa(t){return t>>>4}function Iy(t){return t*16}function TQ(t){let e=1;for(let r=0;r<16;r++){if(t&e)return r;e=e<<1>>>0}throw new RangeError("No specified bit found")}function Lpe(t){let e=32768;for(let r=15;r>=0;r--){if(t&e)return r;e=e>>>1}throw new RangeError("No specified bit found")}function Lu(t,e){return t&=15,e&=15,t===e?1<<t>>>0:65535>>>15-e^65535>>>16-t}var CQ=new Uint8Array(65536);for(let t=0;t<16;t++){let e=1<<t>>>0,r=0;for(;r<CQ.length;){r+=e;for(let n=0;n<e;n++)CQ[r]++,r++}}var RQ=class t{constructor(e){if(!e)this.data=N5;else if(typeof e=="number"){if(e<0)throw new RangeError("nbits cannot be negative");this.data=new Uint16Array(qa(e-1)+1)}else if(e instanceof t)this.data=e.data.slice(0);else{let r=-1;for(let n of e)r<n&&(r=n);this.data=new Uint16Array(qa(r-1)+1);for(let n of e)this.set(n)}}and(e){let r=this.data,n=e.data,i=Math.min(r.length,n.length),s=-1;for(let o=0;o<i;o++)(r[o]&=n[o])!==0&&(s=o);s===-1&&(this.data=N5),s<r.length-1&&(this.data=r.slice(0,s+1))}andNot(e){let r=this.data,n=e.data,i=Math.min(r.length,n.length),s=-1;for(let o=0;o<i;o++)(r[o]&=n[o]^65535)!==0&&(s=o);s===-1&&(this.data=N5),s<r.length-1&&(this.data=r.slice(0,s+1))}cardinality(){if(this.isEmpty)return 0;let e=this.data,r=e.length,n=0;for(let i=0;i<r;i++)n+=CQ[e[i]];return n}clear(e,r){e==null?this.data.fill(0):r==null?this.set(e,!1):this.set(e,r,!1)}flip(e,r){if(r==null&&(r=e),e<0||r<e)throw new RangeError;let n=qa(e),i=qa(r);if(n===i)this.data[n]^=Lu(e,r);else{for(this.data[n++]^=Lu(e,15);n<i;)this.data[n++]^=65535;this.data[n++]^=Lu(0,r)}}get(e,r){if(r===void 0)return!!(this.data[qa(e)]&Lu(e,e));{let n=new t(r+1);for(let i=e;i<=r;i++)n.set(i,this.get(i));return n}}intersects(e){let r=Math.min(this.length(),e.length());if(r===0)return!1;let n=qa(r-1);for(let i=0;i<=n;i++)if(this.data[i]&e.data[i])return!0;return!1}get isEmpty(){return this.length()===0}length(){return this.data.length?this.previousSetBit(Iy(this.data.length)-1)+1:0}nextClearBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");let r=this.data,n=r.length,i=qa(e);if(i>n)return-1;let s=65535^Lu(e,15);if((r[i]|s)===65535){for(i++,s=0;i<n&&r[i]===65535;i++);if(i===n)return-1}return Iy(i)+TQ((r[i]|s)^65535)}nextSetBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");let r=this.data,n=r.length,i=qa(e);if(i>n)return-1;let s=Lu(e,15);if(!(r[i]&s)){for(i++,s=65535;i<n&&r[i]===0;i++);if(i>=n)return-1}return Iy(i)+TQ(r[i]&s)}or(e){let r=this.data,n=e.data,i=Math.min(r.length,n.length),s=Math.max(r.length,n.length),o=r.length===s?r:new Uint16Array(s),a=-1;for(let l=0;l<i;l++)(o[l]=r[l]|n[l])!==0&&(a=l);let u=r.length>n.length?r:n;for(let l=i;l<s;l++)(o[l]=u[l])!==0&&(a=l);a===-1?this.data=N5:o.length===a+1?this.data=o:this.data=o.slice(0,a)}previousClearBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");let r=this.data,n=r.length,i=qa(e);i>=n&&(i=n-1);let s=65535^Lu(0,e);if((r[i]|s)===65535){for(s=0,i--;i>=0&&r[i]===65535;i--);if(i<0)return-1}return Iy(i)+Lpe((r[i]|s)^65535)}previousSetBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");let r=this.data,n=r.length,i=qa(e);i>=n&&(i=n-1);let s=Lu(0,e);if(!(r[i]&s)){for(i--,s=65535;i>=0&&r[i]===0;i--);if(i<0)return-1}return Iy(i)+Lpe(r[i]&s)}set(e,r,n){if(r===void 0?(r=e,n=!0):typeof r=="boolean"&&(n=r,r=e),n===void 0&&(n=!0),e<0||e>r)throw new RangeError;let i=qa(e),s=qa(r);if(n&&s>=this.data.length){let o=new Uint16Array(s+1);this.data.forEach((a,u)=>o[u]=a),this.data=o}else if(!n){if(i>=this.data.length)return;s>=this.data.length&&(s=this.data.length-1,r=this.data.length*16-1)}if(i===s)this._setBits(i,n,Lu(e,r));else{for(this._setBits(i++,n,Lu(e,15));i<s;)this.data[i++]=n?65535:0;this._setBits(i,n,Lu(0,r))}}_setBits(e,r,n){r?this.data[e]|=n:this.data[e]&=65535^n}get size(){return this.data.byteLength*8}hashCode(){return Tze.MurmurHash.hashCode(this.data,22)}equals(e){if(e===this)return!0;if(!(e instanceof t))return!1;let r=this.length();if(r!==e.length())return!1;if(r===0)return!0;let n=qa(r-1);for(let i=0;i<=n;i++)if(this.data[i]!==e.data[i])return!1;return!0}toString(){let e="{",r=!0;for(let n=this.nextSetBit(0);n>=0;n=this.nextSetBit(n+1))r?r=!1:e+=", ",e+=n;return e+="}",e}xor(e){let r=this.data,n=e.data,i=Math.min(r.length,n.length),s=Math.max(r.length,n.length),o=r.length===s?r:new Uint16Array(s),a=-1;for(let l=0;l<i;l++)(o[l]=r[l]^n[l])!==0&&(a=l);let u=r.length>n.length?r:n;for(let l=i;l<s;l++)(o[l]=u[l])!==0&&(a=l);a===-1?this.data=N5:o.length===a+1?this.data=o:this.data=o.slice(0,a+1)}clone(){return new t(this)}[Symbol.iterator](){return new OQ(this.data)}[bze.inspect.custom](){return"BitSet "+this.toString()}};nw.BitSet=RQ;var OQ=class{constructor(e){this.data=e,this.index=0,this.mask=65535}next(){for(;this.index<this.data.length;){let e=this.data[this.index]&this.mask;if(e!==0){let r=Iy(this.index)+TQ(e);return this.mask=Lu(r+1,15),{done:!1,value:r}}this.index++,this.mask=65535}return{done:!0,value:-1}}[Symbol.iterator](){return this}}});var Py=v(My=>{"use strict";var ac=My&&My.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(My,"__esModule",{value:!0});My.ATNConfigSet=void 0;var Ipe=Y1(),Cze=Xf(),Mpe=v5(),iw=Iu(),Ppe=D5(),Rze=ex(),uc=re(),Oze=Pl(),kpe=Fu(),Dze=tw(),Nze=Q1(),sw=Ts(),Fze=ka(),F5=class{hashCode(e){return e.state^e.alt}equals(e,r){return e.state===r.state&&e.alt===r.alt}};F5.INSTANCE=new F5;function DQ(t){return t?new Ipe.Array2DHashMap(t):new Ipe.Array2DHashMap(F5.INSTANCE)}var Ua=class t{constructor(e,r){this._uniqueAlt=0,this._hasSemanticContext=!1,this._dipsIntoOuterContext=!1,this.outermostConfigSet=!1,this.cachedHashCode=-1,e?(r?(this.mergedConfigs=void 0,this.unmerged=void 0):e.isReadOnly?(this.mergedConfigs=DQ(),this.unmerged=[]):(this.mergedConfigs=DQ(e.mergedConfigs),this.unmerged=e.unmerged.slice(0)),this.configs=e.configs.slice(0),this._dipsIntoOuterContext=e._dipsIntoOuterContext,this._hasSemanticContext=e._hasSemanticContext,this.outermostConfigSet=e.outermostConfigSet,(r||!e.isReadOnly)&&(this._uniqueAlt=e._uniqueAlt,this._conflictInfo=e._conflictInfo)):(this.mergedConfigs=DQ(),this.unmerged=[],this.configs=[],this._uniqueAlt=iw.ATN.INVALID_ALT_NUMBER)}getRepresentedAlternatives(){if(this._conflictInfo!=null)return this._conflictInfo.conflictedAlts.clone();let e=new Rze.BitSet;for(let r of this)e.set(r.alt);return e}get isReadOnly(){return this.mergedConfigs==null}get isOutermostConfigSet(){return this.outermostConfigSet}set isOutermostConfigSet(e){if(this.outermostConfigSet&&!e)throw new Error("IllegalStateException");sw(!e||!this._dipsIntoOuterContext),this.outermostConfigSet=e}getStates(){let e=new Cze.Array2DHashSet(Oze.ObjectEqualityComparator.INSTANCE);for(let r of this.configs)e.add(r.state);return e}optimizeConfigs(e){if(this.configs.length!==0)for(let r of this.configs)r.context=e.atn.getCachedContext(r.context)}clone(e){let r=new t(this,e);return!e&&this.isReadOnly&&r.addAll(this.configs),r}get size(){return this.configs.length}get isEmpty(){return this.configs.length===0}contains(e){if(!(e instanceof Ppe.ATNConfig))return!1;if(this.mergedConfigs&&this.unmerged){let r=e,n=this.getKey(r),i=this.mergedConfigs.get(n);if(i!=null&&this.canMerge(r,n,i))return i.contains(r);for(let s of this.unmerged)if(s.contains(e))return!0}else for(let r of this.configs)if(r.contains(e))return!0;return!1}*[Symbol.iterator](){yield*this.configs}toArray(){return this.configs}add(e,r){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");sw(!this.outermostConfigSet||!e.reachesIntoOuterContext),r==null&&(r=Dze.PredictionContextCache.UNCACHED);let n,i=this.getKey(e),s=this.mergedConfigs.get(i);if(n=s==null,s!=null&&this.canMerge(e,i,s)){s.outerContextDepth=Math.max(s.outerContextDepth,e.outerContextDepth),e.isPrecedenceFilterSuppressed&&(s.isPrecedenceFilterSuppressed=!0);let o=kpe.PredictionContext.join(s.context,e.context,r);return this.updatePropertiesForMergedConfig(e),s.context===o?!1:(s.context=o,!0)}for(let o=0;o<this.unmerged.length;o++){let a=this.unmerged[o];if(this.canMerge(e,i,a)){a.outerContextDepth=Math.max(a.outerContextDepth,e.outerContextDepth),e.isPrecedenceFilterSuppressed&&(a.isPrecedenceFilterSuppressed=!0);let u=kpe.PredictionContext.join(a.context,e.context,r);return this.updatePropertiesForMergedConfig(e),a.context===u?!1:(a.context=u,n&&(this.mergedConfigs.put(i,a),this.unmerged.splice(o,1)),!0)}}return this.configs.push(e),n?this.mergedConfigs.put(i,e):this.unmerged.push(e),this.updatePropertiesForAddedConfig(e),!0}updatePropertiesForMergedConfig(e){this._dipsIntoOuterContext=this._dipsIntoOuterContext||e.reachesIntoOuterContext,sw(!this.outermostConfigSet||!this._dipsIntoOuterContext)}updatePropertiesForAddedConfig(e){this.configs.length===1?this._uniqueAlt=e.alt:this._uniqueAlt!==e.alt&&(this._uniqueAlt=iw.ATN.INVALID_ALT_NUMBER),this._hasSemanticContext=this._hasSemanticContext||!Nze.SemanticContext.NONE.equals(e.semanticContext),this._dipsIntoOuterContext=this._dipsIntoOuterContext||e.reachesIntoOuterContext,sw(!this.outermostConfigSet||!this._dipsIntoOuterContext)}canMerge(e,r,n){return e.state.stateNumber!==n.state.stateNumber||r.alt!==n.alt?!1:e.semanticContext.equals(n.semanticContext)}getKey(e){return{state:e.state.stateNumber,alt:e.alt}}containsAll(e){for(let r of e)if(!(r instanceof Ppe.ATNConfig)||!this.contains(r))return!1;return!0}addAll(e,r){this.ensureWritable();let n=!1;for(let i of e)this.add(i,r)&&(n=!0);return n}clear(){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");this.mergedConfigs.clear(),this.unmerged.length=0,this.configs.length=0,this._dipsIntoOuterContext=!1,this._hasSemanticContext=!1,this._uniqueAlt=iw.ATN.INVALID_ALT_NUMBER,this._conflictInfo=void 0}equals(e){return this===e?!0:e instanceof t?this.outermostConfigSet===e.outermostConfigSet&&Fze.equals(this._conflictInfo,e._conflictInfo)&&Mpe.ArrayEqualityComparator.INSTANCE.equals(this.configs,e.configs):!1}hashCode(){if(this.isReadOnly&&this.cachedHashCode!==-1)return this.cachedHashCode;let e=1;return e=5*e^(this.outermostConfigSet?1:0),e=5*e^Mpe.ArrayEqualityComparator.INSTANCE.hashCode(this.configs),this.isReadOnly&&(this.cachedHashCode=e),e}toString(e){e==null&&(e=!1);let r="",n=this.configs.slice(0);n.sort((i,s)=>i.alt!==s.alt?i.alt-s.alt:i.state.stateNumber!==s.state.stateNumber?i.state.stateNumber-s.state.stateNumber:i.semanticContext.toString().localeCompare(s.semanticContext.toString())),r+="[";for(let i=0;i<n.length;i++)i>0&&(r+=", "),r+=n[i].toString(void 0,!0,e);return r+="]",this._hasSemanticContext&&(r+=",hasSemanticContext="+this._hasSemanticContext),this._uniqueAlt!==iw.ATN.INVALID_ALT_NUMBER&&(r+=",uniqueAlt="+this._uniqueAlt),this._conflictInfo!=null&&(r+=",conflictingAlts="+this._conflictInfo.conflictedAlts,this._conflictInfo.isExact||(r+="*")),this._dipsIntoOuterContext&&(r+=",dipsIntoOuterContext"),r.toString()}get uniqueAlt(){return this._uniqueAlt}get hasSemanticContext(){return this._hasSemanticContext}set hasSemanticContext(e){this.ensureWritable(),this._hasSemanticContext=e}get conflictInfo(){return this._conflictInfo}set conflictInfo(e){this.ensureWritable(),this._conflictInfo=e}get conflictingAlts(){if(this._conflictInfo!=null)return this._conflictInfo.conflictedAlts}get isExactConflict(){return this._conflictInfo==null?!1:this._conflictInfo.isExact}get dipsIntoOuterContext(){return this._dipsIntoOuterContext}get(e){return this.configs[e]}ensureWritable(){if(this.isReadOnly)throw new Error("This ATNConfigSet is read only.")}};ac([uc.NotNull],Ua.prototype,"getRepresentedAlternatives",null);ac([uc.Override],Ua.prototype,"size",null);ac([uc.Override],Ua.prototype,"isEmpty",null);ac([uc.Override],Ua.prototype,"contains",null);ac([uc.Override],Ua.prototype,Symbol.iterator,null);ac([uc.Override],Ua.prototype,"toArray",null);ac([uc.Override],Ua.prototype,"containsAll",null);ac([uc.Override],Ua.prototype,"clear",null);ac([uc.Override],Ua.prototype,"equals",null);ac([uc.Override],Ua.prototype,"hashCode",null);My.ATNConfigSet=Ua});var w5=v(cc=>{"use strict";var tx=cc&&cc.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},wze=cc&&cc.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(cc,"__esModule",{value:!0});cc.DFAState=void 0;var Lze=Iu(),Ize=ex(),NQ=an(),rx=re(),ow=Fu(),Bpe=Ts(),lc=class t{constructor(e){this.stateNumber=-1,this.configs=e,this.edges=new Map,this.contextEdges=new Map}get isContextSensitive(){return!!this.contextSymbols}isContextSymbol(e){return this.isContextSensitive?this.contextSymbols.get(e):!1}setContextSymbol(e){Bpe(this.isContextSensitive),this.contextSymbols.set(e)}setContextSensitive(e){Bpe(!this.configs.isOutermostConfigSet),!this.isContextSensitive&&(this.contextSymbols||(this.contextSymbols=new Ize.BitSet))}get acceptStateInfo(){return this._acceptStateInfo}set acceptStateInfo(e){this._acceptStateInfo=e}get isAcceptState(){return!!this._acceptStateInfo}get prediction(){return this._acceptStateInfo?this._acceptStateInfo.prediction:Lze.ATN.INVALID_ALT_NUMBER}get lexerActionExecutor(){if(this._acceptStateInfo)return this._acceptStateInfo.lexerActionExecutor}getTarget(e){return this.edges.get(e)}setTarget(e,r){this.edges.set(e,r)}getEdgeMap(){return this.edges}getContextTarget(e){return e===ow.PredictionContext.EMPTY_FULL_STATE_KEY&&(e=-1),this.contextEdges.get(e)}setContextTarget(e,r){if(!this.isContextSensitive)throw new Error("The state is not context sensitive.");e===ow.PredictionContext.EMPTY_FULL_STATE_KEY&&(e=-1),this.contextEdges.set(e,r)}getContextEdgeMap(){let e=new Map(this.contextEdges),r=e.get(-1);if(r!==void 0)if(e.size===1){let n=new Map;return n.set(ow.PredictionContext.EMPTY_FULL_STATE_KEY,r),n}else e.delete(-1),e.set(ow.PredictionContext.EMPTY_FULL_STATE_KEY,r);return e}hashCode(){let e=NQ.MurmurHash.initialize(7);return e=NQ.MurmurHash.update(e,this.configs.hashCode()),e=NQ.MurmurHash.finish(e,1),e}equals(e){if(this===e)return!0;if(!(e instanceof t))return!1;let r=e;return this.configs.equals(r.configs)}toString(){let e="";return e+=this.stateNumber+":"+this.configs,this.isAcceptState&&(e+="=>",this.predicates?e+=this.predicates:e+=this.prediction),e.toString()}};tx([rx.NotNull],lc.prototype,"configs",void 0);tx([rx.NotNull],lc.prototype,"edges",void 0);tx([rx.NotNull],lc.prototype,"contextEdges",void 0);tx([rx.Override],lc.prototype,"hashCode",null);tx([rx.Override],lc.prototype,"equals",null);tx([rx.Override],lc.prototype,"toString",null);cc.DFAState=lc;(function(t){let e=class{constructor(n,i){this.alt=i,this.pred=n}toString(){return"("+this.pred+", "+this.alt+")"}};tx([rx.NotNull],e.prototype,"pred",void 0),tx([rx.Override],e.prototype,"toString",null),e=tx([wze(0,rx.NotNull)],e),t.PredPrediction=e})(lc=cc.DFAState||(cc.DFAState={}))});var I5=v(kl=>{"use strict";var FQ=kl&&kl.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},Mze=kl&&kl.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(kl,"__esModule",{value:!0});kl.ATNSimulator=void 0;var Pze=Py(),kze=w5(),wQ=re(),Bze=Fu(),Z1=class L5{constructor(e){this.atn=e}static get ERROR(){return L5._ERROR||(L5._ERROR=new kze.DFAState(new Pze.ATNConfigSet),L5._ERROR.stateNumber=Bze.PredictionContext.EMPTY_FULL_STATE_KEY),L5._ERROR}clearDFA(){this.atn.clearDFA()}};FQ([wQ.NotNull],Z1.prototype,"atn",void 0);FQ([wQ.NotNull],Z1,"ERROR",null);Z1=FQ([Mze(0,wQ.NotNull)],Z1);kl.ATNSimulator=Z1;Z1=kl.ATNSimulator||(kl.ATNSimulator={});kl.ATNSimulator=Z1});var LQ=v(aw=>{"use strict";Object.defineProperty(aw,"__esModule",{value:!0});aw.ConsoleErrorListener=void 0;var M5=class{syntaxError(e,r,n,i,s,o){console.error(`line ${n}:${i} ${s}`)}};aw.ConsoleErrorListener=M5;M5.INSTANCE=new M5});var lw=v(Zd=>{"use strict";var qze=Zd&&Zd.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},qpe=Zd&&Zd.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Zd,"__esModule",{value:!0});Zd.ProxyErrorListener=void 0;var IQ=re(),uw=class{constructor(e){if(this.delegates=e,!e)throw new Error("Invalid delegates")}getDelegates(){return this.delegates}syntaxError(e,r,n,i,s,o){this.delegates.forEach(a=>{a.syntaxError&&a.syntaxError(e,r,n,i,s,o)})}};qze([IQ.Override,qpe(0,IQ.NotNull),qpe(4,IQ.NotNull)],uw.prototype,"syntaxError",null);Zd.ProxyErrorListener=uw});var ky=v(eh=>{"use strict";var fc=eh&&eh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},cw=eh&&eh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(eh,"__esModule",{value:!0});eh.Recognizer=void 0;var Uze=LQ(),$ze=lw(),$a=re(),Upe=gr(),jze=ka(),Ns=class t{constructor(){this._listeners=[Uze.ConsoleErrorListener.INSTANCE],this._stateNumber=-1}getTokenTypeMap(){let e=this.vocabulary,r=t.tokenTypeMapCache.get(e);if(r==null){let n=new Map;for(let i=0;i<=this.atn.maxTokenType;i++){let s=e.getLiteralName(i);s!=null&&n.set(s,i);let o=e.getSymbolicName(i);o!=null&&n.set(o,i)}n.set("EOF",Upe.Token.EOF),r=n,t.tokenTypeMapCache.set(e,r)}return r}getRuleIndexMap(){let e=this.ruleNames;if(e==null)throw new Error("The current recognizer does not provide a list of rule names.");let r=t.ruleIndexMapCache.get(e);return r==null&&(r=jze.toMap(e),t.ruleIndexMapCache.set(e,r)),r}getTokenType(e){let r=this.getTokenTypeMap().get(e);return r??Upe.Token.INVALID_TYPE}get serializedATN(){throw new Error("there is no serialized ATN")}get atn(){return this._interp.atn}get interpreter(){return this._interp}set interpreter(e){this._interp=e}get parseInfo(){return Promise.resolve(void 0)}getErrorHeader(e){let r=e.getOffendingToken();if(!r)return"";let n=r.line,i=r.charPositionInLine;return"line "+n+":"+i}addErrorListener(e){if(!e)throw new TypeError("listener must not be null");this._listeners.push(e)}removeErrorListener(e){let r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}removeErrorListeners(){this._listeners.length=0}getErrorListeners(){return this._listeners.slice(0)}getErrorListenerDispatch(){return new $ze.ProxyErrorListener(this.getErrorListeners())}sempred(e,r,n){return!0}precpred(e,r){return!0}action(e,r,n){}get state(){return this._stateNumber}set state(e){this._stateNumber=e}};Ns.EOF=-1;Ns.tokenTypeMapCache=new WeakMap;Ns.ruleIndexMapCache=new WeakMap;fc([$a.SuppressWarnings("serial"),$a.NotNull],Ns.prototype,"_listeners",void 0);fc([$a.NotNull],Ns.prototype,"getTokenTypeMap",null);fc([$a.NotNull],Ns.prototype,"getRuleIndexMap",null);fc([$a.NotNull],Ns.prototype,"serializedATN",null);fc([$a.NotNull],Ns.prototype,"atn",null);fc([$a.NotNull,cw(0,$a.NotNull)],Ns.prototype,"interpreter",null);fc([$a.NotNull,cw(0,$a.NotNull)],Ns.prototype,"getErrorHeader",null);fc([cw(0,$a.NotNull)],Ns.prototype,"addErrorListener",null);fc([cw(0,$a.NotNull)],Ns.prototype,"removeErrorListener",null);fc([$a.NotNull],Ns.prototype,"getErrorListeners",null);eh.Recognizer=Ns});var Bl=v(By=>{"use strict";var th=By&&By.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(By,"__esModule",{value:!0});By.VocabularyImpl=void 0;var nx=re(),Hze=gr(),ja=class{constructor(e,r,n){this.literalNames=e,this.symbolicNames=r,this.displayNames=n,this._maxTokenType=Math.max(this.displayNames.length,Math.max(this.literalNames.length,this.symbolicNames.length))-1}get maxTokenType(){return this._maxTokenType}getLiteralName(e){if(e>=0&&e<this.literalNames.length)return this.literalNames[e]}getSymbolicName(e){if(e>=0&&e<this.symbolicNames.length)return this.symbolicNames[e];if(e===Hze.Token.EOF)return"EOF"}getDisplayName(e){if(e>=0&&e<this.displayNames.length){let i=this.displayNames[e];if(i)return i}let r=this.getLiteralName(e);if(r)return r;let n=this.getSymbolicName(e);return n||String(e)}};ja.EMPTY_VOCABULARY=new ja([],[],[]);th([nx.NotNull],ja.prototype,"literalNames",void 0);th([nx.NotNull],ja.prototype,"symbolicNames",void 0);th([nx.NotNull],ja.prototype,"displayNames",void 0);th([nx.Override],ja.prototype,"maxTokenType",null);th([nx.Override],ja.prototype,"getLiteralName",null);th([nx.Override],ja.prototype,"getSymbolicName",null);th([nx.Override,nx.NotNull],ja.prototype,"getDisplayName",null);th([nx.NotNull],ja,"EMPTY_VOCABULARY",void 0);By.VocabularyImpl=ja});var BQ=v(Uy=>{"use strict";var PQ=Uy&&Uy.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(Uy,"__esModule",{value:!0});Uy.DFASerializer=void 0;var MQ=I5(),kQ=re(),$pe=Fu(),zze=ky(),Gze=Bl(),qy=class{constructor(e,r,n,i){r instanceof zze.Recognizer?(n=r.ruleNames,i=r.atn,r=r.vocabulary):r||(r=Gze.VocabularyImpl.EMPTY_VOCABULARY),this.dfa=e,this.vocabulary=r,this.ruleNames=n,this.atn=i}toString(){if(!this.dfa.s0)return"";let e="";if(this.dfa.states){let n=new Array(...this.dfa.states.toArray());n.sort((i,s)=>i.stateNumber-s.stateNumber);for(let i of n){let s=i.getEdgeMap(),o=[...s.keys()].sort((l,c)=>l-c),a=i.getContextEdgeMap(),u=[...a.keys()].sort((l,c)=>l-c);for(let l of o){let c=s.get(l);if((c==null||c===MQ.ATNSimulator.ERROR)&&!i.isContextSymbol(l))continue;let f=!1;e+=this.getStateString(i)+"-"+this.getEdgeLabel(l)+"->",i.isContextSymbol(l)&&(e+="!",f=!0);let x=c;x&&x.stateNumber!==MQ.ATNSimulator.ERROR.stateNumber?e+=this.getStateString(x)+`
`:f&&(e+=`ctx
`)}if(i.isContextSensitive)for(let l of u)e+=this.getStateString(i)+"-"+this.getContextLabel(l)+"->"+this.getStateString(a.get(l))+`
`}}let r=e;return r.length===0?"":r}getContextLabel(e){if(e===$pe.PredictionContext.EMPTY_FULL_STATE_KEY)return"ctx:EMPTY_FULL";if(e===$pe.PredictionContext.EMPTY_LOCAL_STATE_KEY)return"ctx:EMPTY_LOCAL";if(this.atn&&e>0&&e<=this.atn.states.length){let n=this.atn.states[e].ruleIndex;if(this.ruleNames&&n>=0&&n<this.ruleNames.length)return"ctx:"+String(e)+"("+this.ruleNames[n]+")"}return"ctx:"+String(e)}getEdgeLabel(e){return this.vocabulary.getDisplayName(e)}getStateString(e){if(e===MQ.ATNSimulator.ERROR)return"ERROR";let r=e.stateNumber,n="s"+r;if(e.isAcceptState&&(e.predicates?n=":s"+r+"=>"+e.predicates:n=":s"+r+"=>"+e.prediction),e.isContextSensitive){n+="*";for(let i of e.configs)if(i.reachesIntoOuterContext){n+="*";break}}return n}};PQ([kQ.NotNull],qy.prototype,"dfa",void 0);PQ([kQ.NotNull],qy.prototype,"vocabulary",void 0);PQ([kQ.Override],qy.prototype,"toString",null);Uy.DFASerializer=qy});var Hpe=v(rh=>{"use strict";var jpe=rh&&rh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},Qze=rh&&rh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(rh,"__esModule",{value:!0});rh.LexerDFASerializer=void 0;var Vze=BQ(),qQ=re(),Wze=Bl(),fw=class extends Vze.DFASerializer{constructor(e){super(e,Wze.VocabularyImpl.EMPTY_VOCABULARY)}getEdgeLabel(e){return"'"+String.fromCodePoint(e)+"'"}};jpe([qQ.Override,qQ.NotNull],fw.prototype,"getEdgeLabel",null);fw=jpe([Qze(0,qQ.NotNull)],fw);rh.LexerDFASerializer=fw});var dw=v($y=>{"use strict";var Yze=$y&&$y.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty($y,"__esModule",{value:!0});$y.StarLoopEntryState=void 0;var Kze=Ei(),Xze=ex(),Jze=Yd(),Zze=re(),xw=class extends Jze.DecisionState{constructor(){super(...arguments),this.precedenceRuleDecision=!1,this.precedenceLoopbackStates=new Xze.BitSet}get stateType(){return Kze.ATNStateType.STAR_LOOP_ENTRY}};Yze([Zze.Override],xw.prototype,"stateType",null);$y.StarLoopEntryState=xw});var UQ=v(nh=>{"use strict";var hw=nh&&nh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},eGe=nh&&nh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(nh,"__esModule",{value:!0});nh.DFA=void 0;var tGe=Xf(),zpe=Py(),Gpe=BQ(),Qpe=w5(),rGe=Hpe(),pw=re(),nGe=Pl(),iGe=dw(),sGe=Bl(),jy=class{constructor(e,r=0){if(this.states=new tGe.Array2DHashSet(nGe.ObjectEqualityComparator.INSTANCE),this.nextStateNumber=0,!e.atn)throw new Error("The ATNState must be associated with an ATN");this.atnStartState=e,this.atn=e.atn,this.decision=r;let n=!1;e instanceof iGe.StarLoopEntryState&&e.precedenceRuleDecision&&(n=!0,this.s0=new Qpe.DFAState(new zpe.ATNConfigSet),this.s0full=new Qpe.DFAState(new zpe.ATNConfigSet)),this.precedenceDfa=n}get isPrecedenceDfa(){return this.precedenceDfa}getPrecedenceStartState(e,r){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");return r?this.s0full.getTarget(e):this.s0.getTarget(e)}setPrecedenceStartState(e,r,n){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");e<0||(r?this.s0full.setTarget(e,n):this.s0.setTarget(e,n))}get isEmpty(){return this.isPrecedenceDfa?this.s0.getEdgeMap().size===0&&this.s0full.getEdgeMap().size===0:this.s0==null&&this.s0full==null}get isContextSensitive(){return this.isPrecedenceDfa?this.s0full.getEdgeMap().size>0:this.s0full!=null}addState(e){return e.stateNumber=this.nextStateNumber++,this.states.getOrAdd(e)}toString(e,r){if(e||(e=sGe.VocabularyImpl.EMPTY_VOCABULARY),!this.s0)return"";let n;return r?n=new Gpe.DFASerializer(this,e,r,this.atnStartState.atn):n=new Gpe.DFASerializer(this,e),n.toString()}toLexerString(){return this.s0?new rGe.LexerDFASerializer(this).toString():""}};hw([pw.NotNull],jy.prototype,"states",void 0);hw([pw.NotNull],jy.prototype,"atnStartState",void 0);hw([pw.NotNull],jy.prototype,"atn",void 0);jy=hw([eGe(0,pw.NotNull)],jy);nh.DFA=jy});var $Q=v(Hy=>{"use strict";var oGe=Hy&&Hy.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(Hy,"__esModule",{value:!0});Hy.BasicState=void 0;var aGe=nc(),uGe=Ei(),lGe=re(),mw=class extends aGe.ATNState{get stateType(){return uGe.ATNStateType.BASIC}};oGe([lGe.Override],mw.prototype,"stateType",null);Hy.BasicState=mw});var jQ=v(zy=>{"use strict";var cGe=zy&&zy.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(zy,"__esModule",{value:!0});zy.InvalidState=void 0;var fGe=Ei(),xGe=$Q(),dGe=re(),gw=class extends xGe.BasicState{get stateType(){return fGe.ATNStateType.INVALID_TYPE}};cGe([dGe.Override],gw.prototype,"stateType",null);zy.InvalidState=gw});var yw=v(sh=>{"use strict";var Gy=sh&&sh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},Vpe=sh&&sh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(sh,"__esModule",{value:!0});sh.SetTransition=void 0;var hGe=oh(),ix=re(),pGe=gr(),mGe=Kf(),ih=class extends mGe.Transition{constructor(e,r){super(e),r==null&&(r=hGe.IntervalSet.of(pGe.Token.INVALID_TYPE)),this.set=r}get serializationType(){return 7}get label(){return this.set}matches(e,r,n){return this.set.contains(e)}toString(){return this.set.toString()}};Gy([ix.NotNull],ih.prototype,"set",void 0);Gy([ix.Override],ih.prototype,"serializationType",null);Gy([ix.Override,ix.NotNull],ih.prototype,"label",null);Gy([ix.Override],ih.prototype,"matches",null);Gy([ix.Override,ix.NotNull],ih.prototype,"toString",null);ih=Gy([Vpe(0,ix.NotNull),Vpe(1,ix.Nullable)],ih);sh.SetTransition=ih});var Aw=v(ah=>{"use strict";var Ew=ah&&ah.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},Wpe=ah&&ah.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(ah,"__esModule",{value:!0});ah.NotSetTransition=void 0;var P5=re(),gGe=yw(),Qy=class extends gGe.SetTransition{constructor(e,r){super(e,r)}get serializationType(){return 8}matches(e,r,n){return e>=r&&e<=n&&!super.matches(e,r,n)}toString(){return"~"+super.toString()}};Ew([P5.Override],Qy.prototype,"serializationType",null);Ew([P5.Override],Qy.prototype,"matches",null);Ew([P5.Override],Qy.prototype,"toString",null);Qy=Ew([Wpe(0,P5.NotNull),Wpe(1,P5.Nullable)],Qy);ah.NotSetTransition=Qy});var Wy=v(Vy=>{"use strict";var Ype=Vy&&Vy.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(Vy,"__esModule",{value:!0});Vy.RuleStopState=void 0;var yGe=nc(),EGe=Ei(),Kpe=re(),k5=class extends yGe.ATNState{get nonStopStateNumber(){return-1}get stateType(){return EGe.ATNStateType.RULE_STOP}};Ype([Kpe.Override],k5.prototype,"nonStopStateNumber",null);Ype([Kpe.Override],k5.prototype,"stateType",null);Vy.RuleStopState=k5});var Sw=v(uh=>{"use strict";var B5=uh&&uh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},Xpe=uh&&uh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(uh,"__esModule",{value:!0});uh.RuleTransition=void 0;var Yy=re(),AGe=Kf(),em=class extends AGe.Transition{constructor(e,r,n,i){super(e),this.tailCall=!1,this.optimizedTailCall=!1,this.ruleIndex=r,this.precedence=n,this.followState=i}get serializationType(){return 3}get isEpsilon(){return!0}matches(e,r,n){return!1}};B5([Yy.NotNull],em.prototype,"followState",void 0);B5([Yy.Override],em.prototype,"serializationType",null);B5([Yy.Override],em.prototype,"isEpsilon",null);B5([Yy.Override],em.prototype,"matches",null);em=B5([Xpe(0,Yy.NotNull),Xpe(3,Yy.NotNull)],em);uh.RuleTransition=em});var HQ=v(lh=>{"use strict";var vw=lh&&lh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},SGe=lh&&lh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(lh,"__esModule",{value:!0});lh.WildcardTransition=void 0;var q5=re(),vGe=Kf(),Ky=class extends vGe.Transition{constructor(e){super(e)}get serializationType(){return 9}matches(e,r,n){return e>=r&&e<=n}toString(){return"."}};vw([q5.Override],Ky.prototype,"serializationType",null);vw([q5.Override],Ky.prototype,"matches",null);vw([q5.Override,q5.NotNull],Ky.prototype,"toString",null);Ky=vw([SGe(0,q5.NotNull)],Ky);lh.WildcardTransition=Ky});var e2e=v(fh=>{"use strict";var Tw=fh&&fh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},ch=fh&&fh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(fh,"__esModule",{value:!0});fh.LL1Analyzer=void 0;var _Ge=kF(),Jpe=Xf(),bGe=D5(),Zpe=ex(),_w=oh(),xc=re(),TGe=Aw(),CGe=Pl(),bw=Fu(),RGe=Wy(),OGe=Sw(),Xy=gr(),DGe=HQ(),tm=class zQ{constructor(e){this.atn=e}getDecisionLookahead(e){if(e==null)return;let r=new Array(e.numberOfTransitions);for(let n=0;n<e.numberOfTransitions;n++){let i=new _w.IntervalSet;r[n]=i;let s=new Jpe.Array2DHashSet(CGe.ObjectEqualityComparator.INSTANCE);this._LOOK(e.transition(n).target,void 0,bw.PredictionContext.EMPTY_LOCAL,i,s,new Zpe.BitSet,!1,!1),(i.size===0||i.contains(zQ.HIT_PRED))&&(i=void 0,r[n]=i)}return r}LOOK(e,r,n){if(n===void 0){if(e.atn==null)throw new Error("Illegal state");n=e.atn.ruleToStopState[e.ruleIndex]}else n===null&&(n=void 0);let i=new _w.IntervalSet;return this._LOOK(e,n,r,i,new Jpe.Array2DHashSet,new Zpe.BitSet,!0,!0),i}_LOOK(e,r,n,i,s,o,a,u){let l=bGe.ATNConfig.create(e,0,n);if(!s.add(l))return;if(e===r){if(bw.PredictionContext.isEmptyLocal(n)){i.add(Xy.Token.EPSILON);return}else if(n.isEmpty){u&&i.add(Xy.Token.EOF);return}}if(e instanceof RGe.RuleStopState){if(n.isEmpty&&!bw.PredictionContext.isEmptyLocal(n)){u&&i.add(Xy.Token.EOF);return}let f=o.get(e.ruleIndex);try{o.clear(e.ruleIndex);for(let x=0;x<n.size;x++){if(n.getReturnState(x)===bw.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let d=this.atn.states[n.getReturnState(x)];this._LOOK(d,r,n.getParent(x),i,s,o,a,u)}}finally{f&&o.set(e.ruleIndex)}}let c=e.numberOfTransitions;for(let f=0;f<c;f++){let x=e.transition(f);if(x instanceof OGe.RuleTransition){if(o.get(x.ruleIndex))continue;let d=n.getChild(x.followState.stateNumber);try{o.set(x.ruleIndex),this._LOOK(x.target,r,d,i,s,o,a,u)}finally{o.clear(x.ruleIndex)}}else if(x instanceof _Ge.AbstractPredicateTransition)a?this._LOOK(x.target,r,n,i,s,o,a,u):i.add(zQ.HIT_PRED);else if(x.isEpsilon)this._LOOK(x.target,r,n,i,s,o,a,u);else if(x instanceof DGe.WildcardTransition)i.addAll(_w.IntervalSet.of(Xy.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType));else{let d=x.label;d!=null&&(x instanceof TGe.NotSetTransition&&(d=d.complement(_w.IntervalSet.of(Xy.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType))),i.addAll(d))}}}};tm.HIT_PRED=Xy.Token.INVALID_TYPE;Tw([xc.NotNull],tm.prototype,"atn",void 0);Tw([xc.NotNull,ch(0,xc.NotNull),ch(1,xc.NotNull)],tm.prototype,"LOOK",null);Tw([ch(0,xc.NotNull),ch(2,xc.NotNull),ch(3,xc.NotNull),ch(4,xc.NotNull),ch(5,xc.NotNull)],tm.prototype,"_LOOK",null);tm=Tw([ch(0,xc.NotNull)],tm);fh.LL1Analyzer=tm});var Iu=v(ql=>{"use strict";var Mu=ql&&ql.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},U5=ql&&ql.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(ql,"__esModule",{value:!0});ql.ATN=void 0;var NGe=Y1(),Cw=UQ(),FGe=oh(),wGe=jQ(),LGe=e2e(),Ha=re(),IGe=Pl(),GQ=Fu(),Jy=gr(),MGe=Ts(),Fs=class{constructor(e,r){this.states=[],this.decisionToState=[],this.modeNameToStartState=new Map,this.modeToStartState=[],this.contextCache=new NGe.Array2DHashMap(IGe.ObjectEqualityComparator.INSTANCE),this.decisionToDFA=[],this.modeToDFA=[],this.LL1Table=new Map,this.grammarType=e,this.maxTokenType=r}clearDFA(){this.decisionToDFA=new Array(this.decisionToState.length);for(let e=0;e<this.decisionToDFA.length;e++)this.decisionToDFA[e]=new Cw.DFA(this.decisionToState[e],e);this.modeToDFA=new Array(this.modeToStartState.length);for(let e=0;e<this.modeToDFA.length;e++)this.modeToDFA[e]=new Cw.DFA(this.modeToStartState[e]);this.contextCache.clear(),this.LL1Table.clear()}get contextCacheSize(){return this.contextCache.size}getCachedContext(e){return GQ.PredictionContext.getCachedContext(e,this.contextCache,new GQ.PredictionContext.IdentityHashMap)}getDecisionToDFA(){return MGe(this.decisionToDFA!=null&&this.decisionToDFA.length===this.decisionToState.length),this.decisionToDFA}nextTokens(e,r){return r?new LGe.LL1Analyzer(this).LOOK(e,r):(e.nextTokenWithinRule||(e.nextTokenWithinRule=this.nextTokens(e,GQ.PredictionContext.EMPTY_LOCAL),e.nextTokenWithinRule.setReadonly(!0)),e.nextTokenWithinRule)}addState(e){e.atn=this,e.stateNumber=this.states.length,this.states.push(e)}removeState(e){let r=new wGe.InvalidState;r.atn=this,r.stateNumber=e.stateNumber,this.states[e.stateNumber]=r}defineMode(e,r){this.modeNameToStartState.set(e,r),this.modeToStartState.push(r),this.modeToDFA.push(new Cw.DFA(r)),this.defineDecisionState(r)}defineDecisionState(e){return this.decisionToState.push(e),e.decision=this.decisionToState.length-1,this.decisionToDFA.push(new Cw.DFA(e,e.decision)),e.decision}getDecisionState(e){if(this.decisionToState.length>0)return this.decisionToState[e]}get numberOfDecisions(){return this.decisionToState.length}getExpectedTokens(e,r){if(e<0||e>=this.states.length)throw new RangeError("Invalid state number.");let n=r,i=this.states[e],s=this.nextTokens(i);if(!s.contains(Jy.Token.EPSILON))return s;let o=new FGe.IntervalSet;for(o.addAll(s),o.remove(Jy.Token.EPSILON);n!=null&&n.invokingState>=0&&s.contains(Jy.Token.EPSILON);){let u=this.states[n.invokingState].transition(0);s=this.nextTokens(u.followState),o.addAll(s),o.remove(Jy.Token.EPSILON),n=n._parent}return s.contains(Jy.Token.EPSILON)&&o.add(Jy.Token.EOF),o}};Mu([Ha.NotNull],Fs.prototype,"states",void 0);Mu([Ha.NotNull],Fs.prototype,"decisionToState",void 0);Mu([Ha.NotNull],Fs.prototype,"modeNameToStartState",void 0);Mu([Ha.NotNull],Fs.prototype,"modeToStartState",void 0);Mu([Ha.NotNull],Fs.prototype,"decisionToDFA",void 0);Mu([Ha.NotNull],Fs.prototype,"modeToDFA",void 0);Mu([Ha.NotNull],Fs.prototype,"nextTokens",null);Mu([U5(0,Ha.NotNull)],Fs.prototype,"removeState",null);Mu([U5(0,Ha.NotNull),U5(1,Ha.NotNull)],Fs.prototype,"defineMode",null);Mu([U5(0,Ha.NotNull)],Fs.prototype,"defineDecisionState",null);Mu([Ha.NotNull],Fs.prototype,"getExpectedTokens",null);Fs=Mu([U5(0,Ha.NotNull)],Fs);ql.ATN=Fs;(function(t){t.INVALID_ALT_NUMBER=0})(Fs=ql.ATN||(ql.ATN={}));ql.ATN=Fs});var r2e=v(xh=>{"use strict";var rm=xh&&xh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},PGe=xh&&xh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(xh,"__esModule",{value:!0});xh.LexerIndexedCustomAction=void 0;var Rw=an(),nm=re(),sx=class t2e{constructor(e,r){this._offset=e,this._action=r}get offset(){return this._offset}get action(){return this._action}get actionType(){return this._action.actionType}get isPositionDependent(){return!0}execute(e){this._action.execute(e)}hashCode(){let e=Rw.MurmurHash.initialize();return e=Rw.MurmurHash.update(e,this._offset),e=Rw.MurmurHash.update(e,this._action),Rw.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof t2e?this._offset===e._offset&&this._action.equals(e._action):!1}};rm([nm.NotNull],sx.prototype,"action",null);rm([nm.Override],sx.prototype,"actionType",null);rm([nm.Override],sx.prototype,"isPositionDependent",null);rm([nm.Override],sx.prototype,"execute",null);rm([nm.Override],sx.prototype,"hashCode",null);rm([nm.Override],sx.prototype,"equals",null);sx=rm([PGe(1,nm.NotNull)],sx);xh.LexerIndexedCustomAction=sx});var n2e=v(hh=>{"use strict";var im=hh&&hh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},WQ=hh&&hh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(hh,"__esModule",{value:!0});hh.LexerActionExecutor=void 0;var kGe=v5(),QQ=r2e(),VQ=an(),dh=re(),ox=class $5{constructor(e){this._lexerActions=e;let r=VQ.MurmurHash.initialize();for(let n of e)r=VQ.MurmurHash.update(r,n);this.cachedHashCode=VQ.MurmurHash.finish(r,e.length)}static append(e,r){if(!e)return new $5([r]);let n=e._lexerActions.slice(0);return n.push(r),new $5(n)}fixOffsetBeforeMatch(e){let r;for(let n=0;n<this._lexerActions.length;n++)this._lexerActions[n].isPositionDependent&&!(this._lexerActions[n]instanceof QQ.LexerIndexedCustomAction)&&(r||(r=this._lexerActions.slice(0)),r[n]=new QQ.LexerIndexedCustomAction(e,this._lexerActions[n]));return r?new $5(r):this}get lexerActions(){return this._lexerActions}execute(e,r,n){let i=!1,s=r.index;try{for(let o of this._lexerActions){if(o instanceof QQ.LexerIndexedCustomAction){let a=o.offset;r.seek(n+a),o=o.action,i=n+a!==s}else o.isPositionDependent&&(r.seek(s),i=!1);o.execute(e)}}finally{i&&r.seek(s)}}hashCode(){return this.cachedHashCode}equals(e){return e===this?!0:e instanceof $5?this.cachedHashCode===e.cachedHashCode&&kGe.ArrayEqualityComparator.INSTANCE.equals(this._lexerActions,e._lexerActions):!1}};im([dh.NotNull],ox.prototype,"_lexerActions",void 0);im([dh.NotNull],ox.prototype,"lexerActions",null);im([WQ(0,dh.NotNull)],ox.prototype,"execute",null);im([dh.Override],ox.prototype,"hashCode",null);im([dh.Override],ox.prototype,"equals",null);im([dh.NotNull,WQ(1,dh.NotNull)],ox,"append",null);ox=im([WQ(0,dh.NotNull)],ox);hh.LexerActionExecutor=ox});var H5=v(ph=>{"use strict";var YQ=ph&&ph.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},BGe=ph&&ph.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(ph,"__esModule",{value:!0});ph.LexerNoViableAltException=void 0;var qGe=ic(),KQ=re(),UGe=Os(),$Ge=ka(),j5=class extends qGe.RecognitionException{constructor(e,r,n,i){super(e,r),this._startIndex=n,this._deadEndConfigs=i}get startIndex(){return this._startIndex}get deadEndConfigs(){return this._deadEndConfigs}get inputStream(){return super.inputStream}toString(){let e="";return this._startIndex>=0&&this._startIndex<this.inputStream.size&&(e=this.inputStream.getText(UGe.Interval.of(this._startIndex,this._startIndex)),e=$Ge.escapeWhitespace(e,!1)),`LexerNoViableAltException('${e}')`}};YQ([KQ.Override],j5.prototype,"inputStream",null);YQ([KQ.Override],j5.prototype,"toString",null);j5=YQ([BGe(1,KQ.NotNull)],j5);ph.LexerNoViableAltException=j5});var i2e=v(eE=>{"use strict";var XQ=eE&&eE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(eE,"__esModule",{value:!0});eE.OrderedATNConfigSet=void 0;var jGe=Py(),JQ=re(),Zy=class t extends jGe.ATNConfigSet{constructor(e,r){e!=null&&r!=null?super(e,r):super()}clone(e){let r=new t(this,e);return!e&&this.isReadOnly&&r.addAll(this),r}getKey(e){return{state:0,alt:e.hashCode()}}canMerge(e,r,n){return e.equals(n)}};XQ([JQ.Override],Zy.prototype,"clone",null);XQ([JQ.Override],Zy.prototype,"getKey",null);XQ([JQ.Override],Zy.prototype,"canMerge",null);eE.OrderedATNConfigSet=Zy});var rE=v(Ul=>{"use strict";var _n=Ul&&Ul.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},nr=Ul&&Ul.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Ul,"__esModule",{value:!0});Ul.LexerATNSimulator=void 0;var HGe=gQ(),zGe=Iu(),GGe=D5(),QGe=Py(),Ow=I5(),s2e=w5(),VGe=Os(),z5=Yf(),tE=dc(),WGe=n2e(),YGe=H5(),Dt=re(),o2e=i2e(),ZQ=Fu(),a2e=Wy(),KGe=gr(),u2e=Ts(),Rr=class za extends Ow.ATNSimulator{constructor(e,r){super(e),this.optimize_tail_calls=!0,this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=tE.Lexer.DEFAULT_MODE,this.prevAccept=new za.SimState,this.recog=r}copyState(e){this._charPositionInLine=e.charPositionInLine,this._line=e._line,this.mode=e.mode,this.startIndex=e.startIndex}match(e,r){this.mode=r;let n=e.mark();try{this.startIndex=e.index,this.prevAccept.reset();let i=this.atn.modeToDFA[r].s0;return i==null?this.matchATN(e):this.execATN(e,i)}finally{e.release(n)}}reset(){this.prevAccept.reset(),this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=tE.Lexer.DEFAULT_MODE}matchATN(e){let r=this.atn.modeToStartState[this.mode];za.debug&&console.log(`matchATN mode ${this.mode} start: ${r}`);let n=this.mode,i=this.computeStartState(e,r),s=i.hasSemanticContext;s&&(i.hasSemanticContext=!1);let o=this.addDFAState(i);if(!s){let u=this.atn.modeToDFA[this.mode];u.s0?o=u.s0:u.s0=o}let a=this.execATN(e,o);return za.debug&&console.log(`DFA after matchATN: ${this.atn.modeToDFA[n].toLexerString()}`),a}execATN(e,r){za.debug&&console.log(`start state closure=${r.configs}`),r.isAcceptState&&this.captureSimState(this.prevAccept,e,r);let n=e.LA(1),i=r;for(;;){za.debug&&console.log(`execATN loop starting closure: ${i.configs}`);let s=this.getExistingTargetState(i,n);if(s==null&&(s=this.computeTargetState(e,i,n)),s===Ow.ATNSimulator.ERROR||(n!==z5.IntStream.EOF&&this.consume(e),s.isAcceptState&&(this.captureSimState(this.prevAccept,e,s),n===z5.IntStream.EOF)))break;n=e.LA(1),i=s}return this.failOrAccept(this.prevAccept,e,i.configs,n)}getExistingTargetState(e,r){let n=e.getTarget(r);return za.debug&&n!=null&&console.log("reuse state "+e.stateNumber+" edge to "+n.stateNumber),n}computeTargetState(e,r,n){let i=new o2e.OrderedATNConfigSet;return this.getReachableConfigSet(e,r.configs,i,n),i.isEmpty?(i.hasSemanticContext||this.addDFAEdge(r,n,Ow.ATNSimulator.ERROR),Ow.ATNSimulator.ERROR):this.addDFAEdge(r,n,i)}failOrAccept(e,r,n,i){if(e.dfaState!=null){let s=e.dfaState.lexerActionExecutor;return this.accept(r,s,this.startIndex,e.index,e.line,e.charPos),e.dfaState.prediction}else{if(i===z5.IntStream.EOF&&r.index===this.startIndex)return KGe.Token.EOF;throw new YGe.LexerNoViableAltException(this.recog,r,this.startIndex,n)}}getReachableConfigSet(e,r,n,i){let s=zGe.ATN.INVALID_ALT_NUMBER;for(let o of r){let a=o.alt===s;if(a&&o.hasPassedThroughNonGreedyDecision)continue;za.debug&&console.log(`testing ${this.getTokenName(i)} at ${o.toString(this.recog,!0)}`);let u=o.state.numberOfOptimizedTransitions;for(let l=0;l<u;l++){let c=o.state.getOptimizedTransition(l),f=this.getReachableTarget(c,i);if(f!=null){let x=o.lexerActionExecutor,d;x!=null?(x=x.fixOffsetBeforeMatch(e.index-this.startIndex),d=o.transform(f,!0,x)):(u2e(o.lexerActionExecutor==null),d=o.transform(f,!0));let h=i===z5.IntStream.EOF;if(this.closure(e,d,n,a,!0,h)){s=o.alt;break}}}}}accept(e,r,n,i,s,o){za.debug&&console.log(`ACTION ${r}`),e.seek(i),this._line=s,this._charPositionInLine=o,r!=null&&this.recog!=null&&r.execute(this.recog,e,n)}getReachableTarget(e,r){if(e.matches(r,tE.Lexer.MIN_CHAR_VALUE,tE.Lexer.MAX_CHAR_VALUE))return e.target}computeStartState(e,r){let n=ZQ.PredictionContext.EMPTY_FULL,i=new o2e.OrderedATNConfigSet;for(let s=0;s<r.numberOfTransitions;s++){let o=r.transition(s).target,a=GGe.ATNConfig.create(o,s+1,n);this.closure(e,a,i,!1,!1,!1)}return i}closure(e,r,n,i,s,o){if(za.debug&&console.log("closure("+r.toString(this.recog,!0)+")"),r.state instanceof a2e.RuleStopState){za.debug&&(this.recog!=null?console.log(`closure at ${this.recog.ruleNames[r.state.ruleIndex]} rule stop ${r}`):console.log(`closure at rule stop ${r}`));let u=r.context;if(u.isEmpty)return n.add(r),!0;u.hasEmpty&&(n.add(r.transform(r.state,!0,ZQ.PredictionContext.EMPTY_FULL)),i=!0);for(let l=0;l<u.size;l++){let c=u.getReturnState(l);if(c===ZQ.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let f=u.getParent(l),x=this.atn.states[c],d=r.transform(x,!1,f);i=this.closure(e,d,n,i,s,o)}return i}r.state.onlyHasEpsilonTransitions||(!i||!r.hasPassedThroughNonGreedyDecision)&&n.add(r);let a=r.state;for(let u=0;u<a.numberOfOptimizedTransitions;u++){let l=a.getOptimizedTransition(u),c=this.getEpsilonTarget(e,r,l,n,s,o);c!=null&&(i=this.closure(e,c,n,i,s,o))}return i}getEpsilonTarget(e,r,n,i,s,o){let a;switch(n.serializationType){case 3:let u=n;if(this.optimize_tail_calls&&u.optimizedTailCall&&!r.context.hasEmpty)a=r.transform(n.target,!0);else{let c=r.context.getChild(u.followState.stateNumber);a=r.transform(n.target,!0,c)}break;case 10:throw new Error("Precedence predicates are not supported in lexers.");case 4:let l=n;za.debug&&console.log("EVAL rule "+l.ruleIndex+":"+l.predIndex),i.hasSemanticContext=!0,this.evaluatePredicate(e,l.ruleIndex,l.predIndex,s)?a=r.transform(n.target,!0):a=void 0;break;case 6:if(r.context.hasEmpty){let c=WGe.LexerActionExecutor.append(r.lexerActionExecutor,this.atn.lexerActions[n.actionIndex]);a=r.transform(n.target,!0,c);break}else{a=r.transform(n.target,!0);break}case 1:a=r.transform(n.target,!0);break;case 5:case 2:case 7:if(o&&n.matches(z5.IntStream.EOF,tE.Lexer.MIN_CHAR_VALUE,tE.Lexer.MAX_CHAR_VALUE)){a=r.transform(n.target,!1);break}a=void 0;break;default:a=void 0;break}return a}evaluatePredicate(e,r,n,i){if(this.recog==null)return!0;if(!i)return this.recog.sempred(void 0,r,n);let s=this._charPositionInLine,o=this._line,a=e.index,u=e.mark();try{return this.consume(e),this.recog.sempred(void 0,r,n)}finally{this._charPositionInLine=s,this._line=o,e.seek(a),e.release(u)}}captureSimState(e,r,n){e.index=r.index,e.line=this._line,e.charPos=this._charPositionInLine,e.dfaState=n}addDFAEdge(e,r,n){if(n instanceof QGe.ATNConfigSet){let i=n.hasSemanticContext;i&&(n.hasSemanticContext=!1);let s=this.addDFAState(n);return i||this.addDFAEdge(e,r,s),s}else za.debug&&console.log("EDGE "+e+" -> "+n+" upon "+String.fromCharCode(r)),e?.setTarget(r,n)}addDFAState(e){u2e(!e.hasSemanticContext);let r=new s2e.DFAState(e),n=this.atn.modeToDFA[this.mode].states.get(r);if(n!=null)return n;e.optimizeConfigs(this);let i=new s2e.DFAState(e.clone(!0)),s;for(let o of e)if(o.state instanceof a2e.RuleStopState){s=o;break}if(s!=null){let o=this.atn.ruleToTokenType[s.state.ruleIndex],a=s.lexerActionExecutor;i.acceptStateInfo=new HGe.AcceptStateInfo(o,a)}return this.atn.modeToDFA[this.mode].addState(i)}getDFA(e){return this.atn.modeToDFA[e]}getText(e){return e.getText(VGe.Interval.of(this.startIndex,e.index-1))}get line(){return this._line}set line(e){this._line=e}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(e){this._charPositionInLine=e}consume(e){e.LA(1)===10?(this._line++,this._charPositionInLine=0):this._charPositionInLine++,e.consume()}getTokenName(e){return e===-1?"EOF":"'"+String.fromCharCode(e)+"'"}};_n([Dt.NotNull],Rr.prototype,"prevAccept",void 0);_n([nr(0,Dt.NotNull)],Rr.prototype,"copyState",null);_n([nr(0,Dt.NotNull)],Rr.prototype,"match",null);_n([Dt.Override],Rr.prototype,"reset",null);_n([nr(0,Dt.NotNull)],Rr.prototype,"matchATN",null);_n([nr(0,Dt.NotNull),nr(1,Dt.NotNull)],Rr.prototype,"execATN",null);_n([nr(0,Dt.NotNull)],Rr.prototype,"getExistingTargetState",null);_n([Dt.NotNull,nr(0,Dt.NotNull),nr(1,Dt.NotNull)],Rr.prototype,"computeTargetState",null);_n([nr(0,Dt.NotNull),nr(1,Dt.NotNull),nr(2,Dt.NotNull)],Rr.prototype,"getReachableConfigSet",null);_n([nr(0,Dt.NotNull)],Rr.prototype,"accept",null);_n([Dt.NotNull,nr(0,Dt.NotNull),nr(1,Dt.NotNull)],Rr.prototype,"computeStartState",null);_n([nr(0,Dt.NotNull),nr(1,Dt.NotNull),nr(2,Dt.NotNull)],Rr.prototype,"closure",null);_n([nr(0,Dt.NotNull),nr(1,Dt.NotNull),nr(2,Dt.NotNull),nr(3,Dt.NotNull)],Rr.prototype,"getEpsilonTarget",null);_n([nr(0,Dt.NotNull)],Rr.prototype,"evaluatePredicate",null);_n([nr(0,Dt.NotNull),nr(1,Dt.NotNull),nr(2,Dt.NotNull)],Rr.prototype,"captureSimState",null);_n([Dt.NotNull,nr(0,Dt.NotNull)],Rr.prototype,"addDFAState",null);_n([Dt.NotNull],Rr.prototype,"getDFA",null);_n([Dt.NotNull,nr(0,Dt.NotNull)],Rr.prototype,"getText",null);_n([nr(0,Dt.NotNull)],Rr.prototype,"consume",null);_n([Dt.NotNull],Rr.prototype,"getTokenName",null);Rr=_n([nr(0,Dt.NotNull)],Rr);Ul.LexerATNSimulator=Rr;(function(t){t.debug=!1,t.dfa_debug=!1;class e{constructor(){this.index=-1,this.line=0,this.charPos=-1}reset(){this.index=-1,this.line=0,this.charPos=-1,this.dfaState=void 0}}t.SimState=e})(Rr=Ul.LexerATNSimulator||(Ul.LexerATNSimulator={}));Ul.LexerATNSimulator=Rr});var dc=v(nE=>{"use strict";var iE=nE&&nE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(nE,"__esModule",{value:!0});nE.Lexer=void 0;var XGe=WF(),JGe=pQ(),ZGe=Os(),l2e=Yf(),c2e=rE(),f2e=H5(),sE=re(),eQe=ky(),$l=gr(),Jo=class t extends eQe.Recognizer{constructor(e){super(),this._factory=XGe.CommonTokenFactory.DEFAULT,this._tokenStartCharIndex=-1,this._tokenStartLine=0,this._tokenStartCharPositionInLine=0,this._hitEOF=!1,this._channel=0,this._type=0,this._modeStack=new JGe.IntegerStack,this._mode=t.DEFAULT_MODE,this._input=e,this._tokenFactorySourcePair={source:this,stream:e}}static get DEFAULT_TOKEN_CHANNEL(){return $l.Token.DEFAULT_CHANNEL}static get HIDDEN(){return $l.Token.HIDDEN_CHANNEL}reset(e){(e===void 0||e)&&this._input.seek(0),this._token=void 0,this._type=$l.Token.INVALID_TYPE,this._channel=$l.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartCharPositionInLine=-1,this._tokenStartLine=-1,this._text=void 0,this._hitEOF=!1,this._mode=t.DEFAULT_MODE,this._modeStack.clear(),this.interpreter.reset()}nextToken(){if(this._input==null)throw new Error("nextToken requires a non-null input stream.");let e=this._input.mark();try{e:for(;;){if(this._hitEOF)return this.emitEOF();this._token=void 0,this._channel=$l.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartCharPositionInLine=this.interpreter.charPositionInLine,this._tokenStartLine=this.interpreter.line,this._text=void 0;do{this._type=$l.Token.INVALID_TYPE;let r;try{r=this.interpreter.match(this._input,this._mode)}catch(n){if(n instanceof f2e.LexerNoViableAltException)this.notifyListeners(n),this.recover(n),r=t.SKIP;else throw n}if(this._input.LA(1)===l2e.IntStream.EOF&&(this._hitEOF=!0),this._type===$l.Token.INVALID_TYPE&&(this._type=r),this._type===t.SKIP)continue e}while(this._type===t.MORE);return this._token==null?this.emit():this._token}}finally{this._input.release(e)}}skip(){this._type=t.SKIP}more(){this._type=t.MORE}mode(e){this._mode=e}pushMode(e){c2e.LexerATNSimulator.debug&&console.log("pushMode "+e),this._modeStack.push(this._mode),this.mode(e)}popMode(){if(this._modeStack.isEmpty)throw new Error("EmptyStackException");return c2e.LexerATNSimulator.debug&&console.log("popMode back to "+this._modeStack.peek()),this.mode(this._modeStack.pop()),this._mode}get tokenFactory(){return this._factory}set tokenFactory(e){this._factory=e}get inputStream(){return this._input}set inputStream(e){this.reset(!1),this._input=e,this._tokenFactorySourcePair={source:this,stream:this._input}}get sourceName(){return this._input.sourceName}emit(e){return e||(e=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.charIndex-1,this._tokenStartLine,this._tokenStartCharPositionInLine)),this._token=e,e}emitEOF(){let e=this.charPositionInLine,r=this.line,n=this._factory.create(this._tokenFactorySourcePair,$l.Token.EOF,void 0,$l.Token.DEFAULT_CHANNEL,this._input.index,this._input.index-1,r,e);return this.emit(n),n}get line(){return this.interpreter.line}set line(e){this.interpreter.line=e}get charPositionInLine(){return this.interpreter.charPositionInLine}set charPositionInLine(e){this.interpreter.charPositionInLine=e}get charIndex(){return this._input.index}get text(){return this._text!=null?this._text:this.interpreter.getText(this._input)}set text(e){this._text=e}get token(){return this._token}set token(e){this._token=e}set type(e){this._type=e}get type(){return this._type}set channel(e){this._channel=e}get channel(){return this._channel}getAllTokens(){let e=[],r=this.nextToken();for(;r.type!==$l.Token.EOF;)e.push(r),r=this.nextToken();return e}notifyListeners(e){let r=this._input.getText(ZGe.Interval.of(this._tokenStartCharIndex,this._input.index)),n="token recognition error at: '"+this.getErrorDisplay(r)+"'",i=this.getErrorListenerDispatch();i.syntaxError&&i.syntaxError(this,void 0,this._tokenStartLine,this._tokenStartCharPositionInLine,n,e)}getErrorDisplay(e){if(typeof e=="number"){switch(e){case $l.Token.EOF:return"<EOF>";case 10:return"\\n";case 9:return"\\t";case 13:return"\\r"}return String.fromCharCode(e)}return e.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")}getCharErrorDisplay(e){return"'"+this.getErrorDisplay(e)+"'"}recover(e){e instanceof f2e.LexerNoViableAltException?this._input.LA(1)!==l2e.IntStream.EOF&&this.interpreter.consume(this._input):this._input.consume()}};Jo.DEFAULT_MODE=0;Jo.MORE=-2;Jo.SKIP=-3;Jo.MIN_CHAR_VALUE=0;Jo.MAX_CHAR_VALUE=1114111;iE([sE.Override],Jo.prototype,"nextToken",null);iE([sE.Override],Jo.prototype,"tokenFactory",null);iE([sE.Override],Jo.prototype,"inputStream",null);iE([sE.Override],Jo.prototype,"sourceName",null);iE([sE.Override],Jo.prototype,"line",null);iE([sE.Override],Jo.prototype,"charPositionInLine",null);nE.Lexer=Jo});var oh=v(mh=>{"use strict";var xo=mh&&mh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},d2e=mh&&mh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(mh,"__esModule",{value:!0});mh.IntervalSet=void 0;var tQe=v5(),rQe=VF(),oE=Os(),x2e=dc(),Dw=an(),ws=re(),eV=gr(),Ai=class t{constructor(e){this.readonly=!1,e!=null?this._intervals=e.slice(0):this._intervals=[]}static get COMPLETE_CHAR_SET(){return t._COMPLETE_CHAR_SET===void 0&&(t._COMPLETE_CHAR_SET=t.of(x2e.Lexer.MIN_CHAR_VALUE,x2e.Lexer.MAX_CHAR_VALUE),t._COMPLETE_CHAR_SET.setReadonly(!0)),t._COMPLETE_CHAR_SET}static get EMPTY_SET(){return t._EMPTY_SET==null&&(t._EMPTY_SET=new t,t._EMPTY_SET.setReadonly(!0)),t._EMPTY_SET}static of(e,r=e){let n=new t;return n.add(e,r),n}clear(){if(this.readonly)throw new Error("can't alter readonly IntervalSet");this._intervals.length=0}add(e,r=e){this.addRange(oE.Interval.of(e,r))}addRange(e){if(this.readonly)throw new Error("can't alter readonly IntervalSet");if(!(e.b<e.a)){for(let r=0;r<this._intervals.length;r++){let n=this._intervals[r];if(e.equals(n))return;if(e.adjacent(n)||!e.disjoint(n)){let i=e.union(n);for(this._intervals[r]=i;r<this._intervals.length-1;){r++;let s=this._intervals[r];if(!i.adjacent(s)&&i.disjoint(s))break;this._intervals.splice(r,1),r--,this._intervals[r]=i.union(s)}return}if(e.startsBeforeDisjoint(n)){this._intervals.splice(r,0,e);return}}this._intervals.push(e)}}static or(e){let r=new t;for(let n of e)r.addAll(n);return r}addAll(e){if(e==null)return this;if(e instanceof t){let r=e,n=r._intervals.length;for(let i=0;i<n;i++){let s=r._intervals[i];this.add(s.a,s.b)}}else for(let r of e.toArray())this.add(r);return this}complementRange(e,r){return this.complement(t.of(e,r))}complement(e){if(e.isNil)return t.EMPTY_SET;let r;return e instanceof t?r=e:(r=new t,r.addAll(e)),r.subtract(this)}subtract(e){if(e==null||e.isNil)return new t(this._intervals);if(e instanceof t)return t.subtract(this,e);let r=new t;return r.addAll(e),t.subtract(this,r)}static subtract(e,r){if(e.isNil)return new t;let n=new t(e._intervals);if(r.isNil)return n;let i=0,s=0;for(;i<n._intervals.length&&s<r._intervals.length;){let o=n._intervals[i],a=r._intervals[s];if(a.b<o.a){s++;continue}if(a.a>o.b){i++;continue}let u,l;if(a.a>o.a&&(u=new oE.Interval(o.a,a.a-1)),a.b<o.b&&(l=new oE.Interval(a.b+1,o.b)),u)if(l){n._intervals[i]=u,n._intervals.splice(i+1,0,l),i++,s++;continue}else{n._intervals[i]=u,i++;continue}else if(l){n._intervals[i]=l,s++;continue}else{n._intervals.splice(i,1);continue}}return n}or(e){let r=new t;return r.addAll(this),r.addAll(e),r}and(e){if(e.isNil)return new t;let r=this._intervals,n=e._intervals,i,s=r.length,o=n.length,a=0,u=0;for(;a<s&&u<o;){let l=r[a],c=n[u];l.startsBeforeDisjoint(c)?a++:c.startsBeforeDisjoint(l)?u++:l.properlyContains(c)?(i||(i=new t),i.addRange(l.intersection(c)),u++):c.properlyContains(l)?(i||(i=new t),i.addRange(l.intersection(c)),a++):l.disjoint(c)||(i||(i=new t),i.addRange(l.intersection(c)),l.startsAfterNonDisjoint(c)?u++:c.startsAfterNonDisjoint(l)&&a++)}return i||new t}contains(e){let r=this._intervals.length,n=0,i=r-1;for(;n<=i;){let s=n+i>>1,o=this._intervals[s],a=o.a;if(o.b<e)n=s+1;else if(a>e)i=s-1;else return!0}return!1}get isNil(){return this._intervals==null||this._intervals.length===0}get maxElement(){if(this.isNil)throw new RangeError("set is empty");return this._intervals[this._intervals.length-1].b}get minElement(){if(this.isNil)throw new RangeError("set is empty");return this._intervals[0].a}get intervals(){return this._intervals}hashCode(){let e=Dw.MurmurHash.initialize();for(let r of this._intervals)e=Dw.MurmurHash.update(e,r.a),e=Dw.MurmurHash.update(e,r.b);return e=Dw.MurmurHash.finish(e,this._intervals.length*2),e}equals(e){return e==null||!(e instanceof t)?!1:tQe.ArrayEqualityComparator.INSTANCE.equals(this._intervals,e._intervals)}toString(e=!1){let r="";if(this._intervals==null||this._intervals.length===0)return"{}";this.size>1&&(r+="{");let n=!0;for(let i of this._intervals){n?n=!1:r+=", ";let s=i.a,o=i.b;s===o?s===eV.Token.EOF?r+="<EOF>":e?r+="'"+String.fromCodePoint(s)+"'":r+=s:e?r+="'"+String.fromCodePoint(s)+"'..'"+String.fromCodePoint(o)+"'":r+=s+".."+o}return this.size>1&&(r+="}"),r}toStringVocabulary(e){if(this._intervals==null||this._intervals.length===0)return"{}";let r="";this.size>1&&(r+="{");let n=!0;for(let i of this._intervals){n?n=!1:r+=", ";let s=i.a,o=i.b;if(s===o)r+=this.elementName(e,s);else for(let a=s;a<=o;a++)a>s&&(r+=", "),r+=this.elementName(e,a)}return this.size>1&&(r+="}"),r}elementName(e,r){return r===eV.Token.EOF?"<EOF>":r===eV.Token.EPSILON?"<EPSILON>":e.getDisplayName(r)}get size(){let e=0,r=this._intervals.length;if(r===1){let n=this._intervals[0];return n.b-n.a+1}for(let n=0;n<r;n++){let i=this._intervals[n];e+=i.b-i.a+1}return e}toIntegerList(){let e=new rQe.IntegerList(this.size),r=this._intervals.length;for(let n=0;n<r;n++){let i=this._intervals[n],s=i.a,o=i.b;for(let a=s;a<=o;a++)e.add(a)}return e}toSet(){let e=new Set;for(let r of this._intervals){let n=r.a,i=r.b;for(let s=n;s<=i;s++)e.add(s)}return e}toArray(){let e=new Array,r=this._intervals.length;for(let n=0;n<r;n++){let i=this._intervals[n],s=i.a,o=i.b;for(let a=s;a<=o;a++)e.push(a)}return e}remove(e){if(this.readonly)throw new Error("can't alter readonly IntervalSet");let r=this._intervals.length;for(let n=0;n<r;n++){let i=this._intervals[n],s=i.a,o=i.b;if(e<s)break;if(e===s&&e===o){this._intervals.splice(n,1);break}if(e===s){this._intervals[n]=oE.Interval.of(i.a+1,i.b);break}if(e===o){this._intervals[n]=oE.Interval.of(i.a,i.b-1);break}if(e>s&&e<o){let a=i.b;this._intervals[n]=oE.Interval.of(i.a,e-1),this.add(e+1,a)}}}get isReadonly(){return this.readonly}setReadonly(e){if(this.readonly&&!e)throw new Error("can't alter readonly IntervalSet");this.readonly=e}};xo([ws.Override],Ai.prototype,"addAll",null);xo([ws.Override],Ai.prototype,"complement",null);xo([ws.Override],Ai.prototype,"subtract",null);xo([ws.Override],Ai.prototype,"or",null);xo([ws.Override],Ai.prototype,"and",null);xo([ws.Override],Ai.prototype,"contains",null);xo([ws.Override],Ai.prototype,"isNil",null);xo([ws.Override],Ai.prototype,"hashCode",null);xo([ws.Override],Ai.prototype,"equals",null);xo([d2e(0,ws.NotNull)],Ai.prototype,"toStringVocabulary",null);xo([ws.NotNull,d2e(0,ws.NotNull)],Ai.prototype,"elementName",null);xo([ws.Override],Ai.prototype,"size",null);xo([ws.Override],Ai.prototype,"remove",null);xo([ws.NotNull],Ai,"of",null);xo([ws.NotNull],Ai,"subtract",null);mh.IntervalSet=Ai});var tV=v(aE=>{"use strict";var nQe=aE&&aE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(aE,"__esModule",{value:!0});aE.ATNDeserializationOptions=void 0;var iQe=re(),Nw=class t{constructor(e){this.readOnly=!1,e?(this.verifyATN=e.verifyATN,this.generateRuleBypassTransitions=e.generateRuleBypassTransitions,this.optimize=e.optimize):(this.verifyATN=!0,this.generateRuleBypassTransitions=!1,this.optimize=!0)}static get defaultOptions(){return t._defaultOptions==null&&(t._defaultOptions=new t,t._defaultOptions.makeReadOnly()),t._defaultOptions}get isReadOnly(){return this.readOnly}makeReadOnly(){this.readOnly=!0}get isVerifyATN(){return this.verifyATN}set isVerifyATN(e){this.throwIfReadOnly(),this.verifyATN=e}get isGenerateRuleBypassTransitions(){return this.generateRuleBypassTransitions}set isGenerateRuleBypassTransitions(e){this.throwIfReadOnly(),this.generateRuleBypassTransitions=e}get isOptimize(){return this.optimize}set isOptimize(e){this.throwIfReadOnly(),this.optimize=e}throwIfReadOnly(){if(this.isReadOnly)throw new Error("The object is read only.")}};nQe([iQe.NotNull],Nw,"defaultOptions",null);aE.ATNDeserializationOptions=Nw});var rV=v(gh=>{"use strict";var G5=gh&&gh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},sQe=gh&&gh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(gh,"__esModule",{value:!0});gh.ActionTransition=void 0;var Q5=re(),oQe=Kf(),sm=class extends oQe.Transition{constructor(e,r,n=-1,i=!1){super(e),this.ruleIndex=r,this.actionIndex=n,this.isCtxDependent=i}get serializationType(){return 6}get isEpsilon(){return!0}matches(e,r,n){return!1}toString(){return"action_"+this.ruleIndex+":"+this.actionIndex}};G5([Q5.Override],sm.prototype,"serializationType",null);G5([Q5.Override],sm.prototype,"isEpsilon",null);G5([Q5.Override],sm.prototype,"matches",null);G5([Q5.Override],sm.prototype,"toString",null);sm=G5([sQe(0,Q5.NotNull)],sm);gh.ActionTransition=sm});var nV=v(yh=>{"use strict";var V5=yh&&yh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},aQe=yh&&yh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(yh,"__esModule",{value:!0});yh.AtomTransition=void 0;var uQe=oh(),om=re(),lQe=Kf(),am=class extends lQe.Transition{constructor(e,r){super(e),this._label=r}get serializationType(){return 5}get label(){return uQe.IntervalSet.of(this._label)}matches(e,r,n){return this._label===e}toString(){return String(this.label)}};V5([om.Override],am.prototype,"serializationType",null);V5([om.Override,om.NotNull],am.prototype,"label",null);V5([om.Override],am.prototype,"matches",null);V5([om.Override,om.NotNull],am.prototype,"toString",null);am=V5([aQe(0,om.NotNull)],am);yh.AtomTransition=am});var W5=v(Fw=>{"use strict";Object.defineProperty(Fw,"__esModule",{value:!0});Fw.BlockStartState=void 0;var cQe=Yd(),iV=class extends cQe.DecisionState{};Fw.BlockStartState=iV});var h2e=v(uE=>{"use strict";var fQe=uE&&uE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(uE,"__esModule",{value:!0});uE.BasicBlockStartState=void 0;var xQe=Ei(),dQe=W5(),hQe=re(),ww=class extends dQe.BlockStartState{get stateType(){return xQe.ATNStateType.BLOCK_START}};fQe([hQe.Override],ww.prototype,"stateType",null);uE.BasicBlockStartState=ww});var p2e=v(lE=>{"use strict";var pQe=lE&&lE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(lE,"__esModule",{value:!0});lE.BlockEndState=void 0;var mQe=nc(),gQe=Ei(),yQe=re(),Lw=class extends mQe.ATNState{get stateType(){return gQe.ATNStateType.BLOCK_END}};pQe([yQe.Override],Lw.prototype,"stateType",null);lE.BlockEndState=Lw});var m2e=v(Eh=>{"use strict";var Y5=Eh&&Eh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},EQe=Eh&&Eh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Eh,"__esModule",{value:!0});Eh.EpsilonTransition=void 0;var cE=re(),AQe=Kf(),um=class extends AQe.Transition{constructor(e,r=-1){super(e),this._outermostPrecedenceReturn=r}get outermostPrecedenceReturn(){return this._outermostPrecedenceReturn}get serializationType(){return 1}get isEpsilon(){return!0}matches(e,r,n){return!1}toString(){return"epsilon"}};Y5([cE.Override],um.prototype,"serializationType",null);Y5([cE.Override],um.prototype,"isEpsilon",null);Y5([cE.Override],um.prototype,"matches",null);Y5([cE.Override,cE.NotNull],um.prototype,"toString",null);um=Y5([EQe(0,cE.NotNull)],um);Eh.EpsilonTransition=um});var g2e=v(Ah=>{"use strict";var fE=Ah&&Ah.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},SQe=Ah&&Ah.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Ah,"__esModule",{value:!0});Ah.LexerChannelAction=void 0;var Iw=an(),lm=re(),ax=class t{constructor(e){this._channel=e}get channel(){return this._channel}get actionType(){return 0}get isPositionDependent(){return!1}execute(e){e.channel=this._channel}hashCode(){let e=Iw.MurmurHash.initialize();return e=Iw.MurmurHash.update(e,this.actionType),e=Iw.MurmurHash.update(e,this._channel),Iw.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof t?this._channel===e._channel:!1}toString(){return`channel(${this._channel})`}};fE([lm.Override],ax.prototype,"actionType",null);fE([lm.Override],ax.prototype,"isPositionDependent",null);fE([lm.Override,SQe(0,lm.NotNull)],ax.prototype,"execute",null);fE([lm.Override],ax.prototype,"hashCode",null);fE([lm.Override],ax.prototype,"equals",null);fE([lm.Override],ax.prototype,"toString",null);Ah.LexerChannelAction=ax});var y2e=v(vh=>{"use strict";var X5=vh&&vh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},vQe=vh&&vh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(vh,"__esModule",{value:!0});vh.LexerCustomAction=void 0;var K5=an(),xE=re(),Sh=class t{constructor(e,r){this._ruleIndex=e,this._actionIndex=r}get ruleIndex(){return this._ruleIndex}get actionIndex(){return this._actionIndex}get actionType(){return 1}get isPositionDependent(){return!0}execute(e){e.action(void 0,this._ruleIndex,this._actionIndex)}hashCode(){let e=K5.MurmurHash.initialize();return e=K5.MurmurHash.update(e,this.actionType),e=K5.MurmurHash.update(e,this._ruleIndex),e=K5.MurmurHash.update(e,this._actionIndex),K5.MurmurHash.finish(e,3)}equals(e){return e===this?!0:e instanceof t?this._ruleIndex===e._ruleIndex&&this._actionIndex===e._actionIndex:!1}};X5([xE.Override],Sh.prototype,"actionType",null);X5([xE.Override],Sh.prototype,"isPositionDependent",null);X5([xE.Override,vQe(0,xE.NotNull)],Sh.prototype,"execute",null);X5([xE.Override],Sh.prototype,"hashCode",null);X5([xE.Override],Sh.prototype,"equals",null);vh.LexerCustomAction=Sh});var E2e=v(_h=>{"use strict";var dE=_h&&_h.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},_Qe=_h&&_h.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(_h,"__esModule",{value:!0});_h.LexerModeAction=void 0;var Mw=an(),cm=re(),ux=class t{constructor(e){this._mode=e}get mode(){return this._mode}get actionType(){return 2}get isPositionDependent(){return!1}execute(e){e.mode(this._mode)}hashCode(){let e=Mw.MurmurHash.initialize();return e=Mw.MurmurHash.update(e,this.actionType),e=Mw.MurmurHash.update(e,this._mode),Mw.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof t?this._mode===e._mode:!1}toString(){return`mode(${this._mode})`}};dE([cm.Override],ux.prototype,"actionType",null);dE([cm.Override],ux.prototype,"isPositionDependent",null);dE([cm.Override,_Qe(0,cm.NotNull)],ux.prototype,"execute",null);dE([cm.Override],ux.prototype,"hashCode",null);dE([cm.Override],ux.prototype,"equals",null);dE([cm.Override],ux.prototype,"toString",null);_h.LexerModeAction=ux});var A2e=v(pc=>{"use strict";var hE=pc&&pc.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},bQe=pc&&pc.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(pc,"__esModule",{value:!0});pc.LexerMoreAction=void 0;var sV=an(),fm=re(),hc=class{constructor(){}get actionType(){return 3}get isPositionDependent(){return!1}execute(e){e.more()}hashCode(){let e=sV.MurmurHash.initialize();return e=sV.MurmurHash.update(e,this.actionType),sV.MurmurHash.finish(e,1)}equals(e){return e===this}toString(){return"more"}};hE([fm.Override],hc.prototype,"actionType",null);hE([fm.Override],hc.prototype,"isPositionDependent",null);hE([fm.Override,bQe(0,fm.NotNull)],hc.prototype,"execute",null);hE([fm.Override],hc.prototype,"hashCode",null);hE([fm.Override],hc.prototype,"equals",null);hE([fm.Override],hc.prototype,"toString",null);pc.LexerMoreAction=hc;(function(t){t.INSTANCE=new t})(hc=pc.LexerMoreAction||(pc.LexerMoreAction={}))});var S2e=v(gc=>{"use strict";var pE=gc&&gc.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},TQe=gc&&gc.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(gc,"__esModule",{value:!0});gc.LexerPopModeAction=void 0;var oV=an(),xm=re(),mc=class{constructor(){}get actionType(){return 4}get isPositionDependent(){return!1}execute(e){e.popMode()}hashCode(){let e=oV.MurmurHash.initialize();return e=oV.MurmurHash.update(e,this.actionType),oV.MurmurHash.finish(e,1)}equals(e){return e===this}toString(){return"popMode"}};pE([xm.Override],mc.prototype,"actionType",null);pE([xm.Override],mc.prototype,"isPositionDependent",null);pE([xm.Override,TQe(0,xm.NotNull)],mc.prototype,"execute",null);pE([xm.Override],mc.prototype,"hashCode",null);pE([xm.Override],mc.prototype,"equals",null);pE([xm.Override],mc.prototype,"toString",null);gc.LexerPopModeAction=mc;(function(t){t.INSTANCE=new t})(mc=gc.LexerPopModeAction||(gc.LexerPopModeAction={}))});var v2e=v(bh=>{"use strict";var mE=bh&&bh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},CQe=bh&&bh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(bh,"__esModule",{value:!0});bh.LexerPushModeAction=void 0;var Pw=an(),dm=re(),lx=class t{constructor(e){this._mode=e}get mode(){return this._mode}get actionType(){return 5}get isPositionDependent(){return!1}execute(e){e.pushMode(this._mode)}hashCode(){let e=Pw.MurmurHash.initialize();return e=Pw.MurmurHash.update(e,this.actionType),e=Pw.MurmurHash.update(e,this._mode),Pw.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof t?this._mode===e._mode:!1}toString(){return`pushMode(${this._mode})`}};mE([dm.Override],lx.prototype,"actionType",null);mE([dm.Override],lx.prototype,"isPositionDependent",null);mE([dm.Override,CQe(0,dm.NotNull)],lx.prototype,"execute",null);mE([dm.Override],lx.prototype,"hashCode",null);mE([dm.Override],lx.prototype,"equals",null);mE([dm.Override],lx.prototype,"toString",null);bh.LexerPushModeAction=lx});var _2e=v(Ec=>{"use strict";var gE=Ec&&Ec.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},RQe=Ec&&Ec.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Ec,"__esModule",{value:!0});Ec.LexerSkipAction=void 0;var aV=an(),hm=re(),yc=class{constructor(){}get actionType(){return 6}get isPositionDependent(){return!1}execute(e){e.skip()}hashCode(){let e=aV.MurmurHash.initialize();return e=aV.MurmurHash.update(e,this.actionType),aV.MurmurHash.finish(e,1)}equals(e){return e===this}toString(){return"skip"}};gE([hm.Override],yc.prototype,"actionType",null);gE([hm.Override],yc.prototype,"isPositionDependent",null);gE([hm.Override,RQe(0,hm.NotNull)],yc.prototype,"execute",null);gE([hm.Override],yc.prototype,"hashCode",null);gE([hm.Override],yc.prototype,"equals",null);gE([hm.Override],yc.prototype,"toString",null);Ec.LexerSkipAction=yc;(function(t){t.INSTANCE=new t})(yc=Ec.LexerSkipAction||(Ec.LexerSkipAction={}))});var b2e=v(Th=>{"use strict";var yE=Th&&Th.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},OQe=Th&&Th.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Th,"__esModule",{value:!0});Th.LexerTypeAction=void 0;var kw=an(),pm=re(),cx=class t{constructor(e){this._type=e}get type(){return this._type}get actionType(){return 7}get isPositionDependent(){return!1}execute(e){e.type=this._type}hashCode(){let e=kw.MurmurHash.initialize();return e=kw.MurmurHash.update(e,this.actionType),e=kw.MurmurHash.update(e,this._type),kw.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof t?this._type===e._type:!1}toString(){return`type(${this._type})`}};yE([pm.Override],cx.prototype,"actionType",null);yE([pm.Override],cx.prototype,"isPositionDependent",null);yE([pm.Override,OQe(0,pm.NotNull)],cx.prototype,"execute",null);yE([pm.Override],cx.prototype,"hashCode",null);yE([pm.Override],cx.prototype,"equals",null);yE([pm.Override],cx.prototype,"toString",null);Th.LexerTypeAction=cx});var uV=v(EE=>{"use strict";var DQe=EE&&EE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(EE,"__esModule",{value:!0});EE.LoopEndState=void 0;var NQe=nc(),FQe=Ei(),wQe=re(),Bw=class extends NQe.ATNState{get stateType(){return FQe.ATNStateType.LOOP_END}};DQe([wQe.Override],Bw.prototype,"stateType",null);EE.LoopEndState=Bw});var R2e=v(AE=>{"use strict";var T2e=AE&&AE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(AE,"__esModule",{value:!0});AE.ConflictInfo=void 0;var C2e=re(),LQe=ka(),J5=class t{constructor(e,r){this._conflictedAlts=e,this.exact=r}get conflictedAlts(){return this._conflictedAlts}get isExact(){return this.exact}equals(e){return e===this?!0:e instanceof t?this.isExact===e.isExact&&LQe.equals(this.conflictedAlts,e.conflictedAlts):!1}hashCode(){return this.conflictedAlts.hashCode()}};T2e([C2e.Override],J5.prototype,"equals",null);T2e([C2e.Override],J5.prototype,"hashCode",null);AE.ConflictInfo=J5});var fx=v(SE=>{"use strict";var Ac=SE&&SE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(SE,"__esModule",{value:!0});SE.TerminalNode=void 0;var IQe=Os(),Sc=re(),MQe=gr(),Ga=class{constructor(e){this._symbol=e}getChild(e){throw new RangeError("Terminal Node has no children.")}get symbol(){return this._symbol}get parent(){return this._parent}setParent(e){this._parent=e}get payload(){return this._symbol}get sourceInterval(){let e=this._symbol.tokenIndex;return new IQe.Interval(e,e)}get childCount(){return 0}accept(e){return e.visitTerminal(this)}get text(){return this._symbol.text||""}toStringTree(e){return this.toString()}toString(){return this._symbol.type===MQe.Token.EOF?"<EOF>":this._symbol.text||""}};Ac([Sc.Override],Ga.prototype,"getChild",null);Ac([Sc.Override],Ga.prototype,"parent",null);Ac([Sc.Override],Ga.prototype,"setParent",null);Ac([Sc.Override],Ga.prototype,"payload",null);Ac([Sc.Override],Ga.prototype,"sourceInterval",null);Ac([Sc.Override],Ga.prototype,"childCount",null);Ac([Sc.Override],Ga.prototype,"accept",null);Ac([Sc.Override],Ga.prototype,"text",null);Ac([Sc.Override],Ga.prototype,"toStringTree",null);Ac([Sc.Override],Ga.prototype,"toString",null);SE.TerminalNode=Ga});var _E=v(vE=>{"use strict";var PQe=vE&&vE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(vE,"__esModule",{value:!0});vE.ErrorNode=void 0;var kQe=re(),BQe=fx(),qw=class extends BQe.TerminalNode{constructor(e){super(e)}accept(e){return e.visitErrorNode(this)}};PQe([kQe.Override],qw.prototype,"accept",null);vE.ErrorNode=qw});var bE=v(Uw=>{"use strict";Object.defineProperty(Uw,"__esModule",{value:!0});Uw.RuleNode=void 0;var lV=class{};Uw.RuleNode=lV});var xx=v(Ch=>{"use strict";var xV=Ch&&Ch.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},dV=Ch&&Ch.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Ch,"__esModule",{value:!0});Ch.Trees=void 0;var qQe=Iu(),UQe=Dy(),$Qe=_E(),$w=re(),O2e=mm(),cV=Qa(),jQe=bE(),fV=fx(),HQe=gr(),D2e=ka(),TE=class t{static toStringTree(e,r){let n;r instanceof O2e.Parser?n=r.ruleNames:n=r;let i=D2e.escapeWhitespace(this.getNodeText(e,n),!1);if(e.childCount===0)return i;let s="";s+="(",i=D2e.escapeWhitespace(this.getNodeText(e,n),!1),s+=i,s+=" ";for(let o=0;o<e.childCount;o++)o>0&&(s+=" "),s+=this.toStringTree(e.getChild(o),n);return s+=")",s}static getNodeText(e,r){let n;if(r instanceof O2e.Parser)n=r.ruleNames;else if(r)n=r;else{let i=e.payload;return typeof i.text=="string"?i.text:e.payload.toString()}if(e instanceof jQe.RuleNode){let i=e.ruleContext,s=i.ruleIndex,o=n[s],a=i.altNumber;return a!==qQe.ATN.INVALID_ALT_NUMBER?o+":"+a:o}else{if(e instanceof $Qe.ErrorNode)return e.toString();if(e instanceof fV.TerminalNode)return e.symbol.text||""}throw new TypeError("Unexpected node type")}static getChildren(e){let r=[];for(let n=0;n<e.childCount;n++)r.push(e.getChild(n));return r}static getAncestors(e){let r=[],n=e.parent;for(;n;)r.unshift(n),n=n.parent;return r}static isAncestorOf(e,r){if(!e||!r||!e.parent)return!1;let n=r.parent;for(;n;){if(e===n)return!0;n=n.parent}return!1}static findAllTokenNodes(e,r){return t.findAllNodes(e,r,!0)}static findAllRuleNodes(e,r){return t.findAllNodes(e,r,!1)}static findAllNodes(e,r,n){let i=[];return t._findAllNodes(e,r,n,i),i}static _findAllNodes(e,r,n,i){n&&e instanceof fV.TerminalNode?e.symbol.type===r&&i.push(e):!n&&e instanceof cV.ParserRuleContext&&e.ruleIndex===r&&i.push(e);for(let s=0;s<e.childCount;s++)t._findAllNodes(e.getChild(s),r,n,i)}static getDescendants(e){let r=[];function n(i){r.push(i);let s=i.childCount;for(let o=0;o<s;o++)n(i.getChild(o))}return n(e),r}static getRootOfSubtreeEnclosingRegion(e,r,n){let i=e.childCount;for(let s=0;s<i;s++){let o=e.getChild(s),a=t.getRootOfSubtreeEnclosingRegion(o,r,n);if(a)return a}if(e instanceof cV.ParserRuleContext){let s=e.stop;if(r>=e.start.tokenIndex&&(s==null||n<=s.tokenIndex))return e}}static stripChildrenOutOfRange(e,r,n,i){if(!e)return;let s=e.childCount;for(let o=0;o<s;o++){let a=e.getChild(o),u=a.sourceInterval;if(a instanceof cV.ParserRuleContext&&(u.b<n||u.a>i)&&t.isAncestorOf(a,r)){let l=new UQe.CommonToken(HQe.Token.INVALID_TYPE,"...");e.children[o]=new fV.TerminalNode(l)}}}static findNodeSuchThat(e,r){if(r(e))return e;let n=e.childCount;for(let i=0;i<n;i++){let s=t.findNodeSuchThat(e.getChild(i),r);if(s!==void 0)return s}}};xV([dV(0,$w.NotNull)],TE,"toStringTree",null);xV([$w.NotNull,dV(0,$w.NotNull)],TE,"getAncestors",null);xV([dV(0,$w.NotNull)],TE,"getRootOfSubtreeEnclosingRegion",null);Ch.Trees=TE});var hV=v(CE=>{"use strict";var vc=CE&&CE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(CE,"__esModule",{value:!0});CE.RuleContext=void 0;var zQe=Iu(),GQe=ky(),QQe=bE(),VQe=Os(),_c=re(),WQe=xx(),YQe=Qa(),Va=class t extends QQe.RuleNode{constructor(e,r){super(),this._parent=e,this.invokingState=r??-1}static getChildContext(e,r){return new t(e,r)}depth(){let e=0,r=this;for(;r;)r=r._parent,e++;return e}get isEmpty(){return this.invokingState===-1}get sourceInterval(){return VQe.Interval.INVALID}get ruleContext(){return this}get parent(){return this._parent}setParent(e){this._parent=e}get payload(){return this}get text(){if(this.childCount===0)return"";let e="";for(let r=0;r<this.childCount;r++)e+=this.getChild(r).text;return e.toString()}get ruleIndex(){return-1}get altNumber(){return zQe.ATN.INVALID_ALT_NUMBER}set altNumber(e){}getChild(e){throw new RangeError("i must be greater than or equal to 0 and less than childCount")}get childCount(){return 0}accept(e){return e.visitChildren(this)}toStringTree(e){return WQe.Trees.toStringTree(this,e)}toString(e,r){let n=e instanceof GQe.Recognizer?e.ruleNames:e;r=r||YQe.ParserRuleContext.emptyContext();let i="",s=this;for(i+="[";s&&s!==r;){if(!n)s.isEmpty||(i+=s.invokingState);else{let o=s.ruleIndex,a=o>=0&&o<n.length?n[o]:o.toString();i+=a}s._parent&&(n||!s._parent.isEmpty)&&(i+=" "),s=s._parent}return i+="]",i.toString()}};vc([_c.Override],Va.prototype,"sourceInterval",null);vc([_c.Override],Va.prototype,"ruleContext",null);vc([_c.Override],Va.prototype,"parent",null);vc([_c.Override],Va.prototype,"setParent",null);vc([_c.Override],Va.prototype,"payload",null);vc([_c.Override],Va.prototype,"text",null);vc([_c.Override],Va.prototype,"getChild",null);vc([_c.Override],Va.prototype,"childCount",null);vc([_c.Override],Va.prototype,"accept",null);vc([_c.Override],Va.prototype,"toStringTree",null);CE.RuleContext=Va});var Qa=v(RE=>{"use strict";var gV=RE&&RE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(RE,"__esModule",{value:!0});RE.ParserRuleContext=void 0;var pV=_E(),mV=Os(),yV=re(),N2e=hV(),jw=fx(),Rh=class t extends N2e.RuleContext{constructor(e,r){r==null?super():super(e,r)}static emptyContext(){return t.EMPTY}copyFrom(e){if(this._parent=e._parent,this.invokingState=e.invokingState,this._start=e._start,this._stop=e._stop,e.children){this.children=[];for(let r of e.children)r instanceof pV.ErrorNode&&this.addChild(r)}}enterRule(e){}exitRule(e){}addAnyChild(e){return this.children?this.children.push(e):this.children=[e],e}addChild(e){let r;if(e instanceof jw.TerminalNode){e.setParent(this),this.addAnyChild(e);return}else if(e instanceof N2e.RuleContext){this.addAnyChild(e);return}else return e=new jw.TerminalNode(e),this.addAnyChild(e),e.setParent(this),e}addErrorNode(e){if(e instanceof pV.ErrorNode){let r=e;return r.setParent(this),this.addAnyChild(r)}else{let r=e,n=new pV.ErrorNode(r);return this.addAnyChild(n),n.setParent(this),n}}removeLastChild(){this.children&&this.children.pop()}get parent(){let e=super.parent;if(e===void 0||e instanceof t)return e;throw new TypeError("Invalid parent type for ParserRuleContext")}getChild(e,r){if(!this.children||e<0||e>=this.children.length)throw new RangeError("index parameter must be between >= 0 and <= number of children.");if(r==null)return this.children[e];let n=this.tryGetChild(e,r);if(n===void 0)throw new Error("The specified node does not exist");return n}tryGetChild(e,r){if(!this.children||e<0||e>=this.children.length)return;let n=-1;for(let i of this.children)if(i instanceof r&&(n++,n===e))return i}getToken(e,r){let n=this.tryGetToken(e,r);if(n===void 0)throw new Error("The specified token does not exist");return n}tryGetToken(e,r){if(!this.children||r<0||r>=this.children.length)return;let n=-1;for(let i of this.children)if(i instanceof jw.TerminalNode&&i.symbol.type===e&&(n++,n===r))return i}getTokens(e){let r=[];if(!this.children)return r;for(let n of this.children)n instanceof jw.TerminalNode&&n.symbol.type===e&&r.push(n);return r}get ruleContext(){return this}getRuleContext(e,r){return this.getChild(e,r)}tryGetRuleContext(e,r){return this.tryGetChild(e,r)}getRuleContexts(e){let r=[];if(!this.children)return r;for(let n of this.children)n instanceof e&&r.push(n);return r}get childCount(){return this.children?this.children.length:0}get sourceInterval(){return this._start?!this._stop||this._stop.tokenIndex<this._start.tokenIndex?mV.Interval.of(this._start.tokenIndex,this._start.tokenIndex-1):mV.Interval.of(this._start.tokenIndex,this._stop.tokenIndex):mV.Interval.INVALID}get start(){return this._start}get stop(){return this._stop}toInfoString(e){return"ParserRuleContext"+e.getRuleInvocationStack(this).reverse()+"{start="+this._start+", stop="+this._stop+"}"}};Rh.EMPTY=new Rh;gV([yV.Override],Rh.prototype,"parent",null);gV([yV.Override],Rh.prototype,"childCount",null);gV([yV.Override],Rh.prototype,"sourceInterval",null);RE.ParserRuleContext=Rh});var M2e=v(dx=>{"use strict";var F2e=dx&&dx.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(dx,"__esModule",{value:!0});dx.PredictionMode=void 0;var KQe=Y1(),Hw=an(),w2e=re(),L2e=Wy(),I2e;(function(t){t[t.SLL=0]="SLL",t[t.LL=1]="LL",t[t.LL_EXACT_AMBIG_DETECTION=2]="LL_EXACT_AMBIG_DETECTION"})(I2e=dx.PredictionMode||(dx.PredictionMode={}));(function(t){class e extends KQe.Array2DHashMap{constructor(){super(r.INSTANCE)}}class r{AltAndContextConfigEqualityComparator(){}hashCode(o){let a=Hw.MurmurHash.initialize(7);return a=Hw.MurmurHash.update(a,o.state.stateNumber),a=Hw.MurmurHash.update(a,o.context),a=Hw.MurmurHash.finish(a,2),a}equals(o,a){return o===a?!0:o==null||a==null?!1:o.state.stateNumber===a.state.stateNumber&&o.context.equals(a.context)}}r.INSTANCE=new r,F2e([w2e.Override],r.prototype,"hashCode",null),F2e([w2e.Override],r.prototype,"equals",null);function n(s){for(let o of s)if(o.state instanceof L2e.RuleStopState)return!0;return!1}t.hasConfigInRuleStopState=n;function i(s){for(let o of s)if(!(o.state instanceof L2e.RuleStopState))return!1;return!0}t.allConfigsInRuleStopStates=i})(I2e=dx.PredictionMode||(dx.PredictionMode={}))});var AV=v(Oh=>{"use strict";var XQe=Oh&&Oh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},JQe=Oh&&Oh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Oh,"__esModule",{value:!0});Oh.SimulatorState=void 0;var ZQe=re(),eVe=Qa(),EV=class{constructor(e,r,n,i){this.outerContext=e??eVe.ParserRuleContext.emptyContext(),this.s0=r,this.useContext=n,this.remainingOuterContext=i}};EV=XQe([JQe(1,ZQe.NotNull)],EV);Oh.SimulatorState=EV});var ym=v(Nh=>{"use strict";var gt=Nh&&Nh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},Me=Nh&&Nh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Nh,"__esModule",{value:!0});Nh.ParserATNSimulator=void 0;var P2e=gQ(),tVe=rV(),rVe=Xf(),nVe=zF(),bc=Iu(),k2e=D5(),hx=Py(),OE=I5(),iVe=Ei(),sVe=nV(),Z5=ex(),oVe=R2e(),aVe=Yd(),SV=w5(),uVe=VF(),zw=Os(),Gw=Yf(),_e=re(),lVe=Aw(),cVe=NE(),fVe=Pl(),B2e=Qa(),Si=Fu(),vV=tw(),DE=M2e(),gm=Wy(),q2e=Sw(),Dh=Q1(),xVe=yw(),Pu=AV(),Qw=gr(),U2e=Bl(),Vr=Ts(),dVe=65535,$2e=-(1<<31>>>0),it=class pt extends OE.ATNSimulator{constructor(e,r){super(e),this.predictionMode=DE.PredictionMode.LL,this.force_global_context=!1,this.always_try_local_context=!0,this.enable_global_context_dfa=!1,this.optimize_unique_closure=!0,this.optimize_ll1=!0,this.optimize_tail_calls=!0,this.tail_call_preserves_sll=!0,this.treat_sllk1_conflict_as_ambiguity=!1,this.reportAmbiguities=!1,this.userWantsCtxSensitive=!0,this._parser=r}getPredictionMode(){return this.predictionMode}setPredictionMode(e){this.predictionMode=e}reset(){}adaptivePredict(e,r,n,i){i===void 0&&(i=!1);let s=this.atn.decisionToDFA[r];if(Vr(s!=null),this.optimize_ll1&&!s.isPrecedenceDfa&&!s.isEmpty){let l=e.LA(1);if(l>=0&&l<=65535){let c=(r<<16>>>0)+l,f=this.atn.LL1Table.get(c);if(f!=null)return f}}this.dfa=s,this.force_global_context?i=!0:this.always_try_local_context||(i=i||s.isContextSensitive),this.userWantsCtxSensitive=i||this.predictionMode!==DE.PredictionMode.SLL&&n!=null&&!this.atn.decisionToState[r].sll,n==null&&(n=B2e.ParserRuleContext.emptyContext());let o;s.isEmpty||(o=this.getStartState(s,e,n,i)),o==null&&(n==null&&(n=B2e.ParserRuleContext.emptyContext()),pt.debug&&console.log("ATN decision "+s.decision+" exec LA(1)=="+this.getLookaheadName(e)+", outerContext="+n.toString(this._parser)),o=this.computeStartState(s,n,i));let a=e.mark(),u=e.index;try{let l=this.execDFA(s,e,u,o);return pt.debug&&console.log("DFA after predictATN: "+s.toString(this._parser.vocabulary,this._parser.ruleNames)),l}finally{this.dfa=void 0,e.seek(u),e.release(a)}}getStartState(e,r,n,i){if(!i)if(e.isPrecedenceDfa){let a=e.getPrecedenceStartState(this._parser.precedence,!1);return a==null?void 0:new Pu.SimulatorState(n,a,!1,n)}else return e.s0==null?void 0:new Pu.SimulatorState(n,e.s0,!1,n);if(!this.enable_global_context_dfa)return;let s=n;Vr(n!=null);let o;for(e.isPrecedenceDfa?o=e.getPrecedenceStartState(this._parser.precedence,!0):o=e.s0full;s!=null&&o!=null&&o.isContextSensitive;)s=this.skipTailCalls(s),o=o.getContextTarget(this.getReturnState(s)),s.isEmpty?Vr(o==null||!o.isContextSensitive):s=s.parent;if(o!=null)return new Pu.SimulatorState(n,o,i,s)}execDFA(e,r,n,i){let s=i.outerContext;pt.dfa_debug&&console.log("DFA decision "+e.decision+" exec LA(1)=="+this.getLookaheadName(r)+", outerContext="+s.toString(this._parser)),pt.dfa_debug&&console.log(e.toString(this._parser.vocabulary,this._parser.ruleNames));let o=i.s0,a=r.LA(1),u=i.remainingOuterContext;for(;;){if(pt.dfa_debug&&console.log("DFA state "+o.stateNumber+" LA(1)=="+this.getLookaheadName(r)),i.useContext)for(;o.isContextSymbol(a);){let f;if(u!=null&&(u=this.skipTailCalls(u),f=o.getContextTarget(this.getReturnState(u))),f==null){let x=new Pu.SimulatorState(i.outerContext,o,i.useContext,u);return this.execATN(e,r,n,x)}Vr(u!=null),u=u.parent,o=f}if(this.isAcceptState(o,i.useContext)){o.predicates!=null?pt.dfa_debug&&console.log("accept "+o):pt.dfa_debug&&console.log("accept; predict "+o.prediction+" in state "+o.stateNumber);break}Vr(!this.isAcceptState(o,i.useContext));let c=this.getExistingTargetState(o,a);if(c==null){pt.dfa_debug&&a>=0&&console.log("no edge for "+this._parser.vocabulary.getDisplayName(a));let f;if(pt.dfa_debug){let d=zw.Interval.of(n,this._parser.inputStream.index);console.log("ATN exec upon "+this._parser.inputStream.getText(d)+" at DFA state "+o.stateNumber)}let x=new Pu.SimulatorState(s,o,i.useContext,u);return f=this.execATN(e,r,n,x),pt.dfa_debug&&console.log("back from DFA update, alt="+f+`, dfa=
`+e.toString(this._parser.vocabulary,this._parser.ruleNames)),pt.dfa_debug&&console.log("DFA decision "+e.decision+" predicts "+f),f}else if(c===OE.ATNSimulator.ERROR){let f=new Pu.SimulatorState(s,o,i.useContext,u);return this.handleNoViableAlt(r,n,f)}o=c,!this.isAcceptState(o,i.useContext)&&a!==Gw.IntStream.EOF&&(r.consume(),a=r.LA(1))}if(!i.useContext&&o.configs.conflictInfo!=null&&e.atnStartState instanceof aVe.DecisionState&&!(!this.userWantsCtxSensitive||!o.configs.dipsIntoOuterContext&&o.configs.isExactConflict||this.treat_sllk1_conflict_as_ambiguity&&r.index===n)){Vr(!i.useContext);let c,f=o.predicates;if(f!=null){let x=r.index;if(x!==n&&r.seek(n),c=this.evalSemanticContext(f,s,!0),c.cardinality()===1)return c.nextSetBit(0);x!==n&&r.seek(x)}if(this.reportAmbiguities){let x=new Pu.SimulatorState(s,o,i.useContext,u);this.reportAttemptingFullContext(e,c,x,n,r.index)}return r.seek(n),this.adaptivePredict(r,e.decision,s,!0)}let l=o.predicates;if(l!=null){let c=r.index;n!==c&&r.seek(n);let f=this.evalSemanticContext(l,s,this.reportAmbiguities&&this.predictionMode===DE.PredictionMode.LL_EXACT_AMBIG_DETECTION);switch(f.cardinality()){case 0:throw this.noViableAlt(r,s,o.configs,n);case 1:return f.nextSetBit(0);default:return n!==c&&r.seek(c),this.reportAmbiguity(e,o,n,c,o.configs.isExactConflict,f,o.configs),f.nextSetBit(0)}}return pt.dfa_debug&&console.log("DFA decision "+e.decision+" predicts "+o.prediction),o.prediction}isAcceptState(e,r){return e.isAcceptState?e.configs.conflictingAlts==null?!0:r&&this.predictionMode===DE.PredictionMode.LL_EXACT_AMBIG_DETECTION?e.configs.isExactConflict:!0:!1}execATN(e,r,n,i){pt.debug&&console.log("execATN decision "+e.decision+" exec LA(1)=="+this.getLookaheadName(r));let s=i.outerContext,o=i.useContext,a=r.LA(1),u=i,l=new vV.PredictionContextCache;for(;;){let c=this.computeReachSet(e,u,a,l);if(c==null)return this.setDFAEdge(u.s0,r.LA(1),OE.ATNSimulator.ERROR),this.handleNoViableAlt(r,n,u);let f=c.s0;if(Vr(f.isAcceptState||f.prediction===bc.ATN.INVALID_ALT_NUMBER),Vr(f.isAcceptState||f.configs.conflictInfo==null),this.isAcceptState(f,o)){let x=f.configs.conflictingAlts,d=x==null?f.prediction:bc.ATN.INVALID_ALT_NUMBER;if(d!==bc.ATN.INVALID_ALT_NUMBER){if(this.optimize_ll1&&r.index===n&&!e.isPrecedenceDfa&&c.outerContext===c.remainingOuterContext&&e.decision>=0&&!f.configs.hasSemanticContext&&a>=0&&a<=dVe){let p=(e.decision<<16>>>0)+a;this.atn.LL1Table.set(p,d)}o&&this.always_try_local_context&&this.reportContextSensitivity(e,d,c,n,r.index)}d=f.prediction;let h=x!=null&&this.userWantsCtxSensitive;if(h&&(h=!o&&(f.configs.dipsIntoOuterContext||!f.configs.isExactConflict)&&(!this.treat_sllk1_conflict_as_ambiguity||r.index!==n)),f.configs.hasSemanticContext){let p=f.predicates;if(p!=null){let m=r.index;switch(m!==n&&r.seek(n),x=this.evalSemanticContext(p,s,h||this.reportAmbiguities),x.cardinality()){case 0:throw this.noViableAlt(r,s,f.configs,n);case 1:return x.nextSetBit(0);default:break}m!==n&&r.seek(m)}}if(h){Vr(!o),Vr(this.isAcceptState(f,!1)),pt.debug&&console.log("RETRY with outerContext="+s);let p=this.computeStartState(e,s,!0);return this.reportAmbiguities&&this.reportAttemptingFullContext(e,x,c,n,r.index),r.seek(n),this.execATN(e,r,n,p)}else return x!=null&&(this.reportAmbiguities&&x.cardinality()>1&&this.reportAmbiguity(e,f,n,r.index,f.configs.isExactConflict,x,f.configs),d=x.nextSetBit(0)),d}u=c,a!==Gw.IntStream.EOF&&(r.consume(),a=r.LA(1))}}handleNoViableAlt(e,r,n){if(n.s0!=null){let i=new Z5.BitSet,s=0;for(let o of n.s0.configs)(o.reachesIntoOuterContext||o.state instanceof gm.RuleStopState)&&(i.set(o.alt),s=Math.max(s,o.alt));switch(i.cardinality()){case 0:break;case 1:return i.nextSetBit(0);default:if(!n.s0.configs.hasSemanticContext)return i.nextSetBit(0);let o=new hx.ATNConfigSet;for(let u of n.s0.configs)(u.reachesIntoOuterContext||u.state instanceof gm.RuleStopState)&&o.add(u);let a=this.getPredsForAmbigAlts(i,o,s);if(a!=null){let u=this.getPredicatePredictions(i,a);if(u!=null){let l=e.index;try{e.seek(r);let c=this.evalSemanticContext(u,n.outerContext,!1);if(!c.isEmpty)return c.nextSetBit(0)}finally{e.seek(l)}}}return i.nextSetBit(0)}}throw this.noViableAlt(e,n.outerContext,n.s0.configs,r)}computeReachSet(e,r,n,i){let s=r.useContext,o=r.remainingOuterContext,a=r.s0;if(s)for(;a.isContextSymbol(n);){let c;if(o!=null&&(o=this.skipTailCalls(o),c=a.getContextTarget(this.getReturnState(o))),c==null)break;Vr(o!=null),o=o.parent,a=c}if(Vr(!this.isAcceptState(a,s)),this.isAcceptState(a,s))return new Pu.SimulatorState(r.outerContext,a,s,o);let u=a,l=this.getExistingTargetState(u,n);if(l==null){let c=this.computeTargetState(e,u,o,n,s,i);l=c[0],o=c[1]}if(l!==OE.ATNSimulator.ERROR)return Vr(!s||!l.configs.dipsIntoOuterContext),new Pu.SimulatorState(r.outerContext,l,s,o)}getExistingTargetState(e,r){return e.getTarget(r)}computeTargetState(e,r,n,i,s,o){let a=r.configs.toArray(),u,l=new hx.ATNConfigSet,c;do{let x=!s||n!=null;x||(l.isOutermostConfigSet=!0);let d=new hx.ATNConfigSet,h;for(let g of a){if(pt.debug&&console.log("testing "+this.getTokenName(i)+" at "+g.toString()),g.state instanceof gm.RuleStopState){Vr(g.context.isEmpty),(s&&!g.reachesIntoOuterContext||i===Gw.IntStream.EOF)&&(h==null&&(h=[]),h.push(g));continue}let y=g.state.numberOfOptimizedTransitions;for(let A=0;A<y;A++){let S=g.state.getOptimizedTransition(A),T=this.getReachableTarget(g,S,i);T!=null&&d.add(g.transform(T,!1),o)}}if(this.optimize_unique_closure&&h==null&&i!==Qw.Token.EOF&&d.uniqueAlt!==bc.ATN.INVALID_ALT_NUMBER){d.isOutermostConfigSet=l.isOutermostConfigSet,l=d;break}let p=!1,m=i===Qw.Token.EOF;if(this.closure(d,l,p,x,o,m),c=l.dipsIntoOuterContext,i===Gw.IntStream.EOF&&(l=this.removeAllConfigsNotInRuleStopState(l,o)),h!=null&&(!s||!DE.PredictionMode.hasConfigInRuleStopState(l))){Vr(h.length>0);for(let g of h)l.add(g,o)}if(s&&c){l.clear(),n=n,n=this.skipTailCalls(n);let g=this.getReturnState(n);if(u==null&&(u=new uVe.IntegerList),n.isEmpty?n=void 0:n=n.parent,u.add(g),g!==Si.PredictionContext.EMPTY_FULL_STATE_KEY)for(let y=0;y<a.length;y++)a[y]=a[y].appendContext(g,o)}}while(s&&c);return l.isEmpty?(this.setDFAEdge(r,i,OE.ATNSimulator.ERROR),[OE.ATNSimulator.ERROR,n]):[this.addDFAEdge(e,r,i,u,l,o),n]}removeAllConfigsNotInRuleStopState(e,r){if(DE.PredictionMode.allConfigsInRuleStopStates(e))return e;let n=new hx.ATNConfigSet;for(let i of e)i.state instanceof gm.RuleStopState&&n.add(i,r);return n}computeStartState(e,r,n){let i=e.isPrecedenceDfa?e.getPrecedenceStartState(this._parser.precedence,n):n?e.s0full:e.s0;if(i!=null){if(!n)return new Pu.SimulatorState(r,i,n,r);i.setContextSensitive(this.atn)}let s=e.decision,o=e.atnStartState,a=0,u=r,l=n?Si.PredictionContext.EMPTY_FULL:Si.PredictionContext.EMPTY_LOCAL,c=new vV.PredictionContextCache;if(n){if(!this.enable_global_context_dfa)for(;u!=null;)u.isEmpty?(a=Si.PredictionContext.EMPTY_FULL_STATE_KEY,u=void 0):(a=this.getReturnState(u),l=l.appendSingleContext(a,c),u=u.parent);for(;i!=null&&i.isContextSensitive&&u!=null;){let x;if(u=this.skipTailCalls(u),u.isEmpty?(x=i.getContextTarget(Si.PredictionContext.EMPTY_FULL_STATE_KEY),a=Si.PredictionContext.EMPTY_FULL_STATE_KEY,u=void 0):(a=this.getReturnState(u),x=i.getContextTarget(a),l=l.appendSingleContext(a,c),u=u.parent),x==null)break;i=x}}if(i!=null&&!i.isContextSensitive)return new Pu.SimulatorState(r,i,n,u);let f=new hx.ATNConfigSet;for(;;){let x=new hx.ATNConfigSet,d=o.numberOfTransitions;for(let A=0;A<d;A++){let S=o.transition(A).target;x.add(k2e.ATNConfig.create(S,A+1,l))}let h=u!=null;h||(f.isOutermostConfigSet=!0),this.closure(x,f,!0,h,c,!1);let m=f.dipsIntoOuterContext,g;if(n&&!this.enable_global_context_dfa){i=this.addDFAState(e,f,c);break}else i==null?e.isPrecedenceDfa?(f=this.applyPrecedenceFilter(f,r,c),g=this.addDFAState(e,f,c),e.setPrecedenceStartState(this._parser.precedence,n,g)):(g=this.addDFAState(e,f,c),n?e.s0full?g=e.s0full:e.s0full=g:e.s0?g=e.s0:e.s0=g):(e.isPrecedenceDfa&&(f=this.applyPrecedenceFilter(f,r,c)),g=this.addDFAState(e,f,c),i.setContextTarget(a,g));if(i=g,!n||!m)break;g.setContextSensitive(this.atn),u=u,f.clear(),u=this.skipTailCalls(u);let y=this.getReturnState(u);u.isEmpty?u=void 0:u=u.parent,y!==Si.PredictionContext.EMPTY_FULL_STATE_KEY&&(l=l.appendSingleContext(y,c)),a=y}return new Pu.SimulatorState(r,i,n,u)}applyPrecedenceFilter(e,r,n){let i=new Map,s=new hx.ATNConfigSet;for(let o of e){if(o.alt!==1)continue;let a=o.semanticContext.evalPrecedence(this._parser,r);a!=null&&(i.set(o.state.stateNumber,o.context),a!==o.semanticContext?s.add(o.transform(o.state,!1,a),n):s.add(o,n))}for(let o of e)if(o.alt!==1){if(!o.isPrecedenceFilterSuppressed){let a=i.get(o.state.stateNumber);if(a!=null&&a.equals(o.context))continue}s.add(o,n)}return s}getReachableTarget(e,r,n){if(r.matches(n,0,this.atn.maxTokenType))return r.target}predicateDFAState(e,r,n){let i=this.getConflictingAltsFromConfigSet(r);if(!i)throw new Error("This unhandled scenario is intended to be unreachable, but I'm currently not sure of why we know that's the case.");pt.debug&&console.log("predicateDFAState "+e);let s=this.getPredsForAmbigAlts(i,r,n),o;return s!=null&&(o=this.getPredicatePredictions(i,s),e.predicates=o),o}getPredsForAmbigAlts(e,r,n){let i=new Array(n+1),s=i.length;for(let u of r)e.get(u.alt)&&(i[u.alt]=Dh.SemanticContext.or(i[u.alt],u.semanticContext));let o=0;for(let u=0;u<s;u++)i[u]==null?i[u]=Dh.SemanticContext.NONE:i[u]!==Dh.SemanticContext.NONE&&o++;let a=i;return o===0&&(a=void 0),pt.debug&&console.log("getPredsForAmbigAlts result "+(a?nVe.Arrays.toString(a):"undefined")),a}getPredicatePredictions(e,r){let n=[],i=!1;for(let s=1;s<r.length;s++){let o=r[s];Vr(o!=null),e!=null&&e.get(s)&&o===Dh.SemanticContext.NONE?n.push(new SV.DFAState.PredPrediction(o,s)):o!==Dh.SemanticContext.NONE&&(i=!0,n.push(new SV.DFAState.PredPrediction(o,s)))}if(i)return n}evalSemanticContext(e,r,n){let i=new Z5.BitSet;for(let s of e){if(s.pred===Dh.SemanticContext.NONE){if(i.set(s.alt),!n)break;continue}let o=this.evalSemanticContextImpl(s.pred,r,s.alt);if((pt.debug||pt.dfa_debug)&&console.log("eval pred "+s+"="+o),o&&((pt.debug||pt.dfa_debug)&&console.log("PREDICT "+s.alt),i.set(s.alt),!n))break}return i}evalSemanticContextImpl(e,r,n){return e.eval(this._parser,r)}closure(e,r,n,i,s,o){s==null&&(s=vV.PredictionContextCache.UNCACHED);let a=e,u=new rVe.Array2DHashSet(fVe.ObjectEqualityComparator.INSTANCE);for(;a.size>0;){let l=new hx.ATNConfigSet;for(let c of a)this.closureImpl(c,r,l,u,n,i,s,0,o);a=l}}closureImpl(e,r,n,i,s,o,a,u,l){if(pt.debug&&console.log("closure("+e.toString(this._parser,!0)+")"),e.state instanceof gm.RuleStopState)if(e.context.isEmpty)if(o)pt.debug&&console.log("FALLING off rule "+this.getRuleName(e.state.ruleIndex)),e.context===Si.PredictionContext.EMPTY_FULL?e=e.transform(e.state,!1,Si.PredictionContext.EMPTY_LOCAL):!e.reachesIntoOuterContext&&Si.PredictionContext.isEmptyLocal(e.context)&&r.add(e,a);else{r.add(e,a);return}else{let f=e.context.hasEmpty,x=e.context.size-(f?1:0);for(let d=0;d<x;d++){let h=e.context.getParent(d),p=this.atn.states[e.context.getReturnState(d)],m=k2e.ATNConfig.create(p,e.alt,h,e.semanticContext);m.outerContextDepth=e.outerContextDepth,m.isPrecedenceFilterSuppressed=e.isPrecedenceFilterSuppressed,Vr(u>$2e),this.closureImpl(m,r,n,i,s,o,a,u-1,l)}if(!f||!o)return;e=e.transform(e.state,!1,Si.PredictionContext.EMPTY_LOCAL)}let c=e.state;c.onlyHasEpsilonTransitions||(r.add(e,a),pt.debug&&console.log("added config "+r));for(let f=0;f<c.numberOfOptimizedTransitions;f++){if(f===0&&c.stateType===iVe.ATNStateType.STAR_LOOP_ENTRY&&c.precedenceRuleDecision&&!e.context.hasEmpty){let p=c,m=!0;for(let g=0;g<e.context.size;g++)if(!p.precedenceLoopbackStates.get(e.context.getReturnState(g))){m=!1;break}if(m)continue}let x=c.getOptimizedTransition(f),d=!(x instanceof tVe.ActionTransition)&&s,h=this.getEpsilonTarget(e,x,d,u===0,a,l);if(h!=null){if(x instanceof q2e.RuleTransition&&n!=null&&!s){n.add(h,a);continue}let p=u;if(e.state instanceof gm.RuleStopState){if(this.dfa!=null&&this.dfa.isPrecedenceDfa&&x.outermostPrecedenceReturn===this.dfa.atnStartState.ruleIndex&&(h.isPrecedenceFilterSuppressed=!0),h.outerContextDepth=h.outerContextDepth+1,!i.add(h))continue;Vr(p>$2e),p--,pt.debug&&console.log("dips into outer ctx: "+h)}else if(x instanceof q2e.RuleTransition)this.optimize_tail_calls&&x.optimizedTailCall&&(!this.tail_call_preserves_sll||!Si.PredictionContext.isEmptyLocal(e.context))?(Vr(h.context===e.context),p===0&&(p--,!this.tail_call_preserves_sll&&Si.PredictionContext.isEmptyLocal(e.context)&&(h.outerContextDepth=h.outerContextDepth+1))):p>=0&&p++;else if(!x.isEpsilon&&!i.add(h))continue;this.closureImpl(h,r,n,i,d,o,a,p,l)}}}getRuleName(e){return this._parser!=null&&e>=0?this._parser.ruleNames[e]:"<rule "+e+">"}getEpsilonTarget(e,r,n,i,s,o){switch(r.serializationType){case 3:return this.ruleTransition(e,r,s);case 10:return this.precedenceTransition(e,r,n,i);case 4:return this.predTransition(e,r,n,i);case 6:return this.actionTransition(e,r);case 1:return e.transform(r.target,!1);case 5:case 2:case 7:return o&&r.matches(Qw.Token.EOF,0,1)?e.transform(r.target,!1):void 0;default:return}}actionTransition(e,r){return pt.debug&&console.log("ACTION edge "+r.ruleIndex+":"+r.actionIndex),e.transform(r.target,!1)}precedenceTransition(e,r,n,i){pt.debug&&(console.log("PRED (collectPredicates="+n+") "+r.precedence+">=_p, ctx dependent=true"),this._parser!=null&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack()));let s;if(n&&i){let o=Dh.SemanticContext.and(e.semanticContext,r.predicate);s=e.transform(r.target,!1,o)}else s=e.transform(r.target,!1);return pt.debug&&console.log("config from pred transition="+s),s}predTransition(e,r,n,i){pt.debug&&(console.log("PRED (collectPredicates="+n+") "+r.ruleIndex+":"+r.predIndex+", ctx dependent="+r.isCtxDependent),this._parser!=null&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack()));let s;if(n&&(!r.isCtxDependent||r.isCtxDependent&&i)){let o=Dh.SemanticContext.and(e.semanticContext,r.predicate);s=e.transform(r.target,!1,o)}else s=e.transform(r.target,!1);return pt.debug&&console.log("config from pred transition="+s),s}ruleTransition(e,r,n){pt.debug&&console.log("CALL rule "+this.getRuleName(r.target.ruleIndex)+", ctx="+e.context);let i=r.followState,s;return this.optimize_tail_calls&&r.optimizedTailCall&&(!this.tail_call_preserves_sll||!Si.PredictionContext.isEmptyLocal(e.context))?s=e.context:n!=null?s=n.getChild(e.context,i.stateNumber):s=e.context.getChild(i.stateNumber),e.transform(r.target,!1,s)}isConflicted(e,r){if(e.uniqueAlt!==bc.ATN.INVALID_ALT_NUMBER||e.size<=1)return;let n=e.toArray();n.sort(pt.STATE_ALT_SORT_COMPARATOR);let i=!e.dipsIntoOuterContext,s=new Z5.BitSet,o=n[0].alt;s.set(o);let a=n[0].state.nonStopStateNumber;for(let x of n){let d=x.state.nonStopStateNumber;if(d!==a){if(x.alt!==o)return;a=d}}let u;if(i){a=n[0].state.nonStopStateNumber,u=new Z5.BitSet;let x=o;for(let h of n){if(h.state.nonStopStateNumber!==a)break;let p=h.alt;u.set(p),x=p}a=n[0].state.nonStopStateNumber;let d=o;for(let h of n){let p=h.state.nonStopStateNumber,m=h.alt;if(p!==a){if(d!==x){i=!1;break}a=p,d=o}else if(m!==d){if(m!==u.nextSetBit(d+1)){i=!1;break}d=m}}}a=n[0].state.nonStopStateNumber;let l=0,c=0,f=n[0].context;for(let x=1;x<n.length;x++){let d=n[x];if(d.alt!==o||d.state.nonStopStateNumber!==a)break;c=x,f=r.join(f,n[x].context)}for(let x=c+1;x<n.length;x++){let d=n[x],h=d.state;if(s.set(d.alt),h.nonStopStateNumber!==a){a=h.nonStopStateNumber,l=x,c=x,f=d.context;for(let A=l+1;A<n.length;A++){let S=n[A];if(S.alt!==o||S.state.nonStopStateNumber!==a)break;c=A,f=r.join(f,S.context)}x=c;continue}let p=d.context,m=d.alt,g=x;for(let A=g+1;A<n.length;A++){let S=n[A];if(S.alt!==m||S.state.nonStopStateNumber!==a)break;g=A,p=r.join(p,S.context)}x=g;let y=r.join(f,p);if(!f.equals(y))return;i=i&&f.equals(p)}return new oVe.ConflictInfo(s,i)}getConflictingAltsFromConfigSet(e){let r=e.conflictingAlts;return r==null&&e.uniqueAlt!==bc.ATN.INVALID_ALT_NUMBER&&(r=new Z5.BitSet,r.set(e.uniqueAlt)),r}getTokenName(e){if(e===Qw.Token.EOF)return"EOF";let n=(this._parser!=null?this._parser.vocabulary:U2e.VocabularyImpl.EMPTY_VOCABULARY).getDisplayName(e);return n===String(e)?n:n+"<"+e+">"}getLookaheadName(e){return this.getTokenName(e.LA(1))}dumpDeadEndConfigs(e){console.log("dead end configs: ");let r=e.deadEndConfigs;if(r)for(let n of r){let i="no edges";if(n.state.numberOfOptimizedTransitions>0){let s=n.state.getOptimizedTransition(0);s instanceof sVe.AtomTransition?i="Atom "+this.getTokenName(s._label):s instanceof xVe.SetTransition&&(i=(s instanceof lVe.NotSetTransition?"~":"")+"Set "+s.set.toString())}console.log(n.toString(this._parser,!0)+":"+i)}}noViableAlt(e,r,n,i){return new cVe.NoViableAltException(this._parser,e,e.get(i),e.LT(1),n,r)}getUniqueAlt(e){let r=bc.ATN.INVALID_ALT_NUMBER;for(let n of e)if(r===bc.ATN.INVALID_ALT_NUMBER)r=n.alt;else if(n.alt!==r)return bc.ATN.INVALID_ALT_NUMBER;return r}configWithAltAtStopState(e,r){for(let n of e)if(n.alt===r&&n.state instanceof gm.RuleStopState)return!0;return!1}addDFAEdge(e,r,n,i,s,o){Vr(i==null||i.isEmpty||e.isContextSensitive);let a=r,u=this.addDFAState(e,s,o);if(i!=null)for(let l of i.toArray()){if(l===Si.PredictionContext.EMPTY_FULL_STATE_KEY&&a.configs.isOutermostConfigSet)continue;a.setContextSensitive(this.atn),a.setContextSymbol(n);let c=a.getContextTarget(l);if(c!=null){a=c;continue}c=this.addDFAContextState(e,a.configs,l,o),Vr(l!==Si.PredictionContext.EMPTY_FULL_STATE_KEY||c.configs.isOutermostConfigSet),a.setContextTarget(l,c),a=c}return pt.debug&&console.log("EDGE "+a+" -> "+u+" upon "+this.getTokenName(n)),this.setDFAEdge(a,n,u),pt.debug&&console.log(`DFA=
`+e.toString(this._parser!=null?this._parser.vocabulary:U2e.VocabularyImpl.EMPTY_VOCABULARY,this._parser!=null?this._parser.ruleNames:void 0)),u}setDFAEdge(e,r,n){e?.setTarget(r,n)}addDFAContextState(e,r,n,i){if(n!==Si.PredictionContext.EMPTY_FULL_STATE_KEY){let s=new hx.ATNConfigSet;for(let o of r)s.add(o.appendContext(n,i));return this.addDFAState(e,s,i)}else return Vr(!r.isOutermostConfigSet,"Shouldn't be adding a duplicate edge."),r=r.clone(!0),r.isOutermostConfigSet=!0,this.addDFAState(e,r,i)}addDFAState(e,r,n){let i=this.enable_global_context_dfa||!r.isOutermostConfigSet;if(i){r.isReadOnly||r.optimizeConfigs(this);let l=this.createDFAState(e,r),c=e.states.get(l);if(c!=null)return c}r.isReadOnly||r.conflictInfo==null&&(r.conflictInfo=this.isConflicted(r,n));let s=this.createDFAState(e,r.clone(!0)),o=this.atn.getDecisionState(e.decision),a=this.getUniqueAlt(r);if(a!==bc.ATN.INVALID_ALT_NUMBER)s.acceptStateInfo=new P2e.AcceptStateInfo(a);else if(r.conflictingAlts!=null){let l=r.conflictingAlts;l&&(s.acceptStateInfo=new P2e.AcceptStateInfo(l.nextSetBit(0)))}if(s.isAcceptState&&r.hasSemanticContext&&this.predicateDFAState(s,r,o.numberOfTransitions),!i)return s;let u=e.addState(s);return pt.debug&&u===s&&console.log("adding new DFA state: "+s),u}createDFAState(e,r){return new SV.DFAState(r)}reportAttemptingFullContext(e,r,n,i,s){if(pt.debug||pt.retry_debug){let o=zw.Interval.of(i,s);console.log("reportAttemptingFullContext decision="+e.decision+":"+n.s0.configs+", input="+this._parser.inputStream.getText(o))}if(this._parser!=null){let o=this._parser.getErrorListenerDispatch();o.reportAttemptingFullContext&&o.reportAttemptingFullContext(this._parser,e,i,s,r,n)}}reportContextSensitivity(e,r,n,i,s){if(pt.debug||pt.retry_debug){let o=zw.Interval.of(i,s);console.log("reportContextSensitivity decision="+e.decision+":"+n.s0.configs+", input="+this._parser.inputStream.getText(o))}if(this._parser!=null){let o=this._parser.getErrorListenerDispatch();o.reportContextSensitivity&&o.reportContextSensitivity(this._parser,e,i,s,r,n)}}reportAmbiguity(e,r,n,i,s,o,a){if(pt.debug||pt.retry_debug){let u=zw.Interval.of(n,i);console.log("reportAmbiguity "+o+":"+a+", input="+this._parser.inputStream.getText(u))}if(this._parser!=null){let u=this._parser.getErrorListenerDispatch();u.reportAmbiguity&&u.reportAmbiguity(this._parser,e,n,i,s,o,a)}}getReturnState(e){return e.isEmpty?Si.PredictionContext.EMPTY_FULL_STATE_KEY:this.atn.states[e.invokingState].transition(0).followState.stateNumber}skipTailCalls(e){if(!this.optimize_tail_calls)return e;for(;!e.isEmpty;){let r=this.atn.states[e.invokingState];if(Vr(r.numberOfTransitions===1&&r.transition(0).serializationType===3),!r.transition(0).tailCall)break;e=e.parent}return e}get parser(){return this._parser}};it.debug=!1;it.dfa_debug=!1;it.retry_debug=!1;it.STATE_ALT_SORT_COMPARATOR=(t,e)=>{let r=t.state.nonStopStateNumber-e.state.nonStopStateNumber;return r!==0||(r=t.alt-e.alt,r!==0)?r:0};gt([_e.NotNull],it.prototype,"predictionMode",void 0);gt([_e.NotNull],it.prototype,"getPredictionMode",null);gt([Me(0,_e.NotNull)],it.prototype,"setPredictionMode",null);gt([_e.Override],it.prototype,"reset",null);gt([Me(0,_e.NotNull)],it.prototype,"adaptivePredict",null);gt([Me(0,_e.NotNull),Me(1,_e.NotNull),Me(2,_e.NotNull)],it.prototype,"getStartState",null);gt([Me(0,_e.NotNull),Me(1,_e.NotNull),Me(3,_e.NotNull)],it.prototype,"execDFA",null);gt([Me(0,_e.NotNull),Me(1,_e.NotNull),Me(3,_e.NotNull)],it.prototype,"execATN",null);gt([Me(0,_e.NotNull),Me(2,_e.NotNull)],it.prototype,"handleNoViableAlt",null);gt([Me(0,_e.NotNull)],it.prototype,"getExistingTargetState",null);gt([_e.NotNull,Me(0,_e.NotNull),Me(1,_e.NotNull)],it.prototype,"computeTargetState",null);gt([_e.NotNull,Me(0,_e.NotNull)],it.prototype,"removeAllConfigsNotInRuleStopState",null);gt([_e.NotNull],it.prototype,"computeStartState",null);gt([_e.NotNull,Me(0,_e.NotNull)],it.prototype,"applyPrecedenceFilter",null);gt([Me(0,_e.NotNull),Me(1,_e.NotNull)],it.prototype,"getReachableTarget",null);gt([Me(0,_e.NotNull),Me(1,_e.NotNull)],it.prototype,"getPredsForAmbigAlts",null);gt([Me(0,_e.NotNull)],it.prototype,"evalSemanticContext",null);gt([Me(0,_e.NotNull)],it.prototype,"evalSemanticContextImpl",null);gt([Me(1,_e.NotNull),Me(4,_e.Nullable)],it.prototype,"closure",null);gt([Me(0,_e.NotNull),Me(1,_e.NotNull),Me(2,_e.Nullable),Me(3,_e.NotNull),Me(6,_e.NotNull)],it.prototype,"closureImpl",null);gt([_e.NotNull],it.prototype,"getRuleName",null);gt([Me(0,_e.NotNull),Me(1,_e.NotNull)],it.prototype,"getEpsilonTarget",null);gt([_e.NotNull,Me(0,_e.NotNull),Me(1,_e.NotNull)],it.prototype,"actionTransition",null);gt([_e.Nullable,Me(0,_e.NotNull),Me(1,_e.NotNull)],it.prototype,"precedenceTransition",null);gt([_e.Nullable,Me(0,_e.NotNull),Me(1,_e.NotNull)],it.prototype,"predTransition",null);gt([_e.NotNull,Me(0,_e.NotNull),Me(1,_e.NotNull),Me(2,_e.Nullable)],it.prototype,"ruleTransition",null);gt([Me(0,_e.NotNull)],it.prototype,"isConflicted",null);gt([_e.NotNull],it.prototype,"getTokenName",null);gt([Me(0,_e.NotNull)],it.prototype,"dumpDeadEndConfigs",null);gt([_e.NotNull,Me(0,_e.NotNull),Me(1,_e.NotNull),Me(2,_e.NotNull)],it.prototype,"noViableAlt",null);gt([Me(0,_e.NotNull)],it.prototype,"getUniqueAlt",null);gt([Me(0,_e.NotNull)],it.prototype,"configWithAltAtStopState",null);gt([_e.NotNull,Me(0,_e.NotNull),Me(1,_e.NotNull),Me(4,_e.NotNull)],it.prototype,"addDFAEdge",null);gt([Me(0,_e.Nullable),Me(2,_e.Nullable)],it.prototype,"setDFAEdge",null);gt([_e.NotNull,Me(0,_e.NotNull),Me(1,_e.NotNull)],it.prototype,"addDFAContextState",null);gt([_e.NotNull,Me(0,_e.NotNull),Me(1,_e.NotNull)],it.prototype,"addDFAState",null);gt([_e.NotNull,Me(0,_e.NotNull),Me(1,_e.NotNull)],it.prototype,"createDFAState",null);gt([Me(0,_e.NotNull),Me(2,_e.NotNull)],it.prototype,"reportAttemptingFullContext",null);gt([Me(0,_e.NotNull),Me(2,_e.NotNull)],it.prototype,"reportContextSensitivity",null);gt([Me(0,_e.NotNull),Me(5,_e.NotNull),Me(6,_e.NotNull)],it.prototype,"reportAmbiguity",null);it=gt([Me(0,_e.NotNull)],it);Nh.ParserATNSimulator=it});var j2e=v(FE=>{"use strict";var hVe=FE&&FE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(FE,"__esModule",{value:!0});FE.PlusBlockStartState=void 0;var pVe=Ei(),mVe=W5(),gVe=re(),Vw=class extends mVe.BlockStartState{get stateType(){return pVe.ATNStateType.PLUS_BLOCK_START}};hVe([gVe.Override],Vw.prototype,"stateType",null);FE.PlusBlockStartState=Vw});var H2e=v(wE=>{"use strict";var yVe=wE&&wE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(wE,"__esModule",{value:!0});wE.PlusLoopbackState=void 0;var EVe=Ei(),AVe=Yd(),SVe=re(),Ww=class extends AVe.DecisionState{get stateType(){return EVe.ATNStateType.PLUS_LOOP_BACK}};yVe([SVe.Override],Ww.prototype,"stateType",null);wE.PlusLoopbackState=Ww});var z2e=v(Fh=>{"use strict";var eb=Fh&&Fh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},vVe=Fh&&Fh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Fh,"__esModule",{value:!0});Fh.PrecedencePredicateTransition=void 0;var _Ve=kF(),tb=re(),bVe=Q1(),Em=class extends _Ve.AbstractPredicateTransition{constructor(e,r){super(e),this.precedence=r}get serializationType(){return 10}get isEpsilon(){return!0}matches(e,r,n){return!1}get predicate(){return new bVe.SemanticContext.PrecedencePredicate(this.precedence)}toString(){return this.precedence+" >= _p"}};eb([tb.Override],Em.prototype,"serializationType",null);eb([tb.Override],Em.prototype,"isEpsilon",null);eb([tb.Override],Em.prototype,"matches",null);eb([tb.Override],Em.prototype,"toString",null);Em=eb([vVe(0,tb.NotNull)],Em);Fh.PrecedencePredicateTransition=Em});var G2e=v(wh=>{"use strict";var rb=wh&&wh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},TVe=wh&&wh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(wh,"__esModule",{value:!0});wh.RangeTransition=void 0;var CVe=oh(),Am=re(),RVe=Kf(),Sm=class extends RVe.Transition{constructor(e,r,n){super(e),this.from=r,this.to=n}get serializationType(){return 2}get label(){return CVe.IntervalSet.of(this.from,this.to)}matches(e,r,n){return e>=this.from&&e<=this.to}toString(){return"'"+String.fromCodePoint(this.from)+"'..'"+String.fromCodePoint(this.to)+"'"}};rb([Am.Override],Sm.prototype,"serializationType",null);rb([Am.Override,Am.NotNull],Sm.prototype,"label",null);rb([Am.Override],Sm.prototype,"matches",null);rb([Am.Override,Am.NotNull],Sm.prototype,"toString",null);Sm=rb([TVe(0,Am.NotNull)],Sm);wh.RangeTransition=Sm});var Q2e=v(LE=>{"use strict";var OVe=LE&&LE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(LE,"__esModule",{value:!0});LE.RuleStartState=void 0;var DVe=nc(),NVe=Ei(),FVe=re(),Yw=class extends DVe.ATNState{constructor(){super(...arguments),this.isPrecedenceRule=!1,this.leftFactored=!1}get stateType(){return NVe.ATNStateType.RULE_START}};OVe([FVe.Override],Yw.prototype,"stateType",null);LE.RuleStartState=Yw});var V2e=v(IE=>{"use strict";var wVe=IE&&IE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(IE,"__esModule",{value:!0});IE.StarBlockStartState=void 0;var LVe=Ei(),IVe=W5(),MVe=re(),Kw=class extends IVe.BlockStartState{get stateType(){return LVe.ATNStateType.STAR_BLOCK_START}};wVe([MVe.Override],Kw.prototype,"stateType",null);IE.StarBlockStartState=Kw});var W2e=v(ME=>{"use strict";var PVe=ME&&ME.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(ME,"__esModule",{value:!0});ME.StarLoopbackState=void 0;var kVe=nc(),BVe=Ei(),qVe=re(),Xw=class extends kVe.ATNState{get loopEntryState(){return this.transition(0).target}get stateType(){return BVe.ATNStateType.STAR_LOOP_BACK}};PVe([qVe.Override],Xw.prototype,"stateType",null);ME.StarLoopbackState=Xw});var Y2e=v(PE=>{"use strict";var UVe=PE&&PE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(PE,"__esModule",{value:!0});PE.TokensStartState=void 0;var $Ve=Ei(),jVe=Yd(),HVe=re(),Jw=class extends jVe.DecisionState{get stateType(){return $Ve.ATNStateType.TOKEN_START}};UVe([HVe.Override],Jw.prototype,"stateType",null);PE.TokensStartState=Jw});var K2e=v(Zw=>{"use strict";Object.defineProperty(Zw,"__esModule",{value:!0});Zw.UUID=void 0;var zVe=an(),_V=class t{constructor(e,r,n,i){this.data=new Uint32Array(4),this.data[0]=e,this.data[1]=r,this.data[2]=n,this.data[3]=i}static fromString(e){if(!/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/.test(e))throw new Error("Incorrectly formatted UUID");let r=e.split("-"),n=parseInt(r[0],16),i=(parseInt(r[1],16)<<16>>>0)+parseInt(r[2],16),s=(parseInt(r[3],16)<<16>>>0)+parseInt(r[4].substr(0,4),16),o=parseInt(r[4].substr(-8),16);return new t(n,i,s,o)}hashCode(){return zVe.MurmurHash.hashCode([this.data[0],this.data[1],this.data[2],this.data[3]])}equals(e){return e===this?!0:e instanceof t?this.data[0]===e.data[0]&&this.data[1]===e.data[1]&&this.data[2]===e.data[2]&&this.data[3]===e.data[3]:!1}toString(){return("00000000"+this.data[0].toString(16)).substr(-8)+"-"+("0000"+(this.data[1]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[1].toString(16)).substr(-4)+"-"+("0000"+(this.data[2]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[2].toString(16)).substr(-4)+("00000000"+this.data[3].toString(16)).substr(-8)}};Zw.UUID=_V});var vm=v(Ih=>{"use strict";var n7=Ih&&Ih.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},LV=Ih&&Ih.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Ih,"__esModule",{value:!0});Ih.ATNDeserializer=void 0;var bV=rV(),GVe=Xf(),QVe=Iu(),VVe=tV(),ss=Ei(),kE=nV(),X2e=h2e(),e7=$Q(),J2e=ex(),t7=p2e(),TV=W5(),WVe=Yd(),Z2e=UQ(),px=m2e(),CV=oh(),e1e=jQ(),YVe=g2e(),t1e=y2e(),KVe=E2e(),XVe=A2e(),JVe=S2e(),ZVe=v2e(),eWe=_2e(),tWe=b2e(),BE=uV(),sb=re(),RV=Aw(),OV=ym(),DV=j2e(),r1e=H2e(),rWe=z2e(),nWe=uQ(),nb=G2e(),n1e=Q2e(),Lh=Wy(),ib=Sw(),r7=yw(),NV=V2e(),FV=W2e(),qE=dw(),wV=gr(),iWe=Y2e(),i7=K2e(),sWe=HQ(),i1e;(function(t){t[t.UNICODE_BMP=0]="UNICODE_BMP",t[t.UNICODE_SMP=1]="UNICODE_SMP"})(i1e||(i1e={}));var Ls=class t{constructor(e){e===void 0&&(e=VVe.ATNDeserializationOptions.defaultOptions),this.deserializationOptions=e}static get SERIALIZED_VERSION(){return 3}static isFeatureSupported(e,r){let n=t.SUPPORTED_UUIDS.findIndex(i=>i.equals(e));return n<0?!1:t.SUPPORTED_UUIDS.findIndex(i=>i.equals(r))>=n}static getUnicodeDeserializer(e){return e===0?{readUnicode:(r,n)=>t.toInt(r[n]),size:1}:{readUnicode:(r,n)=>t.toInt32(r,n),size:2}}deserialize(e){e=e.slice(0);for(let _=1;_<e.length;_++)e[_]=e[_]-2&65535;let r=0,n=t.toInt(e[r++]);if(n!==t.SERIALIZED_VERSION){let _=`Could not deserialize ATN with version ${n} (expected ${t.SERIALIZED_VERSION}).`;throw new Error(_)}let i=t.toUUID(e,r);if(r+=8,t.SUPPORTED_UUIDS.findIndex(_=>_.equals(i))<0){let _=`Could not deserialize ATN with UUID ${i} (expected ${t.SERIALIZED_UUID} or a legacy UUID).`;throw new Error(_)}let s=t.isFeatureSupported(t.ADDED_LEXER_ACTIONS,i),o=t.toInt(e[r++]),a=t.toInt(e[r++]),u=new QVe.ATN(o,a),l=[],c=[],f=t.toInt(e[r++]);for(let _=0;_<f;_++){let b=t.toInt(e[r++]);if(b===ss.ATNStateType.INVALID_TYPE){u.addState(new e1e.InvalidState);continue}let R=t.toInt(e[r++]);R===65535&&(R=-1);let O=this.stateFactory(b,R);if(b===ss.ATNStateType.LOOP_END){let N=t.toInt(e[r++]);l.push([O,N])}else if(O instanceof TV.BlockStartState){let N=t.toInt(e[r++]);c.push([O,N])}u.addState(O)}for(let _ of l)_[0].loopBackState=u.states[_[1]];for(let _ of c)_[0].endState=u.states[_[1]];let x=t.toInt(e[r++]);for(let _=0;_<x;_++){let b=t.toInt(e[r++]);u.states[b].nonGreedy=!0}let d=t.toInt(e[r++]);for(let _=0;_<d;_++){let b=t.toInt(e[r++]);u.states[b].sll=!0}let h=t.toInt(e[r++]);for(let _=0;_<h;_++){let b=t.toInt(e[r++]);u.states[b].isPrecedenceRule=!0}let p=t.toInt(e[r++]);u.grammarType===0&&(u.ruleToTokenType=new Int32Array(p)),u.ruleToStartState=new Array(p);for(let _=0;_<p;_++){let b=t.toInt(e[r++]),R=u.states[b];if(R.leftFactored=t.toInt(e[r++])!==0,u.ruleToStartState[_]=R,u.grammarType===0){let O=t.toInt(e[r++]);if(O===65535&&(O=wV.Token.EOF),u.ruleToTokenType[_]=O,!t.isFeatureSupported(t.ADDED_LEXER_ACTIONS,i)){let N=t.toInt(e[r++]);N===65535&&(N=-1)}}}u.ruleToStopState=new Array(p);for(let _ of u.states)_ instanceof Lh.RuleStopState&&(u.ruleToStopState[_.ruleIndex]=_,u.ruleToStartState[_.ruleIndex].stopState=_);let m=t.toInt(e[r++]);for(let _=0;_<m;_++){let b=t.toInt(e[r++]);u.modeToStartState.push(u.states[b])}u.modeToDFA=new Array(m);for(let _=0;_<m;_++)u.modeToDFA[_]=new Z2e.DFA(u.modeToStartState[_]);let g=[];r=this.deserializeSets(e,r,g,t.getUnicodeDeserializer(0)),t.isFeatureSupported(t.ADDED_UNICODE_SMP,i)&&(r=this.deserializeSets(e,r,g,t.getUnicodeDeserializer(1)));let y=t.toInt(e[r++]);for(let _=0;_<y;_++){let b=t.toInt(e[r]),R=t.toInt(e[r+1]),O=t.toInt(e[r+2]),N=t.toInt(e[r+3]),F=t.toInt(e[r+4]),$=t.toInt(e[r+5]),q=this.edgeFactory(u,O,b,R,N,F,$,g);u.states[b].addTransition(q),r+=6}let A=new GVe.Array2DHashSet({hashCode:_=>_.stopState^_.returnState^_.outermostPrecedenceReturn,equals:(_,b)=>_.stopState===b.stopState&&_.returnState===b.returnState&&_.outermostPrecedenceReturn===b.outermostPrecedenceReturn}),S=[];for(let _ of u.states){let b=_.ruleIndex>=0&&u.ruleToStartState[_.ruleIndex].leftFactored;for(let R=0;R<_.numberOfTransitions;R++){let O=_.transition(R);if(!(O instanceof ib.RuleTransition))continue;let N=O;if(!u.ruleToStartState[N.target.ruleIndex].leftFactored&&b)continue;let $=-1;u.ruleToStartState[N.target.ruleIndex].isPrecedenceRule&&N.precedence===0&&($=N.target.ruleIndex);let q={stopState:N.target.ruleIndex,returnState:N.followState.stateNumber,outermostPrecedenceReturn:$};A.add(q)&&S.push(q)}}for(let _ of S){let b=new px.EpsilonTransition(u.states[_.returnState],_.outermostPrecedenceReturn);u.ruleToStopState[_.stopState].addTransition(b)}for(let _ of u.states){if(_ instanceof TV.BlockStartState){if(_.endState===void 0)throw new Error("IllegalStateException");if(_.endState.startState!==void 0)throw new Error("IllegalStateException");_.endState.startState=_}if(_ instanceof r1e.PlusLoopbackState){let b=_;for(let R=0;R<b.numberOfTransitions;R++){let O=b.transition(R).target;O instanceof DV.PlusBlockStartState&&(O.loopBackState=b)}}else if(_ instanceof FV.StarLoopbackState){let b=_;for(let R=0;R<b.numberOfTransitions;R++){let O=b.transition(R).target;O instanceof qE.StarLoopEntryState&&(O.loopBackState=b)}}}let T=t.toInt(e[r++]);for(let _=1;_<=T;_++){let b=t.toInt(e[r++]),R=u.states[b];u.decisionToState.push(R),R.decision=_-1}if(u.grammarType===0)if(s){u.lexerActions=new Array(t.toInt(e[r++]));for(let _=0;_<u.lexerActions.length;_++){let b=t.toInt(e[r++]),R=t.toInt(e[r++]);R===65535&&(R=-1);let O=t.toInt(e[r++]);O===65535&&(O=-1);let N=this.lexerActionFactory(b,R,O);u.lexerActions[_]=N}}else{let _=[];for(let b of u.states)for(let R=0;R<b.numberOfTransitions;R++){let O=b.transition(R);if(!(O instanceof bV.ActionTransition))continue;let N=O.ruleIndex,F=O.actionIndex,$=new t1e.LexerCustomAction(N,F);b.setTransition(R,new bV.ActionTransition(O.target,N,_.length,!1)),_.push($)}u.lexerActions=_}this.markPrecedenceDecisions(u),u.decisionToDFA=new Array(T);for(let _=0;_<T;_++)u.decisionToDFA[_]=new Z2e.DFA(u.decisionToState[_],_);if(this.deserializationOptions.isVerifyATN&&this.verifyATN(u),this.deserializationOptions.isGenerateRuleBypassTransitions&&u.grammarType===1){u.ruleToTokenType=new Int32Array(u.ruleToStartState.length);for(let _=0;_<u.ruleToStartState.length;_++)u.ruleToTokenType[_]=u.maxTokenType+_+1;for(let _=0;_<u.ruleToStartState.length;_++){let b=new X2e.BasicBlockStartState;b.ruleIndex=_,u.addState(b);let R=new t7.BlockEndState;R.ruleIndex=_,u.addState(R),b.endState=R,u.defineDecisionState(b),R.startState=b;let O,N;if(u.ruleToStartState[_].isPrecedenceRule){O=void 0;for(let $ of u.states){if($.ruleIndex!==_||!($ instanceof qE.StarLoopEntryState))continue;let q=$.transition($.numberOfTransitions-1).target;if(q instanceof BE.LoopEndState&&q.epsilonOnlyTransitions&&q.transition(0).target instanceof Lh.RuleStopState){O=$;break}}if(!O)throw new Error("Couldn't identify final state of the precedence rule prefix section.");N=O.loopBackState.transition(0)}else O=u.ruleToStopState[_];for(let $ of u.states)for(let q=0;q<$.numberOfTransitions;q++){let X=$.transition(q);X!==N&&X.target===O&&(X.target=R)}for(;u.ruleToStartState[_].numberOfTransitions>0;){let $=u.ruleToStartState[_].removeTransition(u.ruleToStartState[_].numberOfTransitions-1);b.addTransition($)}u.ruleToStartState[_].addTransition(new px.EpsilonTransition(b)),R.addTransition(new px.EpsilonTransition(O));let F=new e7.BasicState;u.addState(F),F.addTransition(new kE.AtomTransition(R,u.ruleToTokenType[_])),b.addTransition(new px.EpsilonTransition(F))}this.deserializationOptions.isVerifyATN&&this.verifyATN(u)}if(this.deserializationOptions.isOptimize){for(;;){let _=0;_+=t.inlineSetRules(u),_+=t.combineChainedEpsilons(u);let b=u.grammarType===0;if(_+=t.optimizeSets(u,b),_===0)break}this.deserializationOptions.isVerifyATN&&this.verifyATN(u)}return t.identifyTailCalls(u),u}deserializeSets(e,r,n,i){let s=t.toInt(e[r++]);for(let o=0;o<s;o++){let a=t.toInt(e[r]);r++;let u=new CV.IntervalSet;n.push(u),t.toInt(e[r++])!==0&&u.add(-1);for(let c=0;c<a;c++){let f=i.readUnicode(e,r);r+=i.size;let x=i.readUnicode(e,r);r+=i.size,u.add(f,x)}}return r}markPrecedenceDecisions(e){let r=new Map;for(let n of e.states)if(n instanceof qE.StarLoopEntryState&&e.ruleToStartState[n.ruleIndex].isPrecedenceRule){let i=n.transition(n.numberOfTransitions-1).target;i instanceof BE.LoopEndState&&i.epsilonOnlyTransitions&&i.transition(0).target instanceof Lh.RuleStopState&&(r.set(n.ruleIndex,n),n.precedenceRuleDecision=!0,n.precedenceLoopbackStates=new J2e.BitSet(e.states.length))}for(let n of r)for(let i of e.ruleToStopState[n[0]].getTransitions())i.serializationType!==1||i.outermostPrecedenceReturn!==-1||n[1].precedenceLoopbackStates.set(i.target.stateNumber)}verifyATN(e){for(let r of e.states)if(this.checkCondition(r!==void 0,"ATN states should not be undefined."),r.stateType!==ss.ATNStateType.INVALID_TYPE){if(this.checkCondition(r.onlyHasEpsilonTransitions||r.numberOfTransitions<=1),r instanceof DV.PlusBlockStartState&&this.checkCondition(r.loopBackState!==void 0),r instanceof qE.StarLoopEntryState){let n=r;if(this.checkCondition(n.loopBackState!==void 0),this.checkCondition(n.numberOfTransitions===2),n.transition(0).target instanceof NV.StarBlockStartState)this.checkCondition(n.transition(1).target instanceof BE.LoopEndState),this.checkCondition(!n.nonGreedy);else if(n.transition(0).target instanceof BE.LoopEndState)this.checkCondition(n.transition(1).target instanceof NV.StarBlockStartState),this.checkCondition(n.nonGreedy);else throw new Error("IllegalStateException")}if(r instanceof FV.StarLoopbackState&&(this.checkCondition(r.numberOfTransitions===1),this.checkCondition(r.transition(0).target instanceof qE.StarLoopEntryState)),r instanceof BE.LoopEndState&&this.checkCondition(r.loopBackState!==void 0),r instanceof n1e.RuleStartState&&this.checkCondition(r.stopState!==void 0),r instanceof TV.BlockStartState&&this.checkCondition(r.endState!==void 0),r instanceof t7.BlockEndState&&this.checkCondition(r.startState!==void 0),r instanceof WVe.DecisionState){let n=r;this.checkCondition(n.numberOfTransitions<=1||n.decision>=0)}else this.checkCondition(r.numberOfTransitions<=1||r instanceof Lh.RuleStopState)}}checkCondition(e,r){if(!e)throw new Error("IllegalStateException: "+r)}static inlineSetRules(e){let r=0,n=new Array(e.ruleToStartState.length);for(let i=0;i<e.ruleToStartState.length;i++){let o=e.ruleToStartState[i];for(;o.onlyHasEpsilonTransitions&&o.numberOfOptimizedTransitions===1&&o.getOptimizedTransition(0).serializationType===1;)o=o.getOptimizedTransition(0).target;if(o.numberOfOptimizedTransitions!==1)continue;let a=o.getOptimizedTransition(0),u=a.target;if(!(a.isEpsilon||!u.onlyHasEpsilonTransitions||u.numberOfOptimizedTransitions!==1||!(u.getOptimizedTransition(0).target instanceof Lh.RuleStopState)))switch(a.serializationType){case 5:case 2:case 7:n[i]=a;break;case 8:case 9:continue;default:continue}}for(let i of e.states){if(i.ruleIndex<0)continue;let s;for(let o=0;o<i.numberOfOptimizedTransitions;o++){let a=i.getOptimizedTransition(o);if(!(a instanceof ib.RuleTransition)){s!==void 0&&s.push(a);continue}let u=a,l=n[u.target.ruleIndex];if(l===void 0){s!==void 0&&s.push(a);continue}if(s===void 0){s=[];for(let x=0;x<o;x++)s.push(i.getOptimizedTransition(o))}r++;let c=u.followState,f=new e7.BasicState;switch(f.setRuleIndex(c.ruleIndex),e.addState(f),s.push(new px.EpsilonTransition(f)),l.serializationType){case 5:f.addTransition(new kE.AtomTransition(c,l._label));break;case 2:f.addTransition(new nb.RangeTransition(c,l.from,l.to));break;case 7:f.addTransition(new r7.SetTransition(c,l.label));break;default:throw new Error("UnsupportedOperationException")}}if(s!==void 0){if(i.isOptimized)for(;i.numberOfOptimizedTransitions>0;)i.removeOptimizedTransition(i.numberOfOptimizedTransitions-1);for(let o of s)i.addOptimizedTransition(o)}}return OV.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+r+" rule invocations by inlining sets."),r}static combineChainedEpsilons(e){let r=0;for(let n of e.states){if(!n.onlyHasEpsilonTransitions||n instanceof Lh.RuleStopState)continue;let i;e:for(let s=0;s<n.numberOfOptimizedTransitions;s++){let o=n.getOptimizedTransition(s),a=o.target;if(o.serializationType!==1||o.outermostPrecedenceReturn!==-1||a.stateType!==ss.ATNStateType.BASIC||!a.onlyHasEpsilonTransitions){i!==void 0&&i.push(o);continue e}for(let u=0;u<a.numberOfOptimizedTransitions;u++)if(a.getOptimizedTransition(u).serializationType!==1||a.getOptimizedTransition(u).outermostPrecedenceReturn!==-1){i!==void 0&&i.push(o);continue e}if(r++,i===void 0){i=[];for(let u=0;u<s;u++)i.push(n.getOptimizedTransition(u))}for(let u=0;u<a.numberOfOptimizedTransitions;u++){let l=a.getOptimizedTransition(u).target;i.push(new px.EpsilonTransition(l))}}if(i!==void 0){if(n.isOptimized)for(;n.numberOfOptimizedTransitions>0;)n.removeOptimizedTransition(n.numberOfOptimizedTransitions-1);for(let s of i)n.addOptimizedTransition(s)}}return OV.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+r+" transitions by combining chained epsilon transitions."),r}static optimizeSets(e,r){if(r)return 0;let n=0,i=e.decisionToState;for(let s of i){let o=new CV.IntervalSet;for(let x=0;x<s.numberOfOptimizedTransitions;x++){let d=s.getOptimizedTransition(x);if(!(d instanceof px.EpsilonTransition)||d.target.numberOfOptimizedTransitions!==1)continue;let h=d.target.getOptimizedTransition(0);h.target instanceof t7.BlockEndState&&(h instanceof RV.NotSetTransition||(h instanceof kE.AtomTransition||h instanceof nb.RangeTransition||h instanceof r7.SetTransition)&&o.add(x))}if(o.size<=1)continue;let a=[];for(let x=0;x<s.numberOfOptimizedTransitions;x++)o.contains(x)||a.push(s.getOptimizedTransition(x));let u=s.getOptimizedTransition(o.minElement).target.getOptimizedTransition(0).target,l=new CV.IntervalSet;for(let x of o.intervals)for(let d=x.a;d<=x.b;d++){let h=s.getOptimizedTransition(d).target.getOptimizedTransition(0);if(h instanceof RV.NotSetTransition)throw new Error("Not yet implemented.");l.addAll(h.label)}let c;if(l.intervals.length===1)if(l.size===1)c=new kE.AtomTransition(u,l.minElement);else{let x=l.intervals[0];c=new nb.RangeTransition(u,x.a,x.b)}else c=new r7.SetTransition(u,l);let f=new e7.BasicState;if(f.setRuleIndex(s.ruleIndex),e.addState(f),f.addTransition(c),a.push(new px.EpsilonTransition(f)),n+=s.numberOfOptimizedTransitions-a.length,s.isOptimized)for(;s.numberOfOptimizedTransitions>0;)s.removeOptimizedTransition(s.numberOfOptimizedTransitions-1);for(let x of a)s.addOptimizedTransition(x)}return OV.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+n+" paths by collapsing sets."),n}static identifyTailCalls(e){for(let r of e.states){for(let n=0;n<r.numberOfTransitions;n++){let i=r.transition(n);i instanceof ib.RuleTransition&&(i.tailCall=this.testTailCall(e,i,!1),i.optimizedTailCall=this.testTailCall(e,i,!0))}if(r.isOptimized)for(let n=0;n<r.numberOfOptimizedTransitions;n++){let i=r.getOptimizedTransition(n);i instanceof ib.RuleTransition&&(i.tailCall=this.testTailCall(e,i,!1),i.optimizedTailCall=this.testTailCall(e,i,!0))}}}static testTailCall(e,r,n){if(!n&&r.tailCall||n&&r.optimizedTailCall)return!0;let i=new J2e.BitSet(e.states.length),s=[];for(s.push(r.followState);;){let o=s.pop();if(!o)break;if(i.get(o.stateNumber)||o instanceof Lh.RuleStopState)continue;if(!o.onlyHasEpsilonTransitions)return!1;let a=n?o.numberOfOptimizedTransitions:o.numberOfTransitions;for(let u=0;u<a;u++){let l=n?o.getOptimizedTransition(u):o.transition(u);if(l.serializationType!==1)return!1;s.push(l.target)}}return!0}static toInt(e){return e}static toInt32(e,r){return(e[r]|e[r+1]<<16)>>>0}static toUUID(e,r){let n=t.toInt32(e,r),i=t.toInt32(e,r+2),s=t.toInt32(e,r+4),o=t.toInt32(e,r+6);return new i7.UUID(o,s,i,n)}edgeFactory(e,r,n,i,s,o,a,u){let l=e.states[i];switch(r){case 1:return new px.EpsilonTransition(l);case 2:return a!==0?new nb.RangeTransition(l,wV.Token.EOF,o):new nb.RangeTransition(l,s,o);case 3:return new ib.RuleTransition(e.states[s],o,a,l);case 4:return new nWe.PredicateTransition(l,s,o,a!==0);case 10:return new rWe.PrecedencePredicateTransition(l,s);case 5:return a!==0?new kE.AtomTransition(l,wV.Token.EOF):new kE.AtomTransition(l,s);case 6:return new bV.ActionTransition(l,s,o,a!==0);case 7:return new r7.SetTransition(l,u[s]);case 8:return new RV.NotSetTransition(l,u[s]);case 9:return new sWe.WildcardTransition(l)}throw new Error("The specified transition type is not valid.")}stateFactory(e,r){let n;switch(e){case ss.ATNStateType.INVALID_TYPE:return new e1e.InvalidState;case ss.ATNStateType.BASIC:n=new e7.BasicState;break;case ss.ATNStateType.RULE_START:n=new n1e.RuleStartState;break;case ss.ATNStateType.BLOCK_START:n=new X2e.BasicBlockStartState;break;case ss.ATNStateType.PLUS_BLOCK_START:n=new DV.PlusBlockStartState;break;case ss.ATNStateType.STAR_BLOCK_START:n=new NV.StarBlockStartState;break;case ss.ATNStateType.TOKEN_START:n=new iWe.TokensStartState;break;case ss.ATNStateType.RULE_STOP:n=new Lh.RuleStopState;break;case ss.ATNStateType.BLOCK_END:n=new t7.BlockEndState;break;case ss.ATNStateType.STAR_LOOP_BACK:n=new FV.StarLoopbackState;break;case ss.ATNStateType.STAR_LOOP_ENTRY:n=new qE.StarLoopEntryState;break;case ss.ATNStateType.PLUS_LOOP_BACK:n=new r1e.PlusLoopbackState;break;case ss.ATNStateType.LOOP_END:n=new BE.LoopEndState;break;default:let i=`The specified state type ${e} is not valid.`;throw new Error(i)}return n.ruleIndex=r,n}lexerActionFactory(e,r,n){switch(e){case 0:return new YVe.LexerChannelAction(r);case 1:return new t1e.LexerCustomAction(r,n);case 2:return new KVe.LexerModeAction(r);case 3:return XVe.LexerMoreAction.INSTANCE;case 4:return JVe.LexerPopModeAction.INSTANCE;case 5:return new ZVe.LexerPushModeAction(r);case 6:return eWe.LexerSkipAction.INSTANCE;case 7:return new tWe.LexerTypeAction(r);default:let i=`The specified lexer action type ${e} is not valid.`;throw new Error(i)}}};Ls.BASE_SERIALIZED_UUID=i7.UUID.fromString("E4178468-DF95-44D0-AD87-F22A5D5FB6D3");Ls.ADDED_LEXER_ACTIONS=i7.UUID.fromString("AB35191A-1603-487E-B75A-479B831EAF6D");Ls.ADDED_UNICODE_SMP=i7.UUID.fromString("C23FEA89-0605-4f51-AFB8-058BCAB8C91B");Ls.SUPPORTED_UUIDS=[Ls.BASE_SERIALIZED_UUID,Ls.ADDED_LEXER_ACTIONS,Ls.ADDED_UNICODE_SMP];Ls.SERIALIZED_UUID=Ls.ADDED_UNICODE_SMP;n7([sb.NotNull],Ls.prototype,"deserializationOptions",void 0);n7([LV(0,sb.NotNull)],Ls.prototype,"deserialize",null);n7([LV(0,sb.NotNull)],Ls.prototype,"markPrecedenceDecisions",null);n7([sb.NotNull,LV(0,sb.NotNull)],Ls.prototype,"edgeFactory",null);Ih.ATNDeserializer=Ls});var s1e=v(Mh=>{"use strict";var IV=Mh&&Mh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},oWe=Mh&&Mh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Mh,"__esModule",{value:!0});Mh.ParseInfo=void 0;var MV=re(),ob=class{constructor(e){this.atnSimulator=e}getDecisionInfo(){return this.atnSimulator.getDecisionInfo()}getLLDecisions(){let e=this.atnSimulator.getDecisionInfo(),r=[];for(let n=0;n<e.length;n++)e[n].LL_Fallback>0&&r.push(n);return r}getTotalTimeInPrediction(){let e=this.atnSimulator.getDecisionInfo(),r=0;for(let n of e)r+=n.timeInPrediction;return r}getTotalSLLLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),r=0;for(let n of e)r+=n.SLL_TotalLook;return r}getTotalLLLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),r=0;for(let n of e)r+=n.LL_TotalLook;return r}getTotalSLLATNLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),r=0;for(let n of e)r+=n.SLL_ATNTransitions;return r}getTotalLLATNLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),r=0;for(let n of e)r+=n.LL_ATNTransitions;return r}getTotalATNLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),r=0;for(let n of e)r+=n.SLL_ATNTransitions,r+=n.LL_ATNTransitions;return r}getDFASize(e){if(e)return this.atnSimulator.atn.decisionToDFA[e].states.size;{let r=0,n=this.atnSimulator.atn.decisionToDFA;for(let i=0;i<n.length;i++)r+=this.getDFASize(i);return r}}};IV([MV.NotNull],ob.prototype,"getDecisionInfo",null);IV([MV.NotNull],ob.prototype,"getLLDecisions",null);ob=IV([oWe(0,MV.NotNull)],ob);Mh.ParseInfo=ob});var BV=v($E=>{"use strict";var PV=$E&&$E.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty($E,"__esModule",{value:!0});$E.ProxyParserErrorListener=void 0;var aWe=lw(),kV=re(),UE=class extends aWe.ProxyErrorListener{constructor(e){super(e)}reportAmbiguity(e,r,n,i,s,o,a){this.getDelegates().forEach(u=>{u.reportAmbiguity&&u.reportAmbiguity(e,r,n,i,s,o,a)})}reportAttemptingFullContext(e,r,n,i,s,o){this.getDelegates().forEach(a=>{a.reportAttemptingFullContext&&a.reportAttemptingFullContext(e,r,n,i,s,o)})}reportContextSensitivity(e,r,n,i,s,o){this.getDelegates().forEach(a=>{a.reportContextSensitivity&&a.reportContextSensitivity(e,r,n,i,s,o)})}};PV([kV.Override],UE.prototype,"reportAmbiguity",null);PV([kV.Override],UE.prototype,"reportAttemptingFullContext",null);PV([kV.Override],UE.prototype,"reportContextSensitivity",null);$E.ProxyParserErrorListener=UE});var o1e=v(Ph=>{"use strict";Object.defineProperty(Ph,"__esModule",{value:!0});Ph.isSupplementaryCodePoint=Ph.isLowSurrogate=Ph.isHighSurrogate=void 0;function uWe(t){return t>=55296&&t<=56319}Ph.isHighSurrogate=uWe;function lWe(t){return t>=56320&&t<=57343}Ph.isLowSurrogate=lWe;function cWe(t){return t>=65536}Ph.isSupplementaryCodePoint=cWe});var qV=v(jE=>{"use strict";Object.defineProperty(jE,"__esModule",{value:!0});jE.CodePointBuffer=void 0;var a1e=Ts(),ab=o1e(),s7=class t{constructor(e,r){this.buffer=e,this._position=0,this._size=r}static withArray(e){return new t(e,e.length)}get position(){return this._position}set position(e){if(e<0||e>this._size)throw new RangeError;this._position=e}get remaining(){return this._size-this.position}get(e){return this.buffer[e]}array(){return this.buffer.slice(0,this._size)}static builder(e){return new t.Builder(e)}};jE.CodePointBuffer=s7;(function(t){let e;(function(n){n[n.BYTE=0]="BYTE",n[n.CHAR=1]="CHAR",n[n.INT=2]="INT"})(e||(e={}));class r{constructor(i){this.type=0,this.buffer=new Uint8Array(i),this.prevHighSurrogate=-1,this.position=0}build(){return new t(this.buffer,this.position)}static roundUpToNextPowerOfTwo(i){let s=32-Math.clz32(i-1);return Math.pow(2,s)}ensureRemaining(i){switch(this.type){case 0:if(this.buffer.length-this.position<i){let s=r.roundUpToNextPowerOfTwo(this.buffer.length+i),o=new Uint8Array(s);o.set(this.buffer.subarray(0,this.position),0),this.buffer=o}break;case 1:if(this.buffer.length-this.position<i){let s=r.roundUpToNextPowerOfTwo(this.buffer.length+i),o=new Uint16Array(s);o.set(this.buffer.subarray(0,this.position),0),this.buffer=o}break;case 2:if(this.buffer.length-this.position<i){let s=r.roundUpToNextPowerOfTwo(this.buffer.length+i),o=new Int32Array(s);o.set(this.buffer.subarray(0,this.position),0),this.buffer=o}break}}append(i){this.ensureRemaining(i.length),this.appendArray(i)}appendArray(i){switch(this.type){case 0:this.appendArrayByte(i);break;case 1:this.appendArrayChar(i);break;case 2:this.appendArrayInt(i);break}}appendArrayByte(i){a1e(this.prevHighSurrogate===-1);let s=i,o=0,a=i.length,u=this.buffer,l=this.position;for(;o<a;){let c=s[o];if(c<=255)u[l]=c;else if(i=i.subarray(o,a),this.position=l,ab.isHighSurrogate(c)){this.byteToIntBuffer(i.length),this.appendArrayInt(i);return}else{this.byteToCharBuffer(i.length),this.appendArrayChar(i);return}o++,l++}this.position=l}appendArrayChar(i){a1e(this.prevHighSurrogate===-1);let s=i,o=0,a=i.length,u=this.buffer,l=this.position;for(;o<a;){let c=s[o];if(!ab.isHighSurrogate(c))u[l]=c;else{i=i.subarray(o,a),this.position=l,this.charToIntBuffer(i.length),this.appendArrayInt(i);return}o++,l++}this.position=l}appendArrayInt(i){let s=i,o=0,a=i.length,u=this.buffer,l=this.position;for(;o<a;){let c=s[o];o++,this.prevHighSurrogate!==-1?ab.isLowSurrogate(c)?(u[l]=String.fromCharCode(this.prevHighSurrogate,c).codePointAt(0),l++,this.prevHighSurrogate=-1):(u[l]=this.prevHighSurrogate,l++,ab.isHighSurrogate(c)?this.prevHighSurrogate=c:(u[l]=c,l++,this.prevHighSurrogate=-1)):ab.isHighSurrogate(c)?this.prevHighSurrogate=c:(u[l]=c,l++)}this.prevHighSurrogate!==-1&&(u[l]=this.prevHighSurrogate,l++),this.position=l}byteToCharBuffer(i){let s=new Uint16Array(Math.max(this.position+i,this.buffer.length>>1));s.set(this.buffer.subarray(0,this.position),0),this.type=1,this.buffer=s}byteToIntBuffer(i){let s=new Int32Array(Math.max(this.position+i,this.buffer.length>>2));s.set(this.buffer.subarray(0,this.position),0),this.type=2,this.buffer=s}charToIntBuffer(i){let s=new Int32Array(Math.max(this.position+i,this.buffer.length>>1));s.set(this.buffer.subarray(0,this.position),0),this.type=2,this.buffer=s}}t.Builder=r})(s7=jE.CodePointBuffer||(jE.CodePointBuffer={}))});var UV=v(HE=>{"use strict";var Tc=HE&&HE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(HE,"__esModule",{value:!0});HE.CodePointCharStream=void 0;var u1e=Ts(),o7=Yf(),fWe=Os(),Cc=re(),Wa=class t{constructor(e,r,n,i){u1e(r===0),this._array=e,this._size=n,this._name=i,this._position=0}get internalStorage(){return this._array}static fromBuffer(e,r){return(r===void 0||r.length===0)&&(r=o7.IntStream.UNKNOWN_SOURCE_NAME),new t(e.array(),e.position,e.remaining,r)}consume(){if(this._size-this._position===0)throw u1e(this.LA(1)===o7.IntStream.EOF),new RangeError("cannot consume EOF");this._position++}get index(){return this._position}get size(){return this._size}mark(){return-1}release(e){}seek(e){this._position=e}get sourceName(){return this._name}toString(){return this.getText(fWe.Interval.of(0,this.size-1))}LA(e){let r;switch(Math.sign(e)){case-1:return r=this.index+e,r<0?o7.IntStream.EOF:this._array[r];case 0:return 0;case 1:return r=this.index+e-1,r>=this.size?o7.IntStream.EOF:this._array[r]}throw new RangeError("Not reached")}getText(e){let r=Math.min(e.a,this.size),n=Math.min(e.b-e.a+1,this.size-r);return this._array instanceof Int32Array?String.fromCodePoint(...Array.from(this._array.subarray(r,r+n))):String.fromCharCode(...Array.from(this._array.subarray(r,r+n)))}};Tc([Cc.Override],Wa.prototype,"consume",null);Tc([Cc.Override],Wa.prototype,"index",null);Tc([Cc.Override],Wa.prototype,"size",null);Tc([Cc.Override],Wa.prototype,"mark",null);Tc([Cc.Override],Wa.prototype,"release",null);Tc([Cc.Override],Wa.prototype,"seek",null);Tc([Cc.Override],Wa.prototype,"sourceName",null);Tc([Cc.Override],Wa.prototype,"toString",null);Tc([Cc.Override],Wa.prototype,"LA",null);Tc([Cc.Override],Wa.prototype,"getText",null);HE.CodePointCharStream=Wa});var a7=v(ub=>{"use strict";Object.defineProperty(ub,"__esModule",{value:!0});ub.CharStreams=void 0;var xWe=qV(),dWe=UV(),hWe=Yf(),pWe;(function(t){function e(r,n){(n===void 0||n.length===0)&&(n=hWe.IntStream.UNKNOWN_SOURCE_NAME);let i=xWe.CodePointBuffer.builder(r.length),s=new Uint16Array(r.length);for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);return i.append(s),dWe.CodePointCharStream.fromBuffer(i.build(),n)}t.fromString=e})(pWe=ub.CharStreams||(ub.CharStreams={}))});var HV=v(kh=>{"use strict";var ho=kh&&kh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},mWe=kh&&kh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(kh,"__esModule",{value:!0});kh.BufferedTokenStream=void 0;var l1e=Ts(),c1e=Dy(),$V=Os(),jV=dc(),vi=re(),_m=gr(),os=class{constructor(e){if(this.tokens=[],this.p=-1,this.fetchedEOF=!1,e==null)throw new Error("tokenSource cannot be null");this._tokenSource=e}get tokenSource(){return this._tokenSource}set tokenSource(e){this._tokenSource=e,this.tokens.length=0,this.p=-1,this.fetchedEOF=!1}get index(){return this.p}mark(){return 0}release(e){}seek(e){this.lazyInit(),this.p=this.adjustSeekIndex(e)}get size(){return this.tokens.length}consume(){let e;if(this.p>=0?this.fetchedEOF?e=this.p<this.tokens.length-1:e=this.p<this.tokens.length:e=!1,!e&&this.LA(1)===_m.Token.EOF)throw new Error("cannot consume EOF");this.sync(this.p+1)&&(this.p=this.adjustSeekIndex(this.p+1))}sync(e){l1e(e>=0);let r=e-this.tokens.length+1;return r>0?this.fetch(r)>=r:!0}fetch(e){if(this.fetchedEOF)return 0;for(let r=0;r<e;r++){let n=this.tokenSource.nextToken();if(this.isWritableToken(n)&&(n.tokenIndex=this.tokens.length),this.tokens.push(n),n.type===_m.Token.EOF)return this.fetchedEOF=!0,r+1}return e}get(e){if(e<0||e>=this.tokens.length)throw new RangeError("token index "+e+" out of range 0.."+(this.tokens.length-1));return this.tokens[e]}getRange(e,r){if(e<0||r<0)return[];this.lazyInit();let n=new Array;r>=this.tokens.length&&(r=this.tokens.length-1);for(let i=e;i<=r;i++){let s=this.tokens[i];if(s.type===_m.Token.EOF)break;n.push(s)}return n}LA(e){let r=this.LT(e);return r?r.type:_m.Token.INVALID_TYPE}tryLB(e){if(!(this.p-e<0))return this.tokens[this.p-e]}LT(e){let r=this.tryLT(e);if(r===void 0)throw new RangeError("requested lookback index out of range");return r}tryLT(e){if(this.lazyInit(),e===0)throw new RangeError("0 is not a valid lookahead index");if(e<0)return this.tryLB(-e);let r=this.p+e-1;return this.sync(r),r>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[r]}adjustSeekIndex(e){return e}lazyInit(){this.p===-1&&this.setup()}setup(){this.sync(0),this.p=this.adjustSeekIndex(0)}getTokens(e,r,n){if(this.lazyInit(),e===void 0)return l1e(r===void 0&&n===void 0),this.tokens;if(r===void 0&&(r=this.tokens.length-1),e<0||r>=this.tokens.length||r<0||e>=this.tokens.length)throw new RangeError("start "+e+" or stop "+r+" not in 0.."+(this.tokens.length-1));if(e>r)return[];if(n===void 0)return this.tokens.slice(e,r+1);typeof n=="number"&&(n=new Set().add(n));let i=n,s=this.tokens.slice(e,r+1);return s=s.filter(o=>i.has(o.type)),s}nextTokenOnChannel(e,r){if(this.sync(e),e>=this.size)return this.size-1;let n=this.tokens[e];for(;n.channel!==r;){if(n.type===_m.Token.EOF)return e;e++,this.sync(e),n=this.tokens[e]}return e}previousTokenOnChannel(e,r){if(this.sync(e),e>=this.size)return this.size-1;for(;e>=0;){let n=this.tokens[e];if(n.type===_m.Token.EOF||n.channel===r)return e;e--}return e}getHiddenTokensToRight(e,r=-1){if(this.lazyInit(),e<0||e>=this.tokens.length)throw new RangeError(e+" not in 0.."+(this.tokens.length-1));let n=this.nextTokenOnChannel(e+1,jV.Lexer.DEFAULT_TOKEN_CHANNEL),i,s=e+1;return n===-1?i=this.size-1:i=n,this.filterForChannel(s,i,r)}getHiddenTokensToLeft(e,r=-1){if(this.lazyInit(),e<0||e>=this.tokens.length)throw new RangeError(e+" not in 0.."+(this.tokens.length-1));if(e===0)return[];let n=this.previousTokenOnChannel(e-1,jV.Lexer.DEFAULT_TOKEN_CHANNEL);if(n===e-1)return[];let i=n+1,s=e-1;return this.filterForChannel(i,s,r)}filterForChannel(e,r,n){let i=new Array;for(let s=e;s<=r;s++){let o=this.tokens[s];n===-1?o.channel!==jV.Lexer.DEFAULT_TOKEN_CHANNEL&&i.push(o):o.channel===n&&i.push(o)}return i}get sourceName(){return this.tokenSource.sourceName}getText(e){e===void 0?e=$V.Interval.of(0,this.size-1):e instanceof $V.Interval||(e=e.sourceInterval);let r=e.a,n=e.b;if(r<0||n<0)return"";this.fill(),n>=this.tokens.length&&(n=this.tokens.length-1);let i="";for(let s=r;s<=n;s++){let o=this.tokens[s];if(o.type===_m.Token.EOF)break;i+=o.text}return i.toString()}getTextFromRange(e,r){return this.isToken(e)&&this.isToken(r)?this.getText($V.Interval.of(e.tokenIndex,r.tokenIndex)):""}fill(){this.lazyInit();let e=1e3;for(;;)if(this.fetch(e)<e)return}isWritableToken(e){return e instanceof c1e.CommonToken}isToken(e){return e instanceof c1e.CommonToken}};ho([vi.NotNull],os.prototype,"_tokenSource",void 0);ho([vi.Override],os.prototype,"tokenSource",null);ho([vi.Override],os.prototype,"index",null);ho([vi.Override],os.prototype,"mark",null);ho([vi.Override],os.prototype,"release",null);ho([vi.Override],os.prototype,"seek",null);ho([vi.Override],os.prototype,"size",null);ho([vi.Override],os.prototype,"consume",null);ho([vi.Override],os.prototype,"get",null);ho([vi.Override],os.prototype,"LA",null);ho([vi.NotNull,vi.Override],os.prototype,"LT",null);ho([vi.Override],os.prototype,"sourceName",null);ho([vi.NotNull,vi.Override],os.prototype,"getText",null);ho([vi.NotNull,vi.Override],os.prototype,"getTextFromRange",null);os=ho([mWe(0,vi.NotNull)],os);kh.BufferedTokenStream=os});var c7=v(Bh=>{"use strict";var u7=Bh&&Bh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},gWe=Bh&&Bh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Bh,"__esModule",{value:!0});Bh.CommonTokenStream=void 0;var yWe=HV(),l7=re(),f1e=gr(),zE=class extends yWe.BufferedTokenStream{constructor(e,r=f1e.Token.DEFAULT_CHANNEL){super(e),this.channel=r}adjustSeekIndex(e){return this.nextTokenOnChannel(e,this.channel)}tryLB(e){if(this.p-e<0)return;let r=this.p,n=1;for(;n<=e&&r>0;)r=this.previousTokenOnChannel(r-1,this.channel),n++;if(!(r<0))return this.tokens[r]}tryLT(e){if(this.lazyInit(),e===0)throw new RangeError("0 is not a valid lookahead index");if(e<0)return this.tryLB(-e);let r=this.p,n=1;for(;n<e;)this.sync(r+1)&&(r=this.nextTokenOnChannel(r+1,this.channel)),n++;return this.tokens[r]}getNumberOfOnChannelTokens(){let e=0;this.fill();for(let r of this.tokens)if(r.channel===this.channel&&e++,r.type===f1e.Token.EOF)break;return e}};u7([l7.Override],zE.prototype,"adjustSeekIndex",null);u7([l7.Override],zE.prototype,"tryLB",null);u7([l7.Override],zE.prototype,"tryLT",null);zE=u7([gWe(0,l7.NotNull)],zE);Bh.CommonTokenStream=zE});var GV=v(qh=>{"use strict";var bm=qh&&qh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},x1e=qh&&qh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(qh,"__esModule",{value:!0});qh.ListTokenSource=void 0;var EWe=WF(),mx=re(),zV=gr(),gx=class{constructor(e,r){if(this.i=0,this._factory=EWe.CommonTokenFactory.DEFAULT,e==null)throw new Error("tokens cannot be null");this.tokens=e,this._sourceName=r}get charPositionInLine(){if(this.i<this.tokens.length)return this.tokens[this.i].charPositionInLine;if(this.eofToken!=null)return this.eofToken.charPositionInLine;if(this.tokens.length>0){let e=this.tokens[this.tokens.length-1],r=e.text;if(r!=null){let n=r.lastIndexOf(`
`);if(n>=0)return r.length-n-1}return e.charPositionInLine+e.stopIndex-e.startIndex+1}return 0}nextToken(){if(this.i>=this.tokens.length){if(this.eofToken==null){let r=-1;if(this.tokens.length>0){let i=this.tokens[this.tokens.length-1].stopIndex;i!==-1&&(r=i+1)}let n=Math.max(-1,r-1);this.eofToken=this._factory.create({source:this,stream:this.inputStream},zV.Token.EOF,"EOF",zV.Token.DEFAULT_CHANNEL,r,n,this.line,this.charPositionInLine)}return this.eofToken}let e=this.tokens[this.i];return this.i===this.tokens.length-1&&e.type===zV.Token.EOF&&(this.eofToken=e),this.i++,e}get line(){if(this.i<this.tokens.length)return this.tokens[this.i].line;if(this.eofToken!=null)return this.eofToken.line;if(this.tokens.length>0){let e=this.tokens[this.tokens.length-1],r=e.line,n=e.text;if(n!=null)for(let i=0;i<n.length;i++)n.charAt(i)===`
`&&r++;return r}return 1}get inputStream(){if(this.i<this.tokens.length)return this.tokens[this.i].inputStream;if(this.eofToken!=null)return this.eofToken.inputStream;if(this.tokens.length>0)return this.tokens[this.tokens.length-1].inputStream}get sourceName(){if(this._sourceName)return this._sourceName;let e=this.inputStream;return e!=null?e.sourceName:"List"}set tokenFactory(e){this._factory=e}get tokenFactory(){return this._factory}};bm([mx.Override],gx.prototype,"charPositionInLine",null);bm([mx.Override],gx.prototype,"nextToken",null);bm([mx.Override],gx.prototype,"line",null);bm([mx.Override],gx.prototype,"inputStream",null);bm([mx.Override],gx.prototype,"sourceName",null);bm([mx.Override,mx.NotNull,x1e(0,mx.NotNull)],gx.prototype,"tokenFactory",null);gx=bm([x1e(0,mx.NotNull)],gx);qh.ListTokenSource=gx});var d1e=v(f7=>{"use strict";Object.defineProperty(f7,"__esModule",{value:!0});f7.MultiMap=void 0;var QV=class extends Map{constructor(){super()}map(e,r){let n=super.get(e);n||(n=[],super.set(e,n)),n.push(r)}getPairs(){let e=[];return this.forEach((r,n)=>{r.forEach(i=>{e.push([n,i])})}),e}};f7.MultiMap=QV});var WV=v(x7=>{"use strict";Object.defineProperty(x7,"__esModule",{value:!0});x7.ParseCancellationException=void 0;var VV=class extends Error{constructor(e){super(e.message),this.cause=e,this.stack=e.stack}getCause(){return this.cause}};x7.ParseCancellationException=VV});var YV=v(GE=>{"use strict";var AWe=GE&&GE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(GE,"__esModule",{value:!0});GE.InterpreterRuleContext=void 0;var SWe=re(),vWe=Qa(),d7=class extends vWe.ParserRuleContext{constructor(e,r,n){n!==void 0?super(r,n):super(),this._ruleIndex=e}get ruleIndex(){return this._ruleIndex}};AWe([SWe.Override],d7.prototype,"ruleIndex",null);GE.InterpreterRuleContext=d7});var XV=v(Uh=>{"use strict";var $h=Uh&&Uh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},_We=Uh&&Uh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Uh,"__esModule",{value:!0});Uh.ParserInterpreter=void 0;var bWe=nc(),TWe=Ei(),CWe=ex(),h1e=Cy(),RWe=b5(),OWe=YV(),DWe=uV(),m1e=re(),QE=re(),NWe=mm(),p1e=ym(),FWe=ic(),wWe=dw(),lb=gr(),Rc=class KV extends NWe.Parser{constructor(e,r,n,i,s){if(super(e instanceof KV?e.inputStream:s),this._parentContextStack=[],this.overrideDecision=-1,this.overrideDecisionInputIndex=-1,this.overrideDecisionAlt=-1,this.overrideDecisionReached=!1,this._overrideDecisionRoot=void 0,e instanceof KV){let o=e;this._grammarFileName=o._grammarFileName,this._atn=o._atn,this.pushRecursionContextStates=o.pushRecursionContextStates,this._ruleNames=o._ruleNames,this._vocabulary=o._vocabulary,this.interpreter=new p1e.ParserATNSimulator(this._atn,this)}else{r=r,n=n,i=i,this._grammarFileName=e,this._atn=i,this._ruleNames=n.slice(0),this._vocabulary=r,this.pushRecursionContextStates=new CWe.BitSet(i.states.length);for(let o of i.states)o instanceof wWe.StarLoopEntryState&&o.precedenceRuleDecision&&this.pushRecursionContextStates.set(o.stateNumber);this.interpreter=new p1e.ParserATNSimulator(i,this)}}reset(e){e===void 0?super.reset():super.reset(e),this.overrideDecisionReached=!1,this._overrideDecisionRoot=void 0}get atn(){return this._atn}get vocabulary(){return this._vocabulary}get ruleNames(){return this._ruleNames}get grammarFileName(){return this._grammarFileName}parse(e){let r=this._atn.ruleToStartState[e];for(this._rootContext=this.createInterpreterRuleContext(void 0,bWe.ATNState.INVALID_STATE_NUMBER,e),r.isPrecedenceRule?this.enterRecursionRule(this._rootContext,r.stateNumber,e,0):this.enterRule(this._rootContext,r.stateNumber,e);;){let n=this.atnState;switch(n.stateType){case TWe.ATNStateType.RULE_STOP:if(this._ctx.isEmpty)if(r.isPrecedenceRule){let i=this._ctx,s=this._parentContextStack.pop();return this.unrollRecursionContexts(s[0]),i}else return this.exitRule(),this._rootContext;this.visitRuleStopState(n);break;default:try{this.visitState(n)}catch(i){if(i instanceof FWe.RecognitionException)this.state=this._atn.ruleToStopState[n.ruleIndex].stateNumber,this.context.exception=i,this.errorHandler.reportError(this,i),this.recover(i);else throw i}break}}}enterRecursionRule(e,r,n,i){this._parentContextStack.push([this._ctx,e.invokingState]),super.enterRecursionRule(e,r,n,i)}get atnState(){return this._atn.states[this.state]}visitState(e){let r=1;e.numberOfTransitions>1&&(r=this.visitDecisionState(e));let n=e.transition(r-1);switch(n.serializationType){case 1:if(this.pushRecursionContextStates.get(e.stateNumber)&&!(n.target instanceof DWe.LoopEndState)){let l=this._parentContextStack[this._parentContextStack.length-1],c=this.createInterpreterRuleContext(l[0],l[1],this._ctx.ruleIndex);this.pushNewRecursionContext(c,this._atn.ruleToStartState[e.ruleIndex].stateNumber,this._ctx.ruleIndex)}break;case 5:this.match(n._label);break;case 2:case 7:case 8:n.matches(this._input.LA(1),lb.Token.MIN_USER_TOKEN_TYPE,65535)||this.recoverInline(),this.matchWildcard();break;case 9:this.matchWildcard();break;case 3:let i=n.target,s=i.ruleIndex,o=this.createInterpreterRuleContext(this._ctx,e.stateNumber,s);i.isPrecedenceRule?this.enterRecursionRule(o,i.stateNumber,s,n.precedence):this.enterRule(o,n.target.stateNumber,s);break;case 4:let a=n;if(!this.sempred(this._ctx,a.ruleIndex,a.predIndex))throw new h1e.FailedPredicateException(this);break;case 6:let u=n;this.action(this._ctx,u.ruleIndex,u.actionIndex);break;case 10:if(!this.precpred(this._ctx,n.precedence)){let l=n.precedence;throw new h1e.FailedPredicateException(this,`precpred(_ctx, ${l})`)}break;default:throw new Error("UnsupportedOperationException: Unrecognized ATN transition type.")}this.state=n.target.stateNumber}visitDecisionState(e){let r;this.errorHandler.sync(this);let n=e.decision;return n===this.overrideDecision&&this._input.index===this.overrideDecisionInputIndex&&!this.overrideDecisionReached?(r=this.overrideDecisionAlt,this.overrideDecisionReached=!0):r=this.interpreter.adaptivePredict(this._input,n,this._ctx),r}createInterpreterRuleContext(e,r,n){return new OWe.InterpreterRuleContext(n,e,r)}visitRuleStopState(e){if(this._atn.ruleToStartState[e.ruleIndex].isPrecedenceRule){let i=this._parentContextStack.pop();this.unrollRecursionContexts(i[0]),this.state=i[1]}else this.exitRule();let n=this._atn.states[this.state].transition(0);this.state=n.followState.stateNumber}addDecisionOverride(e,r,n){this.overrideDecision=e,this.overrideDecisionInputIndex=r,this.overrideDecisionAlt=n}get overrideDecisionRoot(){return this._overrideDecisionRoot}recover(e){let r=this._input.index;if(this.errorHandler.recover(this,e),this._input.index===r){let n=e.getOffendingToken();if(!n)throw new Error("Expected exception to have an offending token");let i=n.tokenSource,s=i!==void 0?i.inputStream:void 0,o={source:i,stream:s};if(e instanceof RWe.InputMismatchException){let a=e.expectedTokens;if(a===void 0)throw new Error("Expected the exception to provide expected tokens");let u=lb.Token.INVALID_TYPE;a.isNil||(u=a.minElement);let l=this.tokenFactory.create(o,u,n.text,lb.Token.DEFAULT_CHANNEL,-1,-1,n.line,n.charPositionInLine);this._ctx.addErrorNode(this.createErrorNode(this._ctx,l))}else{let a=n.tokenSource,u=this.tokenFactory.create(o,lb.Token.INVALID_TYPE,n.text,lb.Token.DEFAULT_CHANNEL,-1,-1,n.line,n.charPositionInLine);this._ctx.addErrorNode(this.createErrorNode(this._ctx,u))}}}recoverInline(){return this._errHandler.recoverInline(this)}get rootContext(){return this._rootContext}};$h([m1e.NotNull],Rc.prototype,"_vocabulary",void 0);$h([QE.Override],Rc.prototype,"reset",null);$h([QE.Override],Rc.prototype,"atn",null);$h([QE.Override],Rc.prototype,"vocabulary",null);$h([QE.Override],Rc.prototype,"ruleNames",null);$h([QE.Override],Rc.prototype,"grammarFileName",null);$h([QE.Override],Rc.prototype,"enterRecursionRule",null);Rc=$h([_We(1,m1e.NotNull)],Rc);Uh.ParserInterpreter=Rc});var g1e=v(Hh=>{"use strict";var VE=Hh&&Hh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},h7=Hh&&Hh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Hh,"__esModule",{value:!0});Hh.ParseTreeMatch=void 0;var yx=re(),jh=class{constructor(e,r,n,i){if(!e)throw new Error("tree cannot be null");if(!r)throw new Error("pattern cannot be null");if(!n)throw new Error("labels cannot be null");this._tree=e,this._pattern=r,this._labels=n,this._mismatchedNode=i}get(e){let r=this._labels.get(e);if(!(!r||r.length===0))return r[r.length-1]}getAll(e){let r=this._labels.get(e);return r||[]}get labels(){return this._labels}get mismatchedNode(){return this._mismatchedNode}get succeeded(){return!this._mismatchedNode}get pattern(){return this._pattern}get tree(){return this._tree}toString(){return`Match ${this.succeeded?"succeeded":"failed"}; found ${this.labels.size} labels`}};VE([yx.NotNull,h7(0,yx.NotNull)],jh.prototype,"getAll",null);VE([yx.NotNull],jh.prototype,"labels",null);VE([yx.NotNull],jh.prototype,"pattern",null);VE([yx.NotNull],jh.prototype,"tree",null);VE([yx.Override],jh.prototype,"toString",null);jh=VE([h7(0,yx.NotNull),h7(1,yx.NotNull),h7(2,yx.NotNull)],jh);Hh.ParseTreeMatch=jh});var E1e=v(p7=>{"use strict";Object.defineProperty(p7,"__esModule",{value:!0});p7.XPathLexer=void 0;var LWe=vm(),IWe=dc(),MWe=rE(),PWe=Bl(),y1e=ka(),Or=class t extends IWe.Lexer{constructor(e){super(e),this._interp=new MWe.LexerATNSimulator(t._ATN,this)}get vocabulary(){return t.VOCABULARY}get grammarFileName(){return"XPathLexer.g4"}get ruleNames(){return t.ruleNames}get serializedATN(){return t._serializedATN}get channelNames(){return t.channelNames}get modeNames(){return t.modeNames}action(e,r,n){switch(r){case 4:this.ID_action(e,n);break}}ID_action(e,r){switch(r){case 0:let n=this.text;n.charAt(0)===n.charAt(0).toUpperCase()?this.type=t.TOKEN_REF:this.type=t.RULE_REF;break}}static get _ATN(){return t.__ATN||(t.__ATN=new LWe.ATNDeserializer().deserialize(y1e.toCharArray(t._serializedATN))),t.__ATN}};p7.XPathLexer=Or;Or.TOKEN_REF=1;Or.RULE_REF=2;Or.ANYWHERE=3;Or.ROOT=4;Or.WILDCARD=5;Or.BANG=6;Or.ID=7;Or.STRING=8;Or.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"];Or.modeNames=["DEFAULT_MODE"];Or.ruleNames=["ANYWHERE","ROOT","WILDCARD","BANG","ID","NameChar","NameStartChar","STRING"];Or._LITERAL_NAMES=[void 0,void 0,void 0,"'//'","'/'","'*'","'!'"];Or._SYMBOLIC_NAMES=[void 0,"TOKEN_REF","RULE_REF","ANYWHERE","ROOT","WILDCARD","BANG","ID","STRING"];Or.VOCABULARY=new PWe.VocabularyImpl(Or._LITERAL_NAMES,Or._SYMBOLIC_NAMES,[]);Or._serializedATNSegments=2;Or._serializedATNSegment0=`\uC91D\uCABA\u058D\uAFBA\u4F53\u0607\uEA8B\uC241
2\b					\x07	\x07\b	\b			\x07
\f"\v\x07\x07\b\b		\x07	,
	\f		/\v			-
\x07\x07	\b\v	\r
\u02B6
2;C\\aac|\x81\xA1\xAC\xAC\xAF\xAF\xB7\xB7\xBC\xBC\xC2\xD8\xDA\xF8\xFA\u02C3\u02C8\u02D3\u02E2\u02E6\u02EE\u02EE\u02F0\u02F0\u0302\u0376\u0378\u0379\u037C\u037F\u0381\u0381\u0388\u0388\u038A\u038C\u038E\u038E\u0390\u03A3\u03A5\u03F7\u03F9\u0483\u0485\u0489\u048C\u0531\u0533\u0558\u055B\u055B\u0563\u0589\u0593\u05BF\u05C1\u05C1\u05C3\u05C4\u05C6\u05C7\u05C9\u05C9\u05D2\u05EC\u05F2\u05F4\u0602\u0607\u0612\u061C\u061E\u061E\u0622\u066B\u0670\u06D5\u06D7\u06DF\u06E1\u06EA\u06EC\u06FE\u0701\u0701\u0711\u074C\u074F\u07B3\u07C2\u07F7\u07FC\u07FC\u0802\u082F\u0842\u085D\u08A2\u08B6\u08B8\u08BF\u08D6\u0965\u0968\u0971\u0973\u0985\u0987\u098E\u0991\u0992\u0995\u09AA\u09AC\u09B2\u09B4\u09B4\u09B8\u09BB\u09BE\u09C6\u09C9\u09CA\u09CD\u09D0\u09D9\u09D9\u09DE\u09DF\u09E1\u09E5\u09E8\u09F3\u0A03\u0A05\u0A07\u0A0C\u0A11\u0A12\u0A15\u0A2A\u0A2C\u0A32\u0A34\u0A35\u0A37\u0A38\u0A3A\u0A3B\u0A3E\u0A3E\u0A40\u0A44\u0A49\u0A4A\u0A4D\u0A4F\u0A53\u0A53\u0A5B\u0A5E\u0A60\u0A60\u0A68\u0A77\u0A83\u0A85\u0A87\u0A8F\u0A91\u0A93\u0A95\u0AAA\u0AAC\u0AB2\u0AB4\u0AB5\u0AB7\u0ABB\u0ABE\u0AC7\u0AC9\u0ACB\u0ACD\u0ACF\u0AD2\u0AD2\u0AE2\u0AE5\u0AE8\u0AF1\u0AFB\u0AFB\u0B03\u0B05\u0B07\u0B0E\u0B11\u0B12\u0B15\u0B2A\u0B2C\u0B32\u0B34\u0B35\u0B37\u0B3B\u0B3E\u0B46\u0B49\u0B4A\u0B4D\u0B4F\u0B58\u0B59\u0B5E\u0B5F\u0B61\u0B65\u0B68\u0B71\u0B73\u0B73\u0B84\u0B85\u0B87\u0B8C\u0B90\u0B92\u0B94\u0B97\u0B9B\u0B9C\u0B9E\u0B9E\u0BA0\u0BA1\u0BA5\u0BA6\u0BAA\u0BAC\u0BB0\u0BBB\u0BC0\u0BC4\u0BC8\u0BCA\u0BCC\u0BCF\u0BD2\u0BD2\u0BD9\u0BD9\u0BE8\u0BF1\u0C02\u0C05\u0C07\u0C0E\u0C10\u0C12\u0C14\u0C2A\u0C2C\u0C3B\u0C3F\u0C46\u0C48\u0C4A\u0C4C\u0C4F\u0C57\u0C58\u0C5A\u0C5C\u0C62\u0C65\u0C68\u0C71\u0C82\u0C85\u0C87\u0C8E\u0C90\u0C92\u0C94\u0CAA\u0CAC\u0CB5\u0CB7\u0CBB\u0CBE\u0CC6\u0CC8\u0CCA\u0CCC\u0CCF\u0CD7\u0CD8\u0CE0\u0CE0\u0CE2\u0CE5\u0CE8\u0CF1\u0CF3\u0CF4\u0D03\u0D05\u0D07\u0D0E\u0D10\u0D12\u0D14\u0D3C\u0D3F\u0D46\u0D48\u0D4A\u0D4C\u0D50\u0D56\u0D59\u0D61\u0D65\u0D68\u0D71\u0D7C\u0D81\u0D84\u0D85\u0D87\u0D98\u0D9C\u0DB3\u0DB5\u0DBD\u0DBF\u0DBF\u0DC2\u0DC8\u0DCC\u0DCC\u0DD1\u0DD6\u0DD8\u0DD8\u0DDA\u0DE1\u0DE8\u0DF1\u0DF4\u0DF5\u0E03\u0E3C\u0E42\u0E50\u0E52\u0E5B\u0E83\u0E84\u0E86\u0E86\u0E89\u0E8A\u0E8C\u0E8C\u0E8F\u0E8F\u0E96\u0E99\u0E9B\u0EA1\u0EA3\u0EA5\u0EA7\u0EA7\u0EA9\u0EA9\u0EAC\u0EAD\u0EAF\u0EBB\u0EBD\u0EBF\u0EC2\u0EC6\u0EC8\u0EC8\u0ECA\u0ECF\u0ED2\u0EDB\u0EDE\u0EE1\u0F02\u0F02\u0F1A\u0F1B\u0F22\u0F2B\u0F37\u0F37\u0F39\u0F39\u0F3B\u0F3B\u0F40\u0F49\u0F4B\u0F6E\u0F73\u0F86\u0F88\u0F99\u0F9B\u0FBE\u0FC8\u0FC8\u1002\u104B\u1052\u109F\u10A2\u10C7\u10C9\u10C9\u10CF\u10CF\u10D2\u10FC\u10FE\u124A\u124C\u124F\u1252\u1258\u125A\u125A\u125C\u125F\u1262\u128A\u128C\u128F\u1292\u12B2\u12B4\u12B7\u12BA\u12C0\u12C2\u12C2\u12C4\u12C7\u12CA\u12D8\u12DA\u1312\u1314\u1317\u131A\u135C\u135F\u1361\u1382\u1391\u13A2\u13F7\u13FA\u13FF\u1403\u166E\u1671\u1681\u1683\u169C\u16A2\u16EC\u16F0\u16FA\u1702\u170E\u1710\u1716\u1722\u1736\u1742\u1755\u1762\u176E\u1770\u1772\u1774\u1775\u1782\u17D5\u17D9\u17D9\u17DE\u17DF\u17E2\u17EB\u180D\u1810\u1812\u181B\u1822\u1879\u1882\u18AC\u18B2\u18F7\u1902\u1920\u1922\u192D\u1932\u193D\u1948\u196F\u1972\u1976\u1982\u19AD\u19B2\u19CB\u19D2\u19DB\u1A02\u1A1D\u1A22\u1A60\u1A62\u1A7E\u1A81\u1A8B\u1A92\u1A9B\u1AA9\u1AA9\u1AB2\u1ABF\u1B02\u1B4D\u1B52\u1B5B\u1B6D\u1B75\u1B82\u1BF5\u1C02\u1C39\u1C42\u1C4B\u1C4F\u1C7F\u1C82\u1C8A\u1CD2\u1CD4\u1CD6\u1CF8\u1CFA\u1CFB\u1D02\u1DF7\u1DFD\u1F17\u1F1A\u1F1F\u1F22\u1F47\u1F4A\u1F4F\u1F52\u1F59\u1F5B\u1F5B\u1F5D\u1F5D\u1F5F\u1F5F\u1F61\u1F7F\u1F82\u1FB6\u1FB8\u1FBE\u1FC0\u1FC0\u1FC4\u1FC6\u1FC8\u1FCE\u1FD2\u1FD5\u1FD8\u1FDD\u1FE2\u1FEE\u1FF4\u1FF6\u1FF8\u1FFE\u200D\u2011\u202C\u2030\u2041\u2042\u2056\u2056\u2062\u2066\u2068\u2071\u2073\u2073\u2081\u2081\u2092\u209E\u20D2\u20DE\u20E3\u20E3\u20E7\u20F2\u2104\u2104\u2109\u2109\u210C\u2115\u2117\u2117\u211B\u211F\u2126\u2126\u2128\u2128\u212A\u212A\u212C\u212F\u2131\u213B\u213E\u2141\u2147\u214B\u2150\u2150\u2162\u218A\u2C02\u2C30\u2C32\u2C60\u2C62\u2CE6\u2CED\u2CF5\u2D02\u2D27\u2D29\u2D29\u2D2F\u2D2F\u2D32\u2D69\u2D71\u2D71\u2D81\u2D98\u2DA2\u2DA8\u2DAA\u2DB0\u2DB2\u2DB8\u2DBA\u2DC0\u2DC2\u2DC8\u2DCA\u2DD0\u2DD2\u2DD8\u2DDA\u2DE0\u2DE2\u2E01\u2E31\u2E31\u3007\u3009\u3023\u3031\u3033\u3037\u303A\u303E\u3043\u3098\u309B\u309C\u309F\u30A1\u30A3\u30FC\u30FE\u3101\u3107\u312F\u3133\u3190\u31A2\u31BC\u31F2\u3201\u3402\u4DB7\u4E02\u9FD7\uA002\uA48E\uA4D2\uA4FF\uA502\uA60E\uA612\uA62D\uA642\uA671\uA676\uA67F\uA681\uA6F3\uA719\uA721\uA724\uA78A\uA78D\uA7B0\uA7B2\uA7B9\uA7F9\uA829\uA842\uA875\uA882\uA8C7\uA8D2\uA8DB\uA8E2\uA8F9\uA8FD\uA8FD\uA8FF\uA8FF\uA902\uA92F\uA932\uA955\uA962\uA97E\uA982\uA9C2\uA9D1\uA9DB\uA9E2\uAA00\uAA02\uAA38\uAA42\uAA4F\uAA52\uAA5B\uAA62\uAA78\uAA7C\uAAC4\uAADD\uAADF\uAAE2\uAAF1\uAAF4\uAAF8\uAB03\uAB08\uAB0B\uAB10\uAB13\uAB18\uAB22\uAB28\uAB2A\uAB30\uAB32\uAB5C\uAB5E\uAB67\uAB72\uABEC\uABEE\uABEF\uABF2\uABFB\uAC02\uD7A5\uD7B2\uD7C8\uD7CD\uD7FD\uF902\uFA6F\uFA72\uFADB\uFB02\uFB08\uFB15\uFB19\uFB1F\uFB2A\uFB2C\uFB38\uFB3A\uFB3E\uFB40\uFB40\uFB42\uFB43\uFB45\uFB46\uFB48\uFBB3\uFBD5\uFD3F\uFD52\uFD91\uFD94\uFDC9\uFDF2\uFDFD\uFE02\uFE11\uFE22\uFE31\uFE35\uFE36\uFE4F\uFE51\uFE72\uFE76\uFE78\uFEFE\uFF01\uFF01\uFF12\uFF1B\uFF23\uFF3C\uFF41\uFF41\uFF43\uFF5C\uFF68\uFFC0\uFFC4\uFFC9\uFFCC\uFFD1\uFFD4\uFFD9\uFFDC\uFFDE\uFFFB\uFFFD\r(*<>?AOR_\x82\xFC\u0142\u0176\u01FF\u01FF\u0282\u029E\u02A2\u02D2\u02E2\u02E2\u0302\u0321\u0332\u034C\u0352\u037C\u0382\u039F\u03A2\u03C5\u03CA\u03D1\u03D3\u03D7\u0402\u049F\u04A2\u04AB\u04B2\u04D5\u04DA\u04FD\u0502\u0529\u0532\u0565\u0602\u0738\u0742\u0757\u0762\u0769\u0802\u0807\u080A\u080A\u080C\u0837\u0839\u083A\u083E\u083E\u0841\u0857\u0862\u0878\u0882\u08A0\u08E2\u08F4\u08F6\u08F7\u0902\u0917\u0922\u093B\u0982\u09B9\u09C0\u09C1\u0A02\u0A05\u0A07\u0A08\u0A0E\u0A15\u0A17\u0A19\u0A1B\u0A35\u0A3A\u0A3C\u0A41\u0A41\u0A62\u0A7E\u0A82\u0A9E\u0AC2\u0AC9\u0ACB\u0AE8\u0B02\u0B37\u0B42\u0B57\u0B62\u0B74\u0B82\u0B93\u0C02\u0C4A\u0C82\u0CB4\u0CC2\u0CF4\u1002\u1048\u1068\u1071\u1081\u10BC\u10BF\u10BF\u10D2\u10EA\u10F2\u10FB\u1102\u1136\u1138\u1141\u1152\u1175\u1178\u1178\u1182\u11C6\u11CC\u11CE\u11D2\u11DC\u11DE\u11DE\u1202\u1213\u1215\u1239\u1240\u1240\u1282\u1288\u128A\u128A\u128C\u128F\u1291\u129F\u12A1\u12AA\u12B2\u12EC\u12F2\u12FB\u1302\u1305\u1307\u130E\u1311\u1312\u1315\u132A\u132C\u1332\u1334\u1335\u1337\u133B\u133E\u1346\u1349\u134A\u134D\u134F\u1352\u1352\u1359\u1359\u135F\u1365\u1368\u136E\u1372\u1376\u1402\u144C\u1452\u145B\u1482\u14C7\u14C9\u14C9\u14D2\u14DB\u1582\u15B7\u15BA\u15C2\u15DA\u15DF\u1602\u1642\u1646\u1646\u1652\u165B\u1682\u16B9\u16C2\u16CB\u1702\u171B\u171F\u172D\u1732\u173B\u18A2\u18EB\u1901\u1901\u1AC2\u1AFA\u1C02\u1C0A\u1C0C\u1C38\u1C3A\u1C42\u1C52\u1C5B\u1C74\u1C91\u1C94\u1CA9\u1CAB\u1CB8\u2002\u239B\u2402\u2470\u2482\u2545\u3002\u3430\u4402\u4648\u6802\u6A3A\u6A42\u6A60\u6A62\u6A6B\u6AD2\u6AEF\u6AF2\u6AF6\u6B02\u6B38\u6B42\u6B45\u6B52\u6B5B\u6B65\u6B79\u6B7F\u6B91\u6F02\u6F46\u6F52\u6F80\u6F91\u6FA1\u6FE2\u6FE2\u7002\u87EE\u8802\u8AF4\uB002\uB003\uBC02\uBC6C\uBC72\uBC7E\uBC82\uBC8A\uBC92\uBC9B\uBC9F\uBCA0\uBCA2\uBCA5\uD167\uD16B\uD16F\uD184\uD187\uD18D\uD1AC\uD1AF\uD244\uD246\uD402\uD456\uD458\uD49E\uD4A0\uD4A1\uD4A4\uD4A4\uD4A7\uD4A8\uD4AB\uD4AE\uD4B0\uD4BB\uD4BD\uD4BD\uD4BF\uD4C5\uD4C7\uD507\uD509\uD50C\uD50F\uD516\uD518\uD51E\uD520\uD53B\uD53D\uD540\uD542\uD546\uD548\uD548\uD54C\uD552\uD554\uD6A7\uD6AA\uD6C2\uD6C4\uD6DC\uD6DE\uD6FC\uD6FE\uD716\uD718\uD736\uD738\uD750\uD752\uD770\uD772\uD78A\uD78C\uD7AA\uD7AC\uD7C4\uD7C6\uD7CD\uD7D0\uD801\uDA02\uDA38\uDA3D\uDA6E\uDA77\uDA77\uDA86\uDA86\uDA9D\uDAA1\uDAA3\uDAB1\uE002\uE008\uE00A\uE01A\uE01D\uE023\uE025\uE026\uE028\uE02C\uE802\uE8C6\uE8D2\uE8D8\uE902\uE94C\uE952\uE95B\uEE02\uEE05\uEE07\uEE21\uEE23\uEE24\uEE26\uEE26\uEE29\uEE29\uEE2B\uEE34\uEE36\uEE39\uEE3B\uEE3B\uEE3D\uEE3D\uEE44\uEE44\uEE49\uEE49\uEE4B\uEE4B\uEE4D\uEE4D\uEE4F\uEE51\uEE53\uEE54\uEE56\uEE56\uEE59\uEE59\uEE5B\uEE5B\uEE5D\uEE5D\uEE5F\uEE5F\uEE61\uEE61\uEE63\uEE64\uEE66\uEE66\uEE69\uEE6C\uEE6E\uEE74\uEE76\uEE79\uEE7B\uEE7E\uEE80\uEE80\uEE82\uEE8B\uEE8D\uEE9D\uEEA3\uEEA5\uEEA7\uEEAB\uEEAD\uEEBD\uA6D8\uA702\uB736\uB742\uB81F\uB822\uCEA3\uF802\uFA1F"\x81\u0102\u01F1\u0240C\\c|\xAC\xAC\xB7\xB7\xBC\xBC\xC2\xD8\xDA\xF8\xFA\u02C3\u02C8\u02D3\u02E2\u02E6\u02EE\u02EE\u02F0\u02F0\u0372\u0376\u0378\u0379\u037C\u037F\u0381\u0381\u0388\u0388\u038A\u038C\u038E\u038E\u0390\u03A3\u03A5\u03F7\u03F9\u0483\u048C\u0531\u0533\u0558\u055B\u055B\u0563\u0589\u05D2\u05EC\u05F2\u05F4\u0622\u064C\u0670\u0671\u0673\u06D5\u06D7\u06D7\u06E7\u06E8\u06F0\u06F1\u06FC\u06FE\u0701\u0701\u0712\u0712\u0714\u0731\u074F\u07A7\u07B3\u07B3\u07CC\u07EC\u07F6\u07F7\u07FC\u07FC\u0802\u0817\u081C\u081C\u0826\u0826\u082A\u082A\u0842\u085A\u08A2\u08B6\u08B8\u08BF\u0906\u093B\u093F\u093F\u0952\u0952\u095A\u0963\u0973\u0982\u0987\u098E\u0991\u0992\u0995\u09AA\u09AC\u09B2\u09B4\u09B4\u09B8\u09BB\u09BF\u09BF\u09D0\u09D0\u09DE\u09DF\u09E1\u09E3\u09F2\u09F3\u0A07\u0A0C\u0A11\u0A12\u0A15\u0A2A\u0A2C\u0A32\u0A34\u0A35\u0A37\u0A38\u0A3A\u0A3B\u0A5B\u0A5E\u0A60\u0A60\u0A74\u0A76\u0A87\u0A8F\u0A91\u0A93\u0A95\u0AAA\u0AAC\u0AB2\u0AB4\u0AB5\u0AB7\u0ABB\u0ABF\u0ABF\u0AD2\u0AD2\u0AE2\u0AE3\u0AFB\u0AFB\u0B07\u0B0E\u0B11\u0B12\u0B15\u0B2A\u0B2C\u0B32\u0B34\u0B35\u0B37\u0B3B\u0B3F\u0B3F\u0B5E\u0B5F\u0B61\u0B63\u0B73\u0B73\u0B85\u0B85\u0B87\u0B8C\u0B90\u0B92\u0B94\u0B97\u0B9B\u0B9C\u0B9E\u0B9E\u0BA0\u0BA1\u0BA5\u0BA6\u0BAA\u0BAC\u0BB0\u0BBB\u0BD2\u0BD2\u0C07\u0C0E\u0C10\u0C12\u0C14\u0C2A\u0C2C\u0C3B\u0C3F\u0C3F\u0C5A\u0C5C\u0C62\u0C63\u0C82\u0C82\u0C87\u0C8E\u0C90\u0C92\u0C94\u0CAA\u0CAC\u0CB5\u0CB7\u0CBB\u0CBF\u0CBF\u0CE0\u0CE0\u0CE2\u0CE3\u0CF3\u0CF4\u0D07\u0D0E\u0D10\u0D12\u0D14\u0D3C\u0D3F\u0D3F\u0D50\u0D50\u0D56\u0D58\u0D61\u0D63\u0D7C\u0D81\u0D87\u0D98\u0D9C\u0DB3\u0DB5\u0DBD\u0DBF\u0DBF\u0DC2\u0DC8\u0E03\u0E32\u0E34\u0E35\u0E42\u0E48\u0E83\u0E84\u0E86\u0E86\u0E89\u0E8A\u0E8C\u0E8C\u0E8F\u0E8F\u0E96\u0E99\u0E9B\u0EA1\u0EA3\u0EA5\u0EA7\u0EA7\u0EA9\u0EA9\u0EAC\u0EAD\u0EAF\u0EB2\u0EB4\u0EB5\u0EBF\u0EBF\u0EC2\u0EC6\u0EC8\u0EC8\u0EDE\u0EE1\u0F02\u0F02\u0F42\u0F49\u0F4B\u0F6E\u0F8A\u0F8E\u1002\u102C\u1041\u1041\u1052\u1057\u105C\u105F\u1063\u1063\u1067\u1068\u1070\u1072\u1077\u1083\u1090\u1090\u10A2\u10C7\u10C9\u10C9\u10CF\u10CF\u10D2\u10FC\u10FE\u124A\u124C\u124F\u1252\u1258\u125A\u125A\u125C\u125F\u1262\u128A\u128C\u128F\u1292\u12B2\u12B4\u12B7\u12BA\u12C0\u12C2\u12C2\u12C4\u12C7\u12CA\u12D8\u12DA\u1312\u1314\u1317\u131A\u135C\u1382\u1391\u13A2\u13F7\u13FA\u13FF\u1403\u166E\u1671\u1681\u1683\u169C\u16A2\u16EC\u16F0\u16FA\u1702\u170E\u1710\u1713\u1722\u1733\u1742\u1753\u1762\u176E\u1770\u1772\u1782\u17B5\u17D9\u17D9\u17DE\u17DE\u1822\u1879\u1882\u1886\u1889\u18AA\u18AC\u18AC\u18B2\u18F7\u1902\u1920\u1952\u196F\u1972\u1976\u1982\u19AD\u19B2\u19CB\u1A02\u1A18\u1A22\u1A56\u1AA9\u1AA9\u1B07\u1B35\u1B47\u1B4D\u1B85\u1BA2\u1BB0\u1BB1\u1BBC\u1BE7\u1C02\u1C25\u1C4F\u1C51\u1C5C\u1C7F\u1C82\u1C8A\u1CEB\u1CEE\u1CF0\u1CF3\u1CF7\u1CF8\u1D02\u1DC1\u1E02\u1F17\u1F1A\u1F1F\u1F22\u1F47\u1F4A\u1F4F\u1F52\u1F59\u1F5B\u1F5B\u1F5D\u1F5D\u1F5F\u1F5F\u1F61\u1F7F\u1F82\u1FB6\u1FB8\u1FBE\u1FC0\u1FC0\u1FC4\u1FC6\u1FC8\u1FCE\u1FD2\u1FD5\u1FD8\u1FDD\u1FE2\u1FEE\u1FF4\u1FF6\u1FF8\u1FFE\u2073\u2073\u2081\u2081\u2092\u209E\u2104\u2104\u2109\u2109\u210C\u2115\u2117\u2117\u211B\u211F\u2126\u2126\u2128\u2128\u212A\u212A\u212C\u212F\u2131\u213B\u213E\u2141\u2147\u214B\u2150\u2150\u2162\u218A\u2C02\u2C30\u2C32\u2C60\u2C62\u2CE6\u2CED\u2CF0\u2CF4\u2CF5\u2D02\u2D27\u2D29\u2D29\u2D2F\u2D2F\u2D32\u2D69\u2D71\u2D71\u2D82\u2D98\u2DA2\u2DA8\u2DAA\u2DB0\u2DB2\u2DB8\u2DBA\u2DC0\u2DC2\u2DC8\u2DCA\u2DD0\u2DD2\u2DD8\u2DDA\u2DE0\u2E31\u2E31\u3007\u3009\u3023\u302B\u3033\u3037\u303A\u303E\u3043\u3098\u309F\u30A1\u30A3\u30FC\u30FE\u3101\u3107\u312F\u3133\u3190\u31A2\u31BC\u31F2\u3201\u3402\u4DB7\u4E02\u9FD7\uA002\uA48E\uA4D2\uA4FF\uA502\uA60E\uA612\uA621\uA62C\uA62D\uA642\uA670\uA681\uA69F\uA6A2\uA6F1\uA719\uA721\uA724\uA78A\uA78D\uA7B0\uA7B2\uA7B9\uA7F9\uA803\uA805\uA807\uA809\uA80C\uA80E\uA824\uA842\uA875\uA884\uA8B5\uA8F4\uA8F9\uA8FD\uA8FD\uA8FF\uA8FF\uA90C\uA927\uA932\uA948\uA962\uA97E\uA986\uA9B4\uA9D1\uA9D1\uA9E2\uA9E6\uA9E8\uA9F1\uA9FC\uAA00\uAA02\uAA2A\uAA42\uAA44\uAA46\uAA4D\uAA62\uAA78\uAA7C\uAA7C\uAA80\uAAB1\uAAB3\uAAB3\uAAB7\uAAB8\uAABB\uAABF\uAAC2\uAAC2\uAAC4\uAAC4\uAADD\uAADF\uAAE2\uAAEC\uAAF4\uAAF6\uAB03\uAB08\uAB0B\uAB10\uAB13\uAB18\uAB22\uAB28\uAB2A\uAB30\uAB32\uAB5C\uAB5E\uAB67\uAB72\uABE4\uAC02\uD7A5\uD7B2\uD7C8\uD7CD\uD7FD\uF902\uFA6F\uFA72\uFADB\uFB02\uFB08\uFB15\uFB19\uFB1F\uFB1F\uFB21\uFB2A\uFB2C\uFB38\uFB3A\uFB3E\uFB40\uFB40\uFB42\uFB43\uFB45\uFB46\uFB48\uFBB3\uFBD5\uFD3F\uFD52\uFD91\uFD94\uFDC9\uFDF2\uFDFD\uFE72\uFE76\uFE78\uFEFE\uFF23\uFF3C\uFF43\uFF5C\uFF68\uFFC0\uFFC4\uFFC9\uFFCC\uFFD1\uFFD4\uFFD9\uFFDC\uFFDE\r(*<>?AOR_\x82\xFC\u0142\u0176\u0282\u029E\u02A2\u02D2\u0302\u0321\u0332\u034C\u0352\u0377\u0382\u039F\u03A2\u03C5\u03CA\u03D1\u03D3\u03D7\u0402\u049F\u04B2\u04D5\u04DA\u04FD\u0502\u0529\u0532\u0565\u0602\u0738\u0742\u0757\u0762\u0769\u0802\u0807\u080A\u080A\u080C\u0837\u0839\u083A\u083E\u083E\u0841\u0857\u0862\u0878\u0882\u08A0\u08E2\u08F4\u08F6\u08F7\u0902\u0917\u0922\u093B\u0982\u09B9\u09C0\u09C1\u0A02\u0A02\u0A12\u0A15\u0A17\u0A19\u0A1B\u0A35\u0A62\u0A7E\u0A82\u0A9E\u0AC2\u0AC9\u0ACB\u0AE6\u0B02\u0B37\u0B42\u0B57\u0B62\u0B74\u0B82\u0B93\u0C02\u0C4A\u0C82\u0CB4\u0CC2\u0CF4\u1005\u1039\u1085\u10B1\u10D2\u10EA\u1105\u1128\u1152\u1174\u1178\u1178\u1185\u11B4\u11C3\u11C6\u11DC\u11DC\u11DE\u11DE\u1202\u1213\u1215\u122D\u1282\u1288\u128A\u128A\u128C\u128F\u1291\u129F\u12A1\u12AA\u12B2\u12E0\u1307\u130E\u1311\u1312\u1315\u132A\u132C\u1332\u1334\u1335\u1337\u133B\u133F\u133F\u1352\u1352\u135F\u1363\u1402\u1436\u1449\u144C\u1482\u14B1\u14C6\u14C7\u14C9\u14C9\u1582\u15B0\u15DA\u15DD\u1602\u1631\u1646\u1646\u1682\u16AC\u1702\u171B\u18A2\u18E1\u1901\u1901\u1AC2\u1AFA\u1C02\u1C0A\u1C0C\u1C30\u1C42\u1C42\u1C74\u1C91\u2002\u239B\u2402\u2470\u2482\u2545\u3002\u3430\u4402\u4648\u6802\u6A3A\u6A42\u6A60\u6AD2\u6AEF\u6B02\u6B31\u6B42\u6B45\u6B65\u6B79\u6B7F\u6B91\u6F02\u6F46\u6F52\u6F52\u6F95\u6FA1\u6FE2\u6FE2\u7002\u87EE\u8802\u8AF4\uB002\uB003\uBC02\uBC6C\uBC72\uBC7E\uBC82\uBC8A\uBC92\uBC9B\uD402\uD456\uD458\uD49E\uD4A0\uD4A1\uD4A4\uD4A4\uD4A7\uD4A8\uD4AB\uD4AE\uD4B0\uD4BB\uD4BD\uD4BD\uD4BF\uD4C5\uD4C7\uD507\uD509\uD50C\uD50F\uD516\uD518\uD51E\uD520\uD53B\uD53D\uD540\uD542\uD546\uD548\uD548`;Or._serializedATNSegment1=`\uD54C\uD552\uD554\uD6A7\uD6AA\uD6C2\uD6C4\uD6DC\uD6DE\uD6FC\uD6FE\uD716\uD718\uD736\uD738\uD750\uD752\uD770\uD772\uD78A\uD78C\uD7AA\uD7AC\uD7C4\uD7C6\uD7CD\uE802\uE8C6\uE902\uE945\uEE02\uEE05\uEE07\uEE21\uEE23\uEE24\uEE26\uEE26\uEE29\uEE29\uEE2B\uEE34\uEE36\uEE39\uEE3B\uEE3B\uEE3D\uEE3D\uEE44\uEE44\uEE49\uEE49\uEE4B\uEE4B\uEE4D\uEE4D\uEE4F\uEE51\uEE53\uEE54\uEE56\uEE56\uEE59\uEE59\uEE5B\uEE5B\uEE5D\uEE5D\uEE5F\uEE5F\uEE61\uEE61\uEE63\uEE64\uEE66\uEE66\uEE69\uEE6C\uEE6E\uEE74\uEE76\uEE79\uEE7B\uEE7E\uEE80\uEE80\uEE82\uEE8B\uEE8D\uEE9D\uEEA3\uEEA5\uEEA7\uEEAB\uEEAD\uEEBD\uA6D8\uA702\uB736\uB742\uB81F\uB822\uCEA3\uF802\uFA1F1\x07	\v\x07	\v\r%')\x071\x071\x071\x07,\b\x1B\x07#\x1B
 \b\r\x07"  !!#" #$\b$\f%&	&'(	()-\x07)*,\v+*,/-.-+.0/-01\x07)1 -`;Or._serializedATN=y1e.join([Or._serializedATNSegment0,Or._serializedATNSegment1],"")});var A1e=v(WE=>{"use strict";var kWe=WE&&WE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(WE,"__esModule",{value:!0});WE.XPathLexerErrorListener=void 0;var BWe=re(),m7=class{syntaxError(e,r,n,i,s,o){}};kWe([BWe.Override],m7.prototype,"syntaxError",null);WE.XPathLexerErrorListener=m7});var Tm=v(YE=>{"use strict";var qWe=YE&&YE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(YE,"__esModule",{value:!0});YE.XPathElement=void 0;var UWe=re(),g7=class{constructor(e){this.nodeName=e,this.invert=!1}toString(){let e=this.invert?"!":"";return Object.constructor.name+"["+e+this.nodeName+"]"}};qWe([UWe.Override],g7.prototype,"toString",null);YE.XPathElement=g7});var S1e=v(KE=>{"use strict";var $We=KE&&KE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(KE,"__esModule",{value:!0});KE.XPathRuleAnywhereElement=void 0;var jWe=re(),HWe=xx(),zWe=Tm(),y7=class extends zWe.XPathElement{constructor(e,r){super(e),this.ruleIndex=r}evaluate(e){return HWe.Trees.findAllRuleNodes(e,this.ruleIndex)}};$We([jWe.Override],y7.prototype,"evaluate",null);KE.XPathRuleAnywhereElement=y7});var v1e=v(XE=>{"use strict";var GWe=XE&&XE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(XE,"__esModule",{value:!0});XE.XPathRuleElement=void 0;var QWe=Qa(),VWe=re(),WWe=xx(),YWe=Tm(),E7=class extends YWe.XPathElement{constructor(e,r){super(e),this.ruleIndex=r}evaluate(e){let r=[];for(let n of WWe.Trees.getChildren(e))n instanceof QWe.ParserRuleContext&&(n.ruleIndex===this.ruleIndex&&!this.invert||n.ruleIndex!==this.ruleIndex&&this.invert)&&r.push(n);return r}};GWe([VWe.Override],E7.prototype,"evaluate",null);XE.XPathRuleElement=E7});var _1e=v(JE=>{"use strict";var KWe=JE&&JE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(JE,"__esModule",{value:!0});JE.XPathTokenAnywhereElement=void 0;var XWe=re(),JWe=xx(),ZWe=Tm(),A7=class extends ZWe.XPathElement{constructor(e,r){super(e),this.tokenType=r}evaluate(e){return JWe.Trees.findAllTokenNodes(e,this.tokenType)}};KWe([XWe.Override],A7.prototype,"evaluate",null);JE.XPathTokenAnywhereElement=A7});var b1e=v(ZE=>{"use strict";var eYe=ZE&&ZE.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(ZE,"__esModule",{value:!0});ZE.XPathTokenElement=void 0;var tYe=re(),rYe=fx(),nYe=xx(),iYe=Tm(),S7=class extends iYe.XPathElement{constructor(e,r){super(e),this.tokenType=r}evaluate(e){let r=[];for(let n of nYe.Trees.getChildren(e))n instanceof rYe.TerminalNode&&(n.symbol.type===this.tokenType&&!this.invert||n.symbol.type!==this.tokenType&&this.invert)&&r.push(n);return r}};eYe([tYe.Override],S7.prototype,"evaluate",null);ZE.XPathTokenElement=S7});var T1e=v(eA=>{"use strict";var sYe=eA&&eA.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(eA,"__esModule",{value:!0});eA.XPathWildcardAnywhereElement=void 0;var oYe=re(),aYe=xx(),uYe=_7(),lYe=Tm(),v7=class extends lYe.XPathElement{constructor(){super(uYe.XPath.WILDCARD)}evaluate(e){return this.invert?[]:aYe.Trees.getDescendants(e)}};sYe([oYe.Override],v7.prototype,"evaluate",null);eA.XPathWildcardAnywhereElement=v7});var C1e=v(tA=>{"use strict";var cYe=tA&&tA.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(tA,"__esModule",{value:!0});tA.XPathWildcardElement=void 0;var fYe=re(),xYe=xx(),dYe=_7(),hYe=Tm(),b7=class extends hYe.XPathElement{constructor(){super(dYe.XPath.WILDCARD)}evaluate(e){let r=[];if(this.invert)return r;for(let n of xYe.Trees.getChildren(e))r.push(n);return r}};cYe([fYe.Override],b7.prototype,"evaluate",null);tA.XPathWildcardElement=b7});var _7=v(T7=>{"use strict";Object.defineProperty(T7,"__esModule",{value:!0});T7.XPath=void 0;var pYe=a7(),mYe=c7(),gYe=H5(),yYe=Qa(),JV=gr(),jl=E1e(),EYe=A1e(),AYe=S1e(),SYe=v1e(),vYe=_1e(),_Ye=b1e(),bYe=T1e(),TYe=C1e(),cb=class t{constructor(e,r){this.parser=e,this.path=r,this.elements=this.split(r)}split(e){let r=new jl.XPathLexer(pYe.CharStreams.fromString(e));r.recover=u=>{throw u},r.removeErrorListeners(),r.addErrorListener(new EYe.XPathLexerErrorListener);let n=new mYe.CommonTokenStream(r);try{n.fill()}catch(u){if(u instanceof gYe.LexerNoViableAltException){let c="Invalid tokens or characters at index "+r.charPositionInLine+" in path '"+e+"' -- "+u.message;throw new RangeError(c)}throw u}let i=n.getTokens(),s=[],o=i.length,a=0;e:for(;a<o;){let u=i[a],l;switch(u.type){case jl.XPathLexer.ROOT:case jl.XPathLexer.ANYWHERE:let c=u.type===jl.XPathLexer.ANYWHERE;a++,l=i[a];let f=l.type===jl.XPathLexer.BANG;f&&(a++,l=i[a]);let x=this.getXPathElement(l,c);x.invert=f,s.push(x),a++;break;case jl.XPathLexer.TOKEN_REF:case jl.XPathLexer.RULE_REF:case jl.XPathLexer.WILDCARD:s.push(this.getXPathElement(u,!1)),a++;break;case JV.Token.EOF:break e;default:throw new Error("Unknowth path element "+u)}}return s}getXPathElement(e,r){if(e.type===JV.Token.EOF)throw new Error("Missing path element at end of path");let n=e.text;if(n==null)throw new Error("Expected wordToken to have text content.");let i=this.parser.getTokenType(n),s=this.parser.getRuleIndex(n);switch(e.type){case jl.XPathLexer.WILDCARD:return r?new bYe.XPathWildcardAnywhereElement:new TYe.XPathWildcardElement;case jl.XPathLexer.TOKEN_REF:case jl.XPathLexer.STRING:if(i===JV.Token.INVALID_TYPE)throw new Error(n+" at index "+e.startIndex+" isn't a valid token name");return r?new vYe.XPathTokenAnywhereElement(n,i):new _Ye.XPathTokenElement(n,i);default:if(s===-1)throw new Error(n+" at index "+e.startIndex+" isn't a valid rule name");return r?new AYe.XPathRuleAnywhereElement(n,s):new SYe.XPathRuleElement(n,s)}}static findAll(e,r,n){return new t(n,r).evaluate(e)}evaluate(e){let r=new yYe.ParserRuleContext;r.addChild(e);let n=new Set([r]),i=0;for(;i<this.elements.length;){let s=new Set;for(let o of n)o.childCount>0&&this.elements[i].evaluate(o).forEach(s.add,s);i++,n=s}return n}};T7.XPath=cb;cb.WILDCARD="*";cb.NOT="!"});var R1e=v(zh=>{"use strict";var Oc=zh&&zh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},Cm=zh&&zh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(zh,"__esModule",{value:!0});zh.ParseTreePattern=void 0;var po=re(),CYe=_7(),ku=class{constructor(e,r,n,i){this._matcher=e,this._patternRuleIndex=n,this._pattern=r,this._patternTree=i}match(e){return this._matcher.match(e,this)}matches(e){return this._matcher.match(e,this).succeeded}findAll(e,r){let n=CYe.XPath.findAll(e,r,this._matcher.parser),i=[];for(let s of n){let o=this.match(s);o.succeeded&&i.push(o)}return i}get matcher(){return this._matcher}get pattern(){return this._pattern}get patternRuleIndex(){return this._patternRuleIndex}get patternTree(){return this._patternTree}};Oc([po.NotNull],ku.prototype,"_pattern",void 0);Oc([po.NotNull],ku.prototype,"_patternTree",void 0);Oc([po.NotNull],ku.prototype,"_matcher",void 0);Oc([po.NotNull,Cm(0,po.NotNull)],ku.prototype,"match",null);Oc([Cm(0,po.NotNull)],ku.prototype,"matches",null);Oc([po.NotNull,Cm(0,po.NotNull),Cm(1,po.NotNull)],ku.prototype,"findAll",null);Oc([po.NotNull],ku.prototype,"matcher",null);Oc([po.NotNull],ku.prototype,"pattern",null);Oc([po.NotNull],ku.prototype,"patternTree",null);ku=Oc([Cm(0,po.NotNull),Cm(1,po.NotNull),Cm(3,po.NotNull)],ku);zh.ParseTreePattern=ku});var O1e=v(Gh=>{"use strict";var Ya=Gh&&Gh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},RYe=Gh&&Gh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Gh,"__esModule",{value:!0});Gh.RuleTagToken=void 0;var Ka=re(),OYe=gr(),mo=class{constructor(e,r,n){if(e==null||e.length===0)throw new Error("ruleName cannot be null or empty.");this._ruleName=e,this.bypassTokenType=r,this._label=n}get ruleName(){return this._ruleName}get label(){return this._label}get channel(){return OYe.Token.DEFAULT_CHANNEL}get text(){return this._label!=null?"<"+this._label+":"+this._ruleName+">":"<"+this._ruleName+">"}get type(){return this.bypassTokenType}get line(){return 0}get charPositionInLine(){return-1}get tokenIndex(){return-1}get startIndex(){return-1}get stopIndex(){return-1}get tokenSource(){}get inputStream(){}toString(){return this._ruleName+":"+this.bypassTokenType}};Ya([Ka.NotNull],mo.prototype,"ruleName",null);Ya([Ka.Override],mo.prototype,"channel",null);Ya([Ka.Override],mo.prototype,"text",null);Ya([Ka.Override],mo.prototype,"type",null);Ya([Ka.Override],mo.prototype,"line",null);Ya([Ka.Override],mo.prototype,"charPositionInLine",null);Ya([Ka.Override],mo.prototype,"tokenIndex",null);Ya([Ka.Override],mo.prototype,"startIndex",null);Ya([Ka.Override],mo.prototype,"stopIndex",null);Ya([Ka.Override],mo.prototype,"tokenSource",null);Ya([Ka.Override],mo.prototype,"inputStream",null);Ya([Ka.Override],mo.prototype,"toString",null);mo=Ya([RYe(0,Ka.NotNull)],mo);Gh.RuleTagToken=mo});var eW=v(C7=>{"use strict";Object.defineProperty(C7,"__esModule",{value:!0});C7.Chunk=void 0;var ZV=class{};C7.Chunk=ZV});var F1e=v(rA=>{"use strict";var D1e=rA&&rA.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(rA,"__esModule",{value:!0});rA.TagChunk=void 0;var DYe=eW(),N1e=re(),fb=class extends DYe.Chunk{constructor(e,r){if(super(),e==null||e.length===0)throw new Error("tag cannot be null or empty");this._tag=e,this._label=r}get tag(){return this._tag}get label(){return this._label}toString(){return this._label!=null?this._label+":"+this._tag:this._tag}};D1e([N1e.NotNull],fb.prototype,"tag",null);D1e([N1e.Override],fb.prototype,"toString",null);rA.TagChunk=fb});var w1e=v(Qh=>{"use strict";var R7=Qh&&Qh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},NYe=Qh&&Qh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Qh,"__esModule",{value:!0});Qh.TextChunk=void 0;var FYe=eW(),O7=re(),nA=class extends FYe.Chunk{constructor(e){if(super(),e==null)throw new Error("text cannot be null");this._text=e}get text(){return this._text}toString(){return"'"+this._text+"'"}};R7([O7.NotNull],nA.prototype,"_text",void 0);R7([O7.NotNull],nA.prototype,"text",null);R7([O7.Override],nA.prototype,"toString",null);nA=R7([NYe(0,O7.NotNull)],nA);Qh.TextChunk=nA});var L1e=v(Vh=>{"use strict";var xb=Vh&&Vh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},wYe=Vh&&Vh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Vh,"__esModule",{value:!0});Vh.TokenTagToken=void 0;var LYe=Dy(),db=re(),Rm=class extends LYe.CommonToken{constructor(e,r,n){super(r),this._tokenName=e,this._label=n}get tokenName(){return this._tokenName}get label(){return this._label}get text(){return this._label!=null?"<"+this._label+":"+this._tokenName+">":"<"+this._tokenName+">"}toString(){return this._tokenName+":"+this.type}};xb([db.NotNull],Rm.prototype,"_tokenName",void 0);xb([db.NotNull],Rm.prototype,"tokenName",null);xb([db.Override],Rm.prototype,"text",null);xb([db.Override],Rm.prototype,"toString",null);Rm=xb([wYe(0,db.NotNull)],Rm);Vh.TokenTagToken=Rm});var q1e=v(Dc=>{"use strict";var N7=Dc&&Dc.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},D7=Dc&&Dc.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Dc,"__esModule",{value:!0});Dc.ParseTreePatternMatcher=void 0;var IYe=nW(),MYe=a7(),PYe=c7(),kYe=GV(),I1e=d1e(),Om=re(),BYe=WV(),qYe=XV(),M1e=Qa(),UYe=g1e(),$Ye=R1e(),jYe=ic(),HYe=bE(),P1e=O1e(),k1e=F1e(),tW=fx(),iA=w1e(),rW=gr(),B1e=L1e(),Wh=class t{constructor(e,r){this.start="<",this.stop=">",this.escape="\\",this.escapeRE=/\\/g,this._lexer=e,this._parser=r}setDelimiters(e,r,n){if(!e)throw new Error("start cannot be null or empty");if(!r)throw new Error("stop cannot be null or empty");this.start=e,this.stop=r,this.escape=n,this.escapeRE=new RegExp(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g")}matches(e,r,n=0){if(typeof r=="string"){let i=this.compile(r,n);return this.matches(e,i)}else{let i=new I1e.MultiMap;return!this.matchImpl(e,r.patternTree,i)}}match(e,r,n=0){if(typeof r=="string"){let i=this.compile(r,n);return this.match(e,i)}else{let i=new I1e.MultiMap,s=this.matchImpl(e,r.patternTree,i);return new UYe.ParseTreeMatch(e,r,i,s)}}compile(e,r){let n=this.tokenize(e),i=new kYe.ListTokenSource(n),s=new PYe.CommonTokenStream(i),o=this._parser,a=new qYe.ParserInterpreter(o.grammarFileName,o.vocabulary,o.ruleNames,o.getATNWithBypassAlts(),s),u;try{a.errorHandler=new IYe.BailErrorStrategy,u=a.parse(r)}catch(l){throw l instanceof BYe.ParseCancellationException?l.getCause():l instanceof jYe.RecognitionException?l:l instanceof Error?new t.CannotInvokeStartRule(l):l}if(s.LA(1)!==rW.Token.EOF)throw new t.StartRuleDoesNotConsumeFullPattern;return new $Ye.ParseTreePattern(this,e,r,u)}get lexer(){return this._lexer}get parser(){return this._parser}matchImpl(e,r,n){if(!e)throw new TypeError("tree cannot be null");if(!r)throw new TypeError("patternTree cannot be null");if(e instanceof tW.TerminalNode&&r instanceof tW.TerminalNode){let i;if(e.symbol.type===r.symbol.type)if(r.symbol instanceof B1e.TokenTagToken){let s=r.symbol;n.map(s.tokenName,e);let o=s.label;o&&n.map(o,e)}else e.text===r.text||i||(i=e);else i||(i=e);return i}if(e instanceof M1e.ParserRuleContext&&r instanceof M1e.ParserRuleContext){let i,s=this.getRuleTagToken(r);if(s){let a;if(e.ruleContext.ruleIndex===r.ruleContext.ruleIndex){n.map(s.ruleName,e);let u=s.label;u&&n.map(u,e)}else i||(i=e);return i}if(e.childCount!==r.childCount)return i||(i=e),i;let o=e.childCount;for(let a=0;a<o;a++){let u=this.matchImpl(e.getChild(a),r.getChild(a),n);if(u)return u}return i}return e}getRuleTagToken(e){if(e instanceof HYe.RuleNode&&e.childCount===1&&e.getChild(0)instanceof tW.TerminalNode){let r=e.getChild(0);if(r.symbol instanceof P1e.RuleTagToken)return r.symbol}}tokenize(e){let r=this.split(e),n=[];for(let i of r)if(i instanceof k1e.TagChunk){let s=i,o=s.tag.substr(0,1);if(o===o.toUpperCase()){let a=this._parser.getTokenType(s.tag);if(a===rW.Token.INVALID_TYPE)throw new Error("Unknown token "+s.tag+" in pattern: "+e);let u=new B1e.TokenTagToken(s.tag,a,s.label);n.push(u)}else if(o===o.toLowerCase()){let a=this._parser.getRuleIndex(s.tag);if(a===-1)throw new Error("Unknown rule "+s.tag+" in pattern: "+e);let u=this._parser.getATNWithBypassAlts().ruleToTokenType[a];n.push(new P1e.RuleTagToken(s.tag,u,s.label))}else throw new Error("invalid tag: "+s.tag+" in pattern: "+e)}else{let s=i;this._lexer.inputStream=MYe.CharStreams.fromString(s.text);let o=this._lexer.nextToken();for(;o.type!==rW.Token.EOF;)n.push(o),o=this._lexer.nextToken()}return n}split(e){let r=0,n=e.length,i=[],s,o=[],a=[];for(;r<n;)r===e.indexOf(this.escape+this.start,r)?r+=this.escape.length+this.start.length:r===e.indexOf(this.escape+this.stop,r)?r+=this.escape.length+this.stop.length:r===e.indexOf(this.start,r)?(o.push(r),r+=this.start.length):r===e.indexOf(this.stop,r)?(a.push(r),r+=this.stop.length):r++;if(o.length>a.length)throw new Error("unterminated tag in pattern: "+e);if(o.length<a.length)throw new Error("missing start tag in pattern: "+e);let u=o.length;for(let l=0;l<u;l++)if(o[l]>=a[l])throw new Error("tag delimiters out of order in pattern: "+e);if(u===0){let l=e.substring(0,n);i.push(new iA.TextChunk(l))}if(u>0&&o[0]>0){let l=e.substring(0,o[0]);i.push(new iA.TextChunk(l))}for(let l=0;l<u;l++){let c=e.substring(o[l]+this.start.length,a[l]),f=c,x,d=c.indexOf(":");if(d>=0&&(x=c.substring(0,d),f=c.substring(d+1,c.length)),i.push(new k1e.TagChunk(f,x)),l+1<u){let h=e.substring(a[l]+this.stop.length,o[l+1]);i.push(new iA.TextChunk(h))}}if(u>0){let l=a[u-1]+this.stop.length;if(l<n){let c=e.substring(l,n);i.push(new iA.TextChunk(c))}}for(let l=0;l<i.length;l++){let c=i[l];if(c instanceof iA.TextChunk){let f=c.text.replace(this.escapeRE,"");f.length<c.text.length&&(i[l]=new iA.TextChunk(f))}}return i}};N7([Om.NotNull,D7(1,Om.NotNull)],Wh.prototype,"match",null);N7([Om.NotNull],Wh.prototype,"lexer",null);N7([Om.NotNull],Wh.prototype,"parser",null);N7([D7(0,Om.NotNull),D7(1,Om.NotNull),D7(2,Om.NotNull)],Wh.prototype,"matchImpl",null);Dc.ParseTreePatternMatcher=Wh;(function(t){class e extends Error{constructor(i){super(`CannotInvokeStartRule: ${i}`),this.error=i}}t.CannotInvokeStartRule=e;class r extends Error{constructor(){super("StartRuleDoesNotConsumeFullPattern")}}t.StartRuleDoesNotConsumeFullPattern=r})(Wh=Dc.ParseTreePatternMatcher||(Dc.ParseTreePatternMatcher={}))});var sA=v(Yh=>{"use strict";var U1e=Yh&&Yh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},zYe=Yh&&Yh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Yh,"__esModule",{value:!0});Yh.DecisionEventInfo=void 0;var $1e=re(),F7=class{constructor(e,r,n,i,s,o){this.decision=e,this.fullCtx=o,this.stopIndex=s,this.input=n,this.startIndex=i,this.state=r}};U1e([$1e.NotNull],F7.prototype,"input",void 0);F7=U1e([zYe(2,$1e.NotNull)],F7);Yh.DecisionEventInfo=F7});var j1e=v(Kh=>{"use strict";var sW=Kh&&Kh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},iW=Kh&&Kh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Kh,"__esModule",{value:!0});Kh.AmbiguityInfo=void 0;var GYe=sA(),hb=re(),pb=class extends GYe.DecisionEventInfo{constructor(e,r,n,i,s,o){super(e,r,i,s,o,r.useContext),this.ambigAlts=n}get ambiguousAlternatives(){return this.ambigAlts}};sW([hb.NotNull],pb.prototype,"ambigAlts",void 0);sW([hb.NotNull],pb.prototype,"ambiguousAlternatives",null);pb=sW([iW(1,hb.NotNull),iW(2,hb.NotNull),iW(3,hb.NotNull)],pb);Kh.AmbiguityInfo=pb});var G1e=v(Xh=>{"use strict";var QYe=Xh&&Xh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},H1e=Xh&&Xh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Xh,"__esModule",{value:!0});Xh.ContextSensitivityInfo=void 0;var VYe=sA(),z1e=re(),oW=class extends VYe.DecisionEventInfo{constructor(e,r,n,i,s){super(e,r,n,i,s,!0)}};oW=QYe([H1e(1,z1e.NotNull),H1e(2,z1e.NotNull)],oW);Xh.ContextSensitivityInfo=oW});var Q1e=v(oA=>{"use strict";var WYe=oA&&oA.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(oA,"__esModule",{value:!0});oA.DecisionInfo=void 0;var YYe=re(),w7=class{constructor(e){this.invocations=0,this.timeInPrediction=0,this.SLL_TotalLook=0,this.SLL_MinLook=0,this.SLL_MaxLook=0,this.LL_TotalLook=0,this.LL_MinLook=0,this.LL_MaxLook=0,this.contextSensitivities=[],this.errors=[],this.ambiguities=[],this.predicateEvals=[],this.SLL_ATNTransitions=0,this.SLL_DFATransitions=0,this.LL_Fallback=0,this.LL_ATNTransitions=0,this.LL_DFATransitions=0,this.decision=e}toString(){return"{decision="+this.decision+", contextSensitivities="+this.contextSensitivities.length+", errors="+this.errors.length+", ambiguities="+this.ambiguities.length+", SLL_lookahead="+this.SLL_TotalLook+", SLL_ATNTransitions="+this.SLL_ATNTransitions+", SLL_DFATransitions="+this.SLL_DFATransitions+", LL_Fallback="+this.LL_Fallback+", LL_lookahead="+this.LL_TotalLook+", LL_ATNTransitions="+this.LL_ATNTransitions+"}"}};WYe([YYe.Override],w7.prototype,"toString",null);oA.DecisionInfo=w7});var Y1e=v(Jh=>{"use strict";var KYe=Jh&&Jh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},V1e=Jh&&Jh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Jh,"__esModule",{value:!0});Jh.ErrorInfo=void 0;var XYe=sA(),W1e=re(),aW=class extends XYe.DecisionEventInfo{constructor(e,r,n,i,s){super(e,r,n,i,s,r.useContext)}};aW=KYe([V1e(1,W1e.NotNull),V1e(2,W1e.NotNull)],aW);Jh.ErrorInfo=aW});var K1e=v(Zh=>{"use strict";var JYe=Zh&&Zh.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},ZYe=Zh&&Zh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Zh,"__esModule",{value:!0});Zh.LookaheadEventInfo=void 0;var eKe=sA(),tKe=re(),uW=class extends eKe.DecisionEventInfo{constructor(e,r,n,i,s,o,a){super(e,r,i,s,o,a),this.predictedAlt=n}};uW=JYe([ZYe(3,tKe.NotNull)],uW);Zh.LookaheadEventInfo=uW});var X1e=v(ep=>{"use strict";var rKe=ep&&ep.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},lW=ep&&ep.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(ep,"__esModule",{value:!0});ep.PredicateEvalInfo=void 0;var nKe=sA(),cW=re(),fW=class extends nKe.DecisionEventInfo{constructor(e,r,n,i,s,o,a,u){super(r,e,n,i,s,e.useContext),this.semctx=o,this.evalResult=a,this.predictedAlt=u}};fW=rKe([lW(0,cW.NotNull),lW(2,cW.NotNull),lW(5,cW.NotNull)],fW);ep.PredicateEvalInfo=fW});var xW=v(tp=>{"use strict";var Nc=tp&&tp.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},L7=tp&&tp.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(tp,"__esModule",{value:!0});tp.ProfilingATNSimulator=void 0;var iKe=j1e(),J1e=Iu(),sKe=I5(),Z1e=G1e(),oKe=Q1e(),eme=Y1e(),Zo=re(),tme=K1e(),aKe=ym(),uKe=X1e(),lKe=Q1(),rme=AV(),Xa=class extends aKe.ParserATNSimulator{constructor(e){super(e.interpreter.atn,e),this._startIndex=0,this._sllStopIndex=0,this._llStopIndex=0,this.currentDecision=0,this.conflictingAltResolvedBySLL=0,this.optimize_ll1=!1,this.reportAmbiguities=!0,this.numDecisions=this.atn.decisionToState.length,this.decisions=[];for(let r=0;r<this.numDecisions;r++)this.decisions.push(new oKe.DecisionInfo(r))}adaptivePredict(e,r,n,i){if(i!==void 0)return super.adaptivePredict(e,r,n,i);try{this._input=e,this._startIndex=e.index,this._sllStopIndex=this._startIndex-1,this._llStopIndex=-1,this.currentDecision=r,this.currentState=void 0,this.conflictingAltResolvedBySLL=J1e.ATN.INVALID_ALT_NUMBER;let s=process.hrtime(),o=super.adaptivePredict(e,r,n),a=process.hrtime(),u=(a[0]-s[0])*1e9;u===0?u=a[1]-s[1]:u+=1e9-s[1]+a[1],this.decisions[r].timeInPrediction+=u,this.decisions[r].invocations++;let l=this._sllStopIndex-this._startIndex+1;if(this.decisions[r].SLL_TotalLook+=l,this.decisions[r].SLL_MinLook=this.decisions[r].SLL_MinLook===0?l:Math.min(this.decisions[r].SLL_MinLook,l),l>this.decisions[r].SLL_MaxLook&&(this.decisions[r].SLL_MaxLook=l,this.decisions[r].SLL_MaxLookEvent=new tme.LookaheadEventInfo(r,void 0,o,e,this._startIndex,this._sllStopIndex,!1)),this._llStopIndex>=0){let c=this._llStopIndex-this._startIndex+1;this.decisions[r].LL_TotalLook+=c,this.decisions[r].LL_MinLook=this.decisions[r].LL_MinLook===0?c:Math.min(this.decisions[r].LL_MinLook,c),c>this.decisions[r].LL_MaxLook&&(this.decisions[r].LL_MaxLook=c,this.decisions[r].LL_MaxLookEvent=new tme.LookaheadEventInfo(r,void 0,o,e,this._startIndex,this._llStopIndex,!0))}return o}finally{this._input=void 0,this.currentDecision=-1}}getStartState(e,r,n,i){let s=super.getStartState(e,r,n,i);return this.currentState=s,s}computeStartState(e,r,n){let i=super.computeStartState(e,r,n);return this.currentState=i,i}computeReachSet(e,r,n,i){if(this._input===void 0)throw new Error("Invalid state");let s=super.computeReachSet(e,r,n,i);return s==null&&this.decisions[this.currentDecision].errors.push(new eme.ErrorInfo(this.currentDecision,r,this._input,this._startIndex,this._input.index)),this.currentState=s,s}getExistingTargetState(e,r){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");this.currentState.useContext?this._llStopIndex=this._input.index:this._sllStopIndex=this._input.index;let n=super.getExistingTargetState(e,r);if(n!=null&&(this.currentState=new rme.SimulatorState(this.currentState.outerContext,n,this.currentState.useContext,this.currentState.remainingOuterContext),this.currentState.useContext?this.decisions[this.currentDecision].LL_DFATransitions++:this.decisions[this.currentDecision].SLL_DFATransitions++,n===sKe.ATNSimulator.ERROR)){let i=new rme.SimulatorState(this.currentState.outerContext,e,this.currentState.useContext,this.currentState.remainingOuterContext);this.decisions[this.currentDecision].errors.push(new eme.ErrorInfo(this.currentDecision,i,this._input,this._startIndex,this._input.index))}return n}computeTargetState(e,r,n,i,s,o){let a=super.computeTargetState(e,r,n,i,s,o);return s?this.decisions[this.currentDecision].LL_ATNTransitions++:this.decisions[this.currentDecision].SLL_ATNTransitions++,a}evalSemanticContextImpl(e,r,n){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");let i=super.evalSemanticContextImpl(e,r,n);if(!(e instanceof lKe.SemanticContext.PrecedencePredicate)){let o=this._llStopIndex>=0?this._llStopIndex:this._sllStopIndex;this.decisions[this.currentDecision].predicateEvals.push(new uKe.PredicateEvalInfo(this.currentState,this.currentDecision,this._input,this._startIndex,o,e,i,n))}return i}reportContextSensitivity(e,r,n,i,s){if(this._input===void 0)throw new Error("Invalid state");r!==this.conflictingAltResolvedBySLL&&this.decisions[this.currentDecision].contextSensitivities.push(new Z1e.ContextSensitivityInfo(this.currentDecision,n,this._input,i,s)),super.reportContextSensitivity(e,r,n,i,s)}reportAttemptingFullContext(e,r,n,i,s){r!=null?this.conflictingAltResolvedBySLL=r.nextSetBit(0):this.conflictingAltResolvedBySLL=n.s0.configs.getRepresentedAlternatives().nextSetBit(0),this.decisions[this.currentDecision].LL_Fallback++,super.reportAttemptingFullContext(e,r,n,i,s)}reportAmbiguity(e,r,n,i,s,o,a){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");let u;o!=null?u=o.nextSetBit(0):u=a.getRepresentedAlternatives().nextSetBit(0),this.conflictingAltResolvedBySLL!==J1e.ATN.INVALID_ALT_NUMBER&&u!==this.conflictingAltResolvedBySLL&&this.decisions[this.currentDecision].contextSensitivities.push(new Z1e.ContextSensitivityInfo(this.currentDecision,this.currentState,this._input,n,i)),this.decisions[this.currentDecision].ambiguities.push(new iKe.AmbiguityInfo(this.currentDecision,this.currentState,o,this._input,n,i)),super.reportAmbiguity(e,r,n,i,s,o,a)}getDecisionInfo(){return this.decisions}getCurrentState(){return this.currentState}};Nc([Zo.Override,L7(0,Zo.NotNull)],Xa.prototype,"adaptivePredict",null);Nc([Zo.Override],Xa.prototype,"getStartState",null);Nc([Zo.Override],Xa.prototype,"computeStartState",null);Nc([Zo.Override],Xa.prototype,"computeReachSet",null);Nc([Zo.Override],Xa.prototype,"getExistingTargetState",null);Nc([Zo.Override],Xa.prototype,"computeTargetState",null);Nc([Zo.Override],Xa.prototype,"evalSemanticContextImpl",null);Nc([Zo.Override],Xa.prototype,"reportContextSensitivity",null);Nc([Zo.Override],Xa.prototype,"reportAttemptingFullContext",null);Nc([Zo.Override,L7(0,Zo.NotNull),L7(5,Zo.NotNull),L7(6,Zo.NotNull)],Xa.prototype,"reportAmbiguity",null);tp.ProfilingATNSimulator=Xa});var mm=v(Fc=>{"use strict";var ti=Fc&&Fc.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},I7=Fc&&Fc.__param||function(t,e){return function(r,n){e(r,n,t)}},nme=Fc&&Fc.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(f){o(f)}}function u(c){try{l(n.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Fc,"__esModule",{value:!0});Fc.Parser=void 0;var cKe=ka(),fKe=tV(),xKe=vm(),dKe=M7(),hKe=_E(),pKe=pQ(),mKe=dc(),bn=re(),gKe=s1e(),yKe=ym(),EKe=BV(),AKe=ky(),SKe=fx(),mb=gr(),Dm=class{constructor(e,r){this.ruleNames=e,this.tokenStream=r}enterEveryRule(e){console.log("enter   "+this.ruleNames[e.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}exitEveryRule(e){console.log("exit    "+this.ruleNames[e.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}visitErrorNode(e){}visitTerminal(e){let r=e.parent.ruleContext,n=e.symbol;console.log("consume "+n+" rule "+this.ruleNames[r.ruleIndex])}};ti([bn.Override],Dm.prototype,"enterEveryRule",null);ti([bn.Override],Dm.prototype,"exitEveryRule",null);ti([bn.Override],Dm.prototype,"visitErrorNode",null);ti([bn.Override],Dm.prototype,"visitTerminal",null);var ei=class t extends AKe.Recognizer{constructor(e){super(),this._errHandler=new dKe.DefaultErrorStrategy,this._precedenceStack=new pKe.IntegerStack,this._buildParseTrees=!0,this._parseListeners=[],this._syntaxErrors=0,this.matchedEOF=!1,this._precedenceStack.push(0),this.inputStream=e}reset(e){(e===void 0||e)&&this.inputStream.seek(0),this._errHandler.reset(this),this._ctx=void 0,this._syntaxErrors=0,this.matchedEOF=!1,this.isTrace=!1,this._precedenceStack.clear(),this._precedenceStack.push(0);let r=this.interpreter;r?.reset()}match(e){let r=this.currentToken;return r.type===e?(e===mb.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):(r=this._errHandler.recoverInline(this),this._buildParseTrees&&r.tokenIndex===-1&&this._ctx.addErrorNode(this.createErrorNode(this._ctx,r))),r}matchWildcard(){let e=this.currentToken;return e.type>0?(this._errHandler.reportMatch(this),this.consume()):(e=this._errHandler.recoverInline(this),this._buildParseTrees&&e.tokenIndex===-1&&this._ctx.addErrorNode(this.createErrorNode(this._ctx,e))),e}set buildParseTree(e){this._buildParseTrees=e}get buildParseTree(){return this._buildParseTrees}getParseListeners(){return this._parseListeners}addParseListener(e){if(e==null)throw new TypeError("listener cannot be null");this._parseListeners.push(e)}removeParseListener(e){let r=this._parseListeners.findIndex(n=>n===e);r!==-1&&this._parseListeners.splice(r,1)}removeParseListeners(){this._parseListeners.length=0}triggerEnterRuleEvent(){for(let e of this._parseListeners)e.enterEveryRule&&e.enterEveryRule(this._ctx),this._ctx.enterRule(e)}triggerExitRuleEvent(){for(let e=this._parseListeners.length-1;e>=0;e--){let r=this._parseListeners[e];this._ctx.exitRule(r),r.exitEveryRule&&r.exitEveryRule(this._ctx)}}get numberOfSyntaxErrors(){return this._syntaxErrors}get tokenFactory(){return this._input.tokenSource.tokenFactory}getATNWithBypassAlts(){let e=this.serializedATN;if(e==null)throw new Error("The current parser does not support an ATN with bypass alternatives.");let r=t.bypassAltsAtnCache.get(e);if(r==null){let n=new fKe.ATNDeserializationOptions;n.isGenerateRuleBypassTransitions=!0,r=new xKe.ATNDeserializer(n).deserialize(cKe.toCharArray(e)),t.bypassAltsAtnCache.set(e,r)}return r}compileParseTreePattern(e,r,n){return nme(this,void 0,void 0,function*(){if(!n){if(this.inputStream){let a=this.inputStream.tokenSource;a instanceof mKe.Lexer&&(n=a)}if(!n)throw new Error("Parser can't discover a lexer to use")}let i=n,s=yield Promise.resolve().then(()=>q1e());return new s.ParseTreePatternMatcher(i,this).compile(e,r)})}get errorHandler(){return this._errHandler}set errorHandler(e){this._errHandler=e}get inputStream(){return this._input}set inputStream(e){this.reset(!1),this._input=e}get currentToken(){return this._input.LT(1)}notifyErrorListeners(e,r,n){r===void 0?r=this.currentToken:r===null&&(r=void 0),this._syntaxErrors++;let i=-1,s=-1;r!=null&&(i=r.line,s=r.charPositionInLine);let o=this.getErrorListenerDispatch();o.syntaxError&&o.syntaxError(this,r,i,s,e,n)}consume(){let e=this.currentToken;e.type!==t.EOF&&this.inputStream.consume();let r=this._parseListeners.length!==0;if(this._buildParseTrees||r)if(this._errHandler.inErrorRecoveryMode(this)){let n=this._ctx.addErrorNode(this.createErrorNode(this._ctx,e));if(r)for(let i of this._parseListeners)i.visitErrorNode&&i.visitErrorNode(n)}else{let n=this.createTerminalNode(this._ctx,e);if(this._ctx.addChild(n),r)for(let i of this._parseListeners)i.visitTerminal&&i.visitTerminal(n)}return e}createTerminalNode(e,r){return new SKe.TerminalNode(r)}createErrorNode(e,r){return new hKe.ErrorNode(r)}addContextToParseTree(){let e=this._ctx._parent;e?.addChild(this._ctx)}enterRule(e,r,n){this.state=r,this._ctx=e,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}enterLeftFactoredRule(e,r,n){if(this.state=r,this._buildParseTrees){let i=this._ctx.getChild(this._ctx.childCount-1);this._ctx.removeLastChild(),i._parent=e,e.addChild(i)}this._ctx=e,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}exitRule(){this.matchedEOF?this._ctx._stop=this._input.LT(1):this._ctx._stop=this._input.tryLT(-1),this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx._parent}enterOuterAlt(e,r){if(e.altNumber=r,this._buildParseTrees&&this._ctx!==e){let n=this._ctx._parent;n!=null&&(n.removeLastChild(),n.addChild(e))}this._ctx=e}get precedence(){return this._precedenceStack.isEmpty?-1:this._precedenceStack.peek()}enterRecursionRule(e,r,n,i){this.state=r,this._precedenceStack.push(i),this._ctx=e,this._ctx._start=this._input.LT(1),this.triggerEnterRuleEvent()}pushNewRecursionContext(e,r,n){let i=this._ctx;i._parent=e,i.invokingState=r,i._stop=this._input.tryLT(-1),this._ctx=e,this._ctx._start=i._start,this._buildParseTrees&&this._ctx.addChild(i),this.triggerEnterRuleEvent()}unrollRecursionContexts(e){this._precedenceStack.pop(),this._ctx._stop=this._input.tryLT(-1);let r=this._ctx;if(this._parseListeners.length>0)for(;this._ctx!==e;)this.triggerExitRuleEvent(),this._ctx=this._ctx._parent;else this._ctx=e;r._parent=e,this._buildParseTrees&&e!=null&&e.addChild(r)}getInvokingContext(e){let r=this._ctx;for(;r&&r.ruleIndex!==e;)r=r._parent;return r}get context(){return this._ctx}set context(e){this._ctx=e}precpred(e,r){return r>=this._precedenceStack.peek()}getErrorListenerDispatch(){return new EKe.ProxyParserErrorListener(this.getErrorListeners())}inContext(e){return!1}isExpectedToken(e){let r=this.interpreter.atn,n=this._ctx,i=r.states[this.state],s=r.nextTokens(i);if(s.contains(e))return!0;if(!s.contains(mb.Token.EPSILON))return!1;for(;n!=null&&n.invokingState>=0&&s.contains(mb.Token.EPSILON);){let a=r.states[n.invokingState].transition(0);if(s=r.nextTokens(a.followState),s.contains(e))return!0;n=n._parent}return!!(s.contains(mb.Token.EPSILON)&&e===mb.Token.EOF)}get isMatchedEOF(){return this.matchedEOF}getExpectedTokens(){return this.atn.getExpectedTokens(this.state,this.context)}getExpectedTokensWithinCurrentRule(){let e=this.interpreter.atn,r=e.states[this.state];return e.nextTokens(r)}getRuleIndex(e){let r=this.getRuleIndexMap().get(e);return r??-1}get ruleContext(){return this._ctx}getRuleInvocationStack(e=this._ctx){let r=e,n=this.ruleNames,i=[];for(;r!=null;){let s=r.ruleIndex;s<0?i.push("n/a"):i.push(n[s]),r=r._parent}return i}getDFAStrings(){let e=[];for(let r of this._interp.atn.decisionToDFA)e.push(r.toString(this.vocabulary,this.ruleNames));return e}dumpDFA(){let e=!1;for(let r of this._interp.atn.decisionToDFA)r.isEmpty||(e&&console.log(),console.log("Decision "+r.decision+":"),process.stdout.write(r.toString(this.vocabulary,this.ruleNames)),e=!0)}get sourceName(){return this._input.sourceName}get parseInfo(){return Promise.resolve().then(()=>xW()).then(e=>{let r=this.interpreter;if(r instanceof e.ProfilingATNSimulator)return new gKe.ParseInfo(r)})}setProfile(e){return nme(this,void 0,void 0,function*(){let r=yield Promise.resolve().then(()=>xW()),n=this.interpreter;e?n instanceof r.ProfilingATNSimulator||(this.interpreter=new r.ProfilingATNSimulator(this)):n instanceof r.ProfilingATNSimulator&&(this.interpreter=new yKe.ParserATNSimulator(this.atn,this)),this.interpreter.setPredictionMode(n.getPredictionMode())})}set isTrace(e){e?(this._tracer?this.removeParseListener(this._tracer):this._tracer=new Dm(this.ruleNames,this._input),this.addParseListener(this._tracer)):this._tracer&&(this.removeParseListener(this._tracer),this._tracer=void 0)}get isTrace(){return this._tracer!=null}};ei.bypassAltsAtnCache=new Map;ti([bn.NotNull],ei.prototype,"_errHandler",void 0);ti([bn.NotNull],ei.prototype,"match",null);ti([bn.NotNull],ei.prototype,"matchWildcard",null);ti([bn.NotNull],ei.prototype,"getParseListeners",null);ti([I7(0,bn.NotNull)],ei.prototype,"addParseListener",null);ti([bn.NotNull],ei.prototype,"getATNWithBypassAlts",null);ti([bn.NotNull,I7(0,bn.NotNull)],ei.prototype,"errorHandler",null);ti([bn.Override],ei.prototype,"inputStream",null);ti([bn.NotNull],ei.prototype,"currentToken",null);ti([I7(0,bn.NotNull)],ei.prototype,"enterRule",null);ti([bn.Override,I7(0,bn.Nullable)],ei.prototype,"precpred",null);ti([bn.Override],ei.prototype,"getErrorListenerDispatch",null);ti([bn.NotNull],ei.prototype,"getExpectedTokens",null);ti([bn.NotNull],ei.prototype,"getExpectedTokensWithinCurrentRule",null);ti([bn.Override],ei.prototype,"parseInfo",null);Fc.Parser=ei});var NE=v(aA=>{"use strict";var vKe=aA&&aA.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(aA,"__esModule",{value:!0});aA.NoViableAltException=void 0;var _Ke=mm(),bKe=ic(),TKe=re(),P7=class extends bKe.RecognitionException{constructor(e,r,n,i,s,o){e instanceof _Ke.Parser&&(r===void 0&&(r=e.inputStream),n===void 0&&(n=e.currentToken),i===void 0&&(i=e.currentToken),o===void 0&&(o=e.context)),super(e,r,o),this._deadEndConfigs=s,this._startToken=n,this.setOffendingToken(e,i)}get startToken(){return this._startToken}get deadEndConfigs(){return this._deadEndConfigs}};vKe([TKe.NotNull],P7.prototype,"_startToken",void 0);aA.NoViableAltException=P7});var M7=v(rp=>{"use strict";var kr=rp&&rp.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},Tn=rp&&rp.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(rp,"__esModule",{value:!0});rp.DefaultErrorStrategy=void 0;var ime=nc(),uA=Ei(),CKe=Cy(),k7=b5(),sme=oh(),RKe=NE(),OKe=Fu(),Ex=gr(),zt=re(),Er=class{constructor(){this.errorRecoveryMode=!1,this.lastErrorIndex=-1,this.nextTokensState=ime.ATNState.INVALID_STATE_NUMBER}reset(e){this.endErrorCondition(e)}beginErrorCondition(e){this.errorRecoveryMode=!0}inErrorRecoveryMode(e){return this.errorRecoveryMode}endErrorCondition(e){this.errorRecoveryMode=!1,this.lastErrorStates=void 0,this.lastErrorIndex=-1}reportMatch(e){this.endErrorCondition(e)}reportError(e,r){this.inErrorRecoveryMode(e)||(this.beginErrorCondition(e),r instanceof RKe.NoViableAltException?this.reportNoViableAlternative(e,r):r instanceof k7.InputMismatchException?this.reportInputMismatch(e,r):r instanceof CKe.FailedPredicateException?this.reportFailedPredicate(e,r):(console.error(`unknown recognition error type: ${r}`),this.notifyErrorListeners(e,r.toString(),r)))}notifyErrorListeners(e,r,n){let i=n.getOffendingToken(e);i===void 0&&(i=null),e.notifyErrorListeners(r,i,n)}recover(e,r){this.lastErrorIndex===e.inputStream.index&&this.lastErrorStates&&this.lastErrorStates.contains(e.state)&&e.consume(),this.lastErrorIndex=e.inputStream.index,this.lastErrorStates||(this.lastErrorStates=new sme.IntervalSet),this.lastErrorStates.add(e.state);let n=this.getErrorRecoverySet(e);this.consumeUntil(e,n)}sync(e){let r=e.interpreter.atn.states[e.state];if(this.inErrorRecoveryMode(e))return;let i=e.inputStream.LA(1),s=e.atn.nextTokens(r);if(s.contains(i)){this.nextTokensContext=void 0,this.nextTokensState=ime.ATNState.INVALID_STATE_NUMBER;return}if(s.contains(Ex.Token.EPSILON)){this.nextTokensContext===void 0&&(this.nextTokensContext=e.context,this.nextTokensState=e.state);return}switch(r.stateType){case uA.ATNStateType.BLOCK_START:case uA.ATNStateType.STAR_BLOCK_START:case uA.ATNStateType.PLUS_BLOCK_START:case uA.ATNStateType.STAR_LOOP_ENTRY:if(this.singleTokenDeletion(e))return;throw new k7.InputMismatchException(e);case uA.ATNStateType.PLUS_LOOP_BACK:case uA.ATNStateType.STAR_LOOP_BACK:this.reportUnwantedToken(e);let a=e.getExpectedTokens().or(this.getErrorRecoverySet(e));this.consumeUntil(e,a);break;default:break}}reportNoViableAlternative(e,r){let n=e.inputStream,i;n?r.startToken.type===Ex.Token.EOF?i="<EOF>":i=n.getTextFromRange(r.startToken,r.getOffendingToken()):i="<unknown input>";let s="no viable alternative at input "+this.escapeWSAndQuote(i);this.notifyErrorListeners(e,s,r)}reportInputMismatch(e,r){let n=r.expectedTokens,i=n?n.toStringVocabulary(e.vocabulary):"",s="mismatched input "+this.getTokenErrorDisplay(r.getOffendingToken(e))+" expecting "+i;this.notifyErrorListeners(e,s,r)}reportFailedPredicate(e,r){let i="rule "+e.ruleNames[e.context.ruleIndex]+" "+r.message;this.notifyErrorListeners(e,i,r)}reportUnwantedToken(e){if(this.inErrorRecoveryMode(e))return;this.beginErrorCondition(e);let r=e.currentToken,n=this.getTokenErrorDisplay(r),i=this.getExpectedTokens(e),s="extraneous input "+n+" expecting "+i.toStringVocabulary(e.vocabulary);e.notifyErrorListeners(s,r,void 0)}reportMissingToken(e){if(this.inErrorRecoveryMode(e))return;this.beginErrorCondition(e);let r=e.currentToken,i="missing "+this.getExpectedTokens(e).toStringVocabulary(e.vocabulary)+" at "+this.getTokenErrorDisplay(r);e.notifyErrorListeners(i,r,void 0)}recoverInline(e){let r=this.singleTokenDeletion(e);if(r)return e.consume(),r;if(this.singleTokenInsertion(e))return this.getMissingSymbol(e);throw this.nextTokensContext===void 0?new k7.InputMismatchException(e):new k7.InputMismatchException(e,this.nextTokensState,this.nextTokensContext)}singleTokenInsertion(e){let r=e.inputStream.LA(1),i=e.interpreter.atn.states[e.state].transition(0).target,s=e.interpreter.atn;return s.nextTokens(i,OKe.PredictionContext.fromRuleContext(s,e.context)).contains(r)?(this.reportMissingToken(e),!0):!1}singleTokenDeletion(e){let r=e.inputStream.LA(2);if(this.getExpectedTokens(e).contains(r)){this.reportUnwantedToken(e),e.consume();let i=e.currentToken;return this.reportMatch(e),i}}getMissingSymbol(e){let r=e.currentToken,n=this.getExpectedTokens(e),i=Ex.Token.INVALID_TYPE;n.isNil||(i=n.minElement);let s;i===Ex.Token.EOF?s="<missing EOF>":s="<missing "+e.vocabulary.getDisplayName(i)+">";let o=r,a=e.inputStream.tryLT(-1);return o.type===Ex.Token.EOF&&a!=null&&(o=a),this.constructToken(e.inputStream.tokenSource,i,s,o)}constructToken(e,r,n,i){let s=e.tokenFactory,o=i.tokenSource,a=o?o.inputStream:void 0;return s.create({source:e,stream:a},r,n,Ex.Token.DEFAULT_CHANNEL,-1,-1,i.line,i.charPositionInLine)}getExpectedTokens(e){return e.getExpectedTokens()}getTokenErrorDisplay(e){if(!e)return"<no token>";let r=this.getSymbolText(e);return r||(this.getSymbolType(e)===Ex.Token.EOF?r="<EOF>":r=`<${this.getSymbolType(e)}>`),this.escapeWSAndQuote(r)}getSymbolText(e){return e.text}getSymbolType(e){return e.type}escapeWSAndQuote(e){return e=e.replace(`
`,"\\n"),e=e.replace("\r","\\r"),e=e.replace("	","\\t"),"'"+e+"'"}getErrorRecoverySet(e){let r=e.interpreter.atn,n=e.context,i=new sme.IntervalSet;for(;n&&n.invokingState>=0;){let o=r.states[n.invokingState].transition(0),a=r.nextTokens(o.followState);i.addAll(a),n=n._parent}return i.remove(Ex.Token.EPSILON),i}consumeUntil(e,r){let n=e.inputStream.LA(1);for(;n!==Ex.Token.EOF&&!r.contains(n);)e.consume(),n=e.inputStream.LA(1)}};kr([zt.Override],Er.prototype,"reset",null);kr([Tn(0,zt.NotNull)],Er.prototype,"beginErrorCondition",null);kr([zt.Override],Er.prototype,"inErrorRecoveryMode",null);kr([Tn(0,zt.NotNull)],Er.prototype,"endErrorCondition",null);kr([zt.Override],Er.prototype,"reportMatch",null);kr([zt.Override],Er.prototype,"reportError",null);kr([Tn(0,zt.NotNull)],Er.prototype,"notifyErrorListeners",null);kr([zt.Override],Er.prototype,"recover",null);kr([zt.Override],Er.prototype,"sync",null);kr([Tn(0,zt.NotNull),Tn(1,zt.NotNull)],Er.prototype,"reportNoViableAlternative",null);kr([Tn(0,zt.NotNull),Tn(1,zt.NotNull)],Er.prototype,"reportInputMismatch",null);kr([Tn(0,zt.NotNull),Tn(1,zt.NotNull)],Er.prototype,"reportFailedPredicate",null);kr([Tn(0,zt.NotNull)],Er.prototype,"reportUnwantedToken",null);kr([Tn(0,zt.NotNull)],Er.prototype,"reportMissingToken",null);kr([zt.Override],Er.prototype,"recoverInline",null);kr([Tn(0,zt.NotNull)],Er.prototype,"singleTokenInsertion",null);kr([Tn(0,zt.NotNull)],Er.prototype,"singleTokenDeletion",null);kr([zt.NotNull,Tn(0,zt.NotNull)],Er.prototype,"getMissingSymbol",null);kr([zt.NotNull,Tn(0,zt.NotNull)],Er.prototype,"getExpectedTokens",null);kr([Tn(0,zt.NotNull)],Er.prototype,"getSymbolText",null);kr([Tn(0,zt.NotNull)],Er.prototype,"getSymbolType",null);kr([zt.NotNull,Tn(0,zt.NotNull)],Er.prototype,"escapeWSAndQuote",null);kr([zt.NotNull,Tn(0,zt.NotNull)],Er.prototype,"getErrorRecoverySet",null);kr([Tn(0,zt.NotNull),Tn(1,zt.NotNull)],Er.prototype,"consumeUntil",null);rp.DefaultErrorStrategy=Er});var nW=v(cA=>{"use strict";var dW=cA&&cA.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(cA,"__esModule",{value:!0});cA.BailErrorStrategy=void 0;var DKe=M7(),NKe=b5(),hW=re(),ome=WV(),lA=class extends DKe.DefaultErrorStrategy{recover(e,r){for(let n=e.context;n;n=n.parent)n.exception=r;throw new ome.ParseCancellationException(r)}recoverInline(e){let r=new NKe.InputMismatchException(e);for(let n=e.context;n;n=n.parent)n.exception=r;throw new ome.ParseCancellationException(r)}sync(e){}};dW([hW.Override],lA.prototype,"recover",null);dW([hW.Override],lA.prototype,"recoverInline",null);dW([hW.Override],lA.prototype,"sync",null);cA.BailErrorStrategy=lA});var ume=v(ame=>{"use strict";Object.defineProperty(ame,"__esModule",{value:!0})});var lme=v(gb=>{"use strict";Object.defineProperty(gb,"__esModule",{value:!0});gb.Dependents=void 0;var FKe;(function(t){t[t.SELF=0]="SELF",t[t.PARENTS=1]="PARENTS",t[t.CHILDREN=2]="CHILDREN",t[t.ANCESTORS=3]="ANCESTORS",t[t.DESCENDANTS=4]="DESCENDANTS",t[t.SIBLINGS=5]="SIBLINGS",t[t.PRECEEDING_SIBLINGS=6]="PRECEEDING_SIBLINGS",t[t.FOLLOWING_SIBLINGS=7]="FOLLOWING_SIBLINGS",t[t.PRECEEDING=8]="PRECEEDING",t[t.FOLLOWING=9]="FOLLOWING"})(FKe=gb.Dependents||(gb.Dependents={}))});var cme=v(np=>{"use strict";var fA=np&&np.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},Bu=np&&np.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(np,"__esModule",{value:!0});np.DiagnosticErrorListener=void 0;var wKe=ex(),as=re(),pW=Os(),Ax=class{constructor(e=!0){this.exactOnly=e,this.exactOnly=e}syntaxError(e,r,n,i,s,o){}reportAmbiguity(e,r,n,i,s,o,a){if(this.exactOnly&&!s)return;let u=this.getDecisionDescription(e,r),l=this.getConflictingAlts(o,a),c=e.inputStream.getText(pW.Interval.of(n,i)),f=`reportAmbiguity d=${u}: ambigAlts=${l}, input='${c}'`;e.notifyErrorListeners(f)}reportAttemptingFullContext(e,r,n,i,s,o){let a="reportAttemptingFullContext d=%s, input='%s'",u=this.getDecisionDescription(e,r),l=e.inputStream.getText(pW.Interval.of(n,i)),c=`reportAttemptingFullContext d=${u}, input='${l}'`;e.notifyErrorListeners(c)}reportContextSensitivity(e,r,n,i,s,o){let a="reportContextSensitivity d=%s, input='%s'",u=this.getDecisionDescription(e,r),l=e.inputStream.getText(pW.Interval.of(n,i)),c=`reportContextSensitivity d=${u}, input='${l}'`;e.notifyErrorListeners(c)}getDecisionDescription(e,r){let n=r.decision,i=r.atnStartState.ruleIndex,s=e.ruleNames;if(i<0||i>=s.length)return n.toString();let o=s[i];return o?`${n} (${o})`:n.toString()}getConflictingAlts(e,r){if(e!=null)return e;let n=new wKe.BitSet;for(let i of r)n.set(i.alt);return n}};fA([as.Override],Ax.prototype,"syntaxError",null);fA([as.Override,Bu(0,as.NotNull),Bu(1,as.NotNull),Bu(6,as.NotNull)],Ax.prototype,"reportAmbiguity",null);fA([as.Override,Bu(0,as.NotNull),Bu(1,as.NotNull),Bu(5,as.NotNull)],Ax.prototype,"reportAttemptingFullContext",null);fA([as.Override,Bu(0,as.NotNull),Bu(1,as.NotNull),Bu(5,as.NotNull)],Ax.prototype,"reportContextSensitivity",null);fA([Bu(0,as.NotNull),Bu(1,as.NotNull)],Ax.prototype,"getDecisionDescription",null);fA([as.NotNull,Bu(1,as.NotNull)],Ax.prototype,"getConflictingAlts",null);np.DiagnosticErrorListener=Ax});var xme=v(ip=>{"use strict";var sp=ip&&ip.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},LKe=ip&&ip.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(ip,"__esModule",{value:!0});ip.LexerInterpreter=void 0;var IKe=dc(),MKe=rE(),fme=re(),xA=re(),wc=class extends IKe.Lexer{constructor(e,r,n,i,s,o,a){if(super(a),o.grammarType!==0)throw new Error("IllegalArgumentException: The ATN must be a lexer ATN.");this._grammarFileName=e,this._atn=o,this._ruleNames=n.slice(0),this._channelNames=i.slice(0),this._modeNames=s.slice(0),this._vocabulary=r,this._interp=new MKe.LexerATNSimulator(o,this)}get atn(){return this._atn}get grammarFileName(){return this._grammarFileName}get ruleNames(){return this._ruleNames}get channelNames(){return this._channelNames}get modeNames(){return this._modeNames}get vocabulary(){return this._vocabulary}};sp([fme.NotNull],wc.prototype,"_vocabulary",void 0);sp([xA.Override],wc.prototype,"atn",null);sp([xA.Override],wc.prototype,"grammarFileName",null);sp([xA.Override],wc.prototype,"ruleNames",null);sp([xA.Override],wc.prototype,"channelNames",null);sp([xA.Override],wc.prototype,"modeNames",null);sp([xA.Override],wc.prototype,"vocabulary",null);wc=sp([LKe(1,fme.NotNull)],wc);ip.LexerInterpreter=wc});var hme=v(dme=>{"use strict";Object.defineProperty(dme,"__esModule",{value:!0})});var pme=v(dA=>{"use strict";var PKe=dA&&dA.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(dA,"__esModule",{value:!0});dA.RuleContextWithAltNum=void 0;var kKe=Iu(),BKe=re(),qKe=Qa(),B7=class extends qKe.ParserRuleContext{constructor(e,r){r!==void 0?super(e,r):super(),this._altNumber=kKe.ATN.INVALID_ALT_NUMBER}get altNumber(){return this._altNumber}set altNumber(e){this._altNumber=e}};PKe([BKe.Override],B7.prototype,"altNumber",null);dA.RuleContextWithAltNum=B7});var mme=v(q7=>{"use strict";Object.defineProperty(q7,"__esModule",{value:!0});q7.RuleDependency=void 0;function UKe(t){return(e,r,n)=>{}}q7.RuleDependency=UKe});var gme=v(U7=>{"use strict";Object.defineProperty(U7,"__esModule",{value:!0});U7.RuleVersion=void 0;function $Ke(t){return(e,r,n)=>{}}U7.RuleVersion=$Ke});var Eme=v(yme=>{"use strict";Object.defineProperty(yme,"__esModule",{value:!0})});var Sme=v(Ame=>{"use strict";Object.defineProperty(Ame,"__esModule",{value:!0})});var _me=v(vme=>{"use strict";Object.defineProperty(vme,"__esModule",{value:!0})});var Cme=v(ap=>{"use strict";var j7=ap&&ap.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(ap,"__esModule",{value:!0});ap.RewriteOperation=ap.TokenStreamRewriter=void 0;var bme=Os(),H7=re(),Tme=gr(),hA=class t{constructor(e){this.tokens=e,this.programs=new Map,this.programs.set(t.DEFAULT_PROGRAM_NAME,[]),this.lastRewriteTokenIndexes=new Map}getTokenStream(){return this.tokens}rollback(e,r=t.DEFAULT_PROGRAM_NAME){let n=this.programs.get(r);n!=null&&this.programs.set(r,n.slice(t.MIN_TOKEN_INDEX,e))}deleteProgram(e=t.DEFAULT_PROGRAM_NAME){this.rollback(t.MIN_TOKEN_INDEX,e)}insertAfter(e,r,n=t.DEFAULT_PROGRAM_NAME){let i;typeof e=="number"?i=e:i=e.tokenIndex;let s=this.getProgram(n),o=new $7(this.tokens,i,s.length,r);s.push(o)}insertBefore(e,r,n=t.DEFAULT_PROGRAM_NAME){let i;typeof e=="number"?i=e:i=e.tokenIndex;let s=this.getProgram(n),o=new Sx(this.tokens,i,s.length,r);s.push(o)}replaceSingle(e,r){typeof e=="number"?this.replace(e,e,r):this.replace(e,e,r)}replace(e,r,n,i=t.DEFAULT_PROGRAM_NAME){if(typeof e!="number"&&(e=e.tokenIndex),typeof r!="number"&&(r=r.tokenIndex),e>r||e<0||r<0||r>=this.tokens.size)throw new RangeError(`replace: range invalid: ${e}..${r}(size=${this.tokens.size})`);let s=this.getProgram(i),o=new op(this.tokens,e,r,s.length,n);s.push(o)}delete(e,r,n=t.DEFAULT_PROGRAM_NAME){r===void 0&&(r=e),typeof e=="number"?this.replace(e,r,"",n):this.replace(e,r,"",n)}getLastRewriteTokenIndex(e=t.DEFAULT_PROGRAM_NAME){let r=this.lastRewriteTokenIndexes.get(e);return r??-1}setLastRewriteTokenIndex(e,r){this.lastRewriteTokenIndexes.set(e,r)}getProgram(e){let r=this.programs.get(e);return r==null&&(r=this.initializeProgram(e)),r}initializeProgram(e){let r=[];return this.programs.set(e,r),r}getText(e,r=t.DEFAULT_PROGRAM_NAME){let n;e instanceof bme.Interval?n=e:n=bme.Interval.of(0,this.tokens.size-1),typeof e=="string"&&(r=e);let i=this.programs.get(r),s=n.a,o=n.b;if(o>this.tokens.size-1&&(o=this.tokens.size-1),s<0&&(s=0),i==null||i.length===0)return this.tokens.getText(n);let a=[],u=this.reduceToSingleOperationPerIndex(i),l=s;for(;l<=o&&l<this.tokens.size;){let c=u.get(l);u.delete(l);let f=this.tokens.get(l);c==null?(f.type!==Tme.Token.EOF&&a.push(String(f.text)),l++):l=c.execute(a)}if(o===this.tokens.size-1)for(let c of u.values())c.index>=this.tokens.size-1&&a.push(c.text.toString());return a.join("")}reduceToSingleOperationPerIndex(e){for(let n=0;n<e.length;n++){let i=e[n];if(i==null||!(i instanceof op))continue;let s=i,o=this.getKindOfOps(e,Sx,n);for(let u of o)u.index===s.index?(e[u.instructionIndex]=void 0,s.text=u.text.toString()+(s.text!=null?s.text.toString():"")):u.index>s.index&&u.index<=s.lastIndex&&(e[u.instructionIndex]=void 0);let a=this.getKindOfOps(e,op,n);for(let u of a){if(u.index>=s.index&&u.lastIndex<=s.lastIndex){e[u.instructionIndex]=void 0;continue}let l=u.lastIndex<s.index||u.index>s.lastIndex;if(u.text==null&&s.text==null&&!l)e[u.instructionIndex]=void 0,s.index=Math.min(u.index,s.index),s.lastIndex=Math.max(u.lastIndex,s.lastIndex);else if(!l)throw new Error(`replace op boundaries of ${s} overlap with previous ${u}`)}}for(let n=0;n<e.length;n++){let i=e[n];if(i==null||!(i instanceof Sx))continue;let s=i,o=this.getKindOfOps(e,Sx,n);for(let u of o)u.index===s.index&&(u instanceof $7?(s.text=this.catOpText(u.text,s.text),e[u.instructionIndex]=void 0):u instanceof Sx&&(s.text=this.catOpText(s.text,u.text),e[u.instructionIndex]=void 0));let a=this.getKindOfOps(e,op,n);for(let u of a){if(s.index===u.index){u.text=this.catOpText(s.text,u.text),e[n]=void 0;continue}if(s.index>=u.index&&s.index<=u.lastIndex)throw new Error(`insert op ${s} within boundaries of previous ${u}`)}}let r=new Map;for(let n of e)if(n!=null){if(r.get(n.index)!=null)throw new Error("should only be one op per index");r.set(n.index,n)}return r}catOpText(e,r){let n="",i="";return e!=null&&(n=e.toString()),r!=null&&(i=r.toString()),n+i}getKindOfOps(e,r,n){let i=[];for(let s=0;s<n&&s<e.length;s++){let o=e[s];o!=null&&o instanceof r&&i.push(o)}return i}};ap.TokenStreamRewriter=hA;hA.DEFAULT_PROGRAM_NAME="default";hA.PROGRAM_INIT_SIZE=100;hA.MIN_TOKEN_INDEX=0;var pA=class{constructor(e,r,n,i){this.tokens=e,this.instructionIndex=n,this.index=r,this.text=i===void 0?"":i}execute(e){return this.index}toString(){let e=this.constructor.name,r=e.indexOf("$");return e=e.substring(r+1,e.length),"<"+e+"@"+this.tokens.get(this.index)+':"'+this.text+'">'}};j7([H7.Override],pA.prototype,"toString",null);ap.RewriteOperation=pA;var Sx=class extends pA{constructor(e,r,n,i){super(e,r,n,i)}execute(e){return e.push(this.text.toString()),this.tokens.get(this.index).type!==Tme.Token.EOF&&e.push(String(this.tokens.get(this.index).text)),this.index+1}};j7([H7.Override],Sx.prototype,"execute",null);var $7=class extends Sx{constructor(e,r,n,i){super(e,r+1,n,i)}},op=class extends pA{constructor(e,r,n,i,s){super(e,r,i,s),this.lastIndex=n}execute(e){return this.text!=null&&e.push(this.text.toString()),this.lastIndex+1}toString(){return this.text==null?"<DeleteOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+">":"<ReplaceOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+':"'+this.text+'">'}};j7([H7.Override],op.prototype,"execute",null);j7([H7.Override],op.prototype,"toString",null)});var Ome=v(Rme=>{"use strict";Object.defineProperty(Rme,"__esModule",{value:!0})});var Nme=v(Dme=>{"use strict";Object.defineProperty(Dme,"__esModule",{value:!0})});var z7=v(Ze=>{"use strict";var jKe=Ze&&Ze.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ut=Ze&&Ze.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&jKe(e,t,r)};Object.defineProperty(Ze,"__esModule",{value:!0});ut(oxe(),Ze);ut(uxe(),Ze);ut(rpe(),Ze);ut(nW(),Ze);ut(HV(),Ze);ut(ume(),Ze);ut(a7(),Ze);ut(qV(),Ze);ut(UV(),Ze);ut(Dy(),Ze);ut(WF(),Ze);ut(c7(),Ze);ut(LQ(),Ze);ut(M7(),Ze);ut(lme(),Ze);ut(cme(),Ze);ut(Cy(),Ze);ut(b5(),Ze);ut(YV(),Ze);ut(Yf(),Ze);ut(dc(),Ze);ut(xme(),Ze);ut(H5(),Ze);ut(GV(),Ze);ut(NE(),Ze);ut(mm(),Ze);ut(hme(),Ze);ut(XV(),Ze);ut(Qa(),Ze);ut(lw(),Ze);ut(BV(),Ze);ut(ic(),Ze);ut(ky(),Ze);ut(hV(),Ze);ut(pme(),Ze);ut(mme(),Ze);ut(gme(),Ze);ut(gr(),Ze);ut(Eme(),Ze);ut(Sme(),Ze);ut(_me(),Ze);ut(Cme(),Ze);ut(Ome(),Ze);ut(Bl(),Ze);ut(Nme(),Ze)});var wme=v(Lc=>{"use strict";var HKe=Lc&&Lc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zKe=Lc&&Lc.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),GKe=Lc&&Lc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&HKe(e,t,r);return zKe(e,t),e};Object.defineProperty(Lc,"__esModule",{value:!0});Lc.MalloyLexer=void 0;var QKe=vm(),VKe=dc(),WKe=rE(),YKe=Bl(),Fme=GKe(ka()),B=class t extends VKe.Lexer{get vocabulary(){return t.VOCABULARY}constructor(e){super(e),this._interp=new WKe.LexerATNSimulator(t._ATN,this)}get grammarFileName(){return"MalloyLexer.g4"}get ruleNames(){return t.ruleNames}get serializedATN(){return t._serializedATN}get channelNames(){return t.channelNames}get modeNames(){return t.modeNames}static get _ATN(){return t.__ATN||(t.__ATN=new QKe.ATNDeserializer().deserialize(Fme.toCharArray(t._serializedATN))),t.__ATN}};Lc.MalloyLexer=B;B.ACCEPT=1;B.AGGREGATE=2;B.CALCULATE=3;B.CALCULATION=4;B.CONNECTION=5;B.DECLARE=6;B.DIMENSION=7;B.EXCEPT=8;B.EXTENDQ=9;B.GROUP_BY=10;B.HAVING=11;B.INDEX=12;B.JOIN_CROSS=13;B.JOIN_ONE=14;B.JOIN_MANY=15;B.LIMIT=16;B.MEASURE=17;B.NEST=18;B.ORDER_BY=19;B.PRIMARY_KEY=20;B.PROJECT=21;B.QUERY=22;B.RENAME=23;B.RUN=24;B.SAMPLE=25;B.SELECT=26;B.SOURCE=27;B.SQLC=28;B.TOP=29;B.WHERE=30;B.VIEW=31;B.TIMEZONE=32;B.ALL=33;B.AND=34;B.AS=35;B.ASC=36;B.AVG=37;B.BOOLEAN=38;B.BY=39;B.CASE=40;B.CAST=41;B.CONDITION=42;B.COUNT=43;B.DATE=44;B.DAY=45;B.DESC=46;B.DISTINCT=47;B.ELSE=48;B.END=49;B.EXCLUDE=50;B.EXTEND=51;B.FALSE=52;B.FULL=53;B.FOR=54;B.FROM=55;B.FROM_SQL=56;B.HAS=57;B.HOUR=58;B.IMPORT=59;B.INNER=60;B.IS=61;B.JSON=62;B.LAST=63;B.LEFT=64;B.MAX=65;B.MIN=66;B.MINUTE=67;B.MONTH=68;B.NOT=69;B.NOW=70;B.NULL=71;B.NUMBER=72;B.ON=73;B.OR=74;B.PICK=75;B.QUARTER=76;B.RIGHT=77;B.SECOND=78;B.STRING=79;B.SOURCE_KW=80;B.SUM=81;B.SQL=82;B.TABLE=83;B.THEN=84;B.THIS=85;B.TIMESTAMP=86;B.TO=87;B.TRUE=88;B.TURTLE=89;B.WEEK=90;B.WHEN=91;B.WITH=92;B.YEAR=93;B.UNGROUPED=94;B.STRING_ESCAPE=95;B.HACKY_REGEX=96;B.SQ_STRING=97;B.DQ_STRING=98;B.BQ_STRING=99;B.DOC_ANNOTATION=100;B.ANNOTATION=101;B.AMPER=102;B.ARROW=103;B.FAT_ARROW=104;B.OPAREN=105;B.CPAREN=106;B.OBRACK=107;B.CBRACK=108;B.OCURLY=109;B.CCURLY=110;B.DOUBLECOLON=111;B.TRIPLECOLON=112;B.EXCLAM=113;B.COLON=114;B.COMMA=115;B.DOT=116;B.LT=117;B.GT=118;B.EQ=119;B.NE=120;B.LTE=121;B.GTE=122;B.PLUS=123;B.MINUS=124;B.STAR=125;B.STARSTAR=126;B.SLASH=127;B.BAR=128;B.SEMI=129;B.NOT_MATCH=130;B.MATCH=131;B.PERCENT=132;B.DOUBLE_QMARK=133;B.QMARK=134;B.LITERAL_TIMESTAMP=135;B.LITERAL_HOUR=136;B.LITERAL_DAY=137;B.LITERAL_QUARTER=138;B.LITERAL_MONTH=139;B.LITERAL_WEEK=140;B.LITERAL_YEAR=141;B.IDENTIFIER=142;B.PERCENT_LITERAL=143;B.NUMERIC_LITERAL=144;B.INTEGER_LITERAL=145;B.BLOCK_COMMENT=146;B.COMMENT_TO_EOL=147;B.WHITE_SPACE=148;B.SQL_BEGIN=149;B.CLOSE_CODE=150;B.UNWATED_CHARS_TRAILING_NUMBERS=151;B.UNEXPECTED_CHAR=152;B.OPEN_CODE=153;B.SQL_END=154;B.SQL_MODE=1;B.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"];B.modeNames=["DEFAULT_MODE","SQL_MODE"];B.ruleNames=["SPACE_CHAR","ACCEPT","AGGREGATE","CALCULATE","CALCULATION","CONNECTION","DECLARE","DIMENSION","EXCEPT","EXTENDQ","GROUP_BY","HAVING","INDEX","JOIN_CROSS","JOIN_ONE","JOIN_MANY","LIMIT","MEASURE","NEST","ORDER_BY","PRIMARY_KEY","PROJECT","QUERY","RENAME","RUN","SAMPLE","SELECT","SOURCE","SQLC","TOP","WHERE","VIEW","TIMEZONE","ALL","AND","AS","ASC","AVG","BOOLEAN","BY","CASE","CAST","CONDITION","COUNT","DATE","DAY","DESC","DISTINCT","ELSE","END","EXCLUDE","EXTEND","FALSE","FULL","FOR","FROM","FROM_SQL","HAS","HOUR","IMPORT","INNER","IS","JSON","LAST","LEFT","MAX","MIN","MINUTE","MONTH","NOT","NOW","NULL","NUMBER","ON","OR","PICK","QUARTER","RIGHT","SECOND","STRING","SOURCE_KW","SUM","SQL","TABLE","THEN","THIS","TIMESTAMP","TO","TRUE","TURTLE","WEEK","WHEN","WITH","YEAR","UNGROUPED","STRING_ESCAPE","HACKY_REGEX","HEX","UNICODE","SAFE_NON_QUOTE","ESCAPED","STR_CHAR","SQ_STRING","DQ_STRING","BQ_STRING","F_TO_EOL","DOC_ANNOTATION","ANNOTATION","AMPER","ARROW","FAT_ARROW","OPAREN","CPAREN","OBRACK","CBRACK","OCURLY","CCURLY","DOUBLECOLON","TRIPLECOLON","EXCLAM","COLON","COMMA","DOT","LT","GT","EQ","NE","LTE","GTE","PLUS","MINUS","STAR","STARSTAR","SLASH","BAR","SEMI","NOT_MATCH","MATCH","PERCENT","DOUBLE_QMARK","QMARK","F_YEAR","F_DD","F_TZ","LX","LITERAL_TIMESTAMP","LITERAL_HOUR","LITERAL_DAY","LITERAL_QUARTER","LITERAL_MONTH","LITERAL_WEEK","LITERAL_YEAR","IDENTIFIER","PERCENT_LITERAL","EXPONENT","NUMERIC_LITERAL","INTEGER_LITERAL","ID_CHAR","DIGIT","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","BLOCK_COMMENT","COMMENT_TO_EOL","WHITE_SPACE","SQL_BEGIN","CLOSE_CODE","UNWATED_CHARS_TRAILING_NUMBERS","UNEXPECTED_CHAR","SQL_CHAR","OPEN_CODE","SQL_END"];B._LITERAL_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"'&'","'->'","'=>'","'('","')'","'['","']'","'{'","'}'","'::'","':::'","'!'","':'","','","'.'","'<'","'>'","'='","'!='","'<='","'>='","'+'","'-'","'*'","'**'","'/'","'|'","';'","'!~'","'~'","'%'","'??'","'?'",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,`'"""'`,"'}%'"];B._SYMBOLIC_NAMES=[void 0,"ACCEPT","AGGREGATE","CALCULATE","CALCULATION","CONNECTION","DECLARE","DIMENSION","EXCEPT","EXTENDQ","GROUP_BY","HAVING","INDEX","JOIN_CROSS","JOIN_ONE","JOIN_MANY","LIMIT","MEASURE","NEST","ORDER_BY","PRIMARY_KEY","PROJECT","QUERY","RENAME","RUN","SAMPLE","SELECT","SOURCE","SQLC","TOP","WHERE","VIEW","TIMEZONE","ALL","AND","AS","ASC","AVG","BOOLEAN","BY","CASE","CAST","CONDITION","COUNT","DATE","DAY","DESC","DISTINCT","ELSE","END","EXCLUDE","EXTEND","FALSE","FULL","FOR","FROM","FROM_SQL","HAS","HOUR","IMPORT","INNER","IS","JSON","LAST","LEFT","MAX","MIN","MINUTE","MONTH","NOT","NOW","NULL","NUMBER","ON","OR","PICK","QUARTER","RIGHT","SECOND","STRING","SOURCE_KW","SUM","SQL","TABLE","THEN","THIS","TIMESTAMP","TO","TRUE","TURTLE","WEEK","WHEN","WITH","YEAR","UNGROUPED","STRING_ESCAPE","HACKY_REGEX","SQ_STRING","DQ_STRING","BQ_STRING","DOC_ANNOTATION","ANNOTATION","AMPER","ARROW","FAT_ARROW","OPAREN","CPAREN","OBRACK","CBRACK","OCURLY","CCURLY","DOUBLECOLON","TRIPLECOLON","EXCLAM","COLON","COMMA","DOT","LT","GT","EQ","NE","LTE","GTE","PLUS","MINUS","STAR","STARSTAR","SLASH","BAR","SEMI","NOT_MATCH","MATCH","PERCENT","DOUBLE_QMARK","QMARK","LITERAL_TIMESTAMP","LITERAL_HOUR","LITERAL_DAY","LITERAL_QUARTER","LITERAL_MONTH","LITERAL_WEEK","LITERAL_YEAR","IDENTIFIER","PERCENT_LITERAL","NUMERIC_LITERAL","INTEGER_LITERAL","BLOCK_COMMENT","COMMENT_TO_EOL","WHITE_SPACE","SQL_BEGIN","CLOSE_CODE","UNWATED_CHARS_TRAILING_NUMBERS","UNEXPECTED_CHAR","OPEN_CODE","SQL_END"];B.VOCABULARY=new YKe.VocabularyImpl(B._LITERAL_NAMES,B._SYMBOLIC_NAMES,[]);B._serializedATNSegments=4;B._serializedATNSegment0=`\uC91D\uCABA\u058D\uAFBA\u4F53\u0607\uEA8B\uC241\x9C\u068A\b\b					\x07	\x07\b	\b			
	
\v	\v\f	\f\r	\r													\x1B	\x1B				 	 !	!"	"#	#$	$%	%&	&'	'(	()	)*	*+	+,	,-	-.	./	/0	01	12	23	34	45	56	67	78	89	9:	:;	;<	<=	=>	>?	?@	@A	AB	BC	CD	DE	EF	FG	GH	HI	IJ	JK	KL	LM	MN	NO	OP	PQ	QR	RS	ST	TU	UV	VW	WX	XY	YZ	Z[	[\\	\\]	]^	^_	_\`	\`a	ab	bc	cd	de	ef	fg	gh	hi	ij	jk	kl	lm	mn	no	op	pq	qr	rs	st	tu	uv	vw	wx	xy	yz	z{	{|	|}	}~	~\x7F	\x7F\x80	\x80\x81	\x81\x82	\x82\x83	\x83\x84	\x84\x85	\x85\x86	\x86\x87	\x87\x88	\x88\x89	\x89\x8A	\x8A\x8B	\x8B\x8C	\x8C\x8D	\x8D\x8E	\x8E\x8F	\x8F\x90	\x90\x91	\x91\x92	\x92\x93	\x93\x94	\x94\x95	\x95\x96	\x96\x97	\x97\x98	\x98\x99	\x99\x9A	\x9A\x9B	\x9B\x9C	\x9C\x9D	\x9D\x9E	\x9E\x9F	\x9F\xA0	\xA0\xA1	\xA1\xA2	\xA2\xA3	\xA3\xA4	\xA4\xA5	\xA5\xA6	\xA6\xA7	\xA7\xA8	\xA8\xA9	\xA9\xAA	\xAA\xAB	\xAB\xAC	\xAC\xAD	\xAD\xAE	\xAE\xAF	\xAF\xB0	\xB0\xB1	\xB1\xB2	\xB2\xB3	\xB3\xB4	\xB4\xB5	\xB5\xB6	\xB6\xB7	\xB7\xB8	\xB8\xB9	\xB9\xBA	\xBA\xBB	\xBB\xBC	\xBC\xBD	\xBD\xBE	\xBE\xBF	\xBF\xC0	\xC0\xC1	\xC1\xC2	\xC2\xC3	\xC3\xC4	\xC4\x07\u0194
\f\u0197\v\x07\u01A5
\f\u01A8\v\x07\u01B6
\f\u01B9\v\x07\u01C9
\f\u01CC\v\x07\x07\x07\x07\x07\x07\x07\x07\x07\x07\x07\x07\x07\u01DB
\x07\f\x07\x07\u01DE\v\x07\x07\x07\b\b\b\b\b\b\b\b\b										\x07	\u01F5
	\f		\u01F8\v			






\x07
\u0203

\f

\u0206\v


\v\v\v\v\v\v\v\x07\v\u0211
\v\f\v\v\u0214\v\v\v\v\f\f\f\f\f\f\f\f\f\x07\f\u0221
\f\f\f\f\u0224\v\f\f\f\r\r\r\r\r\r\r\x07\r\u022F
\r\f\r\r\u0232\v\r\r\r\x07\u023C
\f\u023F\v\x07\u0258
\f\u025B\v\x07\u0269
\f\u026C\v\x07\u0276
\f\u0279\v\x07\u0285
\f\u0288\v\x07\u0291
\f\u0294\v\x07\u02A1
\f\u02A4\v\x07\u02B4
\f\u02B7\v\x07\u02C3
\f\u02C6\v\x07\u02D0
\f\u02D3\v\x07\u02DE
\f\u02E1\v\x07\u02E9
\f\u02EC\v\x1B\x1B\x1B\x1B\x1B\x1B\x1B\x07\x1B\u02F7
\x1B\f\x1B\x1B\u02FA\v\x1B\x1B\x1B\x07\u0305
\f\u0308\v\x07\u0313
\f\u0316\v\x07\u031E
\f\u0321\v\x07\u0329
\f\u032C\v      \x07 \u0336
 \f  \u0339\v   !!!!!\x07!\u0342
!\f!!\u0345\v!!!"""""""""\x07"\u0352
"\f""\u0355\v"""####$$$$%%%&&&&''''(((((((()))*****+++++,,,,,,,,,,------...../////\u039A
/0000011111111122222333344444444555555566666677777888899999:::::::::;;;;<<<<<<\u03E8
<=======>>>>>>???@@@@@AAAAABBBBBCCCCDDDDEEEEEEEE\u0418
EFFFFFFF\u0420
FGGGGHHHHIIIIIJJJJJJJKKKLLLMMMMMNNNNNNNNN\u0449
NOOOOOOPPPPPPPP\u0458
PQQQQQQQRRRRRRRSSSSTTTTUUUUUUVVVVVWWWWWXXXXXXXXXXYYYZZZZZ[[[[[[[\\\\\\\\\\\\\u049E
\\]]]]]^^^^^______\u04AF
_\`\`\`\`\`\`\`\`\`\`aaaaaaa\u04C1
abb\u04C4
bbbb\x07b\u04C9
b\fbb\u04CC\vbbbccddddddddeefffggggg\u04E3
ghhh\x07h\u04E8
h\fhh\u04EB\vhhhiii\x07i\u04F2
i\fii\u04F5\viiijjj\x07j\u04FC
j\fjj\u04FF\vjjjk\x07k\u0504
k\fkk\u0507\vkkk\u050A
kkkk\u050E
klllllmmmnnooopppqqrrssttuuuuvvvvwwwxxxxyyzz{{||}}~~\x7F\x7F\x80\x80\x80\x81\x81\x81\x82\x82\x82\x83\x83\x84\x84\x85\x85\x86\x86\x86\x87\x87\x88\x88\x89\x89\x8A\x8A\x8A\x8B\x8B\x8C\x8C\x8D\x8D\x8D\x8E\x8E\x8F\x8F\x8F\x8F\x8F\x90\x90\x90\x91\x91\x91\x07\x91\u0574
\x91\f\x91\x91\u0577\v\x91\x91\x91\x92\x92\x92\x92\x92\u057F
\x92\r\x92\x92\u0580\x93\x93\x93\x93\x93\x93\x93\x93\x93\x93\x93\x93\x93\x93\x93\u0591
\x93\r\x93\x93\u0592\x93\u0595
\x93\x93\u0597
\x93\x93\x93\u059A
\x93\x94\x94\x94\x94\x94\x94\x94\x94\x94\x95\x95\x95\x95\x95\x95\x95\x96\x96\x96\x96\x96\x96\x97\x97\x97\x97\x97\x98\x98\x98\x98\x98\x98\x98\x98\x98\x98\x99\x99\x99\x9A\x9A\x9A\x07\x9A\u05C7
\x9A\f\x9A\x9A\u05CA\v\x9A\x9B\x9B\u05CD
\x9B\r\x9B\x9B\u05CE\x9B\x9B\x9C\x9C\x9C\u05D5
\x9C\x9C\x9C\u05D8
\x9C\r\x9C\x9C\u05D9\x9D\x9D\u05DD
\x9D\x9D\x9D\x9D\u05E1
\x9D\r\x9D\x9D\u05E2\x9D\x9D\u05E6
\x9D\x9D\x9D\x9D\x9D\u05EB
\x9D\x9E\x9E\u05EE
\x9E\x9E\x9E\u05F1
\x9E\r\x9E\x9E\u05F2\x9F\x9F\xA0\xA0\xA1\xA1\xA2\xA2\xA3\xA3\xA4\xA4\xA5\xA5\xA6\xA6\xA7\xA7\xA8\xA8\xA9\xA9\xAA\xAA\xAB\xAB\xAC\xAC\xAD\xAD\xAE\xAE\xAF\xAF\xB0\xB0\xB1\xB1\xB2\xB2\xB3\xB3\xB4\xB4\xB5\xB5\xB6\xB6\xB7\xB7\xB8\xB8\xB9\xB9\xBA\xBA\xBB\xBB\xBB\xBB\x07\xBB\u0631
\xBB\f\xBB\xBB\u0634\v\xBB\xBB\xBB\xBB\xBB\xBB\xBC\xBC\xBC\xBC\xBC\u063F
\xBC\xBC\xBC\xBC\xBC\xBD\xBD\xBD\xBD\xBE\xBE\xBE\xBE\xBE\xBE\xBF\xBF\xBF\xBF\xBF\xC0\xC0\u0655
\xC0\r\xC0\xC0\u0656\xC0\xC0\u065A
\xC0\r\xC0\xC0\u065B\xC0\xC0\x07\xC0\u0660
\xC0\f\xC0\xC0\u0663\v\xC0\xC1\xC1\xC2\xC2\xC2\xC2\xC2\xC2\xC2\xC2\xC2\xC2\xC2\xC2\u0672
\xC2\xC3\x07\xC3\u0675
\xC3\f\xC3\xC3\u0678\v\xC3\xC3\xC3\xC3\xC3\xC3\xC4\x07\xC4\u0680
\xC4\f\xC4\xC4\u0683\v\xC4\xC4\xC4\xC4\xC4\xC4\xC4\u0632\u0676\u0681\xC5\b
\f\x07\b	
\v\f\r "$&(*,.0246\x1B8:<>@ B!D"F#H$J%L&N'P(R)T*V+X,Z-\\.^/\`0b1d2f3h4j5l6n7p8r9t:v;x<z=|>~?\x80@\x82A\x84B\x86C\x88D\x8AE\x8CF\x8EG\x90H\x92I\x94J\x96K\x98L\x9AM\x9CN\x9EO\xA0P\xA2Q\xA4R\xA6S\xA8T\xAAU\xACV\xAEW\xB0X\xB2Y\xB4Z\xB6[\xB8\\\xBA]\xBC^\xBE_\xC0\`\xC2a\xC4b\xC6\xC8\xCA\xCC\xCE\xD0c\xD2d\xD4e\xD6\xD8f\xDAg\xDCh\xDEi\xE0j\xE2k\xE4l\xE6m\xE8n\xEAo\xECp\xEEq\xF0r\xF2s\xF4t\xF6u\xF8v\xFAw\xFCx\xFEy\u0100z\u0102{\u0104|\u0106}\u0108~\u010A\x7F\u010C\x80\u010E\x81\u0110\x82\u0112\x83\u0114\x84\u0116\x85\u0118\x86\u011A\x87\u011C\x88\u011E\u0120\u0122\u0124\u0126\x89\u0128\x8A\u012A\x8B\u012C\x8C\u012E\x8D\u0130\x8E\u0132\x8F\u0134\x90\u0136\x91\u0138\u013A\x92\u013C\x93\u013E\u0140\u0142\u0144\u0146\u0148\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\x94\u0178\x95\u017A\x96\u017C\x97\u017E\x98\u0180\x99\u0182\x9A\u0184\u0186\x9B\u0188\x9C-\v\r""\xA2\xA211TTtt))^^2;CHch\x07!$$))^^bb\f\f$$bb))bb$$))\f\f""VV..00GGgg--//2;CCccDDddEEeeFFffHHhhIIiiJJjjKKkkLLllMMmmNNnnOOooPPppQQqqRRrrSSssTTttUUuuVVvvWWwwXXxxYYyyZZzz[[{{\\\\||$$''$$}}\u0287C\\aac|\xAC\xAC\xB7\xB7\xBC\xBC\xC2\xD8\xDA\xF8\xFA\u02C3\u02C8\u02D3\u02E2\u02E6\u02EE\u02EE\u02F0\u02F0\u0347\u0347\u0372\u0376\u0378\u0379\u037C\u037F\u0381\u0381\u0388\u0388\u038A\u038C\u038E\u038E\u0390\u03A3\u03A5\u03F7\u03F9\u0483\u048C\u0531\u0533\u0558\u055B\u055B\u0563\u0589\u05B2\u05BF\u05C1\u05C1\u05C3\u05C4\u05C6\u05C7\u05C9\u05C9\u05D2\u05EC\u05F2\u05F4\u0612\u061C\u0622\u0659\u065B\u0661\u0670\u06D5\u06D7\u06DE\u06E3\u06EA\u06EF\u06F1\u06FC\u06FE\u0701\u0701\u0712\u0741\u074F\u07B3\u07CC\u07EC\u07F6\u07F7\u07FC\u07FC\u0802\u0819\u081C\u082E\u0842\u085A\u08A2\u08B6\u08B8\u08BF\u08D6\u08E1\u08E5\u08EB\u08F2\u093D\u093F\u094E\u0950\u0952\u0957\u0965\u0973\u0985\u0987\u098E\u0991\u0992\u0995\u09AA\u09AC\u09B2\u09B4\u09B4\u09B8\u09BB\u09BF\u09C6\u09C9\u09CA\u09CD\u09CE\u09D0\u09D0\u09D9\u09D9\u09DE\u09DF\u09E1\u09E5\u09F2\u09F3\u0A03\u0A05\u0A07\u0A0C\u0A11\u0A12\u0A15\u0A2A\u0A2C\u0A32\u0A34\u0A35\u0A37\u0A38\u0A3A\u0A3B\u0A40\u0A44\u0A49\u0A4A\u0A4D\u0A4E\u0A53\u0A53\u0A5B\u0A5E\u0A60\u0A60\u0A72\u0A77\u0A83\u0A85\u0A87\u0A8F\u0A91\u0A93\u0A95\u0AAA\u0AAC\u0AB2\u0AB4\u0AB5\u0AB7\u0ABB\u0ABF\u0AC7\u0AC9\u0ACB\u0ACD\u0ACE\u0AD2\u0AD2\u0AE2\u0AE5\u0AFB\u0AFB\u0B03\u0B05\u0B07\u0B0E\u0B11\u0B12\u0B15\u0B2A\u0B2C\u0B32\u0B34\u0B35\u0B37\u0B3B\u0B3F\u0B46\u0B49\u0B4A\u0B4D\u0B4E\u0B58\u0B59\u0B5E\u0B5F\u0B61\u0B65\u0B73\u0B73\u0B84\u0B85\u0B87\u0B8C\u0B90\u0B92\u0B94\u0B97\u0B9B\u0B9C\u0B9E\u0B9E\u0BA0\u0BA1\u0BA5\u0BA6\u0BAA\u0BAC\u0BB0\u0BBB\u0BC0\u0BC4\u0BC8\u0BCA\u0BCC\u0BCE\u0BD2\u0BD2\u0BD9\u0BD9\u0C02\u0C05\u0C07\u0C0E\u0C10\u0C12\u0C14\u0C2A\u0C2C\u0C3B\u0C3F\u0C46\u0C48\u0C4A\u0C4C\u0C4E\u0C57\u0C58\u0C5A\u0C5C\u0C62\u0C65\u0C82\u0C85\u0C87\u0C8E\u0C90\u0C92\u0C94\u0CAA\u0CAC\u0CB5\u0CB7\u0CBB\u0CBF\u0CC6\u0CC8\u0CCA\u0CCC\u0CCE\u0CD7\u0CD8\u0CE0\u0CE0\u0CE2\u0CE5\u0CF3\u0CF4\u0D03\u0D05\u0D07\u0D0E\u0D10\u0D12\u0D14\u0D3C\u0D3F\u0D46\u0D48\u0D4A\u0D4C\u0D4E\u0D50\u0D50\u0D56\u0D59`;B._serializedATNSegment1='\u0D61\u0D65\u0D7C\u0D81\u0D84\u0D85\u0D87\u0D98\u0D9C\u0DB3\u0DB5\u0DBD\u0DBF\u0DBF\u0DC2\u0DC8\u0DD1\u0DD6\u0DD8\u0DD8\u0DDA\u0DE1\u0DF4\u0DF5\u0E03\u0E3C\u0E42\u0E48\u0E4F\u0E4F\u0E83\u0E84\u0E86\u0E86\u0E89\u0E8A\u0E8C\u0E8C\u0E8F\u0E8F\u0E96\u0E99\u0E9B\u0EA1\u0EA3\u0EA5\u0EA7\u0EA7\u0EA9\u0EA9\u0EAC\u0EAD\u0EAF\u0EBB\u0EBD\u0EBF\u0EC2\u0EC6\u0EC8\u0EC8\u0ECF\u0ECF\u0EDE\u0EE1\u0F02\u0F02\u0F42\u0F49\u0F4B\u0F6E\u0F73\u0F83\u0F8A\u0F99\u0F9B\u0FBE\u1002\u1038\u103A\u103A\u103D\u1041\u1052\u1064\u1067\u106A\u1070\u1088\u1090\u1090\u109E\u109F\u10A2\u10C7\u10C9\u10C9\u10CF\u10CF\u10D2\u10FC\u10FE\u124A\u124C\u124F\u1252\u1258\u125A\u125A\u125C\u125F\u1262\u128A\u128C\u128F\u1292\u12B2\u12B4\u12B7\u12BA\u12C0\u12C2\u12C2\u12C4\u12C7\u12CA\u12D8\u12DA\u1312\u1314\u1317\u131A\u135C\u1361\u1361\u1382\u1391\u13A2\u13F7\u13FA\u13FF\u1403\u166E\u1671\u1681\u1683\u169C\u16A2\u16EC\u16F0\u16FA\u1702\u170E\u1710\u1715\u1722\u1735\u1742\u1755\u1762\u176E\u1770\u1772\u1774\u1775\u1782\u17B5\u17B8\u17CA\u17D9\u17D9\u17DE\u17DE\u1822\u1879\u1882\u18AC\u18B2\u18F7\u1902\u1920\u1922\u192D\u1932\u193A\u1952\u196F\u1972\u1976\u1982\u19AD\u19B2\u19CB\u1A02\u1A1D\u1A22\u1A60\u1A63\u1A76\u1AA9\u1AA9\u1B02\u1B35\u1B37\u1B45\u1B47\u1B4D\u1B82\u1BAB\u1BAE\u1BB1\u1BBC\u1BE7\u1BE9\u1BF3\u1C02\u1C37\u1C4F\u1C51\u1C5C\u1C7F\u1C82\u1C8A\u1CEB\u1CEE\u1CF0\u1CF5\u1CF7\u1CF8\u1D02\u1DC1\u1DE9\u1DF6\u1E02\u1F17\u1F1A\u1F1F\u1F22\u1F47\u1F4A\u1F4F\u1F52\u1F59\u1F5B\u1F5B\u1F5D\u1F5D\u1F5F\u1F5F\u1F61\u1F7F\u1F82\u1FB6\u1FB8\u1FBE\u1FC0\u1FC0\u1FC4\u1FC6\u1FC8\u1FCE\u1FD2\u1FD5\u1FD8\u1FDD\u1FE2\u1FEE\u1FF4\u1FF6\u1FF8\u1FFE\u2073\u2073\u2081\u2081\u2092\u209E\u2104\u2104\u2109\u2109\u210C\u2115\u2117\u2117\u211B\u211F\u2126\u2126\u2128\u2128\u212A\u212A\u212C\u212F\u2131\u213B\u213E\u2141\u2147\u214B\u2150\u2150\u2162\u218A\u24B8\u24EB\u2C02\u2C30\u2C32\u2C60\u2C62\u2CE6\u2CED\u2CF0\u2CF4\u2CF5\u2D02\u2D27\u2D29\u2D29\u2D2F\u2D2F\u2D32\u2D69\u2D71\u2D71\u2D82\u2D98\u2DA2\u2DA8\u2DAA\u2DB0\u2DB2\u2DB8\u2DBA\u2DC0\u2DC2\u2DC8\u2DCA\u2DD0\u2DD2\u2DD8\u2DDA\u2DE0\u2DE2\u2E01\u2E31\u2E31\u3007\u3009\u3023\u302B\u3033\u3037\u303A\u303E\u3043\u3098\u309F\u30A1\u30A3\u30FC\u30FE\u3101\u3107\u312F\u3133\u3190\u31A2\u31BC\u31F2\u3201\u3402\u4DB7\u4E02\u9FD7\uA002\uA48E\uA4D2\uA4FF\uA502\uA60E\uA612\uA621\uA62C\uA62D\uA642\uA670\uA676\uA67D\uA681\uA6F1\uA719\uA721\uA724\uA78A\uA78D\uA7B0\uA7B2\uA7B9\uA7F9\uA803\uA805\uA807\uA809\uA80C\uA80E\uA829\uA842\uA875\uA882\uA8C5\uA8C7\uA8C7\uA8F4\uA8F9\uA8FD\uA8FD\uA8FF\uA8FF\uA90C\uA92C\uA932\uA954\uA962\uA97E\uA982\uA9B4\uA9B6\uA9C1\uA9D1\uA9D1\uA9E2\uA9E6\uA9E8\uA9F1\uA9FC\uAA00\uAA02\uAA38\uAA42\uAA4F\uAA62\uAA78\uAA7C\uAA7C\uAA80\uAAC0\uAAC2\uAAC2\uAAC4\uAAC4\uAADD\uAADF\uAAE2\uAAF1\uAAF4\uAAF7\uAB03\uAB08\uAB0B\uAB10\uAB13\uAB18\uAB22\uAB28\uAB2A\uAB30\uAB32\uAB5C\uAB5E\uAB67\uAB72\uABEC\uAC02\uD7A5\uD7B2\uD7C8\uD7CD\uD7FD\uF902\uFA6F\uFA72\uFADB\uFB02\uFB08\uFB15\uFB19\uFB1F\uFB2A\uFB2C\uFB38\uFB3A\uFB3E\uFB40\uFB40\uFB42\uFB43\uFB45\uFB46\uFB48\uFBB3\uFBD5\uFD3F\uFD52\uFD91\uFD94\uFDC9\uFDF2\uFDFD\uFE72\uFE76\uFE78\uFEFE\uFF23\uFF3C\uFF43\uFF5C\uFF68\uFFC0\uFFC4\uFFC9\uFFCC\uFFD1\uFFD4\uFFD9\uFFDC\uFFDE\r(*<>?AOR_\x82\xFC\u0142\u0176\u0282\u029E\u02A2\u02D2\u0302\u0321\u0332\u034C\u0352\u037C\u0382\u039F\u03A2\u03C5\u03CA\u03D1\u03D3\u03D7\u0402\u049F\u04B2\u04D5\u04DA\u04FD\u0502\u0529\u0532\u0565\u0602\u0738\u0742\u0757\u0762\u0769\u0802\u0807\u080A\u080A\u080C\u0837\u0839\u083A\u083E\u083E\u0841\u0857\u0862\u0878\u0882\u08A0\u08E2\u08F4\u08F6\u08F7\u0902\u0917\u0922\u093B\u0982\u09B9\u09C0\u09C1\u0A02\u0A05\u0A07\u0A08\u0A0E\u0A15\u0A17\u0A19\u0A1B\u0A35\u0A62\u0A7E\u0A82\u0A9E\u0AC2\u0AC9\u0ACB\u0AE6\u0B02\u0B37\u0B42\u0B57\u0B62\u0B74\u0B82\u0B93\u0C02\u0C4A\u0C82\u0CB4\u0CC2\u0CF4\u1002\u1047\u1084\u10BA\u10D2\u10EA\u1102\u1134\u1152\u1174\u1178\u1178\u1182\u11C1\u11C3\u11C6\u11DC\u11DC\u11DE\u11DE\u1202\u1213\u1215\u1236\u1239\u1239\u1240\u1240\u1282\u1288\u128A\u128A\u128C\u128F\u1291\u129F\u12A1\u12AA\u12B2\u12EA\u1302\u1305\u1307\u130E\u1311\u1312\u1315\u132A\u132C\u1332\u1334\u1335\u1337\u133B\u133F\u1346\u1349\u134A\u134D\u134E\u1352\u1352\u1359\u1359\u135F\u1365\u1402\u1443\u1445\u1447\u1449\u144C\u1482\u14C3\u14C6\u14C7\u14C9\u14C9\u1582\u15B7\u15BA\u15C0\u15DA\u15DF\u1602\u1640\u1642\u1642\u1646\u1646\u1682\u16B7\u1702\u171B\u171F\u172C\u18A2\u18E1\u1901\u1901\u1AC2\u1AFA\u1C02\u1C0A\u1C0C\u1C38\u1C3A\u1C40\u1C42\u1C42\u1C74\u1C91\u1C94\u1CA9\u1CAB\u1CB8\u2002\u239B\u2402\u2470\u2482\u2545\u3002\u3430\u4402\u4648\u6802\u6A3A\u6A42\u6A60\u6AD2\u6AEF\u6B02\u6B38\u6B42\u6B45\u6B65\u6B79\u6B7F\u6B91\u6F02\u6F46\u6F52\u6F80\u6F95\u6FA1\u6FE2\u6FE2\u7002\u87EE\u8802\u8AF4\uB002\uB003\uBC02\uBC6C\uBC72\uBC7E\uBC82\uBC8A\uBC92\uBC9B\uBCA0\uBCA0\uD402\uD456\uD458\uD49E\uD4A0\uD4A1\uD4A4\uD4A4\uD4A7\uD4A8\uD4AB\uD4AE\uD4B0\uD4BB\uD4BD\uD4BD\uD4BF\uD4C5\uD4C7\uD507\uD509\uD50C\uD50F\uD516\uD518\uD51E\uD520\uD53B\uD53D\uD540\uD542\uD546\uD548\uD548\uD54C\uD552\uD554\uD6A7\uD6AA\uD6C2\uD6C4\uD6DC\uD6DE\uD6FC\uD6FE\uD716\uD718\uD736\uD738\uD750\uD752\uD770\uD772\uD78A\uD78C\uD7AA\uD7AC\uD7C4\uD7C6\uD7CD\uE002\uE008\uE00A\uE01A\uE01D\uE023\uE025\uE026\uE028\uE02C\uE802\uE8C6\uE902\uE945\uE949\uE949\uEE02\uEE05\uEE07\uEE21\uEE23\uEE24\uEE26\uEE26\uEE29\uEE29\uEE2B\uEE34\uEE36\uEE39\uEE3B\uEE3B\uEE3D\uEE3D\uEE44\uEE44\uEE49\uEE49\uEE4B\uEE4B\uEE4D\uEE4D\uEE4F\uEE51\uEE53\uEE54\uEE56\uEE56\uEE59\uEE59\uEE5B\uEE5B\uEE5D\uEE5D\uEE5F\uEE5F\uEE61\uEE61\uEE63\uEE64\uEE66\uEE66\uEE69\uEE6C\uEE6E\uEE74\uEE76\uEE79\uEE7B\uEE7E\uEE80\uEE80\uEE82\uEE8B\uEE8D\uEE9D\uEEA3\uEEA5\uEEA7\uEEAB\uEEAD\uEEBD\uF132\uF14B\uF152\uF16B\uF172\uF18B\uA6D8\uA702\uB736\uB742\uB81F\uB822\uCEA3\uF802\uFA1F\u06B4\b\n\f "$&(*,.02468:<>@BDFHJLNPRTVXZ\\^`bdfhjlnprtvxz|~\x80\x82\x84\x86\x88\x8A\x8C\x8E\x90\x92\x94\x96\x98\x9A\x9C\x9E\xA0\xA2\xA4\xA6\xA8\xAA\xAC\xAE\xB0\xB2\xB4\xB6\xB8\xBA\xBC\xBE\xC0\xC2\xC4\xD0\xD2\xD4\xD8\xDA\xDC\xDE\xE0\xE2\xE4\xE6\xE8\xEA\xEC\xEE\xF0\xF2\xF4\xF6\xF8\xFA\xFC\xFE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u013A\u013C\u0176\u0178\u017A\u017C\u017E\u0180\u0182\u0186\u0188\u018A\u018C\b\u019A\n\u01AB\f\u01BC\u01CF\u01E1\u01EA\u01FB\u0209\u0217\u0227\u0235\u0242 \u024E"\u025E$\u026F&\u027C(\u028B*\u0297,\u02A7.\u02BA0\u02C92\u02D64\u02E46\u02EF8\u02FD:\u030B<\u0319>\u0324@\u032FB\u033CD\u0348F\u0358H\u035CJ\u0360L\u0363N\u0367P\u036BR\u0373T\u0376V\u037BX\u0380Z\u038A\\\u0390^\u0395`\u039Bb\u03A0d\u03A9f\u03AEh\u03B2j\u03BAl\u03C1n\u03C7p\u03CCr\u03D0t\u03D5v\u03DEx\u03E2z\u03E9|\u03F0~\u03F6\x80\u03F9\x82\u03FE\x84\u0403\x86\u0408\x88\u040C\x8A\u0410\x8C\u0419\x8E\u0421\x90\u0425\x92\u0429\x94\u042E\x96\u0435\x98\u0438\x9A\u043B\x9C\u0440\x9E\u044A\xA0\u0450\xA2\u0459\xA4\u0460\xA6\u0467\xA8\u046B\xAA\u046F\xAC\u0475\xAE\u047A\xB0\u047F\xB2\u0489\xB4\u048C\xB6\u0491\xB8\u0498\xBA\u049F\xBC\u04A4\xBE\u04A9\xC0\u04B0\xC2\u04C0\xC4\u04C3\xC6\u04CF\xC8\u04D1\xCA\u04D9\xCC\u04DB\xCE\u04E2\xD0\u04E4\xD2\u04EE\xD4\u04F8\xD6\u0505\xD8\u050F\xDA\u0514\xDC\u0517\xDE\u0519\xE0\u051C\xE2\u051F\xE4\u0521\xE6\u0523\xE8\u0525\xEA\u0527\xEC\u052B\xEE\u052F\xF0\u0532\xF2\u0536\xF4\u0538\xF6\u053A\xF8\u053C\xFA\u053E\xFC\u0540\xFE\u0542\u0100\u0544\u0102\u0547\u0104\u054A\u0106\u054D\u0108\u054F\u010A\u0551\u010C\u0553\u010E\u0556\u0110\u0558\u0112\u055A\u0114\u055C\u0116\u055F\u0118\u0561\u011A\u0563\u011C\u0566\u011E\u0568\u0120\u056D\u0122\u0570\u0124\u057A\u0126\u0582\u0128\u059B\u012A\u05A4\u012C\u05AB\u012E\u05B1\u0130\u05B6\u0132\u05C0\u0134\u05C3\u0136\u05CC\u0138\u05D2\u013A\u05EA\u013C\u05ED\u013E\u05F4\u0140\u05F6\u0142\u05F8\u0144\u05FA\u0146\u05FC\u0148\u05FE\u014A\u0600\u014C\u0602\u014E\u0604\u0150\u0606\u0152\u0608\u0154\u060A\u0156\u060C\u0158\u060E\u015A\u0610\u015C\u0612\u015E\u0614\u0160\u0616\u0162\u0618\u0164\u061A\u0166\u061C\u0168\u061E\u016A\u0620\u016C\u0622\u016E\u0624\u0170\u0626\u0172\u0628\u0174\u062A\u0176\u062C\u0178\u063E\u017A\u0644\u017C\u0648\u017E\u064E\u0180\u0654\u0182\u0664\u0184\u0671\u0186\u0676\u0188\u0681\u018A\u018B	\u018B\u018C\u018D\u0142\xA1\u018D\u018E\u0146\xA3\u018E\u018F\u0146\xA3\u018F\u0190\u014A\xA5\u0190\u0191\u0160\xB0\u0191\u0195\u0168\xB4\u0192\u0194\u0193\u0192\u0194\u0197\u0195\u0193\u0195\u0196\u0196\u0198\u0197\u0195\u0198\u0199\x07<\u0199\x07\u019A\u019B\u0142\xA1\u019B\u019C\u014E\xA7\u019C\u019D\u014E\xA7\u019D\u019E\u0164\xB2\u019E\u019F\u014A\xA5\u019F\u01A0\u014E\xA7\u01A0\u01A1\u0142\xA1\u01A1\u01A2\u0168\xB4\u01A2\u01A6\u014A\xA5\u01A3\u01A5\u01A4\u01A3\u01A5\u01A8\u01A6\u01A4\u01A6\u01A7\u01A7\u01A9\u01A8\u01A6\u01A9\u01AA\x07<\u01AA	\u01AB\u01AC\u0146\xA3\u01AC\u01AD\u0142\xA1\u01AD\u01AE\u0158\xAC\u01AE\u01AF\u0146\xA3\u01AF\u01B0\u016A\xB5\u01B0\u01B1\u0158\xAC\u01B1\u01B2\u0142\xA1\u01B2\u01B3\u0168\xB4\u01B3\u01B7\u014A\xA5\u01B4\u01B6\u01B5\u01B4\u01B6\u01B9\u01B7\u01B5\u01B7\u01B8\u01B8\u01BA\u01B9\u01B7\u01BA\u01BB\x07<\u01BB\v\u01BC\u01BD\u0146\xA3\u01BD\u01BE\u0142\xA1\u01BE\u01BF\u0158\xAC\u01BF\u01C0\u0146\xA3\u01C0\u01C1\u016A\xB5\u01C1\u01C2\u0158\xAC\u01C2\u01C3\u0142\xA1\u01C3\u01C4\u0168\xB4\u01C4\u01C5\u0152\xA9\u01C5\u01C6\u015E\xAF\u01C6\u01CA\u015C\xAE\u01C7\u01C9\u01C8\u01C7\u01C9\u01CC\u01CA\u01C8\u01CA\u01CB\u01CB\u01CD\u01CC\u01CA\u01CD\u01CE\x07<\u01CE\r\u01CF\u01D0\u0146\xA3\u01D0\u01D1\u015E\xAF\u01D1\u01D2\u015C\xAE\u01D2\u01D3\u015C\xAE\u01D3\u01D4\u014A\xA5\u01D4\u01D5\u0146\xA3\u01D5\u01D6\u0168\xB4\u01D6\u01D7\u0152\xA9\u01D7\u01D8\u015E\xAF\u01D8\u01DC\u015C\xAE\u01D9\u01DB\u01DA\u01D9\u01DB\u01DE\u01DC\u01DA\u01DC\u01DD\u01DD\u01DF\u01DE\u01DC\u01DF\u01E0\x07<\u01E0\u01E1\u01E2\u0148\xA4\u01E2\u01E3\u014A\xA5\u01E3\u01E4\u0146\xA3\u01E4\u01E5\u0158\xAC\u01E5\u01E6\u0142\xA1\u01E6\u01E7\u0164\xB2\u01E7\u01E8\u014A\xA5\u01E8\u01E9\x07<\u01E9\u01EA\u01EB\u0148\xA4\u01EB\u01EC\u0152\xA9\u01EC\u01ED\u015A\xAD\u01ED\u01EE\u014A\xA5\u01EE\u01EF\u015C\xAE\u01EF\u01F0\u0166\xB3\u01F0\u01F1\u0152\xA9\u01F1\u01F2\u015E\xAF\u01F2\u01F6\u015C\xAE\u01F3\u01F5\u01F4\u01F3\u01F5\u01F8\u01F6\u01F4\u01F6\u01F7\u01F7\u01F9\u01F8\u01F6\u01F9\u01FA\x07<\u01FA\u01FB\u01FC\u014A\xA5\u01FC\u01FD\u0170\xB8\u01FD\u01FE\u0146\xA3\u01FE\u01FF\u014A\xA5\u01FF\u0200\u0160\xB0\u0200\u0204\u0168\xB4\u0201\u0203\u0202\u0201\u0203\u0206\u0204\u0202\u0204\u0205\u0205\u0207\u0206\u0204\u0207\u0208\x07<\u0208\u0209\u020A\u014A\xA5\u020A\u020B\u0170\xB8\u020B\u020C\u0168\xB4\u020C\u020D\u014A\xA5\u020D\u020E\u015C\xAE\u020E\u0212\u0148\xA4\u020F\u0211\u0210\u020F\u0211\u0214\u0212\u0210\u0212\u0213\u0213\u0215\u0214\u0212\u0215\u0216\x07<\u0216\u0217\u0218\u014E\xA7\u0218\u0219\u0164\xB2\u0219\u021A\u015E\xAF\u021A\u021B\u016A\xB5\u021B\u021C\u0160\xB0\u021C\u021D\x07a\u021D\u021E\u0144\xA2\u021E\u0222\u0172\xB9\u021F\u0221\u0220\u021F\u0221\u0224\u0222\u0220\u0222\u0223\u0223\u0225\u0224\u0222\u0225';B._serializedATNSegment2=`\u0226\x07<\u0226\u0227\u0228\u0150\xA8\u0228\u0229\u0142\xA1\u0229\u022A\u016C\xB6\u022A\u022B\u0152\xA9\u022B\u022C\u015C\xAE\u022C\u0230\u014E\xA7\u022D\u022F\u022E\u022D\u022F\u0232\u0230\u022E\u0230\u0231\u0231\u0233\u0232\u0230\u0233\u0234\x07<\u0234\x1B\u0235\u0236\u0152\xA9\u0236\u0237\u015C\xAE\u0237\u0238\u0148\xA4\u0238\u0239\u014A\xA5\u0239\u023D\u0170\xB8\u023A\u023C\u023B\u023A\u023C\u023F\u023D\u023B\u023D\u023E\u023E\u0240\u023F\u023D\u0240\u0241\x07<\u0241\u0242\u0243\u0154\xAA\u0243\u0244\u015E\xAF\u0244\u0245\u0152\xA9\u0245\u0246\u015C\xAE\u0246\u0247\x07a\u0247\u0248\u0146\xA3\u0248\u0249\u0164\xB2\u0249\u024A\u015E\xAF\u024A\u024B\u0166\xB3\u024B\u024C\u0166\xB3\u024C\u024D\x07<\u024D\u024E\u024F\u0154\xAA\u024F\u0250\u015E\xAF\u0250\u0251\u0152\xA9\u0251\u0252\u015C\xAE\u0252\u0253\x07a\u0253\u0254\u015E\xAF\u0254\u0255\u015C\xAE\u0255\u0259\u014A\xA5\u0256\u0258\u0257\u0256\u0258\u025B\u0259\u0257\u0259\u025A\u025A\u025C\u025B\u0259\u025C\u025D\x07<\u025D!\u025E\u025F\u0154\xAA\u025F\u0260\u015E\xAF\u0260\u0261\u0152\xA9\u0261\u0262\u015C\xAE\u0262\u0263\x07a\u0263\u0264\u015A\xAD\u0264\u0265\u0142\xA1\u0265\u0266\u015C\xAE\u0266\u026A\u0172\xB9\u0267\u0269\u0268\u0267\u0269\u026C\u026A\u0268\u026A\u026B\u026B\u026D\u026C\u026A\u026D\u026E\x07<\u026E#\u026F\u0270\u0158\xAC\u0270\u0271\u0152\xA9\u0271\u0272\u015A\xAD\u0272\u0273\u0152\xA9\u0273\u0277\u0168\xB4\u0274\u0276\u0275\u0274\u0276\u0279\u0277\u0275\u0277\u0278\u0278\u027A\u0279\u0277\u027A\u027B\x07<\u027B%\u027C\u027D\u015A\xAD\u027D\u027E\u014A\xA5\u027E\u027F\u0142\xA1\u027F\u0280\u0166\xB3\u0280\u0281\u016A\xB5\u0281\u0282\u0164\xB2\u0282\u0286\u014A\xA5\u0283\u0285\u0284\u0283\u0285\u0288\u0286\u0284\u0286\u0287\u0287\u0289\u0288\u0286\u0289\u028A\x07<\u028A'\u028B\u028C\u015C\xAE\u028C\u028D\u014A\xA5\u028D\u028E\u0166\xB3\u028E\u0292\u0168\xB4\u028F\u0291\u0290\u028F\u0291\u0294\u0292\u0290\u0292\u0293\u0293\u0295\u0294\u0292\u0295\u0296\x07<\u0296)\u0297\u0298\u015E\xAF\u0298\u0299\u0164\xB2\u0299\u029A\u0148\xA4\u029A\u029B\u014A\xA5\u029B\u029C\u0164\xB2\u029C\u029D\x07a\u029D\u029E\u0144\xA2\u029E\u02A2\u0172\xB9\u029F\u02A1\u02A0\u029F\u02A1\u02A4\u02A2\u02A0\u02A2\u02A3\u02A3\u02A5\u02A4\u02A2\u02A5\u02A6\x07<\u02A6+\u02A7\u02A8\u0160\xB0\u02A8\u02A9\u0164\xB2\u02A9\u02AA\u0152\xA9\u02AA\u02AB\u015A\xAD\u02AB\u02AC\u0142\xA1\u02AC\u02AD\u0164\xB2\u02AD\u02AE\u0172\xB9\u02AE\u02AF\x07a\u02AF\u02B0\u0156\xAB\u02B0\u02B1\u014A\xA5\u02B1\u02B5\u0172\xB9\u02B2\u02B4\u02B3\u02B2\u02B4\u02B7\u02B5\u02B3\u02B5\u02B6\u02B6\u02B8\u02B7\u02B5\u02B8\u02B9\x07<\u02B9-\u02BA\u02BB\u0160\xB0\u02BB\u02BC\u0164\xB2\u02BC\u02BD\u015E\xAF\u02BD\u02BE\u0154\xAA\u02BE\u02BF\u014A\xA5\u02BF\u02C0\u0146\xA3\u02C0\u02C4\u0168\xB4\u02C1\u02C3\u02C2\u02C1\u02C3\u02C6\u02C4\u02C2\u02C4\u02C5\u02C5\u02C7\u02C6\u02C4\u02C7\u02C8\x07<\u02C8/\u02C9\u02CA\u0162\xB1\u02CA\u02CB\u016A\xB5\u02CB\u02CC\u014A\xA5\u02CC\u02CD\u0164\xB2\u02CD\u02D1\u0172\xB9\u02CE\u02D0\u02CF\u02CE\u02D0\u02D3\u02D1\u02CF\u02D1\u02D2\u02D2\u02D4\u02D3\u02D1\u02D4\u02D5\x07<\u02D51\u02D6\u02D7\u0164\xB2\u02D7\u02D8\u014A\xA5\u02D8\u02D9\u015C\xAE\u02D9\u02DA\u0142\xA1\u02DA\u02DB\u015A\xAD\u02DB\u02DF\u014A\xA5\u02DC\u02DE\u02DD\u02DC\u02DE\u02E1\u02DF\u02DD\u02DF\u02E0\u02E0\u02E2\u02E1\u02DF\u02E2\u02E3\x07<\u02E33\u02E4\u02E5\u0164\xB2\u02E5\u02E6\u016A\xB5\u02E6\u02EA\u015C\xAE\u02E7\u02E9\u02E8\u02E7\u02E9\u02EC\u02EA\u02E8\u02EA\u02EB\u02EB\u02ED\u02EC\u02EA\u02ED\u02EE\x07<\u02EE5\u02EF\u02F0\u0166\xB3\u02F0\u02F1\u0142\xA1\u02F1\u02F2\u015A\xAD\u02F2\u02F3\u0160\xB0\u02F3\u02F4\u0158\xAC\u02F4\u02F8\u014A\xA5\u02F5\u02F7\u02F6\u02F5\u02F7\u02FA\u02F8\u02F6\u02F8\u02F9\u02F9\u02FB\u02FA\u02F8\u02FB\u02FC\x07<\u02FC7\u02FD\u02FE\u0166\xB3\u02FE\u02FF\u014A\xA5\u02FF\u0300\u0158\xAC\u0300\u0301\u014A\xA5\u0301\u0302\u0146\xA3\u0302\u0306\u0168\xB4\u0303\u0305\u0304\u0303\u0305\u0308\u0306\u0304\u0306\u0307\u0307\u0309\u0308\u0306\u0309\u030A\x07<\u030A9\u030B\u030C\u0166\xB3\u030C\u030D\u015E\xAF\u030D\u030E\u016A\xB5\u030E\u030F\u0164\xB2\u030F\u0310\u0146\xA3\u0310\u0314\u014A\xA5\u0311\u0313\u0312\u0311\u0313\u0316\u0314\u0312\u0314\u0315\u0315\u0317\u0316\u0314\u0317\u0318\x07<\u0318;\u0319\u031A\u0166\xB3\u031A\u031B\u0162\xB1\u031B\u031F\u0158\xAC\u031C\u031E\u031D\u031C\u031E\u0321\u031F\u031D\u031F\u0320\u0320\u0322\u0321\u031F\u0322\u0323\x07<\u0323=\u0324\u0325\u0168\xB4\u0325\u0326\u015E\xAF\u0326\u032A\u0160\xB0\u0327\u0329\u0328\u0327\u0329\u032C\u032A\u0328\u032A\u032B\u032B\u032D\u032C\u032A\u032D\u032E\x07<\u032E?\u032F\u0330\u016E\xB7\u0330\u0331\u0150\xA8\u0331\u0332\u014A\xA5\u0332\u0333\u0164\xB2\u0333\u0337\u014A\xA5\u0334\u0336\u0335\u0334\u0336\u0339\u0337\u0335\u0337\u0338\u0338\u033A\u0339\u0337\u033A\u033B\x07<\u033BA\u033C\u033D\u016C\xB6\u033D\u033E\u0152\xA9\u033E\u033F\u014A\xA5\u033F\u0343\u016E\xB7\u0340\u0342\u0341\u0340\u0342\u0345\u0343\u0341\u0343\u0344\u0344\u0346\u0345\u0343\u0346\u0347\x07<\u0347C\u0348\u0349\u0168\xB4\u0349\u034A\u0152\xA9\u034A\u034B\u015A\xAD\u034B\u034C\u014A\xA5\u034C\u034D\u0174\xBA\u034D\u034E\u015E\xAF\u034E\u034F\u015C\xAE\u034F\u0353\u014A\xA5\u0350\u0352\u0351\u0350\u0352\u0355\u0353\u0351\u0353\u0354\u0354\u0356\u0355\u0353\u0356\u0357\x07<\u0357E\u0358\u0359\u0142\xA1\u0359\u035A\u0158\xAC\u035A\u035B\u0158\xAC\u035BG\u035C\u035D\u0142\xA1\u035D\u035E\u015C\xAE\u035E\u035F\u0148\xA4\u035FI\u0360\u0361\u0142\xA1\u0361\u0362\u0166\xB3\u0362K\u0363\u0364\u0142\xA1\u0364\u0365\u0166\xB3\u0365\u0366\u0146\xA3\u0366M\u0367\u0368\u0142\xA1\u0368\u0369\u016C\xB6\u0369\u036A\u014E\xA7\u036AO\u036B\u036C\u0144\xA2\u036C\u036D\u015E\xAF\u036D\u036E\u015E\xAF\u036E\u036F\u0158\xAC\u036F\u0370\u014A\xA5\u0370\u0371\u0142\xA1\u0371\u0372\u015C\xAE\u0372Q\u0373\u0374\u0144\xA2\u0374\u0375\u0172\xB9\u0375S\u0376\u0377\u0146\xA3\u0377\u0378\u0142\xA1\u0378\u0379\u0166\xB3\u0379\u037A\u014A\xA5\u037AU\u037B\u037C\u0146\xA3\u037C\u037D\u0142\xA1\u037D\u037E\u0166\xB3\u037E\u037F\u0168\xB4\u037FW\u0380\u0381\u0146\xA3\u0381\u0382\u015E\xAF\u0382\u0383\u015C\xAE\u0383\u0384\u0148\xA4\u0384\u0385\u0152\xA9\u0385\u0386\u0168\xB4\u0386\u0387\u0152\xA9\u0387\u0388\u015E\xAF\u0388\u0389\u015C\xAE\u0389Y\u038A\u038B\u0146\xA3\u038B\u038C\u015E\xAF\u038C\u038D\u016A\xB5\u038D\u038E\u015C\xAE\u038E\u038F\u0168\xB4\u038F[\u0390\u0391\u0148\xA4\u0391\u0392\u0142\xA1\u0392\u0393\u0168\xB4\u0393\u0394\u014A\xA5\u0394]\u0395\u0396\u0148\xA4\u0396\u0397\u0142\xA1\u0397\u0399\u0172\xB9\u0398\u039A\u0166\xB3\u0399\u0398\u0399\u039A\u039A_\u039B\u039C\u0148\xA4\u039C\u039D\u014A\xA5\u039D\u039E\u0166\xB3\u039E\u039F\u0146\xA3\u039Fa\u03A0\u03A1\u0148\xA4\u03A1\u03A2\u0152\xA9\u03A2\u03A3\u0166\xB3\u03A3\u03A4\u0168\xB4\u03A4\u03A5\u0152\xA9\u03A5\u03A6\u015C\xAE\u03A6\u03A7\u0146\xA3\u03A7\u03A8\u0168\xB4\u03A8c\u03A9\u03AA\u014A\xA5\u03AA\u03AB\u0158\xAC\u03AB\u03AC\u0166\xB3\u03AC\u03AD\u014A\xA5\u03ADe\u03AE\u03AF\u014A\xA5\u03AF\u03B0\u015C\xAE\u03B0\u03B1\u0148\xA4\u03B1g\u03B2\u03B3\u014A\xA5\u03B3\u03B4\u0170\xB8\u03B4\u03B5\u0146\xA3\u03B5\u03B6\u0158\xAC\u03B6\u03B7\u016A\xB5\u03B7\u03B8\u0148\xA4\u03B8\u03B9\u014A\xA5\u03B9i\u03BA\u03BB\u014A\xA5\u03BB\u03BC\u0170\xB8\u03BC\u03BD\u0168\xB4\u03BD\u03BE\u014A\xA5\u03BE\u03BF\u015C\xAE\u03BF\u03C0\u0148\xA4\u03C0k\u03C1\u03C2\u014C\xA6\u03C2\u03C3\u0142\xA1\u03C3\u03C4\u0158\xAC\u03C4\u03C5\u0166\xB3\u03C5\u03C6\u014A\xA5\u03C6m\u03C7\u03C8\u014C\xA6\u03C8\u03C9\u016A\xB5\u03C9\u03CA\u0158\xAC\u03CA\u03CB\u0158\xAC\u03CBo\u03CC\u03CD\u014C\xA6\u03CD\u03CE\u015E\xAF\u03CE\u03CF\u0164\xB2\u03CFq\u03D0\u03D1\u014C\xA6\u03D1\u03D2\u0164\xB2\u03D2\u03D3\u015E\xAF\u03D3\u03D4\u015A\xAD\u03D4s\u03D5\u03D6\u014C\xA6\u03D6\u03D7\u0164\xB2\u03D7\u03D8\u015E\xAF\u03D8\u03D9\u015A\xAD\u03D9\u03DA\x07a\u03DA\u03DB\u0166\xB3\u03DB\u03DC\u0162\xB1\u03DC\u03DD\u0158\xAC\u03DDu\u03DE\u03DF\u0150\xA8\u03DF\u03E0\u0142\xA1\u03E0\u03E1\u0166\xB3\u03E1w\u03E2\u03E3\u0150\xA8\u03E3\u03E4\u015E\xAF\u03E4\u03E5\u016A\xB5\u03E5\u03E7\u0164\xB2\u03E6\u03E8\u0166\xB3\u03E7\u03E6\u03E7\u03E8\u03E8y\u03E9\u03EA\u0152\xA9\u03EA\u03EB\u015A\xAD\u03EB\u03EC\u0160\xB0\u03EC\u03ED\u015E\xAF\u03ED\u03EE\u0164\xB2\u03EE\u03EF\u0168\xB4\u03EF{\u03F0\u03F1\u0152\xA9\u03F1\u03F2\u015C\xAE\u03F2\u03F3\u015C\xAE\u03F3\u03F4\u014A\xA5\u03F4\u03F5\u0164\xB2\u03F5}\u03F6\u03F7\u0152\xA9\u03F7\u03F8\u0166\xB3\u03F8\x7F\u03F9\u03FA\u0154\xAA\u03FA\u03FB\u0166\xB3\u03FB\u03FC\u015E\xAF\u03FC\u03FD\u015C\xAE\u03FD\x81\u03FE\u03FF\u0158\xAC\u03FF\u0400\u0142\xA1\u0400\u0401\u0166\xB3\u0401\u0402\u0168\xB4\u0402\x83\u0403\u0404\u0158\xAC\u0404\u0405\u014A\xA5\u0405\u0406\u014C\xA6\u0406\u0407\u0168\xB4\u0407\x85\u0408\u0409\u015A\xAD\u0409\u040A\u0142\xA1\u040A\u040B\u0170\xB8\u040B\x87\u040C\u040D\u015A\xAD\u040D\u040E\u0152\xA9\u040E\u040F\u015C\xAE\u040F\x89\u0410\u0411\u015A\xAD\u0411\u0412\u0152\xA9\u0412\u0413\u015C\xAE\u0413\u0414\u016A\xB5\u0414\u0415\u0168\xB4\u0415\u0417\u014A\xA5\u0416\u0418\u0166\xB3\u0417\u0416\u0417\u0418\u0418\x8B\u0419\u041A\u015A\xAD\u041A\u041B\u015E\xAF\u041B\u041C\u015C\xAE\u041C\u041D\u0168\xB4\u041D\u041F\u0150\xA8\u041E\u0420\u0166\xB3\u041F\u041E\u041F\u0420\u0420\x8D\u0421\u0422\u015C\xAE\u0422\u0423\u015E\xAF\u0423\u0424\u0168\xB4\u0424\x8F\u0425\u0426\u015C\xAE\u0426\u0427\u015E\xAF\u0427\u0428\u016E\xB7\u0428\x91\u0429\u042A\u015C\xAE\u042A\u042B\u016A\xB5\u042B\u042C\u0158\xAC\u042C\u042D\u0158\xAC\u042D\x93\u042E\u042F\u015C\xAE\u042F\u0430\u016A\xB5\u0430\u0431\u015A\xAD\u0431\u0432\u0144\xA2\u0432\u0433\u014A\xA5\u0433\u0434\u0164\xB2\u0434\x95\u0435\u0436\u015E\xAF\u0436\u0437\u015C\xAE\u0437\x97\u0438\u0439\u015E\xAF\u0439\u043A\u0164\xB2\u043A\x99\u043B\u043C\u0160\xB0\u043C\u043D\u0152\xA9\u043D\u043E\u0146\xA3\u043E\u043F\u0156\xAB\u043F\x9B\u0440\u0441\u0162\xB1\u0441\u0442\u016A\xB5\u0442\u0443\u0142\xA1\u0443\u0444\u0164\xB2\u0444\u0445\u0168\xB4\u0445\u0446\u014A\xA5\u0446\u0448\u0164\xB2\u0447\u0449\u0166\xB3\u0448\u0447\u0448\u0449\u0449\x9D\u044A\u044B\u0164\xB2\u044B\u044C\u0152\xA9\u044C\u044D\u014E\xA7\u044D\u044E\u0150\xA8\u044E\u044F\u0168\xB4\u044F\x9F\u0450\u0451\u0166\xB3\u0451\u0452\u014A\xA5\u0452\u0453\u0146\xA3\u0453\u0454\u015E\xAF\u0454\u0455\u015C\xAE\u0455\u0457\u0148\xA4\u0456\u0458\u0166\xB3\u0457\u0456\u0457\u0458\u0458\xA1\u0459\u045A\u0166\xB3\u045A\u045B\u0168\xB4\u045B\u045C\u0164\xB2\u045C\u045D\u0152\xA9\u045D\u045E\u015C\xAE\u045E\u045F\u014E\xA7\u045F\xA3\u0460\u0461\u0166\xB3\u0461\u0462\u015E\xAF\u0462\u0463\u016A\xB5\u0463\u0464\u0164\xB2\u0464\u0465\u0146\xA3\u0465\u0466\u014A\xA5\u0466\xA5\u0467\u0468\u0166\xB3\u0468\u0469\u016A\xB5\u0469\u046A\u015A\xAD\u046A\xA7\u046B\u046C\u0166\xB3\u046C\u046D\u0162\xB1\u046D\u046E\u0158\xAC\u046E\xA9\u046F\u0470\u0168\xB4\u0470\u0471\u0142\xA1\u0471\u0472\u0144\xA2\u0472\u0473\u0158\xAC\u0473\u0474\u014A\xA5\u0474\xAB\u0475\u0476\u0168\xB4\u0476\u0477\u0150\xA8\u0477\u0478\u014A\xA5\u0478\u0479\u015C\xAE\u0479\xAD\u047A\u047B\u0168\xB4\u047B\u047C\u0150\xA8\u047C\u047D\u0152\xA9\u047D\u047E\u0166\xB3\u047E\xAF\u047F\u0480\u0168\xB4\u0480\u0481\u0152\xA9\u0481\u0482\u015A\xAD\u0482\u0483\u014A\xA5\u0483\u0484\u0166\xB3\u0484\u0485\u0168\xB4\u0485\u0486\u0142\xA1\u0486\u0487\u015A\xAD\u0487\u0488\u0160\xB0\u0488\xB1\u0489\u048A\u0168\xB4\u048A\u048B\u015E\xAF\u048B\xB3\u048C\u048D\u0168\xB4\u048D\u048E\u0164\xB2\u048E\u048F\u016A\xB5\u048F\u0490\u014A\xA5\u0490\xB5\u0491\u0492\u0168\xB4\u0492\u0493\u016A\xB5\u0493\u0494\u0164\xB2\u0494\u0495\u0168\xB4\u0495\u0496\u0158\xAC\u0496\u0497\u014A\xA5\u0497\xB7\u0498\u0499\u016E\xB7\u0499\u049A\u014A\xA5\u049A\u049B\u014A\xA5\u049B\u049D\u0156\xAB\u049C\u049E\u0166\xB3\u049D\u049C\u049D\u049E\u049E\xB9\u049F\u04A0\u016E\xB7\u04A0\u04A1\u0150\xA8\u04A1\u04A2\u014A\xA5\u04A2\u04A3\u015C\xAE\u04A3\xBB\u04A4\u04A5\u016E\xB7\u04A5\u04A6\u0152\xA9\u04A6\u04A7\u0168\xB4\u04A7\u04A8\u0150\xA8\u04A8\xBD\u04A9\u04AA\u0172\xB9\u04AA\u04AB\u014A\xA5\u04AB\u04AC\u0142\xA1\u04AC\u04AE\u0164\xB2\u04AD\u04AF\u0166\xB3\u04AE\u04AD\u04AE\u04AF\u04AF\xBF\u04B0\u04B1\u016A\xB5\u04B1\u04B2\u015C\xAE\u04B2\u04B3\u014E\xA7\u04B3\u04B4\u0164\xB2\u04B4\u04B5\u015E\xAF\u04B5\u04B6\u016A\xB5\u04B6\u04B7\u0160\xB0\u04B7\u04B8\u014A\xA5\u04B8\u04B9\u0148\xA4\u04B9\xC1\u04BA\u04BB\x07^\u04BB\u04C1\x07)\u04BC\u04BD\x07^\u04BD\u04C1\x07^\u04BE\u04BF\x07^\u04BF\u04C1\v\u04C0\u04BA\u04C0\u04BC\u04C0\u04BE\u04C1\xC3\u04C2\u04C4	\u04C3\u04C2\u04C4\u04C5\u04C5\u04CA\x07)\u04C6\u04C9\xC2a\u04C7\u04C9
\u04C8\u04C6\u04C8\u04C7\u04C9\u04CC\u04CA\u04C8\u04CA\u04CB\u04CB\u04CD\u04CC\u04CA\u04CD\u04CE\x07)\u04CE\xC5\u04CF\u04D0	\u04D0\xC7\u04D1\u04D2\x07^\u04D2\u04D3\x07w\u04D3\u04D4\u04D4\u04D5\xC6c\u04D5\u04D6\xC6c\u04D6\u04D7\xC6c\u04D7\u04D8\xC6c\u04D8\xC9\u04D9\u04DA
\u04DA\xCB\u04DB\u04DC\x07^\u04DC\u04DD
\x07\u04DD\xCD\u04DE\u04E3\xC8d\u04DF\u04E3\xCCf\u04E0\u04E3\xCAe\u04E1\u04E3\x07\v\u04E2\u04DE\u04E2\u04DF\u04E2\u04E0\u04E2\u04E1\u04E3\xCF\u04E4\u04E9\x07)\u04E5\u04E8\xCEg\u04E6\u04E8	\b\u04E7\u04E5\u04E7\u04E6\u04E8\u04EB\u04E9\u04E7\u04E9\u04EA\u04EA\u04EC\u04EB\u04E9\u04EC\u04ED\x07)\u04ED\xD1\u04EE\u04F3\x07$\u04EF\u04F2\xCEg\u04F0\u04F2		\u04F1\u04EF\u04F1\u04F0\u04F2\u04F5\u04F3\u04F1\u04F3\u04F4\u04F4\u04F6\u04F5\u04F3\u04F6\u04F7\x07$\u04F7\xD3\u04F8\u04FD\x07b\u04F9\u04FC\xCEg\u04FA\u04FC	
\u04FB\u04F9\u04FB\u04FA\u04FC\u04FF\u04FD\u04FB\u04FD\u04FE\u04FE\u0500\u04FF\u04FD\u0500\u0501\x07b\u0501\xD5\u0502\u0504
\v\u0503\u0502\u0504\u0507\u0505\u0503\u0505\u0506\u0506\u050D\u0507\u0505\u0508\u050A\x07\u0509\u0508\u0509\u050A\u050A\u050B\u050B\u050E\x07\f\u050C\u050E\x07\u050D\u0509\u050D\u050C\u050E\xD7\u050F\u0510\x07%\u0510\u0511\x07%\u0511\u0512\u0512\u0513\xD6k\u0513\xD9\u0514\u0515\x07%\u0515\u0516\xD6k\u0516\xDB\u0517\u0518\x07(\u0518\xDD\u0519\u051A\x07/\u051A\u051B\x07@\u051B\xDF\u051C\u051D\x07?\u051D\u051E\x07@\u051E\xE1\u051F\u0520\x07*\u0520\xE3\u0521\u0522\x07+\u0522\xE5\u0523\u0524\x07]\u0524\xE7\u0525\u0526\x07_\u0526\xE9\u0527\u0528\x07}\u0528\u0529\u0529\u052A\bu\u052A\xEB\u052B\u052C\x07\x7F\u052C\u052D\u052D\u052E\bv\u052E\xED\u052F\u0530\x07<\u0530\u0531\x07<\u0531\xEF\u0532\u0533\x07<\u0533\u0534\x07<\u0534\u0535\x07<\u0535\xF1\u0536\u0537\x07#\u0537\xF3\u0538\u0539\x07<\u0539\xF5`;B._serializedATNSegment3=`\u053A\u053B\x07.\u053B\xF7\u053C\u053D\x070\u053D\xF9\u053E\u053F\x07>\u053F\xFB\u0540\u0541\x07@\u0541\xFD\u0542\u0543\x07?\u0543\xFF\u0544\u0545\x07#\u0545\u0546\x07?\u0546\u0101\u0547\u0548\x07>\u0548\u0549\x07?\u0549\u0103\u054A\u054B\x07@\u054B\u054C\x07?\u054C\u0105\u054D\u054E\x07-\u054E\u0107\u054F\u0550\x07/\u0550\u0109\u0551\u0552\x07,\u0552\u010B\u0553\u0554\x07,\u0554\u0555\x07,\u0555\u010D\u0556\u0557\x071\u0557\u010F\u0558\u0559\x07~\u0559\u0111\u055A\u055B\x07=\u055B\u0113\u055C\u055D\x07#\u055D\u055E\x07\x80\u055E\u0115\u055F\u0560\x07\x80\u0560\u0117\u0561\u0562\x07'\u0562\u0119\u0563\u0564\x07A\u0564\u0565\x07A\u0565\u011B\u0566\u0567\x07A\u0567\u011D\u0568\u0569\u0140\xA0\u0569\u056A\u0140\xA0\u056A\u056B\u0140\xA0\u056B\u056C\u0140\xA0\u056C\u011F\u056D\u056E\u0140\xA0\u056E\u056F\u0140\xA0\u056F\u0121\u0570\u0575\x07]\u0571\u0574\u013E\x9F\u0572\u0574\x071\u0573\u0571\u0573\u0572\u0574\u0577\u0575\u0573\u0575\u0576\u0576\u0578\u0577\u0575\u0578\u0579\x07_\u0579\u0123\u057A\u057B\x07/\u057B\u057E\x07Z\u057C\u057F\u013E\x9F\u057D\u057F\u0140\xA0\u057E\u057C\u057E\u057D\u057F\u0580\u0580\u057E\u0580\u0581\u0581\u0125\u0582\u0583\x07B\u0583\u0584\u011E\x8F\u0584\u0585\x07/\u0585\u0586\u0120\x90\u0586\u0587\x07/\u0587\u0588\u0120\x90\u0588\u0589	\f\u0589\u058A\u0120\x90\u058A\u058B\x07<\u058B\u0596\u0120\x90\u058C\u058D\x07<\u058D\u0594\u0120\x90\u058E\u0590	\r\u058F\u0591\u0140\xA0\u0590\u058F\u0591\u0592\u0592\u0590\u0592\u0593\u0593\u0595\u0594\u058E\u0594\u0595\u0595\u0597\u0596\u058C\u0596\u0597\u0597\u0599\u0598\u059A\u0122\x91\u0599\u0598\u0599\u059A\u059A\u0127\u059B\u059C\x07B\u059C\u059D\u011E\x8F\u059D\u059E\x07/\u059E\u059F\u0120\x90\u059F\u05A0\x07/\u05A0\u05A1\u0120\x90\u05A1\u05A2	\f\u05A2\u05A3\u0120\x90\u05A3\u0129\u05A4\u05A5\x07B\u05A5\u05A6\u011E\x8F\u05A6\u05A7\x07/\u05A7\u05A8\u0120\x90\u05A8\u05A9\x07/\u05A9\u05AA\u0120\x90\u05AA\u012B\u05AB\u05AC\x07B\u05AC\u05AD\u011E\x8F\u05AD\u05AE\x07/\u05AE\u05AF\x07S\u05AF\u05B036\u05B0\u012D\u05B1\u05B2\x07B\u05B2\u05B3\u011E\x8F\u05B3\u05B4\x07/\u05B4\u05B5\u0120\x90\u05B5\u012F\u05B6\u05B7\x07B\u05B7\u05B8\u011E\x8F\u05B8\u05B9\x07/\u05B9\u05BA\u0120\x90\u05BA\u05BB\x07/\u05BB\u05BC\u0120\x90\u05BC\u05BD\x07/\u05BD\u05BE\u016E\xB7\u05BE\u05BF\u0156\xAB\u05BF\u0131\u05C0\u05C1\x07B\u05C1\u05C2\u011E\x8F\u05C2\u0133\u05C3\u05C8\u013E\x9F\u05C4\u05C7\u013E\x9F\u05C5\u05C7\u0140\xA0\u05C6\u05C4\u05C6\u05C5\u05C7\u05CA\u05C8\u05C6\u05C8\u05C9\u05C9\u0135\u05CA\u05C8\u05CB\u05CD\u0140\xA0\u05CC\u05CB\u05CD\u05CE\u05CE\u05CC\u05CE\u05CF\u05CF\u05D0\u05D0\u05D1\x07'\u05D1\u0137\u05D2\u05D4	\u05D3\u05D5	\u05D4\u05D3\u05D4\u05D5\u05D5\u05D7\u05D6\u05D8\u0140\xA0\u05D7\u05D6\u05D8\u05D9\u05D9\u05D7\u05D9\u05DA\u05DA\u0139\u05DB\u05DD\u013C\x9E\u05DC\u05DB\u05DC\u05DD\u05DD\u05DE\u05DE\u05E0\xF8|\u05DF\u05E1\u0140\xA0\u05E0\u05DF\u05E1\u05E2\u05E2\u05E0\u05E2\u05E3\u05E3\u05E5\u05E4\u05E6\u0138\x9C\u05E5\u05E4\u05E5\u05E6\u05E6\u05EB\u05E7\u05E8\u013C\x9E\u05E8\u05E9\u0138\x9C\u05E9\u05EB\u05EA\u05DC\u05EA\u05E7\u05EB\u013B\u05EC\u05EE\u0108\x84\u05ED\u05EC\u05ED\u05EE\u05EE\u05F0\u05EF\u05F1\u0140\xA0\u05F0\u05EF\u05F1\u05F2\u05F2\u05F0\u05F2\u05F3\u05F3\u013D\u05F4\u05F5	-\u05F5\u013F\u05F6\u05F7	\u05F7\u0141\u05F8\u05F9	\u05F9\u0143\u05FA\u05FB	\u05FB\u0145\u05FC\u05FD	\u05FD\u0147\u05FE\u05FF	\u05FF\u0149\u0600\u0601	\u0601\u014B\u0602\u0603	\u0603\u014D\u0604\u0605	\u0605\u014F\u0606\u0607	\u0607\u0151\u0608\u0609	\u0609\u0153\u060A\u060B	\u060B\u0155\u060C\u060D	\u060D\u0157\u060E\u060F	\x1B\u060F\u0159\u0610\u0611	\u0611\u015B\u0612\u0613	\u0613\u015D\u0614\u0615	\u0615\u015F\u0616\u0617	\u0617\u0161\u0618\u0619	 \u0619\u0163\u061A\u061B	!\u061B\u0165\u061C\u061D	"\u061D\u0167\u061E\u061F	#\u061F\u0169\u0620\u0621	$\u0621\u016B\u0622\u0623	%\u0623\u016D\u0624\u0625	&\u0625\u016F\u0626\u0627	'\u0627\u0171\u0628\u0629	(\u0629\u0173\u062A\u062B	)\u062B\u0175\u062C\u062D\x071\u062D\u062E\x07,\u062E\u0632\u062F\u0631\v\u0630\u062F\u0631\u0634\u0632\u0633\u0632\u0630\u0633\u0635\u0634\u0632\u0635\u0636\x07,\u0636\u0637\x071\u0637\u0638\u0638\u0639\b\xBB\u0639\u0177\u063A\u063B\x07/\u063B\u063F\x07/\u063C\u063D\x071\u063D\u063F\x071\u063E\u063A\u063E\u063C\u063F\u0640\u0640\u0641\xD6k\u0641\u0642\u0642\u0643\b\xBC\u0643\u0179\u0644\u0645\u0645\u0646\u0646\u0647\b\xBD\u0647\u017B\u0648\u0649\x07$\u0649\u064A\x07$\u064A\u064B\x07$\u064B\u064C\u064C\u064D\b\xBE\u064D\u017D\u064E\u064F\x07\x7F\u064F\u0650\x07'\u0650\u0651\u0651\u0652\b\xBF\u0652\u017F\u0653\u0655\u0140\xA0\u0654\u0653\u0655\u0656\u0656\u0654\u0656\u0657\u0657\u0659\u0658\u065A\u013E\x9F\u0659\u0658\u065A\u065B\u065B\u0659\u065B\u065C\u065C\u0661\u065D\u0660\u013E\x9F\u065E\u0660\u0140\xA0\u065F\u065D\u065F\u065E\u0660\u0663\u0661\u065F\u0661\u0662\u0662\u0181\u0663\u0661\u0664\u0665\v\u0665\u0183\u0666\u0667\x07^\u0667\u0672\v\u0668\u0672
*\u0669\u066A\x07$\u066A\u0672
+\u066B\u066C\x07$\u066C\u066D\x07$\u066D\u066E\u066E\u0672
+\u066F\u0670\x07'\u0670\u0672
,\u0671\u0666\u0671\u0668\u0671\u0669\u0671\u066B\u0671\u066F\u0672\u0185\u0673\u0675\u0184\xC2\u0674\u0673\u0675\u0678\u0676\u0677\u0676\u0674\u0677\u0679\u0678\u0676\u0679\u067A\x07'\u067A\u067B\x07}\u067B\u067C\u067C\u067D\b\xC3\u067D\u0187\u067E\u0680\u0184\xC2\u067F\u067E\u0680\u0683\u0681\u0682\u0681\u067F\u0682\u0684\u0683\u0681\u0684\u0685\x07$\u0685\u0686\x07$\u0686\u0687\x07$\u0687\u0688\u0688\u0689\b\xC4\u0689\u0189T\u0195\u01A6\u01B7\u01CA\u01DC\u01F6\u0204\u0212\u0222\u0230\u023D\u0259\u026A\u0277\u0286\u0292\u02A2\u02B5\u02C4\u02D1\u02DF\u02EA\u02F8\u0306\u0314\u031F\u032A\u0337\u0343\u0353\u0399\u03E7\u0417\u041F\u0448\u0457\u049D\u04AE\u04C0\u04C3\u04C8\u04CA\u04E2\u04E7\u04E9\u04F1\u04F3\u04FB\u04FD\u0505\u0509\u050D\u0573\u0575\u057E\u0580\u0592\u0594\u0596\u0599\u05C6\u05C8\u05CE\u05D4\u05D9\u05DC\u05E2\u05E5\u05EA\u05ED\u05F2\u0632\u063E\u0656\u065B\u065F\u0661\u0671\u0676\u0681\x07\x07\b\x07`;B._serializedATN=Fme.join([B._serializedATNSegment0,B._serializedATNSegment1,B._serializedATNSegment2,B._serializedATNSegment3],"")});var T9=v(C=>{"use strict";var KKe=C&&C.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),XKe=C&&C.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),JKe=C&&C.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&KKe(e,t,r);return XKe(e,t),e};Object.defineProperty(C,"__esModule",{value:!0});C.DefExploreEditFieldContext=C.DefExploreRenameContext=C.DefExplorePrimaryKeyContext=C.DefExploreWhere_stubContext=C.DefJoin_stubContext=C.DefDeclare_stubContext=C.DefExploreMeasure_stubContext=C.DefExploreDimension_stubContext=C.ExploreStatementContext=C.ExplorePropertiesContext=C.SourceIDContext=C.SourceNameDefContext=C.SqExploreContext=C.SourceDefinitionContext=C.SourcePropertyListContext=C.QueryNameContext=C.FilterShortcutContext=C.QueryPropertiesContext=C.ConnectionIdContext=C.TableMethodContext=C.TableFunctionContext=C.ExploreTableContext=C.SqlSourceContext=C.TurtleNameContext=C.RefineOperatorContext=C.TopLevelQueryDefContext=C.TopLevelQueryDefsContext=C.IgnoredModelAnnotationsContext=C.IgnoredObjectAnnotationsContext=C.DocAnnotationsContext=C.ImportURLContext=C.ImportItemContext=C.ImportSelectContext=C.ImportStatementContext=C.SqlInterpolationContext=C.SqlStringContext=C.BlockSQLDefContext=C.SqlBlockContext=C.DefineSQLStatementContext=C.RunStatementContext=C.IsDefineContext=C.TagsContext=C.TopLevelAnonQueryDefContext=C.AnonymousQueryContext=C.Use_top_level_query_defsContext=C.DefineQueryContext=C.DefineSourceStatementContext=C.MalloyStatementContext=C.MalloyDocumentContext=C.MalloyParser=void 0;C.WhereStatementContext=C.FilterClauseListContext=C.FilterByWhereContext=C.FilterByShortcutContext=C.FilteredByContext=C.FilterStatementContext=C.JoinExpressionContext=C.JoinOnContext=C.JoinWithContext=C.JoinDefContext=C.MatrixOperationContext=C.IsExploreContext=C.JoinListContext=C.QueryExtendStatementListContext=C.QueryExtendStatementContext=C.VArrowContext=C.VSegContext=C.VExprContext=C.SegRefineContext=C.SegParenContext=C.SegOpsContext=C.SegFieldContext=C.SegExprContext=C.SQSQLContext=C.SQTableContext=C.SQExtendedSourceContext=C.SQArrowContext=C.SQRefinedQueryContext=C.SQParensContext=C.SQIDContext=C.SqExprContext=C.ModEitherContext=C.QueryExtendContext=C.DefJoinCrossContext=C.DefJoinManyContext=C.DefJoinOneContext=C.JoinStatementContext=C.DeclareStatementContext=C.JoinNameDefContext=C.FieldNameDefContext=C.FieldDefContext=C.DefListContext=C.ExploreRenameDefContext=C.RenameListContext=C.DefDimensionsContext=C.DefMeasuresContext=C.DefIgnoreModel_stubContext=C.DefExploreAnnotationContext=C.DefExploreTimezoneContext=C.DefExploreQueryContext=void 0;C.LiteralMonthContext=C.LiteralWeekContext=C.LiteralDayContext=C.LiteralHourContext=C.LiteralTimestampContext=C.DateLiteralContext=C.ExprNowContext=C.ExprRegexContext=C.ExprBoolContext=C.ExprNULLContext=C.ExprTimeContext=C.ExprNumberContext=C.ExprStringContext=C.LiteralContext=C.NumericLiteralContext=C.ShortStringContext=C.StringContext=C.CompareOpContext=C.MalloyTypeContext=C.AggregateContext=C.SampleSpecContext=C.QueryAnnotationContext=C.TimezoneStatementContext=C.SampleStatementContext=C.IndexStatementContext=C.IndexFieldsContext=C.IndexElementContext=C.TopStatementContext=C.BySpecContext=C.LimitStatementContext=C.OrderBySpecContext=C.OrderingContext=C.OrderByStatementContext=C.ProjectStatementContext=C.CalculateStatementContext=C.AggregateStatementContext=C.NestDefContext=C.NestExistingContext=C.NestEntryContext=C.NestedQueryListContext=C.NestStatementContext=C.QueryFieldEntryContext=C.QueryFieldListContext=C.GroupByStatementContext=C.QueryJoinStatementContext=C.QueryStatementContext=C.ExploreQueryDefContext=C.ExploreQueryNameDefContext=C.SubQueryDefListContext=C.HavingStatementContext=void 0;C.JoinNameContext=C.FieldPathContext=C.CollectionMemberContext=C.RefExprContext=C.TaggedRefContext=C.StarQualifiedContext=C.CollectionWildCardContext=C.FieldCollectionContext=C.FieldNameListContext=C.ArgumentListContext=C.PickContext=C.PickStatementContext=C.PartialAllowedFieldExprContext=C.ExprUngroupContext=C.ExprPickContext=C.ExprFuncContext=C.ExprAggFuncContext=C.ExprExprContext=C.ExprAggregateContext=C.ExprPathlessAggregateContext=C.ExprCountDisinctContext=C.ExprCoalesceContext=C.ExprLogicalOrContext=C.ExprLogicalAndContext=C.ExprNotContext=C.ExprApplyContext=C.ExprCompareContext=C.ExprOrTreeContext=C.ExprAndTreeContext=C.ExprForRangeContext=C.ExprRangeContext=C.ExprAddSubContext=C.ExprMulDivContext=C.ExprMinusContext=C.ExprSafeCastContext=C.ExprCastContext=C.ExprTimeTruncContext=C.ExprDurationContext=C.ExprLiteralContext=C.ExprFilterContext=C.ExprFieldPathContext=C.FieldExprContext=C.MalloyOrSQLTypeContext=C.UngroupContext=C.TimeframeContext=C.IdContext=C.TableURIContext=C.TablePathContext=C.LiteralYearContext=C.LiteralQuarterContext=void 0;C.ExperimentalStatementForTestingContext=C.ConnectionNameContext=C.NameSQLBlockContext=C.SqlExploreNameRefContext=C.JustExprContext=C.FieldNameContext=void 0;var Wr=Iu(),ZKe=vm(),eXe=Cy(),Yr=NE(),tXe=mm(),ee=Qa(),rXe=ym(),Z=ic(),_i=gr(),nXe=Bl(),Lme=JKe(ka()),E=class t extends tXe.Parser{get vocabulary(){return t.VOCABULARY}get grammarFileName(){return"MalloyParser.g4"}get ruleNames(){return t.ruleNames}get serializedATN(){return t._serializedATN}createFailedPredicateException(e,r){return new eXe.FailedPredicateException(this,e,r)}constructor(e){super(e),this._interp=new rXe.ParserATNSimulator(t._ATN,this)}malloyDocument(){let e=new G7(this._ctx,this.state);this.enterRule(e,0,t.RULE_malloyDocument);let r;try{this.enterOuterAlt(e,1);{for(this.state=254,this._errHandler.sync(this),r=this._input.LA(1);!(r&-32)&&1<<r&(1<<t.AGGREGATE|1<<t.CALCULATE|1<<t.DIMENSION|1<<t.GROUP_BY|1<<t.JOIN_CROSS|1<<t.JOIN_ONE|1<<t.JOIN_MANY|1<<t.MEASURE|1<<t.NEST|1<<t.PROJECT|1<<t.QUERY|1<<t.RUN|1<<t.SELECT|1<<t.SOURCE|1<<t.SQLC|1<<t.VIEW)||!(r-33&-32)&&1<<r-33&(1<<t.ALL-33|1<<t.AVG-33|1<<t.CAST-33|1<<t.COUNT-33|1<<t.DAY-33|1<<t.EXCLUDE-33|1<<t.FALSE-33|1<<t.HOUR-33|1<<t.IMPORT-33|1<<t.IS-33)||!(r-65&-32)&&1<<r-65&(1<<t.MAX-65|1<<t.MIN-65|1<<t.MINUTE-65|1<<t.MONTH-65|1<<t.NOT-65|1<<t.NOW-65|1<<t.NULL-65|1<<t.PICK-65|1<<t.QUARTER-65|1<<t.SECOND-65|1<<t.SOURCE_KW-65|1<<t.SUM-65|1<<t.TABLE-65|1<<t.TRUE-65|1<<t.WEEK-65|1<<t.YEAR-65|1<<t.HACKY_REGEX-65)||!(r-97&-32)&&1<<r-97&(1<<t.SQ_STRING-97|1<<t.DQ_STRING-97|1<<t.BQ_STRING-97|1<<t.DOC_ANNOTATION-97|1<<t.ANNOTATION-97|1<<t.OPAREN-97|1<<t.OCURLY-97|1<<t.MINUS-97)||!(r-129&-32)&&1<<r-129&(1<<t.SEMI-129|1<<t.LITERAL_TIMESTAMP-129|1<<t.LITERAL_HOUR-129|1<<t.LITERAL_DAY-129|1<<t.LITERAL_QUARTER-129|1<<t.LITERAL_MONTH-129|1<<t.LITERAL_WEEK-129|1<<t.LITERAL_YEAR-129|1<<t.IDENTIFIER-129|1<<t.NUMERIC_LITERAL-129|1<<t.INTEGER_LITERAL-129|1<<t.SQL_BEGIN-129);){switch(this.state=252,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,0,this._ctx)){case 1:this.state=250,this.malloyStatement();break;case 2:this.state=251,this.match(t.SEMI);break}this.state=256,this._errHandler.sync(this),r=this._input.LA(1)}this.state=257,this.match(t.EOF)}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}malloyStatement(){let e=new mA(this._ctx,this.state);this.enterRule(e,2,t.RULE_malloyStatement);try{switch(this.state=267,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,2,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=259,this.defineSourceStatement();break;case 2:this.enterOuterAlt(e,2),this.state=260,this.defineSQLStatement();break;case 3:this.enterOuterAlt(e,3),this.state=261,this.defineQuery();break;case 4:this.enterOuterAlt(e,4),this.state=262,this.importStatement();break;case 5:this.enterOuterAlt(e,5),this.state=263,this.runStatement();break;case 6:this.enterOuterAlt(e,6),this.state=264,this.docAnnotations();break;case 7:this.enterOuterAlt(e,7),this.state=265,this.ignoredObjectAnnotations();break;case 8:this.enterOuterAlt(e,8),this.state=266,this.experimentalStatementForTesting();break}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}defineSourceStatement(){let e=new yb(this._ctx,this.state);this.enterRule(e,4,t.RULE_defineSourceStatement);try{this.enterOuterAlt(e,1),this.state=269,this.tags(),this.state=270,this.match(t.SOURCE),this.state=271,this.sourcePropertyList()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}defineQuery(){let e=new Nm(this._ctx,this.state);this.enterRule(e,6,t.RULE_defineQuery);try{switch(this.state=278,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,3,this._ctx)){case 1:e=new Q7(e),this.enterOuterAlt(e,1),this.state=273,this.topLevelQueryDefs();break;case 2:e=new V7(e),this.enterOuterAlt(e,2),this.state=274,this.tags(),this.state=275,this.match(t.QUERY),this.state=276,this.topLevelAnonQueryDef();break}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}topLevelAnonQueryDef(){let e=new gA(this._ctx,this.state);this.enterRule(e,8,t.RULE_topLevelAnonQueryDef);try{this.enterOuterAlt(e,1),this.state=280,this.tags(),this.state=281,this.sqExpr(0)}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}tags(){let e=new Xt(this._ctx,this.state);this.enterRule(e,10,t.RULE_tags);let r;try{for(this.enterOuterAlt(e,1),this.state=286,this._errHandler.sync(this),r=this._input.LA(1);r===t.ANNOTATION;)this.state=283,this.match(t.ANNOTATION),this.state=288,this._errHandler.sync(this),r=this._input.LA(1)}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}isDefine(){let e=new Hl(this._ctx,this.state);this.enterRule(e,12,t.RULE_isDefine);try{this.enterOuterAlt(e,1),this.state=289,e._beforeIs=this.tags(),this.state=290,this.match(t.IS),this.state=291,e._afterIs=this.tags()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}runStatement(){let e=new Eb(this._ctx,this.state);this.enterRule(e,14,t.RULE_runStatement);try{this.enterOuterAlt(e,1),this.state=293,this.tags(),this.state=294,this.match(t.RUN),this.state=295,this.topLevelAnonQueryDef()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}defineSQLStatement(){let e=new Ab(this._ctx,this.state);this.enterRule(e,16,t.RULE_defineSQLStatement);try{this.enterOuterAlt(e,1),this.state=297,this.match(t.SQLC),this.state=298,this.nameSQLBlock(),this.state=299,this.isDefine(),this.state=300,this.sqlBlock()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}sqlBlock(){let e=new Sb(this._ctx,this.state);this.enterRule(e,18,t.RULE_sqlBlock);let r;try{this.enterOuterAlt(e,1);{this.state=302,this.match(t.OCURLY),this.state=304,this._errHandler.sync(this),r=this._input.LA(1);do this.state=303,this.blockSQLDef(),this.state=306,this._errHandler.sync(this),r=this._input.LA(1);while(r===t.CONNECTION||r===t.SELECT);this.state=308,this.match(t.CCURLY)}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}blockSQLDef(){let e=new yA(this._ctx,this.state);this.enterRule(e,20,t.RULE_blockSQLDef);try{switch(this.state=314,this._errHandler.sync(this),this._input.LA(1)){case t.CONNECTION:this.enterOuterAlt(e,1),this.state=310,this.match(t.CONNECTION),this.state=311,this.connectionName();break;case t.SELECT:this.enterOuterAlt(e,2),this.state=312,this.match(t.SELECT),this.state=313,this.sqlString();break;default:throw new Yr.NoViableAltException(this)}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}sqlString(){let e=new Fm(this._ctx,this.state);this.enterRule(e,22,t.RULE_sqlString);let r;try{this.enterOuterAlt(e,1);{for(this.state=316,this.match(t.SQL_BEGIN),this.state=320,this._errHandler.sync(this),r=this._input.LA(1);r===t.OPEN_CODE;)this.state=317,this.sqlInterpolation(),this.state=322,this._errHandler.sync(this),r=this._input.LA(1);this.state=323,this.match(t.SQL_END)}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}sqlInterpolation(){let e=new EA(this._ctx,this.state);this.enterRule(e,24,t.RULE_sqlInterpolation);let r;try{this.enterOuterAlt(e,1),this.state=325,this.match(t.OPEN_CODE),this.state=326,this.sqExpr(0),this.state=327,r=this._input.LA(1),r===t.CCURLY||r===t.CLOSE_CODE?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}importStatement(){let e=new vb(this._ctx,this.state);this.enterRule(e,26,t.RULE_importStatement);let r;try{this.enterOuterAlt(e,1),this.state=329,this.match(t.IMPORT),this.state=331,this._errHandler.sync(this),r=this._input.LA(1),r===t.OCURLY&&(this.state=330,this.importSelect()),this.state=333,this.importURL()}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}importSelect(){let e=new _b(this._ctx,this.state);this.enterRule(e,28,t.RULE_importSelect);let r;try{this.enterOuterAlt(e,1);{for(this.state=335,this.match(t.OCURLY),this.state=336,this.importItem(),this.state=341,this._errHandler.sync(this),r=this._input.LA(1);r===t.COMMA;)this.state=337,this.match(t.COMMA),this.state=338,this.importItem(),this.state=343,this._errHandler.sync(this),r=this._input.LA(1);this.state=344,this.match(t.CCURLY),this.state=345,this.match(t.FROM)}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}importItem(){let e=new AA(this._ctx,this.state);this.enterRule(e,30,t.RULE_importItem);let r;try{this.enterOuterAlt(e,1),this.state=347,this.id(),this.state=350,this._errHandler.sync(this),r=this._input.LA(1),r===t.IS&&(this.state=348,this.match(t.IS),this.state=349,this.id())}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}importURL(){let e=new bb(this._ctx,this.state);this.enterRule(e,32,t.RULE_importURL);try{this.enterOuterAlt(e,1),this.state=352,this.string()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}docAnnotations(){let e=new Tb(this._ctx,this.state);this.enterRule(e,34,t.RULE_docAnnotations);try{let r;this.enterOuterAlt(e,1);{this.state=355,this._errHandler.sync(this),r=1;do{switch(r){case 1:this.state=354,this.match(t.DOC_ANNOTATION);break;default:throw new Yr.NoViableAltException(this)}this.state=357,this._errHandler.sync(this),r=this.interpreter.adaptivePredict(this._input,11,this._ctx)}while(r!==2&&r!==Wr.ATN.INVALID_ALT_NUMBER)}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}ignoredObjectAnnotations(){let e=new Cb(this._ctx,this.state);this.enterRule(e,36,t.RULE_ignoredObjectAnnotations);try{let r;this.enterOuterAlt(e,1);{this.state=360,this._errHandler.sync(this),r=1;do{switch(r){case 1:this.state=359,this.match(t.ANNOTATION);break;default:throw new Yr.NoViableAltException(this)}this.state=362,this._errHandler.sync(this),r=this.interpreter.adaptivePredict(this._input,12,this._ctx)}while(r!==2&&r!==Wr.ATN.INVALID_ALT_NUMBER)}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}ignoredModelAnnotations(){let e=new SA(this._ctx,this.state);this.enterRule(e,38,t.RULE_ignoredModelAnnotations);try{let r;this.enterOuterAlt(e,1);{this.state=365,this._errHandler.sync(this),r=1;do{switch(r){case 1:this.state=364,this.match(t.DOC_ANNOTATION);break;default:throw new Yr.NoViableAltException(this)}this.state=367,this._errHandler.sync(this),r=this.interpreter.adaptivePredict(this._input,13,this._ctx)}while(r!==2&&r!==Wr.ATN.INVALID_ALT_NUMBER)}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}topLevelQueryDefs(){let e=new Rb(this._ctx,this.state);this.enterRule(e,40,t.RULE_topLevelQueryDefs);let r;try{let n;this.enterOuterAlt(e,1);{for(this.state=369,this.tags(),this.state=370,this.match(t.QUERY),this.state=371,this.topLevelQueryDef(),this.state=378,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,15,this._ctx);n!==2&&n!==Wr.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=373,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=372,this.match(t.COMMA)),this.state=375,this.topLevelQueryDef()),this.state=380,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,15,this._ctx);this.state=382,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=381,this.match(t.COMMA))}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}topLevelQueryDef(){let e=new vA(this._ctx,this.state);this.enterRule(e,42,t.RULE_topLevelQueryDef);try{this.enterOuterAlt(e,1),this.state=384,this.tags(),this.state=385,this.queryName(),this.state=386,this.isDefine(),this.state=387,this.sqExpr(0)}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}refineOperator(){let e=new W7(this._ctx,this.state);this.enterRule(e,44,t.RULE_refineOperator);try{this.enterOuterAlt(e,1),this.state=389,this.match(t.PLUS)}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}turtleName(){let e=new Y7(this._ctx,this.state);this.enterRule(e,46,t.RULE_turtleName);try{this.enterOuterAlt(e,1),this.state=391,this.id()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}sqlSource(){let e=new Ob(this._ctx,this.state);this.enterRule(e,48,t.RULE_sqlSource);try{this.enterOuterAlt(e,1);{switch(this.state=393,this.connectionId(),this.state=394,this.match(t.DOT),this.state=395,this.match(t.SQL),this.state=396,this.match(t.OPAREN),this.state=399,this._errHandler.sync(this),this._input.LA(1)){case t.SQL_BEGIN:this.state=397,this.sqlString();break;case t.SQ_STRING:case t.DQ_STRING:this.state=398,this.shortString();break;default:throw new Yr.NoViableAltException(this)}this.state=401,this.match(t.CPAREN)}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}exploreTable(){let e=new wm(this._ctx,this.state);this.enterRule(e,50,t.RULE_exploreTable);try{switch(this.state=415,this._errHandler.sync(this),this._input.LA(1)){case t.TABLE:e=new K7(e),this.enterOuterAlt(e,1),this.state=403,this.match(t.TABLE),this.state=404,this.match(t.OPAREN),this.state=405,this.tableURI(),this.state=406,this.match(t.CPAREN);break;case t.BQ_STRING:case t.IDENTIFIER:e=new X7(e),this.enterOuterAlt(e,2),this.state=408,this.connectionId(),this.state=409,this.match(t.DOT),this.state=410,this.match(t.TABLE),this.state=411,this.match(t.OPAREN),this.state=412,this.tablePath(),this.state=413,this.match(t.CPAREN);break;default:throw new Yr.NoViableAltException(this)}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}connectionId(){let e=new _A(this._ctx,this.state);this.enterRule(e,52,t.RULE_connectionId);try{this.enterOuterAlt(e,1),this.state=417,this.id()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}queryProperties(){let e=new Db(this._ctx,this.state);this.enterRule(e,54,t.RULE_queryProperties);let r;try{switch(this.state=429,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,21,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=419,this.filterShortcut();break;case 2:this.enterOuterAlt(e,2);{for(this.state=420,this.match(t.OCURLY),this.state=425,this._errHandler.sync(this),r=this._input.LA(1);!(r&-32)&&1<<r&(1<<t.AGGREGATE|1<<t.CALCULATE|1<<t.DECLARE|1<<t.DIMENSION|1<<t.EXTENDQ|1<<t.GROUP_BY|1<<t.HAVING|1<<t.INDEX|1<<t.JOIN_CROSS|1<<t.JOIN_ONE|1<<t.JOIN_MANY|1<<t.LIMIT|1<<t.MEASURE|1<<t.NEST|1<<t.ORDER_BY|1<<t.PROJECT|1<<t.QUERY|1<<t.RUN|1<<t.SAMPLE|1<<t.SELECT|1<<t.SOURCE|1<<t.TOP|1<<t.WHERE|1<<t.VIEW)||!(r-32&-32)&&1<<r-32&(1<<t.TIMEZONE-32|1<<t.ALL-32|1<<t.AVG-32|1<<t.CAST-32|1<<t.COUNT-32|1<<t.DAY-32|1<<t.EXCLUDE-32|1<<t.FALSE-32|1<<t.HOUR-32|1<<t.IS-32)||!(r-65&-32)&&1<<r-65&(1<<t.MAX-65|1<<t.MIN-65|1<<t.MINUTE-65|1<<t.MONTH-65|1<<t.NOT-65|1<<t.NOW-65|1<<t.NULL-65|1<<t.PICK-65|1<<t.QUARTER-65|1<<t.SECOND-65|1<<t.SOURCE_KW-65|1<<t.SUM-65|1<<t.TABLE-65|1<<t.TRUE-65|1<<t.WEEK-65|1<<t.YEAR-65|1<<t.HACKY_REGEX-65)||!(r-97&-32)&&1<<r-97&(1<<t.SQ_STRING-97|1<<t.DQ_STRING-97|1<<t.BQ_STRING-97|1<<t.DOC_ANNOTATION-97|1<<t.ANNOTATION-97|1<<t.OPAREN-97|1<<t.OCURLY-97|1<<t.MINUS-97)||!(r-129&-32)&&1<<r-129&(1<<t.SEMI-129|1<<t.LITERAL_TIMESTAMP-129|1<<t.LITERAL_HOUR-129|1<<t.LITERAL_DAY-129|1<<t.LITERAL_QUARTER-129|1<<t.LITERAL_MONTH-129|1<<t.LITERAL_WEEK-129|1<<t.LITERAL_YEAR-129|1<<t.IDENTIFIER-129|1<<t.NUMERIC_LITERAL-129|1<<t.INTEGER_LITERAL-129|1<<t.SQL_BEGIN-129);){switch(this.state=423,this._errHandler.sync(this),this._input.LA(1)){case t.AGGREGATE:case t.CALCULATE:case t.DECLARE:case t.DIMENSION:case t.EXTENDQ:case t.GROUP_BY:case t.HAVING:case t.INDEX:case t.JOIN_CROSS:case t.JOIN_ONE:case t.JOIN_MANY:case t.LIMIT:case t.MEASURE:case t.NEST:case t.ORDER_BY:case t.PROJECT:case t.QUERY:case t.RUN:case t.SAMPLE:case t.SELECT:case t.SOURCE:case t.TOP:case t.WHERE:case t.VIEW:case t.TIMEZONE:case t.ALL:case t.AVG:case t.CAST:case t.COUNT:case t.DAY:case t.EXCLUDE:case t.FALSE:case t.HOUR:case t.IS:case t.MAX:case t.MIN:case t.MINUTE:case t.MONTH:case t.NOT:case t.NOW:case t.NULL:case t.PICK:case t.QUARTER:case t.SECOND:case t.SOURCE_KW:case t.SUM:case t.TABLE:case t.TRUE:case t.WEEK:case t.YEAR:case t.HACKY_REGEX:case t.SQ_STRING:case t.DQ_STRING:case t.BQ_STRING:case t.DOC_ANNOTATION:case t.ANNOTATION:case t.OPAREN:case t.OCURLY:case t.MINUS:case t.LITERAL_TIMESTAMP:case t.LITERAL_HOUR:case t.LITERAL_DAY:case t.LITERAL_QUARTER:case t.LITERAL_MONTH:case t.LITERAL_WEEK:case t.LITERAL_YEAR:case t.IDENTIFIER:case t.NUMERIC_LITERAL:case t.INTEGER_LITERAL:case t.SQL_BEGIN:this.state=421,this.queryStatement();break;case t.SEMI:this.state=422,this.match(t.SEMI);break;default:throw new Yr.NoViableAltException(this)}this.state=427,this._errHandler.sync(this),r=this._input.LA(1)}this.state=428,this.match(t.CCURLY)}break}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}filterShortcut(){let e=new bA(this._ctx,this.state);this.enterRule(e,56,t.RULE_filterShortcut);try{this.enterOuterAlt(e,1),this.state=431,this.match(t.OCURLY),this.state=432,this.match(t.QMARK),this.state=433,this.fieldExpr(0),this.state=434,this.match(t.CCURLY)}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}queryName(){let e=new TA(this._ctx,this.state);this.enterRule(e,58,t.RULE_queryName);try{this.enterOuterAlt(e,1),this.state=436,this.id()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}sourcePropertyList(){let e=new Nb(this._ctx,this.state);this.enterRule(e,60,t.RULE_sourcePropertyList);let r;try{let n;this.enterOuterAlt(e,1);{for(this.state=438,this.sourceDefinition(),this.state=445,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,23,this._ctx);n!==2&&n!==Wr.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=440,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=439,this.match(t.COMMA)),this.state=442,this.sourceDefinition()),this.state=447,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,23,this._ctx);this.state=449,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=448,this.match(t.COMMA))}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}sourceDefinition(){let e=new CA(this._ctx,this.state);this.enterRule(e,62,t.RULE_sourceDefinition);try{this.enterOuterAlt(e,1),this.state=451,this.tags(),this.state=452,this.sourceNameDef(),this.state=453,this.isDefine(),this.state=454,this.sqExplore()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}sqExplore(){let e=new Fb(this._ctx,this.state);this.enterRule(e,64,t.RULE_sqExplore);try{this.enterOuterAlt(e,1),this.state=456,this.sqExpr(0)}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}sourceNameDef(){let e=new wb(this._ctx,this.state);this.enterRule(e,66,t.RULE_sourceNameDef);try{this.enterOuterAlt(e,1),this.state=458,this.id()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}sourceID(){let e=new J7(this._ctx,this.state);this.enterRule(e,68,t.RULE_sourceID);try{this.enterOuterAlt(e,1),this.state=460,this.id()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}exploreProperties(){let e=new Lb(this._ctx,this.state);this.enterRule(e,70,t.RULE_exploreProperties);let r;try{switch(this.state=472,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,27,this._ctx)){case 1:this.enterOuterAlt(e,1);{for(this.state=462,this.match(t.OCURLY),this.state=467,this._errHandler.sync(this),r=this._input.LA(1);!(r&-32)&&1<<r&(1<<t.ACCEPT|1<<t.AGGREGATE|1<<t.CALCULATE|1<<t.DECLARE|1<<t.DIMENSION|1<<t.EXCEPT|1<<t.GROUP_BY|1<<t.JOIN_CROSS|1<<t.JOIN_ONE|1<<t.JOIN_MANY|1<<t.MEASURE|1<<t.NEST|1<<t.PRIMARY_KEY|1<<t.PROJECT|1<<t.QUERY|1<<t.RENAME|1<<t.RUN|1<<t.SELECT|1<<t.SOURCE|1<<t.WHERE|1<<t.VIEW)||!(r-32&-32)&&1<<r-32&(1<<t.TIMEZONE-32|1<<t.ALL-32|1<<t.AVG-32|1<<t.CAST-32|1<<t.COUNT-32|1<<t.DAY-32|1<<t.EXCLUDE-32|1<<t.FALSE-32|1<<t.HOUR-32|1<<t.IS-32)||!(r-65&-32)&&1<<r-65&(1<<t.MAX-65|1<<t.MIN-65|1<<t.MINUTE-65|1<<t.MONTH-65|1<<t.NOT-65|1<<t.NOW-65|1<<t.NULL-65|1<<t.PICK-65|1<<t.QUARTER-65|1<<t.SECOND-65|1<<t.SOURCE_KW-65|1<<t.SUM-65|1<<t.TABLE-65|1<<t.TRUE-65|1<<t.WEEK-65|1<<t.YEAR-65|1<<t.HACKY_REGEX-65)||!(r-97&-32)&&1<<r-97&(1<<t.SQ_STRING-97|1<<t.DQ_STRING-97|1<<t.BQ_STRING-97|1<<t.DOC_ANNOTATION-97|1<<t.ANNOTATION-97|1<<t.OPAREN-97|1<<t.OCURLY-97|1<<t.MINUS-97)||!(r-129&-32)&&1<<r-129&(1<<t.SEMI-129|1<<t.LITERAL_TIMESTAMP-129|1<<t.LITERAL_HOUR-129|1<<t.LITERAL_DAY-129|1<<t.LITERAL_QUARTER-129|1<<t.LITERAL_MONTH-129|1<<t.LITERAL_WEEK-129|1<<t.LITERAL_YEAR-129|1<<t.IDENTIFIER-129|1<<t.NUMERIC_LITERAL-129|1<<t.INTEGER_LITERAL-129|1<<t.SQL_BEGIN-129);){switch(this.state=465,this._errHandler.sync(this),this._input.LA(1)){case t.ACCEPT:case t.AGGREGATE:case t.CALCULATE:case t.DECLARE:case t.DIMENSION:case t.EXCEPT:case t.GROUP_BY:case t.JOIN_CROSS:case t.JOIN_ONE:case t.JOIN_MANY:case t.MEASURE:case t.NEST:case t.PRIMARY_KEY:case t.PROJECT:case t.QUERY:case t.RENAME:case t.RUN:case t.SELECT:case t.SOURCE:case t.WHERE:case t.VIEW:case t.TIMEZONE:case t.ALL:case t.AVG:case t.CAST:case t.COUNT:case t.DAY:case t.EXCLUDE:case t.FALSE:case t.HOUR:case t.IS:case t.MAX:case t.MIN:case t.MINUTE:case t.MONTH:case t.NOT:case t.NOW:case t.NULL:case t.PICK:case t.QUARTER:case t.SECOND:case t.SOURCE_KW:case t.SUM:case t.TABLE:case t.TRUE:case t.WEEK:case t.YEAR:case t.HACKY_REGEX:case t.SQ_STRING:case t.DQ_STRING:case t.BQ_STRING:case t.DOC_ANNOTATION:case t.ANNOTATION:case t.OPAREN:case t.OCURLY:case t.MINUS:case t.LITERAL_TIMESTAMP:case t.LITERAL_HOUR:case t.LITERAL_DAY:case t.LITERAL_QUARTER:case t.LITERAL_MONTH:case t.LITERAL_WEEK:case t.LITERAL_YEAR:case t.IDENTIFIER:case t.NUMERIC_LITERAL:case t.INTEGER_LITERAL:case t.SQL_BEGIN:this.state=463,this.exploreStatement();break;case t.SEMI:this.state=464,this.match(t.SEMI);break;default:throw new Yr.NoViableAltException(this)}this.state=469,this._errHandler.sync(this),r=this._input.LA(1)}this.state=470,this.match(t.CCURLY)}break;case 2:this.enterOuterAlt(e,2),this.state=471,this.filterShortcut();break}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}exploreStatement(){let e=new bi(this._ctx,this.state);this.enterRule(e,72,t.RULE_exploreStatement);let r;try{let n;switch(this.state=496,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,29,this._ctx)){case 1:e=new Z7(e),this.enterOuterAlt(e,1),this.state=474,this.defDimensions();break;case 2:e=new e8(e),this.enterOuterAlt(e,2),this.state=475,this.defMeasures();break;case 3:e=new t8(e),this.enterOuterAlt(e,3),this.state=476,this.declareStatement();break;case 4:e=new r8(e),this.enterOuterAlt(e,4),this.state=477,this.joinStatement();break;case 5:e=new n8(e),this.enterOuterAlt(e,5),this.state=478,this.whereStatement();break;case 6:e=new i8(e),this.enterOuterAlt(e,6),this.state=479,this.match(t.PRIMARY_KEY),this.state=480,this.fieldName();break;case 7:e=new s8(e),this.enterOuterAlt(e,7),this.state=481,this.match(t.RENAME),this.state=482,this.renameList();break;case 8:e=new o8(e),this.enterOuterAlt(e,8),this.state=483,r=this._input.LA(1),r===t.ACCEPT||r===t.EXCEPT?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=484,this.fieldNameList();break;case 9:e=new a8(e),this.enterOuterAlt(e,9),this.state=485,this.tags(),this.state=486,r=this._input.LA(1),r===t.QUERY||r===t.VIEW?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=487,this.subQueryDefList();break;case 10:e=new u8(e),this.enterOuterAlt(e,10),this.state=489,this.timezoneStatement();break;case 11:e=new l8(e),this.enterOuterAlt(e,11);{this.state=491,this._errHandler.sync(this),n=1;do{switch(n){case 1:this.state=490,this.match(t.ANNOTATION);break;default:throw new Yr.NoViableAltException(this)}this.state=493,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,28,this._ctx)}while(n!==2&&n!==Wr.ATN.INVALID_ALT_NUMBER)}break;case 12:e=new c8(e),this.enterOuterAlt(e,12),this.state=495,this.ignoredModelAnnotations();break}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}defMeasures(){let e=new RA(this._ctx,this.state);this.enterRule(e,74,t.RULE_defMeasures);try{this.enterOuterAlt(e,1),this.state=498,this.tags(),this.state=499,this.match(t.MEASURE),this.state=500,this.defList()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}defDimensions(){let e=new OA(this._ctx,this.state);this.enterRule(e,76,t.RULE_defDimensions);try{this.enterOuterAlt(e,1),this.state=502,this.tags(),this.state=503,this.match(t.DIMENSION),this.state=504,this.defList()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}renameList(){let e=new Ib(this._ctx,this.state);this.enterRule(e,78,t.RULE_renameList);let r;try{let n;this.enterOuterAlt(e,1);{for(this.state=506,this.exploreRenameDef(),this.state=513,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,31,this._ctx);n!==2&&n!==Wr.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=508,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=507,this.match(t.COMMA)),this.state=510,this.exploreRenameDef()),this.state=515,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,31,this._ctx);this.state=517,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=516,this.match(t.COMMA))}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}exploreRenameDef(){let e=new DA(this._ctx,this.state);this.enterRule(e,80,t.RULE_exploreRenameDef);try{this.enterOuterAlt(e,1),this.state=519,this.fieldName(),this.state=520,this.isDefine(),this.state=521,this.fieldName()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}defList(){let e=new Lm(this._ctx,this.state);this.enterRule(e,82,t.RULE_defList);let r;try{let n;this.enterOuterAlt(e,1);{for(this.state=523,this.fieldDef(),this.state=530,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,34,this._ctx);n!==2&&n!==Wr.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=525,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=524,this.match(t.COMMA)),this.state=527,this.fieldDef()),this.state=532,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,34,this._ctx);this.state=534,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=533,this.match(t.COMMA))}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}fieldDef(){let e=new up(this._ctx,this.state);this.enterRule(e,84,t.RULE_fieldDef);try{this.enterOuterAlt(e,1),this.state=536,this.tags(),this.state=537,this.fieldNameDef(),this.state=538,this.isDefine(),this.state=539,this.fieldExpr(0)}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}fieldNameDef(){let e=new Mb(this._ctx,this.state);this.enterRule(e,86,t.RULE_fieldNameDef);try{this.enterOuterAlt(e,1),this.state=541,this.id()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}joinNameDef(){let e=new NA(this._ctx,this.state);this.enterRule(e,88,t.RULE_joinNameDef);try{this.enterOuterAlt(e,1),this.state=543,this.id()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}declareStatement(){let e=new Im(this._ctx,this.state);this.enterRule(e,90,t.RULE_declareStatement);try{this.enterOuterAlt(e,1),this.state=545,this.match(t.DECLARE),this.state=546,this.defList()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}joinStatement(){let e=new zl(this._ctx,this.state);this.enterRule(e,92,t.RULE_joinStatement);try{switch(this.state=560,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,36,this._ctx)){case 1:e=new f8(e),this.enterOuterAlt(e,1),this.state=548,this.tags(),this.state=549,this.match(t.JOIN_ONE),this.state=550,this.joinList();break;case 2:e=new x8(e),this.enterOuterAlt(e,2),this.state=552,this.tags(),this.state=553,this.match(t.JOIN_MANY),this.state=554,this.joinList();break;case 3:e=new d8(e),this.enterOuterAlt(e,3),this.state=556,this.tags(),this.state=557,this.match(t.JOIN_CROSS),this.state=558,this.joinList();break}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}queryExtend(){let e=new Pb(this._ctx,this.state);this.enterRule(e,94,t.RULE_queryExtend);try{this.enterOuterAlt(e,1),this.state=562,this.match(t.EXTENDQ),this.state=563,this.queryExtendStatementList()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}modEither(){let e=new h8(this._ctx,this.state);this.enterRule(e,96,t.RULE_modEither);try{switch(this.state=568,this._errHandler.sync(this),this._input.LA(1)){case t.AGGREGATE:case t.CALCULATE:case t.DIMENSION:case t.GROUP_BY:case t.JOIN_CROSS:case t.JOIN_ONE:case t.JOIN_MANY:case t.MEASURE:case t.NEST:case t.PROJECT:case t.QUERY:case t.RUN:case t.SELECT:case t.SOURCE:case t.VIEW:case t.ALL:case t.AVG:case t.CAST:case t.COUNT:case t.DAY:case t.EXCLUDE:case t.FALSE:case t.HOUR:case t.IS:case t.MAX:case t.MIN:case t.MINUTE:case t.MONTH:case t.NOT:case t.NOW:case t.NULL:case t.PICK:case t.QUARTER:case t.SECOND:case t.SOURCE_KW:case t.SUM:case t.TABLE:case t.TRUE:case t.WEEK:case t.YEAR:case t.HACKY_REGEX:case t.SQ_STRING:case t.DQ_STRING:case t.BQ_STRING:case t.ANNOTATION:case t.OPAREN:case t.OCURLY:case t.MINUS:case t.LITERAL_TIMESTAMP:case t.LITERAL_HOUR:case t.LITERAL_DAY:case t.LITERAL_QUARTER:case t.LITERAL_MONTH:case t.LITERAL_WEEK:case t.LITERAL_YEAR:case t.IDENTIFIER:case t.NUMERIC_LITERAL:case t.INTEGER_LITERAL:case t.SQL_BEGIN:this.enterOuterAlt(e,1),this.state=565,this.joinStatement();break;case t.WHERE:this.enterOuterAlt(e,2),this.state=566,this.whereStatement();break;case t.DECLARE:this.enterOuterAlt(e,3),this.state=567,this.declareStatement();break;default:throw new Yr.NoViableAltException(this)}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}sqExpr(e){e===void 0&&(e=0);let r=this._ctx,n=this.state,i=new Kr(this._ctx,n),s=i,o=98;this.enterRecursionRule(i,98,t.RULE_sqExpr,e);try{let a;this.enterOuterAlt(i,1);{switch(this.state=578,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,38,this._ctx)){case 1:i=new p8(i),this._ctx=i,s=i,this.state=571,this.id();break;case 2:i=new m8(i),this._ctx=i,s=i,this.state=572,this.match(t.OPAREN),this.state=573,this.sqExpr(0),this.state=574,this.match(t.CPAREN);break;case 3:i=new A8(i),this._ctx=i,s=i,this.state=576,this.exploreTable();break;case 4:i=new S8(i),this._ctx=i,s=i,this.state=577,this.sqlSource();break}for(this._ctx._stop=this._input.tryLT(-1),this.state=591,this._errHandler.sync(this),a=this.interpreter.adaptivePredict(this._input,40,this._ctx);a!==2&&a!==Wr.ATN.INVALID_ALT_NUMBER;){if(a===1)switch(this._parseListeners!=null&&this.triggerExitRuleEvent(),s=i,this.state=589,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,39,this._ctx)){case 1:{if(i=new g8(new Kr(r,n)),this.pushNewRecursionContext(i,o,t.RULE_sqExpr),this.state=580,!this.precpred(this._ctx,5))throw this.createFailedPredicateException("this.precpred(this._ctx, 5)");this.state=581,this.match(t.PLUS),this.state=582,this.segExpr(0)}break;case 2:{if(i=new y8(new Kr(r,n)),this.pushNewRecursionContext(i,o,t.RULE_sqExpr),this.state=583,!this.precpred(this._ctx,4))throw this.createFailedPredicateException("this.precpred(this._ctx, 4)");this.state=584,this.match(t.ARROW),this.state=585,this.segExpr(0)}break;case 3:{if(i=new E8(new Kr(r,n)),this.pushNewRecursionContext(i,o,t.RULE_sqExpr),this.state=586,!this.precpred(this._ctx,3))throw this.createFailedPredicateException("this.precpred(this._ctx, 3)");this.state=587,this.match(t.EXTEND),this.state=588,this.exploreProperties()}break}this.state=593,this._errHandler.sync(this),a=this.interpreter.adaptivePredict(this._input,40,this._ctx)}}}catch(a){if(a instanceof Z.RecognitionException)i.exception=a,this._errHandler.reportError(this,a),this._errHandler.recover(this,a);else throw a}finally{this.unrollRecursionContexts(r)}return i}segExpr(e){e===void 0&&(e=0);let r=this._ctx,n=this.state,i=new go(this._ctx,n),s=i,o=100;this.enterRecursionRule(i,100,t.RULE_segExpr,e);try{let a;this.enterOuterAlt(i,1);{switch(this.state=601,this._errHandler.sync(this),this._input.LA(1)){case t.BQ_STRING:case t.IDENTIFIER:i=new v8(i),this._ctx=i,s=i,this.state=595,this.fieldPath();break;case t.OCURLY:i=new _8(i),this._ctx=i,s=i,this.state=596,this.queryProperties();break;case t.OPAREN:i=new b8(i),this._ctx=i,s=i,this.state=597,this.match(t.OPAREN),this.state=598,this.vExpr(),this.state=599,this.match(t.CPAREN);break;default:throw new Yr.NoViableAltException(this)}for(this._ctx._stop=this._input.tryLT(-1),this.state=608,this._errHandler.sync(this),a=this.interpreter.adaptivePredict(this._input,42,this._ctx);a!==2&&a!==Wr.ATN.INVALID_ALT_NUMBER;){if(a===1){this._parseListeners!=null&&this.triggerExitRuleEvent(),s=i;{if(i=new T8(new go(r,n)),i._lhs=s,this.pushNewRecursionContext(i,o,t.RULE_segExpr),this.state=603,!this.precpred(this._ctx,1))throw this.createFailedPredicateException("this.precpred(this._ctx, 1)");this.state=604,this.match(t.PLUS),this.state=605,i._rhs=this.segExpr(2)}}this.state=610,this._errHandler.sync(this),a=this.interpreter.adaptivePredict(this._input,42,this._ctx)}}}catch(a){if(a instanceof Z.RecognitionException)i.exception=a,this._errHandler.reportError(this,a),this._errHandler.recover(this,a);else throw a}finally{this.unrollRecursionContexts(r)}return i}vExpr(){let e=new Gl(this._ctx,this.state);this.enterRule(e,102,t.RULE_vExpr);try{switch(this.state=616,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,43,this._ctx)){case 1:e=new C8(e),this.enterOuterAlt(e,1),this.state=611,this.segExpr(0);break;case 2:e=new R8(e),this.enterOuterAlt(e,2),this.state=612,e._lhs=this.segExpr(0),this.state=613,this.match(t.ARROW),this.state=614,e._rhs=this.vExpr();break}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}queryExtendStatement(){let e=new FA(this._ctx,this.state);this.enterRule(e,104,t.RULE_queryExtendStatement);try{switch(this.state=621,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,44,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=618,this.defDimensions();break;case 2:this.enterOuterAlt(e,2),this.state=619,this.defMeasures();break;case 3:this.enterOuterAlt(e,3),this.state=620,this.joinStatement();break}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}queryExtendStatementList(){let e=new kb(this._ctx,this.state);this.enterRule(e,106,t.RULE_queryExtendStatementList);let r;try{this.enterOuterAlt(e,1);{for(this.state=623,this.match(t.OCURLY),this.state=628,this._errHandler.sync(this),r=this._input.LA(1);!(r&-32)&&1<<r&(1<<t.AGGREGATE|1<<t.CALCULATE|1<<t.DIMENSION|1<<t.GROUP_BY|1<<t.JOIN_CROSS|1<<t.JOIN_ONE|1<<t.JOIN_MANY|1<<t.MEASURE|1<<t.NEST|1<<t.PROJECT|1<<t.QUERY|1<<t.RUN|1<<t.SELECT|1<<t.SOURCE|1<<t.VIEW)||!(r-33&-32)&&1<<r-33&(1<<t.ALL-33|1<<t.AVG-33|1<<t.CAST-33|1<<t.COUNT-33|1<<t.DAY-33|1<<t.EXCLUDE-33|1<<t.FALSE-33|1<<t.HOUR-33|1<<t.IS-33)||!(r-65&-32)&&1<<r-65&(1<<t.MAX-65|1<<t.MIN-65|1<<t.MINUTE-65|1<<t.MONTH-65|1<<t.NOT-65|1<<t.NOW-65|1<<t.NULL-65|1<<t.PICK-65|1<<t.QUARTER-65|1<<t.SECOND-65|1<<t.SOURCE_KW-65|1<<t.SUM-65|1<<t.TABLE-65|1<<t.TRUE-65|1<<t.WEEK-65|1<<t.YEAR-65|1<<t.HACKY_REGEX-65)||!(r-97&-32)&&1<<r-97&(1<<t.SQ_STRING-97|1<<t.DQ_STRING-97|1<<t.BQ_STRING-97|1<<t.ANNOTATION-97|1<<t.OPAREN-97|1<<t.OCURLY-97|1<<t.MINUS-97)||!(r-129&-32)&&1<<r-129&(1<<t.SEMI-129|1<<t.LITERAL_TIMESTAMP-129|1<<t.LITERAL_HOUR-129|1<<t.LITERAL_DAY-129|1<<t.LITERAL_QUARTER-129|1<<t.LITERAL_MONTH-129|1<<t.LITERAL_WEEK-129|1<<t.LITERAL_YEAR-129|1<<t.IDENTIFIER-129|1<<t.NUMERIC_LITERAL-129|1<<t.INTEGER_LITERAL-129|1<<t.SQL_BEGIN-129);){switch(this.state=626,this._errHandler.sync(this),this._input.LA(1)){case t.AGGREGATE:case t.CALCULATE:case t.DIMENSION:case t.GROUP_BY:case t.JOIN_CROSS:case t.JOIN_ONE:case t.JOIN_MANY:case t.MEASURE:case t.NEST:case t.PROJECT:case t.QUERY:case t.RUN:case t.SELECT:case t.SOURCE:case t.VIEW:case t.ALL:case t.AVG:case t.CAST:case t.COUNT:case t.DAY:case t.EXCLUDE:case t.FALSE:case t.HOUR:case t.IS:case t.MAX:case t.MIN:case t.MINUTE:case t.MONTH:case t.NOT:case t.NOW:case t.NULL:case t.PICK:case t.QUARTER:case t.SECOND:case t.SOURCE_KW:case t.SUM:case t.TABLE:case t.TRUE:case t.WEEK:case t.YEAR:case t.HACKY_REGEX:case t.SQ_STRING:case t.DQ_STRING:case t.BQ_STRING:case t.ANNOTATION:case t.OPAREN:case t.OCURLY:case t.MINUS:case t.LITERAL_TIMESTAMP:case t.LITERAL_HOUR:case t.LITERAL_DAY:case t.LITERAL_QUARTER:case t.LITERAL_MONTH:case t.LITERAL_WEEK:case t.LITERAL_YEAR:case t.IDENTIFIER:case t.NUMERIC_LITERAL:case t.INTEGER_LITERAL:case t.SQL_BEGIN:this.state=624,this.queryExtendStatement();break;case t.SEMI:this.state=625,this.match(t.SEMI);break;default:throw new Yr.NoViableAltException(this)}this.state=630,this._errHandler.sync(this),r=this._input.LA(1)}this.state=631,this.match(t.CCURLY)}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}joinList(){let e=new Mm(this._ctx,this.state);this.enterRule(e,108,t.RULE_joinList);let r;try{let n;this.enterOuterAlt(e,1);{for(this.state=633,this.joinDef(),this.state=640,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,48,this._ctx);n!==2&&n!==Wr.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=635,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=634,this.match(t.COMMA)),this.state=637,this.joinDef()),this.state=642,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,48,this._ctx);this.state=644,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=643,this.match(t.COMMA))}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}isExplore(){let e=new wA(this._ctx,this.state);this.enterRule(e,110,t.RULE_isExplore);try{this.enterOuterAlt(e,1),this.state=646,e._before_is=this.tags(),this.state=647,this.match(t.IS),this.state=648,e._after_is=this.tags(),this.state=649,this.sqExpr(0)}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}matrixOperation(){let e=new LA(this._ctx,this.state);this.enterRule(e,112,t.RULE_matrixOperation);let r;try{this.enterOuterAlt(e,1),this.state=651,r=this._input.LA(1),!(r-53&-32)&&1<<r-53&(1<<t.FULL-53|1<<t.INNER-53|1<<t.LEFT-53|1<<t.RIGHT-53)?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}joinDef(){let e=new lp(this._ctx,this.state);this.enterRule(e,114,t.RULE_joinDef);let r;try{switch(this.state=686,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,57,this._ctx)){case 1:e=new O8(e),this.enterOuterAlt(e,1);{for(this.state=656,this._errHandler.sync(this),r=this._input.LA(1);r===t.ANNOTATION;)this.state=653,this.match(t.ANNOTATION),this.state=658,this._errHandler.sync(this),r=this._input.LA(1);this.state=659,this.joinNameDef(),this.state=661,this._errHandler.sync(this),r=this._input.LA(1),(!(r&-32)&&1<<r&(1<<t.AGGREGATE|1<<t.CALCULATE|1<<t.DIMENSION|1<<t.GROUP_BY|1<<t.JOIN_CROSS|1<<t.JOIN_ONE|1<<t.JOIN_MANY|1<<t.MEASURE|1<<t.NEST|1<<t.PROJECT|1<<t.QUERY|1<<t.RUN|1<<t.SELECT|1<<t.SOURCE|1<<t.VIEW)||!(r-33&-32)&&1<<r-33&(1<<t.ALL-33|1<<t.AVG-33|1<<t.CAST-33|1<<t.COUNT-33|1<<t.DAY-33|1<<t.EXCLUDE-33|1<<t.FALSE-33|1<<t.HOUR-33|1<<t.IS-33)||!(r-65&-32)&&1<<r-65&(1<<t.MAX-65|1<<t.MIN-65|1<<t.MINUTE-65|1<<t.MONTH-65|1<<t.NOT-65|1<<t.NOW-65|1<<t.NULL-65|1<<t.PICK-65|1<<t.QUARTER-65|1<<t.SECOND-65|1<<t.SOURCE_KW-65|1<<t.SUM-65|1<<t.TABLE-65|1<<t.TRUE-65|1<<t.WEEK-65|1<<t.YEAR-65|1<<t.HACKY_REGEX-65)||!(r-97&-32)&&1<<r-97&(1<<t.SQ_STRING-97|1<<t.DQ_STRING-97|1<<t.BQ_STRING-97|1<<t.ANNOTATION-97|1<<t.OPAREN-97|1<<t.OCURLY-97|1<<t.MINUS-97)||!(r-135&-32)&&1<<r-135&(1<<t.LITERAL_TIMESTAMP-135|1<<t.LITERAL_HOUR-135|1<<t.LITERAL_DAY-135|1<<t.LITERAL_QUARTER-135|1<<t.LITERAL_MONTH-135|1<<t.LITERAL_WEEK-135|1<<t.LITERAL_YEAR-135|1<<t.IDENTIFIER-135|1<<t.NUMERIC_LITERAL-135|1<<t.INTEGER_LITERAL-135|1<<t.SQL_BEGIN-135))&&(this.state=660,this.isExplore()),this.state=664,this._errHandler.sync(this),r=this._input.LA(1),!(r-53&-32)&&1<<r-53&(1<<t.FULL-53|1<<t.INNER-53|1<<t.LEFT-53|1<<t.RIGHT-53)&&(this.state=663,this.matrixOperation()),this.state=666,this.match(t.WITH),this.state=667,this.fieldExpr(0)}break;case 2:e=new D8(e),this.enterOuterAlt(e,2);{for(this.state=672,this._errHandler.sync(this),r=this._input.LA(1);r===t.ANNOTATION;)this.state=669,this.match(t.ANNOTATION),this.state=674,this._errHandler.sync(this),r=this._input.LA(1);switch(this.state=675,this.joinNameDef(),this.state=677,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,54,this._ctx)){case 1:this.state=676,this.isExplore();break}this.state=684,this._errHandler.sync(this),r=this._input.LA(1),!(r-53&-32)&&1<<r-53&(1<<t.FULL-53|1<<t.INNER-53|1<<t.LEFT-53|1<<t.ON-53|1<<t.RIGHT-53)&&(this.state=680,this._errHandler.sync(this),r=this._input.LA(1),!(r-53&-32)&&1<<r-53&(1<<t.FULL-53|1<<t.INNER-53|1<<t.LEFT-53|1<<t.RIGHT-53)&&(this.state=679,this.matrixOperation()),this.state=682,this.match(t.ON),this.state=683,this.joinExpression())}break}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}joinExpression(){let e=new Bb(this._ctx,this.state);this.enterRule(e,116,t.RULE_joinExpression);try{this.enterOuterAlt(e,1),this.state=688,this.fieldExpr(0)}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}filterStatement(){let e=new N8(this._ctx,this.state);this.enterRule(e,118,t.RULE_filterStatement);try{switch(this.state=692,this._errHandler.sync(this),this._input.LA(1)){case t.WHERE:this.enterOuterAlt(e,1),this.state=690,this.whereStatement();break;case t.HAVING:this.enterOuterAlt(e,2),this.state=691,this.havingStatement();break;default:throw new Yr.NoViableAltException(this)}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}filteredBy(){let e=new Pm(this._ctx,this.state);this.enterRule(e,120,t.RULE_filteredBy);try{switch(this.state=697,this._errHandler.sync(this),this._input.LA(1)){case t.QMARK:e=new F8(e),this.enterOuterAlt(e,1),this.state=694,this.match(t.QMARK),this.state=695,this.fieldExpr(0);break;case t.WHERE:e=new w8(e),this.enterOuterAlt(e,2),this.state=696,this.whereStatement();break;default:throw new Yr.NoViableAltException(this)}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}filterClauseList(){let e=new IA(this._ctx,this.state);this.enterRule(e,122,t.RULE_filterClauseList);let r;try{let n;this.enterOuterAlt(e,1);{for(this.state=699,this.fieldExpr(0),this.state=704,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,60,this._ctx);n!==2&&n!==Wr.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=700,this.match(t.COMMA),this.state=701,this.fieldExpr(0)),this.state=706,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,60,this._ctx);this.state=708,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=707,this.match(t.COMMA))}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}whereStatement(){let e=new vx(this._ctx,this.state);this.enterRule(e,124,t.RULE_whereStatement);try{this.enterOuterAlt(e,1),this.state=710,this.match(t.WHERE),this.state=711,this.filterClauseList()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}havingStatement(){let e=new MA(this._ctx,this.state);this.enterRule(e,126,t.RULE_havingStatement);try{this.enterOuterAlt(e,1),this.state=713,this.match(t.HAVING),this.state=714,this.filterClauseList()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}subQueryDefList(){let e=new qb(this._ctx,this.state);this.enterRule(e,128,t.RULE_subQueryDefList);let r;try{let n;this.enterOuterAlt(e,1);{for(this.state=716,this.exploreQueryDef(),this.state=723,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,63,this._ctx);n!==2&&n!==Wr.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=718,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=717,this.match(t.COMMA)),this.state=720,this.exploreQueryDef()),this.state=725,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,63,this._ctx);this.state=727,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=726,this.match(t.COMMA))}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}exploreQueryNameDef(){let e=new Ub(this._ctx,this.state);this.enterRule(e,130,t.RULE_exploreQueryNameDef);try{this.enterOuterAlt(e,1),this.state=729,this.id()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}exploreQueryDef(){let e=new PA(this._ctx,this.state);this.enterRule(e,132,t.RULE_exploreQueryDef);let r;try{this.enterOuterAlt(e,1);{for(this.state=734,this._errHandler.sync(this),r=this._input.LA(1);r===t.ANNOTATION;)this.state=731,this.match(t.ANNOTATION),this.state=736,this._errHandler.sync(this),r=this._input.LA(1);this.state=737,this.exploreQueryNameDef(),this.state=738,this.isDefine(),this.state=739,this.vExpr()}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}queryStatement(){let e=new kA(this._ctx,this.state);this.enterRule(e,134,t.RULE_queryStatement);try{switch(this.state=759,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,66,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=741,this.groupByStatement();break;case 2:this.enterOuterAlt(e,2),this.state=742,this.declareStatement();break;case 3:this.enterOuterAlt(e,3),this.state=743,this.queryJoinStatement();break;case 4:this.enterOuterAlt(e,4),this.state=744,this.queryExtend();break;case 5:this.enterOuterAlt(e,5),this.state=745,this.projectStatement();break;case 6:this.enterOuterAlt(e,6),this.state=746,this.indexStatement();break;case 7:this.enterOuterAlt(e,7),this.state=747,this.aggregateStatement();break;case 8:this.enterOuterAlt(e,8),this.state=748,this.calculateStatement();break;case 9:this.enterOuterAlt(e,9),this.state=749,this.topStatement();break;case 10:this.enterOuterAlt(e,10),this.state=750,this.limitStatement();break;case 11:this.enterOuterAlt(e,11),this.state=751,this.orderByStatement();break;case 12:this.enterOuterAlt(e,12),this.state=752,this.whereStatement();break;case 13:this.enterOuterAlt(e,13),this.state=753,this.havingStatement();break;case 14:this.enterOuterAlt(e,14),this.state=754,this.nestStatement();break;case 15:this.enterOuterAlt(e,15),this.state=755,this.sampleStatement();break;case 16:this.enterOuterAlt(e,16),this.state=756,this.timezoneStatement();break;case 17:this.enterOuterAlt(e,17),this.state=757,this.queryAnnotation();break;case 18:this.enterOuterAlt(e,18),this.state=758,this.ignoredModelAnnotations();break}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}queryJoinStatement(){let e=new $b(this._ctx,this.state);this.enterRule(e,136,t.RULE_queryJoinStatement);try{this.enterOuterAlt(e,1),this.state=761,this.joinStatement()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}groupByStatement(){let e=new jb(this._ctx,this.state);this.enterRule(e,138,t.RULE_groupByStatement);try{this.enterOuterAlt(e,1),this.state=763,this.tags(),this.state=764,this.match(t.GROUP_BY),this.state=765,this.queryFieldList()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}queryFieldList(){let e=new km(this._ctx,this.state);this.enterRule(e,140,t.RULE_queryFieldList);let r;try{let n;this.enterOuterAlt(e,1);{for(this.state=767,this.queryFieldEntry(),this.state=774,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,68,this._ctx);n!==2&&n!==Wr.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=769,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=768,this.match(t.COMMA)),this.state=771,this.queryFieldEntry()),this.state=776,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,68,this._ctx);this.state=778,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=777,this.match(t.COMMA))}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}queryFieldEntry(){let e=new BA(this._ctx,this.state);this.enterRule(e,142,t.RULE_queryFieldEntry);try{switch(this.state=782,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,70,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=780,this.taggedRef();break;case 2:this.enterOuterAlt(e,2),this.state=781,this.fieldDef();break}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}nestStatement(){let e=new Hb(this._ctx,this.state);this.enterRule(e,144,t.RULE_nestStatement);try{this.enterOuterAlt(e,1),this.state=784,this.tags(),this.state=785,this.match(t.NEST),this.state=786,this.nestedQueryList()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}nestedQueryList(){let e=new zb(this._ctx,this.state);this.enterRule(e,146,t.RULE_nestedQueryList);let r;try{let n;this.enterOuterAlt(e,1);{for(this.state=788,this.nestEntry(),this.state=795,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,72,this._ctx);n!==2&&n!==Wr.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=790,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=789,this.match(t.COMMA)),this.state=792,this.nestEntry()),this.state=797,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,72,this._ctx);this.state=799,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=798,this.match(t.COMMA))}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}nestEntry(){let e=new cp(this._ctx,this.state);this.enterRule(e,148,t.RULE_nestEntry);let r;try{switch(this.state=812,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,75,this._ctx)){case 1:e=new L8(e),this.enterOuterAlt(e,1),this.state=801,this.tags(),this.state=802,this.fieldPath(),this.state=805,this._errHandler.sync(this),r=this._input.LA(1),r===t.PLUS&&(this.state=803,this.match(t.PLUS),this.state=804,this.vExpr());break;case 2:e=new I8(e),this.enterOuterAlt(e,2),this.state=807,this.tags(),this.state=808,this.queryName(),this.state=809,this.isDefine(),this.state=810,this.vExpr();break}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}aggregateStatement(){let e=new Gb(this._ctx,this.state);this.enterRule(e,150,t.RULE_aggregateStatement);try{this.enterOuterAlt(e,1),this.state=814,this.tags(),this.state=815,this.match(t.AGGREGATE),this.state=816,this.queryFieldList()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}calculateStatement(){let e=new Qb(this._ctx,this.state);this.enterRule(e,152,t.RULE_calculateStatement);try{this.enterOuterAlt(e,1),this.state=818,this.tags(),this.state=819,this.match(t.CALCULATE),this.state=820,this.queryFieldList()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}projectStatement(){let e=new Vb(this._ctx,this.state);this.enterRule(e,154,t.RULE_projectStatement);let r;try{this.enterOuterAlt(e,1),this.state=822,this.tags(),this.state=823,r=this._input.LA(1),r===t.PROJECT||r===t.SELECT?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=824,this.fieldCollection()}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}orderByStatement(){let e=new Wb(this._ctx,this.state);this.enterRule(e,156,t.RULE_orderByStatement);try{this.enterOuterAlt(e,1),this.state=826,this.match(t.ORDER_BY),this.state=827,this.ordering()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}ordering(){let e=new Yb(this._ctx,this.state);this.enterRule(e,158,t.RULE_ordering);let r;try{let n;this.enterOuterAlt(e,1);{for(this.state=829,this.orderBySpec(),this.state=836,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,77,this._ctx);n!==2&&n!==Wr.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=831,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=830,this.match(t.COMMA)),this.state=833,this.orderBySpec()),this.state=838,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,77,this._ctx);this.state=840,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=839,this.match(t.COMMA))}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}orderBySpec(){let e=new qA(this._ctx,this.state);this.enterRule(e,160,t.RULE_orderBySpec);let r;try{this.enterOuterAlt(e,1);{switch(this.state=844,this._errHandler.sync(this),this._input.LA(1)){case t.INTEGER_LITERAL:this.state=842,this.match(t.INTEGER_LITERAL);break;case t.BQ_STRING:case t.IDENTIFIER:this.state=843,this.fieldName();break;default:throw new Yr.NoViableAltException(this)}this.state=847,this._errHandler.sync(this),r=this._input.LA(1),(r===t.ASC||r===t.DESC)&&(this.state=846,r=this._input.LA(1),r===t.ASC||r===t.DESC?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this))}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}limitStatement(){let e=new Kb(this._ctx,this.state);this.enterRule(e,162,t.RULE_limitStatement);try{this.enterOuterAlt(e,1),this.state=849,this.match(t.LIMIT),this.state=850,this.match(t.INTEGER_LITERAL)}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}bySpec(){let e=new Xb(this._ctx,this.state);this.enterRule(e,164,t.RULE_bySpec);try{switch(this.state=856,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,81,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=852,this.match(t.BY),this.state=853,this.fieldName();break;case 2:this.enterOuterAlt(e,2),this.state=854,this.match(t.BY),this.state=855,this.fieldExpr(0);break}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}topStatement(){let e=new Jb(this._ctx,this.state);this.enterRule(e,166,t.RULE_topStatement);let r;try{this.enterOuterAlt(e,1),this.state=858,this.match(t.TOP),this.state=859,this.match(t.INTEGER_LITERAL),this.state=861,this._errHandler.sync(this),r=this._input.LA(1),r===t.BY&&(this.state=860,this.bySpec())}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}indexElement(){let e=new UA(this._ctx,this.state);this.enterRule(e,168,t.RULE_indexElement);let r;try{switch(this.state=869,this._errHandler.sync(this),this._input.LA(1)){case t.BQ_STRING:case t.IDENTIFIER:this.enterOuterAlt(e,1),this.state=863,this.fieldPath(),this.state=866,this._errHandler.sync(this),r=this._input.LA(1),r===t.DOT&&(this.state=864,this.match(t.DOT),this.state=865,this.match(t.STAR));break;case t.STAR:this.enterOuterAlt(e,2),this.state=868,this.match(t.STAR);break;default:throw new Yr.NoViableAltException(this)}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}indexFields(){let e=new Zb(this._ctx,this.state);this.enterRule(e,170,t.RULE_indexFields);let r;try{let n;for(this.enterOuterAlt(e,1),this.state=871,this.indexElement(),this.state=878,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,86,this._ctx);n!==2&&n!==Wr.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=873,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=872,this.match(t.COMMA)),this.state=875,this.indexElement()),this.state=880,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,86,this._ctx)}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}indexStatement(){let e=new eT(this._ctx,this.state);this.enterRule(e,172,t.RULE_indexStatement);let r;try{this.enterOuterAlt(e,1),this.state=881,this.match(t.INDEX),this.state=882,this.indexFields(),this.state=885,this._errHandler.sync(this),r=this._input.LA(1),r===t.BY&&(this.state=883,this.match(t.BY),this.state=884,this.fieldName())}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}sampleStatement(){let e=new tT(this._ctx,this.state);this.enterRule(e,174,t.RULE_sampleStatement);try{this.enterOuterAlt(e,1),this.state=887,this.match(t.SAMPLE),this.state=888,this.sampleSpec()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}timezoneStatement(){let e=new $A(this._ctx,this.state);this.enterRule(e,176,t.RULE_timezoneStatement);try{this.enterOuterAlt(e,1),this.state=890,this.match(t.TIMEZONE),this.state=891,this.string()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}queryAnnotation(){let e=new rT(this._ctx,this.state);this.enterRule(e,178,t.RULE_queryAnnotation);try{this.enterOuterAlt(e,1),this.state=893,this.match(t.ANNOTATION)}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}sampleSpec(){let e=new nT(this._ctx,this.state);this.enterRule(e,180,t.RULE_sampleSpec);let r;try{this.enterOuterAlt(e,1),this.state=895,r=this._input.LA(1),r===t.FALSE||r===t.TRUE||r===t.PERCENT_LITERAL||r===t.INTEGER_LITERAL?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}aggregate(){let e=new Bm(this._ctx,this.state);this.enterRule(e,182,t.RULE_aggregate);let r;try{this.enterOuterAlt(e,1),this.state=897,r=this._input.LA(1),!(r-37&-32)&&1<<r-37&(1<<t.AVG-37|1<<t.COUNT-37|1<<t.MAX-37|1<<t.MIN-37)||r===t.SUM?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}malloyType(){let e=new jA(this._ctx,this.state);this.enterRule(e,184,t.RULE_malloyType);let r;try{this.enterOuterAlt(e,1),this.state=899,r=this._input.LA(1),r===t.BOOLEAN||r===t.DATE||!(r-72&-32)&&1<<r-72&(1<<t.NUMBER-72|1<<t.STRING-72|1<<t.TIMESTAMP-72)?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}compareOp(){let e=new HA(this._ctx,this.state);this.enterRule(e,186,t.RULE_compareOp);let r;try{this.enterOuterAlt(e,1),this.state=901,r=this._input.LA(1),!(r-117&-32)&&1<<r-117&(1<<t.LT-117|1<<t.GT-117|1<<t.EQ-117|1<<t.NE-117|1<<t.LTE-117|1<<t.GTE-117|1<<t.NOT_MATCH-117|1<<t.MATCH-117)?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}string(){let e=new qu(this._ctx,this.state);this.enterRule(e,188,t.RULE_string);try{switch(this.state=905,this._errHandler.sync(this),this._input.LA(1)){case t.SQ_STRING:case t.DQ_STRING:this.enterOuterAlt(e,1),this.state=903,this.shortString();break;case t.SQL_BEGIN:this.enterOuterAlt(e,2),this.state=904,this.sqlString();break;default:throw new Yr.NoViableAltException(this)}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}shortString(){let e=new zA(this._ctx,this.state);this.enterRule(e,190,t.RULE_shortString);let r;try{this.enterOuterAlt(e,1),this.state=907,r=this._input.LA(1),r===t.SQ_STRING||r===t.DQ_STRING?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}numericLiteral(){let e=new iT(this._ctx,this.state);this.enterRule(e,192,t.RULE_numericLiteral);let r;try{this.enterOuterAlt(e,1),this.state=909,r=this._input.LA(1),r===t.NUMERIC_LITERAL||r===t.INTEGER_LITERAL?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}literal(){let e=new Uu(this._ctx,this.state);this.enterRule(e,194,t.RULE_literal);let r;try{switch(this.state=918,this._errHandler.sync(this),this._input.LA(1)){case t.SQ_STRING:case t.DQ_STRING:case t.SQL_BEGIN:e=new M8(e),this.enterOuterAlt(e,1),this.state=911,this.string();break;case t.NUMERIC_LITERAL:case t.INTEGER_LITERAL:e=new P8(e),this.enterOuterAlt(e,2),this.state=912,this.numericLiteral();break;case t.LITERAL_TIMESTAMP:case t.LITERAL_HOUR:case t.LITERAL_DAY:case t.LITERAL_QUARTER:case t.LITERAL_MONTH:case t.LITERAL_WEEK:case t.LITERAL_YEAR:e=new k8(e),this.enterOuterAlt(e,3),this.state=913,this.dateLiteral();break;case t.NULL:e=new B8(e),this.enterOuterAlt(e,4),this.state=914,this.match(t.NULL);break;case t.FALSE:case t.TRUE:e=new q8(e),this.enterOuterAlt(e,5),this.state=915,r=this._input.LA(1),r===t.FALSE||r===t.TRUE?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this);break;case t.HACKY_REGEX:e=new U8(e),this.enterOuterAlt(e,6),this.state=916,this.match(t.HACKY_REGEX);break;case t.NOW:e=new $8(e),this.enterOuterAlt(e,7),this.state=917,this.match(t.NOW);break;default:throw new Yr.NoViableAltException(this)}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}dateLiteral(){let e=new $u(this._ctx,this.state);this.enterRule(e,196,t.RULE_dateLiteral);try{switch(this.state=927,this._errHandler.sync(this),this._input.LA(1)){case t.LITERAL_TIMESTAMP:e=new j8(e),this.enterOuterAlt(e,1),this.state=920,this.match(t.LITERAL_TIMESTAMP);break;case t.LITERAL_HOUR:e=new H8(e),this.enterOuterAlt(e,2),this.state=921,this.match(t.LITERAL_HOUR);break;case t.LITERAL_DAY:e=new z8(e),this.enterOuterAlt(e,3),this.state=922,this.match(t.LITERAL_DAY);break;case t.LITERAL_WEEK:e=new G8(e),this.enterOuterAlt(e,4),this.state=923,this.match(t.LITERAL_WEEK);break;case t.LITERAL_MONTH:e=new Q8(e),this.enterOuterAlt(e,5),this.state=924,this.match(t.LITERAL_MONTH);break;case t.LITERAL_QUARTER:e=new V8(e),this.enterOuterAlt(e,6),this.state=925,this.match(t.LITERAL_QUARTER);break;case t.LITERAL_YEAR:e=new W8(e),this.enterOuterAlt(e,7),this.state=926,this.match(t.LITERAL_YEAR);break;default:throw new Yr.NoViableAltException(this)}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}tablePath(){let e=new sT(this._ctx,this.state);this.enterRule(e,198,t.RULE_tablePath);try{this.enterOuterAlt(e,1),this.state=929,this.string()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}tableURI(){let e=new oT(this._ctx,this.state);this.enterRule(e,200,t.RULE_tableURI);try{this.enterOuterAlt(e,1),this.state=931,this.string()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}id(){let e=new Cn(this._ctx,this.state);this.enterRule(e,202,t.RULE_id);let r;try{this.enterOuterAlt(e,1),this.state=933,r=this._input.LA(1),r===t.BQ_STRING||r===t.IDENTIFIER?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}timeframe(){let e=new _x(this._ctx,this.state);this.enterRule(e,204,t.RULE_timeframe);let r;try{this.enterOuterAlt(e,1),this.state=935,r=this._input.LA(1),!(r-45&-32)&&1<<r-45&(1<<t.DAY-45|1<<t.HOUR-45|1<<t.MINUTE-45|1<<t.MONTH-45|1<<t.QUARTER-45)||!(r-78&-32)&&1<<r-78&(1<<t.SECOND-78|1<<t.WEEK-78|1<<t.YEAR-78)?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}ungroup(){let e=new aT(this._ctx,this.state);this.enterRule(e,206,t.RULE_ungroup);let r;try{this.enterOuterAlt(e,1),this.state=937,r=this._input.LA(1),r===t.ALL||r===t.EXCLUDE?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}malloyOrSQLType(){let e=new GA(this._ctx,this.state);this.enterRule(e,208,t.RULE_malloyOrSQLType);try{switch(this.state=941,this._errHandler.sync(this),this._input.LA(1)){case t.BOOLEAN:case t.DATE:case t.NUMBER:case t.STRING:case t.TIMESTAMP:this.enterOuterAlt(e,1),this.state=939,this.malloyType();break;case t.SQ_STRING:case t.DQ_STRING:case t.SQL_BEGIN:this.enterOuterAlt(e,2),this.state=940,this.string();break;default:throw new Yr.NoViableAltException(this)}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}fieldExpr(e){e===void 0&&(e=0);let r=this._ctx,n=this.state,i=new Ee(this._ctx,n),s=i,o=210;this.enterRecursionRule(i,210,t.RULE_fieldExpr,e);let a;try{let u;this.enterOuterAlt(i,1);{switch(this.state=1026,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,101,this._ctx)){case 1:i=new Y8(i),this._ctx=i,s=i,this.state=944,this.fieldPath();break;case 2:i=new X8(i),this._ctx=i,s=i,this.state=945,this.literal();break;case 3:i=new t9(i),this._ctx=i,s=i,this.state=946,this.match(t.MINUS),this.state=947,this.fieldExpr(22);break;case 4:i=new c9(i),this._ctx=i,s=i,this.state=948,this.match(t.NOT),this.state=949,this.fieldExpr(13);break;case 5:i=new uT(i),this._ctx=i,s=i,this.state=950,this.match(t.CAST),this.state=951,this.match(t.OPAREN),this.state=952,this.fieldExpr(0),this.state=953,this.match(t.AS),this.state=954,this.malloyOrSQLType(),this.state=955,this.match(t.CPAREN);break;case 6:i=new h9(i),this._ctx=i,s=i,this.state=957,this.match(t.COUNT),this.state=958,this.match(t.OPAREN),this.state=959,this.match(t.DISTINCT),this.state=960,this.fieldExpr(0),this.state=961,this.match(t.CPAREN);break;case 7:{switch(i=new p9(i),this._ctx=i,s=i,this.state=965,this._errHandler.sync(this),a=this._input.LA(1),a===t.SOURCE_KW&&(this.state=963,this.match(t.SOURCE_KW),this.state=964,this.match(t.DOT)),this.state=967,this.aggregate(),this.state=968,this.match(t.OPAREN),this.state=971,this._errHandler.sync(this),this._input.LA(1)){case t.ALL:case t.AVG:case t.CAST:case t.COUNT:case t.DAY:case t.EXCLUDE:case t.FALSE:case t.HOUR:case t.MAX:case t.MIN:case t.MINUTE:case t.MONTH:case t.NOT:case t.NOW:case t.NULL:case t.PICK:case t.QUARTER:case t.SECOND:case t.SOURCE_KW:case t.SUM:case t.TRUE:case t.WEEK:case t.YEAR:case t.HACKY_REGEX:case t.SQ_STRING:case t.DQ_STRING:case t.BQ_STRING:case t.OPAREN:case t.MINUS:case t.LITERAL_TIMESTAMP:case t.LITERAL_HOUR:case t.LITERAL_DAY:case t.LITERAL_QUARTER:case t.LITERAL_MONTH:case t.LITERAL_WEEK:case t.LITERAL_YEAR:case t.IDENTIFIER:case t.NUMERIC_LITERAL:case t.INTEGER_LITERAL:case t.SQL_BEGIN:this.state=969,this.fieldExpr(0);break;case t.STAR:this.state=970,this.match(t.STAR);break;case t.CPAREN:break;default:break}this.state=973,this.match(t.CPAREN)}break;case 8:i=new m9(i),this._ctx=i,s=i,this.state=975,this.fieldPath(),this.state=976,this.match(t.DOT),this.state=977,this.aggregate(),this.state=978,this.match(t.OPAREN),this.state=980,this._errHandler.sync(this),a=this._input.LA(1),(!(a-33&-32)&&1<<a-33&(1<<t.ALL-33|1<<t.AVG-33|1<<t.CAST-33|1<<t.COUNT-33|1<<t.DAY-33|1<<t.EXCLUDE-33|1<<t.FALSE-33|1<<t.HOUR-33)||!(a-65&-32)&&1<<a-65&(1<<t.MAX-65|1<<t.MIN-65|1<<t.MINUTE-65|1<<t.MONTH-65|1<<t.NOT-65|1<<t.NOW-65|1<<t.NULL-65|1<<t.PICK-65|1<<t.QUARTER-65|1<<t.SECOND-65|1<<t.SOURCE_KW-65|1<<t.SUM-65|1<<t.TRUE-65|1<<t.WEEK-65|1<<t.YEAR-65|1<<t.HACKY_REGEX-65)||!(a-97&-32)&&1<<a-97&(1<<t.SQ_STRING-97|1<<t.DQ_STRING-97|1<<t.BQ_STRING-97|1<<t.OPAREN-97|1<<t.MINUS-97)||!(a-135&-32)&&1<<a-135&(1<<t.LITERAL_TIMESTAMP-135|1<<t.LITERAL_HOUR-135|1<<t.LITERAL_DAY-135|1<<t.LITERAL_QUARTER-135|1<<t.LITERAL_MONTH-135|1<<t.LITERAL_WEEK-135|1<<t.LITERAL_YEAR-135|1<<t.IDENTIFIER-135|1<<t.NUMERIC_LITERAL-135|1<<t.INTEGER_LITERAL-135|1<<t.SQL_BEGIN-135))&&(this.state=979,this.fieldExpr(0)),this.state=982,this.match(t.CPAREN);break;case 9:i=new g9(i),this._ctx=i,s=i,this.state=984,this.match(t.OPAREN),this.state=985,this.partialAllowedFieldExpr(),this.state=986,this.match(t.CPAREN);break;case 10:i=new y9(i),this._ctx=i,s=i,this.state=988,this.fieldPath(),this.state=989,this.match(t.DOT),this.state=990,this.id(),this.state=991,this.match(t.OPAREN),this.state=993,this._errHandler.sync(this),a=this._input.LA(1),(!(a-33&-32)&&1<<a-33&(1<<t.ALL-33|1<<t.AVG-33|1<<t.CAST-33|1<<t.COUNT-33|1<<t.DAY-33|1<<t.EXCLUDE-33|1<<t.FALSE-33|1<<t.HOUR-33)||!(a-65&-32)&&1<<a-65&(1<<t.MAX-65|1<<t.MIN-65|1<<t.MINUTE-65|1<<t.MONTH-65|1<<t.NOT-65|1<<t.NOW-65|1<<t.NULL-65|1<<t.PICK-65|1<<t.QUARTER-65|1<<t.SECOND-65|1<<t.SOURCE_KW-65|1<<t.SUM-65|1<<t.TRUE-65|1<<t.WEEK-65|1<<t.YEAR-65|1<<t.HACKY_REGEX-65)||!(a-97&-32)&&1<<a-97&(1<<t.SQ_STRING-97|1<<t.DQ_STRING-97|1<<t.BQ_STRING-97|1<<t.OPAREN-97|1<<t.MINUS-97)||!(a-135&-32)&&1<<a-135&(1<<t.LITERAL_TIMESTAMP-135|1<<t.LITERAL_HOUR-135|1<<t.LITERAL_DAY-135|1<<t.LITERAL_QUARTER-135|1<<t.LITERAL_MONTH-135|1<<t.LITERAL_WEEK-135|1<<t.LITERAL_YEAR-135|1<<t.IDENTIFIER-135|1<<t.NUMERIC_LITERAL-135|1<<t.INTEGER_LITERAL-135|1<<t.SQL_BEGIN-135))&&(this.state=992,this.argumentList()),this.state=995,this.match(t.CPAREN);break;case 11:{switch(i=new E9(i),this._ctx=i,s=i,this.state=1005,this._errHandler.sync(this),this._input.LA(1)){case t.BQ_STRING:case t.IDENTIFIER:this.state=997,this.id(),this.state=1002,this._errHandler.sync(this),a=this._input.LA(1),a===t.EXCLAM&&(this.state=998,this.match(t.EXCLAM),this.state=1e3,this._errHandler.sync(this),a=this._input.LA(1),(a===t.BOOLEAN||a===t.DATE||!(a-72&-32)&&1<<a-72&(1<<t.NUMBER-72|1<<t.STRING-72|1<<t.TIMESTAMP-72))&&(this.state=999,this.malloyType()));break;case t.DAY:case t.HOUR:case t.MINUTE:case t.MONTH:case t.QUARTER:case t.SECOND:case t.WEEK:case t.YEAR:this.state=1004,this.timeframe();break;default:throw new Yr.NoViableAltException(this)}this.state=1007,this.match(t.OPAREN),this.state=1009,this._errHandler.sync(this),a=this._input.LA(1),(!(a-33&-32)&&1<<a-33&(1<<t.ALL-33|1<<t.AVG-33|1<<t.CAST-33|1<<t.COUNT-33|1<<t.DAY-33|1<<t.EXCLUDE-33|1<<t.FALSE-33|1<<t.HOUR-33)||!(a-65&-32)&&1<<a-65&(1<<t.MAX-65|1<<t.MIN-65|1<<t.MINUTE-65|1<<t.MONTH-65|1<<t.NOT-65|1<<t.NOW-65|1<<t.NULL-65|1<<t.PICK-65|1<<t.QUARTER-65|1<<t.SECOND-65|1<<t.SOURCE_KW-65|1<<t.SUM-65|1<<t.TRUE-65|1<<t.WEEK-65|1<<t.YEAR-65|1<<t.HACKY_REGEX-65)||!(a-97&-32)&&1<<a-97&(1<<t.SQ_STRING-97|1<<t.DQ_STRING-97|1<<t.BQ_STRING-97|1<<t.OPAREN-97|1<<t.MINUS-97)||!(a-135&-32)&&1<<a-135&(1<<t.LITERAL_TIMESTAMP-135|1<<t.LITERAL_HOUR-135|1<<t.LITERAL_DAY-135|1<<t.LITERAL_QUARTER-135|1<<t.LITERAL_MONTH-135|1<<t.LITERAL_WEEK-135|1<<t.LITERAL_YEAR-135|1<<t.IDENTIFIER-135|1<<t.NUMERIC_LITERAL-135|1<<t.INTEGER_LITERAL-135|1<<t.SQL_BEGIN-135))&&(this.state=1008,this.argumentList()),this.state=1011,this.match(t.CPAREN)}break;case 12:i=new A9(i),this._ctx=i,s=i,this.state=1013,this.pickStatement();break;case 13:{for(i=new S9(i),this._ctx=i,s=i,this.state=1014,this.ungroup(),this.state=1015,this.match(t.OPAREN),this.state=1016,this.fieldExpr(0),this.state=1021,this._errHandler.sync(this),a=this._input.LA(1);a===t.COMMA;)this.state=1017,this.match(t.COMMA),this.state=1018,this.fieldName(),this.state=1023,this._errHandler.sync(this),a=this._input.LA(1);this.state=1024,this.match(t.CPAREN)}break}for(this._ctx._stop=this._input.tryLT(-1),this.state=1082,this._errHandler.sync(this),u=this.interpreter.adaptivePredict(this._input,103,this._ctx);u!==2&&u!==Wr.ATN.INVALID_ALT_NUMBER;){if(u===1)switch(this._parseListeners!=null&&this.triggerExitRuleEvent(),s=i,this.state=1080,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,102,this._ctx)){case 1:{if(i=new r9(new Ee(r,n)),this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1028,!this.precpred(this._ctx,21))throw this.createFailedPredicateException("this.precpred(this._ctx, 21)");this.state=1029,a=this._input.LA(1),!(a-125&-32)&&1<<a-125&(1<<t.STAR-125|1<<t.SLASH-125|1<<t.PERCENT-125)?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=1030,this.fieldExpr(22)}break;case 2:{if(i=new n9(new Ee(r,n)),this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1031,!this.precpred(this._ctx,20))throw this.createFailedPredicateException("this.precpred(this._ctx, 20)");this.state=1032,a=this._input.LA(1),a===t.PLUS||a===t.MINUS?(this._input.LA(1)===_i.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=1033,this.fieldExpr(21)}break;case 3:{if(i=new i9(new Ee(r,n)),this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1034,!this.precpred(this._ctx,19))throw this.createFailedPredicateException("this.precpred(this._ctx, 19)");this.state=1035,this.match(t.TO),this.state=1036,this.fieldExpr(20)}break;case 4:{if(i=new u9(new Ee(r,n)),this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1037,!this.precpred(this._ctx,15))throw this.createFailedPredicateException("this.precpred(this._ctx, 15)");this.state=1038,this.compareOp(),this.state=1039,this.fieldExpr(16)}break;case 5:{if(i=new f9(new Ee(r,n)),this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1041,!this.precpred(this._ctx,12))throw this.createFailedPredicateException("this.precpred(this._ctx, 12)");this.state=1042,this.match(t.AND),this.state=1043,this.fieldExpr(13)}break;case 6:{if(i=new x9(new Ee(r,n)),this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1044,!this.precpred(this._ctx,11))throw this.createFailedPredicateException("this.precpred(this._ctx, 11)");this.state=1045,this.match(t.OR),this.state=1046,this.fieldExpr(12)}break;case 7:{if(i=new d9(new Ee(r,n)),this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1047,!this.precpred(this._ctx,10))throw this.createFailedPredicateException("this.precpred(this._ctx, 10)");this.state=1048,this.match(t.DOUBLE_QMARK),this.state=1049,this.fieldExpr(11)}break;case 8:{if(i=new K8(new Ee(r,n)),this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1050,!this.precpred(this._ctx,28))throw this.createFailedPredicateException("this.precpred(this._ctx, 28)");this.state=1051,this.match(t.OCURLY),this.state=1052,this.filteredBy(),this.state=1053,this.match(t.CCURLY)}break;case 9:{if(i=new J8(new Ee(r,n)),this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1055,!this.precpred(this._ctx,26))throw this.createFailedPredicateException("this.precpred(this._ctx, 26)");this.state=1056,this.timeframe()}break;case 10:{if(i=new Z8(new Ee(r,n)),this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1057,!this.precpred(this._ctx,25))throw this.createFailedPredicateException("this.precpred(this._ctx, 25)");this.state=1058,this.match(t.DOT),this.state=1059,this.timeframe()}break;case 11:{if(i=new uT(new Ee(r,n)),this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1060,!this.precpred(this._ctx,24))throw this.createFailedPredicateException("this.precpred(this._ctx, 24)");this.state=1061,this.match(t.DOUBLECOLON),this.state=1062,this.malloyOrSQLType()}break;case 12:{if(i=new e9(new Ee(r,n)),this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1063,!this.precpred(this._ctx,23))throw this.createFailedPredicateException("this.precpred(this._ctx, 23)");this.state=1064,this.match(t.TRIPLECOLON),this.state=1065,this.malloyOrSQLType()}break;case 13:{if(i=new s9(new Ee(r,n)),i._startAt=s,this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1066,!this.precpred(this._ctx,18))throw this.createFailedPredicateException("this.precpred(this._ctx, 18)");this.state=1067,this.match(t.FOR),this.state=1068,i._duration=this.fieldExpr(0),this.state=1069,this.timeframe()}break;case 14:{if(i=new o9(new Ee(r,n)),this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1071,!this.precpred(this._ctx,17))throw this.createFailedPredicateException("this.precpred(this._ctx, 17)");this.state=1072,this.match(t.AMPER),this.state=1073,this.partialAllowedFieldExpr()}break;case 15:{if(i=new a9(new Ee(r,n)),this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1074,!this.precpred(this._ctx,16))throw this.createFailedPredicateException("this.precpred(this._ctx, 16)");this.state=1075,this.match(t.BAR),this.state=1076,this.partialAllowedFieldExpr()}break;case 16:{if(i=new l9(new Ee(r,n)),this.pushNewRecursionContext(i,o,t.RULE_fieldExpr),this.state=1077,!this.precpred(this._ctx,14))throw this.createFailedPredicateException("this.precpred(this._ctx, 14)");this.state=1078,this.match(t.QMARK),this.state=1079,this.partialAllowedFieldExpr()}break}this.state=1084,this._errHandler.sync(this),u=this.interpreter.adaptivePredict(this._input,103,this._ctx)}}}catch(u){if(u instanceof Z.RecognitionException)i.exception=u,this._errHandler.reportError(this,u),this._errHandler.recover(this,u);else throw u}finally{this.unrollRecursionContexts(r)}return i}partialAllowedFieldExpr(){let e=new bx(this._ctx,this.state);this.enterRule(e,212,t.RULE_partialAllowedFieldExpr);let r;try{switch(this.state=1096,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,106,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=1085,this.match(t.OPAREN),this.state=1087,this._errHandler.sync(this),r=this._input.LA(1),!(r-117&-32)&&1<<r-117&(1<<t.LT-117|1<<t.GT-117|1<<t.EQ-117|1<<t.NE-117|1<<t.LTE-117|1<<t.GTE-117|1<<t.NOT_MATCH-117|1<<t.MATCH-117)&&(this.state=1086,this.compareOp()),this.state=1089,this.fieldExpr(0),this.state=1090,this.match(t.CPAREN);break;case 2:this.enterOuterAlt(e,2),this.state=1093,this._errHandler.sync(this),r=this._input.LA(1),!(r-117&-32)&&1<<r-117&(1<<t.LT-117|1<<t.GT-117|1<<t.EQ-117|1<<t.NE-117|1<<t.LTE-117|1<<t.GTE-117|1<<t.NOT_MATCH-117|1<<t.MATCH-117)&&(this.state=1092,this.compareOp()),this.state=1095,this.fieldExpr(0);break}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}pickStatement(){let e=new lT(this._ctx,this.state);this.enterRule(e,214,t.RULE_pickStatement);try{let r;this.enterOuterAlt(e,1);{this.state=1099,this._errHandler.sync(this),r=1;do{switch(r){case 1:this.state=1098,this.pick();break;default:throw new Yr.NoViableAltException(this)}this.state=1101,this._errHandler.sync(this),r=this.interpreter.adaptivePredict(this._input,107,this._ctx)}while(r!==2&&r!==Wr.ATN.INVALID_ALT_NUMBER);switch(this.state=1105,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,108,this._ctx)){case 1:this.state=1103,this.match(t.ELSE),this.state=1104,e._pickElse=this.fieldExpr(0);break}}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}pick(){let e=new QA(this._ctx,this.state);this.enterRule(e,216,t.RULE_pick);let r;try{this.enterOuterAlt(e,1),this.state=1107,this.match(t.PICK),this.state=1109,this._errHandler.sync(this),r=this._input.LA(1),(!(r-33&-32)&&1<<r-33&(1<<t.ALL-33|1<<t.AVG-33|1<<t.CAST-33|1<<t.COUNT-33|1<<t.DAY-33|1<<t.EXCLUDE-33|1<<t.FALSE-33|1<<t.HOUR-33)||!(r-65&-32)&&1<<r-65&(1<<t.MAX-65|1<<t.MIN-65|1<<t.MINUTE-65|1<<t.MONTH-65|1<<t.NOT-65|1<<t.NOW-65|1<<t.NULL-65|1<<t.PICK-65|1<<t.QUARTER-65|1<<t.SECOND-65|1<<t.SOURCE_KW-65|1<<t.SUM-65|1<<t.TRUE-65|1<<t.WEEK-65|1<<t.YEAR-65|1<<t.HACKY_REGEX-65)||!(r-97&-32)&&1<<r-97&(1<<t.SQ_STRING-97|1<<t.DQ_STRING-97|1<<t.BQ_STRING-97|1<<t.OPAREN-97|1<<t.MINUS-97)||!(r-135&-32)&&1<<r-135&(1<<t.LITERAL_TIMESTAMP-135|1<<t.LITERAL_HOUR-135|1<<t.LITERAL_DAY-135|1<<t.LITERAL_QUARTER-135|1<<t.LITERAL_MONTH-135|1<<t.LITERAL_WEEK-135|1<<t.LITERAL_YEAR-135|1<<t.IDENTIFIER-135|1<<t.NUMERIC_LITERAL-135|1<<t.INTEGER_LITERAL-135|1<<t.SQL_BEGIN-135))&&(this.state=1108,e._pickValue=this.fieldExpr(0)),this.state=1111,this.match(t.WHEN),this.state=1112,e._pickWhen=this.partialAllowedFieldExpr()}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}argumentList(){let e=new VA(this._ctx,this.state);this.enterRule(e,218,t.RULE_argumentList);let r;try{let n;this.enterOuterAlt(e,1);{for(this.state=1114,this.fieldExpr(0),this.state=1119,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,110,this._ctx);n!==2&&n!==Wr.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=1115,this.match(t.COMMA),this.state=1116,this.fieldExpr(0)),this.state=1121,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,110,this._ctx);this.state=1123,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=1122,this.match(t.COMMA))}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}fieldNameList(){let e=new qm(this._ctx,this.state);this.enterRule(e,220,t.RULE_fieldNameList);let r;try{let n;for(this.enterOuterAlt(e,1),this.state=1125,this.fieldName(),this.state=1132,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,113,this._ctx);n!==2&&n!==Wr.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=1127,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=1126,this.match(t.COMMA)),this.state=1129,this.fieldName()),this.state=1134,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,113,this._ctx)}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}fieldCollection(){let e=new cT(this._ctx,this.state);this.enterRule(e,222,t.RULE_fieldCollection);let r;try{let n;this.enterOuterAlt(e,1);{for(this.state=1135,this.collectionMember(),this.state=1142,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,115,this._ctx);n!==2&&n!==Wr.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=1137,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=1136,this.match(t.COMMA)),this.state=1139,this.collectionMember()),this.state=1144,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,115,this._ctx);this.state=1146,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=1145,this.match(t.COMMA))}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}collectionWildCard(){let e=new fT(this._ctx,this.state);this.enterRule(e,224,t.RULE_collectionWildCard);let r;try{switch(this.enterOuterAlt(e,1),this.state=1151,this._errHandler.sync(this),r=this._input.LA(1),(r===t.BQ_STRING||r===t.IDENTIFIER)&&(this.state=1148,this.fieldPath(),this.state=1149,this.match(t.DOT)),this.state=1153,this.match(t.STAR),this.state=1155,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,118,this._ctx)){case 1:this.state=1154,this.starQualified();break}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}starQualified(){let e=new xT(this._ctx,this.state);this.enterRule(e,226,t.RULE_starQualified);let r;try{this.enterOuterAlt(e,1);{this.state=1157,this.match(t.OCURLY),this.state=1161,this._errHandler.sync(this),r=this._input.LA(1);do{switch(this.state=1161,this._errHandler.sync(this),this._input.LA(1)){case t.EXCEPT:this.state=1158,this.match(t.EXCEPT),this.state=1159,this.fieldNameList();break;case t.COMMA:this.state=1160,this.match(t.COMMA);break;default:throw new Yr.NoViableAltException(this)}this.state=1163,this._errHandler.sync(this),r=this._input.LA(1)}while(r===t.EXCEPT||r===t.COMMA);this.state=1165,this.match(t.CCURLY)}}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}taggedRef(){let e=new WA(this._ctx,this.state);this.enterRule(e,228,t.RULE_taggedRef);let r;try{this.enterOuterAlt(e,1),this.state=1167,this.tags(),this.state=1168,this.fieldPath(),this.state=1170,this._errHandler.sync(this),r=this._input.LA(1),r===t.DOT&&(this.state=1169,this.refExpr())}catch(n){if(n instanceof Z.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}refExpr(){let e=new dT(this._ctx,this.state);this.enterRule(e,230,t.RULE_refExpr);try{switch(this.state=1179,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,122,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=1172,this.match(t.DOT),this.state=1173,this.timeframe();break;case 2:this.enterOuterAlt(e,2),this.state=1174,this.match(t.DOT),this.state=1175,this.aggregate(),this.state=1176,this.match(t.OPAREN),this.state=1177,this.match(t.CPAREN);break}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}collectionMember(){let e=new YA(this._ctx,this.state);this.enterRule(e,232,t.RULE_collectionMember);try{switch(this.state=1184,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,123,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=1181,this.taggedRef();break;case 2:this.enterOuterAlt(e,2),this.state=1182,this.collectionWildCard();break;case 3:this.enterOuterAlt(e,3),this.state=1183,this.fieldDef();break}}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}fieldPath(){let e=new ju(this._ctx,this.state);this.enterRule(e,234,t.RULE_fieldPath);try{let r;for(this.enterOuterAlt(e,1),this.state=1186,this.fieldName(),this.state=1191,this._errHandler.sync(this),r=this.interpreter.adaptivePredict(this._input,124,this._ctx);r!==2&&r!==Wr.ATN.INVALID_ALT_NUMBER;)r===1&&(this.state=1187,this.match(t.DOT),this.state=1188,this.fieldName()),this.state=1193,this._errHandler.sync(this),r=this.interpreter.adaptivePredict(this._input,124,this._ctx)}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}joinName(){let e=new v9(this._ctx,this.state);this.enterRule(e,236,t.RULE_joinName);try{this.enterOuterAlt(e,1),this.state=1194,this.id()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}fieldName(){let e=new Is(this._ctx,this.state);this.enterRule(e,238,t.RULE_fieldName);try{this.enterOuterAlt(e,1),this.state=1196,this.id()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}justExpr(){let e=new _9(this._ctx,this.state);this.enterRule(e,240,t.RULE_justExpr);try{this.enterOuterAlt(e,1),this.state=1198,this.fieldExpr(0),this.state=1199,this.match(t.EOF)}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}sqlExploreNameRef(){let e=new b9(this._ctx,this.state);this.enterRule(e,242,t.RULE_sqlExploreNameRef);try{this.enterOuterAlt(e,1),this.state=1201,this.id()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}nameSQLBlock(){let e=new hT(this._ctx,this.state);this.enterRule(e,244,t.RULE_nameSQLBlock);try{this.enterOuterAlt(e,1),this.state=1203,this.id()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}connectionName(){let e=new pT(this._ctx,this.state);this.enterRule(e,246,t.RULE_connectionName);try{this.enterOuterAlt(e,1),this.state=1205,this.string()}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}experimentalStatementForTesting(){let e=new mT(this._ctx,this.state);this.enterRule(e,248,t.RULE_experimentalStatementForTesting);try{this.enterOuterAlt(e,1),this.state=1207,this.match(t.SEMI),this.state=1208,this.match(t.SEMI),this.state=1209,this.match(t.OBRACK),this.state=1210,this.string(),this.state=1211,this.match(t.CBRACK)}catch(r){if(r instanceof Z.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}sempred(e,r,n){switch(r){case 49:return this.sqExpr_sempred(e,n);case 50:return this.segExpr_sempred(e,n);case 105:return this.fieldExpr_sempred(e,n)}return!0}sqExpr_sempred(e,r){switch(r){case 0:return this.precpred(this._ctx,5);case 1:return this.precpred(this._ctx,4);case 2:return this.precpred(this._ctx,3)}return!0}segExpr_sempred(e,r){switch(r){case 3:return this.precpred(this._ctx,1)}return!0}fieldExpr_sempred(e,r){switch(r){case 4:return this.precpred(this._ctx,21);case 5:return this.precpred(this._ctx,20);case 6:return this.precpred(this._ctx,19);case 7:return this.precpred(this._ctx,15);case 8:return this.precpred(this._ctx,12);case 9:return this.precpred(this._ctx,11);case 10:return this.precpred(this._ctx,10);case 11:return this.precpred(this._ctx,28);case 12:return this.precpred(this._ctx,26);case 13:return this.precpred(this._ctx,25);case 14:return this.precpred(this._ctx,24);case 15:return this.precpred(this._ctx,23);case 16:return this.precpred(this._ctx,18);case 17:return this.precpred(this._ctx,17);case 18:return this.precpred(this._ctx,16);case 19:return this.precpred(this._ctx,14)}return!0}static get _ATN(){return t.__ATN||(t.__ATN=new ZKe.ATNDeserializer().deserialize(Lme.toCharArray(t._serializedATN))),t.__ATN}};C.MalloyParser=E;E.ACCEPT=1;E.AGGREGATE=2;E.CALCULATE=3;E.CALCULATION=4;E.CONNECTION=5;E.DECLARE=6;E.DIMENSION=7;E.EXCEPT=8;E.EXTENDQ=9;E.GROUP_BY=10;E.HAVING=11;E.INDEX=12;E.JOIN_CROSS=13;E.JOIN_ONE=14;E.JOIN_MANY=15;E.LIMIT=16;E.MEASURE=17;E.NEST=18;E.ORDER_BY=19;E.PRIMARY_KEY=20;E.PROJECT=21;E.QUERY=22;E.RENAME=23;E.RUN=24;E.SAMPLE=25;E.SELECT=26;E.SOURCE=27;E.SQLC=28;E.TOP=29;E.WHERE=30;E.VIEW=31;E.TIMEZONE=32;E.ALL=33;E.AND=34;E.AS=35;E.ASC=36;E.AVG=37;E.BOOLEAN=38;E.BY=39;E.CASE=40;E.CAST=41;E.CONDITION=42;E.COUNT=43;E.DATE=44;E.DAY=45;E.DESC=46;E.DISTINCT=47;E.ELSE=48;E.END=49;E.EXCLUDE=50;E.EXTEND=51;E.FALSE=52;E.FULL=53;E.FOR=54;E.FROM=55;E.FROM_SQL=56;E.HAS=57;E.HOUR=58;E.IMPORT=59;E.INNER=60;E.IS=61;E.JSON=62;E.LAST=63;E.LEFT=64;E.MAX=65;E.MIN=66;E.MINUTE=67;E.MONTH=68;E.NOT=69;E.NOW=70;E.NULL=71;E.NUMBER=72;E.ON=73;E.OR=74;E.PICK=75;E.QUARTER=76;E.RIGHT=77;E.SECOND=78;E.STRING=79;E.SOURCE_KW=80;E.SUM=81;E.SQL=82;E.TABLE=83;E.THEN=84;E.THIS=85;E.TIMESTAMP=86;E.TO=87;E.TRUE=88;E.TURTLE=89;E.WEEK=90;E.WHEN=91;E.WITH=92;E.YEAR=93;E.UNGROUPED=94;E.STRING_ESCAPE=95;E.HACKY_REGEX=96;E.SQ_STRING=97;E.DQ_STRING=98;E.BQ_STRING=99;E.DOC_ANNOTATION=100;E.ANNOTATION=101;E.AMPER=102;E.ARROW=103;E.FAT_ARROW=104;E.OPAREN=105;E.CPAREN=106;E.OBRACK=107;E.CBRACK=108;E.OCURLY=109;E.CCURLY=110;E.DOUBLECOLON=111;E.TRIPLECOLON=112;E.EXCLAM=113;E.COLON=114;E.COMMA=115;E.DOT=116;E.LT=117;E.GT=118;E.EQ=119;E.NE=120;E.LTE=121;E.GTE=122;E.PLUS=123;E.MINUS=124;E.STAR=125;E.STARSTAR=126;E.SLASH=127;E.BAR=128;E.SEMI=129;E.NOT_MATCH=130;E.MATCH=131;E.PERCENT=132;E.DOUBLE_QMARK=133;E.QMARK=134;E.LITERAL_TIMESTAMP=135;E.LITERAL_HOUR=136;E.LITERAL_DAY=137;E.LITERAL_QUARTER=138;E.LITERAL_MONTH=139;E.LITERAL_WEEK=140;E.LITERAL_YEAR=141;E.IDENTIFIER=142;E.PERCENT_LITERAL=143;E.NUMERIC_LITERAL=144;E.INTEGER_LITERAL=145;E.BLOCK_COMMENT=146;E.COMMENT_TO_EOL=147;E.WHITE_SPACE=148;E.SQL_BEGIN=149;E.CLOSE_CODE=150;E.UNWATED_CHARS_TRAILING_NUMBERS=151;E.UNEXPECTED_CHAR=152;E.OPEN_CODE=153;E.SQL_END=154;E.RULE_malloyDocument=0;E.RULE_malloyStatement=1;E.RULE_defineSourceStatement=2;E.RULE_defineQuery=3;E.RULE_topLevelAnonQueryDef=4;E.RULE_tags=5;E.RULE_isDefine=6;E.RULE_runStatement=7;E.RULE_defineSQLStatement=8;E.RULE_sqlBlock=9;E.RULE_blockSQLDef=10;E.RULE_sqlString=11;E.RULE_sqlInterpolation=12;E.RULE_importStatement=13;E.RULE_importSelect=14;E.RULE_importItem=15;E.RULE_importURL=16;E.RULE_docAnnotations=17;E.RULE_ignoredObjectAnnotations=18;E.RULE_ignoredModelAnnotations=19;E.RULE_topLevelQueryDefs=20;E.RULE_topLevelQueryDef=21;E.RULE_refineOperator=22;E.RULE_turtleName=23;E.RULE_sqlSource=24;E.RULE_exploreTable=25;E.RULE_connectionId=26;E.RULE_queryProperties=27;E.RULE_filterShortcut=28;E.RULE_queryName=29;E.RULE_sourcePropertyList=30;E.RULE_sourceDefinition=31;E.RULE_sqExplore=32;E.RULE_sourceNameDef=33;E.RULE_sourceID=34;E.RULE_exploreProperties=35;E.RULE_exploreStatement=36;E.RULE_defMeasures=37;E.RULE_defDimensions=38;E.RULE_renameList=39;E.RULE_exploreRenameDef=40;E.RULE_defList=41;E.RULE_fieldDef=42;E.RULE_fieldNameDef=43;E.RULE_joinNameDef=44;E.RULE_declareStatement=45;E.RULE_joinStatement=46;E.RULE_queryExtend=47;E.RULE_modEither=48;E.RULE_sqExpr=49;E.RULE_segExpr=50;E.RULE_vExpr=51;E.RULE_queryExtendStatement=52;E.RULE_queryExtendStatementList=53;E.RULE_joinList=54;E.RULE_isExplore=55;E.RULE_matrixOperation=56;E.RULE_joinDef=57;E.RULE_joinExpression=58;E.RULE_filterStatement=59;E.RULE_filteredBy=60;E.RULE_filterClauseList=61;E.RULE_whereStatement=62;E.RULE_havingStatement=63;E.RULE_subQueryDefList=64;E.RULE_exploreQueryNameDef=65;E.RULE_exploreQueryDef=66;E.RULE_queryStatement=67;E.RULE_queryJoinStatement=68;E.RULE_groupByStatement=69;E.RULE_queryFieldList=70;E.RULE_queryFieldEntry=71;E.RULE_nestStatement=72;E.RULE_nestedQueryList=73;E.RULE_nestEntry=74;E.RULE_aggregateStatement=75;E.RULE_calculateStatement=76;E.RULE_projectStatement=77;E.RULE_orderByStatement=78;E.RULE_ordering=79;E.RULE_orderBySpec=80;E.RULE_limitStatement=81;E.RULE_bySpec=82;E.RULE_topStatement=83;E.RULE_indexElement=84;E.RULE_indexFields=85;E.RULE_indexStatement=86;E.RULE_sampleStatement=87;E.RULE_timezoneStatement=88;E.RULE_queryAnnotation=89;E.RULE_sampleSpec=90;E.RULE_aggregate=91;E.RULE_malloyType=92;E.RULE_compareOp=93;E.RULE_string=94;E.RULE_shortString=95;E.RULE_numericLiteral=96;E.RULE_literal=97;E.RULE_dateLiteral=98;E.RULE_tablePath=99;E.RULE_tableURI=100;E.RULE_id=101;E.RULE_timeframe=102;E.RULE_ungroup=103;E.RULE_malloyOrSQLType=104;E.RULE_fieldExpr=105;E.RULE_partialAllowedFieldExpr=106;E.RULE_pickStatement=107;E.RULE_pick=108;E.RULE_argumentList=109;E.RULE_fieldNameList=110;E.RULE_fieldCollection=111;E.RULE_collectionWildCard=112;E.RULE_starQualified=113;E.RULE_taggedRef=114;E.RULE_refExpr=115;E.RULE_collectionMember=116;E.RULE_fieldPath=117;E.RULE_joinName=118;E.RULE_fieldName=119;E.RULE_justExpr=120;E.RULE_sqlExploreNameRef=121;E.RULE_nameSQLBlock=122;E.RULE_connectionName=123;E.RULE_experimentalStatementForTesting=124;E.ruleNames=["malloyDocument","malloyStatement","defineSourceStatement","defineQuery","topLevelAnonQueryDef","tags","isDefine","runStatement","defineSQLStatement","sqlBlock","blockSQLDef","sqlString","sqlInterpolation","importStatement","importSelect","importItem","importURL","docAnnotations","ignoredObjectAnnotations","ignoredModelAnnotations","topLevelQueryDefs","topLevelQueryDef","refineOperator","turtleName","sqlSource","exploreTable","connectionId","queryProperties","filterShortcut","queryName","sourcePropertyList","sourceDefinition","sqExplore","sourceNameDef","sourceID","exploreProperties","exploreStatement","defMeasures","defDimensions","renameList","exploreRenameDef","defList","fieldDef","fieldNameDef","joinNameDef","declareStatement","joinStatement","queryExtend","modEither","sqExpr","segExpr","vExpr","queryExtendStatement","queryExtendStatementList","joinList","isExplore","matrixOperation","joinDef","joinExpression","filterStatement","filteredBy","filterClauseList","whereStatement","havingStatement","subQueryDefList","exploreQueryNameDef","exploreQueryDef","queryStatement","queryJoinStatement","groupByStatement","queryFieldList","queryFieldEntry","nestStatement","nestedQueryList","nestEntry","aggregateStatement","calculateStatement","projectStatement","orderByStatement","ordering","orderBySpec","limitStatement","bySpec","topStatement","indexElement","indexFields","indexStatement","sampleStatement","timezoneStatement","queryAnnotation","sampleSpec","aggregate","malloyType","compareOp","string","shortString","numericLiteral","literal","dateLiteral","tablePath","tableURI","id","timeframe","ungroup","malloyOrSQLType","fieldExpr","partialAllowedFieldExpr","pickStatement","pick","argumentList","fieldNameList","fieldCollection","collectionWildCard","starQualified","taggedRef","refExpr","collectionMember","fieldPath","joinName","fieldName","justExpr","sqlExploreNameRef","nameSQLBlock","connectionName","experimentalStatementForTesting"];E._LITERAL_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"'&'","'->'","'=>'","'('","')'","'['","']'","'{'","'}'","'::'","':::'","'!'","':'","','","'.'","'<'","'>'","'='","'!='","'<='","'>='","'+'","'-'","'*'","'**'","'/'","'|'","';'","'!~'","'~'","'%'","'??'","'?'",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,`'"""'`,"'}%'"];E._SYMBOLIC_NAMES=[void 0,"ACCEPT","AGGREGATE","CALCULATE","CALCULATION","CONNECTION","DECLARE","DIMENSION","EXCEPT","EXTENDQ","GROUP_BY","HAVING","INDEX","JOIN_CROSS","JOIN_ONE","JOIN_MANY","LIMIT","MEASURE","NEST","ORDER_BY","PRIMARY_KEY","PROJECT","QUERY","RENAME","RUN","SAMPLE","SELECT","SOURCE","SQLC","TOP","WHERE","VIEW","TIMEZONE","ALL","AND","AS","ASC","AVG","BOOLEAN","BY","CASE","CAST","CONDITION","COUNT","DATE","DAY","DESC","DISTINCT","ELSE","END","EXCLUDE","EXTEND","FALSE","FULL","FOR","FROM","FROM_SQL","HAS","HOUR","IMPORT","INNER","IS","JSON","LAST","LEFT","MAX","MIN","MINUTE","MONTH","NOT","NOW","NULL","NUMBER","ON","OR","PICK","QUARTER","RIGHT","SECOND","STRING","SOURCE_KW","SUM","SQL","TABLE","THEN","THIS","TIMESTAMP","TO","TRUE","TURTLE","WEEK","WHEN","WITH","YEAR","UNGROUPED","STRING_ESCAPE","HACKY_REGEX","SQ_STRING","DQ_STRING","BQ_STRING","DOC_ANNOTATION","ANNOTATION","AMPER","ARROW","FAT_ARROW","OPAREN","CPAREN","OBRACK","CBRACK","OCURLY","CCURLY","DOUBLECOLON","TRIPLECOLON","EXCLAM","COLON","COMMA","DOT","LT","GT","EQ","NE","LTE","GTE","PLUS","MINUS","STAR","STARSTAR","SLASH","BAR","SEMI","NOT_MATCH","MATCH","PERCENT","DOUBLE_QMARK","QMARK","LITERAL_TIMESTAMP","LITERAL_HOUR","LITERAL_DAY","LITERAL_QUARTER","LITERAL_MONTH","LITERAL_WEEK","LITERAL_YEAR","IDENTIFIER","PERCENT_LITERAL","NUMERIC_LITERAL","INTEGER_LITERAL","BLOCK_COMMENT","COMMENT_TO_EOL","WHITE_SPACE","SQL_BEGIN","CLOSE_CODE","UNWATED_CHARS_TRAILING_NUMBERS","UNEXPECTED_CHAR","OPEN_CODE","SQL_END"];E.VOCABULARY=new nXe.VocabularyImpl(E._LITERAL_NAMES,E._SYMBOLIC_NAMES,[]);E._serializedATNSegments=3;E._serializedATNSegment0=`\uC91D\uCABA\u058D\uAFBA\u4F53\u0607\uEA8B\uC241\x9C\u04C0					\x07	\x07\b	\b			
	
\v	\v\f	\f\r	\r													\x1B	\x1B				 	 !	!"	"#	#$	$%	%&	&'	'(	()	)*	*+	+,	,-	-.	./	/0	01	12	23	34	45	56	67	78	89	9:	:;	;<	<=	=>	>?	?@	@A	AB	BC	CD	DE	EF	FG	GH	HI	IJ	JK	KL	LM	MN	NO	OP	PQ	QR	RS	ST	TU	UV	VW	WX	XY	YZ	Z[	[\\	\\]	]^	^_	_\`	\`a	ab	bc	cd	de	ef	fg	gh	hi	ij	jk	kl	lm	mn	no	op	pq	qr	rs	st	tu	uv	vw	wx	xy	yz	z{	{|	|}	}~	~\x07\xFF
\f\u0102\v\u010E
\u0119
\x07\x07\x07\u011F
\x07\f\x07\x07\u0122\v\x07\b\b\b\b				




\v\v\v\u0133
\v\r\v\v\u0134\v\v\f\f\f\f\f\u013D
\f\r\r\x07\r\u0141
\r\f\r\r\u0144\v\r\r\r\u014E
\x07\u0156
\f\u0159\v\u0161
\u0166
\r\u0167\u016B
\r\u016C\u0170
\r\u0171\u0178
\x07\u017B
\f\u017E\v\u0181
\u0192
\x1B\x1B\x1B\x1B\x1B\x1B\x1B\x1B\x1B\x1B\x1B\x1B\x1B\u01A2
\x1B\x07\u01AA
\f\u01AD\v\u01B0
   \u01BB
  \x07 \u01BE
 \f  \u01C1\v   \u01C4
 !!!!!""##$$%%%\x07%\u01D4
%\f%%\u01D7\v%%%%\u01DB
%&&&&&&&&&&&&&&&&&&\u01EE
&\r&&\u01EF&&\u01F3
&''''(((()))\u01FF
))\x07)\u0202
)\f))\u0205\v)))\u0208
)****+++\u0210
++\x07+\u0213
+\f++\u0216\v+++\u0219
+,,,,,--..///0000000000000\u0233
01112222\u023B
2333333333\u0245
3333333333\x073\u0250
3\f33\u0253\v344444444\u025C
4444\x074\u0261
4\f44\u0264\v4555555\u026B
56666\u0270
6777\x077\u0275
7\f77\u0278\v777888\u027E
88\x078\u0281
8\f88\u0284\v888\u0287
899999::;\x07;\u0291
;\f;;\u0294\v;;;;\u0298
;;;\u029B
;;;;;\x07;\u02A1
;\f;;\u02A4\v;;;;\u02A8
;;;\u02AB
;;;;\u02AF
;;\u02B1
;<<===\u02B7
=>>>>\u02BC
>???\x07?\u02C1
?\f??\u02C4\v???\u02C7
?@@@AAABBB\u02D1
BB\x07B\u02D4
B\fBB\u02D7\vBBB\u02DA
BCCD\x07D\u02DF
D\fDD\u02E2\vDDDDDEEEEEEEEEEEEEEEEEEE\u02FA
EFFGGGGHHH\u0304
HH\x07H\u0307
H\fHH\u030A\vHHH\u030D
HIII\u0311
IJJJJKKK\u0319
KK\x07K\u031C
K\fKK\u031F\vKKK\u0322
KLLLLL\u0328
LLLLLLL\u032F
LMMMMNNNNOOOOPPPQQQ\u0342
QQ\x07Q\u0345
Q\fQQ\u0348\vQQQ\u034B
QRRR\u034F
RRR\u0352
RSSSTTTTT\u035B
TUUUU\u0360
UVVVV\u0365
VVV\u0368
VWWW\u036C
WW\x07W\u036F
W\fWW\u0372\vWXXXXX\u0378
XYYYZZZ[[\\\\]]^^__\`\`\`\u038C
\`aabbcccccccc\u0399
cdddddddd\u03A2
deeffgghhiijjj\u03B0
jkkkkkkkkkkkkkkkkkkkkkkk\u03C8
kkkkkk\u03CE
kkkkkkkkk\u03D7
kkkkkkkkkkkkk\u03E4
kkkkkkk\u03EB
kk\u03ED
kkk\u03F0
kkkk\u03F4
kkkkkkkkk\x07k\u03FE
k\fkk\u0401\vkkkk\u0405
kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk\x07k\u043B
k\fkk\u043E\vklll\u0442
llllll\u0448
lll\u044B
lmm\u044E
m\rmm\u044Fmmm\u0454
mnnn\u0458
nnnnooo\x07o\u0460
o\foo\u0463\vooo\u0466
oppp\u046A
pp\x07p\u046D
p\fpp\u0470\vpqqq\u0474
qq\x07q\u0477
q\fqq\u047A\vqqq\u047D
qrrrr\u0482
rrrr\u0486
rsssss\u048C
s\rss\u048Dsstttt\u0495
tuuuuuuuu\u049E
uvvvv\u04A3
vwww\x07w\u04A8
w\fww\u04AB\vwxxyyzzz{{||}}~~~~~~~df\xD4\x7F\b
\f "$&(*,.02468:<>@BDFHJLNPRTVXZ\\^\`bdfhjlnprtvxz|~\x80\x82\x84\x86\x88\x8A\x8C\x8E\x90\x92\x94\x96\x98\x9A\x9C\x9E\xA0\xA2\xA4\xA6\xA8\xAA\xAC\xAE\xB0\xB2\xB4\xB6\xB8\xBA\xBC\xBE\xC0\xC2\xC4\xC6\xC8\xCA\xCC\xCE\xD0\xD2\xD4\xD6\xD8\xDA\xDC\xDE\xE0\xE2\xE4\xE6\xE8\xEA\xEC\xEE\xF0\xF2\xF4\xF6\xF8\xFApp\x98\x98

!!77>>BBOO&&0066ZZ\x91\x91\x93\x93''--CDSS\x07((..JJQQXXw|\x84\x85cd\x92\x9366ZZee\x90\x90	//<<EFNNPP\\\\__##44\x7F\x7F\x81\x81\x86\x86}~\u050B\u0100\u010D\u010F\b\u0118
\u011A\f\u0120\u0123\u0127\u012B\u0130\u013C\u013E\u0147\u014B\u0151 \u015D"\u0162$\u0165&\u016A(\u016F*\u0173,\u0182.\u01870\u01892\u018B4\u01A16\u01A38\u01AF:\u01B1<\u01B6>\u01B8@\u01C5B\u01CAD\u01CCF\u01CEH\u01DAJ\u01F2L\u01F4N\u01F8P\u01FCR\u0209T\u020DV\u021AX\u021FZ\u0221\\\u0223^\u0232\`\u0234b\u023Ad\u0244f\u025Bh\u026Aj\u026Fl\u0271n\u027Bp\u0288r\u028Dt\u02B0v\u02B2x\u02B6z\u02BB|\u02BD~\u02C8\x80\u02CB\x82\u02CE\x84\u02DB\x86\u02E0\x88\u02F9\x8A\u02FB\x8C\u02FD\x8E\u0301\x90\u0310\x92\u0312\x94\u0316\x96\u032E\x98\u0330\x9A\u0334\x9C\u0338\x9E\u033C\xA0\u033F\xA2\u034E\xA4\u0353\xA6\u035A\xA8\u035C\xAA\u0367\xAC\u0369\xAE\u0373\xB0\u0379\xB2\u037C\xB4\u037F\xB6\u0381\xB8\u0383\xBA\u0385\xBC\u0387\xBE\u038B\xC0\u038D\xC2\u038F\xC4\u0398\xC6\u03A1\xC8\u03A3\xCA\u03A5\xCC\u03A7\xCE\u03A9\xD0\u03AB\xD2\u03AF\xD4\u0404\xD6\u044A\xD8\u044D\xDA\u0455\xDC\u045C\xDE\u0467\xE0\u0471\xE2\u0481\xE4\u0487\xE6\u0491\xE8\u049D\xEA\u04A2\xEC\u04A4\xEE\u04AC\xF0\u04AE\xF2\u04B0\xF4\u04B3\xF6\u04B5\xF8\u04B7\xFA\u04B9\xFC\xFF\xFD\xFF\x07\x83\xFE\xFC\xFE\xFD\xFF\u0102\u0100\xFE\u0100\u0101\u0101\u0103\u0102\u0100\u0103\u0104\x07\u0104\u0105\u010E\u0106\u010E
\u0107\u010E\b\u0108\u010E\u0109\u010E	\u010A\u010E$\u010B\u010E&\u010C\u010E\xFA~\u010D\u0105\u010D\u0106\u010D\u0107\u010D\u0108\u010D\u0109\u010D\u010A\u010D\u010B\u010D\u010C\u010E\u010F\u0110\f\x07\u0110\u0111\x07\u0111\u0112> \u0112\x07\u0113\u0119*\u0114\u0115\f\x07\u0115\u0116\x07\u0116\u0117
\u0117\u0119\u0118\u0113\u0118\u0114\u0119	\u011A\u011B\f\x07\u011B\u011Cd3\u011C\v\u011D\u011F\x07g\u011E\u011D\u011F\u0122\u0120\u011E\u0120\u0121\u0121\r\u0122\u0120\u0123\u0124\f\x07\u0124\u0125\x07?\u0125\u0126\f\x07\u0126\u0127\u0128\f\x07\u0128\u0129\x07\u0129\u012A
\u012A\u012B\u012C\x07\u012C\u012D\xF6|\u012D\u012E\b\u012E\u012F\v\u012F\u0130\u0132\x07o\u0131\u0133\f\u0132\u0131\u0133\u0134\u0134\u0132\u0134\u0135\u0135\u0136\u0136\u0137\x07p\u0137\u0138\u0139\x07\x07\u0139\u013D\xF8}\u013A\u013B\x07\u013B\u013D\r\u013C\u0138\u013C\u013A\u013D\u013E\u0142\x07\x97\u013F\u0141\u0140\u013F\u0141\u0144\u0142\u0140\u0142\u0143\u0143\u0145\u0144\u0142\u0145\u0146\x07\x9C\u0146\u0147\u0148\x07\x9B\u0148\u0149d3\u0149\u014A	\u014A\x1B\u014B\u014D\x07=\u014C\u014E\u014D\u014C\u014D\u014E\u014E\u014F\u014F\u0150"\u0150\u0151\u0152\x07o\u0152\u0157 \u0153\u0154\x07u\u0154\u0156 \u0155\u0153\u0156\u0159\u0157\u0155\u0157\u0158\u0158\u015A\u0159\u0157\u015A\u015B\x07p\u015B\u015C\x079\u015C\u015D\u0160\xCCg\u015E\u015F\x07?\u015F\u0161\xCCg\u0160\u015E\u0160\u0161\u0161!\u0162\u0163\xBE\`\u0163#\u0164\u0166\x07f\u0165\u0164\u0166\u0167\u0167\u0165\u0167\u0168\u0168%\u0169\u016B\x07g\u016A\u0169\u016B\u016C\u016C\u016A\u016C\u016D\u016D'\u016E\u0170\x07f\u016F\u016E\u0170\u0171\u0171\u016F\u0171\u0172\u0172)\u0173\u0174\f\x07\u0174\u0175\x07\u0175\u017C,\u0176\u0178\x07u\u0177\u0176\u0177\u0178\u0178\u0179\u0179\u017B,\u017A\u0177\u017B\u017E\u017C\u017A\u017C\u017D\u017D\u0180\u017E\u017C\u017F\u0181\x07u\u0180\u017F\u0180\u0181\u0181+\u0182\u0183\f\x07\u0183\u0184<\u0184\u0185\b\u0185\u0186d3\u0186-\u0187\u0188\x07}\u0188/\u0189\u018A\xCCg\u018A1\u018B\u018C6\u018C\u018D\x07v\u018D\u018E\x07T\u018E\u0191\x07k\u018F\u0192\r\u0190\u0192\xC0a\u0191\u018F\u0191\u0190\u0192\u0193\u0193\u0194\x07l\u01943\u0195\u0196\x07U\u0196\u0197\x07k\u0197\u0198\xCAf\u0198\u0199\x07l\u0199\u01A2\u019A\u019B6\u019B\u019C\x07v\u019C\u019D\x07U\u019D\u019E\x07k\u019E\u019F\xC8e\u019F\u01A0\x07l\u01A0\u01A2\u01A1\u0195\u01A1\u019A\u01A25\u01A3\u01A4\xCCg\u01A47\u01A5\u01B0:\u01A6\u01AB\x07o\u01A7\u01AA\x88E\u01A8\u01AA\x07\x83\u01A9\u01A7\u01A9\u01A8\u01AA\u01AD\u01AB\u01A9\u01AB\u01AC\u01AC\u01AE\u01AD\u01AB\u01AE\u01B0\x07p\u01AF\u01A5\u01AF\u01A6\u01B09\u01B1\u01B2\x07o\u01B2\u01B3\x07`;E._serializedATNSegment1="\x88\u01B3\u01B4\xD4k\u01B4\u01B5\x07p\u01B5;\u01B6\u01B7\xCCg\u01B7=\u01B8\u01BF@!\u01B9\u01BB\x07u\u01BA\u01B9\u01BA\u01BB\u01BB\u01BC\u01BC\u01BE@!\u01BD\u01BA\u01BE\u01C1\u01BF\u01BD\u01BF\u01C0\u01C0\u01C3\u01C1\u01BF\u01C2\u01C4\x07u\u01C3\u01C2\u01C3\u01C4\u01C4?\u01C5\u01C6\f\x07\u01C6\u01C7D#\u01C7\u01C8\b\u01C8\u01C9B\"\u01C9A\u01CA\u01CBd3\u01CBC\u01CC\u01CD\xCCg\u01CDE\u01CE\u01CF\xCCg\u01CFG\u01D0\u01D5\x07o\u01D1\u01D4J&\u01D2\u01D4\x07\x83\u01D3\u01D1\u01D3\u01D2\u01D4\u01D7\u01D5\u01D3\u01D5\u01D6\u01D6\u01D8\u01D7\u01D5\u01D8\u01DB\x07p\u01D9\u01DB:\u01DA\u01D0\u01DA\u01D9\u01DBI\u01DC\u01F3N(\u01DD\u01F3L'\u01DE\u01F3\\/\u01DF\u01F3^0\u01E0\u01F3~@\u01E1\u01E2\x07\u01E2\u01F3\xF0y\u01E3\u01E4\x07\u01E4\u01F3P)\u01E5\u01E6	\u01E6\u01F3\xDEp\u01E7\u01E8\f\x07\u01E8\u01E9	\u01E9\u01EA\x82B\u01EA\u01F3\u01EB\u01F3\xB2Z\u01EC\u01EE\x07g\u01ED\u01EC\u01EE\u01EF\u01EF\u01ED\u01EF\u01F0\u01F0\u01F3\u01F1\u01F3(\u01F2\u01DC\u01F2\u01DD\u01F2\u01DE\u01F2\u01DF\u01F2\u01E0\u01F2\u01E1\u01F2\u01E3\u01F2\u01E5\u01F2\u01E7\u01F2\u01EB\u01F2\u01ED\u01F2\u01F1\u01F3K\u01F4\u01F5\f\x07\u01F5\u01F6\x07\u01F6\u01F7T+\u01F7M\u01F8\u01F9\f\x07\u01F9\u01FA\x07	\u01FA\u01FBT+\u01FBO\u01FC\u0203R*\u01FD\u01FF\x07u\u01FE\u01FD\u01FE\u01FF\u01FF\u0200\u0200\u0202R*\u0201\u01FE\u0202\u0205\u0203\u0201\u0203\u0204\u0204\u0207\u0205\u0203\u0206\u0208\x07u\u0207\u0206\u0207\u0208\u0208Q\u0209\u020A\xF0y\u020A\u020B\b\u020B\u020C\xF0y\u020CS\u020D\u0214V,\u020E\u0210\x07u\u020F\u020E\u020F\u0210\u0210\u0211\u0211\u0213V,\u0212\u020F\u0213\u0216\u0214\u0212\u0214\u0215\u0215\u0218\u0216\u0214\u0217\u0219\x07u\u0218\u0217\u0218\u0219\u0219U\u021A\u021B\f\x07\u021B\u021CX-\u021C\u021D\b\u021D\u021E\xD4k\u021EW\u021F\u0220\xCCg\u0220Y\u0221\u0222\xCCg\u0222[\u0223\u0224\x07\b\u0224\u0225T+\u0225]\u0226\u0227\f\x07\u0227\u0228\x07\u0228\u0229n8\u0229\u0233\u022A\u022B\f\x07\u022B\u022C\x07\u022C\u022Dn8\u022D\u0233\u022E\u022F\f\x07\u022F\u0230\x07\u0230\u0231n8\u0231\u0233\u0232\u0226\u0232\u022A\u0232\u022E\u0233_\u0234\u0235\x07\v\u0235\u0236l7\u0236a\u0237\u023B^0\u0238\u023B~@\u0239\u023B\\/\u023A\u0237\u023A\u0238\u023A\u0239\u023Bc\u023C\u023D\b3\u023D\u0245\xCCg\u023E\u023F\x07k\u023F\u0240d3\u0240\u0241\x07l\u0241\u0245\u0242\u02454\x1B\u0243\u02452\u0244\u023C\u0244\u023E\u0244\u0242\u0244\u0243\u0245\u0251\u0246\u0247\f\x07\u0247\u0248\x07}\u0248\u0250f4\u0249\u024A\f\u024A\u024B\x07i\u024B\u0250f4\u024C\u024D\f\u024D\u024E\x075\u024E\u0250H%\u024F\u0246\u024F\u0249\u024F\u024C\u0250\u0253\u0251\u024F\u0251\u0252\u0252e\u0253\u0251\u0254\u0255\b4\u0255\u025C\xECw\u0256\u025C8\u0257\u0258\x07k\u0258\u0259h5\u0259\u025A\x07l\u025A\u025C\u025B\u0254\u025B\u0256\u025B\u0257\u025C\u0262\u025D\u025E\f\u025E\u025F\x07}\u025F\u0261f4\u0260\u025D\u0261\u0264\u0262\u0260\u0262\u0263\u0263g\u0264\u0262\u0265\u026Bf4\u0266\u0267f4\u0267\u0268\x07i\u0268\u0269h5\u0269\u026B\u026A\u0265\u026A\u0266\u026Bi\u026C\u0270N(\u026D\u0270L'\u026E\u0270^0\u026F\u026C\u026F\u026D\u026F\u026E\u0270k\u0271\u0276\x07o\u0272\u0275j6\u0273\u0275\x07\x83\u0274\u0272\u0274\u0273\u0275\u0278\u0276\u0274\u0276\u0277\u0277\u0279\u0278\u0276\u0279\u027A\x07p\u027Am\u027B\u0282t;\u027C\u027E\x07u\u027D\u027C\u027D\u027E\u027E\u027F\u027F\u0281t;\u0280\u027D\u0281\u0284\u0282\u0280\u0282\u0283\u0283\u0286\u0284\u0282\u0285\u0287\x07u\u0286\u0285\u0286\u0287\u0287o\u0288\u0289\f\x07\u0289\u028A\x07?\u028A\u028B\f\x07\u028B\u028Cd3\u028Cq\u028D\u028E	\u028Es\u028F\u0291\x07g\u0290\u028F\u0291\u0294\u0292\u0290\u0292\u0293\u0293\u0295\u0294\u0292\u0295\u0297Z.\u0296\u0298p9\u0297\u0296\u0297\u0298\u0298\u029A\u0299\u029Br:\u029A\u0299\u029A\u029B\u029B\u029C\u029C\u029D\x07^\u029D\u029E\xD4k\u029E\u02B1\u029F\u02A1\x07g\u02A0\u029F\u02A1\u02A4\u02A2\u02A0\u02A2\u02A3\u02A3\u02A5\u02A4\u02A2\u02A5\u02A7Z.\u02A6\u02A8p9\u02A7\u02A6\u02A7\u02A8\u02A8\u02AE\u02A9\u02ABr:\u02AA\u02A9\u02AA\u02AB\u02AB\u02AC\u02AC\u02AD\x07K\u02AD\u02AFv<\u02AE\u02AA\u02AE\u02AF\u02AF\u02B1\u02B0\u0292\u02B0\u02A2\u02B1u\u02B2\u02B3\xD4k\u02B3w\u02B4\u02B7~@\u02B5\u02B7\x80A\u02B6\u02B4\u02B6\u02B5\u02B7y\u02B8\u02B9\x07\x88\u02B9\u02BC\xD4k\u02BA\u02BC~@\u02BB\u02B8\u02BB\u02BA\u02BC{\u02BD\u02C2\xD4k\u02BE\u02BF\x07u\u02BF\u02C1\xD4k\u02C0\u02BE\u02C1\u02C4\u02C2\u02C0\u02C2\u02C3\u02C3\u02C6\u02C4\u02C2\u02C5\u02C7\x07u\u02C6\u02C5\u02C6\u02C7\u02C7}\u02C8\u02C9\x07 \u02C9\u02CA|?\u02CA\x7F\u02CB\u02CC\x07\r\u02CC\u02CD|?\u02CD\x81\u02CE\u02D5\x86D\u02CF\u02D1\x07u\u02D0\u02CF\u02D0\u02D1\u02D1\u02D2\u02D2\u02D4\x86D\u02D3\u02D0\u02D4\u02D7\u02D5\u02D3\u02D5\u02D6\u02D6\u02D9\u02D7\u02D5\u02D8\u02DA\x07u\u02D9\u02D8\u02D9\u02DA\u02DA\x83\u02DB\u02DC\xCCg\u02DC\x85\u02DD\u02DF\x07g\u02DE\u02DD\u02DF\u02E2\u02E0\u02DE\u02E0\u02E1\u02E1\u02E3\u02E2\u02E0\u02E3\u02E4\x84C\u02E4\u02E5\b\u02E5\u02E6h5\u02E6\x87\u02E7\u02FA\x8CG\u02E8\u02FA\\/\u02E9\u02FA\x8AF\u02EA\u02FA`1\u02EB\u02FA\x9CO\u02EC\u02FA\xAEX\u02ED\u02FA\x98M\u02EE\u02FA\x9AN\u02EF\u02FA\xA8U\u02F0\u02FA\xA4S\u02F1\u02FA\x9EP\u02F2\u02FA~@\u02F3\u02FA\x80A\u02F4\u02FA\x92J\u02F5\u02FA\xB0Y\u02F6\u02FA\xB2Z\u02F7\u02FA\xB4[\u02F8\u02FA(\u02F9\u02E7\u02F9\u02E8\u02F9\u02E9\u02F9\u02EA\u02F9\u02EB\u02F9\u02EC\u02F9\u02ED\u02F9\u02EE\u02F9\u02EF\u02F9\u02F0\u02F9\u02F1\u02F9\u02F2\u02F9\u02F3\u02F9\u02F4\u02F9\u02F5\u02F9\u02F6\u02F9\u02F7\u02F9\u02F8\u02FA\x89\u02FB\u02FC^0\u02FC\x8B\u02FD\u02FE\f\x07\u02FE\u02FF\x07\f\u02FF\u0300\x8EH\u0300\x8D\u0301\u0308\x90I\u0302\u0304\x07u\u0303\u0302\u0303\u0304\u0304\u0305\u0305\u0307\x90I\u0306\u0303\u0307\u030A\u0308\u0306\u0308\u0309\u0309\u030C\u030A\u0308\u030B\u030D\x07u\u030C\u030B\u030C\u030D\u030D\x8F\u030E\u0311\xE6t\u030F\u0311V,\u0310\u030E\u0310\u030F\u0311\x91\u0312\u0313\f\x07\u0313\u0314\x07\u0314\u0315\x94K\u0315\x93\u0316\u031D\x96L\u0317\u0319\x07u\u0318\u0317\u0318\u0319\u0319\u031A\u031A\u031C\x96L\u031B\u0318\u031C\u031F\u031D\u031B\u031D\u031E\u031E\u0321\u031F\u031D\u0320\u0322\x07u\u0321\u0320\u0321\u0322\u0322\x95\u0323\u0324\f\x07\u0324\u0327\xECw\u0325\u0326\x07}\u0326\u0328h5\u0327\u0325\u0327\u0328\u0328\u032F\u0329\u032A\f\x07\u032A\u032B<\u032B\u032C\b\u032C\u032Dh5\u032D\u032F\u032E\u0323\u032E\u0329\u032F\x97\u0330\u0331\f\x07\u0331\u0332\x07\u0332\u0333\x8EH\u0333\x99\u0334\u0335\f\x07\u0335\u0336\x07\u0336\u0337\x8EH\u0337\x9B\u0338\u0339\f\x07\u0339\u033A	\u033A\u033B\xE0q\u033B\x9D\u033C\u033D\x07\u033D\u033E\xA0Q\u033E\x9F\u033F\u0346\xA2R\u0340\u0342\x07u\u0341\u0340\u0341\u0342\u0342\u0343\u0343\u0345\xA2R\u0344\u0341\u0345\u0348\u0346\u0344\u0346\u0347\u0347\u034A\u0348\u0346\u0349\u034B\x07u\u034A\u0349\u034A\u034B\u034B\xA1\u034C\u034F\x07\x93\u034D\u034F\xF0y\u034E\u034C\u034E\u034D\u034F\u0351\u0350\u0352	\x07\u0351\u0350\u0351\u0352\u0352\xA3\u0353\u0354\x07\u0354\u0355\x07\x93\u0355\xA5\u0356\u0357\x07)\u0357\u035B\xF0y\u0358\u0359\x07)\u0359\u035B\xD4k\u035A\u0356\u035A\u0358\u035B\xA7\u035C\u035D\x07\u035D\u035F\x07\x93\u035E\u0360\xA6T\u035F\u035E\u035F\u0360\u0360\xA9\u0361\u0364\xECw\u0362\u0363\x07v\u0363\u0365\x07\x7F\u0364\u0362\u0364\u0365\u0365\u0368\u0366\u0368\x07\x7F\u0367\u0361\u0367\u0366\u0368\xAB\u0369\u0370\xAAV\u036A\u036C\x07u\u036B\u036A\u036B\u036C\u036C\u036D\u036D\u036F\xAAV\u036E\u036B\u036F\u0372\u0370\u036E\u0370\u0371\u0371\xAD\u0372\u0370\u0373\u0374\x07\u0374\u0377\xACW\u0375\u0376\x07)\u0376\u0378\xF0y\u0377\u0375\u0377\u0378\u0378\xAF\u0379\u037A\x07\x1B\u037A\u037B\xB6\\\u037B\xB1\u037C\u037D\x07\"\u037D\u037E\xBE`\u037E\xB3\u037F\u0380\x07g\u0380\xB5\u0381\u0382	\b\u0382\xB7\u0383\u0384		\u0384\xB9\u0385\u0386	\n\u0386\xBB\u0387\u0388	\v\u0388\xBD\u0389\u038C\xC0a\u038A\u038C\r\u038B\u0389\u038B\u038A\u038C\xBF\u038D\u038E	\f\u038E\xC1\u038F\u0390	\r\u0390\xC3\u0391\u0399\xBE`\u0392\u0399\xC2b\u0393\u0399\xC6d\u0394\u0399\x07I\u0395\u0399	\u0396\u0399\x07b\u0397\u0399\x07H\u0398\u0391\u0398\u0392\u0398\u0393\u0398\u0394\u0398\u0395\u0398\u0396\u0398\u0397\u0399\xC5\u039A\u03A2\x07\x89\u039B\u03A2\x07\x8A\u039C\u03A2\x07\x8B\u039D\u03A2\x07\x8E\u039E\u03A2\x07\x8D\u039F\u03A2\x07\x8C\u03A0\u03A2\x07\x8F\u03A1\u039A\u03A1\u039B\u03A1\u039C\u03A1\u039D\u03A1\u039E\u03A1\u039F\u03A1\u03A0\u03A2\xC7\u03A3\u03A4\xBE`\u03A4\xC9\u03A5\u03A6\xBE`\u03A6\xCB\u03A7\u03A8	\u03A8\xCD\u03A9\u03AA	\u03AA\xCF\u03AB\u03AC	\u03AC\xD1\u03AD\u03B0\xBA^\u03AE\u03B0\xBE`\u03AF\u03AD\u03AF\u03AE\u03B0\xD3\u03B1\u03B2\bk\u03B2\u0405\xECw\u03B3\u0405\xC4c\u03B4\u03B5\x07~\u03B5\u0405\xD4k\u03B6\u03B7\x07G\u03B7\u0405\xD4k\u03B8\u03B9\x07+\u03B9\u03BA\x07k\u03BA\u03BB\xD4k\u03BB\u03BC\x07%\u03BC\u03BD\xD2j\u03BD\u03BE\x07l\u03BE\u0405\u03BF\u03C0\x07-\u03C0\u03C1\x07k\u03C1\u03C2\x071\u03C2\u03C3\xD4k\u03C3\u03C4\x07l\u03C4\u0405\u03C5\u03C6\x07R\u03C6\u03C8\x07v\u03C7\u03C5\u03C7\u03C8\u03C8\u03C9\u03C9\u03CA\xB8]\u03CA\u03CD\x07k\u03CB\u03CE\xD4k\u03CC\u03CE\x07\x7F\u03CD\u03CB\u03CD\u03CC\u03CD\u03CE\u03CE\u03CF\u03CF\u03D0\x07l\u03D0\u0405\u03D1\u03D2\xECw\u03D2\u03D3\x07v\u03D3\u03D4\xB8]\u03D4\u03D6\x07k\u03D5\u03D7\xD4k\u03D6\u03D5\u03D6\u03D7\u03D7\u03D8\u03D8\u03D9\x07l\u03D9\u0405\u03DA\u03DB\x07k\u03DB\u03DC\xD6l\u03DC\u03DD\x07l\u03DD\u0405\u03DE\u03DF\xECw\u03DF\u03E0\x07v\u03E0\u03E1\xCCg\u03E1\u03E3\x07k\u03E2\u03E4\xDCo\u03E3\u03E2\u03E3\u03E4\u03E4\u03E5\u03E5\u03E6\x07l\u03E6\u0405\u03E7\u03EC\xCCg\u03E8\u03EA\x07s\u03E9\u03EB\xBA^\u03EA\u03E9\u03EA\u03EB\u03EB\u03ED\u03EC\u03E8\u03EC\u03ED\u03ED\u03F0\u03EE\u03F0\xCEh\u03EF\u03E7\u03EF\u03EE\u03F0\u03F1\u03F1\u03F3\x07k\u03F2\u03F4\xDCo\u03F3\u03F2\u03F3\u03F4\u03F4\u03F5\u03F5\u03F6\x07l\u03F6\u0405\u03F7\u0405\xD8m\u03F8\u03F9\xD0i\u03F9\u03FA\x07k\u03FA\u03FF\xD4k\u03FB\u03FC\x07u\u03FC\u03FE\xF0y\u03FD\u03FB\u03FE\u0401\u03FF\u03FD\u03FF\u0400\u0400\u0402\u0401\u03FF\u0402\u0403\x07l\u0403\u0405\u0404\u03B1\u0404\u03B3\u0404\u03B4\u0404\u03B6\u0404\u03B8\u0404\u03BF\u0404\u03C7\u0404\u03D1\u0404\u03DA\u0404\u03DE\u0404\u03EF\u0404\u03F7\u0404\u03F8\u0405\u043C\u0406\u0407\f\u0407\u0408	\u0408\u043B\xD4k\u0409\u040A\f\u040A\u040B	\u040B\u043B\xD4k\u040C\u040D\f\u040D\u040E\x07Y\u040E\u043B\xD4k\u040F\u0410\f\u0410\u0411\xBC_\u0411\u0412\xD4k\u0412\u043B\u0413\u0414\f\u0414\u0415\x07$\u0415\u043B\xD4k\u0416\u0417\f\r\u0417\u0418\x07L\u0418\u043B\xD4k\u0419\u041A\f\f\u041A\u041B\x07\x87\u041B\u043B\xD4k\r\u041C\u041D\f\u041D\u041E\x07o\u041E\u041Fz>\u041F\u0420\x07p\u0420\u043B\u0421\u0422\f\u0422\u043B\xCEh\u0423\u0424\f\x1B\u0424\u0425\x07v\u0425\u043B\xCEh\u0426\u0427\f\u0427\u0428\x07q\u0428\u043B\xD2j\u0429\u042A\f\u042A\u042B\x07r\u042B\u043B\xD2j\u042C\u042D\f\u042D\u042E\x078\u042E\u042F\xD4k\u042F\u0430\xCEh\u0430\u043B\u0431\u0432\f\u0432\u0433\x07h\u0433\u043B\xD6l\u0434\u0435\f\u0435\u0436\x07\x82\u0436\u043B\xD6l\u0437\u0438\f\u0438\u0439\x07\x88\u0439\u043B\xD6l\u043A\u0406\u043A\u0409\u043A\u040C\u043A\u040F\u043A\u0413\u043A\u0416\u043A\u0419\u043A\u041C\u043A\u0421\u043A\u0423\u043A\u0426\u043A\u0429\u043A\u042C\u043A\u0431\u043A\u0434\u043A\u0437\u043B\u043E\u043C\u043A\u043C\u043D\u043D\xD5\u043E\u043C\u043F\u0441\x07k\u0440\u0442\xBC_\u0441\u0440\u0441\u0442\u0442\u0443\u0443\u0444\xD4k\u0444\u0445\x07l\u0445\u044B\u0446\u0448\xBC_\u0447\u0446\u0447\u0448\u0448\u0449\u0449\u044B\xD4k\u044A\u043F\u044A\u0447\u044B\xD7\u044C\u044E\xDAn\u044D\u044C\u044E\u044F\u044F\u044D\u044F\u0450\u0450\u0453\u0451\u0452\x072\u0452\u0454\xD4k\u0453\u0451\u0453\u0454\u0454\xD9\u0455\u0457\x07M\u0456\u0458\xD4k\u0457\u0456";E._serializedATNSegment2="\u0457\u0458\u0458\u0459\u0459\u045A\x07]\u045A\u045B\xD6l\u045B\xDB\u045C\u0461\xD4k\u045D\u045E\x07u\u045E\u0460\xD4k\u045F\u045D\u0460\u0463\u0461\u045F\u0461\u0462\u0462\u0465\u0463\u0461\u0464\u0466\x07u\u0465\u0464\u0465\u0466\u0466\xDD\u0467\u046E\xF0y\u0468\u046A\x07u\u0469\u0468\u0469\u046A\u046A\u046B\u046B\u046D\xF0y\u046C\u0469\u046D\u0470\u046E\u046C\u046E\u046F\u046F\xDF\u0470\u046E\u0471\u0478\xEAv\u0472\u0474\x07u\u0473\u0472\u0473\u0474\u0474\u0475\u0475\u0477\xEAv\u0476\u0473\u0477\u047A\u0478\u0476\u0478\u0479\u0479\u047C\u047A\u0478\u047B\u047D\x07u\u047C\u047B\u047C\u047D\u047D\xE1\u047E\u047F\xECw\u047F\u0480\x07v\u0480\u0482\u0481\u047E\u0481\u0482\u0482\u0483\u0483\u0485\x07\x7F\u0484\u0486\xE4s\u0485\u0484\u0485\u0486\u0486\xE3\u0487\u048B\x07o\u0488\u0489\x07\n\u0489\u048C\xDEp\u048A\u048C\x07u\u048B\u0488\u048B\u048A\u048C\u048D\u048D\u048B\u048D\u048E\u048E\u048F\u048F\u0490\x07p\u0490\xE5\u0491\u0492\f\x07\u0492\u0494\xECw\u0493\u0495\xE8u\u0494\u0493\u0494\u0495\u0495\xE7\u0496\u0497\x07v\u0497\u049E\xCEh\u0498\u0499\x07v\u0499\u049A\xB8]\u049A\u049B\x07k\u049B\u049C\x07l\u049C\u049E\u049D\u0496\u049D\u0498\u049E\xE9\u049F\u04A3\xE6t\u04A0\u04A3\xE2r\u04A1\u04A3V,\u04A2\u049F\u04A2\u04A0\u04A2\u04A1\u04A3\xEB\u04A4\u04A9\xF0y\u04A5\u04A6\x07v\u04A6\u04A8\xF0y\u04A7\u04A5\u04A8\u04AB\u04A9\u04A7\u04A9\u04AA\u04AA\xED\u04AB\u04A9\u04AC\u04AD\xCCg\u04AD\xEF\u04AE\u04AF\xCCg\u04AF\xF1\u04B0\u04B1\xD4k\u04B1\u04B2\x07\u04B2\xF3\u04B3\u04B4\xCCg\u04B4\xF5\u04B5\u04B6\xCCg\u04B6\xF7\u04B7\u04B8\xBE`\u04B8\xF9\u04B9\u04BA\x07\x83\u04BA\u04BB\x07\x83\u04BB\u04BC\x07m\u04BC\u04BD\xBE`\u04BD\u04BE\x07n\u04BE\xFB\x7F\xFE\u0100\u010D\u0118\u0120\u0134\u013C\u0142\u014D\u0157\u0160\u0167\u016C\u0171\u0177\u017C\u0180\u0191\u01A1\u01A9\u01AB\u01AF\u01BA\u01BF\u01C3\u01D3\u01D5\u01DA\u01EF\u01F2\u01FE\u0203\u0207\u020F\u0214\u0218\u0232\u023A\u0244\u024F\u0251\u025B\u0262\u026A\u026F\u0274\u0276\u027D\u0282\u0286\u0292\u0297\u029A\u02A2\u02A7\u02AA\u02AE\u02B0\u02B6\u02BB\u02C2\u02C6\u02D0\u02D5\u02D9\u02E0\u02F9\u0303\u0308\u030C\u0310\u0318\u031D\u0321\u0327\u032E\u0341\u0346\u034A\u034E\u0351\u035A\u035F\u0364\u0367\u036B\u0370\u0377\u038B\u0398\u03A1\u03AF\u03C7\u03CD\u03D6\u03E3\u03EA\u03EC\u03EF\u03F3\u03FF\u0404\u043A\u043C\u0441\u0447\u044A\u044F\u0453\u0457\u0461\u0465\u0469\u046E\u0473\u0478\u047C\u0481\u0485\u048B\u048D\u0494\u049D\u04A2\u04A9";E._serializedATN=Lme.join([E._serializedATNSegment0,E._serializedATNSegment1,E._serializedATNSegment2],"");var G7=class extends ee.ParserRuleContext{EOF(){return this.getToken(E.EOF,0)}malloyStatement(e){return e===void 0?this.getRuleContexts(mA):this.getRuleContext(e,mA)}SEMI(e){return e===void 0?this.getTokens(E.SEMI):this.getToken(E.SEMI,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_malloyDocument}enterRule(e){e.enterMalloyDocument&&e.enterMalloyDocument(this)}exitRule(e){e.exitMalloyDocument&&e.exitMalloyDocument(this)}accept(e){return e.visitMalloyDocument?e.visitMalloyDocument(this):e.visitChildren(this)}};C.MalloyDocumentContext=G7;var mA=class extends ee.ParserRuleContext{defineSourceStatement(){return this.tryGetRuleContext(0,yb)}defineSQLStatement(){return this.tryGetRuleContext(0,Ab)}defineQuery(){return this.tryGetRuleContext(0,Nm)}importStatement(){return this.tryGetRuleContext(0,vb)}runStatement(){return this.tryGetRuleContext(0,Eb)}docAnnotations(){return this.tryGetRuleContext(0,Tb)}ignoredObjectAnnotations(){return this.tryGetRuleContext(0,Cb)}experimentalStatementForTesting(){return this.tryGetRuleContext(0,mT)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_malloyStatement}enterRule(e){e.enterMalloyStatement&&e.enterMalloyStatement(this)}exitRule(e){e.exitMalloyStatement&&e.exitMalloyStatement(this)}accept(e){return e.visitMalloyStatement?e.visitMalloyStatement(this):e.visitChildren(this)}};C.MalloyStatementContext=mA;var yb=class extends ee.ParserRuleContext{tags(){return this.getRuleContext(0,Xt)}SOURCE(){return this.getToken(E.SOURCE,0)}sourcePropertyList(){return this.getRuleContext(0,Nb)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_defineSourceStatement}enterRule(e){e.enterDefineSourceStatement&&e.enterDefineSourceStatement(this)}exitRule(e){e.exitDefineSourceStatement&&e.exitDefineSourceStatement(this)}accept(e){return e.visitDefineSourceStatement?e.visitDefineSourceStatement(this):e.visitChildren(this)}};C.DefineSourceStatementContext=yb;var Nm=class extends ee.ParserRuleContext{constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_defineQuery}copyFrom(e){super.copyFrom(e)}};C.DefineQueryContext=Nm;var Q7=class extends Nm{topLevelQueryDefs(){return this.getRuleContext(0,Rb)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterUse_top_level_query_defs&&e.enterUse_top_level_query_defs(this)}exitRule(e){e.exitUse_top_level_query_defs&&e.exitUse_top_level_query_defs(this)}accept(e){return e.visitUse_top_level_query_defs?e.visitUse_top_level_query_defs(this):e.visitChildren(this)}};C.Use_top_level_query_defsContext=Q7;var V7=class extends Nm{tags(){return this.getRuleContext(0,Xt)}QUERY(){return this.getToken(E.QUERY,0)}topLevelAnonQueryDef(){return this.getRuleContext(0,gA)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterAnonymousQuery&&e.enterAnonymousQuery(this)}exitRule(e){e.exitAnonymousQuery&&e.exitAnonymousQuery(this)}accept(e){return e.visitAnonymousQuery?e.visitAnonymousQuery(this):e.visitChildren(this)}};C.AnonymousQueryContext=V7;var gA=class extends ee.ParserRuleContext{tags(){return this.getRuleContext(0,Xt)}sqExpr(){return this.getRuleContext(0,Kr)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_topLevelAnonQueryDef}enterRule(e){e.enterTopLevelAnonQueryDef&&e.enterTopLevelAnonQueryDef(this)}exitRule(e){e.exitTopLevelAnonQueryDef&&e.exitTopLevelAnonQueryDef(this)}accept(e){return e.visitTopLevelAnonQueryDef?e.visitTopLevelAnonQueryDef(this):e.visitChildren(this)}};C.TopLevelAnonQueryDefContext=gA;var Xt=class extends ee.ParserRuleContext{ANNOTATION(e){return e===void 0?this.getTokens(E.ANNOTATION):this.getToken(E.ANNOTATION,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_tags}enterRule(e){e.enterTags&&e.enterTags(this)}exitRule(e){e.exitTags&&e.exitTags(this)}accept(e){return e.visitTags?e.visitTags(this):e.visitChildren(this)}};C.TagsContext=Xt;var Hl=class extends ee.ParserRuleContext{IS(){return this.getToken(E.IS,0)}tags(e){return e===void 0?this.getRuleContexts(Xt):this.getRuleContext(e,Xt)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_isDefine}enterRule(e){e.enterIsDefine&&e.enterIsDefine(this)}exitRule(e){e.exitIsDefine&&e.exitIsDefine(this)}accept(e){return e.visitIsDefine?e.visitIsDefine(this):e.visitChildren(this)}};C.IsDefineContext=Hl;var Eb=class extends ee.ParserRuleContext{tags(){return this.getRuleContext(0,Xt)}RUN(){return this.getToken(E.RUN,0)}topLevelAnonQueryDef(){return this.getRuleContext(0,gA)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_runStatement}enterRule(e){e.enterRunStatement&&e.enterRunStatement(this)}exitRule(e){e.exitRunStatement&&e.exitRunStatement(this)}accept(e){return e.visitRunStatement?e.visitRunStatement(this):e.visitChildren(this)}};C.RunStatementContext=Eb;var Ab=class extends ee.ParserRuleContext{SQLC(){return this.getToken(E.SQLC,0)}nameSQLBlock(){return this.getRuleContext(0,hT)}isDefine(){return this.getRuleContext(0,Hl)}sqlBlock(){return this.getRuleContext(0,Sb)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_defineSQLStatement}enterRule(e){e.enterDefineSQLStatement&&e.enterDefineSQLStatement(this)}exitRule(e){e.exitDefineSQLStatement&&e.exitDefineSQLStatement(this)}accept(e){return e.visitDefineSQLStatement?e.visitDefineSQLStatement(this):e.visitChildren(this)}};C.DefineSQLStatementContext=Ab;var Sb=class extends ee.ParserRuleContext{OCURLY(){return this.getToken(E.OCURLY,0)}CCURLY(){return this.getToken(E.CCURLY,0)}blockSQLDef(e){return e===void 0?this.getRuleContexts(yA):this.getRuleContext(e,yA)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_sqlBlock}enterRule(e){e.enterSqlBlock&&e.enterSqlBlock(this)}exitRule(e){e.exitSqlBlock&&e.exitSqlBlock(this)}accept(e){return e.visitSqlBlock?e.visitSqlBlock(this):e.visitChildren(this)}};C.SqlBlockContext=Sb;var yA=class extends ee.ParserRuleContext{CONNECTION(){return this.tryGetToken(E.CONNECTION,0)}connectionName(){return this.tryGetRuleContext(0,pT)}SELECT(){return this.tryGetToken(E.SELECT,0)}sqlString(){return this.tryGetRuleContext(0,Fm)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_blockSQLDef}enterRule(e){e.enterBlockSQLDef&&e.enterBlockSQLDef(this)}exitRule(e){e.exitBlockSQLDef&&e.exitBlockSQLDef(this)}accept(e){return e.visitBlockSQLDef?e.visitBlockSQLDef(this):e.visitChildren(this)}};C.BlockSQLDefContext=yA;var Fm=class extends ee.ParserRuleContext{SQL_BEGIN(){return this.getToken(E.SQL_BEGIN,0)}SQL_END(){return this.getToken(E.SQL_END,0)}sqlInterpolation(e){return e===void 0?this.getRuleContexts(EA):this.getRuleContext(e,EA)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_sqlString}enterRule(e){e.enterSqlString&&e.enterSqlString(this)}exitRule(e){e.exitSqlString&&e.exitSqlString(this)}accept(e){return e.visitSqlString?e.visitSqlString(this):e.visitChildren(this)}};C.SqlStringContext=Fm;var EA=class extends ee.ParserRuleContext{OPEN_CODE(){return this.getToken(E.OPEN_CODE,0)}sqExpr(){return this.getRuleContext(0,Kr)}CCURLY(){return this.tryGetToken(E.CCURLY,0)}CLOSE_CODE(){return this.tryGetToken(E.CLOSE_CODE,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_sqlInterpolation}enterRule(e){e.enterSqlInterpolation&&e.enterSqlInterpolation(this)}exitRule(e){e.exitSqlInterpolation&&e.exitSqlInterpolation(this)}accept(e){return e.visitSqlInterpolation?e.visitSqlInterpolation(this):e.visitChildren(this)}};C.SqlInterpolationContext=EA;var vb=class extends ee.ParserRuleContext{IMPORT(){return this.getToken(E.IMPORT,0)}importURL(){return this.getRuleContext(0,bb)}importSelect(){return this.tryGetRuleContext(0,_b)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_importStatement}enterRule(e){e.enterImportStatement&&e.enterImportStatement(this)}exitRule(e){e.exitImportStatement&&e.exitImportStatement(this)}accept(e){return e.visitImportStatement?e.visitImportStatement(this):e.visitChildren(this)}};C.ImportStatementContext=vb;var _b=class extends ee.ParserRuleContext{OCURLY(){return this.getToken(E.OCURLY,0)}importItem(e){return e===void 0?this.getRuleContexts(AA):this.getRuleContext(e,AA)}CCURLY(){return this.getToken(E.CCURLY,0)}FROM(){return this.getToken(E.FROM,0)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_importSelect}enterRule(e){e.enterImportSelect&&e.enterImportSelect(this)}exitRule(e){e.exitImportSelect&&e.exitImportSelect(this)}accept(e){return e.visitImportSelect?e.visitImportSelect(this):e.visitChildren(this)}};C.ImportSelectContext=_b;var AA=class extends ee.ParserRuleContext{id(e){return e===void 0?this.getRuleContexts(Cn):this.getRuleContext(e,Cn)}IS(){return this.tryGetToken(E.IS,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_importItem}enterRule(e){e.enterImportItem&&e.enterImportItem(this)}exitRule(e){e.exitImportItem&&e.exitImportItem(this)}accept(e){return e.visitImportItem?e.visitImportItem(this):e.visitChildren(this)}};C.ImportItemContext=AA;var bb=class extends ee.ParserRuleContext{string(){return this.getRuleContext(0,qu)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_importURL}enterRule(e){e.enterImportURL&&e.enterImportURL(this)}exitRule(e){e.exitImportURL&&e.exitImportURL(this)}accept(e){return e.visitImportURL?e.visitImportURL(this):e.visitChildren(this)}};C.ImportURLContext=bb;var Tb=class extends ee.ParserRuleContext{DOC_ANNOTATION(e){return e===void 0?this.getTokens(E.DOC_ANNOTATION):this.getToken(E.DOC_ANNOTATION,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_docAnnotations}enterRule(e){e.enterDocAnnotations&&e.enterDocAnnotations(this)}exitRule(e){e.exitDocAnnotations&&e.exitDocAnnotations(this)}accept(e){return e.visitDocAnnotations?e.visitDocAnnotations(this):e.visitChildren(this)}};C.DocAnnotationsContext=Tb;var Cb=class extends ee.ParserRuleContext{ANNOTATION(e){return e===void 0?this.getTokens(E.ANNOTATION):this.getToken(E.ANNOTATION,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_ignoredObjectAnnotations}enterRule(e){e.enterIgnoredObjectAnnotations&&e.enterIgnoredObjectAnnotations(this)}exitRule(e){e.exitIgnoredObjectAnnotations&&e.exitIgnoredObjectAnnotations(this)}accept(e){return e.visitIgnoredObjectAnnotations?e.visitIgnoredObjectAnnotations(this):e.visitChildren(this)}};C.IgnoredObjectAnnotationsContext=Cb;var SA=class extends ee.ParserRuleContext{DOC_ANNOTATION(e){return e===void 0?this.getTokens(E.DOC_ANNOTATION):this.getToken(E.DOC_ANNOTATION,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_ignoredModelAnnotations}enterRule(e){e.enterIgnoredModelAnnotations&&e.enterIgnoredModelAnnotations(this)}exitRule(e){e.exitIgnoredModelAnnotations&&e.exitIgnoredModelAnnotations(this)}accept(e){return e.visitIgnoredModelAnnotations?e.visitIgnoredModelAnnotations(this):e.visitChildren(this)}};C.IgnoredModelAnnotationsContext=SA;var Rb=class extends ee.ParserRuleContext{tags(){return this.getRuleContext(0,Xt)}QUERY(){return this.getToken(E.QUERY,0)}topLevelQueryDef(e){return e===void 0?this.getRuleContexts(vA):this.getRuleContext(e,vA)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_topLevelQueryDefs}enterRule(e){e.enterTopLevelQueryDefs&&e.enterTopLevelQueryDefs(this)}exitRule(e){e.exitTopLevelQueryDefs&&e.exitTopLevelQueryDefs(this)}accept(e){return e.visitTopLevelQueryDefs?e.visitTopLevelQueryDefs(this):e.visitChildren(this)}};C.TopLevelQueryDefsContext=Rb;var vA=class extends ee.ParserRuleContext{tags(){return this.getRuleContext(0,Xt)}queryName(){return this.getRuleContext(0,TA)}isDefine(){return this.getRuleContext(0,Hl)}sqExpr(){return this.getRuleContext(0,Kr)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_topLevelQueryDef}enterRule(e){e.enterTopLevelQueryDef&&e.enterTopLevelQueryDef(this)}exitRule(e){e.exitTopLevelQueryDef&&e.exitTopLevelQueryDef(this)}accept(e){return e.visitTopLevelQueryDef?e.visitTopLevelQueryDef(this):e.visitChildren(this)}};C.TopLevelQueryDefContext=vA;var W7=class extends ee.ParserRuleContext{PLUS(){return this.getToken(E.PLUS,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_refineOperator}enterRule(e){e.enterRefineOperator&&e.enterRefineOperator(this)}exitRule(e){e.exitRefineOperator&&e.exitRefineOperator(this)}accept(e){return e.visitRefineOperator?e.visitRefineOperator(this):e.visitChildren(this)}};C.RefineOperatorContext=W7;var Y7=class extends ee.ParserRuleContext{id(){return this.getRuleContext(0,Cn)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_turtleName}enterRule(e){e.enterTurtleName&&e.enterTurtleName(this)}exitRule(e){e.exitTurtleName&&e.exitTurtleName(this)}accept(e){return e.visitTurtleName?e.visitTurtleName(this):e.visitChildren(this)}};C.TurtleNameContext=Y7;var Ob=class extends ee.ParserRuleContext{connectionId(){return this.getRuleContext(0,_A)}DOT(){return this.getToken(E.DOT,0)}SQL(){return this.getToken(E.SQL,0)}OPAREN(){return this.getToken(E.OPAREN,0)}CPAREN(){return this.getToken(E.CPAREN,0)}sqlString(){return this.tryGetRuleContext(0,Fm)}shortString(){return this.tryGetRuleContext(0,zA)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_sqlSource}enterRule(e){e.enterSqlSource&&e.enterSqlSource(this)}exitRule(e){e.exitSqlSource&&e.exitSqlSource(this)}accept(e){return e.visitSqlSource?e.visitSqlSource(this):e.visitChildren(this)}};C.SqlSourceContext=Ob;var wm=class extends ee.ParserRuleContext{constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_exploreTable}copyFrom(e){super.copyFrom(e)}};C.ExploreTableContext=wm;var K7=class extends wm{TABLE(){return this.getToken(E.TABLE,0)}OPAREN(){return this.getToken(E.OPAREN,0)}tableURI(){return this.getRuleContext(0,oT)}CPAREN(){return this.getToken(E.CPAREN,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterTableFunction&&e.enterTableFunction(this)}exitRule(e){e.exitTableFunction&&e.exitTableFunction(this)}accept(e){return e.visitTableFunction?e.visitTableFunction(this):e.visitChildren(this)}};C.TableFunctionContext=K7;var X7=class extends wm{connectionId(){return this.getRuleContext(0,_A)}DOT(){return this.getToken(E.DOT,0)}TABLE(){return this.getToken(E.TABLE,0)}OPAREN(){return this.getToken(E.OPAREN,0)}tablePath(){return this.getRuleContext(0,sT)}CPAREN(){return this.getToken(E.CPAREN,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterTableMethod&&e.enterTableMethod(this)}exitRule(e){e.exitTableMethod&&e.exitTableMethod(this)}accept(e){return e.visitTableMethod?e.visitTableMethod(this):e.visitChildren(this)}};C.TableMethodContext=X7;var _A=class extends ee.ParserRuleContext{id(){return this.getRuleContext(0,Cn)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_connectionId}enterRule(e){e.enterConnectionId&&e.enterConnectionId(this)}exitRule(e){e.exitConnectionId&&e.exitConnectionId(this)}accept(e){return e.visitConnectionId?e.visitConnectionId(this):e.visitChildren(this)}};C.ConnectionIdContext=_A;var Db=class extends ee.ParserRuleContext{filterShortcut(){return this.tryGetRuleContext(0,bA)}OCURLY(){return this.tryGetToken(E.OCURLY,0)}CCURLY(){return this.tryGetToken(E.CCURLY,0)}queryStatement(e){return e===void 0?this.getRuleContexts(kA):this.getRuleContext(e,kA)}SEMI(e){return e===void 0?this.getTokens(E.SEMI):this.getToken(E.SEMI,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_queryProperties}enterRule(e){e.enterQueryProperties&&e.enterQueryProperties(this)}exitRule(e){e.exitQueryProperties&&e.exitQueryProperties(this)}accept(e){return e.visitQueryProperties?e.visitQueryProperties(this):e.visitChildren(this)}};C.QueryPropertiesContext=Db;var bA=class extends ee.ParserRuleContext{OCURLY(){return this.getToken(E.OCURLY,0)}QMARK(){return this.getToken(E.QMARK,0)}fieldExpr(){return this.getRuleContext(0,Ee)}CCURLY(){return this.getToken(E.CCURLY,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_filterShortcut}enterRule(e){e.enterFilterShortcut&&e.enterFilterShortcut(this)}exitRule(e){e.exitFilterShortcut&&e.exitFilterShortcut(this)}accept(e){return e.visitFilterShortcut?e.visitFilterShortcut(this):e.visitChildren(this)}};C.FilterShortcutContext=bA;var TA=class extends ee.ParserRuleContext{id(){return this.getRuleContext(0,Cn)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_queryName}enterRule(e){e.enterQueryName&&e.enterQueryName(this)}exitRule(e){e.exitQueryName&&e.exitQueryName(this)}accept(e){return e.visitQueryName?e.visitQueryName(this):e.visitChildren(this)}};C.QueryNameContext=TA;var Nb=class extends ee.ParserRuleContext{sourceDefinition(e){return e===void 0?this.getRuleContexts(CA):this.getRuleContext(e,CA)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_sourcePropertyList}enterRule(e){e.enterSourcePropertyList&&e.enterSourcePropertyList(this)}exitRule(e){e.exitSourcePropertyList&&e.exitSourcePropertyList(this)}accept(e){return e.visitSourcePropertyList?e.visitSourcePropertyList(this):e.visitChildren(this)}};C.SourcePropertyListContext=Nb;var CA=class extends ee.ParserRuleContext{tags(){return this.getRuleContext(0,Xt)}sourceNameDef(){return this.getRuleContext(0,wb)}isDefine(){return this.getRuleContext(0,Hl)}sqExplore(){return this.getRuleContext(0,Fb)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_sourceDefinition}enterRule(e){e.enterSourceDefinition&&e.enterSourceDefinition(this)}exitRule(e){e.exitSourceDefinition&&e.exitSourceDefinition(this)}accept(e){return e.visitSourceDefinition?e.visitSourceDefinition(this):e.visitChildren(this)}};C.SourceDefinitionContext=CA;var Fb=class extends ee.ParserRuleContext{sqExpr(){return this.getRuleContext(0,Kr)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_sqExplore}enterRule(e){e.enterSqExplore&&e.enterSqExplore(this)}exitRule(e){e.exitSqExplore&&e.exitSqExplore(this)}accept(e){return e.visitSqExplore?e.visitSqExplore(this):e.visitChildren(this)}};C.SqExploreContext=Fb;var wb=class extends ee.ParserRuleContext{id(){return this.getRuleContext(0,Cn)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_sourceNameDef}enterRule(e){e.enterSourceNameDef&&e.enterSourceNameDef(this)}exitRule(e){e.exitSourceNameDef&&e.exitSourceNameDef(this)}accept(e){return e.visitSourceNameDef?e.visitSourceNameDef(this):e.visitChildren(this)}};C.SourceNameDefContext=wb;var J7=class extends ee.ParserRuleContext{id(){return this.getRuleContext(0,Cn)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_sourceID}enterRule(e){e.enterSourceID&&e.enterSourceID(this)}exitRule(e){e.exitSourceID&&e.exitSourceID(this)}accept(e){return e.visitSourceID?e.visitSourceID(this):e.visitChildren(this)}};C.SourceIDContext=J7;var Lb=class extends ee.ParserRuleContext{OCURLY(){return this.tryGetToken(E.OCURLY,0)}CCURLY(){return this.tryGetToken(E.CCURLY,0)}exploreStatement(e){return e===void 0?this.getRuleContexts(bi):this.getRuleContext(e,bi)}SEMI(e){return e===void 0?this.getTokens(E.SEMI):this.getToken(E.SEMI,e)}filterShortcut(){return this.tryGetRuleContext(0,bA)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_exploreProperties}enterRule(e){e.enterExploreProperties&&e.enterExploreProperties(this)}exitRule(e){e.exitExploreProperties&&e.exitExploreProperties(this)}accept(e){return e.visitExploreProperties?e.visitExploreProperties(this):e.visitChildren(this)}};C.ExplorePropertiesContext=Lb;var bi=class extends ee.ParserRuleContext{constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_exploreStatement}copyFrom(e){super.copyFrom(e)}};C.ExploreStatementContext=bi;var Z7=class extends bi{defDimensions(){return this.getRuleContext(0,OA)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDefExploreDimension_stub&&e.enterDefExploreDimension_stub(this)}exitRule(e){e.exitDefExploreDimension_stub&&e.exitDefExploreDimension_stub(this)}accept(e){return e.visitDefExploreDimension_stub?e.visitDefExploreDimension_stub(this):e.visitChildren(this)}};C.DefExploreDimension_stubContext=Z7;var e8=class extends bi{defMeasures(){return this.getRuleContext(0,RA)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDefExploreMeasure_stub&&e.enterDefExploreMeasure_stub(this)}exitRule(e){e.exitDefExploreMeasure_stub&&e.exitDefExploreMeasure_stub(this)}accept(e){return e.visitDefExploreMeasure_stub?e.visitDefExploreMeasure_stub(this):e.visitChildren(this)}};C.DefExploreMeasure_stubContext=e8;var t8=class extends bi{declareStatement(){return this.getRuleContext(0,Im)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDefDeclare_stub&&e.enterDefDeclare_stub(this)}exitRule(e){e.exitDefDeclare_stub&&e.exitDefDeclare_stub(this)}accept(e){return e.visitDefDeclare_stub?e.visitDefDeclare_stub(this):e.visitChildren(this)}};C.DefDeclare_stubContext=t8;var r8=class extends bi{joinStatement(){return this.getRuleContext(0,zl)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDefJoin_stub&&e.enterDefJoin_stub(this)}exitRule(e){e.exitDefJoin_stub&&e.exitDefJoin_stub(this)}accept(e){return e.visitDefJoin_stub?e.visitDefJoin_stub(this):e.visitChildren(this)}};C.DefJoin_stubContext=r8;var n8=class extends bi{whereStatement(){return this.getRuleContext(0,vx)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDefExploreWhere_stub&&e.enterDefExploreWhere_stub(this)}exitRule(e){e.exitDefExploreWhere_stub&&e.exitDefExploreWhere_stub(this)}accept(e){return e.visitDefExploreWhere_stub?e.visitDefExploreWhere_stub(this):e.visitChildren(this)}};C.DefExploreWhere_stubContext=n8;var i8=class extends bi{PRIMARY_KEY(){return this.getToken(E.PRIMARY_KEY,0)}fieldName(){return this.getRuleContext(0,Is)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDefExplorePrimaryKey&&e.enterDefExplorePrimaryKey(this)}exitRule(e){e.exitDefExplorePrimaryKey&&e.exitDefExplorePrimaryKey(this)}accept(e){return e.visitDefExplorePrimaryKey?e.visitDefExplorePrimaryKey(this):e.visitChildren(this)}};C.DefExplorePrimaryKeyContext=i8;var s8=class extends bi{RENAME(){return this.getToken(E.RENAME,0)}renameList(){return this.getRuleContext(0,Ib)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDefExploreRename&&e.enterDefExploreRename(this)}exitRule(e){e.exitDefExploreRename&&e.exitDefExploreRename(this)}accept(e){return e.visitDefExploreRename?e.visitDefExploreRename(this):e.visitChildren(this)}};C.DefExploreRenameContext=s8;var o8=class extends bi{fieldNameList(){return this.getRuleContext(0,qm)}ACCEPT(){return this.tryGetToken(E.ACCEPT,0)}EXCEPT(){return this.tryGetToken(E.EXCEPT,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDefExploreEditField&&e.enterDefExploreEditField(this)}exitRule(e){e.exitDefExploreEditField&&e.exitDefExploreEditField(this)}accept(e){return e.visitDefExploreEditField?e.visitDefExploreEditField(this):e.visitChildren(this)}};C.DefExploreEditFieldContext=o8;var a8=class extends bi{tags(){return this.getRuleContext(0,Xt)}subQueryDefList(){return this.getRuleContext(0,qb)}QUERY(){return this.tryGetToken(E.QUERY,0)}VIEW(){return this.tryGetToken(E.VIEW,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDefExploreQuery&&e.enterDefExploreQuery(this)}exitRule(e){e.exitDefExploreQuery&&e.exitDefExploreQuery(this)}accept(e){return e.visitDefExploreQuery?e.visitDefExploreQuery(this):e.visitChildren(this)}};C.DefExploreQueryContext=a8;var u8=class extends bi{timezoneStatement(){return this.getRuleContext(0,$A)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDefExploreTimezone&&e.enterDefExploreTimezone(this)}exitRule(e){e.exitDefExploreTimezone&&e.exitDefExploreTimezone(this)}accept(e){return e.visitDefExploreTimezone?e.visitDefExploreTimezone(this):e.visitChildren(this)}};C.DefExploreTimezoneContext=u8;var l8=class extends bi{ANNOTATION(e){return e===void 0?this.getTokens(E.ANNOTATION):this.getToken(E.ANNOTATION,e)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDefExploreAnnotation&&e.enterDefExploreAnnotation(this)}exitRule(e){e.exitDefExploreAnnotation&&e.exitDefExploreAnnotation(this)}accept(e){return e.visitDefExploreAnnotation?e.visitDefExploreAnnotation(this):e.visitChildren(this)}};C.DefExploreAnnotationContext=l8;var c8=class extends bi{ignoredModelAnnotations(){return this.getRuleContext(0,SA)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDefIgnoreModel_stub&&e.enterDefIgnoreModel_stub(this)}exitRule(e){e.exitDefIgnoreModel_stub&&e.exitDefIgnoreModel_stub(this)}accept(e){return e.visitDefIgnoreModel_stub?e.visitDefIgnoreModel_stub(this):e.visitChildren(this)}};C.DefIgnoreModel_stubContext=c8;var RA=class extends ee.ParserRuleContext{tags(){return this.getRuleContext(0,Xt)}MEASURE(){return this.getToken(E.MEASURE,0)}defList(){return this.getRuleContext(0,Lm)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_defMeasures}enterRule(e){e.enterDefMeasures&&e.enterDefMeasures(this)}exitRule(e){e.exitDefMeasures&&e.exitDefMeasures(this)}accept(e){return e.visitDefMeasures?e.visitDefMeasures(this):e.visitChildren(this)}};C.DefMeasuresContext=RA;var OA=class extends ee.ParserRuleContext{tags(){return this.getRuleContext(0,Xt)}DIMENSION(){return this.getToken(E.DIMENSION,0)}defList(){return this.getRuleContext(0,Lm)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_defDimensions}enterRule(e){e.enterDefDimensions&&e.enterDefDimensions(this)}exitRule(e){e.exitDefDimensions&&e.exitDefDimensions(this)}accept(e){return e.visitDefDimensions?e.visitDefDimensions(this):e.visitChildren(this)}};C.DefDimensionsContext=OA;var Ib=class extends ee.ParserRuleContext{exploreRenameDef(e){return e===void 0?this.getRuleContexts(DA):this.getRuleContext(e,DA)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_renameList}enterRule(e){e.enterRenameList&&e.enterRenameList(this)}exitRule(e){e.exitRenameList&&e.exitRenameList(this)}accept(e){return e.visitRenameList?e.visitRenameList(this):e.visitChildren(this)}};C.RenameListContext=Ib;var DA=class extends ee.ParserRuleContext{fieldName(e){return e===void 0?this.getRuleContexts(Is):this.getRuleContext(e,Is)}isDefine(){return this.getRuleContext(0,Hl)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_exploreRenameDef}enterRule(e){e.enterExploreRenameDef&&e.enterExploreRenameDef(this)}exitRule(e){e.exitExploreRenameDef&&e.exitExploreRenameDef(this)}accept(e){return e.visitExploreRenameDef?e.visitExploreRenameDef(this):e.visitChildren(this)}};C.ExploreRenameDefContext=DA;var Lm=class extends ee.ParserRuleContext{fieldDef(e){return e===void 0?this.getRuleContexts(up):this.getRuleContext(e,up)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_defList}enterRule(e){e.enterDefList&&e.enterDefList(this)}exitRule(e){e.exitDefList&&e.exitDefList(this)}accept(e){return e.visitDefList?e.visitDefList(this):e.visitChildren(this)}};C.DefListContext=Lm;var up=class extends ee.ParserRuleContext{tags(){return this.getRuleContext(0,Xt)}fieldNameDef(){return this.getRuleContext(0,Mb)}isDefine(){return this.getRuleContext(0,Hl)}fieldExpr(){return this.getRuleContext(0,Ee)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_fieldDef}enterRule(e){e.enterFieldDef&&e.enterFieldDef(this)}exitRule(e){e.exitFieldDef&&e.exitFieldDef(this)}accept(e){return e.visitFieldDef?e.visitFieldDef(this):e.visitChildren(this)}};C.FieldDefContext=up;var Mb=class extends ee.ParserRuleContext{id(){return this.getRuleContext(0,Cn)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_fieldNameDef}enterRule(e){e.enterFieldNameDef&&e.enterFieldNameDef(this)}exitRule(e){e.exitFieldNameDef&&e.exitFieldNameDef(this)}accept(e){return e.visitFieldNameDef?e.visitFieldNameDef(this):e.visitChildren(this)}};C.FieldNameDefContext=Mb;var NA=class extends ee.ParserRuleContext{id(){return this.getRuleContext(0,Cn)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_joinNameDef}enterRule(e){e.enterJoinNameDef&&e.enterJoinNameDef(this)}exitRule(e){e.exitJoinNameDef&&e.exitJoinNameDef(this)}accept(e){return e.visitJoinNameDef?e.visitJoinNameDef(this):e.visitChildren(this)}};C.JoinNameDefContext=NA;var Im=class extends ee.ParserRuleContext{DECLARE(){return this.getToken(E.DECLARE,0)}defList(){return this.getRuleContext(0,Lm)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_declareStatement}enterRule(e){e.enterDeclareStatement&&e.enterDeclareStatement(this)}exitRule(e){e.exitDeclareStatement&&e.exitDeclareStatement(this)}accept(e){return e.visitDeclareStatement?e.visitDeclareStatement(this):e.visitChildren(this)}};C.DeclareStatementContext=Im;var zl=class extends ee.ParserRuleContext{constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_joinStatement}copyFrom(e){super.copyFrom(e)}};C.JoinStatementContext=zl;var f8=class extends zl{tags(){return this.getRuleContext(0,Xt)}JOIN_ONE(){return this.getToken(E.JOIN_ONE,0)}joinList(){return this.getRuleContext(0,Mm)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDefJoinOne&&e.enterDefJoinOne(this)}exitRule(e){e.exitDefJoinOne&&e.exitDefJoinOne(this)}accept(e){return e.visitDefJoinOne?e.visitDefJoinOne(this):e.visitChildren(this)}};C.DefJoinOneContext=f8;var x8=class extends zl{tags(){return this.getRuleContext(0,Xt)}JOIN_MANY(){return this.getToken(E.JOIN_MANY,0)}joinList(){return this.getRuleContext(0,Mm)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDefJoinMany&&e.enterDefJoinMany(this)}exitRule(e){e.exitDefJoinMany&&e.exitDefJoinMany(this)}accept(e){return e.visitDefJoinMany?e.visitDefJoinMany(this):e.visitChildren(this)}};C.DefJoinManyContext=x8;var d8=class extends zl{tags(){return this.getRuleContext(0,Xt)}JOIN_CROSS(){return this.getToken(E.JOIN_CROSS,0)}joinList(){return this.getRuleContext(0,Mm)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterDefJoinCross&&e.enterDefJoinCross(this)}exitRule(e){e.exitDefJoinCross&&e.exitDefJoinCross(this)}accept(e){return e.visitDefJoinCross?e.visitDefJoinCross(this):e.visitChildren(this)}};C.DefJoinCrossContext=d8;var Pb=class extends ee.ParserRuleContext{EXTENDQ(){return this.getToken(E.EXTENDQ,0)}queryExtendStatementList(){return this.getRuleContext(0,kb)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_queryExtend}enterRule(e){e.enterQueryExtend&&e.enterQueryExtend(this)}exitRule(e){e.exitQueryExtend&&e.exitQueryExtend(this)}accept(e){return e.visitQueryExtend?e.visitQueryExtend(this):e.visitChildren(this)}};C.QueryExtendContext=Pb;var h8=class extends ee.ParserRuleContext{joinStatement(){return this.tryGetRuleContext(0,zl)}whereStatement(){return this.tryGetRuleContext(0,vx)}declareStatement(){return this.tryGetRuleContext(0,Im)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_modEither}enterRule(e){e.enterModEither&&e.enterModEither(this)}exitRule(e){e.exitModEither&&e.exitModEither(this)}accept(e){return e.visitModEither?e.visitModEither(this):e.visitChildren(this)}};C.ModEitherContext=h8;var Kr=class extends ee.ParserRuleContext{constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_sqExpr}copyFrom(e){super.copyFrom(e)}};C.SqExprContext=Kr;var p8=class extends Kr{id(){return this.getRuleContext(0,Cn)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSQID&&e.enterSQID(this)}exitRule(e){e.exitSQID&&e.exitSQID(this)}accept(e){return e.visitSQID?e.visitSQID(this):e.visitChildren(this)}};C.SQIDContext=p8;var m8=class extends Kr{OPAREN(){return this.getToken(E.OPAREN,0)}sqExpr(){return this.getRuleContext(0,Kr)}CPAREN(){return this.getToken(E.CPAREN,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSQParens&&e.enterSQParens(this)}exitRule(e){e.exitSQParens&&e.exitSQParens(this)}accept(e){return e.visitSQParens?e.visitSQParens(this):e.visitChildren(this)}};C.SQParensContext=m8;var g8=class extends Kr{sqExpr(){return this.getRuleContext(0,Kr)}PLUS(){return this.getToken(E.PLUS,0)}segExpr(){return this.getRuleContext(0,go)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSQRefinedQuery&&e.enterSQRefinedQuery(this)}exitRule(e){e.exitSQRefinedQuery&&e.exitSQRefinedQuery(this)}accept(e){return e.visitSQRefinedQuery?e.visitSQRefinedQuery(this):e.visitChildren(this)}};C.SQRefinedQueryContext=g8;var y8=class extends Kr{sqExpr(){return this.getRuleContext(0,Kr)}ARROW(){return this.getToken(E.ARROW,0)}segExpr(){return this.getRuleContext(0,go)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSQArrow&&e.enterSQArrow(this)}exitRule(e){e.exitSQArrow&&e.exitSQArrow(this)}accept(e){return e.visitSQArrow?e.visitSQArrow(this):e.visitChildren(this)}};C.SQArrowContext=y8;var E8=class extends Kr{sqExpr(){return this.getRuleContext(0,Kr)}EXTEND(){return this.getToken(E.EXTEND,0)}exploreProperties(){return this.getRuleContext(0,Lb)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSQExtendedSource&&e.enterSQExtendedSource(this)}exitRule(e){e.exitSQExtendedSource&&e.exitSQExtendedSource(this)}accept(e){return e.visitSQExtendedSource?e.visitSQExtendedSource(this):e.visitChildren(this)}};C.SQExtendedSourceContext=E8;var A8=class extends Kr{exploreTable(){return this.getRuleContext(0,wm)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSQTable&&e.enterSQTable(this)}exitRule(e){e.exitSQTable&&e.exitSQTable(this)}accept(e){return e.visitSQTable?e.visitSQTable(this):e.visitChildren(this)}};C.SQTableContext=A8;var S8=class extends Kr{sqlSource(){return this.getRuleContext(0,Ob)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSQSQL&&e.enterSQSQL(this)}exitRule(e){e.exitSQSQL&&e.exitSQSQL(this)}accept(e){return e.visitSQSQL?e.visitSQSQL(this):e.visitChildren(this)}};C.SQSQLContext=S8;var go=class extends ee.ParserRuleContext{constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_segExpr}copyFrom(e){super.copyFrom(e)}};C.SegExprContext=go;var v8=class extends go{fieldPath(){return this.getRuleContext(0,ju)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSegField&&e.enterSegField(this)}exitRule(e){e.exitSegField&&e.exitSegField(this)}accept(e){return e.visitSegField?e.visitSegField(this):e.visitChildren(this)}};C.SegFieldContext=v8;var _8=class extends go{queryProperties(){return this.getRuleContext(0,Db)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSegOps&&e.enterSegOps(this)}exitRule(e){e.exitSegOps&&e.exitSegOps(this)}accept(e){return e.visitSegOps?e.visitSegOps(this):e.visitChildren(this)}};C.SegOpsContext=_8;var b8=class extends go{OPAREN(){return this.getToken(E.OPAREN,0)}vExpr(){return this.getRuleContext(0,Gl)}CPAREN(){return this.getToken(E.CPAREN,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSegParen&&e.enterSegParen(this)}exitRule(e){e.exitSegParen&&e.exitSegParen(this)}accept(e){return e.visitSegParen?e.visitSegParen(this):e.visitChildren(this)}};C.SegParenContext=b8;var T8=class extends go{PLUS(){return this.getToken(E.PLUS,0)}segExpr(e){return e===void 0?this.getRuleContexts(go):this.getRuleContext(e,go)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterSegRefine&&e.enterSegRefine(this)}exitRule(e){e.exitSegRefine&&e.exitSegRefine(this)}accept(e){return e.visitSegRefine?e.visitSegRefine(this):e.visitChildren(this)}};C.SegRefineContext=T8;var Gl=class extends ee.ParserRuleContext{constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_vExpr}copyFrom(e){super.copyFrom(e)}};C.VExprContext=Gl;var C8=class extends Gl{segExpr(){return this.getRuleContext(0,go)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterVSeg&&e.enterVSeg(this)}exitRule(e){e.exitVSeg&&e.exitVSeg(this)}accept(e){return e.visitVSeg?e.visitVSeg(this):e.visitChildren(this)}};C.VSegContext=C8;var R8=class extends Gl{ARROW(){return this.getToken(E.ARROW,0)}segExpr(){return this.getRuleContext(0,go)}vExpr(){return this.getRuleContext(0,Gl)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterVArrow&&e.enterVArrow(this)}exitRule(e){e.exitVArrow&&e.exitVArrow(this)}accept(e){return e.visitVArrow?e.visitVArrow(this):e.visitChildren(this)}};C.VArrowContext=R8;var FA=class extends ee.ParserRuleContext{defDimensions(){return this.tryGetRuleContext(0,OA)}defMeasures(){return this.tryGetRuleContext(0,RA)}joinStatement(){return this.tryGetRuleContext(0,zl)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_queryExtendStatement}enterRule(e){e.enterQueryExtendStatement&&e.enterQueryExtendStatement(this)}exitRule(e){e.exitQueryExtendStatement&&e.exitQueryExtendStatement(this)}accept(e){return e.visitQueryExtendStatement?e.visitQueryExtendStatement(this):e.visitChildren(this)}};C.QueryExtendStatementContext=FA;var kb=class extends ee.ParserRuleContext{OCURLY(){return this.getToken(E.OCURLY,0)}CCURLY(){return this.getToken(E.CCURLY,0)}queryExtendStatement(e){return e===void 0?this.getRuleContexts(FA):this.getRuleContext(e,FA)}SEMI(e){return e===void 0?this.getTokens(E.SEMI):this.getToken(E.SEMI,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_queryExtendStatementList}enterRule(e){e.enterQueryExtendStatementList&&e.enterQueryExtendStatementList(this)}exitRule(e){e.exitQueryExtendStatementList&&e.exitQueryExtendStatementList(this)}accept(e){return e.visitQueryExtendStatementList?e.visitQueryExtendStatementList(this):e.visitChildren(this)}};C.QueryExtendStatementListContext=kb;var Mm=class extends ee.ParserRuleContext{joinDef(e){return e===void 0?this.getRuleContexts(lp):this.getRuleContext(e,lp)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_joinList}enterRule(e){e.enterJoinList&&e.enterJoinList(this)}exitRule(e){e.exitJoinList&&e.exitJoinList(this)}accept(e){return e.visitJoinList?e.visitJoinList(this):e.visitChildren(this)}};C.JoinListContext=Mm;var wA=class extends ee.ParserRuleContext{IS(){return this.getToken(E.IS,0)}sqExpr(){return this.getRuleContext(0,Kr)}tags(e){return e===void 0?this.getRuleContexts(Xt):this.getRuleContext(e,Xt)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_isExplore}enterRule(e){e.enterIsExplore&&e.enterIsExplore(this)}exitRule(e){e.exitIsExplore&&e.exitIsExplore(this)}accept(e){return e.visitIsExplore?e.visitIsExplore(this):e.visitChildren(this)}};C.IsExploreContext=wA;var LA=class extends ee.ParserRuleContext{LEFT(){return this.tryGetToken(E.LEFT,0)}RIGHT(){return this.tryGetToken(E.RIGHT,0)}FULL(){return this.tryGetToken(E.FULL,0)}INNER(){return this.tryGetToken(E.INNER,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_matrixOperation}enterRule(e){e.enterMatrixOperation&&e.enterMatrixOperation(this)}exitRule(e){e.exitMatrixOperation&&e.exitMatrixOperation(this)}accept(e){return e.visitMatrixOperation?e.visitMatrixOperation(this):e.visitChildren(this)}};C.MatrixOperationContext=LA;var lp=class extends ee.ParserRuleContext{constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_joinDef}copyFrom(e){super.copyFrom(e)}};C.JoinDefContext=lp;var O8=class extends lp{joinNameDef(){return this.getRuleContext(0,NA)}WITH(){return this.getToken(E.WITH,0)}fieldExpr(){return this.getRuleContext(0,Ee)}ANNOTATION(e){return e===void 0?this.getTokens(E.ANNOTATION):this.getToken(E.ANNOTATION,e)}isExplore(){return this.tryGetRuleContext(0,wA)}matrixOperation(){return this.tryGetRuleContext(0,LA)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterJoinWith&&e.enterJoinWith(this)}exitRule(e){e.exitJoinWith&&e.exitJoinWith(this)}accept(e){return e.visitJoinWith?e.visitJoinWith(this):e.visitChildren(this)}};C.JoinWithContext=O8;var D8=class extends lp{joinNameDef(){return this.getRuleContext(0,NA)}ANNOTATION(e){return e===void 0?this.getTokens(E.ANNOTATION):this.getToken(E.ANNOTATION,e)}isExplore(){return this.tryGetRuleContext(0,wA)}ON(){return this.tryGetToken(E.ON,0)}joinExpression(){return this.tryGetRuleContext(0,Bb)}matrixOperation(){return this.tryGetRuleContext(0,LA)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterJoinOn&&e.enterJoinOn(this)}exitRule(e){e.exitJoinOn&&e.exitJoinOn(this)}accept(e){return e.visitJoinOn?e.visitJoinOn(this):e.visitChildren(this)}};C.JoinOnContext=D8;var Bb=class extends ee.ParserRuleContext{fieldExpr(){return this.getRuleContext(0,Ee)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_joinExpression}enterRule(e){e.enterJoinExpression&&e.enterJoinExpression(this)}exitRule(e){e.exitJoinExpression&&e.exitJoinExpression(this)}accept(e){return e.visitJoinExpression?e.visitJoinExpression(this):e.visitChildren(this)}};C.JoinExpressionContext=Bb;var N8=class extends ee.ParserRuleContext{whereStatement(){return this.tryGetRuleContext(0,vx)}havingStatement(){return this.tryGetRuleContext(0,MA)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_filterStatement}enterRule(e){e.enterFilterStatement&&e.enterFilterStatement(this)}exitRule(e){e.exitFilterStatement&&e.exitFilterStatement(this)}accept(e){return e.visitFilterStatement?e.visitFilterStatement(this):e.visitChildren(this)}};C.FilterStatementContext=N8;var Pm=class extends ee.ParserRuleContext{constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_filteredBy}copyFrom(e){super.copyFrom(e)}};C.FilteredByContext=Pm;var F8=class extends Pm{QMARK(){return this.getToken(E.QMARK,0)}fieldExpr(){return this.getRuleContext(0,Ee)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterFilterByShortcut&&e.enterFilterByShortcut(this)}exitRule(e){e.exitFilterByShortcut&&e.exitFilterByShortcut(this)}accept(e){return e.visitFilterByShortcut?e.visitFilterByShortcut(this):e.visitChildren(this)}};C.FilterByShortcutContext=F8;var w8=class extends Pm{whereStatement(){return this.getRuleContext(0,vx)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterFilterByWhere&&e.enterFilterByWhere(this)}exitRule(e){e.exitFilterByWhere&&e.exitFilterByWhere(this)}accept(e){return e.visitFilterByWhere?e.visitFilterByWhere(this):e.visitChildren(this)}};C.FilterByWhereContext=w8;var IA=class extends ee.ParserRuleContext{fieldExpr(e){return e===void 0?this.getRuleContexts(Ee):this.getRuleContext(e,Ee)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_filterClauseList}enterRule(e){e.enterFilterClauseList&&e.enterFilterClauseList(this)}exitRule(e){e.exitFilterClauseList&&e.exitFilterClauseList(this)}accept(e){return e.visitFilterClauseList?e.visitFilterClauseList(this):e.visitChildren(this)}};C.FilterClauseListContext=IA;var vx=class extends ee.ParserRuleContext{WHERE(){return this.getToken(E.WHERE,0)}filterClauseList(){return this.getRuleContext(0,IA)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_whereStatement}enterRule(e){e.enterWhereStatement&&e.enterWhereStatement(this)}exitRule(e){e.exitWhereStatement&&e.exitWhereStatement(this)}accept(e){return e.visitWhereStatement?e.visitWhereStatement(this):e.visitChildren(this)}};C.WhereStatementContext=vx;var MA=class extends ee.ParserRuleContext{HAVING(){return this.getToken(E.HAVING,0)}filterClauseList(){return this.getRuleContext(0,IA)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_havingStatement}enterRule(e){e.enterHavingStatement&&e.enterHavingStatement(this)}exitRule(e){e.exitHavingStatement&&e.exitHavingStatement(this)}accept(e){return e.visitHavingStatement?e.visitHavingStatement(this):e.visitChildren(this)}};C.HavingStatementContext=MA;var qb=class extends ee.ParserRuleContext{exploreQueryDef(e){return e===void 0?this.getRuleContexts(PA):this.getRuleContext(e,PA)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_subQueryDefList}enterRule(e){e.enterSubQueryDefList&&e.enterSubQueryDefList(this)}exitRule(e){e.exitSubQueryDefList&&e.exitSubQueryDefList(this)}accept(e){return e.visitSubQueryDefList?e.visitSubQueryDefList(this):e.visitChildren(this)}};C.SubQueryDefListContext=qb;var Ub=class extends ee.ParserRuleContext{id(){return this.getRuleContext(0,Cn)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_exploreQueryNameDef}enterRule(e){e.enterExploreQueryNameDef&&e.enterExploreQueryNameDef(this)}exitRule(e){e.exitExploreQueryNameDef&&e.exitExploreQueryNameDef(this)}accept(e){return e.visitExploreQueryNameDef?e.visitExploreQueryNameDef(this):e.visitChildren(this)}};C.ExploreQueryNameDefContext=Ub;var PA=class extends ee.ParserRuleContext{exploreQueryNameDef(){return this.getRuleContext(0,Ub)}isDefine(){return this.getRuleContext(0,Hl)}vExpr(){return this.getRuleContext(0,Gl)}ANNOTATION(e){return e===void 0?this.getTokens(E.ANNOTATION):this.getToken(E.ANNOTATION,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_exploreQueryDef}enterRule(e){e.enterExploreQueryDef&&e.enterExploreQueryDef(this)}exitRule(e){e.exitExploreQueryDef&&e.exitExploreQueryDef(this)}accept(e){return e.visitExploreQueryDef?e.visitExploreQueryDef(this):e.visitChildren(this)}};C.ExploreQueryDefContext=PA;var kA=class extends ee.ParserRuleContext{groupByStatement(){return this.tryGetRuleContext(0,jb)}declareStatement(){return this.tryGetRuleContext(0,Im)}queryJoinStatement(){return this.tryGetRuleContext(0,$b)}queryExtend(){return this.tryGetRuleContext(0,Pb)}projectStatement(){return this.tryGetRuleContext(0,Vb)}indexStatement(){return this.tryGetRuleContext(0,eT)}aggregateStatement(){return this.tryGetRuleContext(0,Gb)}calculateStatement(){return this.tryGetRuleContext(0,Qb)}topStatement(){return this.tryGetRuleContext(0,Jb)}limitStatement(){return this.tryGetRuleContext(0,Kb)}orderByStatement(){return this.tryGetRuleContext(0,Wb)}whereStatement(){return this.tryGetRuleContext(0,vx)}havingStatement(){return this.tryGetRuleContext(0,MA)}nestStatement(){return this.tryGetRuleContext(0,Hb)}sampleStatement(){return this.tryGetRuleContext(0,tT)}timezoneStatement(){return this.tryGetRuleContext(0,$A)}queryAnnotation(){return this.tryGetRuleContext(0,rT)}ignoredModelAnnotations(){return this.tryGetRuleContext(0,SA)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_queryStatement}enterRule(e){e.enterQueryStatement&&e.enterQueryStatement(this)}exitRule(e){e.exitQueryStatement&&e.exitQueryStatement(this)}accept(e){return e.visitQueryStatement?e.visitQueryStatement(this):e.visitChildren(this)}};C.QueryStatementContext=kA;var $b=class extends ee.ParserRuleContext{joinStatement(){return this.getRuleContext(0,zl)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_queryJoinStatement}enterRule(e){e.enterQueryJoinStatement&&e.enterQueryJoinStatement(this)}exitRule(e){e.exitQueryJoinStatement&&e.exitQueryJoinStatement(this)}accept(e){return e.visitQueryJoinStatement?e.visitQueryJoinStatement(this):e.visitChildren(this)}};C.QueryJoinStatementContext=$b;var jb=class extends ee.ParserRuleContext{tags(){return this.getRuleContext(0,Xt)}GROUP_BY(){return this.getToken(E.GROUP_BY,0)}queryFieldList(){return this.getRuleContext(0,km)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_groupByStatement}enterRule(e){e.enterGroupByStatement&&e.enterGroupByStatement(this)}exitRule(e){e.exitGroupByStatement&&e.exitGroupByStatement(this)}accept(e){return e.visitGroupByStatement?e.visitGroupByStatement(this):e.visitChildren(this)}};C.GroupByStatementContext=jb;var km=class extends ee.ParserRuleContext{queryFieldEntry(e){return e===void 0?this.getRuleContexts(BA):this.getRuleContext(e,BA)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_queryFieldList}enterRule(e){e.enterQueryFieldList&&e.enterQueryFieldList(this)}exitRule(e){e.exitQueryFieldList&&e.exitQueryFieldList(this)}accept(e){return e.visitQueryFieldList?e.visitQueryFieldList(this):e.visitChildren(this)}};C.QueryFieldListContext=km;var BA=class extends ee.ParserRuleContext{taggedRef(){return this.tryGetRuleContext(0,WA)}fieldDef(){return this.tryGetRuleContext(0,up)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_queryFieldEntry}enterRule(e){e.enterQueryFieldEntry&&e.enterQueryFieldEntry(this)}exitRule(e){e.exitQueryFieldEntry&&e.exitQueryFieldEntry(this)}accept(e){return e.visitQueryFieldEntry?e.visitQueryFieldEntry(this):e.visitChildren(this)}};C.QueryFieldEntryContext=BA;var Hb=class extends ee.ParserRuleContext{tags(){return this.getRuleContext(0,Xt)}NEST(){return this.getToken(E.NEST,0)}nestedQueryList(){return this.getRuleContext(0,zb)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_nestStatement}enterRule(e){e.enterNestStatement&&e.enterNestStatement(this)}exitRule(e){e.exitNestStatement&&e.exitNestStatement(this)}accept(e){return e.visitNestStatement?e.visitNestStatement(this):e.visitChildren(this)}};C.NestStatementContext=Hb;var zb=class extends ee.ParserRuleContext{nestEntry(e){return e===void 0?this.getRuleContexts(cp):this.getRuleContext(e,cp)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_nestedQueryList}enterRule(e){e.enterNestedQueryList&&e.enterNestedQueryList(this)}exitRule(e){e.exitNestedQueryList&&e.exitNestedQueryList(this)}accept(e){return e.visitNestedQueryList?e.visitNestedQueryList(this):e.visitChildren(this)}};C.NestedQueryListContext=zb;var cp=class extends ee.ParserRuleContext{constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_nestEntry}copyFrom(e){super.copyFrom(e)}};C.NestEntryContext=cp;var L8=class extends cp{tags(){return this.getRuleContext(0,Xt)}fieldPath(){return this.getRuleContext(0,ju)}PLUS(){return this.tryGetToken(E.PLUS,0)}vExpr(){return this.tryGetRuleContext(0,Gl)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterNestExisting&&e.enterNestExisting(this)}exitRule(e){e.exitNestExisting&&e.exitNestExisting(this)}accept(e){return e.visitNestExisting?e.visitNestExisting(this):e.visitChildren(this)}};C.NestExistingContext=L8;var I8=class extends cp{tags(){return this.getRuleContext(0,Xt)}queryName(){return this.getRuleContext(0,TA)}isDefine(){return this.getRuleContext(0,Hl)}vExpr(){return this.getRuleContext(0,Gl)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterNestDef&&e.enterNestDef(this)}exitRule(e){e.exitNestDef&&e.exitNestDef(this)}accept(e){return e.visitNestDef?e.visitNestDef(this):e.visitChildren(this)}};C.NestDefContext=I8;var Gb=class extends ee.ParserRuleContext{tags(){return this.getRuleContext(0,Xt)}AGGREGATE(){return this.getToken(E.AGGREGATE,0)}queryFieldList(){return this.getRuleContext(0,km)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_aggregateStatement}enterRule(e){e.enterAggregateStatement&&e.enterAggregateStatement(this)}exitRule(e){e.exitAggregateStatement&&e.exitAggregateStatement(this)}accept(e){return e.visitAggregateStatement?e.visitAggregateStatement(this):e.visitChildren(this)}};C.AggregateStatementContext=Gb;var Qb=class extends ee.ParserRuleContext{tags(){return this.getRuleContext(0,Xt)}CALCULATE(){return this.getToken(E.CALCULATE,0)}queryFieldList(){return this.getRuleContext(0,km)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_calculateStatement}enterRule(e){e.enterCalculateStatement&&e.enterCalculateStatement(this)}exitRule(e){e.exitCalculateStatement&&e.exitCalculateStatement(this)}accept(e){return e.visitCalculateStatement?e.visitCalculateStatement(this):e.visitChildren(this)}};C.CalculateStatementContext=Qb;var Vb=class extends ee.ParserRuleContext{tags(){return this.getRuleContext(0,Xt)}fieldCollection(){return this.getRuleContext(0,cT)}SELECT(){return this.tryGetToken(E.SELECT,0)}PROJECT(){return this.tryGetToken(E.PROJECT,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_projectStatement}enterRule(e){e.enterProjectStatement&&e.enterProjectStatement(this)}exitRule(e){e.exitProjectStatement&&e.exitProjectStatement(this)}accept(e){return e.visitProjectStatement?e.visitProjectStatement(this):e.visitChildren(this)}};C.ProjectStatementContext=Vb;var Wb=class extends ee.ParserRuleContext{ORDER_BY(){return this.getToken(E.ORDER_BY,0)}ordering(){return this.getRuleContext(0,Yb)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_orderByStatement}enterRule(e){e.enterOrderByStatement&&e.enterOrderByStatement(this)}exitRule(e){e.exitOrderByStatement&&e.exitOrderByStatement(this)}accept(e){return e.visitOrderByStatement?e.visitOrderByStatement(this):e.visitChildren(this)}};C.OrderByStatementContext=Wb;var Yb=class extends ee.ParserRuleContext{orderBySpec(e){return e===void 0?this.getRuleContexts(qA):this.getRuleContext(e,qA)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_ordering}enterRule(e){e.enterOrdering&&e.enterOrdering(this)}exitRule(e){e.exitOrdering&&e.exitOrdering(this)}accept(e){return e.visitOrdering?e.visitOrdering(this):e.visitChildren(this)}};C.OrderingContext=Yb;var qA=class extends ee.ParserRuleContext{INTEGER_LITERAL(){return this.tryGetToken(E.INTEGER_LITERAL,0)}fieldName(){return this.tryGetRuleContext(0,Is)}ASC(){return this.tryGetToken(E.ASC,0)}DESC(){return this.tryGetToken(E.DESC,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_orderBySpec}enterRule(e){e.enterOrderBySpec&&e.enterOrderBySpec(this)}exitRule(e){e.exitOrderBySpec&&e.exitOrderBySpec(this)}accept(e){return e.visitOrderBySpec?e.visitOrderBySpec(this):e.visitChildren(this)}};C.OrderBySpecContext=qA;var Kb=class extends ee.ParserRuleContext{LIMIT(){return this.getToken(E.LIMIT,0)}INTEGER_LITERAL(){return this.getToken(E.INTEGER_LITERAL,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_limitStatement}enterRule(e){e.enterLimitStatement&&e.enterLimitStatement(this)}exitRule(e){e.exitLimitStatement&&e.exitLimitStatement(this)}accept(e){return e.visitLimitStatement?e.visitLimitStatement(this):e.visitChildren(this)}};C.LimitStatementContext=Kb;var Xb=class extends ee.ParserRuleContext{BY(){return this.getToken(E.BY,0)}fieldName(){return this.tryGetRuleContext(0,Is)}fieldExpr(){return this.tryGetRuleContext(0,Ee)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_bySpec}enterRule(e){e.enterBySpec&&e.enterBySpec(this)}exitRule(e){e.exitBySpec&&e.exitBySpec(this)}accept(e){return e.visitBySpec?e.visitBySpec(this):e.visitChildren(this)}};C.BySpecContext=Xb;var Jb=class extends ee.ParserRuleContext{TOP(){return this.getToken(E.TOP,0)}INTEGER_LITERAL(){return this.getToken(E.INTEGER_LITERAL,0)}bySpec(){return this.tryGetRuleContext(0,Xb)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_topStatement}enterRule(e){e.enterTopStatement&&e.enterTopStatement(this)}exitRule(e){e.exitTopStatement&&e.exitTopStatement(this)}accept(e){return e.visitTopStatement?e.visitTopStatement(this):e.visitChildren(this)}};C.TopStatementContext=Jb;var UA=class extends ee.ParserRuleContext{fieldPath(){return this.tryGetRuleContext(0,ju)}DOT(){return this.tryGetToken(E.DOT,0)}STAR(){return this.tryGetToken(E.STAR,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_indexElement}enterRule(e){e.enterIndexElement&&e.enterIndexElement(this)}exitRule(e){e.exitIndexElement&&e.exitIndexElement(this)}accept(e){return e.visitIndexElement?e.visitIndexElement(this):e.visitChildren(this)}};C.IndexElementContext=UA;var Zb=class extends ee.ParserRuleContext{indexElement(e){return e===void 0?this.getRuleContexts(UA):this.getRuleContext(e,UA)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_indexFields}enterRule(e){e.enterIndexFields&&e.enterIndexFields(this)}exitRule(e){e.exitIndexFields&&e.exitIndexFields(this)}accept(e){return e.visitIndexFields?e.visitIndexFields(this):e.visitChildren(this)}};C.IndexFieldsContext=Zb;var eT=class extends ee.ParserRuleContext{INDEX(){return this.getToken(E.INDEX,0)}indexFields(){return this.getRuleContext(0,Zb)}BY(){return this.tryGetToken(E.BY,0)}fieldName(){return this.tryGetRuleContext(0,Is)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_indexStatement}enterRule(e){e.enterIndexStatement&&e.enterIndexStatement(this)}exitRule(e){e.exitIndexStatement&&e.exitIndexStatement(this)}accept(e){return e.visitIndexStatement?e.visitIndexStatement(this):e.visitChildren(this)}};C.IndexStatementContext=eT;var tT=class extends ee.ParserRuleContext{SAMPLE(){return this.getToken(E.SAMPLE,0)}sampleSpec(){return this.getRuleContext(0,nT)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_sampleStatement}enterRule(e){e.enterSampleStatement&&e.enterSampleStatement(this)}exitRule(e){e.exitSampleStatement&&e.exitSampleStatement(this)}accept(e){return e.visitSampleStatement?e.visitSampleStatement(this):e.visitChildren(this)}};C.SampleStatementContext=tT;var $A=class extends ee.ParserRuleContext{TIMEZONE(){return this.getToken(E.TIMEZONE,0)}string(){return this.getRuleContext(0,qu)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_timezoneStatement}enterRule(e){e.enterTimezoneStatement&&e.enterTimezoneStatement(this)}exitRule(e){e.exitTimezoneStatement&&e.exitTimezoneStatement(this)}accept(e){return e.visitTimezoneStatement?e.visitTimezoneStatement(this):e.visitChildren(this)}};C.TimezoneStatementContext=$A;var rT=class extends ee.ParserRuleContext{ANNOTATION(){return this.getToken(E.ANNOTATION,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_queryAnnotation}enterRule(e){e.enterQueryAnnotation&&e.enterQueryAnnotation(this)}exitRule(e){e.exitQueryAnnotation&&e.exitQueryAnnotation(this)}accept(e){return e.visitQueryAnnotation?e.visitQueryAnnotation(this):e.visitChildren(this)}};C.QueryAnnotationContext=rT;var nT=class extends ee.ParserRuleContext{PERCENT_LITERAL(){return this.tryGetToken(E.PERCENT_LITERAL,0)}INTEGER_LITERAL(){return this.tryGetToken(E.INTEGER_LITERAL,0)}TRUE(){return this.tryGetToken(E.TRUE,0)}FALSE(){return this.tryGetToken(E.FALSE,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_sampleSpec}enterRule(e){e.enterSampleSpec&&e.enterSampleSpec(this)}exitRule(e){e.exitSampleSpec&&e.exitSampleSpec(this)}accept(e){return e.visitSampleSpec?e.visitSampleSpec(this):e.visitChildren(this)}};C.SampleSpecContext=nT;var Bm=class extends ee.ParserRuleContext{SUM(){return this.tryGetToken(E.SUM,0)}COUNT(){return this.tryGetToken(E.COUNT,0)}AVG(){return this.tryGetToken(E.AVG,0)}MIN(){return this.tryGetToken(E.MIN,0)}MAX(){return this.tryGetToken(E.MAX,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_aggregate}enterRule(e){e.enterAggregate&&e.enterAggregate(this)}exitRule(e){e.exitAggregate&&e.exitAggregate(this)}accept(e){return e.visitAggregate?e.visitAggregate(this):e.visitChildren(this)}};C.AggregateContext=Bm;var jA=class extends ee.ParserRuleContext{STRING(){return this.tryGetToken(E.STRING,0)}NUMBER(){return this.tryGetToken(E.NUMBER,0)}BOOLEAN(){return this.tryGetToken(E.BOOLEAN,0)}DATE(){return this.tryGetToken(E.DATE,0)}TIMESTAMP(){return this.tryGetToken(E.TIMESTAMP,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_malloyType}enterRule(e){e.enterMalloyType&&e.enterMalloyType(this)}exitRule(e){e.exitMalloyType&&e.exitMalloyType(this)}accept(e){return e.visitMalloyType?e.visitMalloyType(this):e.visitChildren(this)}};C.MalloyTypeContext=jA;var HA=class extends ee.ParserRuleContext{MATCH(){return this.tryGetToken(E.MATCH,0)}NOT_MATCH(){return this.tryGetToken(E.NOT_MATCH,0)}GT(){return this.tryGetToken(E.GT,0)}LT(){return this.tryGetToken(E.LT,0)}GTE(){return this.tryGetToken(E.GTE,0)}LTE(){return this.tryGetToken(E.LTE,0)}EQ(){return this.tryGetToken(E.EQ,0)}NE(){return this.tryGetToken(E.NE,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_compareOp}enterRule(e){e.enterCompareOp&&e.enterCompareOp(this)}exitRule(e){e.exitCompareOp&&e.exitCompareOp(this)}accept(e){return e.visitCompareOp?e.visitCompareOp(this):e.visitChildren(this)}};C.CompareOpContext=HA;var qu=class extends ee.ParserRuleContext{shortString(){return this.tryGetRuleContext(0,zA)}sqlString(){return this.tryGetRuleContext(0,Fm)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_string}enterRule(e){e.enterString&&e.enterString(this)}exitRule(e){e.exitString&&e.exitString(this)}accept(e){return e.visitString?e.visitString(this):e.visitChildren(this)}};C.StringContext=qu;var zA=class extends ee.ParserRuleContext{SQ_STRING(){return this.tryGetToken(E.SQ_STRING,0)}DQ_STRING(){return this.tryGetToken(E.DQ_STRING,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_shortString}enterRule(e){e.enterShortString&&e.enterShortString(this)}exitRule(e){e.exitShortString&&e.exitShortString(this)}accept(e){return e.visitShortString?e.visitShortString(this):e.visitChildren(this)}};C.ShortStringContext=zA;var iT=class extends ee.ParserRuleContext{NUMERIC_LITERAL(){return this.tryGetToken(E.NUMERIC_LITERAL,0)}INTEGER_LITERAL(){return this.tryGetToken(E.INTEGER_LITERAL,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_numericLiteral}enterRule(e){e.enterNumericLiteral&&e.enterNumericLiteral(this)}exitRule(e){e.exitNumericLiteral&&e.exitNumericLiteral(this)}accept(e){return e.visitNumericLiteral?e.visitNumericLiteral(this):e.visitChildren(this)}};C.NumericLiteralContext=iT;var Uu=class extends ee.ParserRuleContext{constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_literal}copyFrom(e){super.copyFrom(e)}};C.LiteralContext=Uu;var M8=class extends Uu{string(){return this.getRuleContext(0,qu)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprString&&e.enterExprString(this)}exitRule(e){e.exitExprString&&e.exitExprString(this)}accept(e){return e.visitExprString?e.visitExprString(this):e.visitChildren(this)}};C.ExprStringContext=M8;var P8=class extends Uu{numericLiteral(){return this.getRuleContext(0,iT)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprNumber&&e.enterExprNumber(this)}exitRule(e){e.exitExprNumber&&e.exitExprNumber(this)}accept(e){return e.visitExprNumber?e.visitExprNumber(this):e.visitChildren(this)}};C.ExprNumberContext=P8;var k8=class extends Uu{dateLiteral(){return this.getRuleContext(0,$u)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprTime&&e.enterExprTime(this)}exitRule(e){e.exitExprTime&&e.exitExprTime(this)}accept(e){return e.visitExprTime?e.visitExprTime(this):e.visitChildren(this)}};C.ExprTimeContext=k8;var B8=class extends Uu{NULL(){return this.getToken(E.NULL,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprNULL&&e.enterExprNULL(this)}exitRule(e){e.exitExprNULL&&e.exitExprNULL(this)}accept(e){return e.visitExprNULL?e.visitExprNULL(this):e.visitChildren(this)}};C.ExprNULLContext=B8;var q8=class extends Uu{TRUE(){return this.tryGetToken(E.TRUE,0)}FALSE(){return this.tryGetToken(E.FALSE,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprBool&&e.enterExprBool(this)}exitRule(e){e.exitExprBool&&e.exitExprBool(this)}accept(e){return e.visitExprBool?e.visitExprBool(this):e.visitChildren(this)}};C.ExprBoolContext=q8;var U8=class extends Uu{HACKY_REGEX(){return this.getToken(E.HACKY_REGEX,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprRegex&&e.enterExprRegex(this)}exitRule(e){e.exitExprRegex&&e.exitExprRegex(this)}accept(e){return e.visitExprRegex?e.visitExprRegex(this):e.visitChildren(this)}};C.ExprRegexContext=U8;var $8=class extends Uu{NOW(){return this.getToken(E.NOW,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprNow&&e.enterExprNow(this)}exitRule(e){e.exitExprNow&&e.exitExprNow(this)}accept(e){return e.visitExprNow?e.visitExprNow(this):e.visitChildren(this)}};C.ExprNowContext=$8;var $u=class extends ee.ParserRuleContext{constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_dateLiteral}copyFrom(e){super.copyFrom(e)}};C.DateLiteralContext=$u;var j8=class extends $u{LITERAL_TIMESTAMP(){return this.getToken(E.LITERAL_TIMESTAMP,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterLiteralTimestamp&&e.enterLiteralTimestamp(this)}exitRule(e){e.exitLiteralTimestamp&&e.exitLiteralTimestamp(this)}accept(e){return e.visitLiteralTimestamp?e.visitLiteralTimestamp(this):e.visitChildren(this)}};C.LiteralTimestampContext=j8;var H8=class extends $u{LITERAL_HOUR(){return this.getToken(E.LITERAL_HOUR,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterLiteralHour&&e.enterLiteralHour(this)}exitRule(e){e.exitLiteralHour&&e.exitLiteralHour(this)}accept(e){return e.visitLiteralHour?e.visitLiteralHour(this):e.visitChildren(this)}};C.LiteralHourContext=H8;var z8=class extends $u{LITERAL_DAY(){return this.getToken(E.LITERAL_DAY,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterLiteralDay&&e.enterLiteralDay(this)}exitRule(e){e.exitLiteralDay&&e.exitLiteralDay(this)}accept(e){return e.visitLiteralDay?e.visitLiteralDay(this):e.visitChildren(this)}};C.LiteralDayContext=z8;var G8=class extends $u{LITERAL_WEEK(){return this.getToken(E.LITERAL_WEEK,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterLiteralWeek&&e.enterLiteralWeek(this)}exitRule(e){e.exitLiteralWeek&&e.exitLiteralWeek(this)}accept(e){return e.visitLiteralWeek?e.visitLiteralWeek(this):e.visitChildren(this)}};C.LiteralWeekContext=G8;var Q8=class extends $u{LITERAL_MONTH(){return this.getToken(E.LITERAL_MONTH,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterLiteralMonth&&e.enterLiteralMonth(this)}exitRule(e){e.exitLiteralMonth&&e.exitLiteralMonth(this)}accept(e){return e.visitLiteralMonth?e.visitLiteralMonth(this):e.visitChildren(this)}};C.LiteralMonthContext=Q8;var V8=class extends $u{LITERAL_QUARTER(){return this.getToken(E.LITERAL_QUARTER,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterLiteralQuarter&&e.enterLiteralQuarter(this)}exitRule(e){e.exitLiteralQuarter&&e.exitLiteralQuarter(this)}accept(e){return e.visitLiteralQuarter?e.visitLiteralQuarter(this):e.visitChildren(this)}};C.LiteralQuarterContext=V8;var W8=class extends $u{LITERAL_YEAR(){return this.getToken(E.LITERAL_YEAR,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterLiteralYear&&e.enterLiteralYear(this)}exitRule(e){e.exitLiteralYear&&e.exitLiteralYear(this)}accept(e){return e.visitLiteralYear?e.visitLiteralYear(this):e.visitChildren(this)}};C.LiteralYearContext=W8;var sT=class extends ee.ParserRuleContext{string(){return this.getRuleContext(0,qu)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_tablePath}enterRule(e){e.enterTablePath&&e.enterTablePath(this)}exitRule(e){e.exitTablePath&&e.exitTablePath(this)}accept(e){return e.visitTablePath?e.visitTablePath(this):e.visitChildren(this)}};C.TablePathContext=sT;var oT=class extends ee.ParserRuleContext{string(){return this.getRuleContext(0,qu)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_tableURI}enterRule(e){e.enterTableURI&&e.enterTableURI(this)}exitRule(e){e.exitTableURI&&e.exitTableURI(this)}accept(e){return e.visitTableURI?e.visitTableURI(this):e.visitChildren(this)}};C.TableURIContext=oT;var Cn=class extends ee.ParserRuleContext{IDENTIFIER(){return this.tryGetToken(E.IDENTIFIER,0)}BQ_STRING(){return this.tryGetToken(E.BQ_STRING,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_id}enterRule(e){e.enterId&&e.enterId(this)}exitRule(e){e.exitId&&e.exitId(this)}accept(e){return e.visitId?e.visitId(this):e.visitChildren(this)}};C.IdContext=Cn;var _x=class extends ee.ParserRuleContext{SECOND(){return this.tryGetToken(E.SECOND,0)}MINUTE(){return this.tryGetToken(E.MINUTE,0)}HOUR(){return this.tryGetToken(E.HOUR,0)}DAY(){return this.tryGetToken(E.DAY,0)}WEEK(){return this.tryGetToken(E.WEEK,0)}MONTH(){return this.tryGetToken(E.MONTH,0)}QUARTER(){return this.tryGetToken(E.QUARTER,0)}YEAR(){return this.tryGetToken(E.YEAR,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_timeframe}enterRule(e){e.enterTimeframe&&e.enterTimeframe(this)}exitRule(e){e.exitTimeframe&&e.exitTimeframe(this)}accept(e){return e.visitTimeframe?e.visitTimeframe(this):e.visitChildren(this)}};C.TimeframeContext=_x;var aT=class extends ee.ParserRuleContext{ALL(){return this.tryGetToken(E.ALL,0)}EXCLUDE(){return this.tryGetToken(E.EXCLUDE,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_ungroup}enterRule(e){e.enterUngroup&&e.enterUngroup(this)}exitRule(e){e.exitUngroup&&e.exitUngroup(this)}accept(e){return e.visitUngroup?e.visitUngroup(this):e.visitChildren(this)}};C.UngroupContext=aT;var GA=class extends ee.ParserRuleContext{malloyType(){return this.tryGetRuleContext(0,jA)}string(){return this.tryGetRuleContext(0,qu)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_malloyOrSQLType}enterRule(e){e.enterMalloyOrSQLType&&e.enterMalloyOrSQLType(this)}exitRule(e){e.exitMalloyOrSQLType&&e.exitMalloyOrSQLType(this)}accept(e){return e.visitMalloyOrSQLType?e.visitMalloyOrSQLType(this):e.visitChildren(this)}};C.MalloyOrSQLTypeContext=GA;var Ee=class extends ee.ParserRuleContext{constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_fieldExpr}copyFrom(e){super.copyFrom(e)}};C.FieldExprContext=Ee;var Y8=class extends Ee{fieldPath(){return this.getRuleContext(0,ju)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprFieldPath&&e.enterExprFieldPath(this)}exitRule(e){e.exitExprFieldPath&&e.exitExprFieldPath(this)}accept(e){return e.visitExprFieldPath?e.visitExprFieldPath(this):e.visitChildren(this)}};C.ExprFieldPathContext=Y8;var K8=class extends Ee{fieldExpr(){return this.getRuleContext(0,Ee)}OCURLY(){return this.getToken(E.OCURLY,0)}filteredBy(){return this.getRuleContext(0,Pm)}CCURLY(){return this.getToken(E.CCURLY,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprFilter&&e.enterExprFilter(this)}exitRule(e){e.exitExprFilter&&e.exitExprFilter(this)}accept(e){return e.visitExprFilter?e.visitExprFilter(this):e.visitChildren(this)}};C.ExprFilterContext=K8;var X8=class extends Ee{literal(){return this.getRuleContext(0,Uu)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprLiteral&&e.enterExprLiteral(this)}exitRule(e){e.exitExprLiteral&&e.exitExprLiteral(this)}accept(e){return e.visitExprLiteral?e.visitExprLiteral(this):e.visitChildren(this)}};C.ExprLiteralContext=X8;var J8=class extends Ee{fieldExpr(){return this.getRuleContext(0,Ee)}timeframe(){return this.getRuleContext(0,_x)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprDuration&&e.enterExprDuration(this)}exitRule(e){e.exitExprDuration&&e.exitExprDuration(this)}accept(e){return e.visitExprDuration?e.visitExprDuration(this):e.visitChildren(this)}};C.ExprDurationContext=J8;var Z8=class extends Ee{fieldExpr(){return this.getRuleContext(0,Ee)}DOT(){return this.getToken(E.DOT,0)}timeframe(){return this.getRuleContext(0,_x)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprTimeTrunc&&e.enterExprTimeTrunc(this)}exitRule(e){e.exitExprTimeTrunc&&e.exitExprTimeTrunc(this)}accept(e){return e.visitExprTimeTrunc?e.visitExprTimeTrunc(this):e.visitChildren(this)}};C.ExprTimeTruncContext=Z8;var uT=class extends Ee{fieldExpr(){return this.getRuleContext(0,Ee)}DOUBLECOLON(){return this.tryGetToken(E.DOUBLECOLON,0)}malloyOrSQLType(){return this.getRuleContext(0,GA)}CAST(){return this.tryGetToken(E.CAST,0)}OPAREN(){return this.tryGetToken(E.OPAREN,0)}AS(){return this.tryGetToken(E.AS,0)}CPAREN(){return this.tryGetToken(E.CPAREN,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprCast&&e.enterExprCast(this)}exitRule(e){e.exitExprCast&&e.exitExprCast(this)}accept(e){return e.visitExprCast?e.visitExprCast(this):e.visitChildren(this)}};C.ExprCastContext=uT;var e9=class extends Ee{fieldExpr(){return this.getRuleContext(0,Ee)}TRIPLECOLON(){return this.getToken(E.TRIPLECOLON,0)}malloyOrSQLType(){return this.getRuleContext(0,GA)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprSafeCast&&e.enterExprSafeCast(this)}exitRule(e){e.exitExprSafeCast&&e.exitExprSafeCast(this)}accept(e){return e.visitExprSafeCast?e.visitExprSafeCast(this):e.visitChildren(this)}};C.ExprSafeCastContext=e9;var t9=class extends Ee{MINUS(){return this.getToken(E.MINUS,0)}fieldExpr(){return this.getRuleContext(0,Ee)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprMinus&&e.enterExprMinus(this)}exitRule(e){e.exitExprMinus&&e.exitExprMinus(this)}accept(e){return e.visitExprMinus?e.visitExprMinus(this):e.visitChildren(this)}};C.ExprMinusContext=t9;var r9=class extends Ee{fieldExpr(e){return e===void 0?this.getRuleContexts(Ee):this.getRuleContext(e,Ee)}STAR(){return this.tryGetToken(E.STAR,0)}SLASH(){return this.tryGetToken(E.SLASH,0)}PERCENT(){return this.tryGetToken(E.PERCENT,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprMulDiv&&e.enterExprMulDiv(this)}exitRule(e){e.exitExprMulDiv&&e.exitExprMulDiv(this)}accept(e){return e.visitExprMulDiv?e.visitExprMulDiv(this):e.visitChildren(this)}};C.ExprMulDivContext=r9;var n9=class extends Ee{fieldExpr(e){return e===void 0?this.getRuleContexts(Ee):this.getRuleContext(e,Ee)}PLUS(){return this.tryGetToken(E.PLUS,0)}MINUS(){return this.tryGetToken(E.MINUS,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprAddSub&&e.enterExprAddSub(this)}exitRule(e){e.exitExprAddSub&&e.exitExprAddSub(this)}accept(e){return e.visitExprAddSub?e.visitExprAddSub(this):e.visitChildren(this)}};C.ExprAddSubContext=n9;var i9=class extends Ee{fieldExpr(e){return e===void 0?this.getRuleContexts(Ee):this.getRuleContext(e,Ee)}TO(){return this.getToken(E.TO,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprRange&&e.enterExprRange(this)}exitRule(e){e.exitExprRange&&e.exitExprRange(this)}accept(e){return e.visitExprRange?e.visitExprRange(this):e.visitChildren(this)}};C.ExprRangeContext=i9;var s9=class extends Ee{FOR(){return this.getToken(E.FOR,0)}timeframe(){return this.getRuleContext(0,_x)}fieldExpr(e){return e===void 0?this.getRuleContexts(Ee):this.getRuleContext(e,Ee)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprForRange&&e.enterExprForRange(this)}exitRule(e){e.exitExprForRange&&e.exitExprForRange(this)}accept(e){return e.visitExprForRange?e.visitExprForRange(this):e.visitChildren(this)}};C.ExprForRangeContext=s9;var o9=class extends Ee{fieldExpr(){return this.getRuleContext(0,Ee)}AMPER(){return this.getToken(E.AMPER,0)}partialAllowedFieldExpr(){return this.getRuleContext(0,bx)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprAndTree&&e.enterExprAndTree(this)}exitRule(e){e.exitExprAndTree&&e.exitExprAndTree(this)}accept(e){return e.visitExprAndTree?e.visitExprAndTree(this):e.visitChildren(this)}};C.ExprAndTreeContext=o9;var a9=class extends Ee{fieldExpr(){return this.getRuleContext(0,Ee)}BAR(){return this.getToken(E.BAR,0)}partialAllowedFieldExpr(){return this.getRuleContext(0,bx)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprOrTree&&e.enterExprOrTree(this)}exitRule(e){e.exitExprOrTree&&e.exitExprOrTree(this)}accept(e){return e.visitExprOrTree?e.visitExprOrTree(this):e.visitChildren(this)}};C.ExprOrTreeContext=a9;var u9=class extends Ee{fieldExpr(e){return e===void 0?this.getRuleContexts(Ee):this.getRuleContext(e,Ee)}compareOp(){return this.getRuleContext(0,HA)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprCompare&&e.enterExprCompare(this)}exitRule(e){e.exitExprCompare&&e.exitExprCompare(this)}accept(e){return e.visitExprCompare?e.visitExprCompare(this):e.visitChildren(this)}};C.ExprCompareContext=u9;var l9=class extends Ee{fieldExpr(){return this.getRuleContext(0,Ee)}QMARK(){return this.getToken(E.QMARK,0)}partialAllowedFieldExpr(){return this.getRuleContext(0,bx)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprApply&&e.enterExprApply(this)}exitRule(e){e.exitExprApply&&e.exitExprApply(this)}accept(e){return e.visitExprApply?e.visitExprApply(this):e.visitChildren(this)}};C.ExprApplyContext=l9;var c9=class extends Ee{NOT(){return this.getToken(E.NOT,0)}fieldExpr(){return this.getRuleContext(0,Ee)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprNot&&e.enterExprNot(this)}exitRule(e){e.exitExprNot&&e.exitExprNot(this)}accept(e){return e.visitExprNot?e.visitExprNot(this):e.visitChildren(this)}};C.ExprNotContext=c9;var f9=class extends Ee{fieldExpr(e){return e===void 0?this.getRuleContexts(Ee):this.getRuleContext(e,Ee)}AND(){return this.getToken(E.AND,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprLogicalAnd&&e.enterExprLogicalAnd(this)}exitRule(e){e.exitExprLogicalAnd&&e.exitExprLogicalAnd(this)}accept(e){return e.visitExprLogicalAnd?e.visitExprLogicalAnd(this):e.visitChildren(this)}};C.ExprLogicalAndContext=f9;var x9=class extends Ee{fieldExpr(e){return e===void 0?this.getRuleContexts(Ee):this.getRuleContext(e,Ee)}OR(){return this.getToken(E.OR,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprLogicalOr&&e.enterExprLogicalOr(this)}exitRule(e){e.exitExprLogicalOr&&e.exitExprLogicalOr(this)}accept(e){return e.visitExprLogicalOr?e.visitExprLogicalOr(this):e.visitChildren(this)}};C.ExprLogicalOrContext=x9;var d9=class extends Ee{fieldExpr(e){return e===void 0?this.getRuleContexts(Ee):this.getRuleContext(e,Ee)}DOUBLE_QMARK(){return this.getToken(E.DOUBLE_QMARK,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprCoalesce&&e.enterExprCoalesce(this)}exitRule(e){e.exitExprCoalesce&&e.exitExprCoalesce(this)}accept(e){return e.visitExprCoalesce?e.visitExprCoalesce(this):e.visitChildren(this)}};C.ExprCoalesceContext=d9;var h9=class extends Ee{COUNT(){return this.getToken(E.COUNT,0)}OPAREN(){return this.getToken(E.OPAREN,0)}DISTINCT(){return this.getToken(E.DISTINCT,0)}fieldExpr(){return this.getRuleContext(0,Ee)}CPAREN(){return this.getToken(E.CPAREN,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprCountDisinct&&e.enterExprCountDisinct(this)}exitRule(e){e.exitExprCountDisinct&&e.exitExprCountDisinct(this)}accept(e){return e.visitExprCountDisinct?e.visitExprCountDisinct(this):e.visitChildren(this)}};C.ExprCountDisinctContext=h9;var p9=class extends Ee{aggregate(){return this.getRuleContext(0,Bm)}OPAREN(){return this.getToken(E.OPAREN,0)}CPAREN(){return this.getToken(E.CPAREN,0)}SOURCE_KW(){return this.tryGetToken(E.SOURCE_KW,0)}DOT(){return this.tryGetToken(E.DOT,0)}fieldExpr(){return this.tryGetRuleContext(0,Ee)}STAR(){return this.tryGetToken(E.STAR,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprPathlessAggregate&&e.enterExprPathlessAggregate(this)}exitRule(e){e.exitExprPathlessAggregate&&e.exitExprPathlessAggregate(this)}accept(e){return e.visitExprPathlessAggregate?e.visitExprPathlessAggregate(this):e.visitChildren(this)}};C.ExprPathlessAggregateContext=p9;var m9=class extends Ee{fieldPath(){return this.getRuleContext(0,ju)}DOT(){return this.getToken(E.DOT,0)}aggregate(){return this.getRuleContext(0,Bm)}OPAREN(){return this.getToken(E.OPAREN,0)}CPAREN(){return this.getToken(E.CPAREN,0)}fieldExpr(){return this.tryGetRuleContext(0,Ee)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprAggregate&&e.enterExprAggregate(this)}exitRule(e){e.exitExprAggregate&&e.exitExprAggregate(this)}accept(e){return e.visitExprAggregate?e.visitExprAggregate(this):e.visitChildren(this)}};C.ExprAggregateContext=m9;var g9=class extends Ee{OPAREN(){return this.getToken(E.OPAREN,0)}partialAllowedFieldExpr(){return this.getRuleContext(0,bx)}CPAREN(){return this.getToken(E.CPAREN,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprExpr&&e.enterExprExpr(this)}exitRule(e){e.exitExprExpr&&e.exitExprExpr(this)}accept(e){return e.visitExprExpr?e.visitExprExpr(this):e.visitChildren(this)}};C.ExprExprContext=g9;var y9=class extends Ee{fieldPath(){return this.getRuleContext(0,ju)}DOT(){return this.getToken(E.DOT,0)}id(){return this.getRuleContext(0,Cn)}OPAREN(){return this.getToken(E.OPAREN,0)}CPAREN(){return this.getToken(E.CPAREN,0)}argumentList(){return this.tryGetRuleContext(0,VA)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprAggFunc&&e.enterExprAggFunc(this)}exitRule(e){e.exitExprAggFunc&&e.exitExprAggFunc(this)}accept(e){return e.visitExprAggFunc?e.visitExprAggFunc(this):e.visitChildren(this)}};C.ExprAggFuncContext=y9;var E9=class extends Ee{OPAREN(){return this.getToken(E.OPAREN,0)}CPAREN(){return this.getToken(E.CPAREN,0)}timeframe(){return this.tryGetRuleContext(0,_x)}id(){return this.tryGetRuleContext(0,Cn)}argumentList(){return this.tryGetRuleContext(0,VA)}EXCLAM(){return this.tryGetToken(E.EXCLAM,0)}malloyType(){return this.tryGetRuleContext(0,jA)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprFunc&&e.enterExprFunc(this)}exitRule(e){e.exitExprFunc&&e.exitExprFunc(this)}accept(e){return e.visitExprFunc?e.visitExprFunc(this):e.visitChildren(this)}};C.ExprFuncContext=E9;var A9=class extends Ee{pickStatement(){return this.getRuleContext(0,lT)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprPick&&e.enterExprPick(this)}exitRule(e){e.exitExprPick&&e.exitExprPick(this)}accept(e){return e.visitExprPick?e.visitExprPick(this):e.visitChildren(this)}};C.ExprPickContext=A9;var S9=class extends Ee{ungroup(){return this.getRuleContext(0,aT)}OPAREN(){return this.getToken(E.OPAREN,0)}fieldExpr(){return this.getRuleContext(0,Ee)}CPAREN(){return this.getToken(E.CPAREN,0)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}fieldName(e){return e===void 0?this.getRuleContexts(Is):this.getRuleContext(e,Is)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterExprUngroup&&e.enterExprUngroup(this)}exitRule(e){e.exitExprUngroup&&e.exitExprUngroup(this)}accept(e){return e.visitExprUngroup?e.visitExprUngroup(this):e.visitChildren(this)}};C.ExprUngroupContext=S9;var bx=class extends ee.ParserRuleContext{OPAREN(){return this.tryGetToken(E.OPAREN,0)}fieldExpr(){return this.getRuleContext(0,Ee)}CPAREN(){return this.tryGetToken(E.CPAREN,0)}compareOp(){return this.tryGetRuleContext(0,HA)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_partialAllowedFieldExpr}enterRule(e){e.enterPartialAllowedFieldExpr&&e.enterPartialAllowedFieldExpr(this)}exitRule(e){e.exitPartialAllowedFieldExpr&&e.exitPartialAllowedFieldExpr(this)}accept(e){return e.visitPartialAllowedFieldExpr?e.visitPartialAllowedFieldExpr(this):e.visitChildren(this)}};C.PartialAllowedFieldExprContext=bx;var lT=class extends ee.ParserRuleContext{pick(e){return e===void 0?this.getRuleContexts(QA):this.getRuleContext(e,QA)}ELSE(){return this.tryGetToken(E.ELSE,0)}fieldExpr(){return this.tryGetRuleContext(0,Ee)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_pickStatement}enterRule(e){e.enterPickStatement&&e.enterPickStatement(this)}exitRule(e){e.exitPickStatement&&e.exitPickStatement(this)}accept(e){return e.visitPickStatement?e.visitPickStatement(this):e.visitChildren(this)}};C.PickStatementContext=lT;var QA=class extends ee.ParserRuleContext{PICK(){return this.getToken(E.PICK,0)}WHEN(){return this.getToken(E.WHEN,0)}partialAllowedFieldExpr(){return this.getRuleContext(0,bx)}fieldExpr(){return this.tryGetRuleContext(0,Ee)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_pick}enterRule(e){e.enterPick&&e.enterPick(this)}exitRule(e){e.exitPick&&e.exitPick(this)}accept(e){return e.visitPick?e.visitPick(this):e.visitChildren(this)}};C.PickContext=QA;var VA=class extends ee.ParserRuleContext{fieldExpr(e){return e===void 0?this.getRuleContexts(Ee):this.getRuleContext(e,Ee)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_argumentList}enterRule(e){e.enterArgumentList&&e.enterArgumentList(this)}exitRule(e){e.exitArgumentList&&e.exitArgumentList(this)}accept(e){return e.visitArgumentList?e.visitArgumentList(this):e.visitChildren(this)}};C.ArgumentListContext=VA;var qm=class extends ee.ParserRuleContext{fieldName(e){return e===void 0?this.getRuleContexts(Is):this.getRuleContext(e,Is)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_fieldNameList}enterRule(e){e.enterFieldNameList&&e.enterFieldNameList(this)}exitRule(e){e.exitFieldNameList&&e.exitFieldNameList(this)}accept(e){return e.visitFieldNameList?e.visitFieldNameList(this):e.visitChildren(this)}};C.FieldNameListContext=qm;var cT=class extends ee.ParserRuleContext{collectionMember(e){return e===void 0?this.getRuleContexts(YA):this.getRuleContext(e,YA)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_fieldCollection}enterRule(e){e.enterFieldCollection&&e.enterFieldCollection(this)}exitRule(e){e.exitFieldCollection&&e.exitFieldCollection(this)}accept(e){return e.visitFieldCollection?e.visitFieldCollection(this):e.visitChildren(this)}};C.FieldCollectionContext=cT;var fT=class extends ee.ParserRuleContext{STAR(){return this.getToken(E.STAR,0)}fieldPath(){return this.tryGetRuleContext(0,ju)}DOT(){return this.tryGetToken(E.DOT,0)}starQualified(){return this.tryGetRuleContext(0,xT)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_collectionWildCard}enterRule(e){e.enterCollectionWildCard&&e.enterCollectionWildCard(this)}exitRule(e){e.exitCollectionWildCard&&e.exitCollectionWildCard(this)}accept(e){return e.visitCollectionWildCard?e.visitCollectionWildCard(this):e.visitChildren(this)}};C.CollectionWildCardContext=fT;var xT=class extends ee.ParserRuleContext{OCURLY(){return this.getToken(E.OCURLY,0)}CCURLY(){return this.getToken(E.CCURLY,0)}COMMA(e){return e===void 0?this.getTokens(E.COMMA):this.getToken(E.COMMA,e)}EXCEPT(e){return e===void 0?this.getTokens(E.EXCEPT):this.getToken(E.EXCEPT,e)}fieldNameList(e){return e===void 0?this.getRuleContexts(qm):this.getRuleContext(e,qm)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_starQualified}enterRule(e){e.enterStarQualified&&e.enterStarQualified(this)}exitRule(e){e.exitStarQualified&&e.exitStarQualified(this)}accept(e){return e.visitStarQualified?e.visitStarQualified(this):e.visitChildren(this)}};C.StarQualifiedContext=xT;var WA=class extends ee.ParserRuleContext{tags(){return this.getRuleContext(0,Xt)}fieldPath(){return this.getRuleContext(0,ju)}refExpr(){return this.tryGetRuleContext(0,dT)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_taggedRef}enterRule(e){e.enterTaggedRef&&e.enterTaggedRef(this)}exitRule(e){e.exitTaggedRef&&e.exitTaggedRef(this)}accept(e){return e.visitTaggedRef?e.visitTaggedRef(this):e.visitChildren(this)}};C.TaggedRefContext=WA;var dT=class extends ee.ParserRuleContext{DOT(){return this.getToken(E.DOT,0)}timeframe(){return this.tryGetRuleContext(0,_x)}aggregate(){return this.tryGetRuleContext(0,Bm)}OPAREN(){return this.tryGetToken(E.OPAREN,0)}CPAREN(){return this.tryGetToken(E.CPAREN,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_refExpr}enterRule(e){e.enterRefExpr&&e.enterRefExpr(this)}exitRule(e){e.exitRefExpr&&e.exitRefExpr(this)}accept(e){return e.visitRefExpr?e.visitRefExpr(this):e.visitChildren(this)}};C.RefExprContext=dT;var YA=class extends ee.ParserRuleContext{taggedRef(){return this.tryGetRuleContext(0,WA)}collectionWildCard(){return this.tryGetRuleContext(0,fT)}fieldDef(){return this.tryGetRuleContext(0,up)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_collectionMember}enterRule(e){e.enterCollectionMember&&e.enterCollectionMember(this)}exitRule(e){e.exitCollectionMember&&e.exitCollectionMember(this)}accept(e){return e.visitCollectionMember?e.visitCollectionMember(this):e.visitChildren(this)}};C.CollectionMemberContext=YA;var ju=class extends ee.ParserRuleContext{fieldName(e){return e===void 0?this.getRuleContexts(Is):this.getRuleContext(e,Is)}DOT(e){return e===void 0?this.getTokens(E.DOT):this.getToken(E.DOT,e)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_fieldPath}enterRule(e){e.enterFieldPath&&e.enterFieldPath(this)}exitRule(e){e.exitFieldPath&&e.exitFieldPath(this)}accept(e){return e.visitFieldPath?e.visitFieldPath(this):e.visitChildren(this)}};C.FieldPathContext=ju;var v9=class extends ee.ParserRuleContext{id(){return this.getRuleContext(0,Cn)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_joinName}enterRule(e){e.enterJoinName&&e.enterJoinName(this)}exitRule(e){e.exitJoinName&&e.exitJoinName(this)}accept(e){return e.visitJoinName?e.visitJoinName(this):e.visitChildren(this)}};C.JoinNameContext=v9;var Is=class extends ee.ParserRuleContext{id(){return this.getRuleContext(0,Cn)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_fieldName}enterRule(e){e.enterFieldName&&e.enterFieldName(this)}exitRule(e){e.exitFieldName&&e.exitFieldName(this)}accept(e){return e.visitFieldName?e.visitFieldName(this):e.visitChildren(this)}};C.FieldNameContext=Is;var _9=class extends ee.ParserRuleContext{fieldExpr(){return this.getRuleContext(0,Ee)}EOF(){return this.getToken(E.EOF,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_justExpr}enterRule(e){e.enterJustExpr&&e.enterJustExpr(this)}exitRule(e){e.exitJustExpr&&e.exitJustExpr(this)}accept(e){return e.visitJustExpr?e.visitJustExpr(this):e.visitChildren(this)}};C.JustExprContext=_9;var b9=class extends ee.ParserRuleContext{id(){return this.getRuleContext(0,Cn)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_sqlExploreNameRef}enterRule(e){e.enterSqlExploreNameRef&&e.enterSqlExploreNameRef(this)}exitRule(e){e.exitSqlExploreNameRef&&e.exitSqlExploreNameRef(this)}accept(e){return e.visitSqlExploreNameRef?e.visitSqlExploreNameRef(this):e.visitChildren(this)}};C.SqlExploreNameRefContext=b9;var hT=class extends ee.ParserRuleContext{id(){return this.getRuleContext(0,Cn)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_nameSQLBlock}enterRule(e){e.enterNameSQLBlock&&e.enterNameSQLBlock(this)}exitRule(e){e.exitNameSQLBlock&&e.exitNameSQLBlock(this)}accept(e){return e.visitNameSQLBlock?e.visitNameSQLBlock(this):e.visitChildren(this)}};C.NameSQLBlockContext=hT;var pT=class extends ee.ParserRuleContext{string(){return this.getRuleContext(0,qu)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_connectionName}enterRule(e){e.enterConnectionName&&e.enterConnectionName(this)}exitRule(e){e.exitConnectionName&&e.exitConnectionName(this)}accept(e){return e.visitConnectionName?e.visitConnectionName(this):e.visitChildren(this)}};C.ConnectionNameContext=pT;var mT=class extends ee.ParserRuleContext{SEMI(e){return e===void 0?this.getTokens(E.SEMI):this.getToken(E.SEMI,e)}OBRACK(){return this.getToken(E.OBRACK,0)}string(){return this.getRuleContext(0,qu)}CBRACK(){return this.getToken(E.CBRACK,0)}constructor(e,r){super(e,r)}get ruleIndex(){return E.RULE_experimentalStatementForTesting}enterRule(e){e.enterExperimentalStatementForTesting&&e.enterExperimentalStatementForTesting(this)}exitRule(e){e.exitExperimentalStatementForTesting&&e.exitExperimentalStatementForTesting(this)}accept(e){return e.visitExperimentalStatementForTesting?e.visitExperimentalStatementForTesting(this):e.visitChildren(this)}};C.ExperimentalStatementForTestingContext=mT});var R9=v(C9=>{"use strict";Object.defineProperty(C9,"__esModule",{value:!0});C9.detectAndRemovePartialStages=void 0;var iXe=Wf();function sXe(t,e){let r=[],n=!1;for(let i of t)(0,iXe.isPartialSegment)(i)?(r.push({...i,type:"reduce"}),n=!0):r.push(i);return n&&e.log("Can't determine view type (`group_by` / `aggregate` / `nest`, `project`, `index`)"),r}C9.detectAndRemovePartialStages=sXe});var mW=v(xp=>{"use strict";var gT=xp&&xp.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},yT=xp&&xp.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(xp,"__esModule",{value:!0});xp.AbstractParseTreeVisitor=void 0;var Tx=re(),fp=class{visit(e){return e.accept(this)}visitChildren(e){let r=this.defaultResult(),n=e.childCount;for(let i=0;i<n&&this.shouldVisitNextChild(e,r);i++){let o=e.getChild(i).accept(this);r=this.aggregateResult(r,o)}return r}visitTerminal(e){return this.defaultResult()}visitErrorNode(e){return this.defaultResult()}aggregateResult(e,r){return r}shouldVisitNextChild(e,r){return!0}};gT([Tx.Override,yT(0,Tx.NotNull)],fp.prototype,"visit",null);gT([Tx.Override,yT(0,Tx.NotNull)],fp.prototype,"visitChildren",null);gT([Tx.Override,yT(0,Tx.NotNull)],fp.prototype,"visitTerminal",null);gT([Tx.Override,yT(0,Tx.NotNull)],fp.prototype,"visitErrorNode",null);gT([yT(0,Tx.NotNull)],fp.prototype,"shouldVisitNextChild",null);xp.AbstractParseTreeVisitor=fp});var Mme=v(Ime=>{"use strict";Object.defineProperty(Ime,"__esModule",{value:!0})});var kme=v(Pme=>{"use strict";Object.defineProperty(Pme,"__esModule",{value:!0})});var Bme=v(O9=>{"use strict";Object.defineProperty(O9,"__esModule",{value:!0});O9.ParseTreeProperty=void 0;var gW=class{constructor(e="ParseTreeProperty"){this._symbol=Symbol(e)}get(e){return e[this._symbol]}set(e,r){e[this._symbol]=r}removeFrom(e){let r=e[this._symbol];return delete e[this._symbol],r}};O9.ParseTreeProperty=gW});var Ume=v(qme=>{"use strict";Object.defineProperty(qme,"__esModule",{value:!0})});var dp=v(KA=>{"use strict";Object.defineProperty(KA,"__esModule",{value:!0});KA.ParseTreeWalker=void 0;var oXe=_E(),aXe=fx(),uXe=bE(),D9=class{walk(e,r){let n=[],i=[],s=r,o=0;for(;s;){if(s instanceof oXe.ErrorNode?e.visitErrorNode&&e.visitErrorNode(s):s instanceof aXe.TerminalNode?e.visitTerminal&&e.visitTerminal(s):this.enterRule(e,s),s.childCount>0){n.push(s),i.push(o),o=0,s=s.getChild(0);continue}do{if(s instanceof uXe.RuleNode&&this.exitRule(e,s),n.length===0){s=void 0,o=0;break}let a=n[n.length-1];if(o++,s=o<a.childCount?a.getChild(o):void 0,s)break;s=n.pop(),o=i.pop()}while(s)}}enterRule(e,r){let n=r.ruleContext;e.enterEveryRule&&e.enterEveryRule(n),n.enterRule(e)}exitRule(e,r){let n=r.ruleContext;n.exitRule(e),e.exitEveryRule&&e.exitEveryRule(n)}};KA.ParseTreeWalker=D9;(function(t){t.DEFAULT=new t})(D9=KA.ParseTreeWalker||(KA.ParseTreeWalker={}))});var jme=v($me=>{"use strict";Object.defineProperty($me,"__esModule",{value:!0})});var zme=v(Hme=>{"use strict";Object.defineProperty(Hme,"__esModule",{value:!0})});var yW=v(Ti=>{"use strict";var lXe=Ti&&Ti.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Hu=Ti&&Ti.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&lXe(e,t,r)};Object.defineProperty(Ti,"__esModule",{value:!0});Hu(mW(),Ti);Hu(_E(),Ti);Hu(Mme(),Ti);Hu(kme(),Ti);Hu(Bme(),Ti);Hu(Ume(),Ti);Hu(dp(),Ti);Hu(bE(),Ti);Hu(jme(),Ti);Hu(fx(),Ti);Hu(zme(),Ti);Hu(xx(),Ti)});var Gme=v(Ic=>{"use strict";var cXe=Ic&&Ic.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fXe=Ic&&Ic.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xXe=Ic&&Ic.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cXe(e,t,r);return fXe(e,t),e};Object.defineProperty(Ic,"__esModule",{value:!0});Ic.MalloyTagLexer=void 0;var dXe=vm(),hXe=dc(),pXe=rE(),mXe=Bl(),gXe=xXe(ka()),Vt=class t extends hXe.Lexer{get vocabulary(){return t.VOCABULARY}constructor(e){super(e),this._interp=new pXe.LexerATNSimulator(t._ATN,this)}get grammarFileName(){return"MalloyTag.g4"}get ruleNames(){return t.ruleNames}get serializedATN(){return t._serializedATN}get channelNames(){return t.channelNames}get modeNames(){return t.modeNames}static get _ATN(){return t.__ATN||(t.__ATN=new dXe.ATNDeserializer().deserialize(gXe.toCharArray(t._serializedATN))),t.__ATN}};Ic.MalloyTagLexer=Vt;Vt.DOTTY=1;Vt.DOT=2;Vt.MINUS=3;Vt.EQ=4;Vt.RF_BEG=5;Vt.RF_END=6;Vt.PR_BEG=7;Vt.PR_END=8;Vt.AR_BEG=9;Vt.COMMA=10;Vt.AR_END=11;Vt.SQ_STRING=12;Vt.DQ_STRING=13;Vt.BQ_STRING=14;Vt.NUMERIC_LITERAL=15;Vt.BARE_STRING=16;Vt.COMMENT=17;Vt.WHITE_SPACE=18;Vt.UNEXPECTED_CHAR=19;Vt.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"];Vt.modeNames=["DEFAULT_MODE"];Vt.ruleNames=["DOTTY","DOT","MINUS","EQ","RF_BEG","RF_END","PR_BEG","PR_END","AR_BEG","COMMA","AR_END","ID_CHAR","DIGIT","HEX","UNICODE","SAFE_NON_QUOTE","ESCAPED","SQ_STRING","DQ_STRING","BQ_STRING","INTEGER_LITERAL","EXPONENT","NUMERIC_LITERAL","BARE_STRING","COMMENT","WHITE_SPACE","UNEXPECTED_CHAR"];Vt._LITERAL_NAMES=[void 0,"'...'","'.'","'-'","'='","'$('","')'","'{'","'}'","'['","','","']'"];Vt._SYMBOLIC_NAMES=[void 0,"DOTTY","DOT","MINUS","EQ","RF_BEG","RF_END","PR_BEG","PR_END","AR_BEG","COMMA","AR_END","SQ_STRING","DQ_STRING","BQ_STRING","NUMERIC_LITERAL","BARE_STRING","COMMENT","WHITE_SPACE","UNEXPECTED_CHAR"];Vt.VOCABULARY=new mXe.VocabularyImpl(Vt._LITERAL_NAMES,Vt._SYMBOLIC_NAMES,[]);Vt._serializedATN=`\uC91D\uCABA\u058D\uAFBA\u4F53\u0607\uEA8B\uC241\xC6\b					\x07	\x07\b	\b			
	
\v	\v\f	\f\r	\r													\x1B	\x1B	\x07\x07\b\b		

\v\v\f\f\r\r\x07k
\fn\v\x07w
\fz\v\x07\x83
\f\x86\v\x8B
\x8E
\r\x8F\x94
\x97
\r\x98\x9C
\xA0
\r\xA1\xA5
\xA9
\xAB
\xAF
\r\xB0\x07\xB5
\f\xB8\v\x1B\x1B\xBF
\x1B\r\x1B\x1B\xC0\x1B\x1B\xB6\x07	\v\x07\r\b	
\v\f\r\x1B!#%')+-/1357\v2;2;CHch\x07!$$))^^bb$$bb))bb$$))GGgg--//\v\r""\u0287C\\aac|\xAC\xAC\xB7\xB7\xBC\xBC\xC2\xD8\xDA\xF8\xFA\u02C3\u02C8\u02D3\u02E2\u02E6\u02EE\u02EE\u02F0\u02F0\u0347\u0347\u0372\u0376\u0378\u0379\u037C\u037F\u0381\u0381\u0388\u0388\u038A\u038C\u038E\u038E\u0390\u03A3\u03A5\u03F7\u03F9\u0483\u048C\u0531\u0533\u0558\u055B\u055B\u0563\u0589\u05B2\u05BF\u05C1\u05C1\u05C3\u05C4\u05C6\u05C7\u05C9\u05C9\u05D2\u05EC\u05F2\u05F4\u0612\u061C\u0622\u0659\u065B\u0661\u0670\u06D5\u06D7\u06DE\u06E3\u06EA\u06EF\u06F1\u06FC\u06FE\u0701\u0701\u0712\u0741\u074F\u07B3\u07CC\u07EC\u07F6\u07F7\u07FC\u07FC\u0802\u0819\u081C\u082E\u0842\u085A\u08A2\u08B6\u08B8\u08BF\u08D6\u08E1\u08E5\u08EB\u08F2\u093D\u093F\u094E\u0950\u0952\u0957\u0965\u0973\u0985\u0987\u098E\u0991\u0992\u0995\u09AA\u09AC\u09B2\u09B4\u09B4\u09B8\u09BB\u09BF\u09C6\u09C9\u09CA\u09CD\u09CE\u09D0\u09D0\u09D9\u09D9\u09DE\u09DF\u09E1\u09E5\u09F2\u09F3\u0A03\u0A05\u0A07\u0A0C\u0A11\u0A12\u0A15\u0A2A\u0A2C\u0A32\u0A34\u0A35\u0A37\u0A38\u0A3A\u0A3B\u0A40\u0A44\u0A49\u0A4A\u0A4D\u0A4E\u0A53\u0A53\u0A5B\u0A5E\u0A60\u0A60\u0A72\u0A77\u0A83\u0A85\u0A87\u0A8F\u0A91\u0A93\u0A95\u0AAA\u0AAC\u0AB2\u0AB4\u0AB5\u0AB7\u0ABB\u0ABF\u0AC7\u0AC9\u0ACB\u0ACD\u0ACE\u0AD2\u0AD2\u0AE2\u0AE5\u0AFB\u0AFB\u0B03\u0B05\u0B07\u0B0E\u0B11\u0B12\u0B15\u0B2A\u0B2C\u0B32\u0B34\u0B35\u0B37\u0B3B\u0B3F\u0B46\u0B49\u0B4A\u0B4D\u0B4E\u0B58\u0B59\u0B5E\u0B5F\u0B61\u0B65\u0B73\u0B73\u0B84\u0B85\u0B87\u0B8C\u0B90\u0B92\u0B94\u0B97\u0B9B\u0B9C\u0B9E\u0B9E\u0BA0\u0BA1\u0BA5\u0BA6\u0BAA\u0BAC\u0BB0\u0BBB\u0BC0\u0BC4\u0BC8\u0BCA\u0BCC\u0BCE\u0BD2\u0BD2\u0BD9\u0BD9\u0C02\u0C05\u0C07\u0C0E\u0C10\u0C12\u0C14\u0C2A\u0C2C\u0C3B\u0C3F\u0C46\u0C48\u0C4A\u0C4C\u0C4E\u0C57\u0C58\u0C5A\u0C5C\u0C62\u0C65\u0C82\u0C85\u0C87\u0C8E\u0C90\u0C92\u0C94\u0CAA\u0CAC\u0CB5\u0CB7\u0CBB\u0CBF\u0CC6\u0CC8\u0CCA\u0CCC\u0CCE\u0CD7\u0CD8\u0CE0\u0CE0\u0CE2\u0CE5\u0CF3\u0CF4\u0D03\u0D05\u0D07\u0D0E\u0D10\u0D12\u0D14\u0D3C\u0D3F\u0D46\u0D48\u0D4A\u0D4C\u0D4E\u0D50\u0D50\u0D56\u0D59\u0D61\u0D65\u0D7C\u0D81\u0D84\u0D85\u0D87\u0D98\u0D9C\u0DB3\u0DB5\u0DBD\u0DBF\u0DBF\u0DC2\u0DC8\u0DD1\u0DD6\u0DD8\u0DD8\u0DDA\u0DE1\u0DF4\u0DF5\u0E03\u0E3C\u0E42\u0E48\u0E4F\u0E4F\u0E83\u0E84\u0E86\u0E86\u0E89\u0E8A\u0E8C\u0E8C\u0E8F\u0E8F\u0E96\u0E99\u0E9B\u0EA1\u0EA3\u0EA5\u0EA7\u0EA7\u0EA9\u0EA9\u0EAC\u0EAD\u0EAF\u0EBB\u0EBD\u0EBF\u0EC2\u0EC6\u0EC8\u0EC8\u0ECF\u0ECF\u0EDE\u0EE1\u0F02\u0F02\u0F42\u0F49\u0F4B\u0F6E\u0F73\u0F83\u0F8A\u0F99\u0F9B\u0FBE\u1002\u1038\u103A\u103A\u103D\u1041\u1052\u1064\u1067\u106A\u1070\u1088\u1090\u1090\u109E\u109F\u10A2\u10C7\u10C9\u10C9\u10CF\u10CF\u10D2\u10FC\u10FE\u124A\u124C\u124F\u1252\u1258\u125A\u125A\u125C\u125F\u1262\u128A\u128C\u128F\u1292\u12B2\u12B4\u12B7\u12BA\u12C0\u12C2\u12C2\u12C4\u12C7\u12CA\u12D8\u12DA\u1312\u1314\u1317\u131A\u135C\u1361\u1361\u1382\u1391\u13A2\u13F7\u13FA\u13FF\u1403\u166E\u1671\u1681\u1683\u169C\u16A2\u16EC\u16F0\u16FA\u1702\u170E\u1710\u1715\u1722\u1735\u1742\u1755\u1762\u176E\u1770\u1772\u1774\u1775\u1782\u17B5\u17B8\u17CA\u17D9\u17D9\u17DE\u17DE\u1822\u1879\u1882\u18AC\u18B2\u18F7\u1902\u1920\u1922\u192D\u1932\u193A\u1952\u196F\u1972\u1976\u1982\u19AD\u19B2\u19CB\u1A02\u1A1D\u1A22\u1A60\u1A63\u1A76\u1AA9\u1AA9\u1B02\u1B35\u1B37\u1B45\u1B47\u1B4D\u1B82\u1BAB\u1BAE\u1BB1\u1BBC\u1BE7\u1BE9\u1BF3\u1C02\u1C37\u1C4F\u1C51\u1C5C\u1C7F\u1C82\u1C8A\u1CEB\u1CEE\u1CF0\u1CF5\u1CF7\u1CF8\u1D02\u1DC1\u1DE9\u1DF6\u1E02\u1F17\u1F1A\u1F1F\u1F22\u1F47\u1F4A\u1F4F\u1F52\u1F59\u1F5B\u1F5B\u1F5D\u1F5D\u1F5F\u1F5F\u1F61\u1F7F\u1F82\u1FB6\u1FB8\u1FBE\u1FC0\u1FC0\u1FC4\u1FC6\u1FC8\u1FCE\u1FD2\u1FD5\u1FD8\u1FDD\u1FE2\u1FEE\u1FF4\u1FF6\u1FF8\u1FFE\u2073\u2073\u2081\u2081\u2092\u209E\u2104\u2104\u2109\u2109\u210C\u2115\u2117\u2117\u211B\u211F\u2126\u2126\u2128\u2128\u212A\u212A\u212C\u212F\u2131\u213B\u213E\u2141\u2147\u214B\u2150\u2150\u2162\u218A\u24B8\u24EB\u2C02\u2C30\u2C32\u2C60\u2C62\u2CE6\u2CED\u2CF0\u2CF4\u2CF5\u2D02\u2D27\u2D29\u2D29\u2D2F\u2D2F\u2D32\u2D69\u2D71\u2D71\u2D82\u2D98\u2DA2\u2DA8\u2DAA\u2DB0\u2DB2\u2DB8\u2DBA\u2DC0\u2DC2\u2DC8\u2DCA\u2DD0\u2DD2\u2DD8\u2DDA\u2DE0\u2DE2\u2E01\u2E31\u2E31\u3007\u3009\u3023\u302B\u3033\u3037\u303A\u303E\u3043\u3098\u309F\u30A1\u30A3\u30FC\u30FE\u3101\u3107\u312F\u3133\u3190\u31A2\u31BC\u31F2\u3201\u3402\u4DB7\u4E02\u9FD7\uA002\uA48E\uA4D2\uA4FF\uA502\uA60E\uA612\uA621\uA62C\uA62D\uA642\uA670\uA676\uA67D\uA681\uA6F1\uA719\uA721\uA724\uA78A\uA78D\uA7B0\uA7B2\uA7B9\uA7F9\uA803\uA805\uA807\uA809\uA80C\uA80E\uA829\uA842\uA875\uA882\uA8C5\uA8C7\uA8C7\uA8F4\uA8F9\uA8FD\uA8FD\uA8FF\uA8FF\uA90C\uA92C\uA932\uA954\uA962\uA97E\uA982\uA9B4\uA9B6\uA9C1\uA9D1\uA9D1\uA9E2\uA9E6\uA9E8\uA9F1\uA9FC\uAA00\uAA02\uAA38\uAA42\uAA4F\uAA62\uAA78\uAA7C\uAA7C\uAA80\uAAC0\uAAC2\uAAC2\uAAC4\uAAC4\uAADD\uAADF\uAAE2\uAAF1\uAAF4\uAAF7\uAB03\uAB08\uAB0B\uAB10\uAB13\uAB18\uAB22\uAB28\uAB2A\uAB30\uAB32\uAB5C\uAB5E\uAB67\uAB72\uABEC\uAC02\uD7A5\uD7B2\uD7C8\uD7CD\uD7FD\uF902\uFA6F\uFA72\uFADB\uFB02\uFB08\uFB15\uFB19\uFB1F\uFB2A\uFB2C\uFB38\uFB3A\uFB3E\uFB40\uFB40\uFB42\uFB43\uFB45\uFB46\uFB48\uFBB3\uFBD5\uFD3F\uFD52\uFD91\uFD94\uFDC9\uFDF2\uFDFD\uFE72\uFE76\uFE78\uFEFE\uFF23\uFF3C\uFF43\uFF5C\uFF68\uFFC0\uFFC4\uFFC9\uFFCC\uFFD1\uFFD4\uFFD9\uFFDC\uFFDE\r(*<>?AOR_\x82\xFC\u0142\u0176\u0282\u029E\u02A2\u02D2\u0302\u0321\u0332\u034C\u0352\u037C\u0382\u039F\u03A2\u03C5\u03CA\u03D1\u03D3\u03D7\u0402\u049F\u04B2\u04D5\u04DA\u04FD\u0502\u0529\u0532\u0565\u0602\u0738\u0742\u0757\u0762\u0769\u0802\u0807\u080A\u080A\u080C\u0837\u0839\u083A\u083E\u083E\u0841\u0857\u0862\u0878\u0882\u08A0\u08E2\u08F4\u08F6\u08F7\u0902\u0917\u0922\u093B\u0982\u09B9\u09C0\u09C1\u0A02\u0A05\u0A07\u0A08\u0A0E\u0A15\u0A17\u0A19\u0A1B\u0A35\u0A62\u0A7E\u0A82\u0A9E\u0AC2\u0AC9\u0ACB\u0AE6\u0B02\u0B37\u0B42\u0B57\u0B62\u0B74\u0B82\u0B93\u0C02\u0C4A\u0C82\u0CB4\u0CC2\u0CF4\u1002\u1047\u1084\u10BA\u10D2\u10EA\u1102\u1134\u1152\u1174\u1178\u1178\u1182\u11C1\u11C3\u11C6\u11DC\u11DC\u11DE\u11DE\u1202\u1213\u1215\u1236\u1239\u1239\u1240\u1240\u1282\u1288\u128A\u128A\u128C\u128F\u1291\u129F\u12A1\u12AA\u12B2\u12EA\u1302\u1305\u1307\u130E\u1311\u1312\u1315\u132A\u132C\u1332\u1334\u1335\u1337\u133B\u133F\u1346\u1349\u134A\u134D\u134E\u1352\u1352\u1359\u1359\u135F\u1365\u1402\u1443\u1445\u1447\u1449\u144C\u1482\u14C3\u14C6\u14C7\u14C9\u14C9\u1582\u15B7\u15BA\u15C0\u15DA\u15DF\u1602\u1640\u1642\u1642\u1646\u1646\u1682\u16B7\u1702\u171B\u171F\u172C\u18A2\u18E1\u1901\u1901\u1AC2\u1AFA\u1C02\u1C0A\u1C0C\u1C38\u1C3A\u1C40\u1C42\u1C42\u1C74\u1C91\u1C94\u1CA9\u1CAB\u1CB8\u2002\u239B\u2402\u2470\u2482\u2545\u3002\u3430\u4402\u4648\u6802\u6A3A\u6A42\u6A60\u6AD2\u6AEF\u6B02\u6B38\u6B42\u6B45\u6B65\u6B79\u6B7F\u6B91\u6F02\u6F46\u6F52\u6F80\u6F95\u6FA1\u6FE2\u6FE2\u7002\u87EE\u8802\u8AF4\uB002\uB003\uBC02\uBC6C\uBC72\uBC7E\uBC82\uBC8A\uBC92\uBC9B\uBCA0\uBCA0\uD402\uD456\uD458\uD49E\uD4A0\uD4A1\uD4A4\uD4A4\uD4A7\uD4A8\uD4AB\uD4AE\uD4B0\uD4BB\uD4BD\uD4BD\uD4BF\uD4C5\uD4C7\uD507\uD509\uD50C\uD50F\uD516\uD518\uD51E\uD520\uD53B\uD53D\uD540\uD542\uD546\uD548\uD548\uD54C\uD552\uD554\uD6A7\uD6AA\uD6C2\uD6C4\uD6DC\uD6DE\uD6FC\uD6FE\uD716\uD718\uD736\uD738\uD750\uD752\uD770\uD772\uD78A\uD78C\uD7AA\uD7AC\uD7C4\uD7C6\uD7CD\uE002\uE008\uE00A\uE01A\uE01D\uE023\uE025\uE026\uE028\uE02C\uE802\uE8C6\uE902\uE945\uE949\uE949\uEE02\uEE05\uEE07\uEE21\uEE23\uEE24\uEE26\uEE26\uEE29\uEE29\uEE2B\uEE34\uEE36\uEE39\uEE3B\uEE3B\uEE3D\uEE3D\uEE44\uEE44\uEE49\uEE49\uEE4B\uEE4B\uEE4D\uEE4D\uEE4F\uEE51\uEE53\uEE54\uEE56\uEE56\uEE59\uEE59\uEE5B\uEE5B\uEE5D\uEE5D\uEE5F\uEE5F\uEE61\uEE61\uEE63\uEE64\uEE66\uEE66\uEE69\uEE6C\uEE6E\uEE74\uEE76\uEE79\uEE7B\uEE7E\uEE80\uEE80\uEE82\uEE8B\uEE8D\uEE9D\uEEA3\uEEA5\uEEA7\uEEAB\uEEAD\uEEBD\uF132\uF14B\uF152\uF16B\uF172\uF18B\uA6D8\uA702\uB736\uB742\uB81F\uB822\uCEA3\uF802\uFA1F\xD6\x07	\v\r%')/13579=\x07?	A\vC\rFHJLNPR\x1BTVX!\`#b%e'q)}+\x8A-\x91/\xAA1\xAE3\xB25\xBE7\xC49:\x070:;\x070;<\x070<=>\x070>?@\x07/@\bAB\x07?B
CD\x07&DE\x07*E\fFG\x07+GHI\x07}IJK\x07\x7FKLM\x07]MNO\x07.OPQ\x07_QRS	\vSTU	UVW	WXY\x07^YZ\x07wZ[[\\\\]]^^__ \`a
a"bc\x07^cd\vd$el\x07)fkgk#hk!ik	jfjgjhjiknljlmmonlop\x07)p&qx\x07$rwsw#tw!uw	vrvsvtvuwzxvxyy{zx{|\x07$|(}\x84\x07b~\x83\x7F\x83#\x80\x83!\x81\x83	\x07\x82~\x82\x7F\x82\x80\x82\x81\x83\x86\x84\x82\x84\x85\x85\x87\x86\x84\x87\x88\x07b\x88*\x89\x8B\x07\x8A\x89\x8A\x8B\x8B\x8D\x8C\x8E\x1B\x8D\x8C\x8E\x8F\x8F\x8D\x8F\x90\x90,\x91\x93	\b\x92\x94		\x93\x92\x93\x94\x94\x96\x95\x97\x1B\x96\x95\x97\x98\x98\x96\x98\x99\x99.\x9A\x9C+\x9B\x9A\x9B\x9C\x9C\x9D\x9D\x9F\x9E\xA0\x1B\x9F\x9E\xA0\xA1\xA1\x9F\xA1\xA2\xA2\xA4\xA3\xA5-\xA4\xA3\xA4\xA5\xA5\xAB\xA6\xA8+\xA7\xA9-\xA8\xA7\xA8\xA9\xA9\xAB\xAA\x9B\xAA\xA6\xAB0\xAC\xAF\x1B\xAD\xAF\r\xAE\xAC\xAE\xAD\xAF\xB0\xB0\xAE\xB0\xB1\xB12\xB2\xB6\x07%\xB3\xB5\v\xB4\xB3\xB5\xB8\xB6\xB7\xB6\xB4\xB7\xB9\xB8\xB6\xB9\xBA\x07\xBA\xBB\xBB\xBC\b\xBC4\xBD\xBF	
\xBE\xBD\xBF\xC0\xC0\xBE\xC0\xC1\xC1\xC2\xC2\xC3\b\x1B\xC36\xC4\xC5\v\xC58jlvx\x82\x84\x8A\x8F\x93\x98\x9B\xA1\xA4\xA8\xAA\xAE\xB0\xB6\xC0\b`});var Vme=v(Tt=>{"use strict";var yXe=Tt&&Tt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),EXe=Tt&&Tt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),AXe=Tt&&Tt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&yXe(e,t,r);return EXe(e,t),e};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.PropertiesContext=Tt.ArrayValueContext=Tt.ReferenceContext=Tt.ArrayElementContext=Tt.EqValueContext=Tt.PropNameContext=Tt.IdentifierContext=Tt.StringContext=Tt.TagDefContext=Tt.TagUpdatePropertiesContext=Tt.TagReplacePropertiesContext=Tt.TagEqContext=Tt.TagSpecContext=Tt.TagLineContext=Tt.MalloyTagParser=void 0;var SXe=Iu(),vXe=vm(),_Xe=Cy(),EW=NE(),bXe=mm(),Pc=Qa(),TXe=ym(),Mc=ic(),Qme=gr(),CXe=Bl(),RXe=AXe(ka()),Ie=class t extends bXe.Parser{get vocabulary(){return t.VOCABULARY}get grammarFileName(){return"MalloyTag.g4"}get ruleNames(){return t.ruleNames}get serializedATN(){return t._serializedATN}createFailedPredicateException(e,r){return new _Xe.FailedPredicateException(this,e,r)}constructor(e){super(e),this._interp=new TXe.ParserATNSimulator(t._ATN,this)}tagLine(){let e=new N9(this._ctx,this.state);this.enterRule(e,0,t.RULE_tagLine);let r;try{this.enterOuterAlt(e,1);{for(this.state=23,this._errHandler.sync(this),r=this._input.LA(1);!(r&-32)&&1<<r&(1<<t.MINUS|1<<t.BQ_STRING|1<<t.BARE_STRING);)this.state=20,this.tagSpec(),this.state=25,this._errHandler.sync(this),r=this._input.LA(1);this.state=26,this.match(t.EOF)}}catch(n){if(n instanceof Mc.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}tagSpec(){let e=new zu(this._ctx,this.state);this.enterRule(e,2,t.RULE_tagSpec);let r;try{switch(this.state=48,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,4,this._ctx)){case 1:e=new F9(e),this.enterOuterAlt(e,1),this.state=28,this.propName(),this.state=29,this.match(t.EQ),this.state=30,this.eqValue(),this.state=32,this._errHandler.sync(this),r=this._input.LA(1),r===t.PR_BEG&&(this.state=31,this.properties());break;case 2:e=new w9(e),this.enterOuterAlt(e,2),this.state=34,this.propName(),this.state=35,this.match(t.EQ),this.state=37,this._errHandler.sync(this),r=this._input.LA(1),r===t.DOTTY&&(this.state=36,this.match(t.DOTTY)),this.state=39,this.properties();break;case 3:e=new L9(e),this.enterOuterAlt(e,3),this.state=41,this.propName(),this.state=42,this.properties();break;case 4:e=new I9(e),this.enterOuterAlt(e,4),this.state=45,this._errHandler.sync(this),r=this._input.LA(1),r===t.MINUS&&(this.state=44,this.match(t.MINUS)),this.state=47,this.propName();break}}catch(n){if(n instanceof Mc.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}string(){let e=new XA(this._ctx,this.state);this.enterRule(e,4,t.RULE_string);let r;try{this.enterOuterAlt(e,1),this.state=50,r=this._input.LA(1),!(r&-32)&&1<<r&(1<<t.SQ_STRING|1<<t.DQ_STRING|1<<t.NUMERIC_LITERAL|1<<t.BARE_STRING)?(this._input.LA(1)===Qme.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(n){if(n instanceof Mc.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}identifier(){let e=new JA(this._ctx,this.state);this.enterRule(e,6,t.RULE_identifier);let r;try{this.enterOuterAlt(e,1),this.state=52,r=this._input.LA(1),r===t.BQ_STRING||r===t.BARE_STRING?(this._input.LA(1)===Qme.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(n){if(n instanceof Mc.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}propName(){let e=new Cx(this._ctx,this.state);this.enterRule(e,8,t.RULE_propName);let r;try{for(this.enterOuterAlt(e,1),this.state=54,this.identifier(),this.state=59,this._errHandler.sync(this),r=this._input.LA(1);r===t.DOT;)this.state=55,this.match(t.DOT),this.state=56,this.identifier(),this.state=61,this._errHandler.sync(this),r=this._input.LA(1)}catch(n){if(n instanceof Mc.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}eqValue(){let e=new ET(this._ctx,this.state);this.enterRule(e,10,t.RULE_eqValue);try{switch(this.state=65,this._errHandler.sync(this),this._input.LA(1)){case t.SQ_STRING:case t.DQ_STRING:case t.NUMERIC_LITERAL:case t.BARE_STRING:this.enterOuterAlt(e,1),this.state=62,this.string();break;case t.AR_BEG:this.enterOuterAlt(e,2),this.state=63,this.arrayValue();break;case t.RF_BEG:this.enterOuterAlt(e,3),this.state=64,this.reference();break;default:throw new EW.NoViableAltException(this)}}catch(r){if(r instanceof Mc.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}arrayElement(){let e=new ZA(this._ctx,this.state);this.enterRule(e,12,t.RULE_arrayElement);let r;try{switch(this.state=74,this._errHandler.sync(this),this._input.LA(1)){case t.SQ_STRING:case t.DQ_STRING:case t.NUMERIC_LITERAL:case t.BARE_STRING:this.enterOuterAlt(e,1),this.state=67,this.string(),this.state=69,this._errHandler.sync(this),r=this._input.LA(1),r===t.PR_BEG&&(this.state=68,this.properties());break;case t.PR_BEG:this.enterOuterAlt(e,2),this.state=71,this.properties();break;case t.AR_BEG:this.enterOuterAlt(e,3),this.state=72,this.arrayValue();break;case t.RF_BEG:this.enterOuterAlt(e,4),this.state=73,this.reference();break;default:throw new EW.NoViableAltException(this)}}catch(n){if(n instanceof Mc.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}reference(){let e=new eS(this._ctx,this.state);this.enterRule(e,14,t.RULE_reference);try{this.enterOuterAlt(e,1),this.state=76,this.match(t.RF_BEG),this.state=77,this.propName(),this.state=78,this.match(t.RF_END)}catch(r){if(r instanceof Mc.RecognitionException)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}arrayValue(){let e=new tS(this._ctx,this.state);this.enterRule(e,16,t.RULE_arrayValue);let r;try{let n;this.enterOuterAlt(e,1);{for(this.state=80,this.match(t.AR_BEG),this.state=81,this.arrayElement(),this.state=86,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,9,this._ctx);n!==2&&n!==SXe.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=82,this.match(t.COMMA),this.state=83,this.arrayElement()),this.state=88,this._errHandler.sync(this),n=this.interpreter.adaptivePredict(this._input,9,this._ctx);this.state=90,this._errHandler.sync(this),r=this._input.LA(1),r===t.COMMA&&(this.state=89,this.match(t.COMMA)),this.state=92,this.match(t.AR_END)}}catch(n){if(n instanceof Mc.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}properties(){let e=new hp(this._ctx,this.state);this.enterRule(e,18,t.RULE_properties);let r;try{this.enterOuterAlt(e,1);{switch(this.state=94,this.match(t.PR_BEG),this.state=102,this._errHandler.sync(this),this._input.LA(1)){case t.DOTTY:this.state=95,this.match(t.DOTTY);break;case t.MINUS:case t.PR_END:case t.BQ_STRING:case t.BARE_STRING:for(this.state=99,this._errHandler.sync(this),r=this._input.LA(1);!(r&-32)&&1<<r&(1<<t.MINUS|1<<t.BQ_STRING|1<<t.BARE_STRING);)this.state=96,this.tagSpec(),this.state=101,this._errHandler.sync(this),r=this._input.LA(1);break;default:throw new EW.NoViableAltException(this)}this.state=104,this.match(t.PR_END)}}catch(n){if(n instanceof Mc.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}static get _ATN(){return t.__ATN||(t.__ATN=new vXe.ATNDeserializer().deserialize(RXe.toCharArray(t._serializedATN))),t.__ATN}};Tt.MalloyTagParser=Ie;Ie.DOTTY=1;Ie.DOT=2;Ie.MINUS=3;Ie.EQ=4;Ie.RF_BEG=5;Ie.RF_END=6;Ie.PR_BEG=7;Ie.PR_END=8;Ie.AR_BEG=9;Ie.COMMA=10;Ie.AR_END=11;Ie.SQ_STRING=12;Ie.DQ_STRING=13;Ie.BQ_STRING=14;Ie.NUMERIC_LITERAL=15;Ie.BARE_STRING=16;Ie.COMMENT=17;Ie.WHITE_SPACE=18;Ie.UNEXPECTED_CHAR=19;Ie.RULE_tagLine=0;Ie.RULE_tagSpec=1;Ie.RULE_string=2;Ie.RULE_identifier=3;Ie.RULE_propName=4;Ie.RULE_eqValue=5;Ie.RULE_arrayElement=6;Ie.RULE_reference=7;Ie.RULE_arrayValue=8;Ie.RULE_properties=9;Ie.ruleNames=["tagLine","tagSpec","string","identifier","propName","eqValue","arrayElement","reference","arrayValue","properties"];Ie._LITERAL_NAMES=[void 0,"'...'","'.'","'-'","'='","'$('","')'","'{'","'}'","'['","','","']'"];Ie._SYMBOLIC_NAMES=[void 0,"DOTTY","DOT","MINUS","EQ","RF_BEG","RF_END","PR_BEG","PR_END","AR_BEG","COMMA","AR_END","SQ_STRING","DQ_STRING","BQ_STRING","NUMERIC_LITERAL","BARE_STRING","COMMENT","WHITE_SPACE","UNEXPECTED_CHAR"];Ie.VOCABULARY=new CXe.VocabularyImpl(Ie._LITERAL_NAMES,Ie._SYMBOLIC_NAMES,[]);Ie._serializedATN=`\uC91D\uCABA\u058D\uAFBA\u4F53\u0607\uEA8B\uC241m					\x07	\x07\b	\b			
	
\v	\v\x07
\f\x1B\v#
(
0
3
\x07<
\f?\v\x07\x07\x07\x07D
\x07\b\b\bH
\b\b\b\b\bM
\b				



\x07
W

\f

Z\v


]



\v\v\v\x07\vd
\v\f\v\vg\v\v\vi
\v\v\v\v\f\b
\ft24\b6
8\fCLNR\`\x1B\x1B\x07
 \x07 "\f\x07!#\v"!"##3$%
%'\x07&(\x07'&'(())*\v*3+,
,-\v-3.0\x07/./00113
22$2+2/345	5\x0767	7	8=\b9:\x07:<\b;9<?=;=>>\v?=@DAD
BD	C@CACBD\rEGFH\vGFGHHMIM\vJM
KM	LELILJLKMNO\x07\x07OP
PQ\x07\bQRS\x07\vSX\bTU\x07\fUW\bVTWZXVXYY\\ZX[]\x07\f\\[\\]]^^_\x07\r_\`h\x07	ai\x07bdcbdgeceffigehaheijjk\x07
k"'/2=CGLX\\eh`;var N9=class extends Pc.ParserRuleContext{EOF(){return this.getToken(Ie.EOF,0)}tagSpec(e){return e===void 0?this.getRuleContexts(zu):this.getRuleContext(e,zu)}constructor(e,r){super(e,r)}get ruleIndex(){return Ie.RULE_tagLine}accept(e){return e.visitTagLine?e.visitTagLine(this):e.visitChildren(this)}};Tt.TagLineContext=N9;var zu=class extends Pc.ParserRuleContext{constructor(e,r){super(e,r)}get ruleIndex(){return Ie.RULE_tagSpec}copyFrom(e){super.copyFrom(e)}};Tt.TagSpecContext=zu;var F9=class extends zu{propName(){return this.getRuleContext(0,Cx)}EQ(){return this.getToken(Ie.EQ,0)}eqValue(){return this.getRuleContext(0,ET)}properties(){return this.tryGetRuleContext(0,hp)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}accept(e){return e.visitTagEq?e.visitTagEq(this):e.visitChildren(this)}};Tt.TagEqContext=F9;var w9=class extends zu{propName(){return this.getRuleContext(0,Cx)}EQ(){return this.getToken(Ie.EQ,0)}properties(){return this.getRuleContext(0,hp)}DOTTY(){return this.tryGetToken(Ie.DOTTY,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}accept(e){return e.visitTagReplaceProperties?e.visitTagReplaceProperties(this):e.visitChildren(this)}};Tt.TagReplacePropertiesContext=w9;var L9=class extends zu{propName(){return this.getRuleContext(0,Cx)}properties(){return this.getRuleContext(0,hp)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}accept(e){return e.visitTagUpdateProperties?e.visitTagUpdateProperties(this):e.visitChildren(this)}};Tt.TagUpdatePropertiesContext=L9;var I9=class extends zu{propName(){return this.getRuleContext(0,Cx)}MINUS(){return this.tryGetToken(Ie.MINUS,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}accept(e){return e.visitTagDef?e.visitTagDef(this):e.visitChildren(this)}};Tt.TagDefContext=I9;var XA=class extends Pc.ParserRuleContext{SQ_STRING(){return this.tryGetToken(Ie.SQ_STRING,0)}DQ_STRING(){return this.tryGetToken(Ie.DQ_STRING,0)}BARE_STRING(){return this.tryGetToken(Ie.BARE_STRING,0)}NUMERIC_LITERAL(){return this.tryGetToken(Ie.NUMERIC_LITERAL,0)}constructor(e,r){super(e,r)}get ruleIndex(){return Ie.RULE_string}accept(e){return e.visitString?e.visitString(this):e.visitChildren(this)}};Tt.StringContext=XA;var JA=class extends Pc.ParserRuleContext{BQ_STRING(){return this.tryGetToken(Ie.BQ_STRING,0)}BARE_STRING(){return this.tryGetToken(Ie.BARE_STRING,0)}constructor(e,r){super(e,r)}get ruleIndex(){return Ie.RULE_identifier}accept(e){return e.visitIdentifier?e.visitIdentifier(this):e.visitChildren(this)}};Tt.IdentifierContext=JA;var Cx=class extends Pc.ParserRuleContext{identifier(e){return e===void 0?this.getRuleContexts(JA):this.getRuleContext(e,JA)}DOT(e){return e===void 0?this.getTokens(Ie.DOT):this.getToken(Ie.DOT,e)}constructor(e,r){super(e,r)}get ruleIndex(){return Ie.RULE_propName}accept(e){return e.visitPropName?e.visitPropName(this):e.visitChildren(this)}};Tt.PropNameContext=Cx;var ET=class extends Pc.ParserRuleContext{string(){return this.tryGetRuleContext(0,XA)}arrayValue(){return this.tryGetRuleContext(0,tS)}reference(){return this.tryGetRuleContext(0,eS)}constructor(e,r){super(e,r)}get ruleIndex(){return Ie.RULE_eqValue}accept(e){return e.visitEqValue?e.visitEqValue(this):e.visitChildren(this)}};Tt.EqValueContext=ET;var ZA=class extends Pc.ParserRuleContext{string(){return this.tryGetRuleContext(0,XA)}properties(){return this.tryGetRuleContext(0,hp)}arrayValue(){return this.tryGetRuleContext(0,tS)}reference(){return this.tryGetRuleContext(0,eS)}constructor(e,r){super(e,r)}get ruleIndex(){return Ie.RULE_arrayElement}accept(e){return e.visitArrayElement?e.visitArrayElement(this):e.visitChildren(this)}};Tt.ArrayElementContext=ZA;var eS=class extends Pc.ParserRuleContext{RF_BEG(){return this.getToken(Ie.RF_BEG,0)}propName(){return this.getRuleContext(0,Cx)}RF_END(){return this.getToken(Ie.RF_END,0)}constructor(e,r){super(e,r)}get ruleIndex(){return Ie.RULE_reference}accept(e){return e.visitReference?e.visitReference(this):e.visitChildren(this)}};Tt.ReferenceContext=eS;var tS=class extends Pc.ParserRuleContext{AR_BEG(){return this.getToken(Ie.AR_BEG,0)}arrayElement(e){return e===void 0?this.getRuleContexts(ZA):this.getRuleContext(e,ZA)}AR_END(){return this.getToken(Ie.AR_END,0)}COMMA(e){return e===void 0?this.getTokens(Ie.COMMA):this.getToken(Ie.COMMA,e)}constructor(e,r){super(e,r)}get ruleIndex(){return Ie.RULE_arrayValue}accept(e){return e.visitArrayValue?e.visitArrayValue(this):e.visitChildren(this)}};Tt.ArrayValueContext=tS;var hp=class extends Pc.ParserRuleContext{PR_BEG(){return this.getToken(Ie.PR_BEG,0)}PR_END(){return this.getToken(Ie.PR_END,0)}DOTTY(){return this.tryGetToken(Ie.DOTTY,0)}tagSpec(e){return e===void 0?this.getRuleContexts(zu):this.getRuleContext(e,zu)}constructor(e,r){super(e,r)}get ruleIndex(){return Ie.RULE_properties}accept(e){return e.visitProperties?e.visitProperties(this):e.visitChildren(this)}};Tt.PropertiesContext=hp});var AT=v(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.unIndent=Ci.getOptionalId=Ci.idToStr=Ci.getId=Ci.parseString=Ci.getStringParts=Ci.getStringIfShort=Ci.getShortString=void 0;function Wme(t){var e,r;let n=((e=t.DQ_STRING())===null||e===void 0?void 0:e.text)||((r=t.SQ_STRING())===null||r===void 0?void 0:r.text);return n?AW(n,n[0]):""}Ci.getShortString=Wme;function OXe(t){let e=t.string().shortString();if(e)return Wme(e)}Ci.getStringIfShort=OXe;function*DXe(t){var e;if(t){for(let n of t.sqlInterpolation()){let i=n.OPEN_CODE().text;i.length>2&&(yield i.slice(0,i.length-2)),n.sqExpr()&&(yield n.sqExpr())}let r=(e=t.SQL_END())===null||e===void 0?void 0:e.text.slice(0,-3);r&&r.length>0&&(yield r)}}Ci.getStringParts=DXe;var Ql;(function(t){t[t.Normal=0]="Normal",t[t.ReverseVirgule=1]="ReverseVirgule",t[t.Unicode=2]="Unicode"})(Ql||(Ql={}));function AW(t,e=""){let r=t.slice(e.length),n=Ql.Normal;e.length&&(r=r.slice(0,-e.length));let i="",s="";for(let o of r)switch(n){case Ql.Normal:{o==="\\"?n=Ql.ReverseVirgule:i+=o;break}case Ql.ReverseVirgule:{let a=o;if(o==="u"){n=Ql.Unicode,s="";continue}o==="b"?a="\b":o==="f"?a="\f":o==="n"?a=`
`:o==="r"?a="\r":o==="t"&&(a="	"),i+=a,n=Ql.Normal;break}case Ql.Unicode:"ABCDEFabcdef0123456789".includes(o)?(s+=o,s.length===4&&(i+=String.fromCharCode(parseInt(s,16)),n=Ql.Normal)):n=Ql.Normal}return i}Ci.parseString=AW;function Yme(t){return Kme(t.id())}Ci.getId=Yme;function Kme(t){let e=t.BQ_STRING();return e?AW(e.text,"`"):t.text}Ci.idToStr=Kme;function NXe(t){function e(r){return"id"in r}if(e(t)&&t.id())return Yme(t)}Ci.getOptionalId=NXe;function*Xme(t){for(;t.length>0;){let e=t.match(/^.*?\r?\n/),r=t;e&&(r=e[0]),yield r,t=t.slice(r.length)}}function FXe(t){let e;for(let r of Xme(t)){let n=r.match(/^( *).*[^\s]/);if(n){let i=n[1].length;(e===void 0||i<e)&&(e=i)}}return e}function wXe(t){let e;for(let r of t)if(typeof r=="string"){let n=FXe(r);n!==void 0&&(e===void 0||n<e)&&(e=n)}if(e)for(let r=0;r<=t.length;r+=1){let n=t[r];if(typeof n=="string"){let i="";for(let s of Xme(n))s[0]===" "&&(s=s.slice(e)),i+=s;t[r]=i}}}Ci.unIndent=wXe});var Um=v(P9=>{"use strict";Object.defineProperty(P9,"__esModule",{value:!0});P9.Tag=void 0;var LXe=yW(),IXe=Gme(),MXe=Vme(),Jme=z7(),tge=AT(),us=class t{static tagFrom(e={}){return e instanceof t?e:new t(e)}static id(e){let r=t.ids.get(e);return r===void 0&&(r=t.nextTagId,t.ids.set(e,r),t.nextTagId+=1),r}peek(){let e=`#${t.id(this)}`;if(this.eq&&(typeof this.eq=="string"?e+=`=${this.eq}`:e+="=[]"),this.properties){let r=Object.keys(this.properties).map(n=>`${n}:`).join(", ");e+=`{${r}}`}return e}static fromTagline(e,r,...n){let i=`internal://tag-parse/from-tag-line?${encodeURIComponent(e)}`;return ege(e,r,n,i,0,0)}static addModelScope(e,r){let n=e?{...e}:{};return n.scopes?n.scopes=n.scopes.concat(r):n.scopes=[r],n}static annotationToTaglines(e,r){e||(e={});let n=e.inherits?t.annotationToTaglines(e.inherits,r):[];function i(s){let o=[];for(let a of s||[])(r===void 0||a.text.match(r))&&o.push(a.text);return o}return n.concat(i(e.blockNotes),i(e.notes))}static annotationToTag(e,r={}){let n=r.extending||new t,i=r.prefix||/^##? /;e||(e={});let s=[];if(e.inherits){let a=t.annotationToTag(e.inherits,r);s.push(...a.log),n=a.tag}let o=[];e.blockNotes&&o.push(...e.blockNotes),e.notes&&o.push(...e.notes);for(let a of o)if(a.text.match(i)){let u=ege(a.text,n,r.scopes||[],a.at.url,a.at.range.start.line,a.at.range.start.character);n=u.tag,s.push(...u.log)}return{tag:n,log:s}}constructor(e={}){e.eq&&(this.eq=e.eq),e.properties&&(this.properties=e.properties)}find(e){let r=t.tagFrom(this);for(let n of e){let i=r.properties&&r.properties[n];if(!i)return;r=t.tagFrom(i)}return r}tag(...e){return this.find(e)}has(...e){return this.find(e)!==void 0}text(...e){var r;let n=(r=this.find(e))===null||r===void 0?void 0:r.eq;if(typeof n=="string")return n}numeric(...e){var r;let n=(r=this.find(e))===null||r===void 0?void 0:r.eq;if(typeof n=="string"){let i=Number.parseFloat(n);if(!Number.isNaN(i))return i}}bare(...e){let r=this.find(e);if(r!==void 0)return r.properties===void 0||Object.entries(r.properties).length===0}get dict(){let e={};if(this.properties)for(let r in this.properties)e[r]=t.tagFrom(this.properties[r]);return e}array(...e){var r;let n=(r=this.find(e))===null||r===void 0?void 0:r.eq;if(!(n===void 0||typeof n=="string"))return n.map(i=>typeof i=="string"?new t({eq:i}):t.tagFrom(i))}textArray(...e){var r;let n=(r=this.find(e))===null||r===void 0?void 0:r.eq;if(!(n===void 0||typeof n=="string"))return n.reduce((i,s)=>typeof s.eq=="string"?i.concat(s.eq):i,[])}numericArray(...e){var r;let n=(r=this.find(e))===null||r===void 0?void 0:r.eq;if(!(n===void 0||typeof n=="string"))return n.reduce((i,s)=>{if(typeof s.eq=="string"){let o=Number.parseFloat(s.eq);if(!Number.isNaN(o))return i.concat(o)}return i},[])}getProperties(){return this.properties===void 0&&(this.properties={}),this.properties}clone(){return new t(structuredClone(this))}};P9.Tag=us;us.ids=new Map;us.nextTagId=1e3;var SW=class{constructor(e,r,n){this.sourceURL=e,this.atLine=r,this.fromChar=n,this.log=[]}syntaxError(e,r,n,i,s,o){let a={line:this.atLine,character:this.fromChar+i},u={start:a,end:a},l={message:s,at:{url:this.sourceURL,range:u},severity:"error"};this.log.push(l)}};function ST(t){let e=t.buildOn;return e instanceof us?e:new us}function M9(t,e){let r=t.getProperties();for(let n of e.slice(0,e.length-1)){let i;r[n]===void 0?(i=new us({}),r[n]=i):i=us.tagFrom(r[n]),r=i.getProperties()}return[e[e.length-1],r]}function Zme(t){return t.SQ_STRING()||t.DQ_STRING()?(0,tge.parseString)(t.text,t.text[0]):t.text}function ege(t,e,r,n,i,s){if(t[0]==="#"){let h=t.indexOf(" ");h>0?t=t.slice(h):t=""}let o=Jme.CharStreams.fromString(t),a=new IXe.MalloyTagLexer(o),u=new Jme.CommonTokenStream(a),l=new MXe.MalloyTagParser(u);l.removeErrorListeners();let c=new SW(n,i,s);l.addErrorListener(c);let f=l.tagLine();return{tag:new vW(r).tagLineToTag(f,e),log:c.log}}var vW=class extends LXe.AbstractParseTreeVisitor{constructor(e=[]){super(),this.scopes=[],this.scopes.unshift(...e)}defaultResult(){return new us}visitString(e){return new us({eq:Zme(e)})}getPropName(e){return e.identifier().map(r=>r.BARE_STRING()?r.text:(0,tge.parseString)(r.text,r.text[0]))}getTags(e,r){for(let n of e)n.buildOn=r,this.visit(n);return r}tagLineToTag(e,r){return r=r?.clone()||new us({}),this.scopes.unshift(r),this.getTags(e.tagSpec(),r),r}visitTagLine(e){throw new Error("INTERNAL: ERROR: Call tagLineToTag, not vistTagLine")}visitProperties(e){return this.getTags(e.tagSpec(),ST(e))}visitArrayValue(e){return new us({eq:this.getArray(e)})}getArray(e){return e.arrayElement().map(r=>this.visit(r))}visitArrayElement(e){let r=e.properties(),n=r?this.visitProperties(r):void 0,i=e.string(),s=i?Zme(i):void 0,o=e.arrayValue();if(o&&(s=this.getArray(o)),n)return s&&(n.eq=s),n;let a=e.reference();return a?this.visitReference(a):new us({eq:s})}visitReference(e){let r=this.getPropName(e.propName());for(let n of this.scopes)if(n.has(r[0])){let i=n.tag(...r);if(i)return i.clone();break}return this.defaultResult()}visitTagEq(e){let r=ST(e),n=this.getPropName(e.propName()),[i,s]=M9(r,n),o=this.visit(e.eqValue()),a=e.properties();if(a)if(a.DOTTY()===void 0){let u=this.visitProperties(a).dict;s[i]={...o,properties:u}}else s[i]={...s[i],...o};else s[i]=o;return r}visitTagReplaceProperties(e){let r=ST(e),n=this.getPropName(e.propName()),[i,s]=M9(r,n),o=e.properties(),a=this.visitProperties(o);return e.DOTTY()===void 0?s[i]={properties:a.dict}:s[i].properties=a.dict,r}visitTagUpdateProperties(e){let r=ST(e),n=this.getPropName(e.propName()),[i,s]=M9(r,n),o=e.properties();o.buildOn=us.tagFrom(s[i]);let a=this.visitProperties(o),u=s[i]||new us({}),l={...u.properties,...a.dict};return s[i]={...u,properties:l},r}visitTagDef(e){let r=ST(e),n=this.getPropName(e.propName()),[i,s]=M9(r,n);return e.MINUS()?delete s[i]:s[i]=new us({}),r}}});var rge=v(k9=>{"use strict";Object.defineProperty(k9,"__esModule",{value:!0});k9.GlobalNameSpace=void 0;var PXe=GN(),_W=class{getEntry(e){let r=(0,PXe.getDialectFunction)(e);if(r!==void 0)return{entry:r,exported:!1}}setEntry(e,r,n){throw new Error("The global namespace is immutable!")}};k9.GlobalNameSpace=_W});var kc=v(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});pp.extendNoteHelper=pp.extendNoteMethod=pp.isNoteable=void 0;function kXe(t){return t.isNoteableObj}pp.isNoteable=kXe;function BXe(t){nge(this,t)}pp.extendNoteMethod=BXe;function nge(t,e){(e.notes&&e.notes.length>0||e.blockNotes&&e.blockNotes.length>0||e.inherits!==void 0)&&(t.note={...t.note,...e})}pp.extendNoteHelper=nge});var Et=v(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.Document=Pn.DocStatementList=Pn.ListOf=Pn.isDocStatementOrDocStatementList=Pn.isDocStatement=Pn.ExperimentalExperiment=Pn.ModelEntryReference=Pn.Unimplemented=Pn.MalloyElement=void 0;var qXe=Xe(),UXe=Um(),$Xe=rge(),ige=kc(),jXe=(Sz(),w0e(Az)),mp=class t{constructor(e){this.children={},this.parent=null,this.logged=new Set,e&&this.has(e)}has(e){for(let r in e){let n=e[r];if(n!==void 0)if(this.children[r]=n,n instanceof t)n.parent=this;else for(let i of n)i.parent=this}}get location(){return this.codeLocation?this.codeLocation:this.parent?this.parent.location:{url:this.sourceURL,range:{start:{line:0,character:0},end:{line:0,character:0}}}}set location(e){this.codeLocation=e}get code(){var e,r;return(r=(e=this.translator())===null||e===void 0?void 0:e.codeAtLocation(this.location))!==null&&r!==void 0?r:""}document(){var e;return this instanceof bT?this:(e=this.parent)===null||e===void 0?void 0:e.document()}namespace(){if(this instanceof bT)return this;if(this.parent)return this.parent.namespace();throw new Error("INTERNAL ERROR: Translation without document scope")}modelEntry(e){var r;let n=e instanceof vT?e.name:e,i=(r=this.namespace())===null||r===void 0?void 0:r.getEntry(n);return e instanceof vT&&(i?.entry.type==="query"?this.addReference({type:"queryReference",text:n,definition:i.entry,location:e.location}):i?.entry.type==="struct"&&((0,qXe.isSQLBlockStruct)(i.entry)&&i.entry.declaredSQLBlock?this.addReference({type:"sqlBlockReference",text:n,definition:i.entry,location:e.location}):this.addReference({type:"exploreReference",text:n,definition:i.entry,location:e.location}))),i}kupuna(){var e;return((e=this.parent)===null||e===void 0?void 0:e.kupuna())||this}translator(){if(this.xlate)return this.xlate;if(this.parent)return this.parent.translator()}setTranslator(e){this.xlate=e}addReference(e){var r;(r=this.translator())===null||r===void 0||r.addReference(e)}get sourceURL(){let e=this.translator();return e?.sourceURL||"(missing)"}errorsExist(){let e=this.logger();return e?e.hasErrors():!1}log(e,r="error"){if(this.codeLocation){if(this.logged.has(e))return;this.logged.add(e)}let n={at:this.location,message:e,severity:r},i=this.logger();if(i){i.log(n);return}throw new Error(`Translation error (without error reporter):
${JSON.stringify(n,null,2)}`)}logger(){var e;return(e=this.translator())===null||e===void 0?void 0:e.root.logger}toString(){return this.stringify("",0)}stringify(e,r){let n=" ".repeat(r),i=`${n}${e}<${this.elementType}>${this.varInfo()}`;for(let s of Object.keys(this.children)){let o=this.children[s];o instanceof t?i+=`
`+o.stringify(`${s}: `,r+2):(i+=`
${n}  ${s}: [`,o.length>0&&(i+=`
`+o.map(a=>a.stringify("",r+4)).join(`
`)+`
${n}  `),i+="]")}return i}*walk(){for(let e of Object.keys(this.children)){let r=this.children[e];if(r instanceof t)yield r;else for(let n of r)yield n}}varInfo(){let e="";for(let[r,n]of Object.entries(this))r!=="elementType"&&(typeof n=="boolean"?e+=n?` ${r}`:` !${r}`:(typeof n=="string"||typeof n=="number")&&(e+=` ${r}=${n}`));return e}internalError(e){return this.log(`INTERNAL ERROR IN TRANSLATION: ${e}`),new Error(e)}needs(e){for(let r of this.walk()){let n=r.needs(e);if(n)return n}}inExperiment(e,r=!1){var n;let i=(n=this.translator())===null||n===void 0?void 0:n.compilerFlags.tag("experimental");return i&&(i.bare()||i.has(e))?!0:(r||this.log(`Experimental flag '${e}' is not set, feature not available`),!1)}};Pn.MalloyElement=mp;var bW=class extends mp{constructor(){super(...arguments),this.elementType="unimplemented",this.reported=!1}};Pn.Unimplemented=bW;var vT=class extends mp{constructor(e){super(),this.name=e,this.elementType="modelEntryReference"}get refString(){return this.name}toString(){return this.refString}getNamed(){var e;return(e=this.modelEntry(this))===null||e===void 0?void 0:e.entry}};Pn.ModelEntryReference=vT;var TW=class extends mp{constructor(e){super(),this.id=e,this.elementType="experimentalExperiment"}execute(e){this.inExperiment(this.id)}};Pn.ExperimentalExperiment=TW;function sge(t){return t.execute!==void 0}Pn.isDocStatement=sge;function HXe(t){return t instanceof _T||sge(t)}Pn.isDocStatementOrDocStatementList=HXe;var B9=class extends mp{constructor(e){super(),this.elements=e,this.newContents()}newContents(){this.has({listOf:this.elements})}get list(){return this.elements}empty(){return this.elements.length===0}notEmpty(){return this.elements.length>0}push(...e){return this.elements.push(...e),this.newContents(),this.elements}needs(e){for(let r of this.elements){let n=r.needs(e);if(n)return n}}};Pn.ListOf=B9;var _T=class t extends B9{constructor(){super(...arguments),this.elementType="topLevelStatements",this.execCursor=0,this.isNoteableObj=!0,this.extendNote=ige.extendNoteMethod,this.noteCursor=0}executeList(e){for(;this.execCursor<this.elements.length;){let r=this.elements[this.execCursor];if(this.noteCursor===this.execCursor&&(this.note&&(0,ige.isNoteable)(r)&&r.extendNote(this.note),this.noteCursor+=1),r instanceof t){let n=r.executeList(e);if(n)return n}else{let n=r.needs(e);if(n)return n;r.execute(e)}this.execCursor+=1}}};Pn.DocStatementList=_T;var zXe="5a79a191-06bc-43cf-9b12-58741cd82970";function oge(t){let e=t.inherits?oge(t.inherits):[];return t.blockNotes&&e.push(...t.blockNotes.map(r=>r.text)),t.notes&&e.push(...t.notes.map(r=>r.text)),e}function GXe(t){let e=oge(t).join("");return(0,jXe.v5)(e,zXe)}var bT=class extends mp{constructor(e){super(),this.elementType="document",this.globalNameSpace=new $Xe.GlobalNameSpace,this.documentModel={},this.queryList=[],this.sqlBlocks=[],this.didInitModel=!1,this.annotation={},this.experiments=new UXe.Tag({}),this.modelAnnotationTodoList=[],this.statements=new _T(e),this.has({statements:e})}initModelDef(e){if(!this.didInitModel){if(this.documentModel={},this.queryList=[],this.sqlBlocks=[],e){e.annotation&&(this.annotation.inherits=e.annotation);for(let[r,n]of Object.entries(e.contents)){let i=structuredClone(n);if(i.type==="struct"||i.type==="query"||i.type==="function"){let s=e.exports.includes(r);this.setEntry(r,{entry:i,exported:s})}}}this.didInitModel=!0}}compile(){let e=this.statements.executeList(this),r=this.modelDef();if(e===void 0){for(let i of this.queryList)i.modelAnnotation===void 0&&r.annotation&&(i.modelAnnotation=r.annotation);for(let i of this.sqlBlocks)i.modelAnnotation===void 0&&r.annotation&&(i.modelAnnotation=r.annotation)}if(r.annotation)for(let i of this.modelAnnotationTodoList)i.modelAnnotation||(i.modelAnnotation=r.annotation);return{modelDef:r,queryList:this.queryList,sqlBlocks:this.sqlBlocks,needs:e}}rememberToAddModelAnnotations(e){this.modelAnnotationTodoList.push(e)}hasAnnotation(){return this.annotation.notes&&this.annotation.notes.length>0||this.annotation.inherits!==void 0}currentModelAnnotation(){if(this.hasAnnotation()){let e={...this.annotation,id:""};return e.id=GXe(e),e}}modelDef(){let e={name:"",exports:[],contents:{}};this.hasAnnotation()&&(e.annotation=this.currentModelAnnotation());for(let r in this.documentModel){let n=this.documentModel[r].entry;if(n.type==="struct"||n.type==="query"){this.documentModel[r].exported&&e.exports.push(r);let i=structuredClone(n);i.modelAnnotation===void 0&&e.annotation&&(i.modelAnnotation=e.annotation),e.contents[r]=i}}return e}defineSQL(e,r){let n={...e,as:`$${this.sqlBlocks.length}`,declaredSQLBlock:!0};if(r){if(this.getEntry(r))return!1;n.as=r,this.setEntry(r,{entry:n})}return this.sqlBlocks.push(n),!0}getEntry(e){var r;return(r=this.globalNameSpace.getEntry(e))!==null&&r!==void 0?r:this.documentModel[e]}setEntry(e,r){this.globalNameSpace.getEntry(e)!==void 0&&this.log(`Cannot redefine '${e}', which is in global namespace`),this.documentModel[e]=r}};Pn.Document=bT});var q9=v(rS=>{"use strict";Object.defineProperty(rS,"__esModule",{value:!0});rS.canMakeEntry=rS.SpaceEntry=void 0;var CW=class{};rS.SpaceEntry=CW;function QXe(t){return"makeEntry"in t}rS.canMakeEntry=QXe});var Ja=v(U9=>{"use strict";Object.defineProperty(U9,"__esModule",{value:!0});U9.SpaceField=void 0;var VXe=Xe(),WXe=q9(),RW=class extends WXe.SpaceEntry{constructor(){super(...arguments),this.refType="field"}fieldTypeFromFieldDef(e){let r={dataType:e.type,expressionType:"scalar",evalSpace:"input"};return(0,VXe.isFieldTypeDef)(e)&&e.expressionType&&(r.expressionType=e.expressionType),r.dataType==="unsupported"&&e.type==="unsupported"&&e.rawType&&(r.rawType=e.rawType),r}getQueryFieldDef(e){}fieldDef(){}};U9.SpaceField=RW});var j9=v($9=>{"use strict";Object.defineProperty($9,"__esModule",{value:!0});$9.ViewField=void 0;var YXe=Ja(),OW=class extends YXe.SpaceField{constructor(e){super(),this.inSpace=e}typeDesc(){return{dataType:"turtle",expressionType:"scalar",evalSpace:"input"}}};$9.ViewField=OW});var age=v(H9=>{"use strict";Object.defineProperty(H9,"__esModule",{value:!0});H9.ASTViewField=void 0;var KXe=j9(),DW=class extends KXe.ViewField{constructor(e,r,n){super(e),this.view=r,this.name=n}getQueryFieldDef(e){return this.view.getFieldDef(e)}fieldDef(){return this.view.getFieldDef(this.inSpace)}};H9.ASTViewField=DW});var FW=v(z9=>{"use strict";Object.defineProperty(z9,"__esModule",{value:!0});z9.ViewFieldDeclaration=void 0;var XXe=Et(),JXe=kc(),ZXe=R9(),eJe=age(),NW=class extends XXe.MalloyElement{constructor(e,r){super({view:r}),this.name=e,this.view=r,this.elementType="view-field-declaration",this.isNoteableObj=!0,this.extendNote=JXe.extendNoteMethod}makeEntry(e){let r=new eJe.ASTViewField(e,this,this.name);e.newEntry(this.name,this,r)}getFieldDef(e){let{pipeline:r,annotation:n}=this.view.pipelineComp(e),i=(0,ZXe.detectAndRemovePartialStages)(r,this);return{type:"turtle",name:this.name,pipeline:i,annotation:{...this.note,inherits:n},location:this.location}}};z9.ViewFieldDeclaration=NW});var Ri=v(nS=>{"use strict";Object.defineProperty(nS,"__esModule",{value:!0});nS.LegalRefinementStage=nS.QueryClass=void 0;var uge;(function(t){t.Index="index",t.Project="project",t.Grouping="grouping"})(uge||(nS.QueryClass=uge={}));var lge;(function(t){t[t.Single=0]="Single",t[t.Head=1]="Head",t[t.Tail=2]="Tail"})(lge||(nS.LegalRefinementStage=lge={}))});var LW=v(G9=>{"use strict";Object.defineProperty(G9,"__esModule",{value:!0});G9.NestFieldDeclaration=void 0;var tJe=R9(),rJe=FW(),cge=Ri(),wW=class extends rJe.ViewFieldDeclaration{constructor(){super(...arguments),this.elementType="nest-field-declaration",this.queryRefinementStage=cge.LegalRefinementStage.Single,this.forceQueryClass=cge.QueryClass.Grouping}queryExecute(e){e.resultFS.pushFields(this)}getFieldDef(e){if(e.isQueryFieldSpace()){let{pipeline:r,annotation:n}=this.view.pipelineComp(e,e.outputSpace()),i=(0,tJe.detectAndRemovePartialStages)(r,this);return{type:"turtle",name:this.name,pipeline:i,annotation:{...this.note,inherits:n},location:this.location}}throw this.internalError("Unexpected namespace for nest")}};G9.NestFieldDeclaration=wW});var ea=v(Q9=>{"use strict";Object.defineProperty(Q9,"__esModule",{value:!0});Q9.ErrorFactory=void 0;var fge={type:"struct",name:"~malformed~",dialect:"~malformed~",structSource:{type:"table",tablePath:"//undefined_error_table_path"},structRelationship:{type:"basetable",connectionName:"//undefined_error_connection"},fields:[]},IW=class t{static get structDef(){return{...fge}}static isErrorStructDef(e){return e.name.includes(fge.name)}static get query(){return{structRef:t.structDef,pipeline:[]}}static get reduceSegment(){return{type:"reduce",fields:[]}}static get projectSegment(){return{type:"project",fields:[]}}static get indexSegment(){return{type:"index",fields:[]}}};Q9.ErrorFactory=IW});var PW=v(V9=>{"use strict";Object.defineProperty(V9,"__esModule",{value:!0});V9.HasParameter=void 0;var nJe=Xe(),iJe=Et(),MW=class extends iJe.MalloyElement{constructor(e){super(),this.elementType="hasParameter",this.name=e.name,this.isCondition=e.isCondition,e.type&&(0,nJe.isCastType)(e.type)&&(this.type=e.type),e.default&&(this.default=e.default,this.has({default:this.default}))}parameter(){var e,r;let n=this.name,i=this.type||"string";if(this.isCondition){let o=((e=this.default)===null||e===void 0?void 0:e.constantCondition(i).value)||null;return{type:i,name:n,condition:o}}return{value:((r=this.default)===null||r===void 0?void 0:r.constantValue().value)||null,type:i,name:this.name,constant:!1}}};V9.HasParameter=MW});var dge=v(iS=>{"use strict";Object.defineProperty(iS,"__esModule",{value:!0});iS.DefineSourceList=iS.DefineSource=void 0;var sJe=ea(),oJe=PW(),xge=Et(),aJe=kc(),kW=class extends xge.MalloyElement{constructor(e,r,n,i){if(super(),this.name=e,this.sourceExpr=r,this.exported=n,this.elementType="defineSource",this.isNoteableObj=!0,this.extendNote=aJe.extendNoteMethod,r&&this.has({sourceExpr:r}),i){this.parameters=[];for(let s of i)s instanceof oJe.HasParameter?this.parameters.push(s):this.log(`Unexpected element type in define statement: ${s.elementType}`);this.has({parameters:this.parameters})}}execute(e){var r;if(e.modelEntry(this.name))this.log(`Cannot redefine '${this.name}'`);else{let n=(r=this.sourceExpr)===null||r===void 0?void 0:r.getSource();if(n===void 0)return;let i=n.withParameters(this.parameters);if(sJe.ErrorFactory.isErrorStructDef(i))return;let s={...i,as:this.name,location:this.location};this.note&&(s.annotation=i.annotation?{...this.note,inherits:i.annotation}:this.note),e.setEntry(this.name,{entry:s,exported:this.exported})}}};iS.DefineSource=kW;var BW=class extends xge.DocStatementList{constructor(e){super(e),this.elementType="defineSources"}};iS.DefineSourceList=BW});var pge=v(sS=>{"use strict";Object.defineProperty(sS,"__esModule",{value:!0});sS.DefineQueryList=sS.DefineQuery=void 0;var hge=Et(),uJe=kc(),qW=class extends hge.MalloyElement{constructor(e,r){super({queryExpr:r}),this.name=e,this.queryExpr=r,this.elementType="defineQuery",this.isNoteableObj=!0,this.extendNote=uJe.extendNoteMethod}execute(e){if(e.getEntry(this.name)){this.log(`'${this.name}' is already defined, cannot redefine`);return}let n=this.queryExpr.getQuery();if(!n){this.queryExpr.sqLog("Cannot define a query from this expression");return}let i={...n.query(),type:"query",name:this.name,location:this.location};this.note&&(i.annotation=i.annotation?{...this.note,inherits:i.annotation}:this.note),e.setEntry(this.name,{entry:i,exported:!0})}};sS.DefineQuery=qW;var UW=class extends hge.DocStatementList{constructor(e){super(e),this.elementType="defineQueries"}};sS.DefineQueryList=UW});var Rx=v(W9=>{"use strict";Object.defineProperty(W9,"__esModule",{value:!0});W9.Source=void 0;var lJe=Et(),$W=class extends lJe.MalloyElement{structRef(){return this.structDef()}withParameters(e){let r=this.structDef();if(e){let n={...r.parameters||{}};for(let i of e){let s=i.parameter();n[s.name]=s}return{...r,parameters:n}}return r}};W9.Source=$W});var HW=v(oS=>{"use strict";Object.defineProperty(oS,"__esModule",{value:!0});oS.mergeFields=oS.nameOf=void 0;function jW(t){return typeof t=="string"?t:t.as||t.name}oS.nameOf=jW;function cJe(t,e){if(t===void 0)return e;let r=new Set(e.map(i=>jW(i))),n=t.filter(i=>!r.has(jW(i)));return n.push(...e),n}oS.mergeFields=cJe});var Y9=v(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});gp.DefinedParameter=gp.AbstractParameter=gp.SpaceParam=void 0;var fJe=q9(),TT=class extends fJe.SpaceEntry{constructor(){super(...arguments),this.refType="parameter"}};gp.SpaceParam=TT;var zW=class extends TT{constructor(e){super(),this.astParam=e}parameter(){return this.astParam.parameter()}typeDesc(){return{dataType:this.astParam.type||"error",expressionType:"scalar",evalSpace:"input"}}};gp.AbstractParameter=zW;var GW=class extends TT{constructor(e){super(),this.paramDef=e}parameter(){return this.paramDef}typeDesc(){return{dataType:this.paramDef.type,expressionType:"scalar",evalSpace:"input"}}};gp.DefinedParameter=GW});var CT=v(K9=>{"use strict";Object.defineProperty(K9,"__esModule",{value:!0});K9.StructSpaceFieldBase=void 0;var xJe=Ja(),QW=class extends xJe.SpaceField{constructor(e){super(),this.sourceDef=e}get structRelationship(){return this.sourceDef.structRelationship}fieldDef(){return this.sourceDef}typeDesc(){return{dataType:"struct",expressionType:"scalar",evalSpace:"input"}}};K9.StructSpaceFieldBase=QW});var WW=v(X9=>{"use strict";Object.defineProperty(X9,"__esModule",{value:!0});X9.ColumnSpaceField=void 0;var dJe=Ja(),VW=class extends dJe.SpaceField{constructor(e){super(),this.haveFieldDef=e}fieldDef(){return this.haveFieldDef}typeDesc(){return this.fieldTypeFromFieldDef(this.haveFieldDef)}};X9.ColumnSpaceField=VW});var mge=v(J9=>{"use strict";Object.defineProperty(J9,"__esModule",{value:!0});J9.IRViewField=void 0;var hJe=j9(),YW=class extends hJe.ViewField{constructor(e,r){super(e),this.turtleDef=r,this.haveFieldDef=r}rename(e){this.turtleDef={...this.turtleDef,as:e}}fieldDef(){return this.turtleDef}getQueryFieldDef(e){return this.fieldDef()}};J9.IRViewField=YW});var Vl=v(aS=>{"use strict";Object.defineProperty(aS,"__esModule",{value:!0});aS.StructSpaceField=aS.StaticSpace=void 0;var pJe=GN(),mJe=Xe(),gJe=Y9(),yJe=Ja(),Z9=CT(),EJe=WW(),AJe=mge(),eL=class{constructor(e){this.type="fieldSpace",this.fromStruct=e}dialectObj(){try{return(0,pJe.getDialect)(this.fromStruct.dialect)}catch{return}}defToSpaceField(e){return e.type==="struct"?new tL(e):(0,mJe.isTurtleDef)(e)?new AJe.IRViewField(this,e):new EJe.ColumnSpaceField(e)}get map(){if(this.memoMap===void 0){this.memoMap={};for(let e of this.fromStruct.fields){let r=e.as||e.name;this.memoMap[r]=this.defToSpaceField(e)}if(this.fromStruct.parameters)for(let[e,r]of Object.entries(this.fromStruct.parameters)){if(this.memoMap[e])throw new Error(`In struct '${this.fromStruct.as||this.fromStruct.name}':  : Field and parameter name conflict '${e}`);this.memoMap[e]=new gJe.DefinedParameter(r)}}return this.memoMap}dropEntries(){this.memoMap={}}dropEntry(e){delete this.map[e]}entry(e){return this.map[e]}setEntry(e,r){this.map[e]=r}entries(){return Object.entries(this.map)}structDef(){return this.fromStruct}emptyStructDef(){return{...this.fromStruct,fields:[]}}lookup(e){let r=e[0],n=e.slice(1),i=this.entry(r.refString);if(!i)return{error:`'${r}' is not defined`,found:i};if(i instanceof yJe.SpaceField){let o=i.fieldDef();o&&r.addReference({type:i instanceof Z9.StructSpaceFieldBase?"joinReference":"fieldReference",definition:o,location:r.location,text:r.refString})}let s=i instanceof Z9.StructSpaceFieldBase?[{name:r.refString,structRelationship:i.structRelationship}]:[];if(n.length){if(i instanceof Z9.StructSpaceFieldBase){let o=i.fieldSpace.lookup(n);return o.found?{...o,relationship:[...s,...o.relationship]}:o}return{error:`'${r}' cannot contain a '${n[0]}'`,found:void 0}}return{found:i,error:void 0,relationship:s,isOutputField:!1}}isQueryFieldSpace(){return!1}};aS.StaticSpace=eL;var tL=class extends Z9.StructSpaceFieldBase{constructor(e){super(e)}get fieldSpace(){return new eL(this.sourceDef)}};aS.StructSpaceField=tL});var XW=v(rL=>{"use strict";Object.defineProperty(rL,"__esModule",{value:!0});rL.JoinSpaceField=void 0;var SJe=Vl(),KW=class extends SJe.StructSpaceField{constructor(e){super(e.structDef()),this.join=e}};rL.JoinSpaceField=KW});var ZW=v(nL=>{"use strict";Object.defineProperty(nL,"__esModule",{value:!0});nL.SpaceSeed=void 0;var vJe=Vl();function gge(t){return t.type==="fieldSpace"}var JW=class{constructor(e){this.sourceSpec=e,this.spaceSpec=e}get structDef(){return gge(this.spaceSpec)?(this.asStruct||(this.asStruct=this.spaceSpec.structDef()),this.asStruct):this.spaceSpec}get fieldSpace(){return gge(this.spaceSpec)?this.spaceSpec:(this.asFS||(this.asFS=new vJe.StaticSpace(this.spaceSpec)),this.asFS)}};nL.SpaceSeed=JW});var Ege=v(iL=>{"use strict";Object.defineProperty(iL,"__esModule",{value:!0});iL.DynamicSpace=void 0;var _Je=HW(),bJe=ea(),TJe=Ja(),CJe=XW(),RJe=j9(),yge=Y9(),OJe=ZW(),DJe=Vl(),NJe=CT(),eY=class extends DJe.StaticSpace{constructor(e){let r=new OJe.SpaceSeed(e);super(structuredClone(r.structDef)),this.completions=[],this.complete=!1,this.final=void 0,this.source=r}isComplete(){this.complete=!0}setEntry(e,r){if(this.final)throw new Error("Space already final");super.setEntry(e,r)}addParameters(e){for(let r of e)this.setEntry(r.name,new yge.AbstractParameter(r));return this}newEntry(e,r,n){if(this.entry(e)){r.log(`Cannot redefine '${e}'`);return}this.setEntry(e,n)}renameEntry(e,r,n){this.dropEntry(e),this.setEntry(r,n)}addFieldDef(e){this.setEntry((0,_Je.nameOf)(e),this.defToSpaceField(e))}setTimezone(e){this.newTimezone=e}structDef(){let e=this.fromStruct.parameters||{};if(this.final===void 0){this.final={...this.fromStruct,fields:[]};let r=[],n=[],i=[],s=[];for(let[a,u]of this.entries())u instanceof NJe.StructSpaceFieldBase?n.push([a,u]):u instanceof RJe.ViewField?i.push([a,u]):u instanceof TJe.SpaceField?r.push([a,u]):u instanceof yge.SpaceParam&&(e[a]=u.parameter());let o=[...r,...n,...i];for(let[,a]of o)if(a instanceof CJe.JoinSpaceField){let u=a.join.structDef();bJe.ErrorFactory.isErrorStructDef(u)||(this.final.fields.push(u),s.push([a.join,u]))}else{let u=a.fieldDef();u&&this.final.fields.push(u)}Object.entries(e).length>0&&(this.final.parameters=e);for(let[a,u]of s)a.fixupJoinOn(this,u)}return this.newTimezone&&(this.final.queryTimezone=this.newTimezone),this.isComplete(),this.final}};iL.DynamicSpace=eY});var oL=v(sL=>{"use strict";Object.defineProperty(sL,"__esModule",{value:!0});sL.RefinedSpace=void 0;var FJe=Ege(),wJe=q9(),tY=class t extends FJe.DynamicSpace{static filteredFrom(e,r){let n=new t(e);if(r){let i=r.refs.list,s=n.entries();n.dropEntries();for(let[o,a]of s){let u=!!i.find(c=>c.refString===o),l=r.edit==="accept";u===l&&n.setEntry(o,a)}}return n}pushFields(...e){for(let r of e)(0,wJe.canMakeEntry)(r)?r.makeEntry(this):r.log(`Internal error, ${r.elementType} not expected in this context`)}};sL.RefinedSpace=tY});var Wl=v(aL=>{"use strict";Object.defineProperty(aL,"__esModule",{value:!0});aL.DefinitionList=void 0;var LJe=Et(),Age=kc(),rY=class extends LJe.ListOf{constructor(){super(...arguments),this.isNoteableObj=!0}extendNote(e){(0,Age.extendNoteHelper)(this,e),this.distributeAnnotation()}distributeAnnotation(){if(this.note)for(let e of this.elements)(0,Age.isNoteable)(e)&&e.extendNote(this.note)}newContents(){super.newContents(),this.distributeAnnotation()}};aL.DefinitionList=rY});var uS=v(uL=>{"use strict";Object.defineProperty(uL,"__esModule",{value:!0});uL.DeclareFields=void 0;var IJe=Wl(),MJe=Ri(),nY=class extends IJe.DefinitionList{constructor(e){super(e),this.elementType="declareFields",this.queryRefinementStage=MJe.LegalRefinementStage.Single,this.forceQueryClass=void 0}queryExecute(e){for(let r of this.list)e.inputFS.extendSource(r)}};uL.DeclareFields=nY});var ls=v(yp=>{"use strict";Object.defineProperty(yp,"__esModule",{value:!0});yp.nullsafeNot=yp.compressExpr=yp.compose=void 0;var PJe=Xe();function Sge(t){return t.length>1?["(",...t,")"]:t.length===0?["__MISSING_VALUE__"]:t}function kJe(t,e,r){let n=e.match(/^[A-Za-z]/),i=t.length===1&&n?" ":"",s=r.length===1&&n?" ":"",o=i+e+s;return[...Sge(t),o,...Sge(r)]}yp.compose=kJe;function BJe(t){let e=[],r;for(let n of t.flat())typeof n=="string"?r=r?r+n:n:(r&&(e.push(r),r=void 0),e.push(n));return r&&e.push(r),e}yp.compressExpr=BJe;function qJe(t,e){return e===void 0||e==="!="||e==="!~"?(0,PJe.mkExpr)`COALESCE(NOT(${t}),FALSE)`:t}yp.nullsafeNot=qJe});var cS=v(lS=>{"use strict";Object.defineProperty(lS,"__esModule",{value:!0});lS.Filter=lS.FilterElement=void 0;var vge=Xe(),UJe=ls(),_ge=Et(),iY=Ri(),sY=class extends _ge.MalloyElement{constructor(e,r){super({expr:e}),this.expr=e,this.exprSrc=r,this.elementType="filterElement"}filterExpression(e){let r=this.expr.getExpression(e);return r.dataType!=="boolean"?(this.expr.log("Filter expression must have boolean value"),{code:this.exprSrc,expression:["_FILTER_MUST_RETURN_BOOLEAN_"],expressionType:"scalar"}):{code:this.exprSrc,expression:(0,UJe.compressExpr)(r.value),expressionType:r.expressionType}}};lS.FilterElement=sY;var oY=class extends _ge.ListOf{constructor(){super(...arguments),this.elementType="filter",this.forceQueryClass=void 0,this.queryRefinementStage=iY.LegalRefinementStage.Head}set having(e){this.elementType=e?"having":"where",this.havingClause=e,this.queryRefinementStage=e?iY.LegalRefinementStage.Tail:iY.LegalRefinementStage.Head}getFilterList(e){let r=[];for(let n of this.list){let i=n.filterExpression(e);if(this.havingClause!==void 0){let s=(0,vge.expressionIsAggregate)(i.expressionType),o=(0,vge.expressionIsAnalytic)(i.expressionType);if(this.havingClause){if(o){n.log("Analytic expressions are not allowed in `having:`");continue}}else if(o){n.log("Analytic expressions are not allowed in `where:`");continue}else s&&n.log("Aggregate expressions are not allowed in `where:`; use `having:`")}r.push(i)}return r}};lS.Filter=oY});var fS=v(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.Joins=Bc.ExpressionJoin=Bc.KeyJoin=Bc.Join=void 0;var $Je=Xe(),jJe=ls(),HJe=XW(),zJe=Wl(),GJe=Et(),QJe=kc(),VJe=Ri(),bge=ea(),RT=class extends GJe.MalloyElement{constructor(){super(...arguments),this.isNoteableObj=!0,this.extendNote=QJe.extendNoteMethod}makeEntry(e){e.newEntry(this.name.refString,this,new HJe.JoinSpaceField(this))}getStructDefFromExpr(){let e=this.sourceExpr.getSource();return e?e.structDef():(this.sourceExpr.sqLog("Cannot great a source to join from"),bge.ErrorFactory.structDef)}};Bc.Join=RT;var aY=class extends RT{constructor(e,r,n){super({name:e,sourceExpr:r,keyExpr:n}),this.name=e,this.sourceExpr=r,this.keyExpr=n,this.elementType="joinOnKey"}structDef(){var e;let r=this.getStructDefFromExpr(),n={...r,structRelationship:{type:"one",matrixOperation:"left",onExpression:["('join fixup'='not done yet')"]},location:this.location};return r.structSource.type==="query"?n.name=this.name.refString:n.as=this.name.refString,this.note&&(n.annotation=this.note),(e=this.document())===null||e===void 0||e.rememberToAddModelAnnotations(n),n}fixupJoinOn(e,r){let n=this.keyExpr.getExpression(e);if(r.primaryKey){let i=r.fields.find(s=>(s.as||s.name)===r.primaryKey);if(i)if(i.type===n.dataType){r.structRelationship={type:"one",matrixOperation:"left",onExpression:[{type:"field",path:`${this.name}.${r.primaryKey}`},"=",...n.value]};return}else this.log(`join_one: with type mismatch with primary key: ${n.dataType}/${i.type}`);else this.log(`join_one: Primary key '${i}' not found in source`)}else this.log("join_one: Cannot use with unless source has a primary key")}};Bc.KeyJoin=aY;var uY=class extends RT{constructor(e,r){super({name:e,sourceExpr:r}),this.name=e,this.sourceExpr=r,this.elementType="joinOnExpr",this.joinType="one",this.matrixOperation="left"}set joinOn(e){this.expr=e,this.has({on:e})}get joinOn(){return this.expr}fixupJoinOn(e,r){if(this.expr===void 0)return;let n=this.expr.getExpression(e);if(n.dataType!=="boolean"){this.log("join conditions must be boolean expressions");return}let i=r.structRelationship;(0,$Je.isJoinOn)(i)&&(i.onExpression=(0,jJe.compressExpr)(n.value))}structDef(){var e;let r=this.sourceExpr.getSource();if(!r)return this.sourceExpr.sqLog("Cannot create a source to join from"),bge.ErrorFactory.structDef;let n=r.structDef(),i="left";this.inExperiment("join_types",!0)&&(i=this.matrixOperation);let s={...n,structRelationship:{type:this.joinType,matrixOperation:i},location:this.location};return n.structSource.type==="query"?(s.name=this.name.refString,delete s.as):s.as=this.name.refString,this.note&&(s.annotation=this.note),(e=this.document())===null||e===void 0||e.rememberToAddModelAnnotations(s),s}};Bc.ExpressionJoin=uY;var lY=class extends zJe.DefinitionList{constructor(e){super(e),this.elementType="joinList",this.forceQueryClass=void 0,this.queryRefinementStage=VJe.LegalRefinementStage.Single}queryExecute(e){for(let r of this.list)e.inputFS.extendSource(r)}};Bc.Joins=lY});var cL=v(lL=>{"use strict";Object.defineProperty(lL,"__esModule",{value:!0});lL.FieldListEdit=void 0;var WJe=Et(),cY=class extends WJe.MalloyElement{constructor(e,r){super({refs:r}),this.edit=e,this.refs=r,this.elementType="fieldListEdit"}};lL.FieldListEdit=cY});var xL=v(fL=>{"use strict";Object.defineProperty(fL,"__esModule",{value:!0});fL.PrimaryKey=void 0;var YJe=Et(),fY=class extends YJe.MalloyElement{constructor(e){super({field:e}),this.field=e,this.elementType="primary key"}};fL.PrimaryKey=fY});var hL=v(dL=>{"use strict";Object.defineProperty(dL,"__esModule",{value:!0});dL.Views=void 0;var KJe=Wl(),xY=class extends KJe.DefinitionList{constructor(){super(...arguments),this.elementType="turtleDefList"}};dL.Views=xY});var mL=v(pL=>{"use strict";Object.defineProperty(pL,"__esModule",{value:!0});pL.TimezoneStatement=void 0;var XJe=Et(),dY=class extends XJe.MalloyElement{constructor(e){super(),this.tz=e,this.elementType="timezone",this.forceQueryClass=void 0,this.queryRefinementStage=void 0}get isValid(){try{return Intl.DateTimeFormat(void 0,{timeZone:this.tz}),!0}catch{return!1}}queryExecute(e){e.resultFS.setTimezone(this.tz)}};pL.TimezoneStatement=dY});var yL=v(xS=>{"use strict";Object.defineProperty(xS,"__esModule",{value:!0});xS.ModelAnnotation=xS.ObjectAnnotation=void 0;var JJe=Um(),ZJe=Et(),gL=class extends ZJe.MalloyElement{constructor(e){super(),this.notes=e,this.elementType="annotation",this.forceQueryClass=void 0,this.queryRefinementStage=void 0}queryExecute(){}};xS.ObjectAnnotation=gL;var hY=class extends gL{constructor(){super(...arguments),this.elementType="modelAnnotation"}getCompilerFlags(e,r){let n=JJe.Tag.annotationToTag({notes:this.notes},{prefix:/^##! /,extending:e});return n.log.forEach(i=>r.log(i)),n.tag}execute(e){e.annotation.notes===void 0&&(e.annotation.notes=[]),e.annotation.notes.push(...this.notes)}};xS.ModelAnnotation=hY});var Tge=v(EL=>{"use strict";Object.defineProperty(EL,"__esModule",{value:!0});EL.RenameSpaceField=void 0;var eZe=Ja(),pY=class extends eZe.SpaceField{constructor(e,r,n){super(),this.otherField=e,this.newName=r,this.location=n}fieldDef(){let e=this.otherField.fieldDef();if(e!==void 0)return{...e,as:this.newName,location:this.location}}typeDesc(){return this.otherField.typeDesc()}};EL.RenameSpaceField=pY});var AL=v(dS=>{"use strict";Object.defineProperty(dS,"__esModule",{value:!0});dS.Renames=dS.RenameField=void 0;var tZe=Tge(),Cge=Et(),rZe=Ja(),mY=class extends Cge.MalloyElement{constructor(e,r){super(),this.newName=e,this.oldName=r,this.elementType="renameField",this.has({oldName:r})}makeEntry(e){if(this.oldName.refString===this.newName){this.log("Can't rename field to itself");return}let r=this.oldName.getField(e);r.found?r.found instanceof rZe.SpaceField?e.renameEntry(this.oldName.refString,this.newName,new tZe.RenameSpaceField(r.found,this.newName,this.location)):this.log(`'${this.oldName}' cannot be renamed`):this.log(`Can't rename '${this.oldName}', no such field`)}};dS.RenameField=mY;var gY=class extends Cge.ListOf{constructor(){super(...arguments),this.elementType="renameFields"}};dS.Renames=gY});var EY=v(SL=>{"use strict";Object.defineProperty(SL,"__esModule",{value:!0});SL.RefinedSource=void 0;var nZe=Xe(),iZe=oL(),sZe=uS(),oZe=cS(),aZe=fS(),uZe=cL(),lZe=xL(),cZe=hL(),fZe=Rx(),xZe=mL(),dZe=yL(),hZe=AL(),yY=class extends fZe.Source{constructor(e,r){super({source:e,refinement:r}),this.source=e,this.refinement=r,this.elementType="refinedSource"}structDef(){return this.withParameters([])}withParameters(e){var r;let n,i,s=[],o=[],a;for(let d of this.refinement.list){if(d instanceof dZe.ObjectAnnotation)continue;let h=d;d instanceof lZe.PrimaryKey?(n&&(n.log("Primary key already defined"),d.log("Primary key redefined")),n=d):d instanceof uZe.FieldListEdit?(i&&(i.log("Too many accept/except statements"),d.log("Too many accept/except statements")),i=d):d instanceof sZe.DeclareFields||d instanceof aZe.Joins||d instanceof cZe.Views||d instanceof hZe.Renames?s.push(...d.list):d instanceof oZe.Filter?o.push(d):d instanceof xZe.TimezoneStatement?a=d.tz:h.log(`Unexpected source property: '${h.elementType}'`)}let u=structuredClone(this.source.structDef());n&&(u.primaryKey=n.field.name);let l=iZe.RefinedSpace.filteredFrom(u,i);if(a&&l.setTimezone(a),l.pushFields(...s),e&&l.addParameters(e),n){let d=n.field.getField(l);d.error&&n.log(d.error)}let c=l.structDef(),f=c.filterList||[],x=!1;for(let d of o)for(let h of d.list){let p=h.filterExpression(l);(0,nZe.expressionIsCalculation)(p.expressionType)?h.log("Can't use aggregate computations in top level filters"):(f.push(p),x=!0)}return x?{...c,filterList:f}:((r=this.document())===null||r===void 0||r.rememberToAddModelAnnotations(c),c)}};SL.RefinedSource=yY});var Ep=v(vL=>{"use strict";Object.defineProperty(vL,"__esModule",{value:!0});vL.SourceQueryElement=void 0;var pZe=Et(),AY=class t extends pZe.MalloyElement{constructor(){super(...arguments),this.errored=!1}getSource(){}getQuery(){}isSource(){return!1}sqLog(e){this.isErrorFree()&&this.log(e),this.errored=!0}isErrorFree(){if(this.errored)return!1;let e=!0;for(let r of this.walk())if(r instanceof t&&r.errored){e=!1;break}return e}};vL.SourceQueryElement=AY});var OT=v(_L=>{"use strict";Object.defineProperty(_L,"__esModule",{value:!0});_L.QuerySource=void 0;var mZe=Rx(),SY=class extends mZe.Source{constructor(e){super({query:e}),this.query=e,this.elementType="querySource"}structDef(){var e;let r=this.query.queryComp(!1),n={...r.outputStruct,structSource:{type:"query",query:r.query}};return(e=this.document())===null||e===void 0||e.rememberToAddModelAnnotations(n),n}};_L.QuerySource=SY});var _Y=v(bL=>{"use strict";Object.defineProperty(bL,"__esModule",{value:!0});bL.QueryBase=void 0;var gZe=R9(),yZe=Et(),vY=class extends yZe.MalloyElement{query(){let e=this.queryComp(!0).query;return{...e,pipeline:(0,gZe.detectAndRemovePartialStages)(e.pipeline,this)}}};bL.QueryBase=vY});var CL=v(TL=>{"use strict";Object.defineProperty(TL,"__esModule",{value:!0});TL.QueryArrow=void 0;var EZe=Xe(),AZe=Rx(),Rge=Vl(),SZe=_Y(),bY=class extends SZe.QueryBase{constructor(e,r){super({source:e,view:r}),this.source=e,this.view=r,this.elementType="arrow"}queryComp(e){let r,n,i;if(this.source instanceof AZe.Source){let l=e?this.source.structRef():this.source.structDef();n={type:"query",structRef:l,pipeline:[],location:this.location},r=(0,EZe.refIsStructDef)(l)?l:this.source.structDef(),i=new Rge.StaticSpace(r)}else{let l=this.source.queryComp(e);n=l.query,r=l.outputStruct,i=new Rge.StaticSpace(l.outputStruct)}let{pipeline:s,annotation:o,outputStruct:a,name:u}=this.view.pipelineComp(i);return{query:{...n,name:u,annotation:o,pipeline:[...n.pipeline,...s]},outputStruct:a,inputStruct:r}}};TL.QueryArrow=bY});var Oge=v(RL=>{"use strict";Object.defineProperty(RL,"__esModule",{value:!0});RL.SQArrow=void 0;var vZe=Ep(),_Ze=OT(),bZe=CL(),TY=class extends vZe.SourceQueryElement{constructor(e,r){super({applyTo:e,operation:r}),this.applyTo=e,this.operation=r,this.elementType="sq-arrow"}getQuery(){let e=this.applyTo.isSource()?this.applyTo.getSource():this.applyTo.getQuery();if(e===void 0){this.sqLog("Could not get LHS of arrow operation");return}let r=new bZe.QueryArrow(e,this.operation);return this.has({query:r}),r}getSource(){let e=this.getQuery();if(!e){this.sqLog("Couldn't comprehend query well enough to make a source");return}let r=new _Ze.QuerySource(e);return this.has({asSource:r}),r}};RL.SQArrow=TY});var $m=v(Ap=>{"use strict";Object.defineProperty(Ap,"__esModule",{value:!0});Ap.getStructFieldDef=Ap.getFinalStruct=Ap.opOutputStruct=void 0;var TZe=Pd(),CZe=iG(),RZe=Xe(),Dge=ea();function Nge(t,e,r){let n=Dge.ErrorFactory.isErrorStructDef(e);if((0,RZe.isPartialSegment)(r)&&(r={...r,type:"reduce"}),!n)try{return CZe.Segment.nextStructDef(e,r)}catch(i){t.log(`INTERNAL ERROR model/Segment.nextStructDef: ${i.message}
QUERY: ${(0,TZe.inspect)(r,{breakLength:72,depth:1/0})}`)}return{...Dge.ErrorFactory.structDef,dialect:e.dialect}}Ap.opOutputStruct=Nge;function OZe(t,e,r){for(let n of r)e=Nge(t,e,n);return e}Ap.getFinalStruct=OZe;function DZe(t,e){return t.fields.find(r=>(r.as||r.name)===e)}Ap.getStructFieldDef=DZe});var DL=v(OL=>{"use strict";Object.defineProperty(OL,"__esModule",{value:!0});OL.QueryRefine=void 0;var NZe=Vl(),FZe=$m(),wZe=_Y(),CY=class extends wZe.QueryBase{constructor(e,r){super({base:e,refinement:r}),this.base=e,this.refinement=r,this.elementType="query-refine"}queryComp(e){let r=this.base.queryComp(e),n=new NZe.StaticSpace(r.inputStruct),i=this.refinement.refine(n,r.query.pipeline,void 0);return{query:{...r.query,pipeline:i},outputStruct:(0,FZe.getFinalStruct)(this.refinement,r.inputStruct,i),inputStruct:r.inputStruct}}};OL.QueryRefine=CY});var hS=v(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.dateOffset=Oi.timestampOffset=Oi.timeResult=Oi.resolution=Oi.castDateToTimestamp=Oi.castTimestampToDate=Oi.castTo=Oi.timeOffset=void 0;var LZe=Xe(),Fge=ls();function IZe(t,e,r,n,i){return[{type:"dialect",function:"delta",base:{valueType:t,value:e},op:r,delta:n,units:i}]}Oi.timeOffset=IZe;function MZe(t,e,r,n=!1){let i={type:"dialect",function:"cast",dstType:t,expr:e,safe:n};return(0,LZe.isAtomicFieldType)(r)&&(i.srcType=r),[i]}Oi.castTo=MZe;function PZe(t,e=!1){return[{type:"dialect",function:"cast",dstType:"date",srcType:"timestamp",expr:t,safe:e}]}Oi.castTimestampToDate=PZe;function kZe(t,e=!1){return[{type:"dialect",function:"cast",dstType:"timestamp",srcType:"date",expr:t,safe:e}]}Oi.castDateToTimestamp=kZe;function BZe(t){switch(t){case"hour":case"minute":case"second":case"microsecond":case"millisecond":return"timestamp"}return"date"}Oi.resolution=BZe;function qZe(t,e){return e?{...t,timeframe:e}:t}Oi.timeResult=qZe;function UZe(t,e,r,n,i=!1){let s=["week","month","quarter","year"].includes(n),o=e==="+"?"_ADD":"_SUB",a=n.toUpperCase();if(s)return[`TIMESTAMP(DATETIME${o}(DATETIME(`,...t,"),INTERVAL ",...r,` ${a}))`];let u=i?["TIMESTAMP(",...t,")"]:t;return(0,Fge.compressExpr)([`TIMESTAMP${o}(`,...u,",INTERVAL ",...r,` ${a})`])}Oi.timestampOffset=UZe;function $Ze(t,e,r,n){let i=e==="+"?"_ADD":"_SUB",s=n.toUpperCase();return(0,Fge.compressExpr)([`DATE${i}(`,...t,",INTERVAL ",...r,` ${s})`])}Oi.dateOffset=$Ze});var DT=v(pS=>{"use strict";Object.defineProperty(pS,"__esModule",{value:!0});pS.NamedSource=pS.IsValueBlock=void 0;var NL=Xe(),jZe=Rx(),HZe=ea(),zZe=hS(),FL=Et(),wL=class extends FL.MalloyElement{constructor(e){super(),this.isMap=e,this.elementType="isValueBlock",this.has(e)}};pS.IsValueBlock=wL;var RY=class extends jZe.Source{constructor(e,r={}){super(),this.ref=e,this.elementType="namedSource",r&&Object.keys(r).length>0&&(this.isBlock=new wL(r),this.has({parameterValues:this.isBlock})),e instanceof FL.ModelEntryReference&&this.has({ref:e})}get refName(){return this.ref instanceof FL.ModelEntryReference?this.ref.name:this.ref}structRef(){if(this.isBlock)return this.structDef();let e=this.modelEntry(this.ref);return e&&!e.exported?this.structDef():this.refName}modelStruct(){let e=this.modelEntry(this.ref),r=e?.entry;if(!r){let n=`Undefined source '${this.refName}'`;(this.ref instanceof FL.ModelEntryReference?this.ref:this).log(n);return}if(r.type==="query"){this.log(`Cannot construct a source from a query '${this.refName}'`);return}else if(r.type==="function"){this.log(`Cannot construct a source from a function '${this.refName}'`);return}else if(r.type==="connection"){this.log(`Cannot construct a source from a connection '${this.refName}'`);return}else if((0,NL.isSQLBlockStruct)(r)&&r.declaredSQLBlock){this.log(`Must use 'from_sql()' for sql source '${this.refName}'`);return}return{...r}}structDef(){var e,r;let n=this.modelStruct();if(!n){let o=HZe.ErrorFactory.structDef,a=`${this.refName}-undefined`;return o.name=o.name+a,o.dialect=o.dialect+a,o}let i={...n.parameters},s=((e=this.isBlock)===null||e===void 0?void 0:e.isMap)||{};for(let[o,a]of Object.entries(s)){let u=i[o];if(!u)this.log(`Value given for undeclared parameter '${o}`);else if((0,NL.isValueParameter)(u))if(u.constant)a.log(`Cannot override constant parameter ${o}`);else{let l=a.constantValue(),c=l.value;l.dataType!==u.type&&(0,NL.isCastType)(u.type)&&(c=(0,zZe.castTo)(u.type,l.value,l.dataType,!0)),u.value=c}else u.condition=a.constantCondition(u.type).value}for(let o in n.parameters)(0,NL.paramHasValue)(i[o])||this.log(`Value not provided for required parameter ${o}`);return(r=this.document())===null||r===void 0||r.rememberToAddModelAnnotations(n),n}};pS.NamedSource=RY});var wge=v(LL=>{"use strict";Object.defineProperty(LL,"__esModule",{value:!0});LL.QueryHeadStruct=void 0;var GZe=Xe(),QZe=Rx(),VZe=DT(),OY=class extends QZe.Source{constructor(e){super(),this.fromRef=e,this.elementType="internalOnlyQueryHead"}structRef(){return this.fromRef}structDef(){if((0,GZe.refIsStructDef)(this.fromRef))return this.fromRef;let e=new VZe.NamedSource(this.fromRef);return this.has({exploreReference:e}),e.structDef()}};LL.QueryHeadStruct=OY});var FY=v(IL=>{"use strict";Object.defineProperty(IL,"__esModule",{value:!0});IL.QueryReference=void 0;var DY=ea(),WZe=Et(),YZe=wge(),KZe=Xe(),XZe=$m(),NY=class extends WZe.MalloyElement{constructor(e){super(),this.name=e,this.elementType="query-reference"}queryComp(e){let r=this.modelEntry(this.name),n=r?.entry,i=function(){return{inputStruct:DY.ErrorFactory.structDef,outputStruct:DY.ErrorFactory.structDef,query:DY.ErrorFactory.query}};if(!n)return this.log(`Reference to undefined query '${this.name.refString}'`),i();if(n.type==="query"){let s=new YZe.QueryHeadStruct(n.structRef);this.has({queryHead:s});let o=s.structDef(),a=(0,XZe.getFinalStruct)(this,o,n.pipeline);return{query:e||(0,KZe.refIsStructDef)(n.structRef)?n:{...n,structRef:o},outputStruct:a,inputStruct:o}}return this.log(`Illegal reference to '${this.name}', query expected`),i()}query(){return this.queryComp(!0).query}};IL.QueryReference=NY});var LY=v(ML=>{"use strict";Object.defineProperty(ML,"__esModule",{value:!0});ML.SQReference=void 0;var JZe=Ep(),ZZe=OT(),eet=DT(),Lge=FY(),wY=class extends JZe.SourceQueryElement{constructor(e){super({ref:e}),this.ref=e,this.elementType="sq-reference"}getQuery(){let e=this.ref.getNamed();if(e)if(e.type==="query"){let r=new Lge.QueryReference(this.ref);return this.has({query:r}),r}else this.sqLog(`Illegal reference to '${e.as||e.name}', query expected`);else this.ref.log(`Reference to undefined object '${this.ref.refString}'`),this.errored=!0}isSource(){var e;return((e=this.ref.getNamed())===null||e===void 0?void 0:e.type)==="struct"}getSource(){if(this.asSource)return this.asSource;let e=this.ref.getNamed();if(!e){this.ref.log(`Reference to undefined object '${this.ref.refString}'`),this.errored=!0;return}if(e.type==="query"){let r=new Lge.QueryReference(this.ref);this.asSource=new ZZe.QuerySource(r)}else if(e.type==="struct")this.asSource=new eet.NamedSource(this.ref);else{this.sqLog(`Expected '${this.ref.refString}' to be of type query or source, not '${e.type}'`);return}return this.has({asSource:this.asSource}),this.asSource}};ML.SQReference=wY});var Ige=v(PL=>{"use strict";Object.defineProperty(PL,"__esModule",{value:!0});PL.SQRefine=void 0;var tet=Ep(),ret=OT(),net=DL(),iet=LY(),IY=class extends tet.SourceQueryElement{constructor(e,r){super({toRefine:e,refine:r}),this.toRefine=e,this.refine=r,this.elementType="sq-refine"}getQuery(){if(this.toRefine.isSource()){this.toRefine instanceof iet.SQReference?this.sqLog(`Cannot add view refinements to '${this.toRefine.ref.refString}' because it is a source`):this.sqLog("Cannot add view refinements to a source");return}let e=this.toRefine.getQuery();if(e){let r=new net.QueryRefine(e,this.refine);return this.has({query:r}),r}}getSource(){let e=this.getQuery();if(e){let r=new ret.QuerySource(e);return this.has({queryAsSource:r}),r}}};PL.SQRefine=IY});var PY=v(kL=>{"use strict";Object.defineProperty(kL,"__esModule",{value:!0});kL.QueryRaw=void 0;var set=Xe(),oet=Et(),MY=class extends oet.MalloyElement{constructor(e){super({source:e}),this.source=e,this.elementType="query-raw"}queryComp(e){let r=e?this.source.structRef():this.source.structDef(),n=(0,set.refIsStructDef)(r)?r:this.source.structDef();return{query:{type:"query",structRef:r,pipeline:[{type:"raw",fields:[]}],location:this.location},outputStruct:n,inputStruct:n}}query(){return this.queryComp(!0).query}};kL.QueryRaw=MY});var kY=v(BL=>{"use strict";Object.defineProperty(BL,"__esModule",{value:!0});BL.makeSQLBlock=void 0;var aet=Xe(),uet=Fd();function cet(t,e){let r={name:`md5:/${e||"$default"}//${fet(t)}`,select:t};return e&&(r.connection=e),r}BL.makeSQLBlock=cet;function fet(t){let e=t.map(r=>(0,aet.isSQLFragment)(r)?r.sql:JSON.stringify(r));return(0,uet.generateHash)(e.join(";"))}});var qY=v(UL=>{"use strict";Object.defineProperty(UL,"__esModule",{value:!0});UL.SQLSource=void 0;var xet=kY(),det=Rx(),qL=ea(),BY=class extends det.Source{constructor(e,r){super(),this.connectionName=e,this.select=r,this.elementType="sqlSource",this.connectionNameInvalid=!1,this.has({connectionName:e,select:r})}sqlBlock(){return this.requestBlock||(this.requestBlock=(0,xet.makeSQLBlock)(this.select.sqlPhrases(),this.connectionName.refString)),this.requestBlock}structRef(){return this.structDef()}validateConnectionName(){var e;let r=this.modelEntry(this.connectionName),n=this.connectionName.refString;if(this.connectionNameInvalid)return!1;if(r===void 0)(e=this.namespace())===null||e===void 0||e.setEntry(n,{entry:{type:"connection",name:n},exported:!0},!0);else if(r.entry.type!=="connection")return this.connectionName.log(`${this.connectionName.refString} is not a connection`),this.connectionNameInvalid=!0,!1;return!0}needs(e){var r;if(!this.validateConnectionName())return;let n=super.needs(e);if(n)return n;let i=this.sqlBlock(),s=(r=this.translator())===null||r===void 0?void 0:r.root.sqlQueryZone;if(!s){this.log("Cant't look up schema for sql block");return}if(s.reference(i.name,this.location),s.getEntry(i.name).status==="reference")return{compileSQL:i,partialModel:this.select.containsQueries?e.modelDef():void 0}}structDef(){var e;if(!this.validateConnectionName())return qL.ErrorFactory.structDef;let r=(e=this.translator())===null||e===void 0?void 0:e.root.sqlQueryZone;if(!r)return this.log("Cant't look up schema for sql block"),qL.ErrorFactory.structDef;let n=this.sqlBlock();r.reference(n.name,this.location);let i=r.getEntry(n.name);if(i.status==="error"){let s=i.message.split(/\r?\n/);return this.select.log("Invalid SQL, "+s.join(`
    `)),qL.ErrorFactory.structDef}else if(i.status==="present"){let s=this.select.location,o={...i.value,fields:i.value.fields.map(l=>({...l,location:s})),location:this.location},a=this.document(),u=a?.currentModelAnnotation();return u&&(o.modelAnnotation=u),o}else return this.log("`connection_name.sql(...)` can currently only be used in top level source/query definitions"),qL.ErrorFactory.structDef}};UL.SQLSource=BY});var Mge=v($L=>{"use strict";Object.defineProperty($L,"__esModule",{value:!0});$L.SQSource=void 0;var het=Ep(),pet=PY(),met=qY(),UY=class extends het.SourceQueryElement{constructor(e){super({theSource:e}),this.theSource=e,this.elementType="sq-source"}isSource(){return!0}getSource(){return this.theSource}getQuery(){if(this.theSource instanceof met.SQLSource){let e=new pet.QueryRaw(this.theSource);return this.has({rawQuery:e}),e}else this.sqLog("This source cannot be used as a query")}};$L.SQSource=UY});var Pge=v(jL=>{"use strict";Object.defineProperty(jL,"__esModule",{value:!0});jL.SQExtend=void 0;var get=EY(),yet=Ep(),$Y=class extends yet.SourceQueryElement{constructor(e,r){super({sqSrc:e,extend:r}),this.sqSrc=e,this.extend=r,this.elementType="sq-extend"}getSource(){if(this.asSource)return this.asSource;let e=this.sqSrc.getSource();if(e)return this.asSource=new get.RefinedSource(e,this.extend),this.has({asSource:this.asSource}),this.asSource;this.sqLog("Could not compute source to extend")}isSource(){return!0}};jL.SQExtend=$Y});var HL=v(mS=>{"use strict";Object.defineProperty(mS,"__esModule",{value:!0});mS.isComparison=mS.Comparison=void 0;var jY;(function(t){t.Like="~",t.NotLike="!~",t.LessThan="<",t.LessThanOrEqualTo="<=",t.EqualTo="=",t.GreaterThan=">",t.GreaterThanOrEqualTo=">=",t.NotEqualTo="!="})(jY||(mS.Comparison=jY={}));function Eet(t){return Object.values(jY).includes(t)}mS.isComparison=Eet});var un=v(zL=>{"use strict";Object.defineProperty(zL,"__esModule",{value:!0});zL.FT=void 0;var Aet=Wf();function jm(t,e="scalar",r="constant"){return{dataType:t,expressionType:e,evalSpace:r}}var Ms=class t{static in(e,r){return e?r.find(i=>t.eq(i,e))!==void 0:!1}static eq(e,r){return r!==void 0&&e.dataType===r.dataType&&e.expressionType===r.expressionType}static typeEq(e,r,n=!1,i=!0){let s=e.dataType===r.dataType,o=n&&(e.dataType==="null"||r.dataType==="null"),a=i&&(e.dataType==="error"||r.dataType==="error");return s||o||a}static inspect(...e){return e.map(n=>{if(n){let i=n.dataType;return(0,Aet.expressionIsScalar)(n.expressionType)||(i=`${n.expressionType} ${i}`),i}return"undefined"}).join(",")}};zL.FT=Ms;Ms.nullT=jm("null");Ms.numberT=jm("number");Ms.stringT=jm("string");Ms.dateT=jm("date");Ms.timestampT=jm("timestamp");Ms.boolT=jm("boolean");Ms.anyAtomicT=[Ms.numberT,Ms.stringT,Ms.dateT,Ms.timestampT,Ms.boolT];Ms.aggregateBoolT=jm("boolean","aggregate")});var QL=v(GL=>{"use strict";Object.defineProperty(GL,"__esModule",{value:!0});GL.isGranularResult=void 0;function vet(t){return t.dataType==="date"||t.dataType==="timestamp"?t.timeframe!==void 0:!1}GL.isGranularResult=vet});var Ps=v(VL=>{"use strict";Object.defineProperty(VL,"__esModule",{value:!0});VL.errorFor=void 0;function _et(t){return{dataType:"error",expressionType:"scalar",value:[`_ERROR_${t.replace(/ /g,"_")}`],evalSpace:"constant"}}VL.errorFor=_et});var kge=v(gS=>{"use strict";Object.defineProperty(gS,"__esModule",{value:!0});gS.isEquality=gS.Equality=void 0;var HY;(function(t){t.Like="~",t.NotLike="!~",t.Equals="=",t.NotEquals="!="})(HY||(gS.Equality=HY={}));function bet(t){return Object.values(HY).includes(t)}gS.isEquality=bet});var ir=v(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.applyBinary=qc.getMorphicValue=qc.ExprDuration=qc.ExpressionDef=void 0;var Rn=Xe(),yS=Ps(),Ox=ls(),Hm=un(),WL=hS(),Tet=HL(),Cet=kge(),Uge=QL(),Ret=Et(),GY=class extends Error{},YL=class extends Ret.MalloyElement{constructor(){super(...arguments),this.legalChildTypes=Hm.FT.anyAtomicT}granular(){return!1}requestExpression(e){return this.getExpression(e)}defaultFieldName(){}typeCheck(e,r){return r.dataType!=="error"&&!Hm.FT.in(r,this.legalChildTypes)?(e.log(`'${this.elementType}' Can't use type ${Hm.FT.inspect(r)}`),!1):!0}apply(e,r,n){return Hge(e,n,r,this)}};qc.ExpressionDef=YL;var NT=class extends YL{constructor(e,r){super({n:e}),this.n=e,this.timeframe=r,this.elementType="duration",this.legalChildTypes=[Hm.FT.timestampT,Hm.FT.dateT]}apply(e,r,n){let i=n.getExpression(e);if(this.typeCheck(this,i),(0,Rn.isTimeFieldType)(i.dataType)&&(r==="+"||r==="-")){let s=this.n.getExpression(e);if(!Hm.FT.typeEq(s,Hm.FT.numberT))return this.log(`Duration units needs number not '${s.dataType}`),(0,yS.errorFor)("illegal unit expression");let o;if((0,Uge.isGranularResult)(i)&&i.timeframe===this.timeframe&&(o=i.timeframe),i.dataType==="timestamp"){let a=(0,WL.timeOffset)("timestamp",i.value,r,s.value,this.timeframe);return(0,WL.timeResult)({dataType:"timestamp",expressionType:(0,Rn.maxExpressionType)(i.expressionType,s.expressionType),evalSpace:(0,Rn.mergeEvalSpaces)(i.evalSpace,s.evalSpace),value:a},o)}return(0,Rn.isDateUnit)(this.timeframe)?(0,WL.timeResult)({dataType:"date",expressionType:(0,Rn.maxExpressionType)(i.expressionType,s.expressionType),evalSpace:(0,Rn.mergeEvalSpaces)(i.evalSpace,s.evalSpace),value:(0,WL.timeOffset)("date",i.value,r,s.value,this.timeframe)},o):(this.log(`Cannot offset date by ${this.timeframe}`),(0,yS.errorFor)("ofsset date error"))}return super.apply(e,r,n)}getExpression(e){return{dataType:"duration",expressionType:"scalar",value:["__ERROR_DURATION_IS_NOT_A_VALUE__"],evalSpace:"constant"}}};qc.ExprDuration=NT;function Bge(t,e){return t.dataType===e?t.value:t.morphic&&t.morphic[e]}function Oet(t,e){if(t.dataType===e)return t;if(t.morphic&&t.morphic[e])return{...t,dataType:e,value:t.morphic[e]}}qc.getMorphicValue=Oet;function $ge(t,e,r,n){let i=(0,Rn.isTimeFieldType)(e.dataType),s=(0,Rn.isTimeFieldType)(n.dataType);if(i&&s)if(e.dataType!==n.dataType){let o=Bge(e,"timestamp"),a=Bge(n,"timestamp");if(o&&a)return(0,Ox.compose)(o,r,a)}else return(0,Ox.compose)(e.value,r,n.value);if((i||s)&&e.dataType!=="null"&&n.dataType!=="null")return t.log(`Cannot compare a ${e.dataType} to a ${n.dataType}`),["false"]}function qge(t,e){if(t.dataType==="string"){if(e.dataType==="regular expression")return[{type:"dialect",function:"regexpMatch",expr:t.value,regexp:e.value}]}else if(e.dataType==="string"&&t.dataType==="regular expression")return[{type:"dialect",function:"regexpMatch",expr:e.value,regexp:t.value}]}function Det(t,e,r){let n=e==="!="||e==="!~";if(t.dataType==="null"||r.dataType==="null"){let i=n?" NOT":"";return t.dataType!=="null"?[...t.value,` IS${i} NULL`]:r.dataType!=="null"?[...r.value,`IS${i} NULL`]:[n?"false":"true"]}}function Net(t,e,r,n){let i=e.getExpression(t),s=n.getExpression(t),o=FT("boolean",i,s);if(o)return o;if(i.dataType==="unsupported"||s.dataType==="unsupported"){let l=i.dataType==="null"||s.dataType==="null",c=i.rawType&&i.rawType===s.rawType;if(!(l||c)){let f=wT(e,i,n,s);if(f)return{...f,dataType:"boolean"}}}let u=$ge(e,i,r,s)||(0,Ox.compose)(i.value,r,s.value);if(i.dataType!=="error"&&s.dataType!=="error")switch(r){case"~":case"!~":{if(i.dataType==="string"&&s.dataType==="string")u=(0,Ox.compose)(i.value,"LIKE",s.value);else{let l=qge(i,s);if(l===void 0)throw new GY("Incompatible types for match('~') operator");u=l}u=(0,Ox.nullsafeNot)(u,r);break}case"=":case"!=":{let l=Det(i,r,s);l?u=l:u=(0,Ox.nullsafeNot)(qge(i,s)||(0,Ox.compose)(i.value,"=",s.value),r);break}}return{dataType:"boolean",expressionType:(0,Rn.maxExpressionType)(i.expressionType,s.expressionType),evalSpace:(0,Rn.mergeEvalSpaces)(i.evalSpace,s.evalSpace),value:u}}function Fet(t,e,r,n){let i=e.getExpression(t),s=n.getExpression(t),o=FT("boolean",i,s);if(o)return o;let a=(0,Rn.maxExpressionType)(i.expressionType,s.expressionType),u=wT(e,i,n,s);if(u)return{...u,dataType:"boolean"};let l=$ge(e,i,r,s)||(0,Ox.compose)(i.value,r,s.value);return{dataType:"boolean",expressionType:a,evalSpace:(0,Rn.mergeEvalSpaces)(i.evalSpace,s.evalSpace),value:l}}function zY(t,...e){return e.includes(t)}function wet(t,...e){for(let r of e)if(r.dataType!==t)return!1;return!0}function jge(t,e,r,n){let i=e.getExpression(t),s=n.getExpression(t),o=FT("number",i,s);if(o)return o;let a=wT(e,i,n,s);if(a)return a;let u=(0,Rn.maxExpressionType)(i.expressionType,s.expressionType);return wet("number",i,s)?{dataType:"number",expressionType:u,value:(0,Ox.compose)(i.value,r,s.value),evalSpace:(0,Rn.mergeEvalSpaces)(i.evalSpace,s.evalSpace)}:(e.log(`Non numeric('${i.dataType},${s.dataType}') value with '${r}'`),(0,yS.errorFor)("numbers required"))}function Let(t,e,r,n){let i=e.getExpression(t),s=n.getExpression(t),o=wT(e,i,n,s);if(o)return o;let a=(0,Rn.isTimeFieldType)(i.dataType),u=FT(a?"error":"number",i,s);if(u)return u;if(a){let l=n;if(s.dataType!=="duration")if((0,Uge.isGranularResult)(i))l=new NT(n,i.timeframe);else if(i.dataType==="date")l=new NT(n,"day");else return e.log(`Can not offset time by '${s.dataType}'`),(0,yS.errorFor)(`time plus ${s.dataType}`);return l.apply(t,r,e)}return jge(t,e,r,n)}function Hge(t,e,r,n){if((0,Cet.isEquality)(r))return Net(t,e,r,n);if((0,Tet.isComparison)(r))return Fet(t,e,r,n);if(zY(r,"+","-"))return Let(t,e,r,n);if(zY(r,"*","%"))return jge(t,e,r,n);if(zY(r,"/")){let i=e.getExpression(t),s=n.getExpression(t),o=wT(e,i,n,s);if(o)return e.log("Cannot operate with unsupported type"),o;let a=FT("number",i,s);if(a)return a;if(i.dataType!=="number")e.log("Numerator for division must be a number");else if(s.dataType!=="number")n.log("Denominator for division must be a number");else{let u={type:"dialect",function:"div",numerator:i.value,denominator:s.value};return{dataType:"number",expressionType:(0,Rn.maxExpressionType)(i.expressionType,s.expressionType),evalSpace:(0,Rn.mergeEvalSpaces)(i.evalSpace,s.evalSpace),value:[u]}}return(0,yS.errorFor)("divide type mismatch")}return e.log(`Cannot use ${r} operator here`),(0,yS.errorFor)("applybinary bad operator")}qc.applyBinary=Hge;function FT(t,...e){if(e.some(r=>r.dataType==="error"))return{dataType:t,expressionType:(0,Rn.maxOfExpressionTypes)(e.map(r=>r.expressionType)),value:["'cascading error'"],evalSpace:(0,Rn.mergeEvalSpaces)(...e.map(r=>r.evalSpace))}}function wT(t,e,r,n){let i={dataType:e.dataType,expressionType:(0,Rn.maxExpressionType)(e.expressionType,n.expressionType),value:["'unsupported operation'"],evalSpace:(0,Rn.mergeEvalSpaces)(e.evalSpace,n.evalSpace)};if(e.dataType==="unsupported")return t.log("Unsupported type not allowed in expression"),{...i,dataType:n.dataType};if(n.dataType==="unsupported")return r.log("Unsupported type not allowed in expression"),i}});var XL=v(KL=>{"use strict";Object.defineProperty(KL,"__esModule",{value:!0});KL.BinaryBoolean=void 0;var zge=Xe(),Iet=Ps(),Met=un(),Pet=ir(),ket=ls(),QY=class extends Pet.ExpressionDef{constructor(e,r,n){super({left:e,right:n}),this.left=e,this.op=r,this.right=n,this.elementType="abstract boolean binary",this.legalChildTypes=[Met.FT.boolT]}getExpression(e){let r=this.left.getExpression(e),n=this.right.getExpression(e);if(this.typeCheck(this.left,r)&&this.typeCheck(this.right,n)){let i=(0,zge.mergeEvalSpaces)(r.evalSpace,n.evalSpace);return{dataType:"boolean",expressionType:(0,zge.maxExpressionType)(r.expressionType,n.expressionType),evalSpace:i,value:(0,ket.compose)(r.value,this.op,n.value)}}return(0,Iet.errorFor)("logial required boolean")}};KL.BinaryBoolean=QY});var ZL=v(JL=>{"use strict";Object.defineProperty(JL,"__esModule",{value:!0});JL.ExprTime=void 0;var Bet=Xe(),qet=ls(),Uet=ir(),VY=class t extends Uet.ExpressionDef{constructor(e,r,n="scalar"){super(),this.elementType="timestampOrDate",this.elementType=e,this.translationValue={dataType:e,expressionType:n,value:typeof r=="string"?[r]:r,evalSpace:"constant"}}getExpression(e){return this.translationValue}static fromValue(e,r){let n=r.value;if(e!==r.dataType){let i={type:"dialect",function:"cast",safe:!1,dstType:e,expr:r.value};(0,Bet.isTimeFieldType)(r.dataType)&&(i.srcType=r.dataType),n=(0,qet.compressExpr)([i])}return new t(e,n,r.expressionType)}};JL.ExprTime=VY});var ES=v(eI=>{"use strict";Object.defineProperty(eI,"__esModule",{value:!0});eI.Range=void 0;var Gge=Xe(),$et=Ps(),jet=ir(),Het=ls(),WY=class extends jet.ExpressionDef{constructor(e,r){super({first:e,last:r}),this.first=e,this.last=r,this.elementType="range"}apply(e,r,n){switch(r){case"=":case"!=":{let i=r==="="?">=":"<",s=r==="="?"and":"or",o=r==="="?"<":">=",a=this.first.apply(e,i,n),u=this.last.apply(e,o,n);return{dataType:"boolean",expressionType:(0,Gge.maxExpressionType)(a.expressionType,u.expressionType),evalSpace:(0,Gge.mergeEvalSpaces)(a.evalSpace,u.evalSpace),value:(0,Het.compose)(a.value,s,u.value)}}case">":return this.last.apply(e,">=",n);case">=":return this.first.apply(e,">=",n);case"<":return this.first.apply(e,"<",n);case"<=":return this.last.apply(e,"<",n)}throw new Error("mysterious error in range computation")}requestExpression(e){}getExpression(e){return this.log("A Range is not a value"),(0,$et.errorFor)("a range is not a value")}};eI.Range=WY});var XY=v(rI=>{"use strict";Object.defineProperty(rI,"__esModule",{value:!0});rI.ExprGranularTime=void 0;var YY=Xe(),zet=Ps(),Qge=un(),Vge=hS(),Get=ir(),tI=ZL(),Wge=ES(),KY=class extends Get.ExpressionDef{constructor(e,r,n){super({expr:e}),this.expr=e,this.units=r,this.truncate=n,this.elementType="granularTime",this.legalChildTypes=[Qge.FT.timestampT,Qge.FT.dateT]}granular(){return!0}getExpression(e){let r=this.units,n=this.expr.getExpression(e);if((0,YY.isTimeFieldType)(n.dataType)){let s={...n,dataType:n.dataType,timeframe:r};return this.truncate&&(s.value=[{type:"dialect",function:"trunc",expr:{value:n.value,valueType:n.dataType},units:r}]),s}n.dataType!=="error"&&this.log(`Cannot do time truncation on type '${n.dataType}'`);let i=n.dataType==="error"?(0,YY.isDateUnit)(r)?"date":"timestamp":n.dataType;return{...n,dataType:i,value:(0,zet.errorFor)("granularity typecheck").value,evalSpace:"constant"}}apply(e,r,n){return this.getRange(e).apply(e,r,n)}getRange(e){let r=this.getExpression(e);if(r.dataType==="timestamp"){let o=tI.ExprTime.fromValue("timestamp",r),a=new tI.ExprTime("timestamp",(0,Vge.timeOffset)("timestamp",r.value,"+",(0,YY.mkExpr)`1`,this.units),r.expressionType);return new Wge.Range(o,a)}let n=new tI.ExprTime("date",r.value,r.expressionType),i=(0,Vge.timeOffset)("date",r.value,"+",["1"],this.units),s=new tI.ExprTime("date",i,r.expressionType);return new Wge.Range(n,s)}};rI.ExprGranularTime=KY});var ZY=v(nI=>{"use strict";Object.defineProperty(nI,"__esModule",{value:!0});nI.ExprCompare=void 0;var Tr=un(),Qet=QL(),Vet=XL(),Wet=XY(),Yet={"~":[Tr.FT.stringT],"!~":[Tr.FT.stringT],"<":[Tr.FT.numberT,Tr.FT.stringT,Tr.FT.dateT,Tr.FT.timestampT],"<=":[Tr.FT.numberT,Tr.FT.stringT,Tr.FT.dateT,Tr.FT.timestampT],"=":[Tr.FT.numberT,Tr.FT.stringT,Tr.FT.dateT,Tr.FT.timestampT],"!=":[Tr.FT.numberT,Tr.FT.stringT,Tr.FT.dateT,Tr.FT.timestampT],">=":[Tr.FT.numberT,Tr.FT.stringT,Tr.FT.dateT,Tr.FT.timestampT],">":[Tr.FT.numberT,Tr.FT.stringT,Tr.FT.dateT,Tr.FT.timestampT]},JY=class extends Vet.BinaryBoolean{constructor(e,r,n){super(e,r,n),this.elementType="a<=>b",this.legalChildTypes=Yet[r]}getExpression(e){if(!this.right.granular()){let r=this.right.requestExpression(e);if(r&&(0,Qet.isGranularResult)(r))return new Wet.ExprGranularTime(this.right,r.timeframe,!1).apply(e,this.op,this.left)}return this.right.apply(e,this.op,this.left)}};nI.ExprCompare=JY});var Yge=v(iI=>{"use strict";Object.defineProperty(iI,"__esModule",{value:!0});iI.Apply=void 0;var Ket=HL(),Xet=ZY(),eK=class extends Xet.ExprCompare{constructor(e,r){super(e,Ket.Comparison.EqualTo,r),this.left=e,this.right=r,this.elementType="apply"}};iI.Apply=eK});var oI=v(sI=>{"use strict";Object.defineProperty(sI,"__esModule",{value:!0});sI.BinaryNumeric=void 0;var Jet=un(),Zet=ir(),tK=class extends Zet.ExpressionDef{constructor(e,r,n){super({left:e,right:n}),this.left=e,this.op=r,this.right=n,this.elementType="numeric binary abstract",this.legalChildTypes=[Jet.FT.numberT]}getExpression(e){return this.right.apply(e,this.op,this.left)}};sI.BinaryNumeric=tK});var Kge=v(aI=>{"use strict";Object.defineProperty(aI,"__esModule",{value:!0});aI.Boolean=void 0;var ett=ir(),ttt=un(),rK=class extends ett.ExpressionDef{constructor(e){super(),this.value=e,this.elementType="boolean literal"}getExpression(){return{...ttt.FT.boolT,value:[this.value]}}};aI.Boolean=rK});var Xge=v(uI=>{"use strict";Object.defineProperty(uI,"__esModule",{value:!0});uI.ExprAddSub=void 0;var rtt=oI(),nK=class extends rtt.BinaryNumeric{constructor(){super(...arguments),this.elementType="+-"}};uI.ExprAddSub=nK});var Zge=v(lI=>{"use strict";Object.defineProperty(lI,"__esModule",{value:!0});lI.ReferenceField=void 0;var iK=Xe(),Jge=Ja(),sK=class extends Jge.SpaceField{constructor(e,r){super(),this.fieldRef=e,this.inFS=r,this.didLookup=!1}get referenceTo(){return this.didLookup||(this.memoReference=this.inFS.lookup(this.fieldRef.list).found,this.didLookup=!0),this.memoReference}getQueryFieldDef(e){if(!this.queryFieldDef){let r=this.fieldRef.getField(e);r.error&&this.fieldRef.log(r.error),this.queryFieldDef=this.maybeAnnotate()}return this.queryFieldDef}typeDesc(){if(this.memoTypeDesc)return this.memoTypeDesc;let e=this.referenceTo;return e?(this.memoTypeDesc=e.typeDesc(),this.memoTypeDesc):{dataType:"error",expressionType:"scalar",evalSpace:"input"}}maybeAnnotate(){let e=this.fieldRef.refString,r=this.referenceTo;if(r instanceof Jge.SpaceField&&r.haveFieldDef&&typeof r.haveFieldDef!="string"){let n=r.haveFieldDef;if((0,iK.isFilteredAliasedName)(n))return n;let i=this.fieldRef.note;if(n.annotation||i){let s=i||{};if(n.annotation&&(s.inherits=n.annotation),this.fieldRef.list.length>1){if((0,iK.isAtomicFieldType)(n.type)){let o={name:this.fieldRef.list[this.fieldRef.list.length-1].refString,type:n.type,e:[{type:"field",path:e}],annotation:s};return(0,iK.hasExpression)(n)&&(o.expressionType=n.expressionType),o}return e}return{...n,annotation:s}}}return e}};lI.ReferenceField=sK});var oK=v(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.typecheckGroupBy=Di.typecheckAggregate=Di.typecheckCalculate=Di.typecheckDeclare=Di.typecheckMeasure=Di.typecheckDimension=Di.typecheckIndex=Di.typecheckProject=void 0;var ln=Wf();function ntt(t,e){if(t.dataType==="turtle"||!(0,ln.expressionIsScalar)(t.expressionType)){let r,n;if(t.dataType==="turtle")r="a nest",n="a view";else if((0,ln.expressionIsAnalytic)(t.expressionType))r="a calculate",n="an analytic";else if((0,ln.expressionIsAggregate)(t.expressionType))r="an aggregate",n="an aggregate";else throw new Error(`Unexpected expression type ${t.expressionType} not handled here`);e.log(`Cannot use ${n} field in a select operation, did you mean to use ${r} operation instead?`)}}Di.typecheckProject=ntt;function itt(t,e){if(t.dataType==="turtle"||!(0,ln.expressionIsScalar)(t.expressionType)){let r;if(t.dataType==="turtle")r="a view";else if((0,ln.expressionIsAnalytic)(t.expressionType))r="an analytic";else if((0,ln.expressionIsAggregate)(t.expressionType))r="an aggregate";else throw new Error(`Unexpected expression type ${t.expressionType} not handled here`);e.log(`Cannot use ${r} field in an index operation`)}}Di.typecheckIndex=itt;function stt(t,e){if(!(0,ln.expressionIsScalar)(t.expressionType))if((0,ln.expressionIsAggregate)(t.expressionType))e.log("Cannot use an aggregate field in a dimension declaration, did you mean to use a measure declaration instead?");else if((0,ln.expressionIsAnalytic)(t.expressionType))e.log("Cannot use an analytic field in a dimension declaration");else throw new Error(`Unexpected expression type ${t.expressionType} not handled here`)}Di.typecheckDimension=stt;function ott(t,e){if(!(0,ln.expressionIsAggregate)(t.expressionType))if((0,ln.expressionIsScalar)(t.expressionType))e.log("Cannot use a scalar field in a measure declaration, did you mean to use a dimension declaration instead?");else if((0,ln.expressionIsAnalytic)(t.expressionType))e.log("Cannot use an analytic field in a measure declaration");else throw new Error(`Unexpected expression type ${t.expressionType} not handled here`)}Di.typecheckMeasure=ott;function att(t,e){t.dataType==="turtle"?e.log("Query fields cannot be used in a declare block"):(0,ln.expressionIsAnalytic)(t.expressionType)&&e.log("Analytic expressions can not be used in a declare block")}Di.typecheckDeclare=att;function utt(t,e){if(t.dataType==="turtle"||!(0,ln.expressionIsAnalytic)(t.expressionType)){let r,n;if(t.dataType==="turtle")r="a nest",n="a view";else if((0,ln.expressionIsAggregate)(t.expressionType))r="an aggregate",n="an aggregate";else if((0,ln.expressionIsScalar)(t.expressionType))r="a group_by or select",n="a scalar";else throw new Error(`Unexpected expression type ${t.expressionType} not handled here`);e.log(`Cannot use ${n} field in a calculate operation, did you mean to use ${r} operation instead?`)}}Di.typecheckCalculate=utt;function ltt(t,e){if(t.dataType==="turtle"||!(0,ln.expressionIsAggregate)(t.expressionType)){let r,n;if(t.dataType==="turtle")r="a nest",n="a view";else if((0,ln.expressionIsAnalytic)(t.expressionType))r="a calculate",n="an analytic";else if((0,ln.expressionIsScalar)(t.expressionType))r="a group_by or select",n="a scalar";else throw new Error(`Unexpected expression type ${t} not handled here`);e.log(`Cannot use ${n} field in an aggregate operation, did you mean to use ${r} operation instead?`)}}Di.typecheckAggregate=ltt;function ctt(t,e){if(t.dataType==="turtle"||!(0,ln.expressionIsScalar)(t.expressionType)){let r,n;if(t.dataType==="turtle")r="a nest",n="a view";else if((0,ln.expressionIsAnalytic)(t.expressionType))r="a calculate",n="an analytic";else if((0,ln.expressionIsAggregate)(t.expressionType))r="an aggregate",n="an aggregate";else throw new Error(`Unexpected expression type ${t.expressionType} not handled here`);e.log(`Cannot use ${n} field in a group_by operation, did you mean to use ${r} operation instead?`)}}Di.typecheckGroupBy=ctt});var AS=v(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.FieldReferences=Jt.WildcardFieldReference=Jt.ViewOrScalarFieldReference=Jt.DimensionFieldReference=Jt.MeasureFieldReference=Jt.DeclareFieldReference=Jt.ProjectFieldReference=Jt.GroupByFieldReference=Jt.AggregateFieldReference=Jt.IndexFieldReference=Jt.CalculateFieldReference=Jt.ExpressionFieldReference=Jt.AcceptExceptFieldReference=Jt.FieldReference=void 0;var ftt=Zge(),xtt=Wl(),e3e=Et(),t3e=kc(),Sp=oK(),ta=class extends e3e.ListOf{constructor(e){super(e),this.isNoteableObj=!0,this.extendNote=t3e.extendNoteMethod}makeEntry(e){let r=this.outputName;if(e.entry(r))this.log(`Output already has a field named '${r}'`);else{let n=e.isQueryFieldSpace()?e.inputSpace():e;e.newEntry(r,this,new ftt.ReferenceField(this,n))}}get refString(){return this.list.map(e=>e.refString).join(".")}get outputName(){return this.list[this.list.length-1].refString}get sourceString(){if(this.list.length>1)return this.list.slice(0,-1).map(e=>e.refString).join(".")}get nameString(){return this.list[this.list.length-1].refString}getField(e){let r=e.lookup(this.list);if(r.found){let n=r.found.typeDesc();this.typecheck(n)}return r}};Jt.FieldReference=ta;var aK=class extends ta{constructor(){super(...arguments),this.elementType="acceptExceptFieldReference"}typecheck(){}};Jt.AcceptExceptFieldReference=aK;var uK=class extends ta{constructor(){super(...arguments),this.elementType="expressionFieldReference"}typecheck(){}};Jt.ExpressionFieldReference=uK;var lK=class extends ta{constructor(){super(...arguments),this.elementType="calculateFieldReference"}typecheck(e){(0,Sp.typecheckCalculate)(e,this)}};Jt.CalculateFieldReference=lK;var cK=class extends ta{constructor(){super(...arguments),this.elementType="indexFieldReference"}typecheck(e){(0,Sp.typecheckIndex)(e,this)}};Jt.IndexFieldReference=cK;var fK=class extends ta{constructor(){super(...arguments),this.elementType="aggregateFieldReference"}typecheck(e){(0,Sp.typecheckAggregate)(e,this)}};Jt.AggregateFieldReference=fK;var xK=class extends ta{constructor(){super(...arguments),this.elementType="groupByFieldReference"}typecheck(e){(0,Sp.typecheckGroupBy)(e,this)}};Jt.GroupByFieldReference=xK;var dK=class extends ta{constructor(){super(...arguments),this.elementType="projectFieldReference"}typecheck(e){(0,Sp.typecheckProject)(e,this)}};Jt.ProjectFieldReference=dK;var hK=class extends ta{constructor(){super(...arguments),this.elementType="declareFieldReference"}typecheck(e){(0,Sp.typecheckDeclare)(e,this)}};Jt.DeclareFieldReference=hK;var pK=class extends ta{constructor(){super(...arguments),this.elementType="measureFieldReference"}typecheck(e){(0,Sp.typecheckMeasure)(e,this)}};Jt.MeasureFieldReference=pK;var mK=class extends ta{constructor(){super(...arguments),this.elementType="dimensionFieldReference"}typecheck(e){(0,Sp.typecheckDimension)(e,this)}};Jt.DimensionFieldReference=mK;var gK=class extends ta{constructor(){super(...arguments),this.elementType="viewOrScalarFieldReference"}typecheck(e){}};Jt.ViewOrScalarFieldReference=gK;var yK=class extends e3e.MalloyElement{constructor(e){super(),this.joinPath=e,this.elementType="wildcardFieldReference",this.isNoteableObj=!0,this.extendNote=t3e.extendNoteMethod,this.except=new Set,this.has({joinPath:e})}getFieldDef(){throw this.internalError("fielddef request from wildcard reference")}get refString(){return this.joinPath?`${this.joinPath.refString}.*`:"*"}};Jt.WildcardFieldReference=yK;var EK=class extends xtt.DefinitionList{constructor(e){super(e),this.elementType="fieldReferenceList"}};Jt.FieldReferences=EK});var vK=v(cI=>{"use strict";Object.defineProperty(cI,"__esModule",{value:!0});cI.ExprIdReference=void 0;var AK=Xe(),dtt=Ps(),htt=Y9(),ptt=ir(),SK=class extends ptt.ExpressionDef{constructor(e){super(),this.fieldReference=e,this.elementType="ExpressionIdReference",this.has({fieldPath:e})}get refString(){return this.fieldReference.refString}getExpression(e){let r=this.fieldReference.getField(e);if(r.found){let n=r.found.typeDesc();if(r.isOutputField)return{...n,evalSpace:n.evalSpace==="constant"?"constant":"output",value:[{type:"outputField",name:this.refString}]};let i=[{type:r.found.refType,path:this.refString}],s=(0,AK.expressionIsAggregate)(n.expressionType)?"output":n.evalSpace;return{...n,value:i,evalSpace:s}}return this.log(r.error),(0,dtt.errorFor)(r.error)}apply(e,r,n){let i=this.fieldReference.getField(e).found;if(i instanceof htt.SpaceParam){let s=i.parameter();if((0,AK.isConditionParameter)(s)){let o=n.getExpression(e);return{dataType:"boolean",expressionType:o.expressionType,evalSpace:(0,AK.mergeEvalSpaces)(o.evalSpace,"input"),value:[{type:"apply",value:o.value,to:[{type:"parameter",path:this.refString}]}]}}}return super.apply(e,r,n)}};cI.ExprIdReference=SK});var zm=v(fI=>{"use strict";Object.defineProperty(fI,"__esModule",{value:!0});fI.ExprAggregateFunction=void 0;var r3e=Xe(),mtt=Fd(),LT=Ps(),gtt=Vl(),ytt=CT(),Ett=un(),Att=AS(),Stt=ir(),vtt=Ja(),_tt=vK(),_K=class extends Stt.ExpressionDef{constructor(e,r,n){super(),this.func=e,this.legalChildTypes=[Ett.FT.numberT],this.elementType=e,this.explicitSource=n,r&&(this.expr=r,this.has({expr:r}))}returns(e){return"number"}getExpression(e){var r,n;let i=e.isQueryFieldSpace()?e.inputSpace():e,s=this.expr,o=(r=this.expr)===null||r===void 0?void 0:r.getExpression(i),a=(n=this.source)===null||n===void 0?void 0:n.refString,u=[];if(this.source){let c=this.source.getField(i);if(c.found){u=c.relationship;let f=c.found,x=f.typeDesc();if((0,r3e.isAtomicFieldType)(x.dataType)){s=this.source,o={dataType:x.dataType,expressionType:x.expressionType,value:[x.evalSpace==="output"?{type:"outputField",name:this.source.refString}:{type:"field",path:this.source.refString}],evalSpace:x.evalSpace},a=this.source.sourceString;let d=this.getJoinUsage(i),h=d.map(m=>m.map(g=>g.name).join("."));h.length>0&&h.slice(1).every(m=>m===h[0])&&(a=h[0],u=d[0])}else if(!(f instanceof ytt.StructSpaceFieldBase))return this.log(`Aggregate source cannot be a ${x.dataType}`),(0,LT.errorFor)(`Aggregate source cannot be a ${x.dataType}`)}else return this.log(`Reference to undefined value ${this.source.refString}`),(0,LT.errorFor)(`Reference to undefined value ${this.source.refString}`)}if(o===void 0)return this.log("Missing expression for aggregate function"),(0,LT.errorFor)("agggregate without expression");if((0,r3e.expressionIsAggregate)(o.expressionType))return this.log("Aggregate expression cannot be aggregate"),(0,LT.errorFor)("reagggregate");if(!(o.dataType==="error")){let c=this.getJoinUsage(i),f=this.source!==void 0||this.explicitSource;if(s&&!(!this.source&&c.every(d=>d.length===0))&&!this.isSymmetricFunction()){let d=TK(u,c),h=CK(this.elementType,d),p=f?h:"Join path is required for this calculation";if(p){let m=btt(p,c,s,this.elementType);this.log(m,h?"error":"warn")}}}if(this.typeCheck(this.expr||this,{...o,expressionType:"scalar"})){let c={type:"aggregate",function:this.func,e:o.value};return a&&(c.structPath=a),{dataType:this.returns(o),expressionType:"aggregate",value:[c],evalSpace:"output"}}return(0,LT.errorFor)("aggregate type check")}isSymmetricFunction(){return!0}getJoinUsage(e){let r=[];if(this.source&&this.source.getField(e).found){let i=[{type:"field",path:this.source.refString}];r.push(...bK(e,i))}if(this.expr){let n=this.expr.getExpression(e).value;r.push(...bK(e,n))}return r}};fI.ExprAggregateFunction=_K;function bK(t,e){let r=[],n=(i,s)=>{let o=s.split("."),a=o[0],u=o.slice(1),l=i.entry(a);if(l===void 0)throw new Error(`Invalid field lookup ${a}`);if(l instanceof gtt.StructSpaceField&&u.length>0){let c=n(l.fieldSpace,u.join("."));return{...c,relationship:[{name:a,structRelationship:l.structRelationship},...c.relationship]}}else if(l instanceof vtt.SpaceField){if(u.length!==0)throw new Error(`${a} cannot contain a ${u.join(".")}`);let c=l.fieldDef();if(c)return{fs:i,def:c,relationship:[]};throw new Error("No field def")}else throw new Error("expected a field def or struct")};return(0,mtt.exprWalk)(e,i=>{if(typeof i!="string"&&i.type==="field"){let s=n(t,i.path);if(s.def.type!=="struct"&&s.def.type!=="turtle")if(s.def.e){let o=bK(s.fs,s.def.e);r.push(...o.map(a=>[...s.relationship,...a]))}else r.push(s.relationship)}}),r}function TK(t,e){let r=[];for(let n of e){let i=0;for(let u=0;u<t.length&&u<n.length&&t[u].name===n[u].name;u++)i=u+1;let s=t.slice(i),o=n.slice(i),a=[...s.map(u=>({...u,reverse:!0})),...o.map(u=>({...u,reverse:!1}))];r.push(a)}return r}function CK(t,e){for(let r of e)for(let n of r){if(n.structRelationship.type==="cross")return`Cannot compute \`${t}\` across \`join_cross\` relationship \`${n.name}\``;if(n.structRelationship.type==="many"&&!n.reverse)return`Cannot compute \`${t}\` across \`join_many\` relationship \`${n.name}\``;if(n.structRelationship.type==="nested"&&!n.reverse)return`Cannot compute \`${t}\` across repeated relationship \`${n.name}\``}}function btt(t,e,r,n){if(e.length===0)return t;let i=e[0];for(let h of e.slice(1))for(let p=0;p<i.length;p++){let m=i[p],g=h[p];if(m.name!==g.name){i=i.slice(0,p);break}}let s=TK(i,e),o=CK(n,s),a=i.slice().reverse().findIndex(h=>h.structRelationship.type==="many"||h.structRelationship.type==="cross"),u=a===-1?0:i.length-a,l=i.slice(0,u),c=TK(l,e),f=CK(n,c),x=i.length>0?i.map(h=>h.name).join("."):"source",d=l.length>0?l.map(h=>h.name).join("."):"source";if(o)return"Aggregated dimensional expression contains multiple join paths; rewrite, for example `sum(first_join.field + second_join.field)` as `first_join.field.sum() + second_join.field.sum()`";{let h=r instanceof Att.FieldReference?`${r.refString}.${n}()`:r instanceof _tt.ExprIdReference?`${r.fieldReference.refString}.${n}()`:`${x}.${n}(${r.code})`,p=`${d}.${n}(${r.code})`,m=`${t}; use \`${h}\``;return f===void 0&&d!==x&&(m+=` or \`${p}\` to get a result weighted with respect to \`${d}\``),m}}});var i3e=v(xI=>{"use strict";Object.defineProperty(xI,"__esModule",{value:!0});xI.ExprAlternationTree=void 0;var n3e=Xe(),Ttt=Ps(),Ctt=XL(),Rtt=ls(),RK=class extends Ctt.BinaryBoolean{constructor(e,r,n){super(e,r,n),this.elementType="alternation",this.elementType=`${r}alternation${r}`}apply(e,r,n){let i=this.left.apply(e,r,n),s=this.right.apply(e,r,n);return{dataType:"boolean",expressionType:(0,n3e.maxExpressionType)(i.expressionType,s.expressionType),evalSpace:(0,n3e.mergeEvalSpaces)(i.evalSpace,s.evalSpace),value:(0,Rtt.compose)(i.value,this.op==="&"?"and":"or",s.value)}}requestExpression(e){}getExpression(e){return this.log("Alternation tree has no value"),(0,Ttt.errorFor)("no value from alternation tree")}};xI.ExprAlternationTree=RK});var hI=v(dI=>{"use strict";Object.defineProperty(dI,"__esModule",{value:!0});dI.ExprAsymmetric=void 0;var Ott=zm(),OK=class extends Ott.ExprAggregateFunction{constructor(e,r,n,i){super(e,r,i),this.func=e,this.expr=r,this.source=n,this.has({source:n})}isSymmetricFunction(){return!1}defaultFieldName(){if(this.source&&this.expr===void 0){let e=this.source.nameString;switch(this.func){case"sum":return`total_${e}`;case"avg":return`avg_${e}`}}}};dI.ExprAsymmetric=OK});var s3e=v(pI=>{"use strict";Object.defineProperty(pI,"__esModule",{value:!0});pI.ExprAvg=void 0;var Dtt=hI(),DK=class extends Dtt.ExprAsymmetric{constructor(e,r,n){super("avg",e,r,n),this.has({source:r})}};pI.ExprAvg=DK});var o3e=v(mI=>{"use strict";Object.defineProperty(mI,"__esModule",{value:!0});mI.ExprCast=void 0;var Ntt=hS(),Ftt=ir(),wtt=ls(),NK=class extends Ftt.ExpressionDef{constructor(e,r,n=!1){super({expr:e}),this.expr=e,this.castType=r,this.safe=n,this.elementType="cast"}getExpression(e){var r,n,i;let s=this.expr.getExpression(e),o="unsupported";if(typeof this.castType=="string")o=this.castType;else{let a=e.dialectObj();a&&(a.validateTypeName(this.castType.raw)?o=(i=(n=(r=e.dialectObj())===null||r===void 0?void 0:r.sqlTypeToMalloyType(this.castType.raw))===null||n===void 0?void 0:n.type)!==null&&i!==void 0?i:"unsupported":this.log(`Cast type \`${this.castType.raw}\` is invalid for ${a.name} dialect`))}return{dataType:o,expressionType:s.expressionType,value:(0,wtt.compressExpr)((0,Ntt.castTo)(this.castType,s.value,s.dataType,this.safe)),evalSpace:s.evalSpace}}};mI.ExprCast=NK});var u3e=v(gI=>{"use strict";Object.defineProperty(gI,"__esModule",{value:!0});gI.ExprCoalesce=void 0;var FK=Wf(),a3e=un(),Ltt=ir(),wK=class extends Ltt.ExpressionDef{constructor(e,r){super({expr:e,altExpr:r}),this.expr=e,this.altExpr=r,this.elementType="coalesce expression",this.legalChildTypes=a3e.FT.anyAtomicT}getExpression(e){let r=this.expr.getExpression(e),n=this.altExpr.getExpression(e);return r.dataType==="null"?n:(a3e.FT.typeEq(r,n)||this.log(`Mismatched types for coalesce (${r.dataType}, ${n.dataType})`),{...n,dataType:r.dataType==="error"?n.dataType:r.dataType,expressionType:(0,FK.maxExpressionType)(r.expressionType,n.expressionType),value:(0,FK.mkExpr)`COALESCE(${r.value},${n.value})`,evalSpace:(0,FK.mergeEvalSpaces)(r.evalSpace,n.evalSpace)})}};gI.ExprCoalesce=wK});var l3e=v(yI=>{"use strict";Object.defineProperty(yI,"__esModule",{value:!0});yI.ExprCount=void 0;var Itt=zm(),LK=class extends Itt.ExprAggregateFunction{constructor(e){super("count"),this.source=e,this.elementType="count",this.has({source:e})}defaultFieldName(){if(this.source)return"count_"+this.source.nameString}getExpression(e){let r={type:"aggregate",function:"count",e:[]};return this.source&&(r.structPath=this.source.refString),{dataType:"number",expressionType:"aggregate",value:[r],evalSpace:"output"}}};yI.ExprCount=LK});var c3e=v(AI=>{"use strict";Object.defineProperty(AI,"__esModule",{value:!0});AI.ExprCountDistinct=void 0;var EI=un(),Mtt=zm(),IK=class extends Mtt.ExprAggregateFunction{constructor(e){super("count_distinct",e),this.legalChildTypes=[EI.FT.numberT,EI.FT.stringT,EI.FT.dateT,EI.FT.timestampT]}};AI.ExprCountDistinct=IK});var x3e=v(SI=>{"use strict";Object.defineProperty(SI,"__esModule",{value:!0});SI.ExprFilter=void 0;var f3e=Xe(),Ptt=Ps(),ktt=un(),Btt=ir(),MK=class extends Btt.ExpressionDef{constructor(e,r){super({expr:e,filter:r}),this.expr=e,this.filter=r,this.elementType="filtered expression",this.legalChildTypes=ktt.FT.anyAtomicT}getExpression(e){let r=this.filter.getFilterList(e),n=this.expr.getExpression(e);return(0,f3e.expressionIsAggregate)(n.expressionType)?r.find(i=>(0,f3e.expressionIsCalculation)(i.expressionType))?(this.filter.log("Cannot filter an expresion with an aggregate or analytical computation"),n):this.typeCheck(this.expr,{...n,expressionType:"scalar"})?{...n,value:[{type:"filterExpression",e:n.value,filterList:r}]}:(this.expr.log(`Cannot filter '${n.dataType}' data`),(0,Ptt.errorFor)("cannot filter type")):(this.expr.log("Filtered expression requires an aggregate computation"),n)}};SI.ExprFilter=MK});var h3e=v(vI=>{"use strict";Object.defineProperty(vI,"__esModule",{value:!0});vI.ExprFunc=void 0;var Dx=Xe(),Gm=Ps(),qtt=CT(),Utt=ir(),d3e=ls(),PK=class extends Utt.ExpressionDef{constructor(e,r,n,i,s){super({args:r}),this.name=e,this.args=r,this.isRaw=n,this.rawType=i,this.source=s,this.elementType="function call()",this.has({source:s})}getExpression(e){var r,n,i,s;let o=this.args.map(T=>T.getExpression(e));if(this.isRaw){let T="scalar",_,b=[`${this.name}(`];for(let O of o)T=(0,Dx.maxExpressionType)(T,O.expressionType),_?b.push(","):_=O.dataType,b.push(...O.value);return b.push(")"),{dataType:(n=(r=this.rawType)!==null&&r!==void 0?r:_)!==null&&n!==void 0?n:"number",expressionType:T,value:(0,d3e.compressExpr)(b),evalSpace:(0,Dx.mergeEvalSpaces)(...o.map(O=>O.evalSpace))}}let a=(i=this.modelEntry(this.name.toLowerCase()))===null||i===void 0?void 0:i.entry;if(a===void 0)return this.log(`Unknown function '${this.name}'. Use '${this.name}!(...)' to call a SQL function directly.`),(0,Gm.errorFor)("unknown function");if(a.type!=="function")return this.log(`Cannot call '${this.name}', which is of type ${a.type}`),(0,Gm.errorFor)("called non function");a.name!==this.name&&this.log(`Case insensitivity for function names is deprecated, use '${a.name}' instead`,"warn");let u,l=(s=this.source)===null||s===void 0?void 0:s.refString;if(this.source){let T=this.source.getField(e).found;if(T){let _=T.typeDesc();if((0,Dx.isAtomicFieldType)(_.dataType))u={dataType:_.dataType,expressionType:_.expressionType,value:[{type:"field",path:this.source.refString}],evalSpace:_.evalSpace},l=this.source.sourceString;else if(!(T instanceof qtt.StructSpaceFieldBase)){let b=`Aggregate source cannot be a ${_.dataType}`;return this.log(b),(0,Gm.errorFor)(b)}}else{let _=`Reference to undefined value ${this.source.refString}`;return this.log(_),(0,Gm.errorFor)(_)}}let c=[...u?[u]:[],...o],f=$tt(a,c);if(f===void 0)return this.log(`No matching overload for function ${this.name}(${c.map(T=>T.dataType).join(", ")})`),(0,Gm.errorFor)("no matching overload");let{overload:x,expressionTypeErrors:d,evalSpaceErrors:h,nullabilityErrors:p}=f;for(let T of d){let _=T.argIndex-(u?1:0),b=(0,Dx.expressionIsScalar)(T.maxExpressionType)?"scalar":"scalar or aggregate";this.args[_].log(`Parameter ${T.argIndex+1} ('${T.param.name}') of ${this.name} must be ${b}, but received ${T.actualExpressionType}`)}for(let T of h){let _=T.argIndex-(u?1:0),b=T.maxEvalSpace==="literal"?"literal":T.maxEvalSpace==="constant"?"literal or constant":"literal, constant or output";this.args[_].log(`Parameter ${T.argIndex+1} ('${T.param.name}') of ${this.name} must be ${b}, but received ${T.actualEvalSpace}`)}for(let T of p){let _=T.argIndex-(u?1:0);this.args[_].log(`Parameter ${T.argIndex+1} ('${T.param.name}') of ${this.name} must not be a literal null`)}let m=x.returnType,g=(0,Dx.maxOfExpressionTypes)([m.expressionType,...c.map(T=>T.expressionType)]);if(!(0,Dx.expressionIsAggregate)(x.returnType.expressionType)&&this.source!==void 0)return this.log(`Cannot call function ${this.name}(${c.map(T=>T.dataType).join(", ")}) with source`),(0,Gm.errorFor)("cannot call with source");let y=[{type:"function_call",overload:x,args:c.map(T=>T.value),expressionType:g,structPath:l}];if(m.dataType==="any")return this.log(`Invalid return type ${m.dataType} for function '${this.name}'`),(0,Gm.errorFor)("invalid return type");let A=(0,Dx.mergeEvalSpaces)(...c.map(T=>T.evalSpace)),S=A==="constant"?"constant":(0,Dx.expressionIsScalar)(g)?A:"output";return{dataType:m.dataType,expressionType:g,value:(0,d3e.compressExpr)(y),evalSpace:S}}};vI.ExprFunc=PK;function $tt(t,e){for(let r of t.overloads){let n=0,i=!0,s=!1,o=[],a=[],u=[];for(let l=0;l<e.length;l++){let c=e[l],f=r.params[n];if(f===void 0){i=!1;break}if(!f.allowedTypes.some(d=>{let h=d.dataType===c.dataType||d.dataType==="any"||c.dataType==="null"||c.dataType==="error";return d.expressionType&&((0,Dx.isExpressionTypeLEQ)(c.expressionType,d.expressionType)||o.push({argIndex:l,maxExpressionType:d.expressionType,actualExpressionType:c.expressionType,param:f})),(d.evalSpace==="literal"&&c.evalSpace!=="literal"||d.evalSpace==="constant"&&(c.evalSpace==="input"||c.evalSpace==="output")||d.evalSpace==="output"&&c.evalSpace==="input")&&a.push({argIndex:l,param:f,maxEvalSpace:d.evalSpace,actualEvalSpace:c.evalSpace}),d.evalSpace==="literal"&&c.dataType==="null"&&u.push({argIndex:l,param:f}),h})){i=!1;break}f.isVariadic?l===e.length-1&&(s=!0):n++}if(!(!s&&(n!==e.length||n!==r.params.length))&&i)return{overload:r,expressionTypeErrors:o,evalSpaceErrors:a,nullabilityErrors:u}}}});var m3e=v(_I=>{"use strict";Object.defineProperty(_I,"__esModule",{value:!0});_I.ExprLogicalOp=void 0;var jtt=XL(),p3e=un(),kK=class extends jtt.BinaryBoolean{constructor(){super(...arguments),this.elementType="logical operator",this.legalChildTypes=[p3e.FT.boolT,p3e.FT.aggregateBoolT]}};_I.ExprLogicalOp=kK});var g3e=v(TI=>{"use strict";Object.defineProperty(TI,"__esModule",{value:!0});TI.ExprMax=void 0;var bI=un(),Htt=zm(),BK=class extends Htt.ExprAggregateFunction{constructor(e){super("max",e),this.legalChildTypes=[bI.FT.numberT,bI.FT.stringT,bI.FT.dateT,bI.FT.timestampT]}returns(e){return e.dataType}};TI.ExprMax=BK});var y3e=v(RI=>{"use strict";Object.defineProperty(RI,"__esModule",{value:!0});RI.ExprMin=void 0;var CI=un(),ztt=zm(),qK=class extends ztt.ExprAggregateFunction{constructor(e){super("min",e),this.legalChildTypes=[CI.FT.numberT,CI.FT.stringT,CI.FT.dateT,CI.FT.timestampT]}returns(e){return e.dataType}};RI.ExprMin=qK});var E3e=v(OI=>{"use strict";Object.defineProperty(OI,"__esModule",{value:!0});OI.ExprMinus=void 0;var Gtt=Ps(),Qtt=un(),Vtt=ir(),UK=class extends Vtt.ExpressionDef{constructor(e){super({expr:e}),this.expr=e,this.elementType="unary minus",this.legalChildTypes=[Qtt.FT.numberT]}getExpression(e){let r=this.expr.getExpression(e);return this.typeCheck(this.expr,r)?r.value.length>1?{...r,dataType:"number",value:["-(",...r.value,")"]}:{...r,dataType:"number",value:["-",...r.value]}:(0,Gtt.errorFor)("negate requires number")}};OI.ExprMinus=UK});var A3e=v(DI=>{"use strict";Object.defineProperty(DI,"__esModule",{value:!0});DI.ExprMulDiv=void 0;var Wtt=oI(),$K=class extends Wtt.BinaryNumeric{constructor(){super(...arguments),this.elementType="*/%"}};DI.ExprMulDiv=$K});var HK=v(NI=>{"use strict";Object.defineProperty(NI,"__esModule",{value:!0});NI.Unary=void 0;var Ytt=ir(),jK=class extends Ytt.ExpressionDef{constructor(e){super({expr:e}),this.expr=e}};NI.Unary=jK});var v3e=v(FI=>{"use strict";Object.defineProperty(FI,"__esModule",{value:!0});FI.ExprNot=void 0;var S3e=un(),Ktt=HK(),Xtt=ls(),zK=class extends Ktt.Unary{constructor(e){super(e),this.elementType="not",this.legalChildTypes=[S3e.FT.boolT,S3e.FT.nullT]}getExpression(e){let r=this.expr.getExpression(e),n=this.typeCheck(this.expr,r);return{...r,dataType:"boolean",value:n?(0,Xtt.nullsafeNot)(r.value):["false"]}}};FI.ExprNot=zK});var _3e=v(wI=>{"use strict";Object.defineProperty(wI,"__esModule",{value:!0});wI.ExprNow=void 0;var Jtt=ir(),GK=class extends Jtt.ExpressionDef{constructor(){super(...arguments),this.elementType="timestamp"}getExpression(e){return{dataType:"timestamp",expressionType:"scalar",evalSpace:"constant",value:[{type:"dialect",function:"now"}]}}};wI.ExprNow=GK});var b3e=v(LI=>{"use strict";Object.defineProperty(LI,"__esModule",{value:!0});LI.ExprNULL=void 0;var Ztt=ir(),QK=class extends Ztt.ExpressionDef{constructor(){super(...arguments),this.elementType="NULL"}getExpression(){return{dataType:"null",value:["NULL"],expressionType:"scalar",evalSpace:"literal"}}};LI.ExprNULL=QK});var T3e=v(II=>{"use strict";Object.defineProperty(II,"__esModule",{value:!0});II.ExprNumber=void 0;var ert=un(),trt=ir(),VK=class extends trt.ExpressionDef{constructor(e){super(),this.n=e,this.elementType="numeric literal"}getExpression(e){return this.constantExpression()}constantExpression(){return{...ert.FT.numberT,evalSpace:"literal",value:[{type:"dialect",function:"numberLiteral",literal:this.n}]}}};II.ExprNumber=VK});var C3e=v(MI=>{"use strict";Object.defineProperty(MI,"__esModule",{value:!0});MI.ExprParens=void 0;var rrt=ir(),WK=class extends rrt.ExpressionDef{constructor(e){super({expr:e}),this.expr=e,this.elementType="(expression)"}requestExpression(e){return this.expr.requestExpression(e)}getExpression(e){let r=this.expr.getExpression(e);return{...r,value:["(",...r.value,")"]}}};MI.ExprParens=WK});var R3e=v(PI=>{"use strict";Object.defineProperty(PI,"__esModule",{value:!0});PI.ExprRegEx=void 0;var nrt=ir(),YK=class extends nrt.ExpressionDef{constructor(e){super(),this.regex=e,this.elementType="regular expression literal"}getExpression(){return{dataType:"regular expression",expressionType:"scalar",value:[{type:"dialect",function:"regexpLiteral",literal:this.regex}],evalSpace:"literal"}}};PI.ExprRegEx=YK});var O3e=v(kI=>{"use strict";Object.defineProperty(kI,"__esModule",{value:!0});kI.ExprString=void 0;var irt=ir(),srt=un(),KK=class extends irt.ExpressionDef{constructor(e){super(),this.elementType="string literal",this.value=e}getExpression(e){return{...srt.FT.stringT,value:[{type:"dialect",function:"stringLiteral",literal:this.value}],evalSpace:"literal"}}};kI.ExprString=KK});var D3e=v(BI=>{"use strict";Object.defineProperty(BI,"__esModule",{value:!0});BI.ExprSum=void 0;var ort=hI(),XK=class extends ort.ExprAsymmetric{constructor(e,r,n){super("sum",e,r,n),this.has({source:r})}};BI.ExprSum=XK});var N3e=v(UI=>{"use strict";Object.defineProperty(UI,"__esModule",{value:!0});UI.ExprTimeExtract=void 0;var Qm=Xe(),vp=Ps(),JK=ir(),art=ES(),qI=class t extends JK.ExpressionDef{static extractor(e){let r=t.pluralMap[e];if(r)return r;if((0,Qm.isExtractUnit)(e))return e}constructor(e,r){super({args:r}),this.extractText=e,this.args=r,this.elementType="timeExtract"}getExpression(e){let r=t.extractor(this.extractText);if(r){if(this.args.length!==1)return this.log(`Extraction function ${r} requires one argument`),(0,vp.errorFor)("{this.name} arg count");let n=this.args[0];if(n instanceof art.Range){let i=n.first.getExpression(e),s=n.last.getExpression(e),o=(0,Qm.maxExpressionType)(i.expressionType,s.expressionType),a=(0,Qm.mergeEvalSpaces)(i.evalSpace,s.evalSpace);if(i.dataType==="error"||s.dataType==="error")return{dataType:"number",expressionType:o,evalSpace:a,value:(0,vp.errorFor)("extract from error").value};if(!(0,Qm.isTimeFieldType)(i.dataType))return n.first.log(`Can't extract ${r} from '${i.dataType}'`),(0,vp.errorFor)(`${r} bad type ${i.dataType}`);if(!(0,Qm.isTimeFieldType)(s.dataType))return n.last.log(`Cannot extract ${r} from '${s.dataType}'`),(0,vp.errorFor)(`${r} bad type ${s.dataType}`);let u=i.dataType;if(i.dataType!==s.dataType){let l=!0;if(u="timestamp",i.dataType==="date"){let c=(0,JK.getMorphicValue)(i,"timestamp");c&&(i=c,l=!1)}else{let c=(0,JK.getMorphicValue)(s,"timestamp");c&&(s=c,l=!1)}if(l)return n.first.log(`Cannot measure from ${i.dataType} to ${s.dataType}`),(0,vp.errorFor)(`${r} range mismatch`)}return["week","month","quarter","year"].includes(r)?(this.log(`Cannot measure interval using '${r}'`),(0,vp.errorFor)(`${r} civil extraction`)):(0,Qm.isTimestampUnit)(r)?{dataType:"number",expressionType:o,evalSpace:a,value:[{type:"dialect",function:"timeDiff",units:r,left:{valueType:u,value:i.value},right:{valueType:u,value:s.value}}]}:(this.log(`Cannot extract ${r} from a range`),(0,vp.errorFor)(`${r} bad extraction`))}else{let i=n.getExpression(e);return(0,Qm.isTimeFieldType)(i.dataType)?{dataType:"number",expressionType:i.expressionType,evalSpace:i.evalSpace,value:[{type:"dialect",function:"extract",expr:{value:i.value,valueType:i.dataType},units:r}]}:(i.dataType!=="error"&&this.log(`${this.extractText}() requires time type, not '${i.dataType}'`),{dataType:"number",expressionType:i.expressionType,evalSpace:i.evalSpace,value:(0,vp.errorFor)(`${this.extractText} bad type ${i.dataType}`).value})}}throw this.internalError(`Illegal extraction unit '${this.extractText}'`)}};UI.ExprTimeExtract=qI;qI.pluralMap={years:"year",quarters:"quarter",months:"month",weeks:"week",days:"day",hours:"hour",minutes:"minute",seconds:"second"}});var F3e=v($I=>{"use strict";Object.defineProperty($I,"__esModule",{value:!0});$I.QueryInputSpace=void 0;var urt=fS(),lrt=ZW(),crt=oL(),ZK=class extends crt.RefinedSpace{constructor(e,r){let n=new lrt.SpaceSeed(e);super(n.structDef),this.queryOutput=r,this.extendList=[]}extendSource(e){this.pushFields(e),e instanceof urt.Join?this.extendList.push(e.name.refString):this.extendList.push(e.defineName)}isQueryFieldSpace(){return!0}outputSpace(){return this.queryOutput}inputSpace(){return this}};$I.QueryInputSpace=ZK});var MT=v(Gu=>{"use strict";var frt=Gu&&Gu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xrt=Gu&&Gu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),drt=Gu&&Gu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&frt(e,t,r);return xrt(e,t),e};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.ReduceFieldSpace=Gu.QuerySpace=void 0;var IT=drt(Xe()),eX=HW(),hrt=Ja(),prt=AS(),mrt=oL(),grt=WW(),yrt=Vl(),Ert=F3e(),jI=class extends mrt.RefinedSpace{constructor(e,r,n,i){super(e.emptyStructDef()),this.queryInputSpace=e,this.nestParent=n,this.astEl=i,this.expandedWild={},this.exprSpace=new Ert.QueryInputSpace(e,this),r&&this.addRefineFromFields(r)}addRefineFromFields(e){var r,n;for(let i of e.fields)if(typeof i=="string"){let s=this.exprSpace.entry(i);s&&this.setEntry(i,s)}else if(IT.isFilteredAliasedName(i)){let s=(r=i.as)!==null&&r!==void 0?r:i.name,o=this.exprSpace.entry(s);o&&this.setEntry(s,o)}else i.type!=="turtle"&&this.setEntry((n=i.as)!==null&&n!==void 0?n:i.name,new grt.ColumnSpaceField(i))}log(e){this.astEl&&this.astEl.log(e)}pushFields(...e){for(let r of e)r instanceof prt.WildcardFieldReference?this.addWild(r):super.pushFields(r)}addWild(e){var r;let n=this.exprSpace,i=[];if(e.joinPath)for(let o of e.joinPath.list){let a=o.refString;i.push(a);let u=n.entry(a);if(u)if(u instanceof yrt.StructSpaceField)n=u.fieldSpace;else{o.log(`Field '${a}' does not contain rows and cannot be expanded with '*'`);return}else{o.log(`No such field as '${a}'`);return}}let s=this.dialectObj();for(let[o,a]of n.entries())if(!e.except.has(o))if(this.entry(o)){let u=(r=this.expandedWild[o])===null||r===void 0?void 0:r.join(".");e.log(`Cannot expand '${o}' in '${e.refString}' because a field with that name already exists${u?` (conflicts with ${u})`:""}`)}else{let u=a.typeDesc();IT.isAtomicFieldType(u.dataType)&&IT.expressionIsScalar(u.expressionType)&&(s===void 0||!s.ignoreInProject(o))&&(this.setEntry(o,a),this.expandedWild[o]=i.concat(o))}}canContain(e){return!0}queryFieldDefs(){let e=[];for(let[r,n]of this.entries())if(n instanceof hrt.SpaceField){let i=this.expandedWild[r];if(i){e.push(i.join("."));continue}let s=n.getQueryFieldDef(this.exprSpace);if(s){let o=n.typeDesc();o.dataType!=="error"&&this.canContain(o)&&!Art(s)&&e.push(s)}}return this.isComplete(),e}getQuerySegment(e){let r=this.getPipeSegment(e);if(IT.isQuerySegment(r))return r;throw new Error("TODO NOT POSSIBLE")}getPipeSegment(e){if(this.segmentType==="index")throw new Error("INDEX FIELD PIPE SEGMENT MIS HANDLED");if(e?.extendSource)for(let n of e.extendSource)this.exprSpace.addFieldDef(n);let r={type:this.segmentType,fields:this.queryFieldDefs()};if(r.fields=(0,eX.mergeFields)(e?.fields,r.fields),e?.extendSource&&(r.extendSource=e.extendSource),this.exprSpace.extendList.length>0){let n=[],i=this.exprSpace.structDef();for(let s of this.exprSpace.extendList){let o=i.fields.find(a=>(0,eX.nameOf)(a)===s);o&&n.push(o)}r.extendSource=(0,eX.mergeFields)(r.extendSource,n)}return this.newTimezone&&(r.queryTimezone=this.newTimezone),this.isComplete(),r}lookup(e){let r=super.lookup(e);return r.found?{...r,isOutputField:!0}:this.exprSpace.lookup(e)}isQueryFieldSpace(){return!0}outputSpace(){return this}inputSpace(){return this.exprSpace}};Gu.QuerySpace=jI;var tX=class extends jI{constructor(){super(...arguments),this.segmentType="reduce"}};Gu.ReduceFieldSpace=tX;function Art(t){return typeof t!="string"&&!IT.isFilteredAliasedName(t)&&t.type==="turtle"&&t.pipeline.length===0}});var L3e=v(HI=>{"use strict";Object.defineProperty(HI,"__esModule",{value:!0});HI.ExprUngroup=void 0;var w3e=Xe(),rX=Ps(),Srt=MT(),vrt=un(),_rt=ir(),nX=class extends _rt.ExpressionDef{constructor(e,r,n){super({expr:r,fields:n}),this.control=e,this.expr=r,this.fields=n,this.legalChildTypes=vrt.FT.anyAtomicT,this.elementType="ungroup"}returns(e){return"number"}getExpression(e){let r=this.expr.getExpression(e);if(!(0,w3e.expressionIsAggregate)(r.expressionType))return this.expr.log(`${this.control}() expression must be an aggregate`),(0,rX.errorFor)("ungrouped scalar");if((0,w3e.expressionIsUngroupedAggregate)(r.expressionType))return this.expr.log(`${this.control}() expression must not already be ungrouped`),(0,rX.errorFor)("doubly-ungrouped aggregate");let n={type:this.control,e:r.value};if(this.typeCheck(this.expr,{...r,expressionType:"scalar"})){if(e.isQueryFieldSpace()&&this.fields.length>0){let i=[],s=this.control==="exclude";for(let o of this.fields){let a=e.outputSpace(),u=!0;for(;a;){let l=a.lookup([o]);if(l.found&&l.isOutputField)i.push(o.refString),u=!1;else if(a instanceof Srt.QuerySpace){a=a.nestParent;continue}break}if(u){let l=s?"exclude()":"all()";o.log(`${l} '${o.refString}' is missing from query output`)}}n.fields=i}return{dataType:this.returns(r),expressionType:"ungrouped_aggregate",value:[n],evalSpace:"output"}}return this.log(`${this.control}() incompatible type`),(0,rX.errorFor)("ungrouped type check")}};HI.ExprUngroup=nX});var k3e=v(QI=>{"use strict";Object.defineProperty(QI,"__esModule",{value:!0});QI.ForRange=void 0;var I3e=Wf(),iX=Ps(),M3e=un(),zI=hS(),brt=ir(),GI=ZL(),P3e=ES(),sX=class extends brt.ExpressionDef{constructor(e,r,n){super({from:e,duration:r,timeframe:n}),this.from=e,this.duration=r,this.timeframe=n,this.elementType="forRange",this.legalChildTypes=[M3e.FT.timestampT,M3e.FT.dateT]}apply(e,r,n){let i=this.from.getExpression(e),s=n.getExpression(e);if(!this.typeCheck(n,s))return(0,iX.errorFor)("no time for range");let o=this.duration.getExpression(e);if(o.dataType!=="number")return o.dataType!=="error"&&this.log(`FOR duration count must be a number, not '${o.dataType}'`),{dataType:"boolean",evalSpace:(0,I3e.mergeEvalSpaces)(i.evalSpace,s.evalSpace),expressionType:(0,I3e.maxExpressionType)(i.expressionType,s.expressionType),value:(0,iX.errorFor)("for not number").value};let a=this.timeframe.text,u=(0,zI.resolution)(a);if(i.dataType==="timestamp"&&(u="timestamp"),s.dataType==="date"&&u==="date"){let h=this.from,p=(0,zI.timeOffset)("date",i.value,"+",o.value,a),m=new GI.ExprTime("date",p);return new P3e.Range(h,m).apply(e,r,n)}let l=GI.ExprTime.fromValue("timestamp",s),c=this.from,f=i.value;if(i.dataType==="date"){let h=i.morphic&&i.morphic.timestamp;h?f=h:f=(0,zI.castDateToTimestamp)(f),c=new GI.ExprTime("timestamp",f,i.expressionType)}let x=(0,zI.timeOffset)("timestamp",f,"+",o.value,a),d=new GI.ExprTime("timestamp",x,i.expressionType);return new P3e.Range(c,d).apply(e,r,l)}requestExpression(e){}getExpression(e){return this.log("A Range is not a value"),(0,iX.errorFor)("range has no value")}};QI.ForRange=sX});var IX=v(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});var Fx=class extends Error{},hX=class extends Fx{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},pX=class extends Fx{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},mX=class extends Fx{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},Km=class extends Fx{},ZI=class extends Fx{constructor(e){super(`Invalid unit ${e}`)}},ra=class extends Fx{},Uc=class extends Fx{constructor(){super("Zone is an abstract class")}},Re="numeric",Jl="short",eu="long",gX={year:Re,month:Re,day:Re},uye={year:Re,month:Jl,day:Re},Trt={year:Re,month:Jl,day:Re,weekday:Jl},lye={year:Re,month:eu,day:Re},cye={year:Re,month:eu,day:Re,weekday:eu},fye={hour:Re,minute:Re},xye={hour:Re,minute:Re,second:Re},dye={hour:Re,minute:Re,second:Re,timeZoneName:Jl},hye={hour:Re,minute:Re,second:Re,timeZoneName:eu},pye={hour:Re,minute:Re,hourCycle:"h23"},mye={hour:Re,minute:Re,second:Re,hourCycle:"h23"},gye={hour:Re,minute:Re,second:Re,hourCycle:"h23",timeZoneName:Jl},yye={hour:Re,minute:Re,second:Re,hourCycle:"h23",timeZoneName:eu},Eye={year:Re,month:Re,day:Re,hour:Re,minute:Re},Aye={year:Re,month:Re,day:Re,hour:Re,minute:Re,second:Re},Sye={year:Re,month:Jl,day:Re,hour:Re,minute:Re},vye={year:Re,month:Jl,day:Re,hour:Re,minute:Re,second:Re},Crt={year:Re,month:Jl,day:Re,weekday:Jl,hour:Re,minute:Re},_ye={year:Re,month:eu,day:Re,hour:Re,minute:Re,timeZoneName:Jl},bye={year:Re,month:eu,day:Re,hour:Re,minute:Re,second:Re,timeZoneName:Jl},Tye={year:Re,month:eu,day:Re,weekday:eu,hour:Re,minute:Re,timeZoneName:eu},Cye={year:Re,month:eu,day:Re,weekday:eu,hour:Re,minute:Re,second:Re,timeZoneName:eu};function kt(t){return typeof t>"u"}function Jm(t){return typeof t=="number"}function sM(t){return typeof t=="number"&&t%1===0}function Rrt(t){return typeof t=="string"}function Ort(t){return Object.prototype.toString.call(t)==="[object Date]"}function Rye(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Drt(t){return Array.isArray(t)?t:[t]}function B3e(t,e,r){if(t.length!==0)return t.reduce((n,i)=>{let s=[e(i),i];return n&&r(n[0],s[0])===n[0]?n:s},null)[1]}function Nrt(t,e){return e.reduce((r,n)=>(r[n]=t[n],r),{})}function _S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Nx(t,e,r){return sM(t)&&t>=e&&t<=r}function Frt(t,e){return t-e*Math.floor(t/e)}function kn(t,e=2){let r=t<0,n;return r?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function _p(t){if(!(kt(t)||t===null||t===""))return parseInt(t,10)}function Vm(t){if(!(kt(t)||t===null||t===""))return parseFloat(t)}function RX(t){if(!(kt(t)||t===null||t==="")){let e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function OX(t,e,r=!1){let n=10**e;return(r?Math.trunc:Math.round)(t*n)/n}function HT(t){return t%4===0&&(t%100!==0||t%400===0)}function $T(t){return HT(t)?366:365}function eM(t,e){let r=Frt(e-1,12)+1,n=t+(e-r)/12;return r===2?HT(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function DX(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(e.getUTCFullYear()-1900)),+e}function tM(t){let e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,r=t-1,n=(r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400))%7;return e===4||n===3?53:52}function yX(t){return t>99?t:t>60?1900+t:2e3+t}function Oye(t,e,r,n=null){let i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);let o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(r,o).formatToParts(i).find(u=>u.type.toLowerCase()==="timezonename");return a?a.value:null}function oM(t,e){let r=parseInt(t,10);Number.isNaN(r)&&(r=0);let n=parseInt(e,10)||0,i=r<0||Object.is(r,-0)?-n:n;return r*60+i}function Dye(t){let e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new ra(`Invalid unit value ${t}`);return e}function rM(t,e){let r={};for(let n in t)if(_S(t,n)){let i=t[n];if(i==null)continue;r[e(n)]=Dye(i)}return r}function jT(t,e){let r=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${kn(r,2)}:${kn(n,2)}`;case"narrow":return`${i}${r}${n>0?`:${n}`:""}`;case"techie":return`${i}${kn(r,2)}${kn(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function aM(t){return Nrt(t,["hour","minute","second","millisecond"])}var Nye=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,wrt=["January","February","March","April","May","June","July","August","September","October","November","December"],Fye=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Lrt=["J","F","M","A","M","J","J","A","S","O","N","D"];function wye(t){switch(t){case"narrow":return[...Lrt];case"short":return[...Fye];case"long":return[...wrt];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Lye=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Iye=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Irt=["M","T","W","T","F","S","S"];function Mye(t){switch(t){case"narrow":return[...Irt];case"short":return[...Iye];case"long":return[...Lye];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Pye=["AM","PM"],Mrt=["Before Christ","Anno Domini"],Prt=["BC","AD"],krt=["B","A"];function kye(t){switch(t){case"narrow":return[...krt];case"short":return[...Prt];case"long":return[...Mrt];default:return null}}function Brt(t){return Pye[t.hour<12?0:1]}function qrt(t,e){return Mye(e)[t.weekday-1]}function Urt(t,e){return wye(e)[t.month-1]}function $rt(t,e){return kye(e)[t.year<0?0:1]}function jrt(t,e,r="always",n=!1){let i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(r==="auto"&&s){let f=t==="days";switch(e){case 1:return f?"tomorrow":`next ${i[t][0]}`;case-1:return f?"yesterday":`last ${i[t][0]}`;case 0:return f?"today":`this ${i[t][0]}`}}let o=Object.is(e,-0)||e<0,a=Math.abs(e),u=a===1,l=i[t],c=n?u?l[1]:l[2]||l[1]:u?i[t][0]:t;return o?`${a} ${c} ago`:`in ${a} ${c}`}function q3e(t,e){let r="";for(let n of t)n.literal?r+=n.val:r+=e(n.val);return r}var Hrt={D:gX,DD:uye,DDD:lye,DDDD:cye,t:fye,tt:xye,ttt:dye,tttt:hye,T:pye,TT:mye,TTT:gye,TTTT:yye,f:Eye,ff:Sye,fff:_ye,ffff:Tye,F:Aye,FF:vye,FFF:bye,FFFF:Cye},Xl=class t{static create(e,r={}){return new t(e,r)}static parseFormat(e){let r=null,n="",i=!1,s=[];for(let o=0;o<e.length;o++){let a=e.charAt(o);a==="'"?(n.length>0&&s.push({literal:i,val:n}),r=null,n="",i=!i):i||a===r?n+=a:(n.length>0&&s.push({literal:!1,val:n}),n=a,r=a)}return n.length>0&&s.push({literal:i,val:n}),s}static macroTokenToFormatOpts(e){return Hrt[e]}constructor(e,r){this.opts=r,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...r}).format()}formatDateTime(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r}).format()}formatDateTimeParts(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r}).formatToParts()}resolvedOptions(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r}).resolvedOptions()}num(e,r=0){if(this.opts.forceSimple)return kn(e,r);let n={...this.opts};return r>0&&(n.padTo=r),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,r){let n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(d,h)=>this.loc.extract(e,d,h),o=d=>e.isOffsetFixed&&e.offset===0&&d.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,d.format):"",a=()=>n?Brt(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(d,h)=>n?Urt(e,d):s(h?{month:d}:{month:d,day:"numeric"},"month"),l=(d,h)=>n?qrt(e,d):s(h?{weekday:d}:{weekday:d,month:"long",day:"numeric"},"weekday"),c=d=>{let h=t.macroTokenToFormatOpts(d);return h?this.formatWithSystemDefault(e,h):d},f=d=>n?$rt(e,d):s({era:d},"era"),x=d=>{switch(d){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(d)}};return q3e(t.parseFormat(r),x)}formatDurationFromString(e,r){let n=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=u=>l=>{let c=n(l);return c?this.num(u.get(c),l.length):l},s=t.parseFormat(r),o=s.reduce((u,{literal:l,val:c})=>l?u:u.concat(c),[]),a=e.shiftTo(...o.map(n).filter(u=>u));return q3e(s,i(a))}},Za=class{constructor(e,r){this.reason=e,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}},Tp=class{get type(){throw new Uc}get name(){throw new Uc}get ianaName(){return this.name}get isUniversal(){throw new Uc}offsetName(e,r){throw new Uc}formatOffset(e,r){throw new Uc}offset(e){throw new Uc}equals(e){throw new Uc}get isValid(){throw new Uc}},oX=null,nM=class t extends Tp{static get instance(){return oX===null&&(oX=new t),oX}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return Oye(e,r,n)}formatOffset(e,r){return jT(this.offset(e),r)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}},XI={};function zrt(t){return XI[t]||(XI[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),XI[t]}var Grt={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Qrt(t,e){let r=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,i,s,o,a,u,l,c]=n;return[o,i,s,a,u,l,c]}function Vrt(t,e){let r=t.formatToParts(e),n=[];for(let i=0;i<r.length;i++){let{type:s,value:o}=r[i],a=Grt[s];s==="era"?n[a]=o:kt(a)||(n[a]=parseInt(o,10))}return n}var VI={},wx=class t extends Tp{static create(e){return VI[e]||(VI[e]=new t(e)),VI[e]}static resetCache(){VI={},XI={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=t.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return Oye(e,r,n,this.name)}formatOffset(e,r){return jT(this.offset(e),r)}offset(e){let r=new Date(e);if(isNaN(r))return NaN;let n=zrt(this.name),[i,s,o,a,u,l,c]=n.formatToParts?Vrt(n,r):Qrt(n,r);a==="BC"&&(i=-Math.abs(i)+1);let x=DX({year:i,month:s,day:o,hour:u===24?0:u,minute:l,second:c,millisecond:0}),d=+r,h=d%1e3;return d-=h>=0?h:1e3+h,(x-d)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}},aX=null,tu=class t extends Tp{static get utcInstance(){return aX===null&&(aX=new t(0)),aX}static instance(e){return e===0?t.utcInstance:new t(e)}static parseSpecifier(e){if(e){let r=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new t(oM(r[1],r[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${jT(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${jT(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,r){return jT(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}},iM=class extends Tp{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function bp(t,e){if(kt(t)||t===null)return e;if(t instanceof Tp)return t;if(Rrt(t)){let r=t.toLowerCase();return r==="local"||r==="system"?e:r==="utc"||r==="gmt"?tu.utcInstance:tu.parseSpecifier(r)||wx.create(t)}else return Jm(t)?tu.instance(t):typeof t=="object"&&t.offset&&typeof t.offset=="number"?t:new iM(t)}var U3e=()=>Date.now(),$3e="system",j3e=null,H3e=null,z3e=null,G3e,cn=class{static get now(){return U3e}static set now(e){U3e=e}static set defaultZone(e){$3e=e}static get defaultZone(){return bp($3e,nM.instance)}static get defaultLocale(){return j3e}static set defaultLocale(e){j3e=e}static get defaultNumberingSystem(){return H3e}static set defaultNumberingSystem(e){H3e=e}static get defaultOutputCalendar(){return z3e}static set defaultOutputCalendar(e){z3e=e}static get throwOnInvalid(){return G3e}static set throwOnInvalid(e){G3e=e}static resetCaches(){Bn.resetCache(),wx.resetCache()}},Q3e={};function Wrt(t,e={}){let r=JSON.stringify([t,e]),n=Q3e[r];return n||(n=new Intl.ListFormat(t,e),Q3e[r]=n),n}var EX={};function AX(t,e={}){let r=JSON.stringify([t,e]),n=EX[r];return n||(n=new Intl.DateTimeFormat(t,e),EX[r]=n),n}var SX={};function Yrt(t,e={}){let r=JSON.stringify([t,e]),n=SX[r];return n||(n=new Intl.NumberFormat(t,e),SX[r]=n),n}var vX={};function Krt(t,e={}){let{base:r,...n}=e,i=JSON.stringify([t,n]),s=vX[i];return s||(s=new Intl.RelativeTimeFormat(t,e),vX[i]=s),s}var UT=null;function Xrt(){return UT||(UT=new Intl.DateTimeFormat().resolvedOptions().locale,UT)}function Jrt(t){let e=t.indexOf("-u-");if(e===-1)return[t];{let r,n=t.substring(0,e);try{r=AX(t).resolvedOptions()}catch{r=AX(n).resolvedOptions()}let{numberingSystem:i,calendar:s}=r;return[n,i,s]}}function Zrt(t,e,r){return(r||e)&&(t+="-u",r&&(t+=`-ca-${r}`),e&&(t+=`-nu-${e}`)),t}function ent(t){let e=[];for(let r=1;r<=12;r++){let n=fn.utc(2016,r,1);e.push(t(n))}return e}function tnt(t){let e=[];for(let r=1;r<=7;r++){let n=fn.utc(2016,11,13+r);e.push(t(n))}return e}function WI(t,e,r,n,i){let s=t.listingMode(r);return s==="error"?null:s==="en"?n(e):i(e)}function rnt(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}var _X=class{constructor(e,r,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;let{padTo:i,floor:s,...o}=n;if(!r||Object.keys(o).length>0){let a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=Yrt(e,a)}}format(e){if(this.inf){let r=this.floor?Math.floor(e):e;return this.inf.format(r)}else{let r=this.floor?Math.floor(e):OX(e,3);return kn(r,this.padTo)}}},bX=class{constructor(e,r,n){this.opts=n;let i;if(e.zone.isUniversal){let o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&wx.create(a).valid?(i=a,this.dt=e):(i="UTC",n.timeZoneName?this.dt=e:this.dt=e.offset===0?e:fn.fromMillis(e.ts+e.offset*60*1e3))}else e.zone.type==="system"?this.dt=e:(this.dt=e,i=e.zone.name);let s={...this.opts};i&&(s.timeZone=i),this.dtf=AX(r,s)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}},TX=class{constructor(e,r,n){this.opts={style:"long",...n},!r&&Rye()&&(this.rtf=Krt(e,n))}format(e,r){return this.rtf?this.rtf.format(e,r):jrt(r,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,r){return this.rtf?this.rtf.formatToParts(e,r):[]}},Bn=class t{static fromOpts(e){return t.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,r,n,i=!1){let s=e||cn.defaultLocale,o=s||(i?"en-US":Xrt()),a=r||cn.defaultNumberingSystem,u=n||cn.defaultOutputCalendar;return new t(o,a,u,s)}static resetCache(){UT=null,EX={},SX={},vX={}}static fromObject({locale:e,numberingSystem:r,outputCalendar:n}={}){return t.create(e,r,n)}constructor(e,r,n,i){let[s,o,a]=Jrt(e);this.locale=s,this.numberingSystem=r||o||null,this.outputCalendar=n||a||null,this.intl=Zrt(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=rnt(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&r?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:t.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,r=!1,n=!0){return WI(this,e,n,wye,()=>{let i=r?{month:e,day:"numeric"}:{month:e},s=r?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=ent(o=>this.extract(o,i,"month"))),this.monthsCache[s][e]})}weekdays(e,r=!1,n=!0){return WI(this,e,n,Mye,()=>{let i=r?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=r?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=tnt(o=>this.extract(o,i,"weekday"))),this.weekdaysCache[s][e]})}meridiems(e=!0){return WI(this,void 0,e,()=>Pye,()=>{if(!this.meridiemCache){let r={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[fn.utc(2016,11,13,9),fn.utc(2016,11,13,19)].map(n=>this.extract(n,r,"dayperiod"))}return this.meridiemCache})}eras(e,r=!0){return WI(this,e,r,kye,()=>{let n={era:e};return this.eraCache[e]||(this.eraCache[e]=[fn.utc(-40,1,1),fn.utc(2017,1,1)].map(i=>this.extract(i,n,"era"))),this.eraCache[e]})}extract(e,r,n){let i=this.dtFormatter(e,r),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(e={}){return new _X(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,r={}){return new bX(e,this.intl,r)}relFormatter(e={}){return new TX(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Wrt(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}};function bS(...t){let e=t.reduce((r,n)=>r+n.source,"");return RegExp(`^${e}$`)}function TS(...t){return e=>t.reduce(([r,n,i],s)=>{let[o,a,u]=s(e,i);return[{...r,...o},a||n,u]},[{},null,1]).slice(0,2)}function CS(t,...e){if(t==null)return[null,null];for(let[r,n]of e){let i=r.exec(t);if(i)return n(i)}return[null,null]}function Bye(...t){return(e,r)=>{let n={},i;for(i=0;i<t.length;i++)n[t[i]]=_p(e[r+i]);return[n,null,r+i]}}var qye=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,nnt=`(?:${qye.source}?(?:\\[(${Nye.source})\\])?)?`,NX=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Uye=RegExp(`${NX.source}${nnt}`),FX=RegExp(`(?:T${Uye.source})?`),int=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,snt=/(\d{4})-?W(\d\d)(?:-?(\d))?/,ont=/(\d{4})-?(\d{3})/,ant=Bye("weekYear","weekNumber","weekDay"),unt=Bye("year","ordinal"),lnt=/(\d{4})-(\d\d)-(\d\d)/,$ye=RegExp(`${NX.source} ?(?:${qye.source}|(${Nye.source}))?`),cnt=RegExp(`(?: ${$ye.source})?`);function vS(t,e,r){let n=t[e];return kt(n)?r:_p(n)}function fnt(t,e){return[{year:vS(t,e),month:vS(t,e+1,1),day:vS(t,e+2,1)},null,e+3]}function RS(t,e){return[{hours:vS(t,e,0),minutes:vS(t,e+1,0),seconds:vS(t,e+2,0),milliseconds:RX(t[e+3])},null,e+4]}function zT(t,e){let r=!t[e]&&!t[e+1],n=oM(t[e+1],t[e+2]),i=r?null:tu.instance(n);return[{},i,e+3]}function GT(t,e){let r=t[e]?wx.create(t[e]):null;return[{},r,e+1]}var xnt=RegExp(`^T?${NX.source}$`),dnt=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function hnt(t){let[e,r,n,i,s,o,a,u,l]=t,c=e[0]==="-",f=u&&u[0]==="-",x=(d,h=!1)=>d!==void 0&&(h||d&&c)?-d:d;return[{years:x(Vm(r)),months:x(Vm(n)),weeks:x(Vm(i)),days:x(Vm(s)),hours:x(Vm(o)),minutes:x(Vm(a)),seconds:x(Vm(u),u==="-0"),milliseconds:x(RX(l),f)}]}var pnt={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function wX(t,e,r,n,i,s,o){let a={year:e.length===2?yX(_p(e)):_p(e),month:Fye.indexOf(r)+1,day:_p(n),hour:_p(i),minute:_p(s)};return o&&(a.second=_p(o)),t&&(a.weekday=t.length>3?Lye.indexOf(t)+1:Iye.indexOf(t)+1),a}var mnt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function gnt(t){let[,e,r,n,i,s,o,a,u,l,c,f]=t,x=wX(e,i,n,r,s,o,a),d;return u?d=pnt[u]:l?d=0:d=oM(c,f),[x,new tu(d)]}function ynt(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var Ent=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ant=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Snt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function V3e(t){let[,e,r,n,i,s,o,a]=t;return[wX(e,i,n,r,s,o,a),tu.utcInstance]}function vnt(t){let[,e,r,n,i,s,o,a]=t;return[wX(e,a,r,n,i,s,o),tu.utcInstance]}var _nt=bS(int,FX),bnt=bS(snt,FX),Tnt=bS(ont,FX),Cnt=bS(Uye),jye=TS(fnt,RS,zT,GT),Rnt=TS(ant,RS,zT,GT),Ont=TS(unt,RS,zT,GT),Dnt=TS(RS,zT,GT);function Nnt(t){return CS(t,[_nt,jye],[bnt,Rnt],[Tnt,Ont],[Cnt,Dnt])}function Fnt(t){return CS(ynt(t),[mnt,gnt])}function wnt(t){return CS(t,[Ent,V3e],[Ant,V3e],[Snt,vnt])}function Lnt(t){return CS(t,[dnt,hnt])}var Int=TS(RS);function Mnt(t){return CS(t,[xnt,Int])}var Pnt=bS(lnt,cnt),knt=bS($ye),Bnt=TS(RS,zT,GT);function qnt(t){return CS(t,[Pnt,jye],[knt,Bnt])}var Unt="Invalid Duration",Hye={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},$nt={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Hye},Qu=146097/400,SS=146097/4800,jnt={years:{quarters:4,months:12,weeks:Qu/7,days:Qu,hours:Qu*24,minutes:Qu*24*60,seconds:Qu*24*60*60,milliseconds:Qu*24*60*60*1e3},quarters:{months:3,weeks:Qu/28,days:Qu/4,hours:Qu*24/4,minutes:Qu*24*60/4,seconds:Qu*24*60*60/4,milliseconds:Qu*24*60*60*1e3/4},months:{weeks:SS/7,days:SS,hours:SS*24,minutes:SS*24*60,seconds:SS*24*60*60,milliseconds:SS*24*60*60*1e3},...Hye},Ym=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Hnt=Ym.slice(0).reverse();function Wm(t,e,r=!1){let n={values:r?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy};return new ri(n)}function znt(t){return t<0?Math.floor(t):Math.ceil(t)}function zye(t,e,r,n,i){let s=t[i][r],o=e[r]/s,a=Math.sign(o)===Math.sign(n[i]),u=!a&&n[i]!==0&&Math.abs(o)<=1?znt(o):Math.trunc(o);n[i]+=u,e[r]-=u*s}function Gnt(t,e){Hnt.reduce((r,n)=>kt(e[n])?r:(r&&zye(t,e,r,e,n),n),null)}var ri=class t{constructor(e){let r=e.conversionAccuracy==="longterm"||!1;this.values=e.values,this.loc=e.loc||Bn.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r?jnt:$nt,this.isLuxonDuration=!0}static fromMillis(e,r){return t.fromObject({milliseconds:e},r)}static fromObject(e,r={}){if(e==null||typeof e!="object")throw new ra(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new t({values:rM(e,t.normalizeUnit),loc:Bn.fromObject(r),conversionAccuracy:r.conversionAccuracy})}static fromDurationLike(e){if(Jm(e))return t.fromMillis(e);if(t.isDuration(e))return e;if(typeof e=="object")return t.fromObject(e);throw new ra(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,r){let[n]=Lnt(e);return n?t.fromObject(n,r):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,r){let[n]=Mnt(e);return n?t.fromObject(n,r):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,r=null){if(!e)throw new ra("need to specify a reason the Duration is invalid");let n=e instanceof Za?e:new Za(e,r);if(cn.throwOnInvalid)throw new mX(n);return new t({invalid:n})}static normalizeUnit(e){let r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!r)throw new ZI(e);return r}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,r={}){let n={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Xl.create(this.loc,n).formatDurationFromString(this,e):Unt}toHuman(e={}){let r=Ym.map(n=>{let i=this.values[n];return kt(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(i)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=OX(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let r=this.toMillis();if(r<0||r>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};let n=this.shiftTo("hours","minutes","seconds","milliseconds"),i=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||n.seconds!==0||n.milliseconds!==0)&&(i+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||n.milliseconds!==0)&&(i+=".SSS"));let s=n.toFormat(i);return e.includePrefix&&(s="T"+s),s}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let r=t.fromDurationLike(e),n={};for(let i of Ym)(_S(r.values,i)||_S(this.values,i))&&(n[i]=r.get(i)+this.get(i));return Wm(this,{values:n},!0)}minus(e){if(!this.isValid)return this;let r=t.fromDurationLike(e);return this.plus(r.negate())}mapUnits(e){if(!this.isValid)return this;let r={};for(let n of Object.keys(this.values))r[n]=Dye(e(this.values[n],n));return Wm(this,{values:r},!0)}get(e){return this[t.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let r={...this.values,...rM(e,t.normalizeUnit)};return Wm(this,{values:r})}reconfigure({locale:e,numberingSystem:r,conversionAccuracy:n}={}){let i=this.loc.clone({locale:e,numberingSystem:r}),s={loc:i};return n&&(s.conversionAccuracy=n),Wm(this,s)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return Gnt(this.matrix,e),Wm(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>t.normalizeUnit(o));let r={},n={},i=this.toObject(),s;for(let o of Ym)if(e.indexOf(o)>=0){s=o;let a=0;for(let l in n)a+=this.matrix[l][o]*n[l],n[l]=0;Jm(i[o])&&(a+=i[o]);let u=Math.trunc(a);r[o]=u,n[o]=(a*1e3-u*1e3)/1e3;for(let l in i)Ym.indexOf(l)>Ym.indexOf(o)&&zye(this.matrix,i,l,r,o)}else Jm(i[o])&&(n[o]=i[o]);for(let o in n)n[o]!==0&&(r[s]+=o===s?n[o]:n[o]/this.matrix[s][o]);return Wm(this,{values:r},!0).normalize()}negate(){if(!this.isValid)return this;let e={};for(let r of Object.keys(this.values))e[r]=this.values[r]===0?0:-this.values[r];return Wm(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function r(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(let n of Ym)if(!r(this.values[n],e.values[n]))return!1;return!0}},PT="Invalid Interval";function Qnt(t,e){return!t||!t.isValid?Zm.invalid("missing or invalid start"):!e||!e.isValid?Zm.invalid("missing or invalid end"):e<t?Zm.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}var Zm=class t{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,r=null){if(!e)throw new ra("need to specify a reason the Interval is invalid");let n=e instanceof Za?e:new Za(e,r);if(cn.throwOnInvalid)throw new pX(n);return new t({invalid:n})}static fromDateTimes(e,r){let n=qT(e),i=qT(r),s=Qnt(n,i);return s??new t({start:n,end:i})}static after(e,r){let n=ri.fromDurationLike(r),i=qT(e);return t.fromDateTimes(i,i.plus(n))}static before(e,r){let n=ri.fromDurationLike(r),i=qT(e);return t.fromDateTimes(i.minus(n),i)}static fromISO(e,r){let[n,i]=(e||"").split("/",2);if(n&&i){let s,o;try{s=fn.fromISO(n,r),o=s.isValid}catch{o=!1}let a,u;try{a=fn.fromISO(i,r),u=a.isValid}catch{u=!1}if(o&&u)return t.fromDateTimes(s,a);if(o){let l=ri.fromISO(i,r);if(l.isValid)return t.after(s,l)}else if(u){let l=ri.fromISO(n,r);if(l.isValid)return t.before(a,l)}}return t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;let r=this.start.startOf(e),n=this.end.startOf(e);return Math.floor(n.diff(r,e).get(e))+1}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:r}={}){return this.isValid?t.fromDateTimes(e||this.s,r||this.e):this}splitAt(...e){if(!this.isValid)return[];let r=e.map(qT).filter(o=>this.contains(o)).sort(),n=[],{s:i}=this,s=0;for(;i<this.e;){let o=r[s]||this.e,a=+o>+this.e?this.e:o;n.push(t.fromDateTimes(i,a)),i=a,s+=1}return n}splitBy(e){let r=ri.fromDurationLike(e);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:n}=this,i=1,s,o=[];for(;n<this.e;){let a=this.start.plus(r.mapUnits(u=>u*i));s=+a>+this.e?this.e:a,o.push(t.fromDateTimes(n,s)),n=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let r=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return r>=n?null:t.fromDateTimes(r,n)}union(e){if(!this.isValid)return this;let r=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return t.fromDateTimes(r,n)}static merge(e){let[r,n]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return n&&r.push(n),r}static xor(e){let r=null,n=0,i=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((u,l)=>u.time-l.time);for(let u of a)n+=u.type==="s"?1:-1,n===1?r=u.time:(r&&+r!=+u.time&&i.push(t.fromDateTimes(r,u.time)),r=null);return t.merge(i)}difference(...e){return t.xor([this].concat(e)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:PT}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:PT}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:PT}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:PT}toFormat(e,{separator:r=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${r}${this.e.toFormat(e)}`:PT}toDuration(e,r){return this.isValid?this.e.diff(this.s,e,r):ri.invalid(this.invalidReason)}mapEndpoints(e){return t.fromDateTimes(e(this.s),e(this.e))}},Xm=class{static hasDST(e=cn.defaultZone){let r=fn.now().setZone(e).set({month:12});return!e.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(e){return wx.isValidZone(e)}static normalizeZone(e){return bp(e,cn.defaultZone)}static months(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Bn.create(r,n,s)).months(e)}static monthsFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Bn.create(r,n,s)).months(e,!0)}static weekdays(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||Bn.create(r,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||Bn.create(r,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Bn.create(e).meridiems()}static eras(e="short",{locale:r=null}={}){return Bn.create(r,null,"gregory").eras(e)}static features(){return{relative:Rye()}}};function W3e(t,e){let r=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=r(e)-r(t);return Math.floor(ri.fromMillis(n).as("days"))}function Vnt(t,e,r){let n=[["years",(a,u)=>u.year-a.year],["quarters",(a,u)=>u.quarter-a.quarter],["months",(a,u)=>u.month-a.month+(u.year-a.year)*12],["weeks",(a,u)=>{let l=W3e(a,u);return(l-l%7)/7}],["days",W3e]],i={},s,o;for(let[a,u]of n)if(r.indexOf(a)>=0){s=a;let l=u(t,e);o=t.plus({[a]:l}),o>e?(t=t.plus({[a]:l-1}),l-=1):t=o,i[a]=l}return[t,i,o,s]}function Wnt(t,e,r,n){let[i,s,o,a]=Vnt(t,e,r),u=e-i,l=r.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);l.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+u/(o-i)));let c=ri.fromObject(s,n);return l.length>0?ri.fromMillis(u,n).shiftTo(...l).plus(c):c}var LX={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},Y3e={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Ynt=LX.hanidec.replace(/[\[|\]]/g,"").split("");function Knt(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(t[r].search(LX.hanidec)!==-1)e+=Ynt.indexOf(t[r]);else for(let i in Y3e){let[s,o]=Y3e[i];n>=s&&n<=o&&(e+=n-s)}}return parseInt(e,10)}else return e}function Yl({numberingSystem:t},e=""){return new RegExp(`${LX[t||"latn"]}${e}`)}var Xnt="missing Intl.DateTimeFormat.formatToParts support";function Wt(t,e=r=>r){return{regex:t,deser:([r])=>e(Knt(r))}}var Jnt="\xA0",Gye=`[ ${Jnt}]`,Qye=new RegExp(Gye,"g");function Znt(t){return t.replace(/\./g,"\\.?").replace(Qye,Gye)}function K3e(t){return t.replace(/\./g,"").replace(Qye," ").toLowerCase()}function Kl(t,e){return t===null?null:{regex:RegExp(t.map(Znt).join("|")),deser:([r])=>t.findIndex(n=>K3e(r)===K3e(n))+e}}function X3e(t,e){return{regex:t,deser:([,r,n])=>oM(r,n),groups:e}}function uX(t){return{regex:t,deser:([e])=>e}}function eit(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function tit(t,e){let r=Yl(e),n=Yl(e,"{2}"),i=Yl(e,"{3}"),s=Yl(e,"{4}"),o=Yl(e,"{6}"),a=Yl(e,"{1,2}"),u=Yl(e,"{1,3}"),l=Yl(e,"{1,6}"),c=Yl(e,"{1,9}"),f=Yl(e,"{2,4}"),x=Yl(e,"{4,6}"),d=m=>({regex:RegExp(eit(m.val)),deser:([g])=>g,literal:!0}),p=(m=>{if(t.literal)return d(m);switch(m.val){case"G":return Kl(e.eras("short",!1),0);case"GG":return Kl(e.eras("long",!1),0);case"y":return Wt(l);case"yy":return Wt(f,yX);case"yyyy":return Wt(s);case"yyyyy":return Wt(x);case"yyyyyy":return Wt(o);case"M":return Wt(a);case"MM":return Wt(n);case"MMM":return Kl(e.months("short",!0,!1),1);case"MMMM":return Kl(e.months("long",!0,!1),1);case"L":return Wt(a);case"LL":return Wt(n);case"LLL":return Kl(e.months("short",!1,!1),1);case"LLLL":return Kl(e.months("long",!1,!1),1);case"d":return Wt(a);case"dd":return Wt(n);case"o":return Wt(u);case"ooo":return Wt(i);case"HH":return Wt(n);case"H":return Wt(a);case"hh":return Wt(n);case"h":return Wt(a);case"mm":return Wt(n);case"m":return Wt(a);case"q":return Wt(a);case"qq":return Wt(n);case"s":return Wt(a);case"ss":return Wt(n);case"S":return Wt(u);case"SSS":return Wt(i);case"u":return uX(c);case"uu":return uX(a);case"uuu":return Wt(r);case"a":return Kl(e.meridiems(),0);case"kkkk":return Wt(s);case"kk":return Wt(f,yX);case"W":return Wt(a);case"WW":return Wt(n);case"E":case"c":return Wt(r);case"EEE":return Kl(e.weekdays("short",!1,!1),1);case"EEEE":return Kl(e.weekdays("long",!1,!1),1);case"ccc":return Kl(e.weekdays("short",!0,!1),1);case"cccc":return Kl(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return X3e(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return X3e(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return uX(/[a-z_+-/]{1,256}?/i);default:return d(m)}})(t)||{invalidReason:Xnt};return p.token=t,p}var rit={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function nit(t,e,r){let{type:n,value:i}=t;if(n==="literal")return{literal:!0,val:i};let s=r[n],o=rit[n];if(typeof o=="object"&&(o=o[s]),o)return{literal:!1,val:o}}function iit(t){return[`^${t.map(r=>r.regex).reduce((r,n)=>`${r}(${n.source})`,"")}$`,t]}function sit(t,e,r){let n=t.match(e);if(n){let i={},s=1;for(let o in r)if(_S(r,o)){let a=r[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(n.slice(s,s+u))),s+=u}return[n,i]}else return[n,{}]}function oit(t){let e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},r=null,n;return kt(t.z)||(r=wx.create(t.z)),kt(t.Z)||(r||(r=new tu(t.Z)),n=t.Z),kt(t.q)||(t.M=(t.q-1)*3+1),kt(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),kt(t.u)||(t.S=RX(t.u)),[Object.keys(t).reduce((s,o)=>{let a=e(o);return a&&(s[a]=t[o]),s},{}),r,n]}var lX=null;function ait(){return lX||(lX=fn.fromMillis(1555555555555)),lX}function uit(t,e){if(t.literal)return t;let r=Xl.macroTokenToFormatOpts(t.val);if(!r)return t;let s=Xl.create(e,r).formatDateTimeParts(ait()).map(o=>nit(o,e,r));return s.includes(void 0)?t:s}function lit(t,e){return Array.prototype.concat(...t.map(r=>uit(r,e)))}function Vye(t,e,r){let n=lit(Xl.parseFormat(r),t),i=n.map(o=>tit(o,t)),s=i.find(o=>o.invalidReason);if(s)return{input:e,tokens:n,invalidReason:s.invalidReason};{let[o,a]=iit(i),u=RegExp(o,"i"),[l,c]=sit(e,u,a),[f,x,d]=c?oit(c):[null,null,void 0];if(_S(c,"a")&&_S(c,"H"))throw new Km("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:n,regex:u,rawMatches:l,matches:c,result:f,zone:x,specificOffset:d}}}function cit(t,e,r){let{result:n,zone:i,specificOffset:s,invalidReason:o}=Vye(t,e,r);return[n,i,s,o]}var Wye=[0,31,59,90,120,151,181,212,243,273,304,334],Yye=[0,31,60,91,121,152,182,213,244,274,305,335];function Vu(t,e){return new Za("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function Kye(t,e,r){let n=new Date(Date.UTC(t,e-1,r));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);let i=n.getUTCDay();return i===0?7:i}function Xye(t,e,r){return r+(HT(t)?Yye:Wye)[e-1]}function Jye(t,e){let r=HT(t)?Yye:Wye,n=r.findIndex(s=>s<e),i=e-r[n];return{month:n+1,day:i}}function CX(t){let{year:e,month:r,day:n}=t,i=Xye(e,r,n),s=Kye(e,r,n),o=Math.floor((i-s+10)/7),a;return o<1?(a=e-1,o=tM(a)):o>tM(e)?(a=e+1,o=1):a=e,{weekYear:a,weekNumber:o,weekday:s,...aM(t)}}function J3e(t){let{weekYear:e,weekNumber:r,weekday:n}=t,i=Kye(e,1,4),s=$T(e),o=r*7+n-i-3,a;o<1?(a=e-1,o+=$T(a)):o>s?(a=e+1,o-=$T(e)):a=e;let{month:u,day:l}=Jye(a,o);return{year:a,month:u,day:l,...aM(t)}}function cX(t){let{year:e,month:r,day:n}=t,i=Xye(e,r,n);return{year:e,ordinal:i,...aM(t)}}function Z3e(t){let{year:e,ordinal:r}=t,{month:n,day:i}=Jye(e,r);return{year:e,month:n,day:i,...aM(t)}}function fit(t){let e=sM(t.weekYear),r=Nx(t.weekNumber,1,tM(t.weekYear)),n=Nx(t.weekday,1,7);return e?r?n?!1:Vu("weekday",t.weekday):Vu("week",t.week):Vu("weekYear",t.weekYear)}function xit(t){let e=sM(t.year),r=Nx(t.ordinal,1,$T(t.year));return e?r?!1:Vu("ordinal",t.ordinal):Vu("year",t.year)}function Zye(t){let e=sM(t.year),r=Nx(t.month,1,12),n=Nx(t.day,1,eM(t.year,t.month));return e?r?n?!1:Vu("day",t.day):Vu("month",t.month):Vu("year",t.year)}function eEe(t){let{hour:e,minute:r,second:n,millisecond:i}=t,s=Nx(e,0,23)||e===24&&r===0&&n===0&&i===0,o=Nx(r,0,59),a=Nx(n,0,59),u=Nx(i,0,999);return s?o?a?u?!1:Vu("millisecond",i):Vu("second",n):Vu("minute",r):Vu("hour",e)}var fX="Invalid DateTime",eye=864e13;function YI(t){return new Za("unsupported zone",`the zone "${t.name}" is not supported`)}function xX(t){return t.weekData===null&&(t.weekData=CX(t.c)),t.weekData}function kT(t,e){let r={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new fn({...r,...e,old:r})}function tEe(t,e,r){let n=t-e*60*1e3,i=r.offset(n);if(e===i)return[n,e];n-=(i-e)*60*1e3;let s=r.offset(n);return i===s?[n,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function tye(t,e){t+=e*60*1e3;let r=new Date(t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function JI(t,e,r){return tEe(DX(t),e,r)}function rye(t,e){let r=t.o,n=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:n,month:i,day:Math.min(t.c.day,eM(n,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=ri.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=DX(s),[u,l]=tEe(a,r,t.zone);return o!==0&&(u+=o,l=t.zone.offset(u)),{ts:u,o:l}}function BT(t,e,r,n,i,s){let{setZone:o,zone:a}=r;if(t&&Object.keys(t).length!==0){let u=e||a,l=fn.fromObject(t,{...r,zone:u,specificOffset:s});return o?l:l.setZone(a)}else return fn.invalid(new Za("unparsable",`the input "${i}" can't be parsed as ${n}`))}function KI(t,e,r=!0){return t.isValid?Xl.create(Bn.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(t,e):null}function dX(t,e){let r=t.c.year>9999||t.c.year<0,n="";return r&&t.c.year>=0&&(n+="+"),n+=kn(t.c.year,r?6:4),e?(n+="-",n+=kn(t.c.month),n+="-",n+=kn(t.c.day)):(n+=kn(t.c.month),n+=kn(t.c.day)),n}function nye(t,e,r,n,i,s){let o=kn(t.c.hour);return e?(o+=":",o+=kn(t.c.minute),(t.c.second!==0||!r)&&(o+=":")):o+=kn(t.c.minute),(t.c.second!==0||!r)&&(o+=kn(t.c.second),(t.c.millisecond!==0||!n)&&(o+=".",o+=kn(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=kn(Math.trunc(-t.o/60)),o+=":",o+=kn(Math.trunc(-t.o%60))):(o+="+",o+=kn(Math.trunc(t.o/60)),o+=":",o+=kn(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}var rEe={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},dit={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},hit={ordinal:1,hour:0,minute:0,second:0,millisecond:0},nEe=["year","month","day","hour","minute","second","millisecond"],pit=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],mit=["year","ordinal","hour","minute","second","millisecond"];function iye(t){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new ZI(t);return e}function sye(t,e){let r=bp(e.zone,cn.defaultZone),n=Bn.fromObject(e),i=cn.now(),s,o;if(kt(t.year))s=i;else{for(let l of nEe)kt(t[l])&&(t[l]=rEe[l]);let a=Zye(t)||eEe(t);if(a)return fn.invalid(a);let u=r.offset(i);[s,o]=JI(t,u,r)}return new fn({ts:s,zone:r,loc:n,o})}function oye(t,e,r){let n=kt(r.round)?!0:r.round,i=(o,a)=>(o=OX(o,n||r.calendary?0:2,!0),e.loc.clone(r).relFormatter(r).format(o,a)),s=o=>r.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(r.unit)return i(s(r.unit),r.unit);for(let o of r.units){let a=s(o);if(Math.abs(a)>=1)return i(a,o)}return i(t>e?-0:0,r.units[r.units.length-1])}function aye(t){let e={},r;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],r=Array.from(t).slice(0,t.length-1)):r=Array.from(t),[e,r]}var fn=class t{constructor(e){let r=e.zone||cn.defaultZone,n=e.invalid||(Number.isNaN(e.ts)?new Za("invalid input"):null)||(r.isValid?null:YI(r));this.ts=kt(e.ts)?cn.now():e.ts;let i=null,s=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(r))[i,s]=[e.old.c,e.old.o];else{let a=r.offset(this.ts);i=tye(this.ts,a),n=Number.isNaN(i.year)?new Za("invalid input"):null,i=n?null:i,s=n?null:a}this._zone=r,this.loc=e.loc||Bn.create(),this.invalid=n,this.weekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new t({})}static local(){let[e,r]=aye(arguments),[n,i,s,o,a,u,l]=r;return sye({year:n,month:i,day:s,hour:o,minute:a,second:u,millisecond:l},e)}static utc(){let[e,r]=aye(arguments),[n,i,s,o,a,u,l]=r;return e.zone=tu.utcInstance,sye({year:n,month:i,day:s,hour:o,minute:a,second:u,millisecond:l},e)}static fromJSDate(e,r={}){let n=Ort(e)?e.valueOf():NaN;if(Number.isNaN(n))return t.invalid("invalid input");let i=bp(r.zone,cn.defaultZone);return i.isValid?new t({ts:n,zone:i,loc:Bn.fromObject(r)}):t.invalid(YI(i))}static fromMillis(e,r={}){if(Jm(e))return e<-eye||e>eye?t.invalid("Timestamp out of range"):new t({ts:e,zone:bp(r.zone,cn.defaultZone),loc:Bn.fromObject(r)});throw new ra(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,r={}){if(Jm(e))return new t({ts:e*1e3,zone:bp(r.zone,cn.defaultZone),loc:Bn.fromObject(r)});throw new ra("fromSeconds requires a numerical input")}static fromObject(e,r={}){e=e||{};let n=bp(r.zone,cn.defaultZone);if(!n.isValid)return t.invalid(YI(n));let i=cn.now(),s=kt(r.specificOffset)?n.offset(i):r.specificOffset,o=rM(e,iye),a=!kt(o.ordinal),u=!kt(o.year),l=!kt(o.month)||!kt(o.day),c=u||l,f=o.weekYear||o.weekNumber,x=Bn.fromObject(r);if((c||a)&&f)throw new Km("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&a)throw new Km("Can't mix ordinal dates with month/day");let d=f||o.weekday&&!c,h,p,m=tye(i,s);d?(h=pit,p=dit,m=CX(m)):a?(h=mit,p=hit,m=cX(m)):(h=nEe,p=rEe);let g=!1;for(let R of h){let O=o[R];kt(O)?g?o[R]=p[R]:o[R]=m[R]:g=!0}let y=d?fit(o):a?xit(o):Zye(o),A=y||eEe(o);if(A)return t.invalid(A);let S=d?J3e(o):a?Z3e(o):o,[T,_]=JI(S,s,n),b=new t({ts:T,zone:n,o:_,loc:x});return o.weekday&&c&&e.weekday!==b.weekday?t.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${b.toISO()}`):b}static fromISO(e,r={}){let[n,i]=Nnt(e);return BT(n,i,r,"ISO 8601",e)}static fromRFC2822(e,r={}){let[n,i]=Fnt(e);return BT(n,i,r,"RFC 2822",e)}static fromHTTP(e,r={}){let[n,i]=wnt(e);return BT(n,i,r,"HTTP",r)}static fromFormat(e,r,n={}){if(kt(e)||kt(r))throw new ra("fromFormat requires an input string and a format");let{locale:i=null,numberingSystem:s=null}=n,o=Bn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,u,l,c]=cit(o,e,r);return c?t.invalid(c):BT(a,u,n,`format ${r}`,e,l)}static fromString(e,r,n={}){return t.fromFormat(e,r,n)}static fromSQL(e,r={}){let[n,i]=qnt(e);return BT(n,i,r,"SQL",e)}static invalid(e,r=null){if(!e)throw new ra("need to specify a reason the DateTime is invalid");let n=e instanceof Za?e:new Za(e,r);if(cn.throwOnInvalid)throw new hX(n);return new t({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?xX(this).weekYear:NaN}get weekNumber(){return this.isValid?xX(this).weekNumber:NaN}get weekday(){return this.isValid?xX(this).weekday:NaN}get ordinal(){return this.isValid?cX(this.c).ordinal:NaN}get monthShort(){return this.isValid?Xm.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Xm.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Xm.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Xm.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return HT(this.year)}get daysInMonth(){return eM(this.year,this.month)}get daysInYear(){return this.isValid?$T(this.year):NaN}get weeksInWeekYear(){return this.isValid?tM(this.weekYear):NaN}resolvedLocaleOptions(e={}){let{locale:r,numberingSystem:n,calendar:i}=Xl.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:r,numberingSystem:n,outputCalendar:i}}toUTC(e=0,r={}){return this.setZone(tu.instance(e),r)}toLocal(){return this.setZone(cn.defaultZone)}setZone(e,{keepLocalTime:r=!1,keepCalendarTime:n=!1}={}){if(e=bp(e,cn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(r||n){let s=e.offset(this.ts),o=this.toObject();[i]=JI(o,s,e)}return kT(this,{ts:i,zone:e})}else return t.invalid(YI(e))}reconfigure({locale:e,numberingSystem:r,outputCalendar:n}={}){let i=this.loc.clone({locale:e,numberingSystem:r,outputCalendar:n});return kT(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let r=rM(e,iye),n=!kt(r.weekYear)||!kt(r.weekNumber)||!kt(r.weekday),i=!kt(r.ordinal),s=!kt(r.year),o=!kt(r.month)||!kt(r.day),a=s||o,u=r.weekYear||r.weekNumber;if((a||i)&&u)throw new Km("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&i)throw new Km("Can't mix ordinal dates with month/day");let l;n?l=J3e({...CX(this.c),...r}):kt(r.ordinal)?(l={...this.toObject(),...r},kt(r.day)&&(l.day=Math.min(eM(l.year,l.month),l.day))):l=Z3e({...cX(this.c),...r});let[c,f]=JI(l,this.o,this.zone);return kT(this,{ts:c,o:f})}plus(e){if(!this.isValid)return this;let r=ri.fromDurationLike(e);return kT(this,rye(this,r))}minus(e){if(!this.isValid)return this;let r=ri.fromDurationLike(e).negate();return kT(this,rye(this,r))}startOf(e){if(!this.isValid)return this;let r={},n=ri.normalizeUnit(e);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(n==="weeks"&&(r.weekday=1),n==="quarters"){let i=Math.ceil(this.month/3);r.month=(i-1)*3+1}return this.set(r)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,r={}){return this.isValid?Xl.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,e):fX}toLocaleString(e=gX,r={}){return this.isValid?Xl.create(this.loc.clone(r),e).formatDateTime(this):fX}toLocaleParts(e={}){return this.isValid?Xl.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:r=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;let o=e==="extended",a=dX(this,o);return a+="T",a+=nye(this,o,r,n,i,s),a}toISODate({format:e="extended"}={}){return this.isValid?dX(this,e==="extended"):null}toISOWeekDate(){return KI(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:r=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+nye(this,o==="extended",r,e,n,s):null}toRFC2822(){return KI(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return KI(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?dX(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:r=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(r||e)&&(n&&(i+=" "),r?i+="z":e&&(i+="ZZ")),KI(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():fX}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let r={...this.c};return e.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,r="milliseconds",n={}){if(!this.isValid||!e.isValid)return ri.invalid("created by diffing an invalid DateTime");let i={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=Drt(r).map(ri.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,u=o?e:this,l=Wnt(a,u,s,i);return o?l.negate():l}diffNow(e="milliseconds",r={}){return this.diff(t.now(),e,r)}until(e){return this.isValid?Zm.fromDateTimes(this,e):this}hasSame(e,r){if(!this.isValid)return!1;let n=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(r)<=n&&n<=i.endOf(r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let r=e.base||t.fromObject({},{zone:this.zone}),n=e.padding?this<r?-e.padding:e.padding:0,i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),oye(r,this.plus(n),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?oye(e.base||t.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(t.isDateTime))throw new ra("min requires all arguments be DateTimes");return B3e(e,r=>r.valueOf(),Math.min)}static max(...e){if(!e.every(t.isDateTime))throw new ra("max requires all arguments be DateTimes");return B3e(e,r=>r.valueOf(),Math.max)}static fromFormatExplain(e,r,n={}){let{locale:i=null,numberingSystem:s=null}=n,o=Bn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return Vye(o,e,r)}static fromStringExplain(e,r,n={}){return t.fromFormatExplain(e,r,n)}static get DATE_SHORT(){return gX}static get DATE_MED(){return uye}static get DATE_MED_WITH_WEEKDAY(){return Trt}static get DATE_FULL(){return lye}static get DATE_HUGE(){return cye}static get TIME_SIMPLE(){return fye}static get TIME_WITH_SECONDS(){return xye}static get TIME_WITH_SHORT_OFFSET(){return dye}static get TIME_WITH_LONG_OFFSET(){return hye}static get TIME_24_SIMPLE(){return pye}static get TIME_24_WITH_SECONDS(){return mye}static get TIME_24_WITH_SHORT_OFFSET(){return gye}static get TIME_24_WITH_LONG_OFFSET(){return yye}static get DATETIME_SHORT(){return Eye}static get DATETIME_SHORT_WITH_SECONDS(){return Aye}static get DATETIME_MED(){return Sye}static get DATETIME_MED_WITH_SECONDS(){return vye}static get DATETIME_MED_WITH_WEEKDAY(){return Crt}static get DATETIME_FULL(){return _ye}static get DATETIME_FULL_WITH_SECONDS(){return bye}static get DATETIME_HUGE(){return Tye}static get DATETIME_HUGE_WITH_SECONDS(){return Cye}};function qT(t){if(fn.isDateTime(t))return t;if(t&&t.valueOf&&Jm(t.valueOf()))return fn.fromJSDate(t);if(t&&typeof t=="object")return fn.fromObject(t);throw new ra(`Unknown datetime argument: ${t}, of type ${typeof t}`)}var git="2.5.2";ru.DateTime=fn;ru.Duration=ri;ru.FixedOffsetZone=tu;ru.IANAZone=wx;ru.Info=Xm;ru.Interval=Zm;ru.InvalidZone=iM;ru.Settings=cn;ru.SystemZone=nM;ru.VERSION=git;ru.Zone=Tp});var lEe=v(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.LiteralYear=Ni.LiteralQuarter=Ni.LiteralMonth=Ni.LiteralWeek=Ni.LiteralDay=Ni.LiteralHour=Ni.LiteralTimestamp=Ni.TimeFormatError=void 0;var Cp=IX(),yit=Xe(),Eit=ES(),iEe=ZL(),MX=ir(),PX=class extends Error{};Ni.TimeFormatError=PX;function tg(t,e){let r=t.slice(1);if(e){let n=r.match(/\[[^\]]+]$/);if(n)return{tzSpec:n[0].slice(1,-1),text:r.slice(0,-n[0].length)}}return{text:r}}var sEe="yyyy",oEe=`${sEe}-LL`,Wu=`${oEe}-dd`,aEe=`${Wu} HH`,uEe=`${aEe}:mm`,kX=`${uEe}:ss`,uM=class extends MX.ExpressionDef{constructor(e,r,n){super(),this.units=r,this.timeType=n,this.literalPart=e.text,e.tzSpec&&(this.timeZone=e.tzSpec)}makeLiteral(e,r){let n={type:"dialect",function:"timeLiteral",literal:e,literalType:r};return this.timeZone&&(n.timezone=this.timeZone),n}makeValue(e,r){let n=this.makeLiteral(e,r),i="scalar",s=[n];return this.units?{dataType:r,expressionType:i,value:s,timeframe:this.units,evalSpace:"literal"}:{dataType:r,expressionType:i,value:s,evalSpace:"literal"}}getExpression(e){return this.makeValue(this.literalPart,this.timeType)}getNext(){if(this.nextLit)return this.makeValue(this.nextLit,this.timeType)}granular(){return this.nextLit!==void 0}},BX=class t extends uM{constructor(e,r){super(e,r,"timestamp"),this.elementType="literal:timestamp"}static parse(e){let r,n=tg(e,!0);e=n.text,e[10]==="T"&&(e=e.slice(0,10)+" "+e.slice(11),n.text=e);let i=e.match(/^([^.,]+)[,.](\d+)$/);i&&(e=i[1]);let s=Cp.DateTime.fromFormat(e,kX);if(s.isValid)return new t(n,r);if(s=Cp.DateTime.fromFormat(e,uEe),s.isValid){n.text=n.text+":00",r="minute";let o=s.plus({minute:1}).toFormat(kX);return new QT(n,r,"timestamp",o)}}};Ni.LiteralTimestamp=BX;var QT=class extends uM{constructor(e,r,n,i){super(e,r,n),this.nextLit=i,this.elementType="granularTimeLiteral"}apply(e,r,n){let i=this.getExpression(e),s=this.getNext();if(s){let o=n.getExpression(e);if(o.dataType==="timestamp"){let a=(0,MX.getMorphicValue)(i,"timestamp"),u=(0,MX.getMorphicValue)(s,"timestamp");if(a&&u)i=a,s=u;else return super.apply(e,r,n)}if((0,yit.isTimeFieldType)(o.dataType)){let a=o.dataType;return new Eit.Range(new iEe.ExprTime(a,i.value),new iEe.ExprTime(a,s.value)).apply(e,r,n)}}return super.apply(e,r,n)}},qX=class t extends QT{constructor(e,r){super(e,"hour","timestamp",r),this.elementType="literal:hour"}static parse(e){let r=tg(e,!1),n=r.text,i=Cp.DateTime.fromFormat(r.text,aEe);if(i.isValid)return r.text=r.text+":00:00",n=i.plus({hour:1}).toFormat(kX),new t(r,n)}};Ni.LiteralHour=qX;var eg=class extends QT{constructor(e,r,n){super(e,r,"date",n)}getExpression(e){let r=this.makeValue(this.literalPart,"date"),n=[this.makeLiteral(`${this.literalPart} 00:00:00`,"timestamp")];return{...r,morphic:{timestamp:n},evalSpace:"literal"}}getNext(){let e=this.makeValue(this.nextLit,"date"),r=[this.makeLiteral(`${this.nextLit} 00:00:00`,"timestamp")];return{...e,morphic:{timestamp:r}}}},UX=class t extends eg{constructor(e,r){super(e,"day",r),this.elementType="literal:day"}static parse(e){let r=tg(e,!1),n=r.text,i=Cp.DateTime.fromFormat(r.text,Wu);if(i.isValid)return n=i.plus({day:1}).toFormat(Wu),new t(r,n)}};Ni.LiteralDay=UX;var $X=class t extends eg{constructor(e,r){super(e,"week",r),this.elementType="literal:week"}static parse(e){let r=tg(e,!1),n=r.text,i=r.text.slice(0,10),s=Cp.DateTime.fromFormat(i,Wu);if(s.isValid&&s.weekday===7){let a=s.plus({days:7});return r.text=s.toFormat(Wu),n=a.toFormat(Wu),new t(r,n)}}};Ni.LiteralWeek=$X;var jX=class t extends eg{constructor(e,r){super(e,"month",r),this.elementType="literal:month"}static parse(e){let r=tg(e,!1),n=r.text,i=Cp.DateTime.fromFormat(r.text,oEe);if(i.isValid){let s=i.plus({months:1});return r.text=i.toFormat(Wu),n=s.toFormat(Wu),new t(r,n)}}};Ni.LiteralMonth=jX;var HX=class t extends eg{constructor(e,r){super(e,"quarter",r),this.elementType="literal:quarter"}static parse(e){let r=tg(e,!1),n=r.text,i=r.text.match(/(^\d{4})-[qQ](\d)$/);if(i){let s=Number.parseInt(i[2])-1,o=Cp.DateTime.fromFormat(i[1],"yyyy");s>0&&(o=o.plus({quarters:s}));let a=o.plus({quarter:1});return r.text=o.toFormat(Wu),n=a.toFormat(Wu),new t(r,n)}}};Ni.LiteralQuarter=HX;var zX=class t extends eg{constructor(e,r){super(e,"year",r),this.elementType="literal:year"}static parse(e){let r=tg(e,!1),n=r.text,i=Cp.DateTime.fromFormat(r.text,sEe);if(i.isValid){let s=i.plus({year:1});return r.text=i.toFormat(Wu),n=s.toFormat(Wu),new t(r,n)}}};Ni.LiteralYear=zX});var cEe=v(lM=>{"use strict";Object.defineProperty(lM,"__esModule",{value:!0});lM.PartialCompare=void 0;var Ait=Ps(),Sit=ir(),GX=class extends Sit.ExpressionDef{constructor(e,r){super({right:r}),this.op=e,this.right=r,this.elementType="<=> a"}granular(){return this.right.granular()}apply(e,r,n){return this.right.apply(e,this.op,n)}requestExpression(e){}getExpression(e){return this.log("Partial comparison does not have a value"),(0,Ait.errorFor)("no value for partial compare")}};lM.PartialCompare=GX});var xEe=v(OS=>{"use strict";Object.defineProperty(OS,"__esModule",{value:!0});OS.PickWhen=OS.Pick=void 0;var $c=Xe(),Rp=Ps(),Zl=un(),vit=ir(),_it=Et(),fEe=ls();function cM(t,e){return t===void 0||t.dataType==="null"||t.dataType==="error"?e:t}var QX=class extends vit.ExpressionDef{constructor(e,r){super({choices:e}),this.choices=e,this.elsePick=r,this.elementType="pick",this.has({elsePick:r})}requestExpression(e){if(this.elsePick!==void 0){for(let r of this.choices){if(r.pick===void 0)return;let n=r.when.requestExpression(e);if(n===void 0||n.dataType!=="boolean")return}return this.getExpression(e)}}apply(e,r,n){let i=["CASE"],s,o="scalar",a="constant";for(let c of this.choices){let f=c.when.apply(e,"=",n),x=c.pick?c.pick.getExpression(e):n.getExpression(e);if(o=(0,$c.maxExpressionType)(o,(0,$c.maxExpressionType)(f.expressionType,x.expressionType)),a=(0,$c.mergeEvalSpaces)(a,f.evalSpace,x.evalSpace),s&&!Zl.FT.typeEq(s,x,!0)){let d=Zl.FT.inspect(x);return this.log(`pick type '${d}', expected '${s.dataType}'`),(0,Rp.errorFor)("pick when type")}s=cM(s,x),i.push(" WHEN ",...f.value," THEN ",...x.value)}let l=(this.elsePick||n).getExpression(e);if(s=cM(s,l),!Zl.FT.typeEq(s,l,!0)){let c=this.elsePick?"else":"pick default";return this.log(`${c} type '${Zl.FT.inspect(l)}', expected '${s.dataType}'`),(0,Rp.errorFor)("pick else type")}return{dataType:s.dataType,expressionType:(0,$c.maxExpressionType)(o,l.expressionType),evalSpace:(0,$c.mergeEvalSpaces)(a,l.evalSpace),value:(0,fEe.compressExpr)([...i," ELSE ",...l.value," END"])}}getExpression(e){if(this.elsePick===void 0)return this.log("pick incomplete, missing 'else'"),(0,Rp.errorFor)("no value for partial pick");let r=[];for(let u of this.choices){if(u.pick===void 0)return this.log("pick with no value can only be used with apply"),(0,Rp.errorFor)("no value for partial pick");if(u.when.requestExpression(e)===void 0)return this.log("pick with partial when can only be used with apply"),(0,Rp.errorFor)("partial when");r.push({pick:u.pick.getExpression(e),when:u.when.getExpression(e)})}let n,i=["CASE"],s="scalar",o="constant";for(let u of r){if(!Zl.FT.typeEq(u.when,Zl.FT.boolT))return this.log(`when expression must be boolean, not '${Zl.FT.inspect(u.when)}`),(0,Rp.errorFor)("pick when type");if(n&&!Zl.FT.typeEq(n,u.pick,!0)){let l=Zl.FT.inspect(u.pick);return this.log(`pick type '${l}', expected '${n.dataType}'`),(0,Rp.errorFor)("pick value type")}n=cM(n,u.pick),s=(0,$c.maxExpressionType)(s,(0,$c.maxExpressionType)(u.pick.expressionType,u.when.expressionType)),o=(0,$c.mergeEvalSpaces)(o,u.pick.evalSpace,u.when.evalSpace),i.push(" WHEN ",...u.when.value," THEN ",...u.pick.value)}let a=this.elsePick.getExpression(e);return s=(0,$c.maxExpressionType)(s,a.expressionType),o=(0,$c.mergeEvalSpaces)(o,a.evalSpace),n=cM(n,a),Zl.FT.typeEq(n,a,!0)?(i.push(" ELSE ",...a.value," END"),{dataType:n.dataType,expressionType:s,value:(0,fEe.compressExpr)(i),evalSpace:o}):(this.elsePick.log(`else type '${Zl.FT.inspect(a)}', expected '${n.dataType}'`),(0,Rp.errorFor)("pick value type mismatch"))}};OS.Pick=QX;var VX=class extends _it.MalloyElement{constructor(e,r){super({when:r}),this.pick=e,this.when=r,this.elementType="pickWhen",this.has({pick:e})}};OS.PickWhen=VX});var dEe=v(fM=>{"use strict";Object.defineProperty(fM,"__esModule",{value:!0});fM.Timeframe=void 0;var bit=Xe(),Tit=Et(),WX=class extends Tit.MalloyElement{constructor(e){super(),this.elementType="timeframe";let r=e.toLowerCase();r.endsWith("s")&&(r=r.slice(0,-1)),this.text=(0,bit.isTimestampUnit)(r)?r:"second"}};fM.Timeframe=WX});var pEe=v(xM=>{"use strict";Object.defineProperty(xM,"__esModule",{value:!0});xM.TopBy=void 0;var Cit=Xe(),hEe=ir(),Rit=Et(),Oit=ls(),YX=class extends Rit.MalloyElement{constructor(e){super(),this.by=e,this.elementType="topBy",e instanceof hEe.ExpressionDef&&this.has({by:e})}getBy(e){if(this.by instanceof hEe.ExpressionDef){let r=this.by.getExpression(e);return(0,Cit.expressionIsAggregate)(r.expressionType)||this.log("top by expression must be an aggregate"),{by:"expression",e:(0,Oit.compressExpr)(r.value)}}return{by:"name",name:this.by}}};xM.TopBy=YX});var mEe=v(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});Op.ImportStatement=Op.ImportSelect=Op.ImportSourceName=void 0;var ZX=Et(),KX=class extends ZX.MalloyElement{constructor(e){super(),this.text=e,this.elementType="importSourceName"}};Op.ImportSourceName=KX;var XX=class extends ZX.MalloyElement{constructor(e,r){super(),this.text=e,this.from=r,this.elementType="importName",r&&this.has({from:r})}};Op.ImportSelect=XX;var JX=class extends ZX.ListOf{constructor(e,r){super([]),this.url=e,this.elementType="import statement";try{this.fullURL=decodeURI(new URL(e,r).toString())}catch{this.log("Invalid URI in import statement")}}needs(){let e=this.translator();if(e&&this.fullURL&&e.root.importZone.getEntry(this.fullURL).status==="present"){let n=e.childRequest(this.fullURL);if(n)return n}}execute(e){let r=this.translator();if(!r)this.log("Cannot import without translation context");else if(this.fullURL){let n=r.root.importZone.getEntry(this.fullURL);if(n.status==="present"){let i=r.getChildExports(this.fullURL);if(this.notEmpty())for(let s of this.list){let o=s.from||s;if(e.getEntry(s.text))s.log(`Cannot redefine '${s.text}'`);else if(i[o.text]){let a={...i[o.text]};s.from&&(a.as=s.text),e.setEntry(s.text,{entry:a,exported:!1})}else o.log(`Cannot find '${o.text}', not imported`)}else for(let[s,o]of Object.entries(r.getChildExports(this.fullURL)))e.getEntry(s)?this.log(`Cannot redefine '${s}'`):e.setEntry(s,{entry:o,exported:!1})}else n.status==="error"?this.log(`import failed: '${n.message}'`):this.log(`import failed with status: '${n.status}'`)}}};Op.ImportStatement=JX});var tJ=v(dM=>{"use strict";Object.defineProperty(dM,"__esModule",{value:!0});dM.ExtendBlock=void 0;var Dit=Et(),Nit=Ri(),eJ=class extends Dit.ListOf{constructor(){super(...arguments),this.elementType="extendBlock",this.forceQueryClass=void 0,this.queryRefinementStage=Nit.LegalRefinementStage.Single}queryExecute(e){for(let r of this.list)for(let n of r.list)e.inputFS.extendSource(n)}};dM.ExtendBlock=eJ});var gEe=v(hM=>{"use strict";Object.defineProperty(hM,"__esModule",{value:!0});hM.AnonymousQuery=void 0;var Fit=Et(),wit=kc(),rJ=class extends Fit.MalloyElement{constructor(e){super(),this.queryExpr=e,this.elementType="anonymousQuery",this.isNoteableObj=!0,this.extendNote=wit.extendNoteMethod,this.has({queryExpr:e})}execute(e){let r=this.queryExpr.getQuery();if(!r){this.queryExpr.sqLog("Cannot run this object as a query");return}let n={...r.query()},i=this.note||{};n.annotation&&(i.inherits=n.annotation),(i.notes||i.blockNotes||i.inherits)&&(n.annotation=i),e.queryList.push(n)}};hM.AnonymousQuery=rJ});var DS=v(pM=>{"use strict";Object.defineProperty(pM,"__esModule",{value:!0});pM.View=void 0;var Lit=Et(),nJ=class extends Lit.MalloyElement{pipeline(e,r){return this.pipelineComp(e,r).pipeline}};pM.View=nJ});var yEe=v(mM=>{"use strict";Object.defineProperty(mM,"__esModule",{value:!0});mM.ViewArrow=void 0;var Iit=Vl(),Mit=DS(),iJ=class extends Mit.View{constructor(e,r){super({base:e,operation:r}),this.base=e,this.operation=r,this.elementType="viewArrow"}pipelineComp(e){let r=this.base.pipelineComp(e),n=new Iit.StaticSpace(r.outputStruct),i=this.operation.pipelineComp(n);return{pipeline:[...r.pipeline,...i.pipeline],outputStruct:i.outputStruct}}refine(e,r,n){return this.log("A multi-segment view cannot be used as a refinement"),[]}};mM.ViewArrow=iJ});var oJ=v(gM=>{"use strict";Object.defineProperty(gM,"__esModule",{value:!0});gM.refine=void 0;var Pit=Wf();function kit(t,e,r){var n,i;if(e.length!==1)return t.log("Named refinements of multi-stage views are not supported"),e;let s={...e[0]},o=r;if((0,Pit.isRawSegment)(s))t.log("Cannot refine raw query, must add an explicit query stage");else{s.type==="partial"&&o.type!=="index"&&o.type!=="raw"?s.type=o.type:o.type!==s.type&&t.log(`cannot refine ${s.type} view with ${o.type} view`),o.type!=="index"&&s.type!=="index"&&o.type!=="raw"&&((o.orderBy!==void 0||o.by!==void 0)&&(s.orderBy===void 0&&s.by===void 0?o.orderBy?s.orderBy=o.orderBy:o.by&&(s.by=o.by):t.log("refinement cannot override existing ordering")),o.limit!==void 0&&(s.limit===void 0?s.limit=o.limit:t.log("refinement cannot override existing limit"))),s.filterList=s.filterList!==void 0||o.filterList!==void 0?[...(n=s.filterList)!==null&&n!==void 0?n:[],...(i=o.filterList)!==null&&i!==void 0?i:[]]:void 0;let a=[],u=[],l=new Map(s.fields.map(c=>[sJ(c),c]));for(let c of o.fields)l.has(sJ(c))?a.push(c):u.push(c);s.fields=[...s.fields,...u],a.length>0&&t.log(`overlapping fields in refinement: ${a.map(sJ)}`)}return[s]}gM.refine=kit;function sJ(t){var e;return typeof t=="string"?t:(e=t.as)!==null&&e!==void 0?e:t.name}});var EEe=v(yM=>{"use strict";Object.defineProperty(yM,"__esModule",{value:!0});yM.ViewRefine=void 0;var Bit=ea(),qit=$m(),Uit=oJ(),$it=DS(),aJ=class extends $it.View{constructor(e,r){super({base:e,refinement:r}),this.base=e,this.refinement=r,this.elementType="refine"}pipelineComp(e,r){let n=this.base.pipelineComp(e),i=this.refinement.refine(e,n.pipeline,r);return{pipeline:i,annotation:n.annotation,outputStruct:i.length>0?(0,qit.getFinalStruct)(this.refinement,e.structDef(),i):Bit.ErrorFactory.structDef}}refine(e,r,n){let i=this.pipeline(e,n);return i.length!==1?(this.refinement.log("refinement must have exactly one stage"),r):(0,Uit.refine)(this,r,i[0])}};yM.ViewRefine=aJ});var vEe=v(EM=>{"use strict";Object.defineProperty(EM,"__esModule",{value:!0});EM.ReferenceView=void 0;var AEe=Xe(),SEe=ea(),jit=$m(),Hit=Ja(),zit=oJ(),Git=DS(),uJ=class extends Git.View{constructor(e){super({reference:e}),this.reference=e,this.elementType="reference-view"}pipelineComp(e,r){return this._pipelineComp(e)}_pipelineComp(e,{forRefinement:r}={forRefinement:!1}){let n=this.reference.getField(e),i=function(){return{inputStruct:SEe.ErrorFactory.structDef,outputStruct:SEe.ErrorFactory.structDef,pipeline:[],error:!0}};if(!n.found)return this.log(`\`${this.reference.refString}\` is not defined`),i();if(!(n.found instanceof Hit.SpaceField))throw new Error("Expected space field");let s=n.found.fieldDef();if(s===void 0)throw new Error("Expected field to have definition");if((0,AEe.isAtomicFieldType)(s.type)){this.inExperiment("scalar_lenses",!0)||(r?this.reference.log(`Cannot use scalar field \`${this.reference.refString}\` as a refinement; use \`scalar_lenses\` experiment to enable this behavior`):this.reference.log(`Cannot use scalar field \`${this.reference.refString}\` as a view; use \`scalar_lenses\` experiment to enable this behavior`));let o={type:"reduce",fields:[this.reference.refString]},{dialect:a,queryTimezone:u,structRelationship:l}=e.structDef(),c=this.reference.nameString;return{pipeline:[o],name:c,outputStruct:{type:"struct",dialect:a,queryTimezone:u,name:c,fields:[s],structRelationship:l,structSource:{type:"query_result"}}}}else return(0,AEe.isTurtleDef)(s)?this.reference.list.length>1?(r?this.log("Cannot use view from join as refinement"):this.log("Cannot use view from join"),i()):{pipeline:[...s.pipeline],name:s.name,annotation:s.annotation,outputStruct:(0,jit.getFinalStruct)(this.reference,e.structDef(),s.pipeline)}:(r?this.reference.log(`named refinement \`${this.reference.refString}\` must be a view, found a ${s.type}`):this.reference.log("This operation is not supported"),i())}getRefinementSegment(e){let{pipeline:r,error:n}=this._pipelineComp(e,{forRefinement:!0});if(!n){if(r.length!==1){this.reference.log(`named refinement \`${this.reference.refString}\` must have exactly one stage`);return}return r[0]}}refine(e,r,n){let i=this.getRefinementSegment(e);return i?(0,zit.refine)(this,r,i):r}};EM.ReferenceView=uJ});var cJ=v(AM=>{"use strict";Object.defineProperty(AM,"__esModule",{value:!0});AM.Index=void 0;var Qit=Et(),Vit=Ri(),lJ=class extends Qit.MalloyElement{constructor(e){super({fields:e}),this.fields=e,this.elementType="index",this.forceQueryClass=Vit.QueryClass.Index,this.queryRefinementStage=void 0}useWeight(e){this.has({weightBy:e}),this.weightBy=e}};AM.Index=lJ});var vM=v(SM=>{"use strict";Object.defineProperty(SM,"__esModule",{value:!0});SM.Limit=void 0;var Wit=Et(),Yit=Ri(),fJ=class extends Wit.MalloyElement{constructor(e){super(),this.limit=e,this.elementType="limit",this.queryRefinementStage=Yit.LegalRefinementStage.Tail,this.forceQueryClass=void 0}};SM.Limit=fJ});var dJ=v(_M=>{"use strict";Object.defineProperty(_M,"__esModule",{value:!0});_M.SampleProperty=void 0;var Kit=Et(),_Ee=Ri(),xJ=class extends Kit.MalloyElement{constructor(e){super(),this.sample=e,this.elementType="sampleProperty",this.queryRefinementStage=_Ee.LegalRefinementStage.Tail,this.forceQueryClass=_Ee.QueryClass.Index}sampling(){return this.sample}};_M.SampleProperty=xJ});var TEe=v(bM=>{"use strict";Object.defineProperty(bM,"__esModule",{value:!0});bM.IndexFieldSpace=void 0;var bEe=AS(),Xit=MT(),hJ=class extends Xit.QuerySpace{constructor(){super(...arguments),this.segmentType="index",this.fieldList=new Set}pushFields(...e){for(let r of e)r instanceof bEe.FieldReference?r.getField(this.inputSpace()).found&&this.fieldList.add(r.refString):r instanceof bEe.WildcardFieldReference?this.fieldList.add(r.refString):r.log("Internal error, not expected in index query")}getPipeSegment(e){if(e&&e.fields)for(let r of e.fields)typeof r=="string"&&this.fieldList.add(r);return this.isComplete(),{type:"index",fields:Array.from(this.fieldList.values())}}};bM.IndexFieldSpace=hJ});var CEe=v(TM=>{"use strict";Object.defineProperty(TM,"__esModule",{value:!0});TM.IndexBuilder=void 0;var pJ=Xe(),Jit=ea(),Zit=cS(),est=cJ(),tst=vM(),rst=dJ(),nst=TEe(),mJ=class{constructor(e,r,n,i){this.filters=[],this.type="index",this.resultFS=new nst.IndexFieldSpace(e,r,n,i),this.inputFS=this.resultFS.inputSpace()}execute(e){e instanceof Zit.Filter?this.filters.push(...e.getFilterList(this.inputFS)):e instanceof tst.Limit?(this.limit&&this.limit.log("Ignored, too many limit: statements"),this.limit=e):e instanceof est.Index?(this.resultFS.pushFields(...e.fields.list),e.weightBy&&(this.indexOn&&this.indexOn.log("Ignoring previous BY"),this.indexOn=e.weightBy)):e instanceof rst.SampleProperty?this.sample=e.sampling():e.log("Not legal in an index query operation")}finalize(e){if(e&&!(0,pJ.isIndexSegment)(e)&&!(0,pJ.isPartialSegment)(e))return this.resultFS.log(`Can't refine index with ${e.type}`),Jit.ErrorFactory.indexSegment;let r=this.resultFS.getPipeSegment(e),n=e?.filterList||[];return this.filters.length>0&&!n?r.filterList=this.filters:n&&(r.filterList=[...n,...this.filters]),e?.limit&&(r.limit=e.limit),this.limit&&(r.limit=this.limit.limit),this.indexOn&&(r.weightMeasure=this.indexOn.refString),e&&(0,pJ.isIndexSegment)(e)&&e?.sample&&(r.sample=e.sample),this.sample&&(r.sample=this.sample),r}};TM.IndexBuilder=mJ});var yJ=v(CM=>{"use strict";Object.defineProperty(CM,"__esModule",{value:!0});CM.GroupBy=void 0;var ist=Wl(),REe=Ri(),gJ=class extends ist.DefinitionList{constructor(){super(...arguments),this.elementType="groupBy",this.queryRefinementStage=REe.LegalRefinementStage.Single,this.forceQueryClass=REe.QueryClass.Grouping}};CM.GroupBy=gJ});var OEe=v(RM=>{"use strict";Object.defineProperty(RM,"__esModule",{value:!0});RM.ProjectFieldSpace=void 0;var EJ=Xe(),sst=MT(),AJ=class extends sst.QuerySpace{constructor(){super(...arguments),this.segmentType="project"}canContain(e){return e.dataType==="turtle"||(0,EJ.expressionIsAggregate)(e.expressionType)?!1:(0,EJ.expressionInvolvesAggregate)(e.expressionType)&&(0,EJ.expressionIsAnalytic)(e.expressionType)?(this.log("Cannot add aggregate analyics to project"),!1):!0}};RM.ProjectFieldSpace=AJ});var DM=v(OM=>{"use strict";Object.defineProperty(OM,"__esModule",{value:!0});OM.FieldName=void 0;var ost=Et(),SJ=class extends ost.MalloyElement{constructor(e){super(),this.name=e,this.elementType="fieldName"}get refString(){return this.name}toString(){return this.refString}getField(e){return e.lookup([this])}};OM.FieldName=SJ});var bJ=v(NS=>{"use strict";Object.defineProperty(NS,"__esModule",{value:!0});NS.Ordering=NS.OrderBy=void 0;var ast=Xe(),DEe=DM(),NEe=Et(),ust=Ri(),vJ=class extends NEe.MalloyElement{constructor(e,r){super(),this.field=e,this.dir=r,this.elementType="orderBy",e instanceof DEe.FieldName&&this.has({field:e})}get modelField(){return typeof this.field=="number"?this.field:this.field.refString}getOrderBy(e){var r;if(this.field instanceof DEe.FieldName&&e.isQueryFieldSpace()){let i=e.outputSpace(),s=this.field.getField(i);s.error&&this.field.log(s.error),(!s.found||!s.isOutputField)&&this.log(`Unknown field ${this.field.refString} in output space`),(0,ast.expressionIsAnalytic)((r=s.found)===null||r===void 0?void 0:r.typeDesc().expressionType)&&this.log(`Illegal order by of analytic field ${this.field.refString}`)}let n={field:this.modelField};return this.dir&&(n.dir=this.dir),n}};NS.OrderBy=vJ;var _J=class extends NEe.ListOf{constructor(e){super(e),this.elementType="ordering",this.queryRefinementStage=ust.LegalRefinementStage.Tail,this.forceQueryClass=void 0}getOrderBy(e){return this.list.map(r=>r.getOrderBy(e))}};NS.Ordering=_J});var CJ=v(NM=>{"use strict";Object.defineProperty(NM,"__esModule",{value:!0});NM.Top=void 0;var FEe=Xe(),lst=ls(),cst=DM(),fst=Et(),xst=Ri(),TJ=class extends fst.MalloyElement{constructor(e,r){super(),this.limit=e,this.by=r,this.elementType="top",this.queryRefinementStage=xst.LegalRefinementStage.Tail,this.forceQueryClass=void 0,this.has({by:r})}getBy(e){var r;if(this.by)if(this.by instanceof cst.FieldName){if(e.isQueryFieldSpace()){let n=e.outputSpace(),i=this.by.getField(n);i.error&&this.by.log(i.error),(!i.found||!i.isOutputField)&&this.by.log(`Unknown field ${this.by.refString} in output space`),(0,FEe.expressionIsAnalytic)((r=i.found)===null||r===void 0?void 0:r.typeDesc().expressionType)&&this.by.log(`Illegal order by of analytic field ${this.by.refString}`)}return{by:"name",name:this.by.refString}}else{let n=this.by.getExpression(e);return(0,FEe.expressionIsAggregate)(n.expressionType)&&this.by.log("top by expression must be an aggregate"),n.evalSpace==="output"&&this.by.log("top by expression must be an output expression"),{by:"expression",e:(0,lst.compressExpr)(n.value)}}}};NM.Top=TJ});var wM=v(FM=>{"use strict";Object.defineProperty(FM,"__esModule",{value:!0});FM.ReduceBuilder=void 0;var wEe=Xe(),dst=ea(),hst=cS(),pst=vM(),LEe=bJ(),IEe=CJ(),mst=MT(),gst=Wl(),RJ=class{constructor(e,r,n,i){this.filters=[],this.resultFS=this.getResultSpace(e,r,n,i),this.inputFS=this.resultFS.inputSpace(),this.type="grouping"}getResultSpace(e,r,n,i){return new mst.ReduceFieldSpace(e,r,n,i)}execute(e){if(e.queryExecute){e.queryExecute(this);return}if(e instanceof gst.DefinitionList)this.resultFS.pushFields(...e.list);else if(e instanceof hst.Filter){let r=e.havingClause?this.resultFS:this.inputFS;this.filters.push(...e.getFilterList(r))}else e instanceof IEe.Top?(this.limit?e.log("Query operation already limited"):this.limit=e.limit,e.by&&(this.order?e.log("Query operation is already sorted"):this.order=e)):e instanceof pst.Limit?this.limit?e.log("Query operation already limited"):this.limit=e.limit:e instanceof LEe.Ordering&&(this.order?e.log("Query operation already sorted"):this.order=e)}refineFrom(e,r){if(e&&e.type!=="index"&&e.type!=="raw"&&(this.order||(e.orderBy?r.orderBy=e.orderBy:e.by&&(r.by=e.by)),!this.limit&&e.limit&&(r.limit=e.limit)),this.limit&&(r.limit=this.limit),this.order instanceof IEe.Top){let i=this.order.getBy(this.inputFS);i&&(r.by=i)}this.order instanceof LEe.Ordering&&(r.orderBy=this.order.getOrderBy(this.inputFS));let n=e?.filterList||[];this.filters.length>0&&!n?r.filterList=this.filters:n&&(r.filterList=[...n,...this.filters])}finalize(e){let r;if(e)if((0,wEe.isReduceSegment)(e)||(0,wEe.isPartialSegment)(e))r=e;else return this.resultFS.log(`Can't refine reduce with ${e.type}`),dst.ErrorFactory.reduceSegment;let n=this.resultFS.getQuerySegment(r);return this.refineFrom(r,n),n}};FM.ReduceBuilder=RJ});var PEe=v(LM=>{"use strict";Object.defineProperty(LM,"__esModule",{value:!0});LM.ProjectBuilder=void 0;var MEe=Xe(),yst=ea(),Est=yJ(),Ast=OEe(),Sst=wM(),OJ=class extends Sst.ReduceBuilder{constructor(){super(...arguments),this.type="project"}getResultSpace(e,r,n,i){return new Ast.ProjectFieldSpace(e,r,n,i)}execute(e){e.elementType==="having"||e instanceof Est.GroupBy?e.log("Illegal statement in a select query operation"):super.execute(e)}finalize(e){let r;if(e)if((0,MEe.isProjectSegment)(e)||(0,MEe.isPartialSegment)(e))r=e;else return this.resultFS.log(`Can't refine select with ${e.type}`),yst.ErrorFactory.projectSegment;let n=this.resultFS.getQuerySegment(r);return this.refineFrom(r,n),n}};LM.ProjectBuilder=OJ});var kEe=v(IM=>{"use strict";Object.defineProperty(IM,"__esModule",{value:!0});IM.PartialBuilder=void 0;var vst=wM(),DJ=class extends vst.ReduceBuilder{finalize(e){return{...super.finalize(e),type:"partial"}}};IM.PartialBuilder=DJ});var FJ=v(MM=>{"use strict";Object.defineProperty(MM,"__esModule",{value:!0});MM.QOpDesc=void 0;var _st=CEe(),bst=PEe(),Tst=wM(),Cst=Et(),Rst=$m(),Ost=Vl(),rg=Ri(),Dst=kEe(),NJ=class extends Cst.ListOf{constructor(){super(...arguments),this.elementType="queryOperation"}computeType(){var e;let r,n=!1;this.refineThis&&(this.refineThis.type==="reduce"?r=rg.QueryClass.Grouping:this.refineThis.type==="project"?r=rg.QueryClass.Project:this.refineThis.type==="index"&&(r=rg.QueryClass.Index));for(let i of this.list)i.forceQueryClass&&(r?r!==i.forceQueryClass&&i.log(`Not legal in ${r} query`):r=i.forceQueryClass),n||(n=(e=i.needsExplicitQueryClass)!==null&&e!==void 0?e:!1);return r===void 0&&n&&(this.log("Can't determine view type (`group_by` / `aggregate` / `nest`, `project`, `index`)"),r=rg.QueryClass.Project),this.opClass=r,r}refineFrom(e){this.refineThis=e}getBuilder(e,r,n){switch(this.computeType()){case rg.QueryClass.Grouping:return new Tst.ReduceBuilder(e,this.refineThis,r,n);case rg.QueryClass.Project:return new bst.ProjectBuilder(e,this.refineThis,r,n);case rg.QueryClass.Index:return new _st.IndexBuilder(e,this.refineThis,r,n);case void 0:return new Dst.PartialBuilder(e,this.refineThis,r,n)}}getOp(e,r){let n=this.getBuilder(e,r,this);for(let s of this.list)n.execute(s);let i=n.finalize(this.refineThis);return{segment:i,outputSpace:()=>new Ost.StaticSpace((0,Rst.opOutputStruct)(this,e.structDef(),i))}}};MM.QOpDesc=NJ});var qEe=v(PM=>{"use strict";Object.defineProperty(PM,"__esModule",{value:!0});PM.QOpDescView=void 0;var Nst=Xe(),Fst=Vl(),BEe=FJ(),wst=$m(),wJ=Ri(),Lst=DS(),LJ=class extends Lst.View{constructor(e){super({operation:e}),this.operation=e,this.elementType="qopdesc-view"}pipelineComp(e,r){let n=this.operation.getOp(e,r);return{pipeline:[n.segment],outputStruct:n.outputSpace().structDef()}}getOp(e,r,n,i){return(0,Nst.isRawSegment)(i)?(this.log("A raw query cannot be refined"),i):(n.refineFrom(i),n.getOp(e,r).segment)}refine(e,r,n){let i=[...r];if(i.length===0)return i;if(i.length===1)return this.operation.refineFrom(i[0]),[this.getOp(e,n,this.operation,i[0])];let s=new BEe.QOpDesc([]),o=new BEe.QOpDesc([]);for(let a of this.operation.list)switch(a.queryRefinementStage){case wJ.LegalRefinementStage.Head:s.push(a);break;case wJ.LegalRefinementStage.Single:a.log("Illegal in refinement of a query with more than one stage");break;case wJ.LegalRefinementStage.Tail:o.push(a);break;default:a.log("Illegal query refinement")}if(s.notEmpty()&&(this.has({headRefinements:s}),i[0]=this.getOp(e,void 0,s,i[0])),o.notEmpty()){let a=i.length-1;this.has({tailRefinements:o});let u=(0,wst.getFinalStruct)(this,e.structDef(),i.slice(-1));i[a]=this.getOp(new Fst.StaticSpace(u),void 0,o,i[a])}return i}};PM.QOpDescView=LJ});var $J=v(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.FieldDefinitionValue=xn.DefSpace=xn.DimensionFieldDeclaration=xn.MeasureFieldDeclaration=xn.DeclareFieldDeclaration=xn.ProjectFieldDeclaration=xn.GroupByFieldDeclaration=xn.AggregateFieldDeclaration=xn.CalculateFieldDeclaration=xn.AtomicFieldDeclaration=void 0;var Ist=Xe(),Mst=ls(),Pst=un(),kst=QL(),Bst=Et(),ng=oK(),qst=kc(),Ust=Ja(),jc=class extends Bst.MalloyElement{constructor(e,r,n){super({expr:e}),this.expr=e,this.defineName=r,this.exprSrc=n,this.isNoteableObj=!0,this.extendNote=qst.extendNoteMethod}fieldDef(e,r){return this.queryFieldDef(new VT(e,this),r)}executesInOutputSpace(){return!1}queryFieldDef(e,r){let n;function i(){if(e.isQueryFieldSpace())return e.outputSpace();throw new Error("must be in a query -- weird internal error")}try{let u=this.executesInOutputSpace()?i():e;n=this.expr.getExpression(u)}catch(u){return this.log(`Cannot define '${r}', ${u.message}`),{name:r,type:"error"}}let s=(0,Mst.compressExpr)(n.value),o=n.dataType;if(o==="null"&&(this.expr.log('null value defaults to type number, use "null::TYPE" to specify correct type',"warn"),o="number"),(0,Ist.isAtomicFieldType)(o)&&o!=="error"){let u={name:r,type:o,location:this.location};return s.length>0&&(u.e=s),n.expressionType&&(u.expressionType=n.expressionType),this.typecheckExprValue(n),this.exprSrc&&(u.code=this.exprSrc),(0,kst.isGranularResult)(n)&&u.type==="timestamp"&&(u.timeframe=n.timeframe),this.note&&(u.annotation=this.note),u}if(!(e instanceof VT&&e.foundCircle)&&n.dataType!=="error"){let u=Pst.FT.inspect(n);this.log(`Cannot define '${r}', unexpected type: ${u}`)}return{name:r,type:"error"}}makeEntry(e){e.newEntry(this.defineName,this,new kM(e,this))}};xn.AtomicFieldDeclaration=jc;var IJ=class extends jc{constructor(){super(...arguments),this.elementType="calculateFieldDeclaration"}typecheckExprValue(e){(0,ng.typecheckCalculate)(e,this)}executesInOutputSpace(){return!0}};xn.CalculateFieldDeclaration=IJ;var MJ=class extends jc{constructor(){super(...arguments),this.elementType="aggregateFieldDeclaration"}typecheckExprValue(e){(0,ng.typecheckAggregate)(e,this)}};xn.AggregateFieldDeclaration=MJ;var PJ=class extends jc{constructor(){super(...arguments),this.elementType="groupByFieldDeclaration"}typecheckExprValue(e){(0,ng.typecheckGroupBy)(e,this)}};xn.GroupByFieldDeclaration=PJ;var kJ=class extends jc{constructor(){super(...arguments),this.elementType="projectFieldDeclaration"}typecheckExprValue(e){(0,ng.typecheckProject)(e,this)}};xn.ProjectFieldDeclaration=kJ;var BJ=class extends jc{constructor(){super(...arguments),this.elementType="declareFieldDeclaration"}typecheckExprValue(e){(0,ng.typecheckDeclare)(e,this)}};xn.DeclareFieldDeclaration=BJ;var qJ=class extends jc{constructor(){super(...arguments),this.elementType="measureFieldDeclaration"}typecheckExprValue(e){(0,ng.typecheckMeasure)(e,this)}};xn.MeasureFieldDeclaration=qJ;var UJ=class extends jc{constructor(){super(...arguments),this.elementType="dimensionFieldDeclaration"}typecheckExprValue(e){(0,ng.typecheckDimension)(e,this)}};xn.DimensionFieldDeclaration=UJ;var VT=class{constructor(e,r){this.realFS=e,this.circular=r,this.type="fieldSpace",this.foundCircle=!1}structDef(){return this.realFS.structDef()}emptyStructDef(){return this.realFS.emptyStructDef()}entry(e){return this.realFS.entry(e)}lookup(e){return e[0]&&e[0].refString===this.circular.defineName?(this.foundCircle=!0,{error:`Circular reference to '${this.circular.defineName}' in definition`,found:void 0}):this.realFS.lookup(e)}entries(){return this.realFS.entries()}dialectObj(){return this.realFS.dialectObj()}isQueryFieldSpace(){return this.realFS.isQueryFieldSpace()}outputSpace(){if(this.realFS.isQueryFieldSpace())return this.realFS.outputSpace();throw new Error("Not a query field space")}inputSpace(){if(this.realFS.isQueryFieldSpace())return this.realFS.inputSpace();throw new Error("Not a query field space")}};xn.DefSpace=VT;var kM=class extends Ust.SpaceField{constructor(e,r){super(),this.space=e,this.exprDef=r,this.fieldName=r.defineName}get name(){return this.fieldName}fieldDef(){return this.haveFieldDef||(this.haveFieldDef=this.exprDef.fieldDef(this.space,this.name)),this.haveFieldDef}getQueryFieldDef(e){if(!this.qfd){let r=this.exprDef.queryFieldDef(e,this.name);this.qfd=r}return this.qfd}typeDesc(){let e=this.qfd||this.fieldDef();return this.fieldTypeFromFieldDef(e)}};xn.FieldDefinitionValue=kM});var $Ee=v(BM=>{"use strict";Object.defineProperty(BM,"__esModule",{value:!0});BM.Aggregate=void 0;var $st=Wl(),UEe=Ri(),jJ=class extends $st.DefinitionList{constructor(){super(...arguments),this.elementType="aggregateList",this.queryRefinementStage=UEe.LegalRefinementStage.Single,this.forceQueryClass=UEe.QueryClass.Grouping}};BM.Aggregate=jJ});var jEe=v(qM=>{"use strict";Object.defineProperty(qM,"__esModule",{value:!0});qM.Calculate=void 0;var jst=Wl(),Hst=Ri(),HJ=class extends jst.DefinitionList{constructor(){super(...arguments),this.elementType="calculate",this.forceQueryClass=void 0,this.needsExplicitQueryClass=!0,this.queryRefinementStage=Hst.LegalRefinementStage.Single}};qM.Calculate=HJ});var GJ=v(UM=>{"use strict";Object.defineProperty(UM,"__esModule",{value:!0});UM.Dimensions=void 0;var zst=uS(),zJ=class extends zst.DeclareFields{constructor(){super(...arguments),this.elementType="dimensionList"}};UM.Dimensions=zJ});var VJ=v($M=>{"use strict";Object.defineProperty($M,"__esModule",{value:!0});$M.Measures=void 0;var Gst=uS(),QJ=class extends Gst.DeclareFields{constructor(){super(...arguments),this.elementType="measureList"}};$M.Measures=QJ});var zEe=v(jM=>{"use strict";Object.defineProperty(jM,"__esModule",{value:!0});jM.Nests=void 0;var Qst=Wl(),HEe=Ri(),WJ=class extends Qst.DefinitionList{constructor(e){super(e),this.elementType="nestedQueries",this.queryRefinementStage=HEe.LegalRefinementStage.Single,this.forceQueryClass=HEe.QueryClass.Grouping}};jM.Nests=WJ});var QEe=v(HM=>{"use strict";Object.defineProperty(HM,"__esModule",{value:!0});HM.ProjectStatement=void 0;var Vst=Wl(),GEe=Ri(),YJ=class extends Vst.DefinitionList{constructor(){super(...arguments),this.elementType="projectStatement",this.forceQueryClass=GEe.QueryClass.Project,this.queryRefinementStage=GEe.LegalRefinementStage.Single}queryExecute(e){e.type==="project"&&e.resultFS.pushFields(...this.list)}};HM.ProjectStatement=YJ});var WEe=v(zM=>{"use strict";Object.defineProperty(zM,"__esModule",{value:!0});zM.FromSQLSource=void 0;var VEe=Xe(),Wst=DT(),KJ=class extends Wst.NamedSource{constructor(){super(...arguments),this.elementType="fromSQLSource"}structRef(){return this.structDef()}modelStruct(){let e=this.modelEntry(this.ref),r=e?.entry;if(!r){this.log(`Undefined from_sql source '${this.refName}'`);return}if(r.type==="function"){this.log(`Cannot construct a source from a function '${this.refName}'`);return}else if(r.type==="query"){this.log(`Cannot use 'from_sql()' with a query '${this.refName}'`);return}else if(r.type==="connection"){this.log(`Cannot use 'from_sql()' with a connection '${this.refName}'`);return}else if((0,VEe.isSQLBlockStruct)(r)&&r.declaredSQLBlock){let{declaredSQLBlock:n,...i}=r;return i}else if(!(0,VEe.isSQLBlockStruct)(r)){this.log(`Cannot use 'from_sql()' to reference '${this.refName}'`);return}this.log(`Cannot use 'from_sql()' to reference '${this.refName}'`)}};zM.FromSQLSource=KJ});var eZ=v(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});Dp.findReferences=Dp.deprecatedParseTableURI=Dp.constructTableKey=void 0;var Yst=dp(),JJ=AT();function XJ(t){let e=(0,JJ.getStringIfShort)(t);if(e)return e;let r=[],n=t.string().sqlString();if(n){for(let i of(0,JJ.getStringParts)(n))typeof i=="string"&&r.push(i);return r.join("")}return""}var ZJ=class{constructor(e,r){this.trans=e,this.tokens=r,this.needTables={},this.needImports={}}registerTableReference(e,r,n){let i=YEe(e,r);this.needTables[i]||(this.needTables[i]={connectionName:e,tablePath:r,firstReference:n})}enterTableMethod(e){let r=(0,JJ.getId)(e.connectionId()),n=XJ(e.tablePath()),i=this.trans.rangeFromContext(e);this.registerTableReference(r,n,i)}enterTableFunction(e){let r=XJ(e.tableURI()),{connectionName:n,tablePath:i}=KEe(r),s=this.trans.rangeFromContext(e);this.registerTableReference(n,i,s)}enterImportURL(e){let r=XJ(e);this.needImports[r]||(this.needImports[r]=this.trans.rangeFromContext(e))}};function YEe(t,e){return t===void 0?e:`${t}:${e}`}Dp.constructTableKey=YEe;function KEe(t){let e=t.match(/^([^:]*):(.*)$/);if(e){let[,r,n]=e;return{connectionName:r,tablePath:n}}else return{tablePath:t}}Dp.deprecatedParseTableURI=KEe;function Kst(t,e,r){let n=new ZJ(t,e),i=n;return Yst.ParseTreeWalker.DEFAULT.walk(i,r),{tables:n.needTables,urls:n.needImports}}Dp.findReferences=Kst});var ZEe=v(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0});Np.TableFunctionSource=Np.TableMethodSource=Np.TableSource=void 0;var JEe=eZ(),Xst=Rx(),XEe=ea(),WT=class extends Xst.Source{structDef(){var e,r;let n=this.getTableInfo();if(n===void 0)return XEe.ErrorFactory.structDef;let{tablePath:i,connectionName:s}=n,o=(0,JEe.constructTableKey)(s,i),a=(e=this.translator())===null||e===void 0?void 0:e.root.schemaZone.getEntry(o),u=`Schema read failure for table '${i}' for connection '${s}'`;if(a){if(a.status==="present"){a.value.location=this.location,a.value.fields.forEach(c=>{c.location=this.location});let l={...a.value,fields:a.value.fields.map(c=>({...c,location:this.location})),location:this.location};return(r=this.document())===null||r===void 0||r.rememberToAddModelAnnotations(l),l}a.status==="error"&&(u=a.message)}return this.log(u),XEe.ErrorFactory.structDef}};Np.TableSource=WT;var tZ=class extends WT{constructor(e,r){super(),this.connectionName=e,this.tablePath=r,this.elementType="tableMethodSource",this.has({connectionName:e})}getTableInfo(){var e;let r=this.modelEntry(this.connectionName),n=this.connectionName.refString;if(r===void 0)(e=this.namespace())===null||e===void 0||e.setEntry(n,{entry:{type:"connection",name:n},exported:!0},!0);else if(r.entry.type!=="connection"){this.connectionName.log(`${this.connectionName.refString} is not a connection`);return}return{tablePath:this.tablePath,connectionName:this.connectionName.refString}}};Np.TableMethodSource=tZ;var rZ=class extends WT{constructor(e){super(),this.tableURI=e,this.elementType="tableFunctionSource"}getTableInfo(){return(0,JEe.deprecatedParseTableURI)(this.tableURI)}};Np.TableFunctionSource=rZ});var eAe=v(GM=>{"use strict";Object.defineProperty(GM,"__esModule",{value:!0});GM.SQLStatement=void 0;var Jst=kY(),Zst=Et(),nZ=class extends Zst.MalloyElement{constructor(e){super(),this.select=e,this.elementType="sqlStatement",this.has({select:e})}sqlBlock(){return this.requestBlock||(this.requestBlock=(0,Jst.makeSQLBlock)(this.select.sqlPhrases(),this.connection)),this.requestBlock}lookupCompiledSQL(e){var r;let n=(r=this.translator())===null||r===void 0?void 0:r.root.sqlQueryZone;if(n)return n.reference(e.name,this.location),n.getEntry(e.name)}needs(e){let r=this.sqlBlock(),n=this.lookupCompiledSQL(r);if(n?.status==="reference")return{compileSQL:r,partialModel:this.select.containsQueries?e.modelDef():void 0}}execute(e){let r=this.sqlBlock(),n=this.lookupCompiledSQL(r);if(!n){this.log("Cant't look up schema for sql block");return}if(n.status==="error"){let i=n.message.split(/\r?\n/);this.select.log("Invalid SQL, "+i.join(`
    `));return}if(n.status==="present"){let i=this.select.location,s={...n.value,fields:n.value.fields.map(o=>({...o,location:i})),location:this.location};this.is&&!e.defineSQL(s,this.is)&&this.log(`'${this.is}' already defined`);return}}};GM.SQLStatement=nZ});var rAe=v(QM=>{"use strict";Object.defineProperty(QM,"__esModule",{value:!0});QM.SQLString=void 0;var eot=Et(),tAe=Ep(),iZ=class extends eot.MalloyElement{constructor(){super(...arguments),this.elementType="sqlString",this.elements=[],this.containsQueries=!1}complete(){this.has({queries:this.elements.filter(tot)})}push(e){typeof e=="string"?e.length>0&&this.elements.push(e):e instanceof tAe.SourceQueryElement?(this.elements.push(e),this.containsQueries=!0,e.parent=this):e.log("This element is not legal inside an SQL string")}sqlPhrases(){let e=[];for(let r of this.elements)if(typeof r=="string")e.push({sql:r});else{let n=r.getQuery();n?e.push(n.query()):r.sqLog("Cannot expand into a query")}return e}};QM.SQLString=iZ;function tot(t){return t instanceof tAe.SourceQueryElement}});var nAe=v(VM=>{"use strict";Object.defineProperty(VM,"__esModule",{value:!0});VM.SourceDesc=void 0;var rot=Et(),sZ=class extends rot.ListOf{constructor(){super(...arguments),this.elementType="sourceDescription"}};VM.SourceDesc=sZ});var iAe=v(WM=>{"use strict";Object.defineProperty(WM,"__esModule",{value:!0});WM.isSourceProperty=void 0;var not=cS(),iot=fS(),sot=uS(),oot=cL(),aot=AL(),uot=xL(),lot=hL(),cot=mL(),fot=yL();function xot(t){return t instanceof not.Filter||t instanceof iot.Joins||t instanceof sot.DeclareFields||t instanceof oot.FieldListEdit||t instanceof aot.Renames||t instanceof uot.PrimaryKey||t instanceof fot.ObjectAnnotation||t instanceof lot.Views||t instanceof cot.TimezoneStatement}WM.isSourceProperty=xot});var oAe=v(YM=>{"use strict";Object.defineProperty(YM,"__esModule",{value:!0});YM.isFieldCollectionMember=void 0;var dot=$J(),sAe=AS();function hot(t){return t instanceof sAe.FieldReference||t instanceof sAe.WildcardFieldReference||t instanceof dot.AtomicFieldDeclaration}YM.isFieldCollectionMember=hot});var aAe=v(KM=>{"use strict";Object.defineProperty(KM,"__esModule",{value:!0});KM.isQueryElement=void 0;var pot=CL(),mot=DL(),got=FY(),yot=PY();function Eot(t){return t instanceof pot.QueryArrow||t instanceof mot.QueryRefine||t instanceof got.QueryReference||t instanceof yot.QueryRaw}KM.isQueryElement=Eot});var lAe=v(uAe=>{"use strict";Object.defineProperty(uAe,"__esModule",{value:!0})});var cAe=v(XM=>{"use strict";Object.defineProperty(XM,"__esModule",{value:!0});XM.isQueryProperty=void 0;function Aot(t){return"queryRefinementStage"in t&&"forceQueryClass"in t}XM.isQueryProperty=Aot});var fAe=v(JM=>{"use strict";Object.defineProperty(JM,"__esModule",{value:!0});JM.isQueryExtendProperty=void 0;var Sot=GJ(),vot=fS(),_ot=VJ();function bot(t){return t instanceof Sot.Dimensions||t instanceof _ot.Measures||t instanceof vot.Joins}JM.isQueryExtendProperty=bot});var ZM=v(ne=>{"use strict";var Tot=ne&&ne.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),oe=ne&&ne.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Tot(e,t,r)};Object.defineProperty(ne,"__esModule",{value:!0});oe(LW(),ne);oe(dge(),ne);oe(pge(),ne);oe(Rx(),ne);oe(EY(),ne);oe(Ep(),ne);oe(Oge(),ne);oe(Ige(),ne);oe(Mge(),ne);oe(LY(),ne);oe(Pge(),ne);oe(cL(),ne);oe(xL(),ne);oe(AL(),ne);oe(hL(),ne);oe(mL(),ne);oe(Yge(),ne);oe(oI(),ne);oe(Kge(),ne);oe(Xge(),ne);oe(zm(),ne);oe(i3e(),ne);oe(hI(),ne);oe(s3e(),ne);oe(o3e(),ne);oe(u3e(),ne);oe(ZY(),ne);oe(l3e(),ne);oe(c3e(),ne);oe(x3e(),ne);oe(h3e(),ne);oe(XY(),ne);oe(vK(),ne);oe(m3e(),ne);oe(g3e(),ne);oe(y3e(),ne);oe(E3e(),ne);oe(A3e(),ne);oe(v3e(),ne);oe(_3e(),ne);oe(b3e(),ne);oe(T3e(),ne);oe(C3e(),ne);oe(R3e(),ne);oe(O3e(),ne);oe(D3e(),ne);oe(N3e(),ne);oe(L3e(),ne);oe(k3e(),ne);oe(lEe(),ne);oe(cEe(),ne);oe(xEe(),ne);oe(ES(),ne);oe(dEe(),ne);oe(pEe(),ne);oe(HK(),ne);oe(ls(),ne);oe(mEe(),ne);oe(tJ(),ne);oe(PW(),ne);oe(gEe(),ne);oe(DL(),ne);oe(CL(),ne);oe(DS(),ne);oe(yEe(),ne);oe(EEe(),ne);oe(vEe(),ne);oe(qEe(),ne);oe($J(),ne);oe(AS(),ne);oe($Ee(),ne);oe(jEe(),ne);oe(uS(),ne);oe(GJ(),ne);oe(tJ(),ne);oe(cS(),ne);oe(yJ(),ne);oe(cJ(),ne);oe(fS(),ne);oe(FW(),ne);oe(vM(),ne);oe(VJ(),ne);oe(LW(),ne);oe(zEe(),ne);oe(bJ(),ne);oe(QEe(),ne);oe(FJ(),ne);oe(dJ(),ne);oe(CJ(),ne);oe(DT(),ne);oe(OT(),ne);oe(WEe(),ne);oe(qY(),ne);oe(ZEe(),ne);oe(eAe(),ne);oe(rAe(),ne);oe(yL(),ne);oe(HL(),ne);oe(nAe(),ne);oe(iAe(),ne);oe(ir(),ne);oe(oAe(),ne);oe(DM(),ne);oe(Et(),ne);oe(aAe(),ne);oe(lAe(),ne);oe(cAe(),ne);oe(fAe(),ne)});var dAe=v(Hc=>{"use strict";var Cot=Hc&&Hc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Rot=Hc&&Hc.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Oot=Hc&&Hc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Cot(e,t,r);return Rot(e,t),e};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.MalloyToAST=void 0;var xAe=z7(),Dot=mW(),M=Oot(ZM()),Not=Os(),Fot=ZM(),ni=AT(),oZ=Xe(),wot=Um(),eP=class extends M.SourceQueryElement{constructor(){super(...arguments),this.elementType="parseErrorSourceQuery"}},YT=class extends M.MalloyElement{constructor(e){super(),this.elementType="ignoredByParser",this.malloySrc=e}},Lot=["##! m4warnings=error"],aZ=class extends Dot.AbstractParseTreeVisitor{constructor(e,r,n){super(),this.parseInfo=e,this.msgLog=r,this.compilerFlags=n;for(let i of Lot){let s=wot.Tag.fromTagline(i,this.compilerFlags);this.compilerFlags=s.tag}}internalError(e,r){let n=`Internal Translator Error: ${r}`;return this.contextError(e,n),new Error(n)}astError(e,r,n="error"){this.msgLog.log({message:r,at:e.location,severity:n})}getLocation(e){return{url:this.parseInfo.sourceURL,range:this.parseInfo.rangeFromContext(e)}}contextError(e,r,n="error"){this.msgLog.log({message:r,at:this.getLocation(e),severity:n})}inExperiment(e,r){let n=this.compilerFlags.tag("experimental");return n?n.bare()||n.has(e):(this.contextError(r,`Experimental flag '${e}' required to enable this feature`),!1)}m4Severity(){let e=this.compilerFlags.tag("m4warnings");return e?e.text()==="warn"?"warn":"error":!1}m4advisory(e,r){let n=this.m4Severity();n&&this.contextError(e,r,n)}only(e,r,n){let i=[];for(let s of e){let o=r(s);o?i.push(o):s instanceof YT||this.astError(s,`Parser enountered unexpected statement type '${s.elementType}' when it needed '${n}'`)}return i}getNumber(e){return Number.parseInt(e.text)}getFieldName(e){return this.astAt(new M.FieldName((0,ni.getId)(e)),e.id())}getModelEntryName(e){return this.astAt(new M.ModelEntryReference((0,ni.getId)(e)),e.id())}defaultResult(){return new M.Unimplemented}astAt(e,r){return e.location={url:this.parseInfo.sourceURL,range:this.parseInfo.rangeFromContext(r)},e}getSourceCode(e){let r=e.start.startIndex,n=e.stop||e.start,i=new Not.Interval(r,n.stopIndex);return this.parseInfo.sourceStream.getText(i)}getFilterElement(e){let r=this.getFieldExpr(e),n=new M.FilterElement(r,this.getSourceCode(e));return this.astAt(n,e)}getFieldDefs(e,r){return e.map(n=>this.getFieldDef(n,r))}getFieldExpr(e){let r=this.visit(e);if(r instanceof M.ExpressionDef)return this.astAt(r,e);throw this.internalError(e,`expression node unknown type '${r.elementType}'`)}getFilterShortcut(e){let r=this.getFilterElement(e.fieldExpr());return this.m4advisory(e,"Filter shortcut `{? condition }` is deprecated; use `{ where: condition } instead"),new M.Filter([r])}getPlainString(e){let r=(0,ni.getStringIfShort)(e);if(r)return r;let n=[],i=e.string().sqlString();if(i){for(let s of(0,ni.getStringParts)(i))s instanceof xAe.ParserRuleContext?this.contextError(s,"%{ query } illegal in this string"):n.push(s);return(0,ni.unIndent)(n),n.join("")}return""}makeSqlString(e,r){for(let n of e.sqlInterpolation())n.CLOSE_CODE()&&this.m4advisory(n,"Use %{ ... } instead of %{ ... }%");for(let n of(0,ni.getStringParts)(e))n instanceof xAe.ParserRuleContext?r.push(this.visit(n)):r.push(n);r.complete(),this.astAt(r,e)}parseTime(e,r){let n=r(e.text);return n||(this.contextError(e,"Time data parse error"),n=new M.LiteralTimestamp({text:e.text})),this.astAt(n,e)}getNotes(e){return e.ANNOTATION().map(r=>({text:r.text,at:this.getLocation(e)}))}getIsNotes(e){return this.getNotes(e._beforeIs).concat(this.getNotes(e._afterIs))}visitMalloyDocument(e){let r=this.only(e.malloyStatement().map(n=>this.visit(n)),n=>M.isDocStatementOrDocStatementList(n)&&n,"statement");return new M.Document(r)}visitDefineSourceStatement(e){let n=e.sourcePropertyList().sourceDefinition().map(o=>this.visitSourceDefinition(o)),i=this.getNotes(e.tags()),s=new M.DefineSourceList(n);return s.extendNote({blockNotes:i}),s}visitSourceDefinition(e){let r=this.visit(e.sqExplore()),n=new M.DefineSource((0,ni.getId)(e.sourceNameDef()),r instanceof M.SourceQueryElement?r:void 0,!0,[]),i=this.getNotes(e.tags()).concat(this.getIsNotes(e.isDefine()));return n.extendNote({notes:i}),this.astAt(n,e)}getSourceExtensions(e){return this.astAt(this.visitExploreProperties(e),e)}visitExploreProperties(e){let r=e.filterShortcut(),n=this.only(e.exploreStatement().map(s=>this.visit(s)),s=>M.isSourceProperty(s)&&s,"source property"),i=new M.SourceDesc(n);return r&&i.push(this.getFilterShortcut(r)),i}visitTableFunction(e){let r=this.getPlainString(e.tableURI()),n=this.astAt(new M.TableFunctionSource(r),e);return this.m4advisory(e,"`table('connection_name:table_path')` is deprecated; use `connection_name.table('table_path')`"),n}visitTableMethod(e){let r=e.connectionId(),n=this.astAt(this.getModelEntryName(r),r),i=this.getPlainString(e.tablePath());return this.astAt(new M.TableMethodSource(n,i),e)}getLegacySQLSouce(e){let r=this.getModelEntryName(e);return this.astAt(new M.FromSQLSource(r),e)}visitSqlSource(e){let r=e.connectionId(),n=this.astAt(this.getModelEntryName(r),r),i=new M.SQLString,s=e.sqlString();s&&this.makeSqlString(s,i);let o=e.shortString();o&&i.push((0,ni.getShortString)(o));let a=new M.SQLSource(n,i);return this.astAt(a,e)}visitDefJoinMany(e){let r=[];for(let i of e.joinList().joinDef()){let s=this.visit(i);s instanceof M.Join&&(r.push(s),s instanceof M.ExpressionJoin?(s.joinType="many",s.joinOn===void 0&&this.contextError(e,"join_many: requires ON expression")):s instanceof M.KeyJoin&&this.contextError(e,"Foreign key join not legal in join_many:"))}let n=new M.Joins(r);return n.extendNote({blockNotes:this.getNotes(e.tags())}),n}visitDefJoinOne(e){let r=this.getJoinList(e.joinList()),n=[];for(let s of r)s instanceof M.Join&&(n.push(s),s instanceof M.ExpressionJoin&&(s.joinType="one"));let i=new M.Joins(n);return i.extendNote({blockNotes:this.getNotes(e.tags())}),i}visitDefJoinCross(e){let r=this.getJoinList(e.joinList()),n=[];for(let s of r)s instanceof M.Join&&(n.push(s),s instanceof M.ExpressionJoin?s.joinType="cross":s.log("Foreign key join not legal in join_cross:"));let i=new M.Joins(n);return i.extendNote({blockNotes:this.getNotes(e.tags())}),i}getJoinList(e){return e.joinDef().map(r=>this.visit(r))}getJoinSource(e,r){if(r){let n=this.getSqExpr(r.sqExpr()),i=this.getNotes(r._before_is).concat(this.getNotes(r._after_is));return{joinFrom:n,notes:i}}return{joinFrom:new M.SQReference(e),notes:[]}}visitQueryJoinStatement(e){let r=this.astAt(this.visit(e.joinStatement()),e);return this.m4advisory(e,"Joins in queries are deprecated, move into an `extend:` block."),r}visitJoinOn(e){var r;let n=this.getModelEntryName(e.joinNameDef()),{joinFrom:i,notes:s}=this.getJoinSource(n,e.isExplore()),o=new M.ExpressionJoin(n,i),a=e.joinExpression(),u=((r=e.matrixOperation())===null||r===void 0?void 0:r.text.toLocaleLowerCase())||"left";return(0,oZ.isMatrixOperation)(u)?o.matrixOperation=u:this.contextError(e,"Internal Error: Unknown matrixOperation"),a&&(o.joinOn=this.getFieldExpr(a)),o.extendNote({notes:this.getNotes(e).concat(s)}),this.astAt(o,e)}visitJoinWith(e){let r=this.getModelEntryName(e.joinNameDef()),{joinFrom:n,notes:i}=this.getJoinSource(r,e.isExplore()),s=this.getFieldExpr(e.fieldExpr()),o=new M.KeyJoin(r,n,s);return o.extendNote({notes:this.getNotes(e).concat(i)}),this.astAt(o,e)}getFieldDef(e,r){let n=e.fieldExpr(),i=(0,ni.getId)(e.fieldNameDef()),s=this.getFieldExpr(n),o=new r(s,i,this.getSourceCode(n)),a=this.getNotes(e.tags()).concat(this.getIsNotes(e.isDefine()));return o.extendNote({notes:a}),this.astAt(o,e)}visitDefDimensions(e){let r=this.getFieldDefs(e.defList().fieldDef(),M.DimensionFieldDeclaration),n=new M.Dimensions(r);return n.extendNote({blockNotes:this.getNotes(e.tags())}),this.astAt(n,e)}visitDefMeasures(e){let r=this.getFieldDefs(e.defList().fieldDef(),M.MeasureFieldDeclaration),n=new M.Measures(r);return n.extendNote({blockNotes:this.getNotes(e.tags())}),this.astAt(n,e)}visitQueryExtend(e){let r=[],n=e.queryExtendStatementList().queryExtendStatement().map(s=>this.visit(s));for(let s of n)if(M.isQueryExtendProperty(s))r.push(s);else throw this.internalError(e,`Query extend matched, but ${s.elementType} found`);let i=new M.ExtendBlock(r);return this.astAt(i,e)}visitDeclareStatement(e){let r=this.getFieldDefs(e.defList().fieldDef(),M.DeclareFieldDeclaration),n=new M.DeclareFields(r),i=this.astAt(n,e);return this.m4advisory(e,"`declare:` is deprecated; use `dimension:` or `measure:` inside a source or `extend:` block"),i}visitExploreRenameDef(e){let r=e.fieldName(0),n=e.fieldName(1),i=new M.RenameField((0,ni.getId)(r),this.getFieldName(n));return this.astAt(i,e)}visitDefExploreRename(e){let n=e.renameList().exploreRenameDef().map(s=>this.visitExploreRenameDef(s)),i=new M.Renames(n);return this.astAt(i,e)}visitFilterClauseList(e){return new M.Filter(e.fieldExpr().map(r=>this.getFilterElement(r)))}visitFilterByShortcut(e){let r=this.getFilterElement(e.fieldExpr()),n=this.astAt(new M.Filter([r]),e);return this.m4advisory(e,"Filter shortcut `{? condition }` is deprecated; use `{ where: condition } instead"),n}visitWhereStatement(e){let r=this.visitFilterClauseList(e.filterClauseList());return r.having=!1,this.astAt(r,e)}visitHavingStatement(e){let r=this.visitFilterClauseList(e.filterClauseList());return r.having=!0,this.astAt(r,e)}visitSubQueryDefList(e){let r=e.exploreQueryDef().map(n=>this.visitExploreQueryDef(n));return new M.Views(r)}visitDefExploreQuery(e){let r=this.visitSubQueryDefList(e.subQueryDefList()),n=this.getNotes(e.tags());return r.extendNote({blockNotes:n}),e.QUERY()&&this.m4advisory(e,"Use view: inside of a source instead of query:"),r}visitDefExplorePrimaryKey(e){let r=new M.PrimaryKey(this.getFieldName(e.fieldName()));return this.astAt(r,e)}visitFieldNameList(e){let r=e.fieldName().map(n=>new M.AcceptExceptFieldReference([this.getFieldName(n)]));return new M.FieldReferences(r)}visitDefExploreEditField(e){let r=e.ACCEPT()?"accept":"except";return new M.FieldListEdit(r,this.visitFieldNameList(e.fieldNameList()))}visitDefExploreTimezone(e){return this.visitTimezoneStatement(e.timezoneStatement())}visitTimezoneStatement(e){let r=this.getPlainString(e),n=this.astAt(new M.TimezoneStatement(r),e.string());return n.isValid||this.astError(n,`Invalid timezone: ${n.tz}`),this.astAt(n,e)}visitQueryProperties(e){let r=this.only(e.queryStatement().map(i=>this.astAt(this.visit(i),i)),i=>M.isQueryProperty(i)&&i,"query statement"),n=e.filterShortcut();return n&&r.push(this.getFilterShortcut(n)),new M.QOpDesc(r)}getFieldPath(e,r){let n=e.fieldName().map(i=>this.getFieldName(i));return this.astAt(new r(n),e)}getQueryFieldDef(e,r){let n=this.getFieldDef(e,r);return this.astAt(n,e)}getQueryFieldEntry(e,r,n){let i=e.taggedRef();if(i)return this.getTaggedRef(i,r,n);let s=e.fieldDef();if(s)return this.getQueryFieldDef(s,r);throw new Error("Expected query field entry to be a field reference or definition")}getQueryItems(e,r,n){return this.only(e.queryFieldEntry().map(i=>this.getQueryFieldEntry(i,r,n)),i=>i instanceof M.FieldReference||i instanceof M.AtomicFieldDeclaration?i:!1,"view field")}visitAggregateStatement(e){let r=new M.Aggregate(this.getQueryItems(e.queryFieldList(),M.AggregateFieldDeclaration,M.AggregateFieldReference));return r.extendNote({blockNotes:this.getNotes(e.tags())}),r}visitGroupByStatement(e){let r=new M.GroupBy(this.getQueryItems(e.queryFieldList(),M.GroupByFieldDeclaration,M.GroupByFieldReference));return r.extendNote({blockNotes:this.getNotes(e.tags())}),r}visitCalculateStatement(e){let r=new M.Calculate(this.getQueryItems(e.queryFieldList(),M.CalculateFieldDeclaration,M.CalculateFieldReference));return r.extendNote({blockNotes:this.getNotes(e.tags())}),r}getTaggedRef(e,r,n){let i=e.refExpr();if(i){let o=this.getFieldPath(e.fieldPath(),M.ExpressionFieldReference),a,u=i.timeframe();u&&(a=new M.ExprGranularTime(new M.ExprIdReference(o),this.visitTimeframe(u).text,!0));let l=i.aggregate();if(l)if(l.text.toLowerCase()==="sum")a=new M.ExprSum(void 0,o);else return this.contextError(l,"'${aggFunc}' is not legal in a reference-only aggregation"),o;let c=new r(a,o.outputName);return c.extendNote({notes:this.getNotes(e.tags())}),c}let s=this.getFieldPath(e.fieldPath(),n);return s.extendNote({notes:this.getNotes(e.tags())}),s}getFieldCollectionMember(e,r,n){let i=e.fieldDef();if(i)return this.getFieldDef(i,r);let s=e.taggedRef();if(s)return this.getTaggedRef(s,r,n);let o=e.collectionWildCard();if(o)return this.visitCollectionWildCard(o);throw this.internalError(e,"Unexpected element in fieldCollectionMember")}visitFieldCollection(e){let r=e.collectionMember().map(n=>this.getFieldCollectionMember(n,M.ProjectFieldDeclaration,M.ProjectFieldReference));return this.astAt(new M.ProjectStatement(r),e)}visitProjectStatement(e){e.PROJECT()&&this.m4advisory(e,"project: keyword is deprecated, use select:");let r=this.visitFieldCollection(e.fieldCollection());return r.extendNote({blockNotes:this.getNotes(e.tags())}),r}visitCollectionWildCard(e){var r;let n=e.fieldPath(),i=n?this.getFieldPath(n,M.ProjectFieldReference):void 0,s=this.astAt(new M.WildcardFieldReference(i),e),o=((r=e.starQualified())===null||r===void 0?void 0:r.fieldNameList())||[];for(let a of o)for(let u of a.fieldName())s.except.add((0,ni.getId)(u));return s}visitIndexFields(e){let r=e.indexElement().map(n=>{let i=n.fieldPath();if(!i)return this.astAt(new M.WildcardFieldReference(void 0),e);let s=this.getFieldPath(i,M.IndexFieldReference);return n.STAR()?this.astAt(new M.WildcardFieldReference(s),e):this.astAt(s,e)});return new M.FieldReferences(r)}visitIndexStatement(e){let r=this.visitIndexFields(e.indexFields()),n=new M.Index(r),i=e.fieldName();return i&&n.useWeight(this.getFieldName(i)),this.astAt(n,e)}visitLimitStatement(e){return new M.Limit(this.getNumber(e.INTEGER_LITERAL()))}visitOrderBySpec(e){let r=e.ASC()?"asc":e.DESC()?"desc":void 0,n=e.INTEGER_LITERAL();if(n)return new M.OrderBy(this.getNumber(n),r);let i=e.fieldName();if(i)return new M.OrderBy(this.getFieldName(i),r);throw this.internalError(e,"can't parse order_by specification")}visitOrdering(e){let r=e.orderBySpec().map(n=>this.visitOrderBySpec(n));return this.astAt(new M.Ordering(r),e)}visitTopStatement(e){let r=e.bySpec(),n=this.getNumber(e.INTEGER_LITERAL()),i;if(r){this.m4advisory(r,"by clause of top statement unupported. Use order_by instead");let s=r.fieldName();if(s){let a=this.getFieldName(s);i=new M.Top(n,a)}let o=r.fieldExpr();o&&(i=new M.Top(n,this.getFieldExpr(o)))}return i||(i=new M.Top(n,void 0)),this.astAt(i,e)}visitSourceID(e){return this.astAt(new M.NamedSource((0,ni.getId)(e)),e)}visitTopLevelQueryDefs(e){let r=e.topLevelQueryDef().map(s=>this.visitTopLevelQueryDef(s)),n=this.getNotes(e.tags()),i=new M.DefineQueryList(r);return i.extendNote({blockNotes:n}),i}visitTopLevelQueryDef(e){let r=(0,ni.getId)(e.queryName()),n=this.visit(e.sqExpr()),i=this.getNotes(e.tags()).concat(this.getIsNotes(e.isDefine()));if(n instanceof M.SourceQueryElement){let s=new M.DefineQuery(r,n);return s.extendNote({notes:i}),this.astAt(s,e)}throw this.internalError(e,`Expected query definition, got a '${n.elementType}'`)}visitAnonymousQuery(e){let r=e.topLevelAnonQueryDef(),n=this.getSqExpr(r.sqExpr()),i=this.astAt(new M.AnonymousQuery(n),r),s=this.getNotes(e.topLevelAnonQueryDef().tags()),o=this.getNotes(e.tags());return i.extendNote({notes:s,blockNotes:o}),this.m4advisory(r,"Anonymous `query:` statements are deprecated, use `run:` instead"),this.astAt(i,e)}visitRunStatement(e){let r=e.topLevelAnonQueryDef(),n=this.getSqExpr(r.sqExpr()),i=this.astAt(new M.AnonymousQuery(n),r),s=this.getNotes(e.topLevelAnonQueryDef().tags()),o=this.getNotes(e.tags());return i.extendNote({notes:s,blockNotes:o}),this.astAt(i,e)}visitNestStatement(e){let r=this.visitNestedQueryList(e.nestedQueryList());return r.extendNote({blockNotes:this.getNotes(e.tags())}),r}visitNestedQueryList(e){return new M.Nests(this.only(e.nestEntry().map(r=>this.visit(r)),r=>r instanceof M.NestFieldDeclaration&&r,"query"))}visitNestExisting(e){let r=e.fieldPath(),n=this.getFieldPath(r,M.ViewOrScalarFieldReference),i=this.astAt(new M.ReferenceView(n),r),s=e.vExpr(),o=this.getNotes(e.tags());if(s){let u=new M.NestFieldDeclaration(n.nameString,new M.ViewRefine(i,this.getVExpr(s)));return u.extendNote({notes:o}),this.astAt(u,e)}let a=new M.NestFieldDeclaration(n.nameString,i);return a.extendNote({notes:o}),this.astAt(a,e)}visitNestDef(e){let r=(0,ni.getId)(e.queryName()),n=this.getVExpr(e.vExpr()),i=new M.NestFieldDeclaration(r,n);return i.extendNote({notes:this.getNotes(e.tags()).concat(this.getIsNotes(e.isDefine()))}),this.astAt(i,e)}visitExploreQueryDef(e){let r=(0,ni.getId)(e.exploreQueryNameDef()),n=new M.ViewFieldDeclaration(r,this.getVExpr(e.vExpr())),i=this.getNotes(e).concat(this.getIsNotes(e.isDefine()));return n.extendNote({notes:i}),this.astAt(n,e)}visitExprNot(e){return new M.ExprNot(this.getFieldExpr(e.fieldExpr()))}visitExprBool(e){return new M.Boolean(e.TRUE()?"true":"false")}allFieldExpressions(e){return e.map(r=>this.getFieldExpr(r))}visitExprLogicalOr(e){let r=this.getFieldExpr(e.fieldExpr(0)),n=this.getFieldExpr(e.fieldExpr(1));return new M.ExprLogicalOp(r,"or",n)}visitExprLogicalAnd(e){let r=this.getFieldExpr(e.fieldExpr(0)),n=this.getFieldExpr(e.fieldExpr(1));return new M.ExprLogicalOp(r,"and",n)}visitExprOrTree(e){let r=this.getFieldExpr(e.fieldExpr()),n=this.getFieldExpr(e.partialAllowedFieldExpr());return this.astAt(new M.ExprAlternationTree(r,"|",n),e)}visitExprAndTree(e){let r=this.getFieldExpr(e.fieldExpr()),n=this.getFieldExpr(e.partialAllowedFieldExpr());return this.astAt(new M.ExprAlternationTree(r,"&",n),e)}visitExprCoalesce(e){let r=this.getFieldExpr(e.fieldExpr()[0]),n=this.getFieldExpr(e.fieldExpr()[1]);return this.astAt(new M.ExprCoalesce(r,n),e)}visitPartialAllowedFieldExpr(e){var r;let n=this.getFieldExpr(e.fieldExpr()),i=(r=e.compareOp())===null||r===void 0?void 0:r.text;if(i){if(M.isComparison(i))return this.astAt(new M.PartialCompare(i,n),e);throw this.internalError(e,`partial comparison '${i}' not recognized`)}return n}visitExprString(e){let r=this.getPlainString(e);return new M.ExprString(r)}visitExprRegex(e){let r=e.HACKY_REGEX().text;return new M.ExprRegEx(r.slice(2,-1))}visitExprNow(e){return new M.ExprNow}visitExprNumber(e){return new M.ExprNumber(e.text)}visitExprFieldPath(e){let r=new M.ExprIdReference(this.getFieldPath(e.fieldPath(),M.ExpressionFieldReference));return this.astAt(r,e)}visitExprNULL(e){return new M.ExprNULL}visitExprExpr(e){return new M.ExprParens(this.getFieldExpr(e.partialAllowedFieldExpr()))}visitExprMinus(e){return new M.ExprMinus(this.getFieldExpr(e.fieldExpr()))}visitExprAddSub(e){let r=this.getFieldExpr(e.fieldExpr(0)),n=this.getFieldExpr(e.fieldExpr(1)),i=e.PLUS()?"+":"-";return new M.ExprAddSub(r,i,n)}visitExprMulDiv(e){let r=e.STAR()?"*":e.SLASH()?"/":"%";return new M.ExprMulDiv(this.getFieldExpr(e.fieldExpr(0)),r,this.getFieldExpr(e.fieldExpr(1)))}visitExprCompare(e){let r=e.compareOp().text;if(M.isComparison(r))return new M.ExprCompare(this.getFieldExpr(e.fieldExpr(0)),r,this.getFieldExpr(e.fieldExpr(1)));throw this.internalError(e,`untranslatable comparison operator '${r}'`)}visitExprCountDisinct(e){return this.m4advisory(e,"`count(distinct expression)` deprecated, use `count(expression)` instead"),this.astAt(new M.ExprCountDistinct(this.getFieldExpr(e.fieldExpr())),e)}visitExprUngroup(e){let r=e.fieldName().map(i=>this.getFieldName(i)),n=e.ungroup().text.toLowerCase();return this.astAt(new M.ExprUngroup(n==="all"?n:"exclude",this.getFieldExpr(e.fieldExpr()),r),e)}symmetricAggregateUsageError(e){return`Symmetric aggregate function \`${e}\` must be written as \`${e}(expression)\` or \`path.to.field.${e}()\``}asymmetricAggregateUsageError(e){return`Asymmetric aggregate function \`${e}\` must be written as \`path.to.field.${e}()\`, \`path.to.join.${e}(expression)\`, or \`${e}(expression)\``}visitExprAggregate(e){let r=e.fieldPath(),n=this.getFieldPath(r,M.ExpressionFieldReference),i=r&&n?this.astAt(n,r):void 0,s=e.aggregate().text.toLowerCase(),o=e.fieldExpr();if(e.aggregate().COUNT())return o&&this.contextError(o,"Expression illegal inside path.count()"),new M.ExprCount(i);let a=o?this.getFieldExpr(o):void 0;if(s==="min"||s==="max")if(a)this.contextError(e,this.symmetricAggregateUsageError(s));else{let u=this.astAt(new M.ExprIdReference(n),r);return s==="min"?new M.ExprMin(u):new M.ExprMax(u)}else{if(s==="avg")return new M.ExprAvg(a,i);if(s==="sum")return new M.ExprSum(a,i);this.contextError(e,`Cannot parse aggregate function ${s}`)}return new M.ExprNULL}visitExprPathlessAggregate(e){let r=e.fieldExpr(),n=r?this.getFieldExpr(r):void 0,i=void 0,s=e.aggregate().text.toLowerCase();if(e.STAR()&&this.m4advisory(e,`* illegal inside ${s}()`),s==="count")return this.astAt(n?new M.ExprCountDistinct(n):new M.ExprCount,e);if(s==="min"){if(n)return new M.ExprMin(n);this.contextError(e,this.symmetricAggregateUsageError(s))}else if(s==="max"){if(n)return new M.ExprMax(n);this.contextError(e,this.symmetricAggregateUsageError(s))}else{if(n===void 0)return this.contextError(e,this.asymmetricAggregateUsageError(s)),new M.ExprNULL;let o=e.SOURCE_KW()!==void 0;if(s==="avg")return new M.ExprAvg(n,i,o);if(s==="sum")return new M.ExprSum(n,i,o)}return new M.ExprNULL}visitExprApply(e){return new M.Apply(this.getFieldExpr(e.fieldExpr()),this.getFieldExpr(e.partialAllowedFieldExpr()))}visitExprRange(e){return new M.Range(this.getFieldExpr(e.fieldExpr(0)),this.getFieldExpr(e.fieldExpr(1)))}visitExprCast(e){let r=this.getMalloyOrSQLType(e.malloyOrSQLType());return new M.ExprCast(this.getFieldExpr(e.fieldExpr()),r)}getMalloyOrSQLType(e){let r=e.malloyType();if(r){let i=r.text;if((0,oZ.isCastType)(i))return i;throw this.internalError(e,`unknown type '${i}'`)}let n=e.string();if(n)return{raw:this.getPlainString({string:()=>n})};throw this.internalError(e,"Expected Malloy or SQL type to either be a Malloy type or a string")}visitExprSafeCast(e){let r=this.getMalloyOrSQLType(e.malloyOrSQLType());return new M.ExprCast(this.getFieldExpr(e.fieldExpr()),r,!0)}visitExprTimeTrunc(e){return new M.ExprGranularTime(this.getFieldExpr(e.fieldExpr()),this.visitTimeframe(e.timeframe()).text,!0)}visitTimeframe(e){return new M.Timeframe(e.text)}visitExprForRange(e){let r=this.getFieldExpr(e._startAt),n=this.getFieldExpr(e._duration),i=this.visitTimeframe(e.timeframe());return new M.ForRange(r,n,i)}visitExprAggFunc(e){let r=e.argumentList(),n=r?this.allFieldExpressions(r.fieldExpr()):[],i=(0,ni.getId)(e),s=e.fieldPath(),o=s?this.getFieldPath(s,M.ExpressionFieldReference):void 0,a=s&&o?this.astAt(o,s):void 0;return M.ExprTimeExtract.extractor(i)?this.astAt(new M.ExprTimeExtract(i,n),e):this.astAt(new M.ExprFunc(i,n,!1,void 0,a),e)}visitExprFunc(e){var r,n;let i=e.argumentList(),s=i?this.allFieldExpressions(i.fieldExpr()):[],o=e.EXCLAM()!==void 0,a=(r=e.malloyType())===null||r===void 0?void 0:r.text,u;a&&((0,oZ.isCastType)(a)?u=a:(this.contextError(e,`'#' assertion for unknown type '${a}'`),u=void 0));let l=(0,ni.getOptionalId)(e)||((n=e.timeframe())===null||n===void 0?void 0:n.text);return l===void 0&&(this.contextError(e,"Function name error"),l="FUNCTION_NAME_ERROR"),M.ExprTimeExtract.extractor(l)?this.astAt(new M.ExprTimeExtract(l,s),e):this.astAt(new M.ExprFunc(l,s,o,u),e)}visitExprDuration(e){return new M.ExprDuration(this.getFieldExpr(e.fieldExpr()),this.visitTimeframe(e.timeframe()).text)}visitPickStatement(e){let r=e.pick().map(n=>{let i;return n._pickValue&&(i=this.getFieldExpr(n._pickValue)),new M.PickWhen(i,this.getFieldExpr(n._pickWhen))});return e.ELSE()?new M.Pick(r,this.getFieldExpr(e._pickElse)):new M.Pick(r)}visitExprFilter(e){let r=this.visit(e.filteredBy());return new M.ExprFilter(this.getFieldExpr(e.fieldExpr()),r)}visitLiteralTimestamp(e){return this.parseTime(e,M.LiteralTimestamp.parse)}visitLiteralHour(e){return this.parseTime(e,M.LiteralHour.parse)}visitLiteralDay(e){return this.parseTime(e,M.LiteralDay.parse)}visitLiteralWeek(e){return this.parseTime(e,M.LiteralWeek.parse)}visitLiteralMonth(e){return this.parseTime(e,M.LiteralMonth.parse)}visitLiteralQuarter(e){return this.parseTime(e,M.LiteralQuarter.parse)}visitLiteralYear(e){return this.parseTime(e,M.LiteralYear.parse)}visitImportStatement(e){let r=this.getPlainString(e.importURL()),n=this.astAt(new M.ImportStatement(r,this.parseInfo.importBaseURL),e),i=e.importSelect();if(i)for(let s of i.importItem()){let o=s.id(),a=o[1]?this.astAt(new M.ImportSourceName((0,ni.idToStr)(o[1])),o[1]):void 0;n.push(this.astAt(new M.ImportSelect((0,ni.idToStr)(o[0]),a),o[0]))}return n}visitJustExpr(e){return this.getFieldExpr(e.fieldExpr())}visitDefineSQLStatement(e){var r;let n=(r=e.nameSQLBlock())===null||r===void 0?void 0:r.text,i=e.sqlBlock().blockSQLDef(),s=new M.SQLString,o;for(let l of i){let c=l.connectionName();c&&(o?this.contextError(c,"Cannot redefine connection"):o=this.getPlainString(c));let f=l.sqlString();f&&this.makeSqlString(f,s)}let a=new M.SQLStatement(s);o!==void 0&&(a.connection=o),a.is=n;let u=this.astAt(a,e);return this.m4advisory(e,"`sql:` statement is deprecated, use `connection_name.sql(...)` instead"),u}visitSampleStatement(e){let r=e.sampleSpec().INTEGER_LITERAL();if(r)return new M.SampleProperty({rows:this.getNumber(r)});let n=e.sampleSpec().PERCENT_LITERAL();if(n)return new M.SampleProperty({percent:this.getNumber(n)});let i=e.sampleSpec().TRUE()!==void 0;return new M.SampleProperty({enable:i})}visitDocAnnotations(e){let r=e.DOC_ANNOTATION().map(i=>({text:i.text,at:this.getLocation(e)})),n=new M.ModelAnnotation(r);return this.compilerFlags=n.getCompilerFlags(this.compilerFlags,this.msgLog),n}visitIgnoredObjectAnnotations(e){return this.contextError(e,"Object annotation not connected to any object"),new YT(e.text)}visitIgnoredModelAnnotations(e){return this.contextError(e,"Model annotations not allowed at this scope"),new YT(e.text)}visitDefExploreAnnotation(e){let r=this.getNotes(e);return new M.ObjectAnnotation(r)}visitSQID(e){let r=this.getModelEntryName(e);return this.astAt(new M.SQReference(r),e.id())}getSqExpr(e){let r=this.visit(e);return r instanceof M.SourceQueryElement?r:(this.contextError(e,`Expected a source/query expression, not '${r.elementType}'`),new eP)}visitSQExtendedSource(e){let r=this.getSqExpr(e.sqExpr()),n=new M.SQExtend(r,this.getSourceExtensions(e.exploreProperties()));return this.astAt(n,e)}visitSQParens(e){let r=this.getSqExpr(e.sqExpr());return this.astAt(r,e)}visitSQArrow(e){let r=this.getSqExpr(e.sqExpr()),n=e.segExpr(),i=new M.SQArrow(r,this.getVExpr(n));return this.astAt(i,e)}getVExpr(e){let r=this.visit(e);if(r instanceof M.View)return r;throw this.internalError(e,`Expected view, got a '${r.elementType}'`)}visitSegField(e){return new M.ReferenceView(this.getFieldPath(e.fieldPath(),M.ViewOrScalarFieldReference))}visitSegOps(e){return new M.QOpDescView(this.visitQueryProperties(e.queryProperties()))}visitSegParen(e){return this.visit(e.vExpr())}visitVSeg(e){return this.visit(e.segExpr())}visitSegRefine(e){return new M.ViewRefine(this.getVExpr(e._lhs),this.getVExpr(e._rhs))}visitVArrow(e){return new M.ViewArrow(this.getVExpr(e._lhs),this.getVExpr(e._rhs))}visitSQRefinedQuery(e){let r=this.getSqExpr(e.sqExpr()),n=e.segExpr(),i=new M.SQRefine(r,this.getVExpr(n));return this.astAt(i,e)}visitSQTable(e){let r=this.visit(e.exploreTable());if(r instanceof Fot.TableSource){let n=new M.SQSource(r);return this.astAt(n,e)}return new eP}visitSQSQL(e){let r=new M.SQSource(this.visitSqlSource(e.sqlSource()));return this.astAt(r,e)}visitExperimentalStatementForTesting(e){return this.inExperiment("compilerTestExperimentParse",e),this.astAt(new M.ExperimentalExperiment("compilerTestExperimentTranslate"),e)}};Hc.MalloyToAST=aZ});var hAe=v(tP=>{"use strict";Object.defineProperty(tP,"__esModule",{value:!0});tP.MessageLog=void 0;var uZ=class{constructor(){this.rawLog=[]}getLog(){return this.rawLog}log(e){this.rawLog.push(e)}reset(){this.rawLog.length=0}noErrors(){return!this.hasErrors()}hasErrors(){return this.rawLog.find(r=>r.severity!=="warn")!==void 0}empty(){return this.rawLog.length===0}};tP.MessageLog=uZ});var pAe=v(rP=>{"use strict";Object.defineProperty(rP,"__esModule",{value:!0});rP.Zone=void 0;var lZ=class{constructor(){this.location={},this.zone=new Map}get(e){let r=this.zone.get(e);if(r?.status==="present")return r.value}getEntry(e){let r=this.zone.get(e);return r?r.firstReference||!this.location[e]?r:{...r,firstReference:this.location[e]}:{status:"error",message:"import reference failure"}}define(e,r){this.zone.set(e,{status:"present",value:r})}reference(e,r){let n=this.zone.get(e);n?.status===void 0&&(this.zone.set(e,{status:"reference",firstReference:r}),this.location[e]=r)}getUndefined(){let e=[];for(let[r,n]of this.zone)n.status==="reference"&&e.push(r);return e.length>0?e:void 0}updateFrom(e,r){if(e)for(let[n,i]of Object.entries(e))i!==void 0&&this.define(n,i);if(r)for(let[n,i]of Object.entries(r))this.zone.set(n,{status:"error",message:i})}};rP.Zone=lZ});var mAe=v(zc=>{"use strict";var Iot=zc&&zc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Mot=zc&&zc.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Pot=zc&&zc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Iot(e,t,r);return Mot(e,t),e};Object.defineProperty(zc,"__esModule",{value:!0});zc.walkForDocumentSymbols=void 0;var kot=dp(),Bot=Pot(T9()),qot=AT(),cZ=class{constructor(e,r,n,i){this.translator=e,this.tokens=r,this.scopes=n,this.symbols=i}popScope(){return this.scopes.pop()}peekScope(){return this.scopes[this.scopes.length-1]}enterTopLevelQueryDefs(e){let r=this.translator.rangeFromContext(e);e.topLevelQueryDef().length===1&&(this.blockRange=r)}enterTopLevelQueryDef(e){this.symbols.push({range:this.translator.rangeFromContext(e),name:e.queryName().text,type:"query",children:[],lensRange:this.blockRange}),this.blockRange=void 0}enterRunStatement(e){this.symbols.push({range:this.translator.rangeFromContext(e.topLevelAnonQueryDef()),name:"unnamed_query",type:"unnamed_query",children:[],lensRange:this.translator.rangeFromContext(e)})}enterAnonymousQuery(e){this.symbols.push({range:this.translator.rangeFromContext(e.topLevelAnonQueryDef().sqExpr()),name:"unnamed_query",type:"unnamed_query",children:[],lensRange:this.translator.rangeFromContext(e)})}enterDefineSourceStatement(e){let r=this.translator.rangeFromContext(e);e.sourcePropertyList().sourceDefinition().length===1&&(this.blockRange=r)}enterSourceDefinition(e){let r=this.translator.rangeFromContext(e);this.scopes.push({range:r,name:e.sourceNameDef().id().text,type:"explore",children:[],lensRange:this.blockRange}),this.blockRange=void 0}exitSourceDefinition(e){let r=this.popScope();r&&this.symbols.push(r)}enterDefExploreQuery(e){let r=this.translator.rangeFromContext(e);e.subQueryDefList().exploreQueryDef().length===1&&(this.blockRange=r)}enterExploreQueryDef(e){let r={range:this.translator.rangeFromContext(e),name:e.exploreQueryNameDef().id().text,type:"query",children:[],lensRange:this.blockRange},n=this.peekScope();n&&n.children.push(r),this.scopes.push(r),this.blockRange=void 0}exitExploreQueryDef(e){this.popScope()}handleNestEntry(e){let r={range:this.translator.rangeFromContext(e),name:e instanceof Bot.NestExistingContext?e.fieldPath().text:e.queryName().id().text,type:"query",children:[]},n=this.peekScope();return n&&n.children.push(r),r}enterNestExisting(e){this.handleNestEntry(e)}enterNestDef(e){let r=this.handleNestEntry(e);this.scopes.push(r)}exitNestDef(e){this.popScope()}enterFieldDef(e){let r={range:this.translator.rangeFromContext(e),name:e.fieldNameDef().id().text,type:"field",children:[]},n=this.peekScope();n&&n.children.push(r)}enterQueryFieldEntry(e){var r;let n=(r=e.taggedRef())===null||r===void 0?void 0:r.fieldPath();if(n===void 0)return;let i={range:this.translator.rangeFromContext(e),name:n.text,type:"field",children:[]},s=this.peekScope();s&&s.children.push(i)}enterExploreRenameDef(e){let r={range:this.translator.rangeFromContext(e),name:e.fieldName()[0].text,type:"field",children:[]},n=this.peekScope();n&&n.children.push(r)}enterJoinWith(e){this.handleJoinDef(e)}enterJoinOn(e){this.handleJoinDef(e)}handleJoinDef(e){let r={range:this.translator.rangeFromContext(e),name:e.joinNameDef().id().text,type:"join",children:[]},n=this.peekScope();n&&n.children.push(r)}enterDefineSQLStatement(e){let r=e.nameSQLBlock().text,n={range:this.translator.rangeFromContext(e),name:r,type:"sql",children:[]};this.symbols.push(n)}enterImportStatement(e){let r=(0,qot.getStringIfShort)(e.importURL());r&&this.scopes.push({range:this.translator.rangeFromContext(e),name:r,type:"import",children:[]})}exitImportStatement(){let e=this.popScope();e&&this.symbols.push(e)}enterImportSelect(e){let r=this.peekScope();if(r)for(let n of e.importItem()){let i={range:this.translator.rangeFromContext(e),name:n.text,type:"import_item",children:[]};r.children.push(i)}}};function Uot(t,e,r){let n=new cZ(t,e,[],[]),i=n;return kot.ParseTreeWalker.DEFAULT.walk(i,r),n.symbols}zc.walkForDocumentSymbols=Uot});var xZ=v(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.sortHighlights=Ue.walkForDocumentHighlights=Ue.passForHighlights=Ue.HighlightType=void 0;var $ot=dp(),Te=T9();Ue.HighlightType={Identifier:"identifier",Type:"type",Literal:{Date:"literal.date",Number:"literal.number",String:"literal.string",RegularExpression:"literal.regular_expression",Boolean:"literal.boolean",Null:"literal.null"},Call:{Aggregate:"call.aggregate",TimeFrame:"call.time_frame",Cast:"call.cast",Table:"call.table",From:"call.from",Function:"call.function",FromSQL:"call.from_sql"},Keyword:{AggregateModifier:{Distinct:"keyword.aggregate_modifier.distinct"},CastModifier:{As:"keyword.cast_modifier.as"},Is:"keyword.is",On:"keyword.on",Desc:"keyword.desc",Asc:"keyword.asc",Pick:"keyword.pick",When:"keyword.when",Else:"keyword.else",With:"keyword.with",JSON:"keyword.json",Turtle:"keyword.turtle",Import:"keyword.import"},Operator:{Comparison:"operator.comparison",Boolean:"operator.boolean",Date:"operator.date"},Comment:{Line:"comment.line",Block:"comment.block"},Property:{Accept:"property.accept",Aggregate:"property.aggregate",Dimension:"property.dimension",Except:"property.except",Source:"property.source",GroupBy:"property.group_by",Having:"property.having",Index:"property.index",JoinOne:"keyword.join_one",JoinMany:"keyword.join_many",JoinCross:"keyword.join_cross",Limit:"property.limit",Measure:"property.measure",Nest:"property.nest",OrderBy:"property.order_by",PrimaryKey:"property.primary_key",Project:"property.project",Query:"property.query",Rename:"property.rename",Top:"property.top",Where:"property.where",SQL:"property.sql"}};function jot(t){let e=[],r=(n,i,s=!1)=>{var o;let a=n.startIndex-n.charPositionInLine,u=((o=n.text)===null||o===void 0?void 0:o.split(`
`))||[],l=u.length,c=u.slice(0,-1).reduce((x,d)=>x+d.length,0),f=s?1:0;e.push({type:i,range:{start:{line:n.line-1,character:n.startIndex-a},end:{line:n.line-1+l-1,character:n.stopIndex+2-(l>1?n.startIndex:a)-c-l-f}}})};for(let n=0;n<t.size;n++){let i=t.get(n);switch(i.type){case Te.MalloyParser.ACCEPT:r(i,Ue.HighlightType.Property.Accept,!0);break;case Te.MalloyParser.AGGREGATE:r(i,Ue.HighlightType.Property.Aggregate,!0);break;case Te.MalloyParser.DIMENSION:r(i,Ue.HighlightType.Property.Dimension,!0);break;case Te.MalloyParser.EXCEPT:r(i,Ue.HighlightType.Property.Except,!0);break;case Te.MalloyParser.GROUP_BY:r(i,Ue.HighlightType.Property.GroupBy,!0);break;case Te.MalloyParser.HAVING:r(i,Ue.HighlightType.Property.Having,!0);break;case Te.MalloyParser.INDEX:r(i,Ue.HighlightType.Property.Index,!0);break;case Te.MalloyParser.JOIN_CROSS:r(i,Ue.HighlightType.Property.JoinOne,!0);break;case Te.MalloyParser.JOIN_ONE:r(i,Ue.HighlightType.Property.JoinMany,!0);break;case Te.MalloyParser.JOIN_MANY:r(i,Ue.HighlightType.Property.JoinCross,!0);break;case Te.MalloyParser.LIMIT:r(i,Ue.HighlightType.Property.Limit,!0);break;case Te.MalloyParser.MEASURE:r(i,Ue.HighlightType.Property.Measure,!0);break;case Te.MalloyParser.NEST:r(i,Ue.HighlightType.Property.Nest,!0);break;case Te.MalloyParser.ORDER_BY:r(i,Ue.HighlightType.Property.OrderBy,!0);break;case Te.MalloyParser.PRIMARY_KEY:r(i,Ue.HighlightType.Property.PrimaryKey,!0);break;case Te.MalloyParser.PROJECT:r(i,Ue.HighlightType.Property.Project,!0);break;case Te.MalloyParser.QUERY:r(i,Ue.HighlightType.Property.Query,!0);break;case Te.MalloyParser.RENAME:r(i,Ue.HighlightType.Property.Rename,!0);break;case Te.MalloyParser.SOURCE:r(i,Ue.HighlightType.Property.Source,!0);break;case Te.MalloyParser.TOP:r(i,Ue.HighlightType.Property.Top,!0);break;case Te.MalloyParser.WHERE:r(i,Ue.HighlightType.Property.Where,!0);break;case Te.MalloyParser.SQL:r(i,Ue.HighlightType.Property.SQL,!0);break;case Te.MalloyParser.TABLE:r(i,Ue.HighlightType.Call.Table);break;case Te.MalloyParser.FROM:r(i,Ue.HighlightType.Call.From);break;case Te.MalloyParser.FROM_SQL:r(i,Ue.HighlightType.Call.FromSQL);break;case Te.MalloyParser.SQ_STRING:case Te.MalloyParser.DQ_STRING:r(i,Ue.HighlightType.Literal.String);break;case Te.MalloyParser.NUMERIC_LITERAL:case Te.MalloyParser.INTEGER_LITERAL:r(i,Ue.HighlightType.Literal.Number);break;case Te.MalloyParser.HACKY_REGEX:r(i,Ue.HighlightType.Literal.RegularExpression);break;case Te.MalloyParser.IS:r(i,Ue.HighlightType.Keyword.Is);break;case Te.MalloyParser.DISTINCT:r(i,Ue.HighlightType.Keyword.AggregateModifier.Distinct);break;case Te.MalloyParser.ON:r(i,Ue.HighlightType.Keyword.On);break;case Te.MalloyParser.DESC:r(i,Ue.HighlightType.Keyword.Desc);break;case Te.MalloyParser.ASC:r(i,Ue.HighlightType.Keyword.Asc);break;case Te.MalloyParser.CAST:r(i,Ue.HighlightType.Call.Cast);break;case Te.MalloyParser.AS:r(i,Ue.HighlightType.Keyword.CastModifier.As);break;case Te.MalloyParser.PICK:r(i,Ue.HighlightType.Keyword.Pick);break;case Te.MalloyParser.WHEN:r(i,Ue.HighlightType.Keyword.When);break;case Te.MalloyParser.WITH:r(i,Ue.HighlightType.Keyword.With);break;case Te.MalloyParser.ELSE:r(i,Ue.HighlightType.Keyword.Else);break;case Te.MalloyParser.JSON:r(i,Ue.HighlightType.Keyword.JSON);break;case Te.MalloyParser.TURTLE:r(i,Ue.HighlightType.Keyword.Turtle);break;case Te.MalloyParser.TRUE:case Te.MalloyParser.FALSE:r(i,Ue.HighlightType.Literal.Boolean);break;case Te.MalloyParser.NOW:case Te.MalloyParser.LITERAL_TIMESTAMP:case Te.MalloyParser.LITERAL_QUARTER:case Te.MalloyParser.LITERAL_MONTH:case Te.MalloyParser.LITERAL_DAY:case Te.MalloyParser.LITERAL_WEEK:case Te.MalloyParser.LITERAL_YEAR:r(i,Ue.HighlightType.Literal.Date);break;case Te.MalloyParser.NULL:r(i,Ue.HighlightType.Literal.Null);break;case Te.MalloyParser.AND:case Te.MalloyParser.OR:case Te.MalloyParser.NOT:r(i,Ue.HighlightType.Operator.Boolean);break;case Te.MalloyParser.FOR:r(i,Ue.HighlightType.Operator.Date);break;case Te.MalloyParser.COMMENT_TO_EOL:r(i,Ue.HighlightType.Comment.Line);break;case Te.MalloyParser.BLOCK_COMMENT:r(i,Ue.HighlightType.Comment.Block);break;case Te.MalloyParser.SUM:case Te.MalloyParser.COUNT:case Te.MalloyParser.AVG:case Te.MalloyParser.MIN:case Te.MalloyParser.MAX:r(i,Ue.HighlightType.Call.Aggregate);break;case Te.MalloyParser.IDENTIFIER:case Te.MalloyParser.BQ_STRING:r(i,Ue.HighlightType.Identifier);break;case Te.MalloyParser.STRING:case Te.MalloyParser.NUMBER:case Te.MalloyParser.BOOLEAN:case Te.MalloyParser.DATE:case Te.MalloyParser.TIMESTAMP:r(i,Ue.HighlightType.Type);break;case Te.MalloyParser.SECOND:case Te.MalloyParser.MINUTE:case Te.MalloyParser.HOUR:case Te.MalloyParser.DAY:case Te.MalloyParser.WEEK:case Te.MalloyParser.MONTH:case Te.MalloyParser.QUARTER:case Te.MalloyParser.YEAR:r(i,Ue.HighlightType.Call.TimeFrame);break;case Te.MalloyParser.IMPORT:r(i,Ue.HighlightType.Keyword.Import);break}}return e}Ue.passForHighlights=jot;var fZ=class{constructor(e,r){this.tokens=e,this.highlights=r}rangeOf(e){let r=e.stop||e.start;return{start:{line:e.start.line-1,character:e.start.charPositionInLine},end:{line:r.line-1,character:r.stopIndex-(r.startIndex-r.charPositionInLine)+1}}}enterExprFunc(e){let r=e.id()||e.timeframe();r&&this.highlights.push({range:this.rangeOf(r),type:Ue.HighlightType.Call.Function})}};function Hot(t,e){let r=new fZ(t,[]),n=r;return $ot.ParseTreeWalker.DEFAULT.walk(n,e),r.highlights}Ue.walkForDocumentHighlights=Hot;function zot(t){return t.sort((e,r)=>e.range.start.line<r.range.start.line?-1:e.range.start.line>r.range.start.line?1:e.range.start.character<r.range.start.character?-1:e.range.start.character>r.range.start.character?1:0)}Ue.sortHighlights=zot});var gAe=v(nP=>{"use strict";Object.defineProperty(nP,"__esModule",{value:!0});nP.walkForDocumentCompletions=void 0;var Got=dp(),Qot=["dimension","measure","join_one","join_many","join_cross","where","primary_key","rename","accept","except","query","declare"],Vot=["group_by","project","index","aggregate","top","limit","order_by","where","having","nest","declare"],Wot=["source","explore","query","sql"],dZ=class{constructor(e,r,n){this.tokens=e,this.completions=r,this.position=n}rangeOf(e){let r=e.stop||e.start;return{start:{line:e.start.line-1,character:e.start.charPositionInLine},end:{line:r.line-1,character:r.stopIndex-(r.startIndex-r.charPositionInLine)+1}}}inRange(e){let{start:r,end:n}=e,i=this.position.line>r.line||this.position.line===r.line&&this.position.character>=r.character,s=this.position.line<n.line||this.position.line===n.line&&this.position.character<=n.character;return i&&s}enterExploreProperties(e){if(this.inRange(this.rangeOf(e))){let r=!1;for(let n of e.exploreStatement())this.inRange(this.rangeOf(n))&&(r=!0);if(!r)for(let n of Qot)this.completions.push({type:"explore_property",text:`${n}: `})}}enterQueryProperties(e){if(this.inRange(this.rangeOf(e))){let r=!1;for(let n of e.queryStatement())this.inRange(this.rangeOf(n))&&(r=!0);if(!r)for(let n of Vot)this.completions.push({type:"query_property",text:`${n}: `})}}enterMalloyDocument(e){if(this.inRange(this.rangeOf(e))){let r=!1;for(let n of e.malloyStatement())this.inRange(this.rangeOf(n))&&(r=!0);if(!r)for(let n of Wot)this.completions.push({type:"model_property",text:`${n}: `})}}};function Yot(t,e,r){let n=new dZ(t,[],r),i=n;return Got.ParseTreeWalker.DEFAULT.walk(i,e),n.completions}nP.walkForDocumentCompletions=Yot});var yAe=v(iP=>{"use strict";Object.defineProperty(iP,"__esModule",{value:!0});iP.walkForDocumentHelpContext=void 0;var Kot=yW(),hZ=class extends Kot.AbstractParseTreeVisitor{constructor(e){super(),this.position=e,this.type=""}rangeOf(e){let r=e.stop||e.start;return{start:{line:e.start.line-1,character:e.start.charPositionInLine},end:{line:r.line-1,character:r.stopIndex-(r.startIndex-r.charPositionInLine)+1}}}inRange(e){return e.start.line<=this.position.line&&e.end.line>=this.position.line&&(this.position.line!==e.start.line||this.position.character>=e.start.character)&&(this.position.line!==e.end.line||this.position.character<=e.end.character)}defaultResult(){}visitChildren(e){let r=this.defaultResult();if(this.inRange(this.rangeOf(e))){r={type:this.type,token:e.start.text};let n=e.childCount;for(let i=0;i<n;i++){let o=e.getChild(i).accept(this);o&&(r=this.aggregateResult(r,o))}}return r}visitMalloyDocument(e){return this.inRange(this.rangeOf(e))?(this.type="model_property",this.visitChildren(e)):this.defaultResult()}visitExploreProperties(e){return this.inRange(this.rangeOf(e))?(this.type="explore_property",this.visitChildren(e)):this.defaultResult()}visitQueryProperties(e){return this.inRange(this.rangeOf(e))?(this.type="query_property",this.visitChildren(e)):this.defaultResult()}aggregateResult(e,r){return r}};function Xot(t,e){return new hZ(e).visit(t)}iP.walkForDocumentHelpContext=Xot});var pZ=v(sP=>{"use strict";Object.defineProperty(sP,"__esModule",{value:!0});sP.locationContainsPosition=void 0;function Jot(t,e){return t.range.start.line<=e.line&&t.range.end.line>=e.line&&(e.line!==t.range.start.line||e.character>=t.range.start.character)&&(e.line!==t.range.end.line||e.character<=t.range.end.character)}sP.locationContainsPosition=Jot});var EAe=v(oP=>{"use strict";Object.defineProperty(oP,"__esModule",{value:!0});oP.ReferenceList=void 0;var Zot=pZ(),mZ=class{constructor(e){this.sourceURL=e,this.references=[]}findIndexBefore(e){let r=0,n=this.references.length;for(;r<n;){let i=Math.floor((r+n)/2),s=this.references[i].location.range.end;s.line<e.line||s.line===e.line&&s.character<e.character?r=i+1:n=i}return r}add(e){if(e.location.url!==this.sourceURL)return;let r=this.findIndexBefore(e.location.range.end);r<this.references.length&&this.isPositionEqual(e,this.references[r])||this.references.splice(r,0,e)}isPositionEqual(e,r){let n=e.location.range,i=r.location.range;return n.start.line===i.start.line&&n.start.character===i.start.character&&n.end.line===i.end.line&&n.end.character===i.end.character}find(e){let r=this.findIndexBefore(e);if(r===this.references.length)return;let n=this.references[r];if((0,Zot.locationContainsPosition)(n.location,e))return n}};oP.ReferenceList=mZ});var AAe=v(aP=>{"use strict";Object.defineProperty(aP,"__esModule",{value:!0});aP.isNeedResponse=void 0;function eat(t){return!!t&&(t.tables||t.urls||t.compileSQL)!==void 0}aP.isNeedResponse=eat});var SAe=v(uP=>{"use strict";Object.defineProperty(uP,"__esModule",{value:!0});uP.walkForModelAnnotation=void 0;var tat=dp(),gZ=class{constructor(e,r,n){this.translator=e,this.tokens=r,this.parseInfo=n,this.notes=[]}getLocation(e){return{url:this.parseInfo.sourceURL,range:this.parseInfo.rangeFromContext(e)}}enterDocAnnotations(e){let r=e.DOC_ANNOTATION().map(n=>({text:n.text,at:this.getLocation(e)}));this.notes.push(...r)}get annotation(){return{notes:this.notes}}};function rat(t,e,r){let n=new gZ(t,e,r),i=n;return tat.ParseTreeWalker.DEFAULT.walk(i,r.root),n.annotation}uP.walkForModelAnnotation=rat});var bAe=v(ks=>{"use strict";var nat=ks&&ks.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iat=ks&&ks.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),sat=ks&&ks.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nat(e,t,r);return iat(e,t),e};Object.defineProperty(ks,"__esModule",{value:!0});ks.MalloyParserErrorHandler=ks.MalloyTranslator=ks.MalloyChildTranslator=ks.MalloyTranslation=void 0;var vAe=z7(),oat=wme(),aat=T9(),lP=sat(ZM()),uat=dAe(),lat=hAe(),cat=eZ(),yZ=pAe(),fat=mAe(),EZ=xZ(),xat=gAe(),dat=yAe(),hat=EAe(),cP=AAe(),pat=pZ(),_Ae=Um(),mat=SAe(),AZ=class extends oat.MalloyLexer{popMode(){return this._modeStack.isEmpty?this._mode:super.popMode()}},SZ=class{step(e){if(this.response)return this.response;if(e.urlIsFullPath===void 0)try{let s=new URL(e.sourceURL);e.urlIsFullPath=!0}catch(s){let o=s instanceof Error?s.message:"";e.urlIsFullPath=!1,e.root.logger.log({message:`Could not compute full path URL: ${o}`,severity:"error"})}if(!e.urlIsFullPath)return e.fatalResponse();let r=e.root.importZone.getEntry(e.sourceURL);if(r.status!=="present"){if(r.status==="error"){let s=r.message.includes(e.sourceURL)?`import error: ${r.message}`:`import '${e.sourceURL}' error: ${r.message}`,o=r.firstReference||e.defaultLocation();return e.root.logger.log({message:s,at:o,severity:"error"}),this.response=e.fatalResponse(),this.response}return{urls:[e.sourceURL]}}let n=r.value===""?`
`:r.value;this.sourceInfo=this.getSourceInfo(n);let i;try{i=this.runParser(n,e)}catch(s){e.root.logger.log({message:`Malloy internal parser exception [${s.message}]`,severity:"error"}),i=void 0}return e.root.logger.hasErrors()?this.response={parse:i,...e.fatalResponse()}:this.response={parse:i},this.response}getSourceInfo(e){let r=/\r?\n/,n={at:[],lines:[],length:e.length},i=e,s=0;for(;i!=="";){let o=i.match(r);if(o&&o.index!==void 0){n.lines.push(i.slice(0,o.index));let a=o.index+o[0].length;n.at.push({begin:s,end:s+a}),s+=a,i=i.slice(a)}else{n.lines.push(i),n.at.push({begin:s,end:s+i.length});break}}return n}runParser(e,r){let n=vAe.CharStreams.fromString(e),i=new AZ(n),s=new vAe.CommonTokenStream(i),o=new aat.MalloyParser(s);o.removeErrorListeners(),o.addErrorListener(new xP(r,r.root.logger));let a=o[r.grammarRule];if(!a)throw new Error(`No such parse rule as ${r.grammarRule}`);return{root:a.call(o),tokenStream:s,sourceStream:n,sourceURL:r.sourceURL,importBaseURL:r.importBaseURL||r.sourceURL,rangeFromContext:u=>r.rangeFromContext(u),malloyVersion:"4.0.0"}}},vZ=class{constructor(e){this.parseStep=e,this.parseReferences=void 0}step(e){let r=this.parseStep.step(e);if(r.parse===void 0)return r;if(!this.parseReferences){this.parseReferences=(0,cat.findReferences)(e,r.parse.tokenStream,r.parse.root);for(let o in this.parseReferences.tables)e.root.schemaZone.reference(o,{url:e.sourceURL,range:this.parseReferences.tables[o].firstReference});for(let o in this.parseReferences.urls){let a=this.parseReferences.urls[o];try{let u=decodeURI(new URL(o,e.importBaseURL||e.sourceURL).toString());e.addChild(u),e.imports.push({importURL:u,location:{url:e.sourceURL,range:a}}),e.root.importZone.reference(u,{url:e.sourceURL,range:a})}catch{e.root.logger.log({message:`Malformed URL '${o}'"`,at:{url:e.sourceURL,range:a},severity:"error"})}}}if(e.root.logger.hasErrors())return null;let n={},i=e.root.schemaZone.getUndefined();if(i){let o={};for(let a of i){let u=this.parseReferences.tables[a];o[a]={connectionName:u.connectionName,tablePath:u.tablePath}}n={tables:o}}let s=e.root.importZone.getUndefined();if(s&&(n={...n,urls:s}),(0,cP.isNeedResponse)(n))return n;for(let o of e.childTranslators.values()){let a=o.importsAndTablesStep.step(o);if((0,cP.isNeedResponse)(a))return a}return null}},_Z=class{constructor(e){this.importStep=e,this.walked=!1}step(e){if(this.response)return this.response;let r=this.importStep.step(e);if(r)return r;let n=e.parseStep.response;if(e.root.logger.hasErrors())return this.response=e.fatalResponse(),this.response;let i=n?.parse;if(!i)throw new Error("TRANSLATOR INTERNAL ERROR: Translator parse response had no errors, but also no parser");let s=new uat.MalloyToAST(i,e.root.logger,e.compilerFlags),o=s.visit(i.root);if(e.compilerFlags=s.compilerFlags,e.root.logger.hasErrors())return this.response=e.fatalResponse(),this.response;if(o.elementType==="unimplemented")throw new Error("TRANSLATOR INTERNAL ERROR: Unimplemented AST node");let a={};if(!this.walked){for(let u of o.walk())u instanceof lP.FromSQLSource?(a[u.refName]||(a[u.refName]={}),a[u.refName].ref=u):u instanceof lP.SQLStatement&&u.is?(a[u.is]||(a[u.is]={}),a[u.is].def=u):u instanceof lP.Unimplemented&&u.log("INTERNAL COMPILER ERROR: Untranslated parse node");this.walked=!0}if(e.root.logger.hasErrors())return this.response=e.fatalResponse(),this.response;for(let u of e.childTranslators.values()){let l=u.astStep.step(u);if((0,cP.isNeedResponse)(l))return l}return o.setTranslator(e),this.response={...e.problemResponse(),ast:o,final:!0},this.response}},bZ=class{constructor(e){this.parseStep=e}step(e){if(!this.response){let r=this.parseStep.step(e);if(r.parse){let n;try{n=(0,fat.walkForDocumentSymbols)(e,r.parse.tokenStream,r.parse.root)}catch{}let i;try{i=(0,EZ.walkForDocumentHighlights)(r.parse.tokenStream,r.parse.root)}catch{i=[]}this.response={symbols:n,highlights:(0,EZ.sortHighlights)([...(0,EZ.passForHighlights)(r.parse.tokenStream),...i]),final:!0}}else return r}return this.response}},TZ=class{constructor(e){this.parseStep=e}step(e,r){let n=this.parseStep.step(e);if(n.parse){let i=[];if(r!==void 0)try{i=(0,xat.walkForDocumentCompletions)(n.parse.tokenStream,n.parse.root,r)}catch{}return{...n,completions:i}}else return n}},CZ=class{constructor(e){this.parseStep=e}step(e,r){let n=this.parseStep.step(e);if(n.parse){let i;if(r!==void 0)try{i=(0,dat.walkForDocumentHelpContext)(n.parse.root,r)}catch{}return{...n,helpContext:i}}else return n}},RZ=class{constructor(e){this.parseStep=e}step(e,r){if(!this.response){let n=this.parseStep.step(e);if(!n.parse||n.final)return n;{let i=(0,mat.walkForModelAnnotation)(e,n.parse.tokenStream,n.parse);this.response={modelAnnotation:{...i,inherits:r?.annotation}}}}return this.response}},OZ=class{constructor(e){this.astStep=e,this.importedAnnotations=!1}step(e,r){if(this.response)return this.response;if(r&&!this.importedAnnotations){let i=_Ae.Tag.annotationToTag(r.annotation,{prefix:/^##! /});e.compilerFlags=i.tag,this.importedAnnotations=!0}let n=this.astStep.step(e);if((0,cP.isNeedResponse)(n))return n;if(!n.ast)return this.response=n,this.response;if(e.grammarRule==="malloyDocument")if(n.ast instanceof lP.Document){let i=n.ast;for(i.initModelDef(r);;){let s=i.compile();if(s.needs)return s.needs;e.modelDef=s.modelDef,e.queryList=s.queryList,e.sqlBlocks=s.sqlBlocks;break}}else e.root.logger.log({message:`'${e.sourceURL}' did not parse to malloy document`,at:e.defaultLocation(),severity:"error"});return e.root.logger.hasErrors()?this.response={fromSources:e.getDependencies(),...e.fatalResponse()}:this.response={translated:{modelDef:e.modelDef,queryList:e.queryList,sqlBlocks:e.sqlBlocks},fromSources:e.getDependencies(),...e.problemResponse(),final:!0},this.response}},KT=class{constructor(e,r=null,n="malloyDocument"){this.sourceURL=e,this.importBaseURL=r,this.grammarRule=n,this.queryList=[],this.sqlBlocks=[],this.imports=[],this.compilerFlags=new _Ae.Tag,this.childTranslators=new Map,this.modelDef={name:e,exports:[],contents:{}},this.parseStep=new SZ,this.modelAnnotationStep=new RZ(this.parseStep),this.metadataStep=new bZ(this.parseStep),this.completionsStep=new TZ(this.parseStep),this.helpContextStep=new CZ(this.parseStep),this.importsAndTablesStep=new vZ(this.parseStep),this.astStep=new _Z(this.importsAndTablesStep),this.translateStep=new OZ(this.astStep),this.references=new hat.ReferenceList(e)}addChild(e){this.childTranslators.get(e)||this.childTranslators.set(e,new fP(e,this.root))}getDependencies(){let e=[this.sourceURL];for(let[r,n]of this.childTranslators)e.push(...n.getDependencies());return e}addReference(e){this.references.add(e)}referenceAt(e){return this.references.find(e)}fatalResponse(){return{final:!0,...this.problemResponse()}}problemResponse(){return{problems:this.problems()}}problems(){return[...this.root.logger.getLog()]}getLineMap(e){var r,n;if(e===this.sourceURL)return(r=this.parseStep.sourceInfo)===null||r===void 0?void 0:r.lines;let i=this.childTranslators.get(e);if(i)return(n=i.parseStep.sourceInfo)===null||n===void 0?void 0:n.lines}codeAtLocation(e){let r=this.getLineMap(e.url)||[];if(e.range.start.line===e.range.end.line)return r[e.range.start.line].slice(e.range.start.character,e.range.end.character);let n="";n+=r[e.range.start.line].slice(e.range.start.character);for(let i=e.range.start.line+1;i<e.range.end.line;i++)n+=r[i];return n+=r[e.range.end.line].slice(0,e.range.end.character),n}prettyErrors(){let e="",r="";for(let n of this.root.logger.getLog()){let i=n.message,s=this.sourceURL;if(n.at){s=n.at.url;let o=n.at.range.start.line,a=n.at.range.start.character,u=this.getLineMap(n.at.url);if(u){let l=u[o];i=`line ${o+1}: ${n.message}
  | ${l}`,a>0&&(i=i+`
  | ${" ".repeat(a)}^`)}else i=`line ${o+1}: char ${a}: ${n.message}`}r!==s&&(i=`FILE: ${s}
`+i,r=s),e!==""?e=`${e}
${i}`:e=i}return e}childRequest(e){var r;let n=decodeURI(new URL(e,this.sourceURL).toString()),i=(r=this.childTranslators.get(n))===null||r===void 0?void 0:r.translate();if(i?.compileSQL)return{compileSQL:i.compileSQL,partialModel:i.partialModel}}getChildExports(e){let r={},n=decodeURI(new URL(e,this.sourceURL).toString()),i=this.childTranslators.get(n);if(i&&i.translate().translated)for(let o of i.modelDef.exports){let a=i.modelDef.contents[o];(a.type==="struct"||a.type==="query")&&(r[o]=a)}return r}translate(e){if(this.finalAnswer)return this.finalAnswer;let r=this.translateStep.step(this,e);return r.final&&(this.finalAnswer=r),r}importAt(e){for(let r=0;r<this.imports.length;r++){let n=this.imports[r];if((0,pat.locationContainsPosition)(n.location,e))return n}}metadata(){return this.metadataStep.step(this)}modelAnnotation(e){return this.modelAnnotationStep.step(this,e)}completions(e){return this.completionsStep.step(this,e)}helpContext(e){return this.helpContextStep.step(this,e)}defaultLocation(){return{url:this.sourceURL,range:{start:{line:0,character:0},end:{line:0,character:0}}}}rangeFromContext(e){return this.rangeFromTokens(e.start,e.stop||e.start)}rangeFromTokens(e,r){let n={line:e.line-1,character:e.charPositionInLine};if(this.parseStep.sourceInfo&&r.stopIndex!==-1){let i=this.parseStep.sourceInfo.lines.length-1;for(let s=e.line-1;s<=i;s++){let o=this.parseStep.sourceInfo.at[s];if(r.stopIndex>=o.begin&&r.stopIndex<=o.end)return{start:n,end:{line:s,character:r.stopIndex-o.begin+1}}}return{start:n,end:{line:i,character:this.parseStep.sourceInfo.lines[i].length}}}return{start:n,end:n}}rangeFromToken(e){return this.rangeFromTokens(e,e)}};ks.MalloyTranslation=KT;var fP=class extends KT{constructor(e,r){super(e),this.root=r}};ks.MalloyChildTranslator=fP;var DZ=class extends KT{constructor(e,r=null,n=null){super(e,r),this.schemaZone=new yZ.Zone,this.importZone=new yZ.Zone,this.sqlQueryZone=new yZ.Zone,this.logger=new lat.MessageLog,this.root=this,n&&this.update(n)}update(e){var r,n,i;this.schemaZone.updateFrom(e.tables,(r=e.errors)===null||r===void 0?void 0:r.tables),this.importZone.updateFrom(e.urls,(n=e.errors)===null||n===void 0?void 0:n.urls),this.sqlQueryZone.updateFrom(e.compileSQL,(i=e.errors)===null||i===void 0?void 0:i.compileSQL)}};ks.MalloyTranslator=DZ;var xP=class{constructor(e,r){this.translator=e,this.messages=r}syntaxError(e,r,n,i,s,o){let a={line:n-1,character:i},u=r?this.translator.rangeFromToken(r):{start:a,end:a},l={message:s,at:{url:this.translator.sourceURL,range:u},severity:"error"};this.messages.log(l)}};ks.MalloyParserErrorHandler=xP});var TAe=v(FS=>{"use strict";Object.defineProperty(FS,"__esModule",{value:!0});FS.exploreQueryWalkerBuilder=FS.ExploreQueryWalker=void 0;var gat=dp(),dP=class{constructor(e){this.inDocument=!1,this.exploreClauseRefs=[],this.tokens=e}exploreQueryAtOffset(e){return this.exploreClauseRefs.find(r=>r.range[0]===void 0||r.range[1]===void 0?!1:r.range[0]<=e&&r.range[1]>=e)}filterAtOffset(e){let r=this.exploreQueryAtOffset(e);if(r)return r.filterRefs.find(n=>n.range[0]===void 0||n.range[1]===void 0?!1:n.range[0]<=e&&n.range[1]>=e)}hasFilterListAtOffset(e){let r=this.exploreQueryAtOffset(e);return r?!!r.filterLists.find(n=>n.range[0]===void 0||n.range[1]===void 0?!1:n.range[0]<=e&&n.range[1]>=e):!1}enterMalloyDocument(){this.inDocument=!0}};FS.ExploreQueryWalker=dP;function yat(t,e){let r=new dP(t),n=r;return gat.ParseTreeWalker.DEFAULT.walk(n,e),r}FS.exploreQueryWalkerBuilder=yat});var NZ=v(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});Fp.HighlightType=Fp.exploreQueryWalkerBuilder=Fp.MalloyTranslator=void 0;var Eat=bAe();Object.defineProperty(Fp,"MalloyTranslator",{enumerable:!0,get:function(){return Eat.MalloyTranslator}});var Aat=TAe();Object.defineProperty(Fp,"exploreQueryWalkerBuilder",{enumerable:!0,get:function(){return Aat.exploreQueryWalkerBuilder}});var Sat=xZ();Object.defineProperty(Fp,"HighlightType",{enumerable:!0,get:function(){return Sat.HighlightType}})});var OAe=v(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.CSVWriter=Ae.JSONWriter=Ae.DataWriter=Ae.DataRecord=Ae.DataArray=Ae.Result=Ae.ExploreMaterializer=Ae.SQLBlockMaterializer=Ae.PreparedResultMaterializer=Ae.QueryMaterializer=Ae.ModelMaterializer=Ae.SingleConnectionRuntime=Ae.ConnectionRuntime=Ae.Runtime=Ae.ExploreField=Ae.JoinRelationship=Ae.QueryField=Ae.Query=Ae.StringField=Ae.UnsupportedField=Ae.JSONField=Ae.BooleanField=Ae.NumberField=Ae.TimestampField=Ae.DateField=Ae.TimestampTimeframe=Ae.DateTimeframe=Ae.AtomicField=Ae.AtomicFieldType=Ae.Explore=Ae.SourceRelationship=Ae.FixedConnectionMap=Ae.InMemoryURLReader=Ae.EmptyURLReader=Ae.PreparedResult=Ae.DocumentCompletion=Ae.DocumentSymbol=Ae.DocumentPosition=Ae.DocumentRange=Ae.DocumentHighlight=Ae.Parse=Ae.PreparedQuery=Ae.Model=Ae.MalloyError=Ae.Malloy=void 0;var vat=NZ(),Ip=Wf(),_at=IX(),dn=Um(),bat=QN(),qn=class t{static get version(){return"0.0.1"}static get log(){return t._log||console}static setLogger(e){t._log=e}static _parse(e,r,n){r===void 0&&(r=new URL("internal://internal.malloy"));let i=r;n?.importBaseURL&&(i=n?.importBaseURL);let s=new vat.MalloyTranslator(r.toString(),i.toString(),{urls:{[r.toString()]:e}});return new pP(s)}static parse({url:e,urlReader:r,source:n,options:i}){if(n!==void 0)return t._parse(n,e,i);if(r===void 0)throw new Error("Internal Error: urlReader is required.");if(e===void 0)throw new Error("Internal Error: url is required if source not present.");return r.readURL(e).then(s=>t._parse(s,e,i))}static async compile({urlReader:e,connections:r,parse:n,model:i,refreshSchemaCache:s,noThrowOnError:o}){var a,u,l,c;let f;s&&(f=typeof s=="number"?s:Date.now());let x=n._translator;for(;;){let d=x.translate(i?._modelDef);if(d.final){if(d.translated)return new sg(d.translated.modelDef,d.translated.queryList,d.translated.sqlBlocks,d.problems||[],[...(a=i?.fromSources)!==null&&a!==void 0?a:[],...(u=d.fromSources)!==null&&u!==void 0?u:[]],h=>x.referenceAt(h),h=>x.importAt(h));if(o){let h={name:"modelDidNotCompile",exports:[],contents:{}},p=i?._modelDef||h;return new sg(p,[],[],d.problems||[],[...(l=i?.fromSources)!==null&&l!==void 0?l:[],...(c=d.fromSources)!==null&&c!==void 0?c:[]],m=>x.referenceAt(m),m=>x.importAt(m))}else{let h=d.problems||[],p=x.prettyErrors();throw new hP(`Error(s) compiling model:
${p}`,h)}}else{if(d.urls)for(let p of d.urls)try{if(p.startsWith("internal://"))throw new Error("In order to use relative imports, you must compile a file via a URL.");let m=await e.readURL(new URL(p)),g={[p]:m};x.update({urls:g})}catch(m){x.update({errors:{urls:{[p]:m.message}}})}let{modelAnnotation:h}=x.modelAnnotation(i?._modelDef);if(d.tables){let p=new Map;for(let m in d.tables){let{connectionName:g,tablePath:y}=d.tables[m],A=p.get(g);A===void 0?p.set(g,{[m]:y}):A[m]=y}for(let[m,g]of p)try{let y=await r.lookupConnection(m),{schemas:A,errors:S}=await y.fetchSchemaForTables(g,{refreshTimestamp:f,modelAnnotation:h});x.update({tables:A,errors:{tables:S}})}catch(y){let A={},S={};for(let T in g)S[T]=y.toString();x.update({tables:A,errors:{tables:S}})}}if(d.compileSQL){let p=d.compileSQL,m=p.connection;try{let g=await r.lookupConnection(m),y=t.compileSQLBlock(d.partialModel,p),A=await g.fetchSchemaForSQLBlock(y,{refreshTimestamp:f,modelAnnotation:h});A.error&&x.update({errors:{compileSQL:{[y.name]:A.error}}}),A.structDef&&(0,Ip.isSQLBlockStruct)(A.structDef)&&x.update({compileSQL:{[y.name]:A.structDef}})}catch(g){let y={};y[p.name]=g.toString(),x.update({errors:{compileSQL:y}})}}}}}static compileSQLBlock(e,r){let n,i="",s=!1;for(let u of r.select)if((0,Ip.isSQLFragment)(u))i+=u.sql,s=u.sql.match(/\(\s*$/)!==null;else{if(!n){if(!e)throw new Error("Internal error: Partial model missing when compiling SQL block");n=new Ip.QueryModel(e)}let l=n.compileQuery(u,!1).sql;i+=s?l:`(${l})`,s=!1}let{name:o,connection:a}=r;return{type:"sqlBlock",name:o,connection:a,selectStr:i}}static async run({connections:e,preparedResult:r,sqlStruct:n,connection:i,options:s}){let o=n?.structSource.sqlBlock;if(!i){if(!e)throw new Error("Internal Error: Connection or LookupConnection<Connection> must be provided.");let a=o?.connection||r?.connectionName;i=await e.lookupConnection(a)}if(n&&o){if(n.structRelationship.type!=="basetable")throw new Error("Expected schema's structRelationship type to be 'basetable'.");let a=await i.runSQL(o.selectStr);return new cC({structs:[n],sql:o.selectStr,result:a.rows,totalRows:a.totalRows,runStats:a.runStats,lastStageName:o.name,malloy:"",connectionName:n.structRelationship.connectionName,sourceExplore:"",sourceFilters:[],profilingUrl:a.profilingUrl},{name:"empty_model",exports:[],contents:{}})}else if(r){let a=await i.runSQL(r.sql,s);return new cC({...r._rawQuery,result:a.rows,totalRows:a.totalRows,runStats:a.runStats,profilingUrl:a.profilingUrl},r._modelDef)}else throw new Error("Internal error: sqlStruct or preparedResult must be provided.")}static async*runStream({connections:e,preparedResult:r,sqlStruct:n,connection:i,options:s}){let o=n?.structSource.sqlBlock;if(o===void 0&&r===void 0)throw new Error("Internal error: sqlBlock or preparedResult must be provided.");let a=o?.connection||r?.connectionName;if(i===void 0){if(e===void 0)throw new Error("Internal Error: Connection or LookupConnection<Connection> must be provided.");i=await e.lookupConnection(a)}if(!i.canStream())throw new Error(`Connection '${a}' cannot stream results.`);let u,l;if(n){if(n.structRelationship.type!=="basetable")throw new Error("Expected schema's structRelationship type to be 'basetable'.");l=new e0(n),u=n.structSource.sqlBlock.selectStr}else if(r!==void 0)l=r.resultExplore,u=r.sql;else throw new Error("Internal error: sqlStruct or preparedResult must be provided.");let c=0;for await(let f of i.runSQLStream(u,s))yield new Pp(f,c,l,void 0,void 0),c+=1}static async estimateQueryCost({connections:e,preparedResult:r,sqlStruct:n}){let i=n?.structSource.sqlBlock;if(!e)throw new Error("Internal Error: Connection or LookupConnection<Connection> must be provided.");let s=i?.connection||r?.connectionName,o=await e.lookupConnection(s);if(i)return await o.estimateQueryCost(i?.selectStr);if(r)return await o.estimateQueryCost(r?.sql);throw new Error("Internal error: sqlStruct or preparedResult must be provided.")}};Ae.Malloy=qn;var hP=class extends Error{constructor(e,r=[]){super(e),this.problems=r}};Ae.MalloyError=hP;var sg=class{constructor(e,r,n,i,s,o=()=>{},a=()=>{}){this.modelDef=e,this.queryList=r,this.sqlBlocks=n,this.problems=i,this.fromSources=s,this._referenceAt=o,this._importAt=a}tagParse(e){return dn.Tag.annotationToTag(this.modelDef.annotation,e)}getTaglines(e){return dn.Tag.annotationToTaglines(this.modelDef.annotation,e)}getReference(e){return this._referenceAt(e)}getImport(e){return this._importAt(e)}getPreparedQueryByName(e){let r=this.modelDef.contents[e];if(r?.type==="query")return new Mp(r,this.modelDef,this.problems,e);throw new Error("Given query name does not refer to a named query.")}getPreparedQueryByIndex(e){if(e<0)throw new Error(`Invalid index ${e}.`);if(e>=this.queryList.length)throw new Error(`Query index ${e} is out of bounds.`);return new Mp(this.queryList[e],this.modelDef,this.problems)}getSQLBlockByName(e){let r=this.sqlBlocks.find(n=>n.as===e);if(r===void 0)throw new Error(`No SQL Block named '${e}'`);return r}getSQLBlockByIndex(e){let r=this.sqlBlocks[e];if(r===void 0)throw new Error(`No SQL Block at index ${e}`);return r}get preparedQuery(){if(this.queryList.length===0)throw new Error("Model has no queries.");return new Mp(this.queryList[this.queryList.length-1],this.modelDef,this.problems)}getExploreByName(e){let r=this.modelDef.contents[e];if(r.type==="struct")return new e0(r);throw new Error("'name' is not an explore")}get explores(){let e=r=>r.type==="struct";return Object.values(this.modelDef.contents).filter(e).map(r=>new e0(r))}get namedQueries(){let e=r=>r.type==="query";return Object.values(this.modelDef.contents).filter(e)}get exportedExplores(){return this.explores.filter(e=>this.modelDef.exports.includes(e.name))}get _modelDef(){return this.modelDef}};Ae.Model=sg;var Mp=class{constructor(e,r,n,i){this.problems=n,this.name=i,this._query=e,this._modelDef=r}tagParse(e){let r=dn.Tag.annotationToTag(this._modelDef.annotation).tag;return e=dn.Tag.addModelScope(e,r),dn.Tag.annotationToTag(this._query.annotation,e)}getTaglines(e){return dn.Tag.annotationToTaglines(this._query.annotation,e)}get preparedResult(){let r=new Ip.QueryModel(this._modelDef).compileQuery(this._query);return new XT({...r,queryName:this.name||r.queryName},this._modelDef)}get dialect(){let e=this._query.structRef,r=typeof e=="string"?this._modelDef.contents[e]:e;if(r.type!=="struct")throw new Error("Invalid source for query");return r.dialect}getFlattenedQuery(e){return this}};Ae.PreparedQuery=Mp;var pP=class{constructor(e){this.translator=e}get highlights(){return(this.translator.metadata().highlights||[]).map(e=>new mP(e))}get symbols(){return(this.translator.metadata().symbols||[]).map(e=>new gP(e))}get _translator(){return this.translator}completions(e){return(this.translator.completions(e).completions||[]).map(r=>new yP(r))}helpContext(e){return this.translator.helpContext(e).helpContext}};Ae.Parse=pP;var mP=class{constructor(e){this._range=new wS(new og(e.range.start.line,e.range.start.character),new og(e.range.end.line,e.range.end.character)),this._type=e.type}get range(){return this._range}get type(){return this._type}};Ae.DocumentHighlight=mP;var wS=class t{constructor(e,r){this._start=e,this._end=r}get start(){return this._start}get end(){return this._end}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}static fromJSON(e){return new t(new og(e.start.line,e.start.character),new og(e.end.line,e.end.character))}};Ae.DocumentRange=wS;var og=class{constructor(e,r){this._line=e,this._character=r}get line(){return this._line}get character(){return this._character}toJSON(){return{line:this.line,character:this.character}}};Ae.DocumentPosition=og;var gP=class t{constructor(e){this._range=wS.fromJSON(e.range),this._lensRange=e.lensRange?wS.fromJSON(e.lensRange):void 0,this._type=e.type,this._name=e.name,this._children=e.children.map(r=>new t(r))}get range(){return this._range}get lensRange(){var e;return(e=this._lensRange)!==null&&e!==void 0?e:this._range}get type(){return this._type}get name(){return this._name}get children(){return this._children}};Ae.DocumentSymbol=gP;var yP=class{constructor(e){this.type=e.type,this.text=e.text}};Ae.DocumentCompletion=yP;var XT=class{constructor(e,r){this.modelDef=r,this.inner=e}tagParse(e){let r=dn.Tag.annotationToTag(this.modelDef.annotation).tag;return e=dn.Tag.addModelScope(e,r),dn.Tag.annotationToTag(this.inner.annotation,e)}getTaglines(e){return dn.Tag.annotationToTaglines(this.inner.annotation,e)}get annotation(){return this.inner.annotation}get modelAnnotation(){return this.modelDef.annotation}get modelTag(){return dn.Tag.annotationToTag(this.modelDef.annotation).tag}get connectionName(){return this.inner.connectionName}get _rawQuery(){return this.inner}get _modelDef(){return this.modelDef}get sql(){return this.inner.sql}get resultExplore(){if(this.inner.structs.length===0)throw new Error("Malformed query result.");let e=this.inner.structs[this.inner.structs.length-1],r={...e,name:this.inner.queryName||e.name};try{return new e0(r,this.sourceExplore)}catch{return new e0(r)}}get sourceExplore(){let e=this.inner.sourceExplore,r=this.modelDef.contents[e];if(r===void 0)throw new Error("Malformed query result.");if(r.type==="struct")return new e0(r);throw new Error(`'${e} is not an explore`)}get _sourceExploreName(){return this.inner.sourceExplore}get _sourceFilters(){return this.inner.sourceFilters||[]}};Ae.PreparedResult=XT;var EP=class{async readURL(e){throw new Error("No files.")}};Ae.EmptyURLReader=EP;var FZ=class{constructor(e){this.files=e}async readURL(e){let r=this.files.get(e.toString());if(r!==void 0)return Promise.resolve(r);throw new Error(`File not found '${e}'`)}};Ae.InMemoryURLReader=FZ;var JT=class t{constructor(e,r){this.connections=e,this.defaultConnectionName=r}async getConnection(e){if(e===void 0)if(this.defaultConnectionName!==void 0)e=this.defaultConnectionName;else throw new Error("No default connection.");let r=this.connections.get(e);if(r!==void 0)return Promise.resolve(r);throw new Error(`No connection found with name ${e}.`)}listConnections(){return Array.from(this.connections.values())}async lookupConnection(e){return this.getConnection(e)}static fromArray(e){return new t(new Map(e.map(r=>[r.name,r])))}};Ae.FixedConnectionMap=JT;var wp;(function(t){t.Nested="nested",t.BaseTable="base_table",t.Cross="cross",t.One="one",t.Many="many",t.Inline="inline"})(wp||(Ae.SourceRelationship=wp={}));var ZT=class{constructor(e,r,n){this._name=e,this._parent=r,this._source=n}get source(){return this.source}get name(){return this._name}get sourceClasses(){let e=[];return this.source&&e.push(this.source.name),e.push(this.name),e}get fieldPath(){let e=[this.name],r=this._parent;for(;r;)e.unshift(r.name),r=r._parent;return e}hasParentExplore(){return this._parent!==void 0}isExplore(){return this instanceof e0}isQuery(){return this instanceof oC}},e0=class t extends ZT{constructor(e,r,n){super(e.as||e.name,r,n),this._structDef=e,this._parentExplore=r,this.sourceExplore=n}get source(){return this.sourceExplore}isIntrinsic(){return(0,Ip.FieldIsIntrinsic)(this._structDef)}isExploreField(){return!1}tagParse(e){return dn.Tag.annotationToTag(this._structDef.annotation,e)}getTaglines(e){return dn.Tag.annotationToTaglines(this._structDef.annotation,e)}get modelTag(){return this.parsedModelTag||(this.parsedModelTag=dn.Tag.annotationToTag(this._structDef.modelAnnotation).tag),this.parsedModelTag}get name(){return this.structDef.as||this.structDef.name}getQueryByName(e){let r={type:"query",structRef:this.structDef,pipeline:[{type:"reduce",fields:[e]}]};return new Mp(r,this.modelDef,[],e)}get modelDef(){return{name:"generated_model",exports:[],contents:{[this.structDef.name]:this.structDef}}}getSingleExploreModel(){return new sg(this.modelDef,[],[],[],[])}get fieldMap(){var e;if(this._fieldMap===void 0){let r=((e=this.source)===null||e===void 0?void 0:e.fieldMap)||new Map;this._fieldMap=new Map(this.structDef.fields.map(n=>{let i=n.as||n.name,s=r.get(n.name);if(n.type==="struct")return[i,new aC(n,this,s)];if(n.type==="turtle")return[i,new oC(n,this,s)];if(n.type==="string")return[i,new sC(n,this,s)];if(n.type==="number")return[i,new LS(n,this,s)];if(n.type==="date")return n.timeframe&&["day_of_month","day_of_week","day_of_year"].includes(n.timeframe)?[i,new LS({...n,type:"number"},this,s)]:[i,new eC(n,this,s)];if(n.type==="timestamp")return[i,new tC(n,this,s)];if(n.type==="boolean")return[i,new rC(n,this,s)];if(n.type==="json")return[i,new nC(n,this,s)];if(n.type==="unsupported")return[i,new iC(n,this,s)]}))}return this._fieldMap}get allFields(){return[...this.fieldMap.values()]}get allFieldsWithOrder(){var e,r;if(!this._allFieldsWithOrder){let n=[...((r=(e=this.structDef.resultMetadata)===null||e===void 0?void 0:e.orderBy)===null||r===void 0?void 0:r.map(s=>{if(typeof s.field=="string")return{field:this.fieldMap.get(s.field),dir:s.dir};throw new Error("Does not support mapping order by from number.")}))||[]],i=new Set(n.map(s=>s.field.name));this._allFieldsWithOrder=[...n,...this.allFields.filter(s=>!i.has(s.name)).map(s=>({field:s,dir:"asc"}))]}return this._allFieldsWithOrder}get intrinsicFields(){return[...this.fieldMap.values()].filter(e=>e.isIntrinsic())}get dimensions(){return[...this.allFieldsWithOrder].filter(e=>e.field.isAtomicField()&&e.field.sourceWasDimension())}getFieldByName(e){let r=this.fieldMap.get(e);if(r===void 0)throw new Error(`No such field ${e}.`);return r}getFieldByNameIfExists(e){return this.fieldMap.get(e)}get primaryKey(){return this.structDef.primaryKey}get parentExplore(){return this._parentExplore}get sourceRelationship(){switch(this.structDef.structRelationship.type){case"many":return wp.Many;case"one":return wp.One;case"cross":return wp.Cross;case"inline":return wp.Inline;case"nested":return wp.Nested;case"basetable":return wp.BaseTable}}hasParentExplore(){return this instanceof aC}get filters(){var e;return((e=this.structDef.resultMetadata)===null||e===void 0?void 0:e.filterList)||[]}get limit(){var e;return(e=this.structDef.resultMetadata)===null||e===void 0?void 0:e.limit}get structDef(){return this._structDef}get queryTimezone(){return this.structDef.queryTimezone}toJSON(){var e,r;return{_structDef:this._structDef,sourceExplore:(e=this.sourceExplore)===null||e===void 0?void 0:e.toJSON(),_parentExplore:(r=this._parentExplore)===null||r===void 0?void 0:r.toJSON()}}static fromJSON(e){let r=e._parentExplore!==void 0?t.fromJSON(e._parentExplore):void 0,n=e.sourceExplore!==void 0?t.fromJSON(e.sourceExplore):void 0;return new t(e._structDef,r,n)}get location(){return this.structDef.location}};Ae.Explore=e0;var Gc;(function(t){t.String="string",t.Number="number",t.Boolean="boolean",t.Date="date",t.Timestamp="timestamp",t.Json="json",t.Unsupported="unsupported",t.Error="error"})(Gc||(Ae.AtomicFieldType=Gc={}));var Vc=class extends ZT{constructor(e,r,n){super(e.as||e.name,r,n),this.fieldTypeDef=e,this.parent=r}get type(){switch(this.fieldTypeDef.type){case"string":return Gc.String;case"boolean":return Gc.Boolean;case"date":return Gc.Date;case"timestamp":return Gc.Timestamp;case"number":return Gc.Number;case"json":return Gc.Json;case"unsupported":return Gc.Unsupported;case"error":return Gc.Error}}tagParse(e){return e=dn.Tag.addModelScope(e,this.parent.modelTag),dn.Tag.annotationToTag(this.fieldTypeDef.annotation,e)}getTaglines(e){return dn.Tag.annotationToTaglines(this.fieldTypeDef.annotation,e)}isIntrinsic(){return(0,Ip.FieldIsIntrinsic)(this.fieldTypeDef)}isQueryField(){return!1}isExploreField(){return!1}isAtomicField(){return!0}isCalculation(){return(0,Ip.expressionIsCalculation)(this.fieldTypeDef.expressionType)}get sourceField(){throw new Error}get sourceClasses(){let e=this.fieldTypeDef.name||this.fieldTypeDef.as;return e?[e]:[]}sourceWasMeasure(){var e;return((e=this.fieldTypeDef.resultMetadata)===null||e===void 0?void 0:e.fieldKind)==="measure"}sourceWasMeasureLike(){var e,r;return((e=this.fieldTypeDef.resultMetadata)===null||e===void 0?void 0:e.fieldKind)==="measure"||((r=this.fieldTypeDef.resultMetadata)===null||r===void 0?void 0:r.fieldKind)==="struct"}sourceWasDimension(){var e;return((e=this.fieldTypeDef.resultMetadata)===null||e===void 0?void 0:e.fieldKind)==="dimension"}hasParentExplore(){return!0}isString(){return this instanceof sC}isNumber(){return this instanceof LS}isDate(){return this instanceof eC}isBoolean(){return this instanceof rC}isJSON(){return this instanceof nC}isTimestamp(){return this instanceof tC}isUnsupported(){return this instanceof iC}get parentExplore(){return this.parent}get expression(){let e=".",r=this.fieldTypeDef.resultMetadata;return r?.sourceExpression||(r?.sourceField.includes(e)?r?.sourceField:this.name)}get location(){return this.fieldTypeDef.location}};Ae.AtomicField=Vc;var ig;(function(t){t.Day="day",t.Week="week",t.Month="month",t.Quarter="quarter",t.Year="year"})(ig||(Ae.DateTimeframe=ig={}));var Qc;(function(t){t.Day="day",t.Week="week",t.Month="month",t.Quarter="quarter",t.Year="year",t.Second="second",t.Hour="hour",t.Minute="minute"})(Qc||(Ae.TimestampTimeframe=Qc={}));var eC=class extends Vc{constructor(e,r,n){super(e,r,n),this.fieldDateDef=e}get timeframe(){if(this.fieldDateDef.timeframe!==void 0)switch(this.fieldDateDef.timeframe){case"day":return ig.Day;case"week":return ig.Week;case"month":return ig.Month;case"quarter":return ig.Quarter;case"year":return ig.Year}}};Ae.DateField=eC;var tC=class extends Vc{constructor(e,r,n){super(e,r,n),this.fieldTimestampDef=e}get timeframe(){if(this.fieldTimestampDef.timeframe!==void 0)switch(this.fieldTimestampDef.timeframe){case"day":return Qc.Day;case"week":return Qc.Week;case"month":return Qc.Month;case"quarter":return Qc.Quarter;case"year":return Qc.Year;case"second":return Qc.Second;case"hour":return Qc.Hour;case"minute":return Qc.Minute}}};Ae.TimestampField=tC;var LS=class extends Vc{constructor(e,r,n){super(e,r,n),this.fieldNumberDef=e}};Ae.NumberField=LS;var rC=class extends Vc{constructor(e,r,n){super(e,r,n),this.fieldBooleanDef=e}};Ae.BooleanField=rC;var nC=class extends Vc{constructor(e,r,n){super(e,r,n),this.fieldJSONDef=e}};Ae.JSONField=nC;var iC=class extends Vc{constructor(e,r,n){super(e,r,n),this.fieldUnsupportedDef=e}get rawType(){return this.fieldUnsupportedDef.rawType}};Ae.UnsupportedField=iC;var sC=class extends Vc{constructor(e,r,n){super(e,r,n),this.fieldStringDef=e}};Ae.StringField=sC;var AP=class extends ZT{constructor(e,r,n){super(e.as||e.name,r,n),this.turtleDef=e}get source(){return this.sourceQuery}isIntrinsic(){return!1}get location(){return this.turtleDef.location}};Ae.Query=AP;var oC=class extends AP{constructor(e,r,n){super(e,r,n),this.parent=r}tagParse(e){return e=dn.Tag.addModelScope(e,this.parent.modelTag),dn.Tag.annotationToTag(this.turtleDef.annotation,e)}getTaglines(e){return dn.Tag.annotationToTaglines(this.turtleDef.annotation,e)}isQueryField(){return!0}isExploreField(){return!1}isAtomicField(){return!1}get sourceClasses(){let e=this.turtleDef.name||this.turtleDef.as;return e?[e]:[]}hasParentExplore(){return!0}get parentExplore(){return this.parent}get expression(){return this.name}};Ae.QueryField=oC;var Lp;(function(t){t.OneToOne="one_to_one",t.OneToMany="one_to_many",t.ManyToOne="many_to_one"})(Lp||(Ae.JoinRelationship=Lp={}));var aC=class extends e0{constructor(e,r,n){super(e,r,n),this._parentExplore=r}get joinRelationship(){switch(this.structDef.structRelationship.type){case"one":return Lp.OneToMany;case"many":case"cross":return Lp.ManyToOne;case"inline":return Lp.OneToOne;case"nested":return Lp.ManyToOne;default:throw new Error("A source field must have a join relationship.")}}get isRecord(){return this.joinRelationship===Lp.OneToOne}get isArray(){return this.joinRelationship!==Lp.OneToOne}tagParse(e){return e=dn.Tag.addModelScope(e,this._parentExplore.modelTag),dn.Tag.annotationToTag(this._structDef.annotation,e)}isQueryField(){return!1}isExploreField(){return!0}isAtomicField(){return!1}get parentExplore(){return this._parentExplore}get sourceClasses(){let e=this.structDef.name||this.structDef.as;return e?[e]:[]}};Ae.ExploreField=aC;var uC=class{constructor(...e){let r,n;for(let i of e)Tat(i)?r=i:Cat(i)?n=i:n={lookupConnection:()=>Promise.resolve(i)};if(r===void 0&&(r=new EP),n===void 0)throw new Error("A LookupConnection<Connection> or Connection is required.");this._urlReader=r,this._connections=n}get urlReader(){return this._urlReader}get connections(){return this._connections}loadModel(e,r){let{refreshSchemaCache:n,noThrowOnError:i}=r||{};return new lC(this,async()=>{let s=e instanceof URL?await qn.parse({url:e,urlReader:this.urlReader,options:r}):qn.parse({source:e,options:r});return qn.compile({urlReader:this.urlReader,connections:this.connections,parse:s,refreshSchemaCache:n,noThrowOnError:i})})}_loadModelFromModelDef(e){return new lC(this,async()=>new sg(e,[],[],[],[]))}loadQuery(e,r){return this.loadModel(e,r).loadFinalQuery()}loadQueryByIndex(e,r,n){return this.loadModel(e,n).loadQueryByIndex(r)}loadQueryByName(e,r,n){return this.loadModel(e,n).loadQueryByName(r)}loadSQLBlockByName(e,r,n){return this.loadModel(e,n).loadSQLBlockByName(r)}loadSQLBlockByIndex(e,r,n){return this.loadModel(e,n).loadSQLBlockByIndex(r)}getModel(e,r){return this.loadModel(e,r).getModel()}getQuery(e,r){return this.loadQuery(e,r).getPreparedQuery()}getQueryByIndex(e,r,n){return this.loadQueryByIndex(e,r,n).getPreparedQuery()}getQueryByName(e,r,n){return this.loadQueryByName(e,r,n).getPreparedQuery()}getSQLBlockByName(e,r,n){return this.loadSQLBlockByName(e,r,n).getSQLBlock()}getSQLBlockByIndex(e,r,n){return this.loadSQLBlockByIndex(e,r,n).getSQLBlock()}};Ae.Runtime=uC;var wZ=class extends uC{constructor(e,r){if(r===void 0){let n=e;super(JT.fromArray(n)),this.rawConnections=n}else{let n=r;super(e,JT.fromArray(n)),this.rawConnections=n}}};Ae.ConnectionRuntime=wZ;var LZ=class extends uC{constructor(e,r){if(r===void 0){let n=e;super(n),this.connection=n}else{let n=r;super(e,n),this.connection=n}}get supportsNesting(){return(0,bat.getDialect)(this.connection.dialectName).supportsNesting}};Ae.SingleConnectionRuntime=LZ;var ag=class{constructor(e,r){this.runtime=e,this._materialize=r}materialize(){return this.materialized===void 0?this.rematerialize():this.materialized}rematerialize(){return this.materialized=this._materialize(),this.materialized}makeQueryMaterializer(e){return new SP(this.runtime,e)}makeExploreMaterializer(e){return new TP(this.runtime,e)}makePreparedResultMaterializer(e){return new _P(this.runtime,e)}makeSQLBlockMaterializer(e){return new bP(this.runtime,e)}},lC=class t extends ag{loadFinalQuery(){return this.makeQueryMaterializer(async()=>(await this.materialize()).preparedQuery)}loadQueryByIndex(e){return this.makeQueryMaterializer(async()=>(await this.materialize()).getPreparedQueryByIndex(e))}loadQueryByName(e){return this.makeQueryMaterializer(async()=>(await this.materialize()).getPreparedQueryByName(e))}loadQuery(e,r){let{refreshSchemaCache:n,noThrowOnError:i}=r||{};return this.makeQueryMaterializer(async()=>{let s=this.runtime.urlReader,o=this.runtime.connections,a=e instanceof URL?await qn.parse({url:e,urlReader:s,options:r}):qn.parse({source:e,options:r}),u=await this.getModel();return(await qn.compile({urlReader:s,connections:o,parse:a,model:u,refreshSchemaCache:n,noThrowOnError:i})).preparedQuery})}extendModel(e,r){return new t(this.runtime,async()=>{let n=this.runtime.urlReader,i=this.runtime.connections,s=e instanceof URL?await qn.parse({url:e,urlReader:n,options:r}):qn.parse({source:e,options:r}),o=await this.getModel();return await qn.compile({urlReader:n,connections:i,parse:s,model:o,refreshSchemaCache:r?.refreshSchemaCache})})}async search(e,r,n=1e3,i=void 0){let s=await this.materialize(),o=new Ip.QueryModel(s._modelDef),a=s.getExploreByName(e).structDef;if(a.structRelationship.type!=="basetable")throw new Error("Expected schema's structRelationship type to be 'basetable'.");let u=a.structRelationship.connectionName,l=await this.runtime.connections.lookupConnection(u);return await o.searchIndex(l,e,r,n,i)}async searchValueMap(e,r=10,n){let s=(await this.materialize()).getExploreByName(e);if(s.structDef.structRelationship.type!=="basetable")throw new Error("Expected schema's structRelationship type to be 'basetable'.");let o="{index: *}";s.getFieldByNameIfExists("search_index")&&(o="search_index");let a=`
      run: ${e}
        -> ${o}
        -> {
          where: fieldType = 'string'
          group_by: fieldName
          aggregate: cardinality is count(fieldValue)
          nest: values is {
            select: fieldValue, weight
            order_by: weight desc
            limit: ${r}
          }
          limit: 1000
        }
    `;return(await this.loadQuery(a,n).run({rowLimit:1e3}))._queryResult.result}loadSQLBlockByName(e){return this.makeSQLBlockMaterializer(async()=>(await this.materialize()).getSQLBlockByName(e))}loadSQLBlockByIndex(e){return this.makeSQLBlockMaterializer(async()=>(await this.materialize()).getSQLBlockByIndex(e))}getFinalQuery(){return this.loadFinalQuery().getPreparedQuery()}getQueryByIndex(e){return this.loadQueryByIndex(e).getPreparedQuery()}getQueryByName(e){return this.loadQueryByName(e).getPreparedQuery()}getQuery(e,r){return this.loadQuery(e,r).getPreparedQuery()}getSQLBlockByName(e){return this.loadSQLBlockByName(e).getSQLBlock()}getSQLBlockByIndex(e){return this.loadSQLBlockByIndex(e).getSQLBlock()}_loadQueryFromQueryDef(e){return this.makeQueryMaterializer(async()=>{let r=await this.materialize();return new Mp(e,r._modelDef,r.problems)})}loadExploreByName(e){return this.makeExploreMaterializer(async()=>(await this.materialize()).getExploreByName(e))}getExploreByName(e){return this.loadExploreByName(e).getExplore()}getModel(){return this.materialize()}};Ae.ModelMaterializer=lC;var SP=class extends ag{async run(e){let r=this.runtime.connections,n=await this.getPreparedResult(),i=vP(n,e);return qn.run({connections:r,preparedResult:n,options:i})}async*runStream(e){let r=await this.getPreparedResult(),n=this.runtime.connections,i=vP(r,e),s=qn.runStream({connections:n,preparedResult:r,options:i});for await(let o of s)yield o}loadPreparedResult(){return this.makePreparedResultMaterializer(async()=>(await this.materialize()).preparedResult)}getPreparedResult(){return this.loadPreparedResult().getPreparedResult()}async getSQL(){return(await this.getPreparedResult()).sql}getPreparedQuery(){return this.materialize()}async estimateQueryCost(){let e=this.runtime.connections,r=await this.getPreparedResult();return qn.estimateQueryCost({connections:e,preparedResult:r})}};Ae.QueryMaterializer=SP;function vP(t,e){return{queryAnnotation:t.annotation,modelAnnotation:t.modelAnnotation,...e}}var _P=class extends ag{async run(e){let r=await this.getPreparedResult(),n=this.runtime.connections,i=vP(r,e);return qn.run({connections:n,preparedResult:r,options:i})}async*runStream(e){let r=await this.getPreparedResult(),n=this.runtime.connections,i=vP(r,e),s=qn.runStream({connections:n,preparedResult:r,options:i});for await(let o of s)yield o}getPreparedResult(){return this.materialize()}async getSQL(){return(await this.getPreparedResult()).sql}};Ae.PreparedResultMaterializer=_P;var bP=class extends ag{async run(e){let r=await this.getSQLBlock(),n=this.runtime.connections;return qn.run({connections:n,sqlStruct:r,options:e})}async*runStream(e){let r=await this.getSQLBlock(),n=this.runtime.connections,i=qn.runStream({connections:n,sqlStruct:r,options:e});for await(let s of i)yield s}getSQLBlock(){return this.materialize()}async getSQL(){return(await this.getSQLBlock()).structSource.sqlBlock.selectStr}async estimateQueryCost(){let e=this.runtime.connections,r=await this.getSQLBlock();return qn.estimateQueryCost({connections:e,sqlStruct:r})}};Ae.SQLBlockMaterializer=bP;var TP=class extends ag{loadQueryByName(e){return this.makeQueryMaterializer(async()=>(await this.materialize()).getQueryByName(e))}getQueryByName(e){return this.loadQueryByName(e).getPreparedQuery()}getExplore(){return this.materialize()}};Ae.ExploreMaterializer=TP;var cC=class t extends XT{constructor(e,r){super(e,r),this.inner=e}get _queryResult(){return this.inner}get data(){return new ug(this.inner.result,this.resultExplore,void 0,void 0)}get totalRows(){return this.inner.totalRows}get runStats(){return this.inner.runStats}get profilingUrl(){return this.inner.profilingUrl}toJSON(){return{queryResult:this.inner,modelDef:this._modelDef}}static fromJSON({queryResult:e,modelDef:r}){return new t(e,r)}};Ae.Result=cC;var IS=class{constructor(e,r,n){this.parent=r,this.parentRecord=n,this._field=e}get field(){return this._field}isString(){return this instanceof CP}get string(){if(this.isString())return this;throw new Error("Not a string.")}isBoolean(){return this instanceof OP}get boolean(){if(this.isBoolean())return this;throw new Error("Not a boolean.")}isNumber(){return this instanceof DP}get number(){if(this.isNumber())return this;throw new Error("Not a number.")}isTimestamp(){return this instanceof NP}get timestamp(){if(this.isTimestamp())return this;throw new Error("Not a timestamp.")}isDate(){return this instanceof FP}get date(){if(this.isDate())return this;throw new Error("Not a date.")}isNull(){return this instanceof wP}isBytes(){return this instanceof MZ}get bytes(){if(this.isBytes())return this;throw new Error("Not bytes.")}isRecord(){return this instanceof Pp}get record(){if(this.isRecord())return this;throw new Error("Not a record.")}isUnsupported(){return this instanceof RP}get unsupported(){if(this.isUnsupported())return this;throw new Error("Not unsupported.")}isArray(){return this instanceof ug}get array(){if(this.isArray())return this;throw new Error("Not an array.")}isArrayOrRecord(){if(this instanceof ug||this instanceof Pp)return this;throw new Error("No Array or Record")}isScalar(){return!0}},Wc=class t extends IS{constructor(e,r,n,i){super(r,n,i),this._value=e,this._field=r}get value(){return this._value}get field(){return this._field}isScalar(){return this instanceof t}},CP=class extends Wc{constructor(e,r,n,i){super(e,r,n,i),this._field=r}get field(){return this._field}get key(){return this.value}compareTo(e){return this.value.toLocaleLowerCase().localeCompare(e.value.toLocaleLowerCase())}},RP=class extends Wc{constructor(e,r,n,i){super(e,r,n,i),this._field=r}get field(){return this._field}get key(){return"<unsupported>"}compareTo(e){return 0}},OP=class extends Wc{constructor(e,r,n,i){super(e,r,n,i),this._field=r}get field(){return this._field}get key(){return`${this.value}`}compareTo(e){return this.value===e.value?0:this.value?1:-1}},IZ=class extends Wc{constructor(e,r,n,i){super(e,r,n,i),this._field=r}get field(){return this._field}get key(){return this.value}compareTo(e){let r=this.value.toString(),n=e.toString();return r===n?0:r>n?1:-1}},DP=class extends Wc{constructor(e,r,n,i){super(e,r,n,i),this._field=r}get field(){return this._field}get key(){return`${this.value}`}compareTo(e){let r=this.value-e.value;return r>0?1:r===0?0:-1}};function CAe(t){return t instanceof Date?t:t.constructor.name==="Date"?new Date(t):typeof t=="number"?new Date(t):typeof t!="string"?new Date(t.value):_at.DateTime.fromISO(t,{zone:"UTC"}).toJSDate()}var NP=class extends Wc{constructor(e,r,n,i){super(e,r,n,i),this._field=r}get value(){return CAe(this._value)}get field(){return this._field}get key(){return`${this.value.toLocaleString()}`}compareTo(e){return this.value>e.value?1:this.value<e.value?-1:0}},FP=class extends Wc{constructor(e,r,n,i){super(e,r,n,i),this._field=r}get value(){return CAe(this._value)}get field(){return this._field}get key(){return`${this.value.toLocaleString()}`}compareTo(e){return this.value>e.value?1:this.value<e.value?-1:0}},MZ=class extends Wc{get key(){return this.value.toString()}compareTo(e){let r=this.value.toString(),n=e.toString();return r===n?0:r>n?1:-1}},wP=class extends IS{get value(){return null}get key(){return"<null>"}},ug=class extends IS{constructor(e,r,n,i){super(r,n,i),this.rowCache=new Map,this.queryData=e,this._field=r}get field(){return this._field}toObject(){return this.queryData}path(...e){return RAe(this,e)}row(e){let r=this.rowCache.get(e);return r||(r=new Pp(this.queryData[e],e,this.field,this,this.parentRecord),this.rowCache.set(e,r)),r;return new Pp(this.queryData[e],e,this.field,this,this.parentRecord)}get rowCount(){return this.queryData.length}get value(){return this.toObject()}[Symbol.iterator](){let e=0,r=this.queryData,n=i=>this.row(i);return{next(){return e<r.length?{value:n(e++),done:!1}:{value:void 0,done:!0}}}}async*inMemoryStream(){for(let e=0;e<this.queryData.length;e++)yield this.row(e)}};Ae.DataArray=ug;function RAe(t,e){for(let r of e)typeof r=="number"?t=t.array.row(r):t=t.record.cell(r);return t}var Pp=class t extends IS{constructor(e,r,n,i,s){super(n,i,s),this.cellCache=new Map,this.queryDataRow=e,this._field=n,this.index=r}toObject(){return this.queryDataRow}path(...e){return RAe(this,e)}cell(e){let r=typeof e=="string"?e:e.name,n=this._field.getFieldByName(r),i=this.cellCache.get(r);if(!i){let s=this.queryDataRow[r];s===null?i=new wP(n,this,this):n.isAtomicField()?n.isBoolean()?i=new OP(s,n,this,this):n.isDate()?i=new FP(s,n,this,this):n.isJSON()?i=new IZ(s,n,this,this):n.isTimestamp()?i=new NP(s,n,this,this):n.isNumber()?i=new DP(s,n,this,this):n.isString()?i=new CP(s,n,this,this):n.isUnsupported()&&(i=new RP(s,n,this,this)):n.isExploreField()&&(Array.isArray(s)?i=new ug(s,n,this,this):i=new t(s,void 0,n,this,this)),i&&this.cellCache.set(r,i)}if(i)return i;throw new Error(`Internal Error: could not construct data column for field '${r}'.`)}get value(){throw new Error("Not implemented;")}get field(){return this._field}[Symbol.iterator](){let e=!1,r=()=>this;return{next(){return e?{value:void 0,done:!0}:(e=!0,{value:r(),done:!1})}}}};Ae.DataRecord=Pp;function Tat(t){return"readURL"in t}function Cat(t){return"lookupConnection"in t}var fC=class{constructor(e){this.stream=e}};Ae.DataWriter=fC;var PZ=class extends fC{async process(e){this.stream.write(`[
`);for await(let r of e){r.index!==void 0&&r.index>0&&this.stream.write(`,
`);let i=JSON.stringify(r.toObject(),null,2).split(`
`);for(let s=0;s<i.length;s++){let o=i[s];this.stream.write(`  ${o}`),s<i.length-1&&this.stream.write(`
`)}}this.stream.write(`
]
`),this.stream.close()}};Ae.JSONWriter=PZ;var kZ=class extends fC{constructor(){super(...arguments),this.columnSeparator=",",this.rowSeparator=`
`,this.quoteCharacter='"',this.includeHeader=!0}escape(e){let r=e.includes(this.quoteCharacter),n=e.includes(this.columnSeparator),i=e.includes(this.rowSeparator),s=n||r||i;return r&&(e=e.replace(new RegExp(this.quoteCharacter,"g"),this.quoteCharacter+this.quoteCharacter)),s&&(e=this.quoteCharacter+e+this.quoteCharacter),e}stringify(e){return e.isNull()?"":e.isArray()||e.isRecord()||e.isBoolean()||e.isNumber()?JSON.stringify(e.value):e.isDate()||e.isTimestamp()?e.value.toISOString():e.isString()?e.value:`${e.value}`}async process(e){let r;for await(let n of e){if(r===void 0&&(r=n.field.allFields,this.includeHeader)){for(let i=0;i<r.length;i++){let s=r[i];this.stream.write(this.escape(s.name)),i!==r.length-1&&this.stream.write(this.columnSeparator)}this.stream.write(this.rowSeparator)}for(let i=0;i<r.length;i++){let s=r[i];this.stream.write(this.escape(this.stringify(n.cell(s)))),i!==r.length-1&&this.stream.write(this.columnSeparator)}this.stream.write(this.rowSeparator)}this.stream.close()}};Ae.CSVWriter=kZ});var DAe=v(LP=>{"use strict";Object.defineProperty(LP,"__esModule",{value:!0});LP.toAsyncGenerator=void 0;async function*Rat(t){let e=!1;function r(i){let s,o=new Promise(a=>{s=a});return i(a=>{s({done:!0,isError:!0,error:a})},a=>{s({done:!1,value:a,isError:!1,next:new Promise(u=>{s=u})})},()=>{s({done:!0,isError:!1})}),o}let n=r(t);for(;!e;){let i=await n;if(i.done){if(e=!0,i.isError)throw i.error;break}else n=i.next,yield i.value}}LP.toAsyncGenerator=Rat});var Bp=v(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.Tag=de.toAsyncGenerator=de.Explore=de.DataWriter=de.Parse=de.JSONWriter=de.CSVWriter=de.QueryMaterializer=de.Result=de.TimestampTimeframe=de.DateTimeframe=de.SourceRelationship=de.JoinRelationship=de.MalloyError=de.FixedConnectionMap=de.InMemoryURLReader=de.EmptyURLReader=de.SingleConnectionRuntime=de.ConnectionRuntime=de.AtomicFieldType=de.Runtime=de.Malloy=de.MalloyTranslator=de.HighlightType=de.indent=de.expressionIsCalculation=de.mkExpr=de.isSamplingRows=de.isSamplingPercent=de.isSamplingEnable=de.isFilteredAliasedName=de.Segment=de.FUNCTIONS=de.Dialect=de.spread=de.param=de.sqlFragment=de.makeParam=de.sql=de.maxScalar=de.minAggregate=de.anyExprType=de.minScalar=de.overload=de.qtz=de.arg=de.registerDialect=de.PostgresDialect=de.StandardSQLDialect=de.DuckDBDialect=void 0;var Fi=QN();Object.defineProperty(de,"DuckDBDialect",{enumerable:!0,get:function(){return Fi.DuckDBDialect}});Object.defineProperty(de,"StandardSQLDialect",{enumerable:!0,get:function(){return Fi.StandardSQLDialect}});Object.defineProperty(de,"PostgresDialect",{enumerable:!0,get:function(){return Fi.PostgresDialect}});Object.defineProperty(de,"registerDialect",{enumerable:!0,get:function(){return Fi.registerDialect}});Object.defineProperty(de,"arg",{enumerable:!0,get:function(){return Fi.arg}});Object.defineProperty(de,"qtz",{enumerable:!0,get:function(){return Fi.qtz}});Object.defineProperty(de,"overload",{enumerable:!0,get:function(){return Fi.overload}});Object.defineProperty(de,"minScalar",{enumerable:!0,get:function(){return Fi.minScalar}});Object.defineProperty(de,"anyExprType",{enumerable:!0,get:function(){return Fi.anyExprType}});Object.defineProperty(de,"minAggregate",{enumerable:!0,get:function(){return Fi.minAggregate}});Object.defineProperty(de,"maxScalar",{enumerable:!0,get:function(){return Fi.maxScalar}});Object.defineProperty(de,"sql",{enumerable:!0,get:function(){return Fi.sql}});Object.defineProperty(de,"makeParam",{enumerable:!0,get:function(){return Fi.makeParam}});Object.defineProperty(de,"sqlFragment",{enumerable:!0,get:function(){return Fi.sqlFragment}});Object.defineProperty(de,"param",{enumerable:!0,get:function(){return Fi.param}});Object.defineProperty(de,"spread",{enumerable:!0,get:function(){return Fi.spread}});Object.defineProperty(de,"Dialect",{enumerable:!0,get:function(){return Fi.Dialect}});Object.defineProperty(de,"FUNCTIONS",{enumerable:!0,get:function(){return Fi.FUNCTIONS}});var kp=Wf();Object.defineProperty(de,"Segment",{enumerable:!0,get:function(){return kp.Segment}});Object.defineProperty(de,"isFilteredAliasedName",{enumerable:!0,get:function(){return kp.isFilteredAliasedName}});Object.defineProperty(de,"isSamplingEnable",{enumerable:!0,get:function(){return kp.isSamplingEnable}});Object.defineProperty(de,"isSamplingPercent",{enumerable:!0,get:function(){return kp.isSamplingPercent}});Object.defineProperty(de,"isSamplingRows",{enumerable:!0,get:function(){return kp.isSamplingRows}});Object.defineProperty(de,"mkExpr",{enumerable:!0,get:function(){return kp.mkExpr}});Object.defineProperty(de,"expressionIsCalculation",{enumerable:!0,get:function(){return kp.expressionIsCalculation}});Object.defineProperty(de,"indent",{enumerable:!0,get:function(){return kp.indent}});var NAe=NZ();Object.defineProperty(de,"HighlightType",{enumerable:!0,get:function(){return NAe.HighlightType}});Object.defineProperty(de,"MalloyTranslator",{enumerable:!0,get:function(){return NAe.MalloyTranslator}});var Un=OAe();Object.defineProperty(de,"Malloy",{enumerable:!0,get:function(){return Un.Malloy}});Object.defineProperty(de,"Runtime",{enumerable:!0,get:function(){return Un.Runtime}});Object.defineProperty(de,"AtomicFieldType",{enumerable:!0,get:function(){return Un.AtomicFieldType}});Object.defineProperty(de,"ConnectionRuntime",{enumerable:!0,get:function(){return Un.ConnectionRuntime}});Object.defineProperty(de,"SingleConnectionRuntime",{enumerable:!0,get:function(){return Un.SingleConnectionRuntime}});Object.defineProperty(de,"EmptyURLReader",{enumerable:!0,get:function(){return Un.EmptyURLReader}});Object.defineProperty(de,"InMemoryURLReader",{enumerable:!0,get:function(){return Un.InMemoryURLReader}});Object.defineProperty(de,"FixedConnectionMap",{enumerable:!0,get:function(){return Un.FixedConnectionMap}});Object.defineProperty(de,"MalloyError",{enumerable:!0,get:function(){return Un.MalloyError}});Object.defineProperty(de,"JoinRelationship",{enumerable:!0,get:function(){return Un.JoinRelationship}});Object.defineProperty(de,"SourceRelationship",{enumerable:!0,get:function(){return Un.SourceRelationship}});Object.defineProperty(de,"DateTimeframe",{enumerable:!0,get:function(){return Un.DateTimeframe}});Object.defineProperty(de,"TimestampTimeframe",{enumerable:!0,get:function(){return Un.TimestampTimeframe}});Object.defineProperty(de,"Result",{enumerable:!0,get:function(){return Un.Result}});Object.defineProperty(de,"QueryMaterializer",{enumerable:!0,get:function(){return Un.QueryMaterializer}});Object.defineProperty(de,"CSVWriter",{enumerable:!0,get:function(){return Un.CSVWriter}});Object.defineProperty(de,"JSONWriter",{enumerable:!0,get:function(){return Un.JSONWriter}});Object.defineProperty(de,"Parse",{enumerable:!0,get:function(){return Un.Parse}});Object.defineProperty(de,"DataWriter",{enumerable:!0,get:function(){return Un.DataWriter}});Object.defineProperty(de,"Explore",{enumerable:!0,get:function(){return Un.Explore}});var Oat=DAe();Object.defineProperty(de,"toAsyncGenerator",{enumerable:!0,get:function(){return Oat.toAsyncGenerator}});var Dat=Um();Object.defineProperty(de,"Tag",{enumerable:!0,get:function(){return Dat.Tag}})});var wAe=v((Akt,FAe)=>{function Nat(t,e,r,n){var i=-1,s=t==null?0:t.length;for(n&&s&&(r=t[++i]);++i<s;)r=e(r,t[i],i,t);return r}FAe.exports=Nat});var IAe=v((Skt,LAe)=>{function Fat(t){return function(e){return t?.[e]}}LAe.exports=Fat});var PAe=v((vkt,MAe)=>{var wat=IAe(),Lat={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Iat=wat(Lat);MAe.exports=Iat});var BAe=v((_kt,kAe)=>{var Mat=typeof global=="object"&&global&&global.Object===Object&&global;kAe.exports=Mat});var UAe=v((bkt,qAe)=>{var Pat=BAe(),kat=typeof self=="object"&&self&&self.Object===Object&&self,Bat=Pat||kat||Function("return this")();qAe.exports=Bat});var IP=v((Tkt,$Ae)=>{var qat=UAe(),Uat=qat.Symbol;$Ae.exports=Uat});var HAe=v((Ckt,jAe)=>{function $at(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}jAe.exports=$at});var GAe=v((Rkt,zAe)=>{var jat=Array.isArray;zAe.exports=jat});var YAe=v((Okt,WAe)=>{var QAe=IP(),VAe=Object.prototype,Hat=VAe.hasOwnProperty,zat=VAe.toString,xC=QAe?QAe.toStringTag:void 0;function Gat(t){var e=Hat.call(t,xC),r=t[xC];try{t[xC]=void 0;var n=!0}catch{}var i=zat.call(t);return n&&(e?t[xC]=r:delete t[xC]),i}WAe.exports=Gat});var XAe=v((Dkt,KAe)=>{var Qat=Object.prototype,Vat=Qat.toString;function Wat(t){return Vat.call(t)}KAe.exports=Wat});var tSe=v((Nkt,eSe)=>{var JAe=IP(),Yat=YAe(),Kat=XAe(),Xat="[object Null]",Jat="[object Undefined]",ZAe=JAe?JAe.toStringTag:void 0;function Zat(t){return t==null?t===void 0?Jat:Xat:ZAe&&ZAe in Object(t)?Yat(t):Kat(t)}eSe.exports=Zat});var nSe=v((Fkt,rSe)=>{function eut(t){return t!=null&&typeof t=="object"}rSe.exports=eut});var sSe=v((wkt,iSe)=>{var tut=tSe(),rut=nSe(),nut="[object Symbol]";function iut(t){return typeof t=="symbol"||rut(t)&&tut(t)==nut}iSe.exports=iut});var fSe=v((Lkt,cSe)=>{var oSe=IP(),sut=HAe(),out=GAe(),aut=sSe(),uut=1/0,aSe=oSe?oSe.prototype:void 0,uSe=aSe?aSe.toString:void 0;function lSe(t){if(typeof t=="string")return t;if(out(t))return sut(t,lSe)+"";if(aut(t))return uSe?uSe.call(t):"";var e=t+"";return e=="0"&&1/t==-uut?"-0":e}cSe.exports=lSe});var MP=v((Ikt,xSe)=>{var lut=fSe();function cut(t){return t==null?"":lut(t)}xSe.exports=cut});var hSe=v((Mkt,dSe)=>{var fut=PAe(),xut=MP(),dut=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,hut="\\u0300-\\u036f",put="\\ufe20-\\ufe2f",mut="\\u20d0-\\u20ff",gut=hut+put+mut,yut="["+gut+"]",Eut=RegExp(yut,"g");function Aut(t){return t=xut(t),t&&t.replace(dut,fut).replace(Eut,"")}dSe.exports=Aut});var mSe=v((Pkt,pSe)=>{var Sut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function vut(t){return t.match(Sut)||[]}pSe.exports=vut});var ySe=v((kkt,gSe)=>{var _ut=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function but(t){return _ut.test(t)}gSe.exports=but});var kSe=v((Bkt,PSe)=>{var _Se="\\ud800-\\udfff",Tut="\\u0300-\\u036f",Cut="\\ufe20-\\ufe2f",Rut="\\u20d0-\\u20ff",Out=Tut+Cut+Rut,bSe="\\u2700-\\u27bf",TSe="a-z\\xdf-\\xf6\\xf8-\\xff",Dut="\\xac\\xb1\\xd7\\xf7",Nut="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Fut="\\u2000-\\u206f",wut=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",CSe="A-Z\\xc0-\\xd6\\xd8-\\xde",Lut="\\ufe0e\\ufe0f",RSe=Dut+Nut+Fut+wut,OSe="['\u2019]",ESe="["+RSe+"]",Iut="["+Out+"]",DSe="\\d+",Mut="["+bSe+"]",NSe="["+TSe+"]",FSe="[^"+_Se+RSe+DSe+bSe+TSe+CSe+"]",Put="\\ud83c[\\udffb-\\udfff]",kut="(?:"+Iut+"|"+Put+")",But="[^"+_Se+"]",wSe="(?:\\ud83c[\\udde6-\\uddff]){2}",LSe="[\\ud800-\\udbff][\\udc00-\\udfff]",MS="["+CSe+"]",qut="\\u200d",ASe="(?:"+NSe+"|"+FSe+")",Uut="(?:"+MS+"|"+FSe+")",SSe="(?:"+OSe+"(?:d|ll|m|re|s|t|ve))?",vSe="(?:"+OSe+"(?:D|LL|M|RE|S|T|VE))?",ISe=kut+"?",MSe="["+Lut+"]?",$ut="(?:"+qut+"(?:"+[But,wSe,LSe].join("|")+")"+MSe+ISe+")*",jut="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Hut="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",zut=MSe+ISe+$ut,Gut="(?:"+[Mut,wSe,LSe].join("|")+")"+zut,Qut=RegExp([MS+"?"+NSe+"+"+SSe+"(?="+[ESe,MS,"$"].join("|")+")",Uut+"+"+vSe+"(?="+[ESe,MS+ASe,"$"].join("|")+")",MS+"?"+ASe+"+"+SSe,MS+"+"+vSe,Hut,jut,DSe,Gut].join("|"),"g");function Vut(t){return t.match(Qut)||[]}PSe.exports=Vut});var qSe=v((qkt,BSe)=>{var Wut=mSe(),Yut=ySe(),Kut=MP(),Xut=kSe();function Jut(t,e,r){return t=Kut(t),e=r?void 0:e,e===void 0?Yut(t)?Xut(t):Wut(t):t.match(e)||[]}BSe.exports=Jut});var $Se=v((Ukt,USe)=>{var Zut=wAe(),elt=hSe(),tlt=qSe(),rlt="['\u2019]",nlt=RegExp(rlt,"g");function ilt(t){return function(e){return Zut(tlt(elt(e).replace(nlt,"")),t,"")}}USe.exports=ilt});var HSe=v(($kt,jSe)=>{function slt(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var s=Array(i);++n<i;)s[n]=t[n+e];return s}jSe.exports=slt});var GSe=v((jkt,zSe)=>{var olt=HSe();function alt(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:olt(t,e,r)}zSe.exports=alt});var BZ=v((Hkt,QSe)=>{var ult="\\ud800-\\udfff",llt="\\u0300-\\u036f",clt="\\ufe20-\\ufe2f",flt="\\u20d0-\\u20ff",xlt=llt+clt+flt,dlt="\\ufe0e\\ufe0f",hlt="\\u200d",plt=RegExp("["+hlt+ult+xlt+dlt+"]");function mlt(t){return plt.test(t)}QSe.exports=mlt});var WSe=v((zkt,VSe)=>{function glt(t){return t.split("")}VSe.exports=glt});var r4e=v((Gkt,t4e)=>{var YSe="\\ud800-\\udfff",ylt="\\u0300-\\u036f",Elt="\\ufe20-\\ufe2f",Alt="\\u20d0-\\u20ff",Slt=ylt+Elt+Alt,vlt="\\ufe0e\\ufe0f",_lt="["+YSe+"]",qZ="["+Slt+"]",UZ="\\ud83c[\\udffb-\\udfff]",blt="(?:"+qZ+"|"+UZ+")",KSe="[^"+YSe+"]",XSe="(?:\\ud83c[\\udde6-\\uddff]){2}",JSe="[\\ud800-\\udbff][\\udc00-\\udfff]",Tlt="\\u200d",ZSe=blt+"?",e4e="["+vlt+"]?",Clt="(?:"+Tlt+"(?:"+[KSe,XSe,JSe].join("|")+")"+e4e+ZSe+")*",Rlt=e4e+ZSe+Clt,Olt="(?:"+[KSe+qZ+"?",qZ,XSe,JSe,_lt].join("|")+")",Dlt=RegExp(UZ+"(?="+UZ+")|"+Olt+Rlt,"g");function Nlt(t){return t.match(Dlt)||[]}t4e.exports=Nlt});var i4e=v((Qkt,n4e)=>{var Flt=WSe(),wlt=BZ(),Llt=r4e();function Ilt(t){return wlt(t)?Llt(t):Flt(t)}n4e.exports=Ilt});var o4e=v((Vkt,s4e)=>{var Mlt=GSe(),Plt=BZ(),klt=i4e(),Blt=MP();function qlt(t){return function(e){e=Blt(e);var r=Plt(e)?klt(e):void 0,n=r?r[0]:e.charAt(0),i=r?Mlt(r,1).join(""):e.slice(1);return n[t]()+i}}s4e.exports=qlt});var u4e=v((Wkt,a4e)=>{var Ult=o4e(),$lt=Ult("toUpperCase");a4e.exports=$lt});var c4e=v((Ykt,l4e)=>{var jlt=$Se(),Hlt=u4e(),zlt=jlt(function(t,e,r){return t+(r?" ":"")+Hlt(e)});l4e.exports=zlt});var Ree=v((bUt,Cee)=>{var vve={},Fct=function(e){e.version="0.11.2";function r(L){for(var I="",D=L.length-1;D>=0;)I+=L.charAt(D--);return I}function n(L,I){for(var D="";D.length<I;)D+=L;return D}function i(L,I){var D=""+L;return D.length>=I?D:n("0",I-D.length)+D}function s(L,I){var D=""+L;return D.length>=I?D:n(" ",I-D.length)+D}function o(L,I){var D=""+L;return D.length>=I?D:D+n(" ",I-D.length)}function a(L,I){var D=""+Math.round(L);return D.length>=I?D:n("0",I-D.length)+D}function u(L,I){var D=""+L;return D.length>=I?D:n("0",I-D.length)+D}var l=Math.pow(2,32);function c(L,I){if(L>l||L<-l)return a(L,I);var D=Math.round(L);return u(D,I)}function f(L,I){return I=I||0,L.length>=7+I&&(L.charCodeAt(I)|32)===103&&(L.charCodeAt(I+1)|32)===101&&(L.charCodeAt(I+2)|32)===110&&(L.charCodeAt(I+3)|32)===101&&(L.charCodeAt(I+4)|32)===114&&(L.charCodeAt(I+5)|32)===97&&(L.charCodeAt(I+6)|32)===108}var x=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],d=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function h(L){L[0]="General",L[1]="0",L[2]="0.00",L[3]="#,##0",L[4]="#,##0.00",L[9]="0%",L[10]="0.00%",L[11]="0.00E+00",L[12]="# ?/?",L[13]="# ??/??",L[14]="m/d/yy",L[15]="d-mmm-yy",L[16]="d-mmm",L[17]="mmm-yy",L[18]="h:mm AM/PM",L[19]="h:mm:ss AM/PM",L[20]="h:mm",L[21]="h:mm:ss",L[22]="m/d/yy h:mm",L[37]="#,##0 ;(#,##0)",L[38]="#,##0 ;[Red](#,##0)",L[39]="#,##0.00;(#,##0.00)",L[40]="#,##0.00;[Red](#,##0.00)",L[45]="mm:ss",L[46]="[h]:mm:ss",L[47]="mmss.0",L[48]="##0.0E+0",L[49]="@",L[56]='"\u4E0A\u5348/\u4E0B\u5348 "hh"\u6642"mm"\u5206"ss"\u79D2 "'}var p={};h(p);var m=[],g=0;for(g=5;g<=8;++g)m[g]=32+g;for(g=23;g<=26;++g)m[g]=0;for(g=27;g<=31;++g)m[g]=14;for(g=50;g<=58;++g)m[g]=14;for(g=59;g<=62;++g)m[g]=g-58;for(g=67;g<=68;++g)m[g]=g-58;for(g=72;g<=75;++g)m[g]=g-58;for(g=67;g<=68;++g)m[g]=g-57;for(g=76;g<=78;++g)m[g]=g-56;for(g=79;g<=81;++g)m[g]=g-34;var y=[];y[5]=y[63]='"$"#,##0_);\\("$"#,##0\\)',y[6]=y[64]='"$"#,##0_);[Red]\\("$"#,##0\\)',y[7]=y[65]='"$"#,##0.00_);\\("$"#,##0.00\\)',y[8]=y[66]='"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',y[41]='_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',y[42]='_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',y[43]='_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',y[44]='_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)';function A(L,I,D){for(var ae=L<0?-1:1,w=L*ae,G=0,k=1,ie=0,ze=1,ge=0,rt=0,_t=Math.floor(w);ge<I&&(_t=Math.floor(w),ie=_t*k+G,rt=_t*ge+ze,!(w-_t<5e-8));)w=1/(w-_t),G=k,k=ie,ze=ge,ge=rt;if(rt>I&&(ge>I?(rt=ze,ie=G):(rt=ge,ie=k)),!D)return[0,ae*ie,rt];var Dl=Math.floor(ae*ie/rt);return[Dl,ae*ie-Dl*rt,rt]}function S(L,I,D){if(L>2958465||L<0)return null;var ae=L|0,w=Math.floor(86400*(L-ae)),G=0,k=[],ie={D:ae,T:w,u:86400*(L-ae)-w,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(ie.u)<1e-6&&(ie.u=0),I&&I.date1904&&(ae+=1462),ie.u>.9999&&(ie.u=0,++w==86400&&(ie.T=w=0,++ae,++ie.D)),ae===60)k=D?[1317,10,29]:[1900,2,29],G=3;else if(ae===0)k=D?[1317,8,29]:[1900,1,0],G=6;else{ae>60&&--ae;var ze=new Date(1900,0,1);ze.setDate(ze.getDate()+ae-1),k=[ze.getFullYear(),ze.getMonth()+1,ze.getDate()],G=ze.getDay(),ae<60&&(G=(G+6)%7),D&&(G=$(ze,k))}return ie.y=k[0],ie.m=k[1],ie.d=k[2],ie.S=w%60,w=Math.floor(w/60),ie.M=w%60,w=Math.floor(w/60),ie.H=w,ie.q=G,ie}e.parse_date_code=S;var T=new Date(1899,11,31,0,0,0),_=T.getTime(),b=new Date(1900,2,1,0,0,0);function R(L,I){var D=L.getTime();return I?D-=1262304e5:L>=b&&(D+=864e5),(D-(_+(L.getTimezoneOffset()-T.getTimezoneOffset())*6e4))/864e5}function O(L){return L.toString(10)}e._general_int=O;var N=function(){var I=/(?:\.0*|(\.\d*[1-9])0+)$/;function D(ge){return ge.indexOf(".")==-1?ge:ge.replace(I,"$1")}var ae=/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,w=/(E[+-])(\d)$/;function G(ge){return ge.indexOf("E")==-1?ge:ge.replace(ae,"$1E").replace(w,"$10$2")}function k(ge){var rt=ge<0?12:11,_t=D(ge.toFixed(12));return _t.length<=rt||(_t=ge.toPrecision(10),_t.length<=rt)?_t:ge.toExponential(5)}function ie(ge){var rt=D(ge.toFixed(11));return rt.length>(ge<0?12:11)||rt==="0"||rt==="-0"?ge.toPrecision(6):rt}function ze(ge){var rt=Math.floor(Math.log(Math.abs(ge))*Math.LOG10E),_t;return rt>=-4&&rt<=-1?_t=ge.toPrecision(10+rt):Math.abs(rt)<=9?_t=k(ge):rt===10?_t=ge.toFixed(10).substr(0,12):_t=ie(ge),D(G(_t.toUpperCase()))}return ze}();e._general_num=N;function F(L,I){switch(typeof L){case"string":return L;case"boolean":return L?"TRUE":"FALSE";case"number":return(L|0)===L?L.toString(10):N(L);case"undefined":return"";case"object":if(L==null)return"";if(L instanceof Date)return vr(14,R(L,I&&I.date1904),I)}throw new Error("unsupported value in General format: "+L)}e._general=F;function $(L,I){I[0]-=581;var D=L.getDay();return L<60&&(D=(D+6)%7),D}var q="\u0E50\u0E51\u0E52\u0E53\u0E54\u0E55\u0E56\u0E57\u0E58\u0E59".split("");function X(L,I,D,ae){var w="",G=0,k=0,ie=D.y,ze,ge=0;switch(L){case 98:ie=D.y+543;case 121:switch(I.length){case 1:case 2:ze=ie%100,ge=2;break;default:ze=ie%1e4,ge=4;break}break;case 109:switch(I.length){case 1:case 2:ze=D.m,ge=I.length;break;case 3:return d[D.m-1][1];case 5:return d[D.m-1][0];default:return d[D.m-1][2]}break;case 100:switch(I.length){case 1:case 2:ze=D.d,ge=I.length;break;case 3:return x[D.q][0];default:return x[D.q][1]}break;case 104:switch(I.length){case 1:case 2:ze=1+(D.H+11)%12,ge=I.length;break;default:throw"bad hour format: "+I}break;case 72:switch(I.length){case 1:case 2:ze=D.H,ge=I.length;break;default:throw"bad hour format: "+I}break;case 77:switch(I.length){case 1:case 2:ze=D.M,ge=I.length;break;default:throw"bad minute format: "+I}break;case 115:if(I!="s"&&I!="ss"&&I!=".0"&&I!=".00"&&I!=".000")throw"bad second format: "+I;return D.u===0&&(I=="s"||I=="ss")?i(D.S,I.length):(ae>=2?k=ae===3?1e3:100:k=ae===1?10:1,G=Math.round(k*(D.S+D.u)),G>=60*k&&(G=0),I==="s"?G===0?"0":""+G/k:(w=i(G,2+ae),I==="ss"?w.substr(0,2):"."+w.substr(2,I.length-1)));case 90:switch(I){case"[h]":case"[hh]":ze=D.D*24+D.H;break;case"[m]":case"[mm]":ze=(D.D*24+D.H)*60+D.M;break;case"[s]":case"[ss]":ze=((D.D*24+D.H)*60+D.M)*60+Math.round(D.S+D.u);break;default:throw"bad abstime format: "+I}ge=I.length===3?1:2;break;case 101:ze=ie,ge=1;break}var rt=ge>0?i(ze,ge):"";return rt}function P(L){var I=3;if(L.length<=I)return L;for(var D=L.length%I,ae=L.substr(0,D);D!=L.length;D+=I)ae+=(ae.length>0?",":"")+L.substr(D,I);return ae}var te=function(){var I=/%/g;function D(ve,U,Q){var Ye=U.replace(I,""),pe=U.length-Ye.length;return te(ve,Ye,Q*Math.pow(10,2*pe))+n("%",pe)}function ae(ve,U,Q){for(var Ye=U.length-1;U.charCodeAt(Ye-1)===44;)--Ye;return te(ve,U.substr(0,Ye),Q/Math.pow(10,3*(U.length-Ye)))}function w(ve,U){var Q,Ye=ve.indexOf("E")-ve.indexOf(".")-1;if(ve.match(/^#+0.0E\+0$/)){if(U==0)return"0.0E+0";if(U<0)return"-"+w(ve,-U);var pe=ve.indexOf(".");pe===-1&&(pe=ve.indexOf("E"));var ye=Math.floor(Math.log(U)*Math.LOG10E)%pe;if(ye<0&&(ye+=pe),Q=(U/Math.pow(10,ye)).toPrecision(Ye+1+(pe+ye)%pe),Q.indexOf("e")===-1){var bt=Math.floor(Math.log(U)*Math.LOG10E);for(Q.indexOf(".")===-1?Q=Q.charAt(0)+"."+Q.substr(1)+"E+"+(bt-Q.length+ye):Q+="E+"+(bt-ye);Q.substr(0,2)==="0.";)Q=Q.charAt(0)+Q.substr(2,pe)+"."+Q.substr(2+pe),Q=Q.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");Q=Q.replace(/\+-/,"-")}Q=Q.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(Gr,An,Sn,$t){return An+Sn+$t.substr(0,(pe+ye)%pe)+"."+$t.substr(ye)+"E"})}else Q=U.toExponential(Ye);return ve.match(/E\+00$/)&&Q.match(/e[+-]\d$/)&&(Q=Q.substr(0,Q.length-1)+"0"+Q.charAt(Q.length-1)),ve.match(/E\-/)&&Q.match(/e\+/)&&(Q=Q.replace(/e\+/,"e")),Q.replace("e","E")}var G=/# (\?+)( ?)\/( ?)(\d+)/;function k(ve,U,Q){var Ye=parseInt(ve[4],10),pe=Math.round(U*Ye),ye=Math.floor(pe/Ye),bt=pe-ye*Ye,Gr=Ye;return Q+(ye===0?"":""+ye)+" "+(bt===0?n(" ",ve[1].length+1+ve[4].length):s(bt,ve[1].length)+ve[2]+"/"+ve[3]+i(Gr,ve[4].length))}function ie(ve,U,Q){return Q+(U===0?"":""+U)+n(" ",ve[1].length+2+ve[4].length)}var ze=/^#*0*\.([0#]+)/,ge=/\).*[0#]/,rt=/\(###\) ###\\?-####/;function _t(ve){for(var U="",Q,Ye=0;Ye!=ve.length;++Ye)switch(Q=ve.charCodeAt(Ye)){case 35:break;case 63:U+=" ";break;case 48:U+="0";break;default:U+=String.fromCharCode(Q)}return U}function Dl(ve,U){var Q=Math.pow(10,U);return""+Math.round(ve*Q)/Q}function h1(ve,U){var Q=ve-Math.floor(ve),Ye=Math.pow(10,U);return U<(""+Math.round(Q*Ye)).length?0:Math.round(Q*Ye)}function lz(ve,U){return U<(""+Math.round((ve-Math.floor(ve))*Math.pow(10,U))).length?1:0}function Nl(ve){return ve<2147483647&&ve>-2147483648?""+(ve>=0?ve|0:ve-1|0):""+Math.floor(ve)}function _r(ve,U,Q){if(ve.charCodeAt(0)===40&&!U.match(ge)){var Ye=U.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return Q>=0?_r("n",Ye,Q):"("+_r("n",Ye,-Q)+")"}if(U.charCodeAt(U.length-1)===44)return ae(ve,U,Q);if(U.indexOf("%")!==-1)return D(ve,U,Q);if(U.indexOf("E")!==-1)return w(U,Q);if(U.charCodeAt(0)===36)return"$"+_r(ve,U.substr(U.charAt(1)==" "?2:1),Q);var pe,ye,bt,Gr,An=Math.abs(Q),Sn=Q<0?"-":"";if(U.match(/^00+$/))return Sn+c(An,U.length);if(U.match(/^[#?]+$/))return pe=c(Q,0),pe==="0"&&(pe=""),pe.length>U.length?pe:_t(U.substr(0,U.length-pe.length))+pe;if(ye=U.match(G))return k(ye,An,Sn);if(U.match(/^#+0+$/))return Sn+c(An,U.length-U.indexOf("0"));if(ye=U.match(ze))return pe=Dl(Q,ye[1].length).replace(/^([^\.]+)$/,"$1."+_t(ye[1])).replace(/\.$/,"."+_t(ye[1])).replace(/\.(\d*)$/,function(Da,I_){return"."+I_+n("0",_t(ye[1]).length-I_.length)}),U.indexOf("0.")!==-1?pe:pe.replace(/^0\./,".");if(U=U.replace(/^#+([0.])/,"$1"),ye=U.match(/^(0*)\.(#*)$/))return Sn+Dl(An,ye[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,ye[1].length?"0.":".");if(ye=U.match(/^#{1,3},##0(\.?)$/))return Sn+P(c(An,0));if(ye=U.match(/^#,##0\.([#0]*0)$/))return Q<0?"-"+_r(ve,U,-Q):P(""+(Math.floor(Q)+lz(Q,ye[1].length)))+"."+i(h1(Q,ye[1].length),ye[1].length);if(ye=U.match(/^#,#*,#0/))return _r(ve,U.replace(/^#,#*,/,""),Q);if(ye=U.match(/^([0#]+)(\\?-([0#]+))+$/))return pe=r(_r(ve,U.replace(/[\\-]/g,""),Q)),bt=0,r(r(U.replace(/\\/g,"")).replace(/[0#]/g,function(Da){return bt<pe.length?pe.charAt(bt++):Da==="0"?"0":""}));if(U.match(rt))return pe=_r(ve,"##########",Q),"("+pe.substr(0,3)+") "+pe.substr(3,3)+"-"+pe.substr(6);var $t="";if(ye=U.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return bt=Math.min(ye[4].length,7),Gr=A(An,Math.pow(10,bt)-1,!1),pe=""+Sn,$t=te("n",ye[1],Gr[1]),$t.charAt($t.length-1)==" "&&($t=$t.substr(0,$t.length-1)+"0"),pe+=$t+ye[2]+"/"+ye[3],$t=o(Gr[2],bt),$t.length<ye[4].length&&($t=_t(ye[4].substr(ye[4].length-$t.length))+$t),pe+=$t,pe;if(ye=U.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return bt=Math.min(Math.max(ye[1].length,ye[4].length),7),Gr=A(An,Math.pow(10,bt)-1,!0),Sn+(Gr[0]||(Gr[1]?"":"0"))+" "+(Gr[1]?s(Gr[1],bt)+ye[2]+"/"+ye[3]+o(Gr[2],bt):n(" ",2*bt+1+ye[2].length+ye[3].length));if(ye=U.match(/^[#0?]+$/))return pe=c(Q,0),U.length<=pe.length?pe:_t(U.substr(0,U.length-pe.length))+pe;if(ye=U.match(/^([#0?]+)\.([#0]+)$/)){pe=""+Q.toFixed(Math.min(ye[2].length,10)).replace(/([^0])0+$/,"$1"),bt=pe.indexOf(".");var w_=U.indexOf(".")-bt,cz=U.length-pe.length-w_;return _t(U.substr(0,w_)+pe+U.substr(U.length-cz))}if(ye=U.match(/^00,000\.([#0]*0)$/))return bt=h1(Q,ye[1].length),Q<0?"-"+_r(ve,U,-Q):P(Nl(Q)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(Da){return"00,"+(Da.length<3?i(0,3-Da.length):"")+Da})+"."+i(bt,ye[1].length);switch(U){case"###,##0.00":return _r(ve,"#,##0.00",Q);case"###,###":case"##,###":case"#,###":var L_=P(c(An,0));return L_!=="0"?Sn+L_:"";case"###,###.00":return _r(ve,"###,##0.00",Q).replace(/^0\./,".");case"#,###.00":return _r(ve,"#,##0.00",Q).replace(/^0\./,".");default:}throw new Error("unsupported format |"+U+"|")}function F_(ve,U,Q){for(var Ye=U.length-1;U.charCodeAt(Ye-1)===44;)--Ye;return te(ve,U.substr(0,Ye),Q/Math.pow(10,3*(U.length-Ye)))}function DD(ve,U,Q){var Ye=U.replace(I,""),pe=U.length-Ye.length;return te(ve,Ye,Q*Math.pow(10,2*pe))+n("%",pe)}function $f(ve,U){var Q,Ye=ve.indexOf("E")-ve.indexOf(".")-1;if(ve.match(/^#+0.0E\+0$/)){if(U==0)return"0.0E+0";if(U<0)return"-"+$f(ve,-U);var pe=ve.indexOf(".");pe===-1&&(pe=ve.indexOf("E"));var ye=Math.floor(Math.log(U)*Math.LOG10E)%pe;if(ye<0&&(ye+=pe),Q=(U/Math.pow(10,ye)).toPrecision(Ye+1+(pe+ye)%pe),!Q.match(/[Ee]/)){var bt=Math.floor(Math.log(U)*Math.LOG10E);Q.indexOf(".")===-1?Q=Q.charAt(0)+"."+Q.substr(1)+"E+"+(bt-Q.length+ye):Q+="E+"+(bt-ye),Q=Q.replace(/\+-/,"-")}Q=Q.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(Gr,An,Sn,$t){return An+Sn+$t.substr(0,(pe+ye)%pe)+"."+$t.substr(ye)+"E"})}else Q=U.toExponential(Ye);return ve.match(/E\+00$/)&&Q.match(/e[+-]\d$/)&&(Q=Q.substr(0,Q.length-1)+"0"+Q.charAt(Q.length-1)),ve.match(/E\-/)&&Q.match(/e\+/)&&(Q=Q.replace(/e\+/,"e")),Q.replace("e","E")}function ft(ve,U,Q){if(ve.charCodeAt(0)===40&&!U.match(ge)){var Ye=U.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return Q>=0?ft("n",Ye,Q):"("+ft("n",Ye,-Q)+")"}if(U.charCodeAt(U.length-1)===44)return F_(ve,U,Q);if(U.indexOf("%")!==-1)return DD(ve,U,Q);if(U.indexOf("E")!==-1)return $f(U,Q);if(U.charCodeAt(0)===36)return"$"+ft(ve,U.substr(U.charAt(1)==" "?2:1),Q);var pe,ye,bt,Gr,An=Math.abs(Q),Sn=Q<0?"-":"";if(U.match(/^00+$/))return Sn+i(An,U.length);if(U.match(/^[#?]+$/))return pe=""+Q,Q===0&&(pe=""),pe.length>U.length?pe:_t(U.substr(0,U.length-pe.length))+pe;if(ye=U.match(G))return ie(ye,An,Sn);if(U.match(/^#+0+$/))return Sn+i(An,U.length-U.indexOf("0"));if(ye=U.match(ze))return pe=(""+Q).replace(/^([^\.]+)$/,"$1."+_t(ye[1])).replace(/\.$/,"."+_t(ye[1])),pe=pe.replace(/\.(\d*)$/,function(Da,I_){return"."+I_+n("0",_t(ye[1]).length-I_.length)}),U.indexOf("0.")!==-1?pe:pe.replace(/^0\./,".");if(U=U.replace(/^#+([0.])/,"$1"),ye=U.match(/^(0*)\.(#*)$/))return Sn+(""+An).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,ye[1].length?"0.":".");if(ye=U.match(/^#{1,3},##0(\.?)$/))return Sn+P(""+An);if(ye=U.match(/^#,##0\.([#0]*0)$/))return Q<0?"-"+ft(ve,U,-Q):P(""+Q)+"."+n("0",ye[1].length);if(ye=U.match(/^#,#*,#0/))return ft(ve,U.replace(/^#,#*,/,""),Q);if(ye=U.match(/^([0#]+)(\\?-([0#]+))+$/))return pe=r(ft(ve,U.replace(/[\\-]/g,""),Q)),bt=0,r(r(U.replace(/\\/g,"")).replace(/[0#]/g,function(Da){return bt<pe.length?pe.charAt(bt++):Da==="0"?"0":""}));if(U.match(rt))return pe=ft(ve,"##########",Q),"("+pe.substr(0,3)+") "+pe.substr(3,3)+"-"+pe.substr(6);var $t="";if(ye=U.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return bt=Math.min(ye[4].length,7),Gr=A(An,Math.pow(10,bt)-1,!1),pe=""+Sn,$t=te("n",ye[1],Gr[1]),$t.charAt($t.length-1)==" "&&($t=$t.substr(0,$t.length-1)+"0"),pe+=$t+ye[2]+"/"+ye[3],$t=o(Gr[2],bt),$t.length<ye[4].length&&($t=_t(ye[4].substr(ye[4].length-$t.length))+$t),pe+=$t,pe;if(ye=U.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return bt=Math.min(Math.max(ye[1].length,ye[4].length),7),Gr=A(An,Math.pow(10,bt)-1,!0),Sn+(Gr[0]||(Gr[1]?"":"0"))+" "+(Gr[1]?s(Gr[1],bt)+ye[2]+"/"+ye[3]+o(Gr[2],bt):n(" ",2*bt+1+ye[2].length+ye[3].length));if(ye=U.match(/^[#0?]+$/))return pe=""+Q,U.length<=pe.length?pe:_t(U.substr(0,U.length-pe.length))+pe;if(ye=U.match(/^([#0]+)\.([#0]+)$/)){pe=""+Q.toFixed(Math.min(ye[2].length,10)).replace(/([^0])0+$/,"$1"),bt=pe.indexOf(".");var w_=U.indexOf(".")-bt,cz=U.length-pe.length-w_;return _t(U.substr(0,w_)+pe+U.substr(U.length-cz))}if(ye=U.match(/^00,000\.([#0]*0)$/))return Q<0?"-"+ft(ve,U,-Q):P(""+Q).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(Da){return"00,"+(Da.length<3?i(0,3-Da.length):"")+Da})+"."+i(0,ye[1].length);switch(U){case"###,###":case"##,###":case"#,###":var L_=P(""+An);return L_!=="0"?Sn+L_:"";default:if(U.match(/\.[0#?]*$/))return ft(ve,U.slice(0,U.lastIndexOf(".")),Q)+_t(U.slice(U.lastIndexOf(".")))}throw new Error("unsupported format |"+U+"|")}return function(U,Q,Ye){return(Ye|0)===Ye?ft(U,Q,Ye):_r(U,Q,Ye)}}();function me(L){for(var I=[],D=!1,ae=0,w=0;ae<L.length;++ae)switch(L.charCodeAt(ae)){case 34:D=!D;break;case 95:case 42:case 92:++ae;break;case 59:I[I.length]=L.substr(w,ae-w),w=ae+1}if(I[I.length]=L.substr(w),D===!0)throw new Error("Format |"+L+"| unterminated string ");return I}e._split=me;var Ce=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Pe(L){for(var I=0,D="",ae="";I<L.length;)switch(D=L.charAt(I)){case"G":f(L,I)&&(I+=6),I++;break;case'"':for(;L.charCodeAt(++I)!==34&&I<L.length;);++I;break;case"\\":I+=2;break;case"_":I+=2;break;case"@":++I;break;case"B":case"b":if(L.charAt(I+1)==="1"||L.charAt(I+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4E0A":if(L.substr(I,3).toUpperCase()==="A/P"||L.substr(I,5).toUpperCase()==="AM/PM"||L.substr(I,5).toUpperCase()==="\u4E0A\u5348/\u4E0B\u5348")return!0;++I;break;case"[":for(ae=D;L.charAt(I++)!=="]"&&I<L.length;)ae+=L.charAt(I);if(ae.match(Ce))return!0;break;case".":case"0":case"#":for(;I<L.length&&("0#?.,E+-%".indexOf(D=L.charAt(++I))>-1||D=="\\"&&L.charAt(I+1)=="-"&&"0#".indexOf(L.charAt(I+2))>-1););break;case"?":for(;L.charAt(++I)===D;);break;case"*":++I,(L.charAt(I)==" "||L.charAt(I)=="*")&&++I;break;case"(":case")":++I;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;I<L.length&&"0123456789".indexOf(L.charAt(++I))>-1;);break;case" ":++I;break;default:++I;break}return!1}e.is_date=Pe;function ct(L,I,D,ae){for(var w=[],G="",k=0,ie="",ze="t",ge,rt,_t,Dl="H";k<L.length;)switch(ie=L.charAt(k)){case"G":if(!f(L,k))throw new Error("unrecognized character "+ie+" in "+L);w[w.length]={t:"G",v:"General"},k+=7;break;case'"':for(G="";(_t=L.charCodeAt(++k))!==34&&k<L.length;)G+=String.fromCharCode(_t);w[w.length]={t:"t",v:G},++k;break;case"\\":var h1=L.charAt(++k),lz=h1==="("||h1===")"?h1:"t";w[w.length]={t:lz,v:h1},++k;break;case"_":w[w.length]={t:"t",v:" "},k+=2;break;case"@":w[w.length]={t:"T",v:I},++k;break;case"B":case"b":if(L.charAt(k+1)==="1"||L.charAt(k+1)==="2"){if(ge==null&&(ge=S(I,D,L.charAt(k+1)==="2"),ge==null))return"";w[w.length]={t:"X",v:L.substr(k,2)},ze=ie,k+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":ie=ie.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(I<0||ge==null&&(ge=S(I,D),ge==null))return"";for(G=ie;++k<L.length&&L.charAt(k).toLowerCase()===ie;)G+=ie;ie==="m"&&ze.toLowerCase()==="h"&&(ie="M"),ie==="h"&&(ie=Dl),w[w.length]={t:ie,v:G},ze=ie;break;case"A":case"a":case"\u4E0A":var Nl={t:ie,v:ie};if(ge==null&&(ge=S(I,D)),L.substr(k,3).toUpperCase()==="A/P"?(ge!=null&&(Nl.v=ge.H>=12?"P":"A"),Nl.t="T",Dl="h",k+=3):L.substr(k,5).toUpperCase()==="AM/PM"?(ge!=null&&(Nl.v=ge.H>=12?"PM":"AM"),Nl.t="T",k+=5,Dl="h"):L.substr(k,5).toUpperCase()==="\u4E0A\u5348/\u4E0B\u5348"?(ge!=null&&(Nl.v=ge.H>=12?"\u4E0B\u5348":"\u4E0A\u5348"),Nl.t="T",k+=5,Dl="h"):(Nl.t="t",++k),ge==null&&Nl.t==="T")return"";w[w.length]=Nl,ze=ie;break;case"[":for(G=ie;L.charAt(k++)!=="]"&&k<L.length;)G+=L.charAt(k);if(G.slice(-1)!=="]")throw'unterminated "[" block: |'+G+"|";if(G.match(Ce)){if(ge==null&&(ge=S(I,D),ge==null))return"";w[w.length]={t:"Z",v:G.toLowerCase()},ze=G.charAt(1)}else G.indexOf("$")>-1&&(G=(G.match(/\$([^-\[\]]*)/)||[])[1]||"$",Pe(L)||(w[w.length]={t:"t",v:G}));break;case".":if(ge!=null){for(G=ie;++k<L.length&&(ie=L.charAt(k))==="0";)G+=ie;w[w.length]={t:"s",v:G};break}case"0":case"#":for(G=ie;++k<L.length&&"0#?.,E+-%".indexOf(ie=L.charAt(k))>-1;)G+=ie;w[w.length]={t:"n",v:G};break;case"?":for(G=ie;L.charAt(++k)===ie;)G+=ie;w[w.length]={t:ie,v:G},ze=ie;break;case"*":++k,(L.charAt(k)==" "||L.charAt(k)=="*")&&++k;break;case"(":case")":w[w.length]={t:ae===1?"t":ie,v:ie},++k;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(G=ie;k<L.length&&"0123456789".indexOf(L.charAt(++k))>-1;)G+=L.charAt(k);w[w.length]={t:"D",v:G};break;case" ":w[w.length]={t:ie,v:ie},++k;break;case"$":w[w.length]={t:"t",v:"$"},++k;break;default:if(",$-+/():!^&'~{}<>=\u20ACacfijklopqrtuvwxzP".indexOf(ie)===-1)throw new Error("unrecognized character "+ie+" in "+L);w[w.length]={t:"t",v:ie},++k;break}var _r=0,F_=0,DD;for(k=w.length-1,ze="t";k>=0;--k)switch(w[k].t){case"h":case"H":w[k].t=Dl,ze="h",_r<1&&(_r=1);break;case"s":(DD=w[k].v.match(/\.0+$/))&&(F_=Math.max(F_,DD[0].length-1)),_r<3&&(_r=3);case"d":case"y":case"M":case"e":ze=w[k].t;break;case"m":ze==="s"&&(w[k].t="M",_r<2&&(_r=2));break;case"X":break;case"Z":_r<1&&w[k].v.match(/[Hh]/)&&(_r=1),_r<2&&w[k].v.match(/[Mm]/)&&(_r=2),_r<3&&w[k].v.match(/[Ss]/)&&(_r=3)}switch(_r){case 0:break;case 1:ge.u>=.5&&(ge.u=0,++ge.S),ge.S>=60&&(ge.S=0,++ge.M),ge.M>=60&&(ge.M=0,++ge.H);break;case 2:ge.u>=.5&&(ge.u=0,++ge.S),ge.S>=60&&(ge.S=0,++ge.M);break}var $f="",ft;for(k=0;k<w.length;++k)switch(w[k].t){case"t":case"T":case" ":case"D":break;case"X":w[k].v="",w[k].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":w[k].v=X(w[k].t.charCodeAt(0),w[k].v,ge,F_),w[k].t="t";break;case"n":case"?":for(ft=k+1;w[ft]!=null&&((ie=w[ft].t)==="?"||ie==="D"||(ie===" "||ie==="t")&&w[ft+1]!=null&&(w[ft+1].t==="?"||w[ft+1].t==="t"&&w[ft+1].v==="/")||w[k].t==="("&&(ie===" "||ie==="n"||ie===")")||ie==="t"&&(w[ft].v==="/"||w[ft].v===" "&&w[ft+1]!=null&&w[ft+1].t=="?"));)w[k].v+=w[ft].v,w[ft]={v:"",t:";"},++ft;$f+=w[k].v,k=ft-1;break;case"G":w[k].t="t",w[k].v=F(I,D);break}var ve="",U,Q;if($f.length>0){$f.charCodeAt(0)==40?(U=I<0&&$f.charCodeAt(0)===45?-I:I,Q=te("n",$f,U)):(U=I<0&&ae>1?-I:I,Q=te("n",$f,U),U<0&&w[0]&&w[0].t=="t"&&(Q=Q.substr(1),w[0].v="-"+w[0].v)),ft=Q.length-1;var Ye=w.length;for(k=0;k<w.length;++k)if(w[k]!=null&&w[k].t!="t"&&w[k].v.indexOf(".")>-1){Ye=k;break}var pe=w.length;if(Ye===w.length&&Q.indexOf("E")===-1){for(k=w.length-1;k>=0;--k)w[k]==null||"n?".indexOf(w[k].t)===-1||(ft>=w[k].v.length-1?(ft-=w[k].v.length,w[k].v=Q.substr(ft+1,w[k].v.length)):ft<0?w[k].v="":(w[k].v=Q.substr(0,ft+1),ft=-1),w[k].t="t",pe=k);ft>=0&&pe<w.length&&(w[pe].v=Q.substr(0,ft+1)+w[pe].v)}else if(Ye!==w.length&&Q.indexOf("E")===-1){for(ft=Q.indexOf(".")-1,k=Ye;k>=0;--k)if(!(w[k]==null||"n?".indexOf(w[k].t)===-1)){for(rt=w[k].v.indexOf(".")>-1&&k===Ye?w[k].v.indexOf(".")-1:w[k].v.length-1,ve=w[k].v.substr(rt+1);rt>=0;--rt)ft>=0&&(w[k].v.charAt(rt)==="0"||w[k].v.charAt(rt)==="#")&&(ve=Q.charAt(ft--)+ve);w[k].v=ve,w[k].t="t",pe=k}for(ft>=0&&pe<w.length&&(w[pe].v=Q.substr(0,ft+1)+w[pe].v),ft=Q.indexOf(".")+1,k=Ye;k<w.length;++k)if(!(w[k]==null||"n?(".indexOf(w[k].t)===-1&&k!==Ye)){for(rt=w[k].v.indexOf(".")>-1&&k===Ye?w[k].v.indexOf(".")+1:0,ve=w[k].v.substr(0,rt);rt<w[k].v.length;++rt)ft<Q.length&&(ve+=Q.charAt(ft++));w[k].v=ve,w[k].t="t",pe=k}}}for(k=0;k<w.length;++k)w[k]!=null&&"n?".indexOf(w[k].t)>-1&&(U=ae>1&&I<0&&k>0&&w[k-1].v==="-"?-I:I,w[k].v=te(w[k].t,w[k].v,U),w[k].t="t");var ye="";for(k=0;k!==w.length;++k)w[k]!=null&&(ye+=w[k].v);return ye}e._eval=ct;var rr=/\[[=<>]/,Ir=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function En(L,I){if(I==null)return!1;var D=parseFloat(I[2]);switch(I[1]){case"=":if(L==D)return!0;break;case">":if(L>D)return!0;break;case"<":if(L<D)return!0;break;case"<>":if(L!=D)return!0;break;case">=":if(L>=D)return!0;break;case"<=":if(L<=D)return!0;break}return!1}function oo(L,I){var D=me(L),ae=D.length,w=D[ae-1].indexOf("@");if(ae<4&&w>-1&&--ae,D.length>4)throw new Error("cannot find right format for |"+D.join("|")+"|");if(typeof I!="number")return[4,D.length===4||w>-1?D[D.length-1]:"@"];switch(D.length){case 1:D=w>-1?["General","General","General",D[0]]:[D[0],D[0],D[0],"@"];break;case 2:D=w>-1?[D[0],D[0],D[0],D[1]]:[D[0],D[1],D[0],"@"];break;case 3:D=w>-1?[D[0],D[1],D[0],D[2]]:[D[0],D[1],D[2],"@"];break;case 4:break}var G=I>0?D[0]:I<0?D[1]:D[2];if(D[0].indexOf("[")===-1&&D[1].indexOf("[")===-1)return[ae,G];if(D[0].match(rr)!=null||D[1].match(rr)!=null){var k=D[0].match(Ir),ie=D[1].match(Ir);return En(I,k)?[ae,D[0]]:En(I,ie)?[ae,D[1]]:[ae,D[k!=null&&ie!=null?2:1]]}return[ae,G]}function vr(L,I,D){D==null&&(D={});var ae="";switch(typeof L){case"string":L=="m/d/yy"&&D.dateNF?ae=D.dateNF:ae=L;break;case"number":L==14&&D.dateNF?ae=D.dateNF:ae=(D.table!=null?D.table:p)[L],ae==null&&(ae=D.table&&D.table[m[L]]||p[m[L]]),ae==null&&(ae=y[L]||"General");break}if(f(ae,0))return F(I,D);I instanceof Date&&(I=R(I,D.date1904));var w=oo(ae,I);if(f(w[1]))return F(I,D);if(I===!0)I="TRUE";else if(I===!1)I="FALSE";else if(I===""||I==null)return"";return ct(w[1],I,D,w[0])}function Q0(L,I){if(typeof I!="number"){I=+I||-1;for(var D=0;D<392;++D){if(p[D]==null){I<0&&(I=D);continue}if(p[D]==L){I=D;break}}I<0&&(I=391)}return p[I]=L,I}e.load=Q0,e._table=p,e.get_table=function(){return p},e.load_table=function(I){for(var D=0;D!=392;++D)I[D]!==void 0&&Q0(I[D],D)},e.init_table=h,e.format=vr};Fct(vve);typeof Cee<"u"&&typeof DO_NOT_EXPORT_SSF>"u"&&(Cee.exports=vve)});var Xve=v((UUt,vk)=>{var Qct=function(){"use strict";function t(c,f){return f!=null&&c instanceof f}var e;try{e=Map}catch{e=function(){}}var r;try{r=Set}catch{r=function(){}}var n;try{n=Promise}catch{n=function(){}}function i(c,f,x,d,h){typeof f=="object"&&(x=f.depth,d=f.prototype,h=f.includeNonEnumerable,f=f.circular);var p=[],m=[],g=typeof Buffer<"u";typeof f>"u"&&(f=!0),typeof x>"u"&&(x=1/0);function y(A,S){if(A===null)return null;if(S===0)return A;var T,_;if(typeof A!="object")return A;if(t(A,e))T=new e;else if(t(A,r))T=new r;else if(t(A,n))T=new n(function(P,te){A.then(function(me){P(y(me,S-1))},function(me){te(y(me,S-1))})});else if(i.__isArray(A))T=[];else if(i.__isRegExp(A))T=new RegExp(A.source,l(A)),A.lastIndex&&(T.lastIndex=A.lastIndex);else if(i.__isDate(A))T=new Date(A.getTime());else{if(g&&Buffer.isBuffer(A))return Buffer.allocUnsafe?T=Buffer.allocUnsafe(A.length):T=new Buffer(A.length),A.copy(T),T;t(A,Error)?T=Object.create(A):typeof d>"u"?(_=Object.getPrototypeOf(A),T=Object.create(_)):(T=Object.create(d),_=d)}if(f){var b=p.indexOf(A);if(b!=-1)return m[b];p.push(A),m.push(T)}t(A,e)&&A.forEach(function(P,te){var me=y(te,S-1),Ce=y(P,S-1);T.set(me,Ce)}),t(A,r)&&A.forEach(function(P){var te=y(P,S-1);T.add(te)});for(var R in A){var O;_&&(O=Object.getOwnPropertyDescriptor(_,R)),!(O&&O.set==null)&&(T[R]=y(A[R],S-1))}if(Object.getOwnPropertySymbols)for(var N=Object.getOwnPropertySymbols(A),R=0;R<N.length;R++){var F=N[R],$=Object.getOwnPropertyDescriptor(A,F);$&&!$.enumerable&&!h||(T[F]=y(A[F],S-1),$.enumerable||Object.defineProperty(T,F,{enumerable:!1}))}if(h)for(var q=Object.getOwnPropertyNames(A),R=0;R<q.length;R++){var X=q[R],$=Object.getOwnPropertyDescriptor(A,X);$&&$.enumerable||(T[X]=y(A[X],S-1),Object.defineProperty(T,X,{enumerable:!1}))}return T}return y(c,x)}i.clonePrototype=function(f){if(f===null)return null;var x=function(){};return x.prototype=f,new x};function s(c){return Object.prototype.toString.call(c)}i.__objToStr=s;function o(c){return typeof c=="object"&&s(c)==="[object Date]"}i.__isDate=o;function a(c){return typeof c=="object"&&s(c)==="[object Array]"}i.__isArray=a;function u(c){return typeof c=="object"&&s(c)==="[object RegExp]"}i.__isRegExp=u;function l(c){var f="";return c.global&&(f+="g"),c.ignoreCase&&(f+="i"),c.multiline&&(f+="m"),f}return i.__getRegExpFlags=l,i}();typeof vk=="object"&&vk.exports&&(vk.exports=Qct)});var Zve=v(($Ut,Jve)=>{"use strict";Jve.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var t_e=v((jUt,e_e)=>{"use strict";e_e.exports=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(s){return function(o){return function(a,u){var l={key:a,value:o[a]},c={key:u,value:o[u]};return s(l,c)}}}(e.cmp),i=[];return function s(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var a,u;if(Array.isArray(o)){for(u="[",a=0;a<o.length;a++)a&&(u+=","),u+=s(o[a])||"null";return u+"]"}if(o===null)return"null";if(i.indexOf(o)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var l=i.push(o)-1,c=Object.keys(o).sort(n&&n(o));for(u="",a=0;a<c.length;a++){var f=c[a],x=s(o[f]);x&&(u&&(u+=","),u+=JSON.stringify(f)+":"+x)}return i.splice(l,1),"{"+u+"}"}}(t)}});var kIe=Na(Bp());var ii=Na(Bp()),pve=Na(c4e());var Lx=class extends Error{},PP=class extends Lx{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},kP=class extends Lx{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},BP=class extends Lx{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},Ix=class extends Lx{},PS=class extends Lx{constructor(e){super(`Invalid unit ${e}`)}},wi=class extends Lx{},t0=class extends Lx{constructor(){super("Zone is an abstract class")}};var Oe="numeric",r0="short",nu="long",kS={year:Oe,month:Oe,day:Oe},dC={year:Oe,month:r0,day:Oe},$Z={year:Oe,month:r0,day:Oe,weekday:r0},hC={year:Oe,month:nu,day:Oe},pC={year:Oe,month:nu,day:Oe,weekday:nu},mC={hour:Oe,minute:Oe},gC={hour:Oe,minute:Oe,second:Oe},yC={hour:Oe,minute:Oe,second:Oe,timeZoneName:r0},EC={hour:Oe,minute:Oe,second:Oe,timeZoneName:nu},AC={hour:Oe,minute:Oe,hourCycle:"h23"},SC={hour:Oe,minute:Oe,second:Oe,hourCycle:"h23"},vC={hour:Oe,minute:Oe,second:Oe,hourCycle:"h23",timeZoneName:r0},_C={hour:Oe,minute:Oe,second:Oe,hourCycle:"h23",timeZoneName:nu},bC={year:Oe,month:Oe,day:Oe,hour:Oe,minute:Oe},TC={year:Oe,month:Oe,day:Oe,hour:Oe,minute:Oe,second:Oe},CC={year:Oe,month:r0,day:Oe,hour:Oe,minute:Oe},RC={year:Oe,month:r0,day:Oe,hour:Oe,minute:Oe,second:Oe},jZ={year:Oe,month:r0,day:Oe,weekday:r0,hour:Oe,minute:Oe},OC={year:Oe,month:nu,day:Oe,hour:Oe,minute:Oe,timeZoneName:r0},DC={year:Oe,month:nu,day:Oe,hour:Oe,minute:Oe,second:Oe,timeZoneName:r0},NC={year:Oe,month:nu,day:Oe,weekday:nu,hour:Oe,minute:Oe,timeZoneName:nu},FC={year:Oe,month:nu,day:Oe,weekday:nu,hour:Oe,minute:Oe,second:Oe,timeZoneName:nu};function At(t){return typeof t>"u"}function Yc(t){return typeof t=="number"}function wC(t){return typeof t=="number"&&t%1===0}function f4e(t){return typeof t=="string"}function x4e(t){return Object.prototype.toString.call(t)==="[object Date]"}function qP(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function d4e(t){return Array.isArray(t)?t:[t]}function zZ(t,e,r){if(t.length!==0)return t.reduce((n,i)=>{let s=[e(i),i];return n&&r(n[0],s[0])===n[0]?n:s},null)[1]}function h4e(t,e){return e.reduce((r,n)=>(r[n]=t[n],r),{})}function qp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Kc(t,e,r){return wC(t)&&t>=e&&t<=r}function Glt(t,e){return t-e*Math.floor(t/e)}function Xr(t,e=2){let r=t<0,n;return r?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function Mx(t){if(!(At(t)||t===null||t===""))return parseInt(t,10)}function Up(t){if(!(At(t)||t===null||t===""))return parseFloat(t)}function LC(t){if(!(At(t)||t===null||t==="")){let e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function BS(t,e,r=!1){let n=10**e;return(r?Math.trunc:Math.round)(t*n)/n}function lg(t){return t%4===0&&(t%100!==0||t%400===0)}function cg(t){return lg(t)?366:365}function qS(t,e){let r=Glt(e-1,12)+1,n=t+(e-r)/12;return r===2?lg(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function IC(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(e.getUTCFullYear()-1900)),+e}function US(t){let e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,r=t-1,n=(r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400))%7;return e===4||n===3?53:52}function MC(t){return t>99?t:t>60?1900+t:2e3+t}function UP(t,e,r,n=null){let i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);let o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(r,o).formatToParts(i).find(u=>u.type.toLowerCase()==="timezonename");return a?a.value:null}function fg(t,e){let r=parseInt(t,10);Number.isNaN(r)&&(r=0);let n=parseInt(e,10)||0,i=r<0||Object.is(r,-0)?-n:n;return r*60+i}function GZ(t){let e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new wi(`Invalid unit value ${t}`);return e}function $S(t,e){let r={};for(let n in t)if(qp(t,n)){let i=t[n];if(i==null)continue;r[e(n)]=GZ(i)}return r}function $p(t,e){let r=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Xr(r,2)}:${Xr(n,2)}`;case"narrow":return`${i}${r}${n>0?`:${n}`:""}`;case"techie":return`${i}${Xr(r,2)}${Xr(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function PC(t){return h4e(t,["hour","minute","second","millisecond"])}var QZ=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;var Qlt=["January","February","March","April","May","June","July","August","September","October","November","December"],VZ=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Vlt=["J","F","M","A","M","J","J","A","S","O","N","D"];function WZ(t){switch(t){case"narrow":return[...Vlt];case"short":return[...VZ];case"long":return[...Qlt];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var YZ=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],KZ=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Wlt=["M","T","W","T","F","S","S"];function XZ(t){switch(t){case"narrow":return[...Wlt];case"short":return[...KZ];case"long":return[...YZ];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var JZ=["AM","PM"],Ylt=["Before Christ","Anno Domini"],Klt=["BC","AD"],Xlt=["B","A"];function ZZ(t){switch(t){case"narrow":return[...Xlt];case"short":return[...Klt];case"long":return[...Ylt];default:return null}}function p4e(t){return JZ[t.hour<12?0:1]}function m4e(t,e){return XZ(e)[t.weekday-1]}function g4e(t,e){return WZ(e)[t.month-1]}function y4e(t,e){return ZZ(e)[t.year<0?0:1]}function E4e(t,e,r="always",n=!1){let i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(r==="auto"&&s){let f=t==="days";switch(e){case 1:return f?"tomorrow":`next ${i[t][0]}`;case-1:return f?"yesterday":`last ${i[t][0]}`;case 0:return f?"today":`this ${i[t][0]}`;default:}}let o=Object.is(e,-0)||e<0,a=Math.abs(e),u=a===1,l=i[t],c=n?u?l[1]:l[2]||l[1]:u?i[t][0]:t;return o?`${a} ${c} ago`:`in ${a} ${c}`}function A4e(t,e){let r="";for(let n of t)n.literal?r+=n.val:r+=e(n.val);return r}var Jlt={D:kS,DD:dC,DDD:hC,DDDD:pC,t:mC,tt:gC,ttt:yC,tttt:EC,T:AC,TT:SC,TTT:vC,TTTT:_C,f:bC,ff:CC,fff:OC,ffff:NC,F:TC,FF:RC,FFF:DC,FFFF:FC},yo=class t{static create(e,r={}){return new t(e,r)}static parseFormat(e){let r=null,n="",i=!1,s=[];for(let o=0;o<e.length;o++){let a=e.charAt(o);a==="'"?(n.length>0&&s.push({literal:i,val:n}),r=null,n="",i=!i):i||a===r?n+=a:(n.length>0&&s.push({literal:!1,val:n}),n=a,r=a)}return n.length>0&&s.push({literal:i,val:n}),s}static macroTokenToFormatOpts(e){return Jlt[e]}constructor(e,r){this.opts=r,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...r}).format()}formatDateTime(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r}).format()}formatDateTimeParts(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r}).formatToParts()}resolvedOptions(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r}).resolvedOptions()}num(e,r=0){if(this.opts.forceSimple)return Xr(e,r);let n={...this.opts};return r>0&&(n.padTo=r),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,r){let n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(d,h)=>this.loc.extract(e,d,h),o=d=>e.isOffsetFixed&&e.offset===0&&d.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,d.format):"",a=()=>n?p4e(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(d,h)=>n?g4e(e,d):s(h?{month:d}:{month:d,day:"numeric"},"month"),l=(d,h)=>n?m4e(e,d):s(h?{weekday:d}:{weekday:d,month:"long",day:"numeric"},"weekday"),c=d=>{let h=t.macroTokenToFormatOpts(d);return h?this.formatWithSystemDefault(e,h):d},f=d=>n?y4e(e,d):s({era:d},"era"),x=d=>{switch(d){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(d)}};return A4e(t.parseFormat(r),x)}formatDurationFromString(e,r){let n=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=u=>l=>{let c=n(l);return c?this.num(u.get(c),l.length):l},s=t.parseFormat(r),o=s.reduce((u,{literal:l,val:c})=>l?u:u.concat(c),[]),a=e.shiftTo(...o.map(n).filter(u=>u));return A4e(s,i(a))}};var Li=class{constructor(e,r){this.reason=e,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}};var na=class{get type(){throw new t0}get name(){throw new t0}get ianaName(){return this.name}get isUniversal(){throw new t0}offsetName(e,r){throw new t0}formatOffset(e,r){throw new t0}offset(e){throw new t0}equals(e){throw new t0}get isValid(){throw new t0}};var tee=null,jS=class t extends na{static get instance(){return tee===null&&(tee=new t),tee}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return UP(e,r,n)}formatOffset(e,r){return $p(this.offset(e),r)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}};var jP={};function Zlt(t){return jP[t]||(jP[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),jP[t]}var e0t={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function t0t(t,e){let r=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,i,s,o,a,u,l,c]=n;return[o,i,s,a,u,l,c]}function r0t(t,e){let r=t.formatToParts(e),n=[];for(let i=0;i<r.length;i++){let{type:s,value:o}=r[i],a=e0t[s];s==="era"?n[a]=o:At(a)||(n[a]=parseInt(o,10))}return n}var $P={},Bs=class t extends na{static create(e){return $P[e]||($P[e]=new t(e)),$P[e]}static resetCache(){$P={},jP={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=t.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return UP(e,r,n,this.name)}formatOffset(e,r){return $p(this.offset(e),r)}offset(e){let r=new Date(e);if(isNaN(r))return NaN;let n=Zlt(this.name),[i,s,o,a,u,l,c]=n.formatToParts?r0t(n,r):t0t(n,r);a==="BC"&&(i=-Math.abs(i)+1);let x=IC({year:i,month:s,day:o,hour:u===24?0:u,minute:l,second:c,millisecond:0}),d=+r,h=d%1e3;return d-=h>=0?h:1e3+h,(x-d)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}};var ree=null,Ii=class t extends na{static get utcInstance(){return ree===null&&(ree=new t(0)),ree}static instance(e){return e===0?t.utcInstance:new t(e)}static parseSpecifier(e){if(e){let r=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new t(fg(r[1],r[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${$p(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${$p(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,r){return $p(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}};var HS=class extends na{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function n0(t,e){let r;if(At(t)||t===null)return e;if(t instanceof na)return t;if(f4e(t)){let n=t.toLowerCase();return n==="local"||n==="system"?e:n==="utc"||n==="gmt"?Ii.utcInstance:Ii.parseSpecifier(n)||Bs.create(t)}else return Yc(t)?Ii.instance(t):typeof t=="object"&&t.offset&&typeof t.offset=="number"?t:new HS(t)}var S4e=()=>Date.now(),v4e="system",_4e=null,b4e=null,T4e=null,C4e,lr=class{static get now(){return S4e}static set now(e){S4e=e}static set defaultZone(e){v4e=e}static get defaultZone(){return n0(v4e,jS.instance)}static get defaultLocale(){return _4e}static set defaultLocale(e){_4e=e}static get defaultNumberingSystem(){return b4e}static set defaultNumberingSystem(e){b4e=e}static get defaultOutputCalendar(){return T4e}static set defaultOutputCalendar(e){T4e=e}static get throwOnInvalid(){return C4e}static set throwOnInvalid(e){C4e=e}static resetCaches(){Dr.resetCache(),Bs.resetCache()}};var R4e={};function n0t(t,e={}){let r=JSON.stringify([t,e]),n=R4e[r];return n||(n=new Intl.ListFormat(t,e),R4e[r]=n),n}var nee={};function iee(t,e={}){let r=JSON.stringify([t,e]),n=nee[r];return n||(n=new Intl.DateTimeFormat(t,e),nee[r]=n),n}var see={};function i0t(t,e={}){let r=JSON.stringify([t,e]),n=see[r];return n||(n=new Intl.NumberFormat(t,e),see[r]=n),n}var oee={};function s0t(t,e={}){let{base:r,...n}=e,i=JSON.stringify([t,n]),s=oee[i];return s||(s=new Intl.RelativeTimeFormat(t,e),oee[i]=s),s}var kC=null;function o0t(){return kC||(kC=new Intl.DateTimeFormat().resolvedOptions().locale,kC)}function a0t(t){let e=t.indexOf("-u-");if(e===-1)return[t];{let r,n=t.substring(0,e);try{r=iee(t).resolvedOptions()}catch{r=iee(n).resolvedOptions()}let{numberingSystem:i,calendar:s}=r;return[n,i,s]}}function u0t(t,e,r){return(r||e)&&(t+="-u",r&&(t+=`-ca-${r}`),e&&(t+=`-nu-${e}`)),t}function l0t(t){let e=[];for(let r=1;r<=12;r++){let n=Zt.utc(2016,r,1);e.push(t(n))}return e}function c0t(t){let e=[];for(let r=1;r<=7;r++){let n=Zt.utc(2016,11,13+r);e.push(t(n))}return e}function HP(t,e,r,n,i){let s=t.listingMode(r);return s==="error"?null:s==="en"?n(e):i(e)}function f0t(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}var aee=class{constructor(e,r,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;let{padTo:i,floor:s,...o}=n;if(!r||Object.keys(o).length>0){let a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=i0t(e,a)}}format(e){if(this.inf){let r=this.floor?Math.floor(e):e;return this.inf.format(r)}else{let r=this.floor?Math.floor(e):BS(e,3);return Xr(r,this.padTo)}}},uee=class{constructor(e,r,n){this.opts=n;let i;if(e.zone.isUniversal){let o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Bs.create(a).valid?(i=a,this.dt=e):(i="UTC",n.timeZoneName?this.dt=e:this.dt=e.offset===0?e:Zt.fromMillis(e.ts+e.offset*60*1e3))}else e.zone.type==="system"?this.dt=e:(this.dt=e,i=e.zone.name);let s={...this.opts};i&&(s.timeZone=i),this.dtf=iee(r,s)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}},lee=class{constructor(e,r,n){this.opts={style:"long",...n},!r&&qP()&&(this.rtf=s0t(e,n))}format(e,r){return this.rtf?this.rtf.format(e,r):E4e(r,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,r){return this.rtf?this.rtf.formatToParts(e,r):[]}},Dr=class t{static fromOpts(e){return t.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,r,n,i=!1){let s=e||lr.defaultLocale,o=s||(i?"en-US":o0t()),a=r||lr.defaultNumberingSystem,u=n||lr.defaultOutputCalendar;return new t(o,a,u,s)}static resetCache(){kC=null,nee={},see={},oee={}}static fromObject({locale:e,numberingSystem:r,outputCalendar:n}={}){return t.create(e,r,n)}constructor(e,r,n,i){let[s,o,a]=a0t(e);this.locale=s,this.numberingSystem=r||o||null,this.outputCalendar=n||a||null,this.intl=u0t(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=f0t(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&r?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:t.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,r=!1,n=!0){return HP(this,e,n,WZ,()=>{let i=r?{month:e,day:"numeric"}:{month:e},s=r?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=l0t(o=>this.extract(o,i,"month"))),this.monthsCache[s][e]})}weekdays(e,r=!1,n=!0){return HP(this,e,n,XZ,()=>{let i=r?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=r?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=c0t(o=>this.extract(o,i,"weekday"))),this.weekdaysCache[s][e]})}meridiems(e=!0){return HP(this,void 0,e,()=>JZ,()=>{if(!this.meridiemCache){let r={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Zt.utc(2016,11,13,9),Zt.utc(2016,11,13,19)].map(n=>this.extract(n,r,"dayperiod"))}return this.meridiemCache})}eras(e,r=!0){return HP(this,e,r,ZZ,()=>{let n={era:e};return this.eraCache[e]||(this.eraCache[e]=[Zt.utc(-40,1,1),Zt.utc(2017,1,1)].map(i=>this.extract(i,n,"era"))),this.eraCache[e]})}extract(e,r,n){let i=this.dtFormatter(e,r),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(e={}){return new aee(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,r={}){return new uee(e,this.intl,r)}relFormatter(e={}){return new lee(this.intl,this.isEnglish(),e)}listFormatter(e={}){return n0t(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}};function GS(...t){let e=t.reduce((r,n)=>r+n.source,"");return RegExp(`^${e}$`)}function QS(...t){return e=>t.reduce(([r,n,i],s)=>{let[o,a,u]=s(e,i);return[{...r,...o},a||n,u]},[{},null,1]).slice(0,2)}function VS(t,...e){if(t==null)return[null,null];for(let[r,n]of e){let i=r.exec(t);if(i)return n(i)}return[null,null]}function D4e(...t){return(e,r)=>{let n={},i;for(i=0;i<t.length;i++)n[t[i]]=Mx(e[r+i]);return[n,null,r+i]}}var N4e=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,x0t=`(?:${N4e.source}?(?:\\[(${QZ.source})\\])?)?`,cee=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,F4e=RegExp(`${cee.source}${x0t}`),fee=RegExp(`(?:T${F4e.source})?`),d0t=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,h0t=/(\d{4})-?W(\d\d)(?:-?(\d))?/,p0t=/(\d{4})-?(\d{3})/,m0t=D4e("weekYear","weekNumber","weekDay"),g0t=D4e("year","ordinal"),y0t=/(\d{4})-(\d\d)-(\d\d)/,w4e=RegExp(`${cee.source} ?(?:${N4e.source}|(${QZ.source}))?`),E0t=RegExp(`(?: ${w4e.source})?`);function zS(t,e,r){let n=t[e];return At(n)?r:Mx(n)}function A0t(t,e){return[{year:zS(t,e),month:zS(t,e+1,1),day:zS(t,e+2,1)},null,e+3]}function WS(t,e){return[{hours:zS(t,e,0),minutes:zS(t,e+1,0),seconds:zS(t,e+2,0),milliseconds:LC(t[e+3])},null,e+4]}function BC(t,e){let r=!t[e]&&!t[e+1],n=fg(t[e+1],t[e+2]),i=r?null:Ii.instance(n);return[{},i,e+3]}function qC(t,e){let r=t[e]?Bs.create(t[e]):null;return[{},r,e+1]}var S0t=RegExp(`^T?${cee.source}$`),v0t=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function _0t(t){let[e,r,n,i,s,o,a,u,l]=t,c=e[0]==="-",f=u&&u[0]==="-",x=(d,h=!1)=>d!==void 0&&(h||d&&c)?-d:d;return[{years:x(Up(r)),months:x(Up(n)),weeks:x(Up(i)),days:x(Up(s)),hours:x(Up(o)),minutes:x(Up(a)),seconds:x(Up(u),u==="-0"),milliseconds:x(LC(l),f)}]}var b0t={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function xee(t,e,r,n,i,s,o){let a={year:e.length===2?MC(Mx(e)):Mx(e),month:VZ.indexOf(r)+1,day:Mx(n),hour:Mx(i),minute:Mx(s)};return o&&(a.second=Mx(o)),t&&(a.weekday=t.length>3?YZ.indexOf(t)+1:KZ.indexOf(t)+1),a}var T0t=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function C0t(t){let[,e,r,n,i,s,o,a,u,l,c,f]=t,x=xee(e,i,n,r,s,o,a),d;return u?d=b0t[u]:l?d=0:d=fg(c,f),[x,new Ii(d)]}function R0t(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var O0t=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,D0t=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,N0t=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function O4e(t){let[,e,r,n,i,s,o,a]=t;return[xee(e,i,n,r,s,o,a),Ii.utcInstance]}function F0t(t){let[,e,r,n,i,s,o,a]=t;return[xee(e,a,r,n,i,s,o),Ii.utcInstance]}var w0t=GS(d0t,fee),L0t=GS(h0t,fee),I0t=GS(p0t,fee),M0t=GS(F4e),L4e=QS(A0t,WS,BC,qC),P0t=QS(m0t,WS,BC,qC),k0t=QS(g0t,WS,BC,qC),B0t=QS(WS,BC,qC);function I4e(t){return VS(t,[w0t,L4e],[L0t,P0t],[I0t,k0t],[M0t,B0t])}function M4e(t){return VS(R0t(t),[T0t,C0t])}function P4e(t){return VS(t,[O0t,O4e],[D0t,O4e],[N0t,F0t])}function k4e(t){return VS(t,[v0t,_0t])}var q0t=QS(WS);function B4e(t){return VS(t,[S0t,q0t])}var U0t=GS(y0t,E0t),$0t=GS(w4e),j0t=QS(WS,BC,qC);function q4e(t){return VS(t,[U0t,L4e],[$0t,j0t])}var H0t="Invalid Duration",U4e={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},z0t={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...U4e},Yu=146097/400,YS=146097/4800,G0t={years:{quarters:4,months:12,weeks:Yu/7,days:Yu,hours:Yu*24,minutes:Yu*24*60,seconds:Yu*24*60*60,milliseconds:Yu*24*60*60*1e3},quarters:{months:3,weeks:Yu/28,days:Yu/4,hours:Yu*24/4,minutes:Yu*24*60/4,seconds:Yu*24*60*60/4,milliseconds:Yu*24*60*60*1e3/4},months:{weeks:YS/7,days:YS,hours:YS*24,minutes:YS*24*60,seconds:YS*24*60*60,milliseconds:YS*24*60*60*1e3},...U4e},dg=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Q0t=dg.slice(0).reverse();function xg(t,e,r=!1){let n={values:r?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy};return new Jr(n)}function V0t(t){return t<0?Math.floor(t):Math.ceil(t)}function $4e(t,e,r,n,i){let s=t[i][r],o=e[r]/s,a=Math.sign(o)===Math.sign(n[i]),u=!a&&n[i]!==0&&Math.abs(o)<=1?V0t(o):Math.trunc(o);n[i]+=u,e[r]-=u*s}function W0t(t,e){Q0t.reduce((r,n)=>At(e[n])?r:(r&&$4e(t,e,r,e,n),n),null)}var Jr=class t{constructor(e){let r=e.conversionAccuracy==="longterm"||!1;this.values=e.values,this.loc=e.loc||Dr.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r?G0t:z0t,this.isLuxonDuration=!0}static fromMillis(e,r){return t.fromObject({milliseconds:e},r)}static fromObject(e,r={}){if(e==null||typeof e!="object")throw new wi(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new t({values:$S(e,t.normalizeUnit),loc:Dr.fromObject(r),conversionAccuracy:r.conversionAccuracy})}static fromDurationLike(e){if(Yc(e))return t.fromMillis(e);if(t.isDuration(e))return e;if(typeof e=="object")return t.fromObject(e);throw new wi(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,r){let[n]=k4e(e);return n?t.fromObject(n,r):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,r){let[n]=B4e(e);return n?t.fromObject(n,r):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,r=null){if(!e)throw new wi("need to specify a reason the Duration is invalid");let n=e instanceof Li?e:new Li(e,r);if(lr.throwOnInvalid)throw new BP(n);return new t({invalid:n})}static normalizeUnit(e){let r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!r)throw new PS(e);return r}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,r={}){let n={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?yo.create(this.loc,n).formatDurationFromString(this,e):H0t}toHuman(e={}){let r=dg.map(n=>{let i=this.values[n];return At(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(i)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=BS(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let r=this.toMillis();if(r<0||r>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};let n=this.shiftTo("hours","minutes","seconds","milliseconds"),i=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||n.seconds!==0||n.milliseconds!==0)&&(i+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||n.milliseconds!==0)&&(i+=".SSS"));let s=n.toFormat(i);return e.includePrefix&&(s="T"+s),s}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let r=t.fromDurationLike(e),n={};for(let i of dg)(qp(r.values,i)||qp(this.values,i))&&(n[i]=r.get(i)+this.get(i));return xg(this,{values:n},!0)}minus(e){if(!this.isValid)return this;let r=t.fromDurationLike(e);return this.plus(r.negate())}mapUnits(e){if(!this.isValid)return this;let r={};for(let n of Object.keys(this.values))r[n]=GZ(e(this.values[n],n));return xg(this,{values:r},!0)}get(e){return this[t.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let r={...this.values,...$S(e,t.normalizeUnit)};return xg(this,{values:r})}reconfigure({locale:e,numberingSystem:r,conversionAccuracy:n}={}){let i=this.loc.clone({locale:e,numberingSystem:r}),s={loc:i};return n&&(s.conversionAccuracy=n),xg(this,s)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return W0t(this.matrix,e),xg(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>t.normalizeUnit(o));let r={},n={},i=this.toObject(),s;for(let o of dg)if(e.indexOf(o)>=0){s=o;let a=0;for(let l in n)a+=this.matrix[l][o]*n[l],n[l]=0;Yc(i[o])&&(a+=i[o]);let u=Math.trunc(a);r[o]=u,n[o]=(a*1e3-u*1e3)/1e3;for(let l in i)dg.indexOf(l)>dg.indexOf(o)&&$4e(this.matrix,i,l,r,o)}else Yc(i[o])&&(n[o]=i[o]);for(let o in n)n[o]!==0&&(r[s]+=o===s?n[o]:n[o]/this.matrix[s][o]);return xg(this,{values:r},!0).normalize()}negate(){if(!this.isValid)return this;let e={};for(let r of Object.keys(this.values))e[r]=this.values[r]===0?0:-this.values[r];return xg(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function r(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(let n of dg)if(!r(this.values[n],e.values[n]))return!1;return!0}};var UC="Invalid Interval";function Y0t(t,e){return!t||!t.isValid?Px.invalid("missing or invalid start"):!e||!e.isValid?Px.invalid("missing or invalid end"):e<t?Px.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}var Px=class t{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,r=null){if(!e)throw new wi("need to specify a reason the Interval is invalid");let n=e instanceof Li?e:new Li(e,r);if(lr.throwOnInvalid)throw new kP(n);return new t({invalid:n})}static fromDateTimes(e,r){let n=KS(e),i=KS(r),s=Y0t(n,i);return s??new t({start:n,end:i})}static after(e,r){let n=Jr.fromDurationLike(r),i=KS(e);return t.fromDateTimes(i,i.plus(n))}static before(e,r){let n=Jr.fromDurationLike(r),i=KS(e);return t.fromDateTimes(i.minus(n),i)}static fromISO(e,r){let[n,i]=(e||"").split("/",2);if(n&&i){let s,o;try{s=Zt.fromISO(n,r),o=s.isValid}catch{o=!1}let a,u;try{a=Zt.fromISO(i,r),u=a.isValid}catch{u=!1}if(o&&u)return t.fromDateTimes(s,a);if(o){let l=Jr.fromISO(i,r);if(l.isValid)return t.after(s,l)}else if(u){let l=Jr.fromISO(n,r);if(l.isValid)return t.before(a,l)}}return t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;let r=this.start.startOf(e),n=this.end.startOf(e);return Math.floor(n.diff(r,e).get(e))+1}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:r}={}){return this.isValid?t.fromDateTimes(e||this.s,r||this.e):this}splitAt(...e){if(!this.isValid)return[];let r=e.map(KS).filter(o=>this.contains(o)).sort(),n=[],{s:i}=this,s=0;for(;i<this.e;){let o=r[s]||this.e,a=+o>+this.e?this.e:o;n.push(t.fromDateTimes(i,a)),i=a,s+=1}return n}splitBy(e){let r=Jr.fromDurationLike(e);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:n}=this,i=1,s,o=[];for(;n<this.e;){let a=this.start.plus(r.mapUnits(u=>u*i));s=+a>+this.e?this.e:a,o.push(t.fromDateTimes(n,s)),n=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let r=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return r>=n?null:t.fromDateTimes(r,n)}union(e){if(!this.isValid)return this;let r=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return t.fromDateTimes(r,n)}static merge(e){let[r,n]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return n&&r.push(n),r}static xor(e){let r=null,n=0,i=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((u,l)=>u.time-l.time);for(let u of a)n+=u.type==="s"?1:-1,n===1?r=u.time:(r&&+r!=+u.time&&i.push(t.fromDateTimes(r,u.time)),r=null);return t.merge(i)}difference(...e){return t.xor([this].concat(e)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:UC}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:UC}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:UC}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:UC}toFormat(e,{separator:r=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${r}${this.e.toFormat(e)}`:UC}toDuration(e,r){return this.isValid?this.e.diff(this.s,e,r):Jr.invalid(this.invalidReason)}mapEndpoints(e){return t.fromDateTimes(e(this.s),e(this.e))}};var kx=class{static hasDST(e=lr.defaultZone){let r=Zt.now().setZone(e).set({month:12});return!e.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(e){return Bs.isValidZone(e)}static normalizeZone(e){return n0(e,lr.defaultZone)}static months(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Dr.create(r,n,s)).months(e)}static monthsFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Dr.create(r,n,s)).months(e,!0)}static weekdays(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||Dr.create(r,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||Dr.create(r,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Dr.create(e).meridiems()}static eras(e="short",{locale:r=null}={}){return Dr.create(r,null,"gregory").eras(e)}static features(){return{relative:qP()}}};function j4e(t,e){let r=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=r(e)-r(t);return Math.floor(Jr.fromMillis(n).as("days"))}function K0t(t,e,r){let n=[["years",(a,u)=>u.year-a.year],["quarters",(a,u)=>u.quarter-a.quarter],["months",(a,u)=>u.month-a.month+(u.year-a.year)*12],["weeks",(a,u)=>{let l=j4e(a,u);return(l-l%7)/7}],["days",j4e]],i={},s,o;for(let[a,u]of n)if(r.indexOf(a)>=0){s=a;let l=u(t,e);o=t.plus({[a]:l}),o>e?(t=t.plus({[a]:l-1}),l-=1):t=o,i[a]=l}return[t,i,o,s]}function H4e(t,e,r,n){let[i,s,o,a]=K0t(t,e,r),u=e-i,l=r.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);l.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+u/(o-i)));let c=Jr.fromObject(s,n);return l.length>0?Jr.fromMillis(u,n).shiftTo(...l).plus(c):c}var dee={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},z4e={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},X0t=dee.hanidec.replace(/[\[|\]]/g,"").split("");function G4e(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(t[r].search(dee.hanidec)!==-1)e+=X0t.indexOf(t[r]);else for(let i in z4e){let[s,o]=z4e[i];n>=s&&n<=o&&(e+=n-s)}}return parseInt(e,10)}else return e}function Ku({numberingSystem:t},e=""){return new RegExp(`${dee[t||"latn"]}${e}`)}var J0t="missing Intl.DateTimeFormat.formatToParts support";function Yt(t,e=r=>r){return{regex:t,deser:([r])=>e(G4e(r))}}var Z0t="\xA0",W4e=`[ ${Z0t}]`,Y4e=new RegExp(W4e,"g");function ect(t){return t.replace(/\./g,"\\.?").replace(Y4e,W4e)}function Q4e(t){return t.replace(/\./g,"").replace(Y4e," ").toLowerCase()}function i0(t,e){return t===null?null:{regex:RegExp(t.map(ect).join("|")),deser:([r])=>t.findIndex(n=>Q4e(r)===Q4e(n))+e}}function V4e(t,e){return{regex:t,deser:([,r,n])=>fg(r,n),groups:e}}function hee(t){return{regex:t,deser:([e])=>e}}function tct(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function rct(t,e){let r=Ku(e),n=Ku(e,"{2}"),i=Ku(e,"{3}"),s=Ku(e,"{4}"),o=Ku(e,"{6}"),a=Ku(e,"{1,2}"),u=Ku(e,"{1,3}"),l=Ku(e,"{1,6}"),c=Ku(e,"{1,9}"),f=Ku(e,"{2,4}"),x=Ku(e,"{4,6}"),d=m=>({regex:RegExp(tct(m.val)),deser:([g])=>g,literal:!0}),p=(m=>{if(t.literal)return d(m);switch(m.val){case"G":return i0(e.eras("short",!1),0);case"GG":return i0(e.eras("long",!1),0);case"y":return Yt(l);case"yy":return Yt(f,MC);case"yyyy":return Yt(s);case"yyyyy":return Yt(x);case"yyyyyy":return Yt(o);case"M":return Yt(a);case"MM":return Yt(n);case"MMM":return i0(e.months("short",!0,!1),1);case"MMMM":return i0(e.months("long",!0,!1),1);case"L":return Yt(a);case"LL":return Yt(n);case"LLL":return i0(e.months("short",!1,!1),1);case"LLLL":return i0(e.months("long",!1,!1),1);case"d":return Yt(a);case"dd":return Yt(n);case"o":return Yt(u);case"ooo":return Yt(i);case"HH":return Yt(n);case"H":return Yt(a);case"hh":return Yt(n);case"h":return Yt(a);case"mm":return Yt(n);case"m":return Yt(a);case"q":return Yt(a);case"qq":return Yt(n);case"s":return Yt(a);case"ss":return Yt(n);case"S":return Yt(u);case"SSS":return Yt(i);case"u":return hee(c);case"uu":return hee(a);case"uuu":return Yt(r);case"a":return i0(e.meridiems(),0);case"kkkk":return Yt(s);case"kk":return Yt(f,MC);case"W":return Yt(a);case"WW":return Yt(n);case"E":case"c":return Yt(r);case"EEE":return i0(e.weekdays("short",!1,!1),1);case"EEEE":return i0(e.weekdays("long",!1,!1),1);case"ccc":return i0(e.weekdays("short",!0,!1),1);case"cccc":return i0(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return V4e(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return V4e(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return hee(/[a-z_+-/]{1,256}?/i);default:return d(m)}})(t)||{invalidReason:J0t};return p.token=t,p}var nct={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function ict(t,e,r){let{type:n,value:i}=t;if(n==="literal")return{literal:!0,val:i};let s=r[n],o=nct[n];if(typeof o=="object"&&(o=o[s]),o)return{literal:!1,val:o}}function sct(t){return[`^${t.map(r=>r.regex).reduce((r,n)=>`${r}(${n.source})`,"")}$`,t]}function oct(t,e,r){let n=t.match(e);if(n){let i={},s=1;for(let o in r)if(qp(r,o)){let a=r[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(n.slice(s,s+u))),s+=u}return[n,i]}else return[n,{}]}function act(t){let e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},r=null,n;return At(t.z)||(r=Bs.create(t.z)),At(t.Z)||(r||(r=new Ii(t.Z)),n=t.Z),At(t.q)||(t.M=(t.q-1)*3+1),At(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),At(t.u)||(t.S=LC(t.u)),[Object.keys(t).reduce((s,o)=>{let a=e(o);return a&&(s[a]=t[o]),s},{}),r,n]}var pee=null;function uct(){return pee||(pee=Zt.fromMillis(1555555555555)),pee}function lct(t,e){if(t.literal)return t;let r=yo.macroTokenToFormatOpts(t.val);if(!r)return t;let s=yo.create(e,r).formatDateTimeParts(uct()).map(o=>ict(o,e,r));return s.includes(void 0)?t:s}function cct(t,e){return Array.prototype.concat(...t.map(r=>lct(r,e)))}function mee(t,e,r){let n=cct(yo.parseFormat(r),t),i=n.map(o=>rct(o,t)),s=i.find(o=>o.invalidReason);if(s)return{input:e,tokens:n,invalidReason:s.invalidReason};{let[o,a]=sct(i),u=RegExp(o,"i"),[l,c]=oct(e,u,a),[f,x,d]=c?act(c):[null,null,void 0];if(qp(c,"a")&&qp(c,"H"))throw new Ix("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:n,regex:u,rawMatches:l,matches:c,result:f,zone:x,specificOffset:d}}}function K4e(t,e,r){let{result:n,zone:i,specificOffset:s,invalidReason:o}=mee(t,e,r);return[n,i,s,o]}var X4e=[0,31,59,90,120,151,181,212,243,273,304,334],J4e=[0,31,60,91,121,152,182,213,244,274,305,335];function Xu(t,e){return new Li("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function Z4e(t,e,r){let n=new Date(Date.UTC(t,e-1,r));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);let i=n.getUTCDay();return i===0?7:i}function eve(t,e,r){return r+(lg(t)?J4e:X4e)[e-1]}function tve(t,e){let r=lg(t)?J4e:X4e,n=r.findIndex(s=>s<e),i=e-r[n];return{month:n+1,day:i}}function zP(t){let{year:e,month:r,day:n}=t,i=eve(e,r,n),s=Z4e(e,r,n),o=Math.floor((i-s+10)/7),a;return o<1?(a=e-1,o=US(a)):o>US(e)?(a=e+1,o=1):a=e,{weekYear:a,weekNumber:o,weekday:s,...PC(t)}}function gee(t){let{weekYear:e,weekNumber:r,weekday:n}=t,i=Z4e(e,1,4),s=cg(e),o=r*7+n-i-3,a;o<1?(a=e-1,o+=cg(a)):o>s?(a=e+1,o-=cg(e)):a=e;let{month:u,day:l}=tve(a,o);return{year:a,month:u,day:l,...PC(t)}}function GP(t){let{year:e,month:r,day:n}=t,i=eve(e,r,n);return{year:e,ordinal:i,...PC(t)}}function yee(t){let{year:e,ordinal:r}=t,{month:n,day:i}=tve(e,r);return{year:e,month:n,day:i,...PC(t)}}function rve(t){let e=wC(t.weekYear),r=Kc(t.weekNumber,1,US(t.weekYear)),n=Kc(t.weekday,1,7);return e?r?n?!1:Xu("weekday",t.weekday):Xu("week",t.week):Xu("weekYear",t.weekYear)}function nve(t){let e=wC(t.year),r=Kc(t.ordinal,1,cg(t.year));return e?r?!1:Xu("ordinal",t.ordinal):Xu("year",t.year)}function Eee(t){let e=wC(t.year),r=Kc(t.month,1,12),n=Kc(t.day,1,qS(t.year,t.month));return e?r?n?!1:Xu("day",t.day):Xu("month",t.month):Xu("year",t.year)}function Aee(t){let{hour:e,minute:r,second:n,millisecond:i}=t,s=Kc(e,0,23)||e===24&&r===0&&n===0&&i===0,o=Kc(r,0,59),a=Kc(n,0,59),u=Kc(i,0,999);return s?o?a?u?!1:Xu("millisecond",i):Xu("second",n):Xu("minute",r):Xu("hour",e)}var See="Invalid DateTime",ive=864e13;function QP(t){return new Li("unsupported zone",`the zone "${t.name}" is not supported`)}function vee(t){return t.weekData===null&&(t.weekData=zP(t.c)),t.weekData}function $C(t,e){let r={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Zt({...r,...e,old:r})}function xve(t,e,r){let n=t-e*60*1e3,i=r.offset(n);if(e===i)return[n,e];n-=(i-e)*60*1e3;let s=r.offset(n);return i===s?[n,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function sve(t,e){t+=e*60*1e3;let r=new Date(t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function WP(t,e,r){return xve(IC(t),e,r)}function ove(t,e){let r=t.o,n=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:n,month:i,day:Math.min(t.c.day,qS(n,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Jr.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=IC(s),[u,l]=xve(a,r,t.zone);return o!==0&&(u+=o,l=t.zone.offset(u)),{ts:u,o:l}}function jC(t,e,r,n,i,s){let{setZone:o,zone:a}=r;if(t&&Object.keys(t).length!==0){let u=e||a,l=Zt.fromObject(t,{...r,zone:u,specificOffset:s});return o?l:l.setZone(a)}else return Zt.invalid(new Li("unparsable",`the input "${i}" can't be parsed as ${n}`))}function VP(t,e,r=!0){return t.isValid?yo.create(Dr.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(t,e):null}function _ee(t,e){let r=t.c.year>9999||t.c.year<0,n="";return r&&t.c.year>=0&&(n+="+"),n+=Xr(t.c.year,r?6:4),e?(n+="-",n+=Xr(t.c.month),n+="-",n+=Xr(t.c.day)):(n+=Xr(t.c.month),n+=Xr(t.c.day)),n}function ave(t,e,r,n,i,s){let o=Xr(t.c.hour);return e?(o+=":",o+=Xr(t.c.minute),(t.c.second!==0||!r)&&(o+=":")):o+=Xr(t.c.minute),(t.c.second!==0||!r)&&(o+=Xr(t.c.second),(t.c.millisecond!==0||!n)&&(o+=".",o+=Xr(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Xr(Math.trunc(-t.o/60)),o+=":",o+=Xr(Math.trunc(-t.o%60))):(o+="+",o+=Xr(Math.trunc(t.o/60)),o+=":",o+=Xr(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}var dve={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},fct={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},xct={ordinal:1,hour:0,minute:0,second:0,millisecond:0},hve=["year","month","day","hour","minute","second","millisecond"],dct=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],hct=["year","ordinal","hour","minute","second","millisecond"];function uve(t){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new PS(t);return e}function lve(t,e){let r=n0(e.zone,lr.defaultZone),n=Dr.fromObject(e),i=lr.now(),s,o;if(At(t.year))s=i;else{for(let l of hve)At(t[l])&&(t[l]=dve[l]);let a=Eee(t)||Aee(t);if(a)return Zt.invalid(a);let u=r.offset(i);[s,o]=WP(t,u,r)}return new Zt({ts:s,zone:r,loc:n,o})}function cve(t,e,r){let n=At(r.round)?!0:r.round,i=(o,a)=>(o=BS(o,n||r.calendary?0:2,!0),e.loc.clone(r).relFormatter(r).format(o,a)),s=o=>r.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(r.unit)return i(s(r.unit),r.unit);for(let o of r.units){let a=s(o);if(Math.abs(a)>=1)return i(a,o)}return i(t>e?-0:0,r.units[r.units.length-1])}function fve(t){let e={},r;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],r=Array.from(t).slice(0,t.length-1)):r=Array.from(t),[e,r]}var Zt=class t{constructor(e){let r=e.zone||lr.defaultZone,n=e.invalid||(Number.isNaN(e.ts)?new Li("invalid input"):null)||(r.isValid?null:QP(r));this.ts=At(e.ts)?lr.now():e.ts;let i=null,s=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(r))[i,s]=[e.old.c,e.old.o];else{let a=r.offset(this.ts);i=sve(this.ts,a),n=Number.isNaN(i.year)?new Li("invalid input"):null,i=n?null:i,s=n?null:a}this._zone=r,this.loc=e.loc||Dr.create(),this.invalid=n,this.weekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new t({})}static local(){let[e,r]=fve(arguments),[n,i,s,o,a,u,l]=r;return lve({year:n,month:i,day:s,hour:o,minute:a,second:u,millisecond:l},e)}static utc(){let[e,r]=fve(arguments),[n,i,s,o,a,u,l]=r;return e.zone=Ii.utcInstance,lve({year:n,month:i,day:s,hour:o,minute:a,second:u,millisecond:l},e)}static fromJSDate(e,r={}){let n=x4e(e)?e.valueOf():NaN;if(Number.isNaN(n))return t.invalid("invalid input");let i=n0(r.zone,lr.defaultZone);return i.isValid?new t({ts:n,zone:i,loc:Dr.fromObject(r)}):t.invalid(QP(i))}static fromMillis(e,r={}){if(Yc(e))return e<-ive||e>ive?t.invalid("Timestamp out of range"):new t({ts:e,zone:n0(r.zone,lr.defaultZone),loc:Dr.fromObject(r)});throw new wi(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,r={}){if(Yc(e))return new t({ts:e*1e3,zone:n0(r.zone,lr.defaultZone),loc:Dr.fromObject(r)});throw new wi("fromSeconds requires a numerical input")}static fromObject(e,r={}){e=e||{};let n=n0(r.zone,lr.defaultZone);if(!n.isValid)return t.invalid(QP(n));let i=lr.now(),s=At(r.specificOffset)?n.offset(i):r.specificOffset,o=$S(e,uve),a=!At(o.ordinal),u=!At(o.year),l=!At(o.month)||!At(o.day),c=u||l,f=o.weekYear||o.weekNumber,x=Dr.fromObject(r);if((c||a)&&f)throw new Ix("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&a)throw new Ix("Can't mix ordinal dates with month/day");let d=f||o.weekday&&!c,h,p,m=sve(i,s);d?(h=dct,p=fct,m=zP(m)):a?(h=hct,p=xct,m=GP(m)):(h=hve,p=dve);let g=!1;for(let R of h){let O=o[R];At(O)?g?o[R]=p[R]:o[R]=m[R]:g=!0}let y=d?rve(o):a?nve(o):Eee(o),A=y||Aee(o);if(A)return t.invalid(A);let S=d?gee(o):a?yee(o):o,[T,_]=WP(S,s,n),b=new t({ts:T,zone:n,o:_,loc:x});return o.weekday&&c&&e.weekday!==b.weekday?t.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${b.toISO()}`):b}static fromISO(e,r={}){let[n,i]=I4e(e);return jC(n,i,r,"ISO 8601",e)}static fromRFC2822(e,r={}){let[n,i]=M4e(e);return jC(n,i,r,"RFC 2822",e)}static fromHTTP(e,r={}){let[n,i]=P4e(e);return jC(n,i,r,"HTTP",r)}static fromFormat(e,r,n={}){if(At(e)||At(r))throw new wi("fromFormat requires an input string and a format");let{locale:i=null,numberingSystem:s=null}=n,o=Dr.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,u,l,c]=K4e(o,e,r);return c?t.invalid(c):jC(a,u,n,`format ${r}`,e,l)}static fromString(e,r,n={}){return t.fromFormat(e,r,n)}static fromSQL(e,r={}){let[n,i]=q4e(e);return jC(n,i,r,"SQL",e)}static invalid(e,r=null){if(!e)throw new wi("need to specify a reason the DateTime is invalid");let n=e instanceof Li?e:new Li(e,r);if(lr.throwOnInvalid)throw new PP(n);return new t({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?vee(this).weekYear:NaN}get weekNumber(){return this.isValid?vee(this).weekNumber:NaN}get weekday(){return this.isValid?vee(this).weekday:NaN}get ordinal(){return this.isValid?GP(this.c).ordinal:NaN}get monthShort(){return this.isValid?kx.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?kx.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?kx.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?kx.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return lg(this.year)}get daysInMonth(){return qS(this.year,this.month)}get daysInYear(){return this.isValid?cg(this.year):NaN}get weeksInWeekYear(){return this.isValid?US(this.weekYear):NaN}resolvedLocaleOptions(e={}){let{locale:r,numberingSystem:n,calendar:i}=yo.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:r,numberingSystem:n,outputCalendar:i}}toUTC(e=0,r={}){return this.setZone(Ii.instance(e),r)}toLocal(){return this.setZone(lr.defaultZone)}setZone(e,{keepLocalTime:r=!1,keepCalendarTime:n=!1}={}){if(e=n0(e,lr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(r||n){let s=e.offset(this.ts),o=this.toObject();[i]=WP(o,s,e)}return $C(this,{ts:i,zone:e})}else return t.invalid(QP(e))}reconfigure({locale:e,numberingSystem:r,outputCalendar:n}={}){let i=this.loc.clone({locale:e,numberingSystem:r,outputCalendar:n});return $C(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let r=$S(e,uve),n=!At(r.weekYear)||!At(r.weekNumber)||!At(r.weekday),i=!At(r.ordinal),s=!At(r.year),o=!At(r.month)||!At(r.day),a=s||o,u=r.weekYear||r.weekNumber;if((a||i)&&u)throw new Ix("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&i)throw new Ix("Can't mix ordinal dates with month/day");let l;n?l=gee({...zP(this.c),...r}):At(r.ordinal)?(l={...this.toObject(),...r},At(r.day)&&(l.day=Math.min(qS(l.year,l.month),l.day))):l=yee({...GP(this.c),...r});let[c,f]=WP(l,this.o,this.zone);return $C(this,{ts:c,o:f})}plus(e){if(!this.isValid)return this;let r=Jr.fromDurationLike(e);return $C(this,ove(this,r))}minus(e){if(!this.isValid)return this;let r=Jr.fromDurationLike(e).negate();return $C(this,ove(this,r))}startOf(e){if(!this.isValid)return this;let r={},n=Jr.normalizeUnit(e);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break;case"milliseconds":break}if(n==="weeks"&&(r.weekday=1),n==="quarters"){let i=Math.ceil(this.month/3);r.month=(i-1)*3+1}return this.set(r)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,r={}){return this.isValid?yo.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,e):See}toLocaleString(e=kS,r={}){return this.isValid?yo.create(this.loc.clone(r),e).formatDateTime(this):See}toLocaleParts(e={}){return this.isValid?yo.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:r=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;let o=e==="extended",a=_ee(this,o);return a+="T",a+=ave(this,o,r,n,i,s),a}toISODate({format:e="extended"}={}){return this.isValid?_ee(this,e==="extended"):null}toISOWeekDate(){return VP(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:r=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+ave(this,o==="extended",r,e,n,s):null}toRFC2822(){return VP(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return VP(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?_ee(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:r=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(r||e)&&(n&&(i+=" "),r?i+="z":e&&(i+="ZZ")),VP(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():See}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let r={...this.c};return e.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,r="milliseconds",n={}){if(!this.isValid||!e.isValid)return Jr.invalid("created by diffing an invalid DateTime");let i={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=d4e(r).map(Jr.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,u=o?e:this,l=H4e(a,u,s,i);return o?l.negate():l}diffNow(e="milliseconds",r={}){return this.diff(t.now(),e,r)}until(e){return this.isValid?Px.fromDateTimes(this,e):this}hasSame(e,r){if(!this.isValid)return!1;let n=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(r)<=n&&n<=i.endOf(r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let r=e.base||t.fromObject({},{zone:this.zone}),n=e.padding?this<r?-e.padding:e.padding:0,i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),cve(r,this.plus(n),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?cve(e.base||t.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(t.isDateTime))throw new wi("min requires all arguments be DateTimes");return zZ(e,r=>r.valueOf(),Math.min)}static max(...e){if(!e.every(t.isDateTime))throw new wi("max requires all arguments be DateTimes");return zZ(e,r=>r.valueOf(),Math.max)}static fromFormatExplain(e,r,n={}){let{locale:i=null,numberingSystem:s=null}=n,o=Dr.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return mee(o,e,r)}static fromStringExplain(e,r,n={}){return t.fromFormatExplain(e,r,n)}static get DATE_SHORT(){return kS}static get DATE_MED(){return dC}static get DATE_MED_WITH_WEEKDAY(){return $Z}static get DATE_FULL(){return hC}static get DATE_HUGE(){return pC}static get TIME_SIMPLE(){return mC}static get TIME_WITH_SECONDS(){return gC}static get TIME_WITH_SHORT_OFFSET(){return yC}static get TIME_WITH_LONG_OFFSET(){return EC}static get TIME_24_SIMPLE(){return AC}static get TIME_24_WITH_SECONDS(){return SC}static get TIME_24_WITH_SHORT_OFFSET(){return vC}static get TIME_24_WITH_LONG_OFFSET(){return _C}static get DATETIME_SHORT(){return bC}static get DATETIME_SHORT_WITH_SECONDS(){return TC}static get DATETIME_MED(){return CC}static get DATETIME_MED_WITH_SECONDS(){return RC}static get DATETIME_MED_WITH_WEEKDAY(){return jZ}static get DATETIME_FULL(){return OC}static get DATETIME_FULL_WITH_SECONDS(){return DC}static get DATETIME_HUGE(){return NC}static get DATETIME_HUGE_WITH_SECONDS(){return FC}};function KS(t){if(Zt.isDateTime(t))return t;if(t&&t.valueOf&&Yc(t.valueOf()))return Zt.fromJSDate(t);if(t&&typeof t=="object")return Zt.fromObject(t);throw new wi(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function cr(t,e,r=!1){if(t!==void 0)switch(t){case"ordinal":return{range:["#C2D5EE","#1A73E8"]};case"temporal":case"quantitative":return e?r?{range:["#6BA4EE","#EEA361"]}:{range:["#1A73E8","#E8710A"]}:{range:["#C2D5EE","#1A73E8"]};case"nominal":return r?{range:["#6BA4EE","#66CEDC","#EC72B8","#EEA361","#F9C85B","#AACD85","#B87CED","#ACB0B3"]}:{range:["#1A73E8","#12B5CB","#E52592","#E8710A","#F9AB00","#7CB342","#9334E6","#80868B"]}}}function Nr(t,e){return t.toString().padStart(e,"0")}function jp(t,e,r){e||=ii.TimestampTimeframe.Second;let n=!1;switch(e){case ii.TimestampTimeframe.Hour:case ii.TimestampTimeframe.Minute:case ii.TimestampTimeframe.Second:n=!0;break}let i=Zt.fromJSDate(t,{zone:n&&r?r:"UTC"});switch(e){case ii.TimestampTimeframe.Year:case ii.DateTimeframe.Year:return`${Nr(i.year,4)}`;case ii.TimestampTimeframe.Quarter:case ii.DateTimeframe.Quarter:{let s=Nr(i.year,4),o=Math.floor(i.month/3)+1;return`${s}-Q${o}`}case ii.TimestampTimeframe.Month:case ii.DateTimeframe.Month:{let s=Nr(i.year,2),o=Nr(i.month,2);return`${s}-${o}`}case ii.TimestampTimeframe.Week:case ii.DateTimeframe.Week:{let s=Nr(i.year,2),o=Nr(i.month,2),a=Nr(i.day,2);return`WK${s}-${o}-${a}`}case ii.DateTimeframe.Day:case ii.TimestampTimeframe.Day:{let s=Nr(i.year,2),o=Nr(i.month,2),a=Nr(i.day,2);return`${s}-${o}-${a}`}case ii.TimestampTimeframe.Hour:{let s=Nr(i.year,2),o=Nr(i.month,2),a=Nr(i.day,2),u=Nr(i.hour,2);return`${s}-${o}-${a} ${u}:00 for 1 hour`}case ii.TimestampTimeframe.Minute:{let s=Nr(i.year,2),o=Nr(i.month,2),a=Nr(i.day,2),u=Nr(i.hour,2),l=Nr(i.minute,2);return`${s}-${o}-${a} ${u}:${l}`}case ii.TimestampTimeframe.Second:{let s=Nr(i.year,2),o=Nr(i.month,2),a=Nr(i.day,2),u=Nr(i.hour,2),l=Nr(i.minute,2),c=Nr(i.second,2);return`${s}-${o}-${a} ${u}:${l}:${c}`}default:throw new Error("Unknown timeframe.")}}function mve(t,e){let r=Zt.fromJSDate(t,{zone:e??"UTC"});return new Date(r.year,r.month-1,r.day,r.hour,r.minute,r.second,r.millisecond)}var bee,pct=100;async function hg(){let t=Date.now();if(!(bee&&t<bee+pct))return bee=t,new Promise(e=>{setTimeout(e,0)})}function Mi(t,e){let r=t.createElement("span");return r.classList.add("error"),r.appendChild(t.createTextNode(typeof e=="string"?e:e.message)),r}function Xc(t){let e=t.createElement("span");return e.appendChild(t.createTextNode("\u2205")),e.classList.add("value-null"),e}function YP(t){let e=t.createElement("div");return e.classList.add("drill-icon"),e.innerHTML=`
  <style>
    .drill-icon:hover .copy-circle {
      fill: #eef7f9;
    }

    .drill-icon:active .copy-circle {
      fill: #cfe9f0;
    }

    .drill-icon:hover .copy-icon,
    .drill-icon:active .copy-icon {
      fill: #53b2c8;
    }
  </style>
  <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="12" cy="12" r="12" fill="none" class="copy-circle" />
        <svg
          x="6"
          y="6"
          width="12"
          height="14"
          viewBox="0 0 12 14"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M4 10.6667C3.63333 10.6667 3.31944 10.5361 3.05833 10.275C2.79722 10.0139 2.66667 9.7 2.66667 9.33333V1.33333C2.66667 0.966667 2.79722 0.652778 3.05833 0.391667C3.31944 0.130556 3.63333 0 4 0H10C10.3667 0 10.6806 0.130556 10.9417 0.391667C11.2028 0.652778 11.3333 0.966667 11.3333 1.33333V9.33333C11.3333 9.7 11.2028 10.0139 10.9417 10.275C10.6806 10.5361 10.3667 10.6667 10 10.6667H4ZM4 9.33333H10V1.33333H4V9.33333ZM1.33333 13.3333C0.966667 13.3333 0.652778 13.2028 0.391667 12.9417C0.130556 12.6806 0 12.3667 0 12V2.66667H1.33333V12H8.66667V13.3333H1.33333Z"
            fill="#E7E7E7"
            class="copy-icon"
          />
        </svg>
      </svg>`,e}function $n(t,e,r,n){let i=r?.data?.label||e.name,s=t.titleCase?(0,pve.default)(i):i;return e.isAtomicField()&&(e.isDate()||e.isTimestamp())&&n&&(s=`${s} (${n})`),s}function mct(t,e=0){let r=t;for(;e>0&&r.parentRecord;)e-=1,r=r.parentRecord;return r}function gve({tag:t,data:e}){let r=t.tag("field")?.text()?.match(/^(\^*)(.*)/);if(!r)return;let[,n,i]=r,s=n.length,o=mct(e,s);if("cell"in o)return o.cell(i)?.value}var et=class{constructor(){this.tagOptionExtractors={}}addExtractor(e,...r){for(let n in r)this.tagOptionExtractors[r[n]]=e}activates(e){return!1}isValidMatch(e){return!0}matches(e){return e.renderer===this.rendererName}parseTagParameters(e){let r={};for(let n in this.tagOptionExtractors){let i=e.tag(n);i&&this.tagOptionExtractors[n](r,i)}return r}};var KP=class{constructor(e){this.document=e}async render(e){!e.isArray()&&!e.isRecord()&&Mi(this.document,"Invalid data for chart renderer.");let r=this.document.createElement("pre");return r.appendChild(this.document.createTextNode(JSON.stringify(e.value,void 0,2))),r}},XP=class t extends et{static{this.instance=new t}create(e,r,n,i,s){return new KP(e)}get rendererName(){return"json"}};var XS=Na(Bp());function gct(t){return`'${t.replace(/(['\\])/g,"\\$1")}'`}function yct(t,e,r){let n=r===XS.TimestampTimeframe.Minute?XS.TimestampTimeframe.Second:r||XS.TimestampTimeframe.Second,i="@"+jp(e,n);return{key:t,value:i}}function Ect(t){let e=[];for(let r of t.field.filters||[])r.expressionType==="scalar"&&e.push({key:r.code,value:void 0});return e}function Act(t){let e=[],r=t.field.intrinsicFields.filter(n=>n.isAtomicField()&&n.sourceWasDimension());for(let n of r){let i=t.cell(n),s=n.isAtomicField()||n.isQueryField()?n.expression:void 0;if(s!==void 0&&s.includes(" ")&&s===n.name&&(s="`"+s+"`"),s&&!i.isArray()){if(i.isNull())e.push({key:s,value:"null"});else if(i.isString())e.push({key:s,value:gct(i.value)});else if(i.isNumber()||i.isBoolean())e.push({key:s,value:i.value.toString()});else if(i.isTimestamp()||i.isDate()){let o=i.field.timeframe;i.isDate()&&o===void 0&&(o=XS.DateTimeframe.Day),e.push(yct(s,i.value,o))}}}return e}function yve(t){return t.isRecord()?Act(t):Ect(t)}function Sct(t){let e=[],r=t;for(;r.parent;)e.push(...yve(r)),r=r.parent;e.push(...yve(r));let n=r.field.parentExplore,i=[];for(let{key:o,value:a}of e)a!==void 0?i.push(`${o} = ${a}`):i.push(o);return{formattedFilters:i.filter((o,a)=>i.find((u,l)=>u===o&&a<l)===void 0),source:n}}function JP(t){let{formattedFilters:e,source:r}=Sct(t),n=`run: ${r?.name||'"unable to compute source"'} -> `;return e.length?n+=`{ 
  where: 
    ${e.join(`,
    `)}  
} + {select: *}
`:n+="{select: *}",{drillQuery:n,drillFilters:e}}var ZP=class{constructor(e,r,n){this.document=e;this.options=r;this.tagged=n}};var Jc=class extends ZP{constructor(){super(...arguments);this.childRenderers={}}get defaultStylesForChildren(){return this.childrenStyleDefaults}static make(r,n,i,s,o){return new r(n,s,o)}};var cs=class{constructor(e){this.document=e}getText(e){return e.value===null?null:`${e.value}`}async render(e){let r=null;try{r=this.getText(e)}catch(i){return Mi(this.document,i)}if(r===null)return Xc(this.document);let n=this.document.createElement("span");return n.appendChild(this.document.createTextNode(r)),n}},ek=class t extends et{static{this.instance=new t}activates(e){return e.hasParentExplore()&&!e.isExploreField()}create(e,r,n,i,s){return new cs(e)}get rendererName(){}};function JS(t){return t.tagParse().tag.has("hidden")}var tk=class t extends Jc{constructor(){super(...arguments);this.childrenStyleDefaults={size:"medium"}}async render(r){if(!r.isArrayOrRecord())return Mi(this.document,"Invalid data for dashboard renderer.");let n=r.field.intrinsicFields,i=n.filter(a=>a.isAtomicField()&&a.sourceWasDimension()),s=n.filter(a=>!a.isAtomicField()||a.sourceWasMeasureLike()),o=this.document.createElement("div");for(let a of r){let u=this.document.createElement("div");u.classList.add("dimensions"),u.style.display="flex",u.style.flexWrap="wrap";let l=this.document.createElement("div");l.style.position="relative";for(let x of i){if(JS(x))continue;let h=await this.childRenderers[x.name].render(a.cell(x)),p=this.document.createElement("div");p.style.cssText=Rct;let m=this.document.createElement("div");m.style.cssText=Oct,m.appendChild(this.document.createTextNode($n(this.options,x,this.options.dataStyles[x.name])));let g=this.document.createElement("div");g.style.cssText=Tee,g.appendChild(h),p.appendChild(m),p.appendChild(g),u.appendChild(p)}if(i.length>0){let x=this.document.createElement("div");x.classList.add("row-separator-outer"),x.style.cssText=vct;let d=this.document.createElement("div");d.style.cssText=Tct,x.appendChild(d),u.appendChild(x)}let c=this.document.createElement("div");c.style.cssText=Cct;for(let x of s){if(JS(x))continue;let d=this.childRenderers[x.name];await hg();let h=await d.render(a.cell(x));if(d instanceof t)c.appendChild(h);else if(d instanceof cs){let p=this.document.createElement("div");p.style.cssText=Eve;let m=this.document.createElement("div");m.style.cssText=Ave,m.appendChild(this.document.createTextNode($n(this.options,x,this.options.dataStyles[x.name])));let g=this.document.createElement("div");g.style.cssText=Tee;let y=this.document.createElement("div");y.style.cssText=Dct,y.appendChild(h),g.appendChild(y),p.appendChild(m),p.appendChild(g),c.appendChild(p)}else{let p=this.document.createElement("div");p.style.cssText=Eve;let m=this.document.createElement("div");m.style.cssText=Ave,m.appendChild(this.document.createTextNode($n(this.options,x,this.options.dataStyles[x.name])));let g=this.document.createElement("div");g.style.cssText=Tee;let y=this.document.createElement("div");y.style.cssText=Nct,y.appendChild(h),g.appendChild(y),p.appendChild(m),p.appendChild(g),c.appendChild(p)}}if(l.appendChild(u),i.length>0&&this.options.isDrillingEnabled){let x=this.document.createElement("span"),d=YP(this.document);x.appendChild(d),x.style.cssText="padding: 8px; vertical-align: top; width: 25px; cursor: pointer; position: absolute; top: 5px; right: 5px;",x.onclick=()=>{if(this.options.onDrill){let{drillQuery:h,drillFilters:p}=JP(a);this.options.onDrill(h,d,p)}},l.appendChild(x)}let f=this.document.createElement("div");if(f.classList.add("dashboard-outer"),f.style.cssText=_ct,i.length>0){let x=this.document.createElement("div");x.style.cssText=bct,f.appendChild(x)}f.appendChild(c),l.appendChild(f),o.appendChild(l)}return o}},vct=`
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  flex: 1 0 auto;
`,_ct=`
  display: flex;
  flex-direction: row;
  font-size: 11px;
`,Sve=`
  background-color: var(--malloy-tile-background-color, #f7f7f7);
  border: 1px solid var(--malloy-border-color, #e9e9e9);
`,bct=`
  ${Sve}
  min-height: 100%;
  min-width: 11px;
  margin: 6px;
  border-radius: 4px;
`,Tct=`
  ${Sve}
  min-height: 11px;
  max-height: 11px;
  margin: 6px;
  flex: 1 0 auto;
  border-radius: 4px;
`,Cct=`
  display: flex;
  flex-wrap: wrap;
`,Rct=`
  background-color: var(--malloy-tile-background-color, #f7f7f7);
  border: 1px solid var(--malloy-border-color, #e9e9e9);
  margin: 6px;
  border-radius: 5px;
  padding: 10px;
  box-shadow: 0 1px 5px 0 var(--malloy-border-color, #f3f3f3);
`,Eve=`
  margin: 6px;
  border-radius: 5px;
  border: 1px solid var(--malloy-border-color, #e9e9e9);
  padding: 10px;
  flex: 1 0 auto;
  box-shadow: 0 1px 5px 0 var(--malloy-tile-background-color, #f3f3f3);
  max-width: calc(100% - 11px);
  display: flex;
  flex-direction: column;
  overflow: hidden;
`,Oct=`
  font-size: 12px;
  font-weight: 500;
  color: var(--malloy-title-color, #505050);
  margin-bottom: 5px;
  font-family: var(--malloy-font-family, "Roboto");
`,Ave=`
  font-size: 11px;
  font-family: var(--malloy-font-family, "Roboto");
  font-weight: 500;
  color: #var(--malloy-title-color, #505050);
`,Dct=`
  font-size: 20px;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 5px;
`,Tee=`
  display: flex;
  flex-direction: column;
  justify-content: center;
  flex: 1 0 auto;
`,Nct=`
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
`;var ZS=class extends Jc{constructor(){super(...arguments);this.childrenStyleDefaults={size:"small"}}getValueField(r){return r.intrinsicFields[0]}getDetailField(r){}async render(r){if(!r.isArray())return Mi(this.document,"Invalid data for chart renderer.");if(r.rowCount===0)return this.document.createElement("span");let n=this.getValueField(r.field),i=this.getDetailField(r.field),s=this.document.createElement("span"),o=!0;for(let a of r){o||s.appendChild(this.document.createTextNode(", ")),o=!1;let l=await this.childRenderers[n.name].render(a.cell(n));if(s.appendChild(l),i){let c=this.childRenderers[i.name];await hg();let f=await c.render(a.cell(i));s.appendChild(this.document.createTextNode("(")),s.appendChild(f),s.appendChild(this.document.createTextNode(")"))}}return s}};var rk=class extends ZS{getDetailField(e){return e.intrinsicFields[1]}};var _ve=Na(Bp());var bve=Na(Ree()),Hp=class extends cs{constructor(r,n){super(r);this.options=n}getText(r){if(r.isNull())return null;if(this.options.value_format)try{return(0,bve.format)(this.options.value_format,r.number.value)}catch{throw new Error(`Invalid value format: ${this.options.value_format}`)}return r.number.value.toLocaleString()}},nk=class t extends et{static{this.instance=new t}constructor(){super(),this.addExtractor((e,r)=>{e.value_format=r?.text()},this.rendererName,"format")}activates(e){return e.hasParentExplore()&&e.isAtomicField()&&e.type===_ve.AtomicFieldType.Number}create(e,r,n,i,s){return new Hp(e,s)}get rendererName(){return"number"}};var ik=class{constructor(e,r,n){this.parentField=e;this.values=r;this.span=n;this.key=JSON.stringify({parentField:this.parentField.name,values:this.values.map(i=>i.isScalar()?i.key:"")}),this.fieldValueMap=new Map;for(let i of this.values)this.fieldValueMap.set(i.field.name,i)}},HC=class t{constructor(e,r,n){this.pivotedField=e;this.field=r;this.userDefinedPivotDimensions=n}isPivotedColumnField(){return this instanceof t}},zC=class t{constructor(e,r,n){this.flattenedField=e;this.field=r;this.name=n}isFlattenedColumnField(){return this instanceof t}getChildRenderer(e){let r=e[this.flattenedField.name];if(r instanceof GC)return r.childRenderers[this.field.name];throw Error("Could not render flattened table. `# flatten` only supports nests.")}getValue(e){let r=e.cell(this.flattenedField);if(r.isRecord())return r.cell(this.field);throw Error("Cannot find nested record within flattened field. `# flatten` only supports nests with no group_bys.")}};function Tve(t){let{tag:e}=t.tagParse();return t.isExploreField()&&e.has("flatten")&&t.isRecord}var GC=class t extends Jc{constructor(){super(...arguments);this.childrenStyleDefaults={size:"medium"}}async render(r){if(r.isNull())return this.document.createElement("span");if(!r.isArray()&&!r.isRecord())throw new Error("Invalid type for Table Renderer");let n=this.tagged.has("transpose");if(n&&r.field.intrinsicFields.length>20)throw new Error("Transpose limit of 20 columns exceeded.");let i=0,s=0,o=[];o[i]=[];let a=[],u=0;for(let x of r.field.intrinsicFields){if(JS(x))continue;let d=this.childRenderers[x.name];if(d instanceof t&&d.tagged.has("pivot")){let p=d.tagged.textArray("pivot","dimensions"),m,g=[],y=new Map;for(let S of r){let T=S.cell(x);if(!T.isNull()){if(!T.isArray()&&!T.isRecord())throw new Error(`Can not pivot field ${x.name}.`);if(!m){let _=d.calculatePivotDimensions(T,p);m=_.dimensions,g=_.nonDimensions}for(let _ of T){let b=new ik(x,m.map(O=>_.cell(O.field)),g.length),R=b.key;y.get(R)||y.set(R,b)}}}if(!m)throw new Error(`Could not pivot ${x.name}, no data found.`);let A=Array.from(y.values()).sort((S,T)=>{for(let _ of m){let b=S.fieldValueMap.get(_.field.name),R=T.fieldValueMap.get(_.field.name);if(b?.isScalar()&&R?.isScalar()&&typeof b==typeof R){if(b.isNull())return R.isNull()?0:1;if(R.isNull())return-1;let O=b.compareTo(R);if(O!==0)return _.dir!=="desc"?O:-O}}return 0});for(let S of A)for(let T of g)a.push(new HC(S,T.field,p)),o[i][s]=d.createHeaderCell(T.field,n,{name:T.flattenedField?.name,childRenderer:T.flattenedField?.getChildRenderer(d.childRenderers)}),s++;u=Math.max(u,m.length)}else if(Tve(x)){let p=x,m=p.allFields.map(g=>new zC(p,g,`${p.name} ${g.name}`));for(let g of m)o[i][s]=this.createHeaderCell(g.field,n,{name:g.name,childRenderer:g.getChildRenderer(this.childRenderers)}),a.push(g),s++}else o[i][s]=this.createHeaderCell(x,n),a.push(x),s++}if(u>0&&a.length>30)throw new Error("Pivot limit of 30 columns exceeded.");if(!n&&this.options.isDrillingEnabled){let x=this.document.createElement("th");x.style.cssText=`
        padding: 8px;
        color: var(--malloy-title-color, #505050);
        border-bottom: 1px solid var(--malloy-border-color, #eaeaea);
        width: 25px;
      `,o[i][s]=x,s++}i++;let l=[];for(let x=0;x<u;x++){let d=[],h=null;for(let p of a)if(p instanceof HC){let m=p.pivotedField.key,g=p.pivotedField.values.length-u+x;if(g<0)d.push(this.createEmptyHeaderCell());else if(h!==m){let y=this.document.createElement("th");n?y.rowSpan=p.pivotedField.span:y.colSpan=p.pivotedField.span,y.style.cssText=`
                padding: 8px;
                color: var(--malloy-title-color, #505050);
                border-bottom: 1px solid var(--malloy-border-color, #eaeaeb);
                text-align: left;
              `;let A=p.pivotedField.values[g];y.appendChild(this.document.createTextNode(`${A.field.name}: `)),y.appendChild(await this.childRenderers[p.pivotedField.parentField.name].renderChild(A)),h=m,d.push(y)}else d.push(void 0)}else d.push(this.createEmptyHeaderCell());l.push(d),i++}o=[...l,...o];for(let x of r){o[i]=[],s=0;let d="",h=new Map;for(let p of a)if(p instanceof HC){let m=this.childRenderers[p.pivotedField.parentField.name],g=x.cell(p.pivotedField.parentField);await hg(),p.pivotedField.key!==d&&(h=await m.generatePivotedCells(g,n,p.userDefinedPivotDimensions),d=p.pivotedField.key);let y=p.pivotedField.key;h.has(y)&&h.get(y)?.has(p.field.name)?o[i][s]=h.get(y).get(p.field.name):o[i][s]=m.generateNoValueCell(p.field,n),s++}else if(p instanceof zC)o[i][s]=await this.createCellAndRender(p.getChildRenderer(this.childRenderers),p.getValue(x),n),s++;else{if(JS(p))continue;let m=this.childRenderers[p.name];o[i][s]=await this.createCellAndRender(m,x.cell(p),n),s++}if(!n&&this.options.isDrillingEnabled){let p=this.document.createElement("td"),m=YP(this.document);p.appendChild(m),p.style.cssText=`
          padding: 2px;
          vertical-align: top;
          border-bottom: 1px solid var(--malloy-border-color, #eaeaea);
          width: 25px;
          cursor: pointer;
        `,p.onclick=()=>{if(this.options.onDrill){let{drillQuery:g,drillFilters:y}=JP(x);this.options.onDrill(g,m,y)}},o[i][s]=p,s++}i++}let c=this.document.createElement("table"),f=this.document.createElement("thead");for(let x=0;x<(n?s:i);x++){x===1+u&&(c.appendChild(f),f=this.document.createElement("tbody"));let d=this.document.createElement("tr");for(let h=0;h<(n?i:s);h++){let p=n?o[h][x]:o[x][h];p&&d.appendChild(p)}f.appendChild(d)}return c.appendChild(f),c.style.cssText=`
      border: 1px solid var(--malloy-border-color, #eaeaea);
      vertical-align: top;
      border-bottom: 1px solid var(--malloy-border-color, #eaeaea);
      border-collapse: collapse;
      width: 100%;
    `,c}calculatePivotDimensions(r,n){if(!r.isArray()&&!r.isRecord())throw new Error(`Could not pivot ${r.field.name}`);let i;if(n){if(i=r.field.allFieldsWithOrder.filter(o=>n.indexOf(o.field.name)>=0),i.length!==n.length){for(let o of n)if(r.field.allFieldsWithOrder.filter(a=>a.field.name===o).length===0)throw new Error(`Could not pivot ${r.field.name} since ${o} is not a valid field.`)}}else i=r.field.dimensions;let s=[];for(let o of r.field.allFieldsWithOrder)if(!(i.indexOf(o)>=0))if(Tve(o.field)){let a=o.field.allFieldsWithOrder.map(u=>({dir:u.dir,field:u.field,flattenedField:new zC(o.field,u.field,`${o.field.name} ${u.field.name}`)}));s.push(...a)}else s.push(o);if(s.length===0)throw new Error(`Can not pivot ${r.field.name} since all of its fields are dimensions.`);return{dimensions:i,nonDimensions:s}}async generatePivotedCells(r,n,i){let s=new Map;if(r.isNull())return s;if(!r.isArray()&&!r.isRecord())throw new Error(`Could not pivot ${r.field.name}`);let{dimensions:o,nonDimensions:a}=this.calculatePivotDimensions(r,i);for(let u of r){let l=new ik(r.field,o.map(f=>u.cell(f.field.name)),a.length),c=new Map;for(let f of a){let x,d;f.flattenedField?(x=f.flattenedField.getChildRenderer(this.childRenderers),d=f.flattenedField.getValue(u)):(x=this.childRenderers[f.field.name],d=u.cell(f.field.name)),c.set(f.field.name,await this.createCellAndRender(x,d,n))}if(s.has(l.key))throw new Error(`Can not pivot ${r.field.name} dimensions lead to non unique pivots.`);s.set(l.key,c)}return s}generateNoValueCell(r,n){let i=this.createCell(this.childRenderers[r.name],n);return i.textContent="-",i}async createCellAndRender(r,n,i){let s=this.createCell(r,i);return s.appendChild(await r.render(n)),s}createEmptyHeaderCell(){let r=this.document.createElement("th");return r.style.cssText=`
      padding: 8px;
      color: var(--malloy-title-color, #505050);
      border-bottom: 1px solid var(--malloy-border-color, #eaeaea);
    `,r}createHeaderCell(r,n,i={}){let s=i.name??$n(this.options,r,this.options.dataStyles[r.name],r.parentExplore.queryTimezone),a=(i.childRenderer??this.childRenderers[r.name])instanceof Hp,u=this.document.createElement("th");return u.style.cssText=`
      padding: 8px;
      color: var(--malloy-title-color, #505050);
      border-bottom: 1px solid var(--malloy-border-color, #eaeaea);
      text-align: ${a||n?"right":"left"};
    `,s=s.replace(/_/g,"_&#8203;"),u.innerHTML=s,u}createCell(r,n){let i=r instanceof Hp;hg();let s=this.document.createElement("td");return s.style.cssText=`
      padding: ${r instanceof t?"0":"8px"};
      vertical-align: top;
      border-bottom: 1px solid var(--malloy-border-color, #eaeaea);
      ${i||n?"text-align: right;":""}
    `,s}async renderChild(r){return this.childRenderers[r.field.name].render(r)}};var pg={type:"Topology",bbox:[-179.14733999999999,-14.552548999999999,179.77847,71.352561],transform:{scale:[.003589293992939929,.0008590596905969058],translate:[-179.14733999999999,-14.552548999999999]},objects:{states:{type:"GeometryCollection",geometries:[{type:"MultiPolygon",arcs:[[[0]],[[1,2,3,4,5]]],id:"01",properties:{name:"Alabama"}},{type:"MultiPolygon",arcs:[[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[14]],[[15]],[[16]],[[17]],[[18]],[[19]],[[20]],[[21]],[[22]],[[23]],[[24]],[[25]],[[26]],[[27]],[[28]],[[29]],[[30]],[[31]],[[32]],[[33]],[[34]],[[35]],[[36]],[[37]],[[38]],[[39]],[[40]],[[41]],[[42]],[[43]],[[44]],[[45]],[[46]],[[47]],[[48]],[[49]],[[50]],[[51]],[[52]],[[53]],[[54]],[[55]],[[56]],[[57]],[[58]],[[59]],[[60]],[[61]],[[62]],[[63]],[[64]],[[65]],[[66]],[[67]],[[68]],[[69]],[[70]],[[71]],[[72]],[[73]],[[74]],[[75]],[[76]],[[77]],[[78]],[[79]],[[80]],[[81]],[[82]],[[83]],[[84]],[[85]],[[86]],[[87]],[[88]],[[89]],[[90]],[[91]],[[92]],[[93]],[[94]],[[95]],[[96]],[[97]],[[98]],[[99]],[[100]],[[101]],[[102]],[[103]],[[104]],[[105]],[[106]],[[107]],[[108]],[[109]],[[110]],[[111]],[[112]],[[113]],[[114]],[[115]],[[116]],[[117]],[[118]],[[119]],[[120]],[[121]],[[122]],[[123]],[[124]],[[125]],[[126]],[[127]],[[128]],[[129]],[[130]],[[131]],[[132]],[[133]],[[134]],[[135]],[[136]],[[137]],[[138]],[[139]],[[140]],[[141]],[[142]]],id:"02",properties:{name:"Alaska"}},{type:"Polygon",arcs:[[143,144,145,146,147]],id:"04",properties:{name:"Arizona"}},{type:"Polygon",arcs:[[148,149,150,151,152,153]],id:"08",properties:{name:"Colorado"}},{type:"MultiPolygon",arcs:[[[154]],[[155]],[[156]],[[157]],[[158]],[[159]],[[160]],[[161]],[[162]],[[163,164,-4]]],id:"12",properties:{name:"Florida"}},{type:"Polygon",arcs:[[165,166,167,168,-164,-3]],id:"13",properties:{name:"Georgia"}},{type:"Polygon",arcs:[[169,170,171,172,173]],id:"18",properties:{name:"Indiana"}},{type:"Polygon",arcs:[[174,175,176,-151]],id:"20",properties:{name:"Kansas"}},{type:"MultiPolygon",arcs:[[[177]],[[178]],[[179]],[[180]],[[181]],[[182]],[[183]],[[184,185]]],id:"23",properties:{name:"Maine"}},{type:"MultiPolygon",arcs:[[[186]],[[187]],[[188,189,190,191,192,193,194,195]]],id:"25",properties:{name:"Massachusetts"}},{type:"Polygon",arcs:[[196,197,198,199,200]],id:"27",properties:{name:"Minnesota"}},{type:"Polygon",arcs:[[201,202,203,204,205,206,207,208]],id:"34",properties:{name:"New Jersey"}},{type:"MultiPolygon",arcs:[[[209]],[[210]],[[211,212,213,-167,214]]],id:"37",properties:{name:"North Carolina"}},{type:"Polygon",arcs:[[215,-201,216,217]],id:"38",properties:{name:"North Dakota"}},{type:"Polygon",arcs:[[-152,-177,218,219,220,221]],id:"40",properties:{name:"Oklahoma"}},{type:"Polygon",arcs:[[222,223,-204,224,225,226,227]],id:"42",properties:{name:"Pennsylvania"}},{type:"Polygon",arcs:[[228,-217,-200,229,230,231]],id:"46",properties:{name:"South Dakota"}},{type:"Polygon",arcs:[[-221,232,233,234,235,236,237]],id:"48",properties:{name:"Texas"}},{type:"Polygon",arcs:[[-232,238,-149,239,240,241]],id:"56",properties:{name:"Wyoming"}},{type:"Polygon",arcs:[[-195,242,243,244]],id:"09",properties:{name:"Connecticut"}},{type:"Polygon",arcs:[[245,246,247,248,249,250,251,-219,-176,252]],id:"29",properties:{name:"Missouri"}},{type:"Polygon",arcs:[[253,-227,254,255,256]],id:"54",properties:{name:"West Virginia"}},{type:"Polygon",arcs:[[257,258,259,-174,260,-247]],id:"17",properties:{name:"Illinois"}},{type:"Polygon",arcs:[[-153,-222,-238,261,-147]],id:"35",properties:{name:"New Mexico"}},{type:"Polygon",arcs:[[-252,262,263,264,-235,233,-233,-220]],id:"05",properties:{name:"Arkansas"}},{type:"MultiPolygon",arcs:[[[265]],[[266]],[[267]],[[268]],[[269]],[[270]],[[271]],[[272]],[[273,274,275,-144,276]]],id:"06",properties:{name:"California"}},{type:"MultiPolygon",arcs:[[[-209,277]],[[-225,-203,278,279]]],id:"10",properties:{name:"Delaware"}},{type:"Polygon",arcs:[[280,281]],id:"11",properties:{name:"District of Columbia"}},{type:"MultiPolygon",arcs:[[[282]],[[283]],[[284]],[[285]],[[286]],[[287]],[[288]],[[289]]],id:"15",properties:{name:"Hawaii"}},{type:"Polygon",arcs:[[-199,290,-258,-246,291,-230]],id:"19",properties:{name:"Iowa"}},{type:"MultiPolygon",arcs:[[[-261,-173,292,-257,293,294,-248]],[[295,-250]]],id:"21",properties:{name:"Kentucky"}},{type:"MultiPolygon",arcs:[[[296,297]],[[298]],[[299]],[[-226,-280,300,301,302,303,-281,304,-255]]],id:"24",properties:{name:"Maryland"}},{type:"MultiPolygon",arcs:[[[305]],[[306]],[[307]],[[308]],[[309]],[[310]],[[311]],[[312]],[[313]],[[314,315,-171]],[[316]],[[317,318,319,320,321,322]]],id:"26",properties:{name:"Michigan"}},{type:"MultiPolygon",arcs:[[[323]],[[324]],[[325]],[[326]],[[-264,327,-6,328,329]]],id:"28",properties:{name:"Mississippi"}},{type:"Polygon",arcs:[[330,-218,-229,-242,331]],id:"30",properties:{name:"Montana"}},{type:"Polygon",arcs:[[332,-185,333,-190,334]],id:"33",properties:{name:"New Hampshire"}},{type:"MultiPolygon",arcs:[[[335]],[[336]],[[337]],[[338,-207]],[[339]],[[340]],[[341,342,-196,-245,343,-205,-224]]],id:"36",properties:{name:"New York"}},{type:"MultiPolygon",arcs:[[[344]],[[345]],[[-316,346,-228,-254,-293,-172]]],id:"39",properties:{name:"Ohio"}},{type:"Polygon",arcs:[[347,348,349,274,-275,-274,350]],id:"41",properties:{name:"Oregon"}},{type:"Polygon",arcs:[[-251,-296,-249,-295,351,-215,-166,-2,-328,-263]],id:"47",properties:{name:"Tennessee"}},{type:"Polygon",arcs:[[352,-240,-154,-146,353]],id:"49",properties:{name:"Utah"}},{type:"MultiPolygon",arcs:[[[354]],[[-302,355]],[[356,-297]],[[-256,-305,-282,-304,357,-212,-352,-294]]],id:"51",properties:{name:"Virginia"}},{type:"MultiPolygon",arcs:[[[358]],[[359]],[[360]],[[361]],[[362]],[[363]],[[364]],[[365]],[[366]],[[367]],[[368,-348,369]]],id:"53",properties:{name:"Washington"}},{type:"MultiPolygon",arcs:[[[370]],[[371]],[[372]],[[373]],[[374]],[[375]],[[376]],[[377]],[[378]],[[379]],[[380,-323,321,-321,319,-319,381,-259,-291,-198]]],id:"55",properties:{name:"Wisconsin"}},{type:"MultiPolygon",arcs:[[[382]],[[383]],[[384]]],id:"60",properties:{name:"American Samoa"}},{type:"MultiPolygon",arcs:[[[385]]],id:"66",properties:{name:"Guam"}},{type:"MultiPolygon",arcs:[[[386]],[[387]],[[388]],[[389]],[[390]],[[391]],[[392]],[[393]]],id:"69",properties:{name:"Commonwealth of the Northern Mariana Islands"}},{type:"Polygon",arcs:[[-231,-292,-253,-175,-150,-239]],id:"31",properties:{name:"Nebraska"}},{type:"Polygon",arcs:[[-214,394,-168]],id:"45",properties:{name:"South Carolina"}},{type:"MultiPolygon",arcs:[[[395]],[[396]],[[397]],[[398]],[[399]]],id:"72",properties:{name:"Puerto Rico"}},{type:"MultiPolygon",arcs:[[[400]],[[401]],[[402]]],id:"78",properties:{name:"United States Virgin Islands"}},{type:"Polygon",arcs:[[-369,403,-332,-241,-353,404,-349]],id:"16",properties:{name:"Idaho"}},{type:"Polygon",arcs:[[-275,-350,-405,-354,-145,-276]],id:"32",properties:{name:"Nevada"}},{type:"Polygon",arcs:[[405,-335,-189,-343]],id:"50",properties:{name:"Vermont"}},{type:"MultiPolygon",arcs:[[[406]],[[407]],[[408]],[[409]],[[410]],[[411]],[[412]],[[-265,-330,413,-236]]],id:"22",properties:{name:"Louisiana"}},{type:"MultiPolygon",arcs:[[[-192,414]],[[415]],[[416]],[[417]],[[-243,-194,418]]],id:"44",properties:{name:"Rhode Island"}}]},nation:{type:"GeometryCollection",geometries:[{type:"MultiPolygon",arcs:[[[0]],[[164,4,328,413,236,261,147,276,350,369,403,330,215,196,380,317,381,259,169,314,346,222,341,405,332,185,333,190,414,192,418,243,343,205,338,207,277,201,278,300,355,302,357,212,394,168]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[14]],[[15]],[[16]],[[17]],[[18]],[[19]],[[20]],[[21]],[[22]],[[23]],[[24]],[[25]],[[26]],[[27]],[[28]],[[29]],[[30]],[[31]],[[32]],[[33]],[[34]],[[35]],[[36]],[[37]],[[38]],[[39]],[[40]],[[41]],[[42]],[[43]],[[44]],[[45]],[[46]],[[47]],[[48]],[[49]],[[50]],[[51]],[[52]],[[53]],[[54]],[[55]],[[56]],[[57]],[[58]],[[59]],[[60]],[[61]],[[62]],[[63]],[[64]],[[65]],[[66]],[[67]],[[68]],[[69]],[[70]],[[71]],[[72]],[[73]],[[74]],[[75]],[[76]],[[77]],[[78]],[[79]],[[80]],[[81]],[[82]],[[83]],[[84]],[[85]],[[86]],[[87]],[[88]],[[89]],[[90]],[[91]],[[92]],[[93]],[[94]],[[95]],[[96]],[[97]],[[98]],[[99]],[[100]],[[101]],[[102]],[[103]],[[104]],[[105]],[[106]],[[107]],[[108]],[[109]],[[110]],[[111]],[[112]],[[113]],[[114]],[[115]],[[116]],[[117]],[[118]],[[119]],[[120]],[[121]],[[122]],[[123]],[[124]],[[125]],[[126]],[[127]],[[128]],[[129]],[[130]],[[131]],[[132]],[[133]],[[134]],[[135]],[[136]],[[137]],[[138]],[[139]],[[140]],[[141]],[[142]],[[154]],[[155]],[[156]],[[157]],[[158]],[[159]],[[160]],[[161]],[[162]],[[177]],[[178]],[[179]],[[180]],[[181]],[[182]],[[183]],[[186]],[[187]],[[209]],[[210]],[[265]],[[266]],[[267]],[[268]],[[269]],[[270]],[[271]],[[272]],[[282]],[[283]],[[284]],[[285]],[[286]],[[287]],[[288]],[[289]],[[297,356]],[[298]],[[299]],[[305]],[[306]],[[307]],[[308]],[[309]],[[310]],[[311]],[[312]],[[313]],[[316]],[[323]],[[324]],[[325]],[[326]],[[335]],[[336]],[[337]],[[339]],[[340]],[[344]],[[345]],[[354]],[[358]],[[359]],[[360]],[[361]],[[362]],[[363]],[[364]],[[365]],[[366]],[[367]],[[370]],[[371]],[[372]],[[373]],[[374]],[[375]],[[376]],[[377]],[[378]],[[379]],[[382]],[[383]],[[384]],[[385]],[[386]],[[387]],[[388]],[[389]],[[390]],[[391]],[[392]],[[393]],[[395]],[[396]],[[397]],[[398]],[[399]],[[400]],[[401]],[[402]],[[406]],[[407]],[[408]],[[409]],[[410]],[[411]],[[412]],[[415]],[[416]],[[417]]]}]}},arcs:[[[25302,52136],[56,31],[1,25],[14,-40],[-9,-28],[-10,16],[-18,-2],[-20,-17],[-14,15]],[[25338,57677],[0,15],[150,-6],[63,0],[160,-13],[93,-2],[37,2],[159,-4],[61,-5]],[[26061,57664],[15,-321],[23,-443],[18,-379],[13,-294],[15,-311],[33,-713],[9,-32],[-4,-36],[13,-45],[5,-149],[10,-72],[17,-69],[3,-82],[9,-36],[-10,-117],[18,-28],[12,-40],[-10,-52],[-11,0],[2,-24],[-14,-21],[-13,-52],[3,-56],[-2,-86],[-7,-86],[-14,-72],[-3,-45],[6,-124],[-2,-44],[19,-87],[3,-120],[-7,-57],[2,-43],[-8,-80],[1,-79],[-7,-21],[5,-51],[-3,-54],[20,-91],[7,-64],[2,-61]],[[26229,53027],[-67,0],[-71,-5],[-110,-4],[-174,0],[-135,7],[-166,-2],[3,-38],[-13,-115],[2,-23],[23,-79],[3,-41],[36,-80],[3,-69],[-15,-102],[3,-55],[20,-51],[-18,-35],[-8,-82],[-9,-15],[7,-24],[-15,-26]],[[25528,52188],[-38,-35],[-40,-24],[-56,-4],[18,41],[12,-26],[35,27],[3,34],[-15,48],[-7,43],[-20,47],[-7,90],[9,74],[-3,76],[-7,48],[-20,32],[-15,-46],[2,-38],[-9,-57],[1,-41],[-6,-32],[-1,-144],[-8,-66],[-15,-4],[1,36],[-20,40],[-15,-16],[-5,23],[-18,-22]],[[25284,52292],[-3,222],[-3,357],[-6,423],[-10,773],[9,283],[21,710],[5,212],[33,1120],[6,160],[19,643],[12,362],[-16,35],[-13,85]],[[8053,88108],[6,38],[18,-11],[-20,-43],[-4,16]],[[7905,86007],[29,90],[15,-17],[-1,-46],[-28,-74],[-15,19],[0,28]],[[7695,85792],[26,-14],[-3,-36],[-23,50]],[[7642,85774],[22,-17],[-7,-33],[-14,14],[-1,36]],[[7602,85813],[20,-2],[-5,-34],[-15,36]],[[7594,84711],[8,45],[20,-13],[-8,-73],[-15,-17],[-5,58]],[[7543,85532],[12,28],[21,-40],[-33,-2],[0,14]],[[7540,87187],[29,79],[8,112],[31,-29],[-28,-64],[-9,-49],[5,-24],[-36,-25]],[[7464,85521],[14,55],[18,-28],[23,-4],[-33,-33],[-22,10]],[[7385,86976],[17,6],[5,-88],[-22,82]],[[7168,84530],[29,89],[15,6],[26,-66],[5,20],[-21,65],[6,54],[9,10],[27,-25],[21,19],[-29,54],[16,56],[29,-31],[15,4],[-14,56],[12,17],[20,-20],[14,45],[-18,6],[-13,33],[20,3],[22,67],[34,18],[-12,35],[-3,68],[27,66],[7,-31],[53,51],[7,-7],[-12,-118],[-13,-18],[-26,-103],[5,-84],[36,11],[2,69],[22,-9],[21,-71],[20,48],[12,-33],[-17,-117],[9,-22],[9,72],[27,47],[7,-25],[-3,-115],[-30,-89],[-32,23],[-11,81],[-21,-26],[13,-99],[-22,-20],[-39,13],[-16,-54],[-8,36],[2,74],[-10,2],[-9,-114],[-8,-24],[-31,-17],[2,-37],[-16,-22],[-45,-13],[-86,76],[-21,-13],[-15,29]],[[7129,86075],[41,28],[18,-43],[-5,-48],[-13,-16],[-29,-3],[-16,59],[4,23]],[[6962,82933],[31,45],[8,-48],[-37,-9],[-2,12]],[[6905,82759],[20,62],[19,20],[11,-11],[25,17],[5,-40],[19,-37],[36,16],[-2,-37],[-19,-31],[-46,-6],[-32,-13],[-32,25],[-4,35]],[[6789,83718],[20,17],[4,76],[18,75],[25,34],[5,44],[15,-8],[34,70],[33,36],[39,-15],[29,1],[0,-112],[26,-57],[4,45],[17,53],[-18,48],[6,25],[53,-14],[-3,35],[-52,44],[-19,-4],[-1,127],[31,61],[29,29],[20,-12],[22,-56],[6,-133],[15,13],[9,77],[-5,55],[35,-38],[7,47],[-37,36],[-21,58],[7,44],[17,-6],[51,-87],[9,4],[30,-41],[11,10],[-31,75],[-20,34],[-7,44],[17,0],[30,-58],[29,12],[41,-29],[7,49],[36,15],[-8,-63],[-39,-106],[-7,-83],[19,-36],[0,95],[16,43],[16,-49],[5,46],[17,32],[5,41],[14,10],[10,-31],[22,72],[17,8],[-4,-45],[28,-16],[-11,-38],[-11,20],[-18,-15],[19,-36],[-5,-49],[19,22],[11,-51],[27,1],[-24,-53],[-16,33],[-24,2],[-15,-48],[16,-9],[-8,-53],[26,-8],[-26,-89],[23,17],[13,47],[5,-35],[47,-4],[-3,-41],[-36,-78],[-13,-110],[-38,13],[-2,39],[-10,-41],[-23,42],[-17,-6],[-23,49],[-15,-13],[-24,19],[-8,-46],[27,1],[15,-17],[45,-87],[-8,-70],[-23,-52],[-11,36],[-19,-50],[-19,30],[-6,38],[-21,18],[-20,-12],[-17,-37],[29,2],[20,-49],[-38,-53],[-34,12],[-4,-20],[25,-34],[14,13],[35,1],[22,-43],[-11,-28],[-24,-8],[-34,-33],[-8,11],[-19,-29],[3,-49],[-27,-50],[-13,20],[7,34],[-23,50],[7,47],[27,62],[-8,24],[-15,-21],[-34,-105],[-3,-24],[-22,32],[-22,-10],[-5,-35],[26,-6],[10,-63],[-16,-61],[-25,-20],[1,-70],[-25,-41],[-12,13],[-23,-82],[-19,-30],[-18,21],[-31,-20],[22,116],[11,11],[26,71],[24,31],[-2,37],[-33,-23],[3,52],[22,102],[29,52],[-7,30],[-15,-45],[-34,-61],[-26,-112],[-24,-59],[-14,-11],[-5,-44],[-19,-30],[-4,84],[-26,58],[-33,27],[3,100],[-4,106],[-13,83],[-11,32],[-23,20],[-27,5],[14,30],[-15,37],[5,23]],[[6782,82633],[27,101],[51,97],[21,-4],[16,-54],[-12,-23],[-55,-73],[-29,-79],[-19,35]],[[6519,81925],[26,41],[5,38],[13,22],[8,-32],[-6,-43],[5,-68],[-7,-33],[-36,13],[-8,62]],[[6240,82171],[5,47],[14,25],[13,-59],[-13,-63],[-19,50]],[[6225,82357],[9,35],[3,-82],[-10,-1],[-2,48]],[[6080,82757],[21,48],[48,-3],[25,-54],[-35,23],[-16,-26],[-43,-6],[0,18]],[[5919,82533],[19,25],[11,-57],[-9,-11],[-21,43]],[[5642,81925],[8,64],[19,12],[27,-58],[-8,-18],[-21,37],[-25,-37]],[[5573,81984],[16,-49],[-27,12],[11,37]],[[5524,80844],[-1,36],[13,24],[20,-25],[-9,-59],[-19,-15],[-4,39]],[[5506,81836],[8,67],[10,10],[11,-62],[-29,-15]],[[5485,80904],[12,85],[-11,46],[31,-2],[4,-99],[-27,-38],[-9,8]],[[5445,80747],[10,13],[16,-42],[-1,-34],[-23,-4],[-2,67]],[[5429,81185],[17,-21],[5,49],[17,46],[5,-22],[-8,-58],[9,-13],[1,-44],[-10,-61],[13,-30],[-7,-19],[-17,22],[-2,-21],[-20,8],[-3,164]],[[5385,80755],[21,25],[11,-30],[-20,-26],[-12,31]],[[5377,81028],[9,39],[23,41],[5,-36],[-23,-38],[-9,-58],[-5,52]],[[5303,81352],[14,11],[5,-42],[-19,31]],[[5265,80882],[33,98],[15,27],[-5,18],[-22,0],[-4,76],[22,50],[27,-44],[-1,38],[-13,52],[30,-13],[18,114],[12,-23],[-2,-43],[-9,-2],[-5,-75],[12,-18],[0,33],[13,1],[-4,-60],[-11,-37],[-22,12],[-1,-45],[-28,-71],[-18,-24],[-31,-141],[-6,77]],[[5246,85264],[5,41],[14,-83],[-7,-25],[-12,67]],[[5238,81460],[22,42],[36,-14],[-1,-78],[-50,12],[-7,38]],[[5213,85252],[8,77],[5,-57],[-13,-20]],[[5096,81334],[16,74],[25,25],[18,-23],[-2,-46],[10,5],[12,47],[15,-32],[26,-26],[26,25],[7,-66],[-9,-60],[-14,40],[-22,3],[-14,23],[-3,40],[-10,-12],[0,-69],[11,-20],[11,-87],[-11,-60],[-36,35],[-10,59],[-18,-18],[-18,-90],[4,58],[-10,43],[0,104],[-4,28]],[[5033,85142],[7,131],[39,52],[21,6],[39,76],[5,-2],[-55,-273],[-22,-32],[-32,-4],[-2,46]],[[4937,81216],[27,3],[-4,-71],[-26,47],[3,21]],[[4863,81217],[10,31],[36,8],[-9,-51],[-37,-10],[0,22]],[[4804,81100],[4,51],[17,20],[25,-19],[12,-29],[35,-42],[6,-41],[-30,44],[-23,-57],[-28,74],[-11,-38],[-7,37]],[[4656,80881],[30,66],[26,-27],[0,-83],[-11,-53],[-13,-21],[-27,58],[-5,60]],[[4587,90956],[19,44],[21,16],[24,-17],[22,6],[9,-37],[-1,-50],[-75,-13],[-18,19],[-1,32]],[[4545,80324],[1,51],[68,-54],[19,-39],[26,0],[18,-28],[-20,-23],[-10,-33],[-22,40],[-17,-9],[-31,37],[-18,-29],[-22,57],[8,30]],[[4451,81463],[14,-1],[-5,-38],[-9,39]],[[3979,80040],[12,22],[16,-18],[-21,-37],[-7,33]],[[3880,79918],[22,34],[33,-11],[24,18],[5,-24],[-9,-45],[-26,-13],[-47,27],[-2,14]],[[3807,79887],[60,24],[9,-35],[-15,-32],[-13,37],[-34,-4],[-7,10]],[[3781,79848],[17,29],[7,-36],[-18,-14],[-6,21]],[[3751,80090],[13,56],[14,-15],[18,18],[12,-21],[-22,-33],[13,-48],[30,0],[1,-41],[-23,3],[-18,-79],[-23,24],[-2,78],[16,35],[-9,20],[-16,-21],[-4,24]],[[3635,79967],[5,36],[28,54],[30,-6],[3,-58],[20,6],[14,-15],[8,-44],[13,13],[-2,-41],[-26,-36],[-12,11],[-18,-45],[-6,28],[-25,1],[-17,-20],[-18,91],[3,25]],[[3608,79782],[7,15],[27,-33],[-32,-11],[-2,29]],[[3261,87028],[35,25],[57,0],[22,-20],[23,10],[9,-24],[21,10],[10,30],[-8,38],[34,68],[37,-11],[0,37],[25,46],[33,-40],[24,32],[23,9],[15,54],[19,-132],[27,-10],[29,34],[29,-20],[27,-40],[-12,-65],[11,-44],[-11,-40],[13,-11],[4,-65],[-13,-38],[21,-54],[2,-58],[21,10],[-11,-34],[2,-48],[-71,-21],[-6,-34],[-20,19],[-26,-18],[-28,-58],[8,-64],[-26,-8],[-23,71],[-38,47],[-57,-4],[-14,35],[-28,18],[-27,58],[-35,42],[-40,19],[-32,72],[-25,10],[-2,70],[-28,97]],[[3147,79003],[17,23],[22,53],[25,5],[37,40],[9,27],[28,-21],[14,19],[8,44],[22,-19],[3,72],[24,-11],[-17,106],[20,32],[8,-16],[15,18],[-18,35],[4,39],[17,23],[29,-1],[9,-68],[15,7],[-7,50],[13,31],[-53,47],[-14,-21],[-32,81],[0,46],[31,92],[42,50],[36,32],[6,-15],[23,13],[16,-63],[-16,-42],[7,-35],[17,-18],[14,53],[6,-33],[15,29],[-1,41],[18,63],[15,-58],[11,26],[20,-62],[-8,-56],[-23,-13],[-24,-70],[-40,-70],[2,-39],[34,54],[58,64],[4,22],[22,22],[7,-19],[-5,-72],[-16,-51],[-26,-34],[-6,-23],[-45,-51],[-30,-20],[12,-46],[-16,-1],[-4,-61],[-16,17],[-7,-70],[-20,25],[-4,-76],[-36,-13],[-22,30],[-10,-31],[-12,23],[-21,-37],[-6,11],[-44,-73],[-3,-31],[-23,4],[-16,-23],[-13,-60],[-28,23],[-9,-45],[-49,40],[-15,36]],[[3070,93368],[7,34],[34,50],[123,108],[63,74],[48,74],[45,56],[42,64],[84,105],[55,56],[146,167],[172,154],[133,90],[87,45],[135,15],[52,-11],[34,-31],[-41,-11],[7,-38],[-10,-71],[-31,-77],[1,-70],[12,-56],[-21,-59],[-49,-33],[-4,-20],[49,7],[42,-151],[40,-3],[36,32],[42,-1],[49,-30],[47,21],[69,15],[32,-58],[50,21],[18,-34],[52,32],[18,26],[84,-65],[18,59],[26,44],[37,150],[18,26],[40,-9],[8,-39],[32,-12],[31,27],[26,0],[-32,110],[-71,55],[-45,24],[-48,-1],[-60,-60],[13,112],[-3,83],[-62,114],[-22,91],[-26,35],[-59,14],[-8,56],[-32,90],[7,50],[27,18],[10,43],[16,-37],[24,28],[27,-89],[36,-91],[24,-10],[-19,-101],[3,-55],[28,-50],[57,-123],[53,-68],[39,18],[30,28],[9,49],[-45,2],[-10,45],[-56,70],[-53,112],[10,52],[0,60],[14,23],[1,57],[33,93],[30,-32],[22,3],[1,28],[-38,55],[-25,-8],[-28,57],[-87,-29],[-32,-37],[-34,0],[-39,-19],[-34,17],[-20,43],[-17,-16],[-21,23],[-4,-51],[-36,39],[-91,42],[-54,31],[-48,15],[-22,30],[1,98],[-22,163],[-52,216],[-20,58],[-36,62],[-91,101],[-145,228],[-21,24],[-51,87],[-50,49],[-54,37],[-51,23],[-29,35],[-19,70],[-54,84],[-45,40],[-81,41],[-42,-6],[37,40],[92,59],[20,46],[3,57],[19,76],[11,236],[-8,117],[179,-31],[68,6],[144,42],[79,28],[77,15],[77,63],[41,65],[29,30],[53,87],[81,192],[21,92],[7,79],[-2,186],[39,233],[84,183],[65,179],[37,77],[129,162],[96,-35],[69,-3],[68,40],[64,53],[93,104],[74,108],[44,86],[114,188],[33,31],[99,63],[7,-47],[55,-44],[82,-12],[68,15],[13,24],[32,-3],[61,17],[73,51],[74,85],[71,121],[36,88],[86,185],[68,76],[12,-68],[47,-38],[39,-2],[39,-20],[16,-82],[27,41],[99,-49],[15,-98],[-54,-71],[-35,-63],[-41,-4],[12,-146],[81,-15],[44,59],[-7,76],[16,8],[31,67],[23,12],[19,-48],[4,63],[-27,43],[35,55],[21,-47],[-3,65],[15,22],[71,-74],[45,-66],[13,-42],[-11,-33],[1,-109],[9,-49],[61,10],[35,-37],[16,-40],[48,62],[30,75],[112,0],[69,42],[53,-11],[40,-34],[84,-2],[61,-32],[45,-35],[9,-34],[-26,-11],[-26,-83],[-26,-30],[14,-93],[25,5],[19,-24],[45,-6],[10,-28],[69,-20],[33,9],[-17,-43],[9,-25],[-53,-26],[-8,-24],[20,-25],[89,6],[72,-41],[14,-33],[28,5],[44,86],[57,15],[24,-18],[10,34],[40,7],[29,-27],[15,-59],[42,27],[38,8],[58,83],[13,-22],[45,20],[21,-15],[34,26],[12,-30],[66,-8],[62,-72],[28,-1],[19,-24],[26,31],[24,-8],[37,-73],[0,-45],[35,-19],[41,51],[1,-63],[26,57],[81,-77],[14,-67],[24,-23],[49,1],[43,-15],[29,36],[23,-73],[48,-10],[29,45],[43,-12],[62,12],[66,-10],[49,-38],[50,-3],[17,28],[65,-95],[28,-8],[32,-54],[45,-16],[20,-30],[45,-12],[17,-26],[27,32],[66,-20],[45,77],[48,6],[9,20],[84,49],[18,24],[86,30],[42,-25],[48,32],[9,-18],[79,-73],[53,-37],[70,-80],[26,-67],[37,-11],[87,-97],[68,-40],[52,-62],[27,-47],[61,-13],[58,-45],[0,-9012],[2,-971],[-1,-889],[130,-95],[17,100],[135,-145],[81,180],[170,20],[1,-39],[-33,-272],[47,-112],[66,-76],[26,-22],[11,-116],[29,-80],[266,-580],[30,-299],[-8,-93],[22,4],[51,108],[111,158],[11,23],[68,8],[32,139],[-2,209],[30,-19],[18,19],[19,71],[-1,39],[-32,47],[45,48],[68,28],[131,158],[62,-115],[28,-88],[11,-2],[24,-70],[0,-104],[-12,-24],[1,-37],[16,-47],[-5,-42],[18,-76],[73,-38],[5,-66],[32,-73],[24,0],[29,-108],[-6,-69],[26,-20],[-6,-46],[22,-71],[114,-152],[32,-119],[46,-120],[50,-110],[-23,-49],[33,-134],[47,-140],[28,-176],[57,-182],[32,-161],[30,-111],[25,-123],[53,-180],[32,-155],[-33,-140],[89,-52],[-21,-205],[71,-81],[-8,-61],[11,-57],[7,-119],[71,14],[33,-77],[82,-115],[23,-48],[85,-47],[44,-115],[44,-33],[11,-116],[23,-15],[27,-36],[40,23],[28,-143],[-3,-90],[-20,-107],[-18,-67],[1,-60],[10,-38],[-5,-118],[12,-104],[11,-46],[6,-133],[12,-63],[-32,-100],[-24,-122],[-1,-33],[-20,-90],[-23,-77],[-37,-97],[-27,-55],[-19,-14],[3,-46],[-19,-23],[-12,40],[-1,56],[-13,24],[-1,-44],[-12,-22],[-18,18],[-13,52],[-4,108],[3,57],[-17,33],[8,103],[-9,6],[-16,56],[-6,64],[30,63],[17,63],[15,-8],[-3,75],[-11,82],[14,122],[-9,190],[-10,67],[-43,164],[-22,55],[-12,48],[-7,-34],[23,-62],[25,-85],[7,-72],[22,-90],[10,-131],[-16,-43],[-2,-79],[7,-92],[11,-62],[-9,-28],[-11,96],[-8,12],[3,-70],[-4,-74],[-36,-102],[-14,-5],[-24,49],[19,73],[11,73],[-3,38],[-25,-10],[10,-72],[-8,-42],[-33,-56],[-7,1],[-23,108],[-11,-45],[-25,54],[-17,18],[-12,50],[-28,68],[0,76],[31,31],[22,51],[-20,47],[7,75],[-9,39],[23,44],[3,24],[-18,1],[-3,74],[7,43],[-41,-17],[6,-45],[11,-16],[-1,-37],[-13,-85],[-1,-60],[-19,-73],[-18,13],[7,-93],[-10,-43],[-24,52],[-25,22],[-9,30],[-12,132],[-16,70],[21,-29],[7,75],[27,37],[12,147],[-8,102],[10,57],[6,-21],[12,42],[7,92],[-21,-11],[-4,-58],[-19,-30],[-21,-61],[13,-113],[-8,-42],[-33,3],[-12,-43],[3,-30],[-17,-14],[-7,34],[4,67],[-19,23],[-12,128],[-32,-17],[0,-48],[-28,118],[-3,123],[8,25],[25,1],[7,66],[13,49],[30,12],[16,-72],[7,63],[-15,168],[9,3],[30,-45],[4,-59],[11,-32],[6,23],[-9,77],[-22,35],[-19,48],[-3,53],[-11,13],[-12,-25],[-10,49],[-23,32],[-5,57],[12,23],[-4,64],[-22,28],[-37,66],[-13,69],[-15,33],[-13,79],[29,43],[-11,58],[-18,-47],[-19,18],[-2,-27],[-23,58],[-31,8],[-11,56],[-27,-28],[-54,76],[-8,75],[15,73],[18,-22],[33,4],[9,48],[-22,3],[-32,36],[2,35],[-18,125],[13,81],[-24,-10],[-15,19],[-16,53],[7,103],[20,2],[16,-36],[33,-24],[63,-89],[5,15],[-25,58],[-20,19],[-66,130],[-3,95],[-17,-15],[-2,-65],[-20,3],[-39,166],[-55,147],[-11,140],[9,65],[-2,52],[27,41],[-13,100],[-8,-2],[-9,-85],[-20,-30],[0,-42],[12,-22],[-13,-57],[-10,10],[-22,-20],[-25,11],[-36,34],[-7,-15],[-35,36],[-40,174],[-4,110],[-42,140],[-13,79],[19,1],[-11,174],[-19,-56],[1,-58],[-35,132],[-8,177],[-8,92],[-21,135],[-32,116],[-36,37],[-5,-16],[28,-38],[4,-41],[17,-39],[20,-131],[-15,11],[-34,140],[-22,36],[-22,10],[41,-92],[13,-85],[17,-29],[-7,-97],[9,-88],[13,-23],[-5,-24],[27,-124],[3,-55],[25,-139],[2,-32],[-14,11],[27,-204],[9,-85],[1,-69],[-12,8],[-1,-61],[12,-64],[-29,23],[-19,32],[-14,-4],[-18,43],[-15,66],[-10,84],[-22,-16],[-33,50],[-27,-37],[-50,-19],[3,81],[-25,16],[-4,19],[30,39],[-10,69],[5,53],[-28,109],[0,36],[-22,84],[13,24],[-2,90],[-19,64],[-12,10],[15,-131],[-12,-125],[-27,-5],[-42,70],[-26,30],[-15,150],[-11,-68],[-13,-22],[-44,54],[-14,-20],[-10,50],[-12,-18],[-3,-54],[45,-35],[7,7],[45,-44],[33,-66],[30,-104],[-11,-44],[-24,-44],[6,-11],[33,44],[7,30],[27,1],[7,-105],[26,-78],[16,-157],[-19,-44],[-43,-32],[-11,10],[9,47],[-18,16],[-12,-17],[7,-39],[-10,-37],[-43,22],[-11,-23],[5,-60],[-8,-35],[-29,5],[-8,78],[-36,35],[3,15],[-28,74],[-17,19],[-29,-19],[-35,70],[-16,15],[-56,107],[-51,75],[-2,50],[-30,70],[-37,64],[-5,28],[4,75],[-15,48],[-55,121],[-30,47],[-96,89],[-36,71],[-43,66],[-98,104],[-42,49],[-91,144],[-30,39],[5,29],[31,89],[24,-14],[-9,-27],[24,3],[0,43],[21,70],[-22,7],[2,77],[-14,116],[7,35],[22,41],[-5,34],[16,30],[-13,56],[-19,-51],[-2,-59],[-25,-21],[-21,-72],[-1,-49],[-107,-100],[-12,-28],[-28,-28],[-95,22],[-67,36],[-26,32],[-123,125],[-17,56],[18,-10],[34,24],[11,71],[-33,131],[3,42],[-20,-17],[-31,44],[6,-50],[45,-120],[-10,-21],[-54,-51],[-39,0],[-49,55],[-61,24],[-32,23],[-81,40],[-45,11],[-59,-4],[-63,-33],[-77,-12],[-80,-28],[-54,-48],[-39,39],[-45,-26],[-64,-120],[-46,-115],[6,65],[36,103],[62,117],[46,2],[-16,66],[-49,48],[-8,25],[-10,-82],[-26,84],[-26,30],[-17,-9],[-16,27],[-71,19],[9,28],[38,23],[-42,33],[-19,-6],[-2,25],[37,156],[-15,15],[-13,-36],[-29,-22],[-1,-57],[-20,-66],[-39,12],[-70,97],[1,31],[-26,36],[-39,26],[-41,-35],[-22,27],[13,29],[31,32],[25,74],[-14,10],[-18,-49],[-79,-93],[-29,-23],[-38,5],[1,-54],[60,27],[11,-24],[2,-53],[-17,2],[-28,-37],[-18,6],[-41,-38],[-41,-77],[-12,2],[-12,48],[47,77],[-37,-12],[-17,11],[-1,54],[23,83],[13,27],[18,2],[20,-31],[24,17],[22,41],[38,13],[57,58],[42,20],[-9,25],[-19,-2],[1,71],[-11,-49],[-19,-20],[1,30],[25,65],[1,21],[-33,-58],[-45,-47],[-19,-3],[-4,30],[63,112],[-6,38],[-29,-60],[-38,-14],[-12,26],[-15,-49],[-20,-14],[-54,13],[-10,58],[27,19],[11,-9],[18,25],[40,16],[29,28],[23,65],[-25,2],[-14,-46],[-23,-19],[-45,-2],[-18,68],[-12,3],[-17,-69],[-21,-8],[-4,59],[16,26],[17,-6],[-11,44],[-3,55],[13,34],[26,114],[96,6],[-7,38],[-91,-5],[-21,-63],[-27,-26],[-21,-77],[-31,-48],[-23,12],[20,36],[-10,113],[-12,53],[18,30],[-22,10],[-14,-23],[-1,-51],[12,-63],[-14,-63],[1,-41],[-13,-15],[-26,48],[-2,-67],[-27,-45],[-21,22],[0,52],[-11,19],[-7,-73],[-9,15],[4,129],[9,62],[-15,11],[-17,-130],[9,-111],[-4,-29],[-19,-9],[1,49],[-27,34],[-7,-46],[16,-65],[-13,-8],[-38,16],[-34,-48],[-28,9],[-5,31],[14,95],[42,151],[1,53],[49,123],[16,81],[-6,18],[-73,-211],[-1,-35],[-18,-58],[-8,8],[-8,69],[-12,-1],[-3,-81],[-11,-54],[-18,-42],[-3,-64],[-16,-68],[-21,27],[-7,-44],[24,-28],[-5,-91],[10,-8],[19,85],[37,6],[11,-22],[4,-91],[-14,-45],[-31,-32],[-22,-76],[1,-63],[21,20],[17,75],[30,44],[30,-89],[0,-44],[10,-43],[-23,-192],[-26,0],[-9,52],[-19,9],[1,-36],[-27,-44],[0,-17],[28,14],[23,-27],[61,-124],[26,-85],[-15,-77],[-13,-26],[-34,-35],[-17,16],[-14,-18],[-29,-6],[9,51],[-26,67],[9,60],[-17,63],[-16,-126],[0,-62],[-12,-41],[-19,69],[-9,-8],[-7,-59],[-18,-33],[-34,50],[-29,-40],[-15,52],[-27,-21],[-22,5],[-9,28],[24,74],[-9,14],[-27,-38],[-29,-175],[-30,-42],[-9,18],[14,55],[13,84],[-15,172],[-16,5],[-5,-28],[1,-81],[13,-53],[-10,-4],[-10,-72],[-17,11],[-8,-20],[-5,-68],[-11,-17],[4,-47],[25,-31],[-6,-74],[-27,32],[-12,127],[8,37],[-11,78],[-17,6],[6,-52],[-8,-49],[5,-196],[-5,-64],[-27,74],[-1,43],[-16,28],[-34,31],[3,-40],[24,-36],[-1,-63],[-69,-158],[-32,-91],[0,-36],[-16,-10],[-9,-86],[-12,2],[-3,70],[34,211],[0,29],[-26,-65],[-19,-111],[-12,11],[-9,142],[-13,-52],[-11,2],[16,-62],[-5,-80],[-39,0],[-8,-61],[-18,-24],[-22,-55],[7,-43],[-15,-41],[-16,-10],[0,54],[-16,36],[-13,-45],[-1,-53],[-22,-17],[-24,31],[-9,-23],[-21,38],[-7,43],[-12,-36],[-21,-27],[6,-35],[-20,0],[-5,-39],[-41,-7],[-6,76],[-22,-14],[-21,22],[3,22],[-21,8],[-3,70],[8,36],[16,18],[5,71],[32,31],[9,-11],[29,51],[33,3],[0,45],[33,21],[34,62],[31,-9],[-11,69],[22,26],[3,32],[37,102],[-13,15],[-24,-22],[-60,-109],[-30,-20],[-18,-39],[-39,16],[-43,67],[-15,40],[-5,46],[18,117],[13,45],[15,133],[27,79],[17,33],[35,99],[11,98],[0,71],[23,32],[5,156],[4,27],[-18,44],[-22,163],[39,35],[5,27],[63,27],[89,164],[92,118],[51,-161],[41,-16],[13,-27],[34,112],[30,8],[36,-45],[19,10],[63,-48],[65,-20],[30,-55],[-1,27],[-22,63],[-29,36],[-38,-14],[-51,63],[-24,-1],[-40,42],[-25,68],[-39,66],[-29,28],[18,55],[24,9],[31,124],[23,18],[8,60],[46,27],[30,45],[-32,50],[-20,4],[-43,-64],[-11,-49],[-19,-14],[-12,-70],[0,-70],[-18,-31],[-25,19],[-36,7],[-74,-17],[-26,43],[-28,16],[-14,-52],[-87,-84],[-39,-154],[-36,-12],[-19,-31],[-33,2],[-39,-63],[-48,-109],[-1,-29],[26,-124],[-2,-23],[-38,25],[-19,-18],[-30,-52],[-21,-92],[-27,-29],[-32,-74],[-6,-73],[8,-34],[19,-24],[-40,-56],[-9,-67],[-13,-4],[-28,-70],[-19,-7],[-9,28],[-25,-11],[4,-68],[16,-13],[-3,-30],[25,-42],[8,-35],[-12,-73],[-19,-47],[-7,-62],[-25,-21],[-4,-22],[-39,-2],[-15,12],[-40,-31],[-18,3],[-19,-60],[23,16],[15,-20],[15,30],[19,1],[7,-50],[-16,-116],[-19,-16],[-26,-51],[-28,37],[5,-34],[-13,-18],[-18,18],[7,35],[2,75],[-22,71],[3,-119],[-9,-55],[-18,-15],[-13,25],[-6,-35],[16,-28],[-9,-53],[-49,-10],[17,-93],[-8,-32],[-27,-21],[-10,8],[-24,-45],[-12,13],[-36,-37],[5,-26],[20,-18],[-23,-32],[-7,-43],[2,-61],[-12,-44],[-24,-35],[24,-26],[-6,-59],[10,-60],[27,63],[59,-23],[16,22],[12,-22],[15,25],[22,-78],[19,-27],[19,13],[23,-34],[18,-53],[8,-53],[15,-22],[-28,-14],[-14,-118],[-12,-39],[-30,-25],[-11,-55],[-24,-33],[-48,0],[-15,-17],[-4,-94],[-12,-33],[-27,1],[-5,-20],[10,-79],[11,-32],[-27,-36],[-20,15],[-2,-45],[20,-46],[-11,-81],[-21,-30],[-6,-33],[9,-24],[-23,0],[-14,-52],[-26,66],[-9,-7],[5,-57],[-4,-40],[-21,-3],[-12,-43],[-17,16],[0,27],[-20,-1],[-4,-39],[-22,-24],[-23,31],[-28,-17],[-35,-69],[15,-52],[-9,-51],[-40,-44],[-28,-2],[1,-53],[14,-25],[-6,-40],[-20,-16],[-36,59],[-10,30],[-20,-20],[-5,-63],[1,-69],[-26,-27],[-3,-97],[-65,-7],[-21,24],[-2,-74],[8,-71],[-20,0],[-12,37],[-21,3],[-4,-39],[-32,-27],[-39,-92],[-15,-12],[-5,-44],[13,-11],[47,64],[4,-50],[-6,-53],[-15,-7],[0,-31],[18,-38],[-10,-38],[-18,-26],[-2,-49],[-26,-44],[-8,-32],[2,-42],[-32,14],[-31,-28],[-4,-70],[-12,-12],[-19,75],[-8,-53],[-27,-42],[-11,-53],[-24,-6],[5,-50],[-17,-27],[-25,43],[-24,67],[-22,-16],[0,-51],[11,-5],[1,-36],[-29,-10],[-13,-67],[6,-32],[18,-6],[5,-52],[-36,-4],[-24,-15],[-17,77],[-51,-38],[-18,-51],[-16,-3],[-9,-49],[19,-1],[27,25],[20,-17],[6,-54],[-16,-47],[-43,44],[-23,11],[-5,-70],[-33,6],[-23,21],[-20,-33],[-27,-88],[2,-44],[47,-20],[32,-36],[-3,-29],[-32,-42],[1,-23],[18,-4],[25,31],[16,-7],[-55,-78],[-23,-63],[1,-52],[-13,50],[-10,-17],[16,-66],[-6,-50],[-7,39],[-10,-2],[-2,-53],[-25,80],[0,95],[-19,-60],[8,-73],[-4,-67],[-24,-6],[3,58],[-35,1],[-16,-80],[-25,-9],[-75,-43],[-29,-22],[-7,-22],[-3,-74],[-17,46],[5,80],[-23,-19],[10,-30],[1,-104],[-16,-71],[6,-46],[-24,-81],[-32,-30],[2,52],[24,4],[-1,40],[-10,4],[2,111],[18,72],[-29,39],[-28,12],[-13,-18],[3,-45],[-12,-21],[-13,22],[-25,-13],[-9,-82],[-35,-74],[-26,-20],[-37,28],[-6,-29],[11,-44],[-20,-81],[1,-31],[-21,-37],[-12,105],[-10,13],[-14,-37],[-11,14],[-18,-31],[31,-13],[-2,-68],[-32,-10],[-16,25],[5,39],[-13,24],[-22,-22],[-19,-90],[-61,-85],[-26,2],[-11,29],[-26,-29],[-13,4],[10,156],[29,96],[1,46],[-15,16],[-31,-2],[-24,-29],[-24,-101],[4,-129],[-40,-140],[-7,-12],[-14,-85],[-21,36],[-19,-12],[13,-65],[10,-17],[1,-56],[-25,-38],[-19,33],[0,45],[-16,15],[-13,-60],[10,-49],[-17,-47],[-14,27],[-32,-8],[-16,18],[-14,74],[32,6],[-21,47],[-8,104],[-21,56],[-11,7],[-16,-33],[-10,-65],[7,-27],[14,0],[18,-70],[-11,-46],[14,-95],[0,-52],[-22,30],[-20,-19],[3,-26],[-17,-30],[-18,-7],[-22,28],[-16,59],[4,36],[-13,56],[-21,37],[-31,-25],[-10,-56],[49,-85],[4,-31],[-50,-111],[-24,-21],[-20,-33],[16,-56],[27,2],[9,24],[22,-50],[13,-83],[-26,6],[8,34],[-17,6],[-10,-28],[-16,22],[-17,62],[-25,-39],[2,-69],[-18,-1],[-28,-50],[-23,18],[-37,10],[-45,-5],[-34,-14],[-41,-40],[-29,-71],[-4,-69],[-29,-53],[-51,-33],[-29,3],[-28,28],[-9,30],[-9,74],[-10,30],[-1,55],[8,29],[44,41],[14,25],[23,110],[19,110],[-1,29],[22,54],[14,13],[25,-46],[38,39],[25,49],[25,0],[37,81],[34,20],[36,-14],[31,5],[1,-37],[28,-72],[9,-61],[-5,-50],[27,24],[-8,52],[2,37],[30,-30],[-15,42],[2,77],[-10,109],[32,46],[26,21],[42,-15],[21,14],[10,69],[-16,4],[4,28],[18,10],[7,38],[18,-4],[26,99],[3,-32],[15,-20],[21,48],[-5,83],[-20,-9],[27,68],[64,206],[33,52],[23,62],[19,13],[27,42],[25,68],[27,14],[35,39],[37,20],[89,70],[30,-9],[10,18],[45,5],[10,-10],[-20,-27],[-1,-47],[14,-2],[-3,-49],[-29,-18],[-3,-85],[38,-98],[11,22],[27,-39],[4,19],[-29,53],[-3,85],[-6,32],[26,-28],[57,3],[7,-86],[23,7],[26,-36],[7,22],[-14,40],[27,15],[-56,89],[-32,36],[1,58],[-16,-7],[39,166],[15,123],[11,56],[23,44],[36,96],[18,13],[40,74],[30,81],[82,96],[41,74],[35,39],[68,106],[17,42],[29,-68],[19,-14],[31,19],[8,59],[-13,47],[-2,46],[15,122],[29,108],[41,130],[24,62],[22,37],[40,41],[21,52],[22,87],[14,15],[26,62],[30,25],[8,-74],[18,-15],[4,41],[-10,105],[-23,-2],[-6,34],[2,95],[9,59],[25,409],[14,42],[38,16],[12,53],[-20,-9],[-34,77],[-3,62],[9,97],[20,106],[27,33],[29,101],[49,102],[4,57],[19,93],[-5,45],[13,33],[-3,43],[13,38],[-20,0],[-11,-32],[0,-38],[-21,-53],[-28,-31],[-38,-27],[-21,-31],[-29,-22],[-5,-21],[-41,-28],[-44,-61],[-79,-73],[-26,5],[-28,53],[-5,73],[-20,49],[-40,38],[2,46],[11,17],[9,167],[-12,-3],[-25,-101],[-41,-54],[-6,-58],[5,-58],[-8,-37],[-14,-12],[-3,-32],[9,-80],[16,-91],[19,-76],[-26,-87],[-28,-21],[-42,32],[-39,161],[-47,208],[-26,73],[-23,42],[-31,13],[16,65],[-16,44],[-25,-9],[-6,-87],[-15,7],[1,-65],[-29,-30],[-24,79],[3,26],[-19,19],[-11,-30],[-16,6],[-1,59],[-22,-18],[-25,61],[18,47],[-17,89],[-44,-52],[-46,-72],[-31,-62],[-20,-95],[-13,57],[-36,-33],[-94,-124],[-10,-41],[0,-49],[-41,-38],[-8,-26],[-22,-10],[-15,-44],[-20,-15],[-4,55],[-29,45],[-54,-20],[-29,33],[49,47],[15,-39],[18,12],[5,50],[25,77],[3,60],[-8,85],[1,81],[-16,74],[5,21],[-16,20],[-29,97],[-20,139],[29,128],[21,23],[24,79],[24,26],[-15,77],[-18,44],[-15,64],[-10,107],[-50,162],[-3,74],[-25,67],[-10,63],[-30,85],[-10,44],[-22,9],[-11,-37],[-2,-74],[6,-37],[-8,-56],[-12,-21],[-27,-10],[-18,21],[-19,-54],[-36,-29],[-50,-68],[-73,-48],[-88,-28],[-75,10],[-51,38],[-13,32],[-13,99],[23,18],[-18,69],[-54,62],[-32,108],[-5,34],[-33,51],[-18,62],[-42,8],[-31,42],[-47,110],[23,32],[24,55],[-2,36],[-24,6],[-38,-54],[-48,10],[-16,51],[11,32],[32,1],[57,128],[10,-4],[17,45],[-16,34],[-4,41],[32,24],[-27,7],[5,70],[27,78],[-17,3],[-18,-48],[-40,42],[-6,40],[22,49],[27,-6],[19,23],[0,45],[-17,-21],[-30,32],[-16,54],[2,23],[-20,7],[-13,35],[-10,-14],[-12,-99],[-14,-6],[-38,16],[-10,21],[-10,66],[1,129],[-11,19],[-43,10],[-18,37],[-10,98],[42,44],[6,38],[-17,46],[-30,31],[-45,-27],[0,-46],[-21,23],[-9,88],[8,147],[6,11],[-2,-107],[92,47],[0,19],[-35,20],[-20,28],[-24,82],[2,18],[36,19],[55,-8],[33,25],[-29,134],[-4,46],[3,84],[21,77],[101,278],[4,29],[27,77],[29,61],[5,70],[18,67],[21,34],[19,-4],[9,23],[-11,115],[26,188],[18,70],[38,61],[-18,24],[4,22],[58,133],[60,46],[48,11],[42,-45],[43,-11],[32,-84],[24,-6],[6,-26],[54,-88],[73,24],[61,124],[4,47],[44,29],[63,172],[23,89],[23,39],[-9,58],[14,5],[28,-28],[22,-5],[13,-77],[52,0],[45,20],[26,-20],[77,28],[48,38],[9,51],[56,128],[38,135],[0,71],[-12,81],[-23,95],[-17,121],[-1,118],[-5,52],[-71,157],[-9,32],[-41,28],[-27,1],[10,97],[27,33],[14,-25],[35,-20],[51,7],[-10,45],[31,10],[41,81],[2,114],[-42,122],[-47,68],[-25,48],[-1,-32],[-27,-48],[-20,-86],[-42,-30],[-42,42],[-59,-93],[-81,-34],[-18,-71],[-85,-103],[-21,-70],[-5,-99],[-44,-70],[-4,93],[-15,110],[-23,50],[-28,-3],[4,34],[-32,46],[-9,36],[-38,-60],[16,-45],[21,-7],[16,-39],[24,11],[2,-48],[-22,-81],[-19,-11],[-22,82],[-55,76],[-41,33],[-64,13],[-41,-27],[-27,12],[-52,3],[-45,-22],[-108,-112],[-58,-17],[-111,74],[-94,45],[-47,14],[-88,40],[-49,79],[-20,96],[1,74],[20,36],[-6,64],[-28,63],[-45,56],[-1,59],[-46,64],[-10,56],[39,-33],[33,3],[9,27],[24,15],[16,32],[-3,55],[35,61],[-38,63],[-19,9],[-29,-16],[-39,15],[-64,52],[-104,21],[-49,52],[-38,63],[-55,60],[-46,30],[-15,93]],[[2812,78476],[27,27],[-1,59],[18,0],[10,36],[0,57],[21,33],[5,57],[-10,16],[11,87],[46,106],[16,-26],[27,16],[28,-3],[-9,65],[-12,5],[9,77],[-6,26],[18,76],[40,67],[54,37],[29,-53],[31,1],[2,-23],[-21,-74],[5,-60],[-55,-95],[-65,-72],[-19,-66],[-1,-36],[-28,-81],[-15,-58],[-25,-10],[-28,-71],[-15,-17],[-4,-51],[-15,21],[-27,-49],[-54,-69],[13,45]],[[2752,78371],[29,49],[-1,-45],[-26,-25],[-2,21]],[[2615,78610],[4,50],[19,16],[4,-44],[-9,-45],[-12,-8],[-6,31]],[[2607,82847],[50,-13],[29,5],[10,-14],[-27,-68],[-23,4],[-9,46],[-20,10],[-10,30]],[[2611,78728],[8,-39],[-15,13],[7,26]],[[2547,78457],[17,17],[23,-3],[-2,19],[27,23],[19,-10],[10,-25],[-17,-105],[-30,50],[-25,-29],[-19,14],[-3,49]],[[2517,78521],[8,26],[23,-16],[1,-31],[-14,-31],[-13,16],[-5,36]],[[2497,78313],[4,72],[33,-18],[-7,-57],[-30,3]],[[2431,83489],[9,43],[22,15],[12,-10],[29,22],[-2,-56],[-32,-62],[-5,31],[-33,17]],[[2316,78170],[5,42],[40,72],[31,-27],[1,-27],[-13,-58],[-19,2],[-17,-26],[-15,-48],[-15,21],[2,49]],[[2228,78152],[9,-32],[-16,2],[7,30]],[[2183,78046],[17,42],[16,-37],[-12,-55],[-19,-1],[-2,51]],[[2036,90914],[2,37],[25,87],[-3,75],[8,18],[-5,57],[21,3],[8,-42],[-4,-48],[12,-34],[64,-57],[77,-48],[55,-20],[58,87],[58,58],[58,-14],[29,-69],[23,-15],[15,-104],[-2,-38],[53,-56],[56,-14],[22,-32],[9,-35],[36,-20],[88,-20],[14,6],[102,-55],[-27,-131],[-22,-43],[-51,35],[-43,-1],[-50,-29],[-44,-89],[-10,-61],[1,-53],[-20,-46],[-30,22],[3,24],[-26,119],[-32,62],[-50,60],[-39,-5],[-11,69],[-17,55],[-54,80],[-86,69],[-65,11],[-47,-44],[-18,-58],[-36,-34],[-28,33],[-49,36],[-24,83],[-7,56],[3,73]],[[1818,77819],[15,59],[33,49],[12,-2],[27,-39],[-1,-41],[-28,-51],[-32,-27],[-22,-1],[-4,53]],[[1695,87369],[6,69],[25,52],[11,-3],[-4,-58],[12,-54],[33,-70],[48,-63],[22,-14],[25,13],[57,-94],[-21,-19],[-9,37],[-51,8],[-26,-17],[-33,46],[-58,136],[-37,31]],[[1687,87598],[8,-5],[5,-84],[-20,42],[7,47]],[[1421,77626],[35,0],[33,-31],[9,30],[14,-2],[33,27],[25,-1],[-6,-28],[10,-29],[8,15],[31,-24],[23,16],[10,-11],[32,11],[5,-12],[41,-7],[-25,-23],[-16,6],[-14,-22],[-44,-1],[-22,-35],[-8,16],[-16,-19],[-19,4],[-18,25],[-52,3],[-9,-15],[-29,19],[-10,49],[-11,-1],[-10,40]],[[1064,77503],[55,37],[11,-28],[25,50],[3,-22],[19,38],[5,29],[18,-29],[27,8],[8,34],[6,-24],[35,37],[1,42],[44,10],[-13,41],[43,-5],[13,34],[-1,36],[-32,7],[-23,29],[5,26],[21,-16],[12,36],[-2,39],[38,46],[33,-32],[22,-76],[1,-31],[-21,-85],[-34,8],[-4,-43],[33,-79],[-3,-24],[-15,21],[-17,-10],[-4,-27],[-16,-4],[-20,23],[-19,-95],[-25,31],[-64,-55],[-13,29],[-29,12],[-23,-6],[-13,-35],[-22,-8],[-33,6],[-32,25]],[[1013,77451],[17,17],[7,-29],[-22,-4],[-2,16]],[[1005,77685],[16,-19],[-11,-12],[-5,31]],[[949,77433],[5,9],[40,-3],[1,-26],[-19,3],[-22,-24],[-5,41]],[[890,77452],[11,14],[28,-1],[15,-90],[-16,5],[-17,49],[-21,23]],[[821,77563],[14,45],[26,-9],[23,-80],[-20,-38],[15,-56],[-13,-34],[-18,-2],[-18,22],[3,57],[-7,2],[-8,77],[3,16]],[[811,77269],[5,56],[12,10],[10,-27],[19,10],[-12,22],[34,30],[10,-23],[-2,-55],[-23,0],[13,-52],[-29,29],[2,-40],[-12,12],[-5,-39],[-7,45],[-15,22]],[[601,77040],[11,67],[15,16],[7,36],[-13,66],[4,27],[32,7],[7,59],[-13,69],[10,45],[15,4],[18,-20],[19,59],[9,-14],[3,-74],[-20,-29],[-2,-50],[13,-20],[19,4],[31,26],[30,5],[7,-64],[-7,-88],[-15,-12],[-36,18],[-13,-52],[-18,-12],[-13,-41],[-23,31],[-6,-25],[6,-48],[-11,17],[-13,-26],[-4,55],[-14,29],[-19,-108],[-14,11],[-2,32]],[[469,77371],[13,9],[2,-26],[-14,-17],[-1,34]],[[402,77131],[18,33],[24,-17],[26,34],[50,39],[21,43],[2,128],[12,16],[16,-10],[15,-44],[-26,-98],[5,-86],[-7,-38],[-33,-31],[-36,61],[-27,-33],[-40,-10],[-1,-43],[-10,5],[-9,51]],[[257,77332],[8,29],[29,17],[39,-5],[11,-42],[-2,-30],[19,-32],[15,17],[18,-17],[33,34],[-10,-40],[-41,-32],[-12,-71],[4,-31],[-12,-31],[-8,16],[-9,-44],[8,-57],[-8,-5],[-9,56],[-14,-24],[-16,48],[-13,8],[4,28],[41,25],[-3,64],[-20,1],[-13,34],[-39,66],[0,18]],[[130,77016],[32,-12],[-3,-18],[-27,7],[-2,23]],[[81,76979],[27,-17],[7,-23],[-25,5],[-9,35]],[[77,77233],[14,52],[20,-35],[0,-61],[-19,-10],[-15,54]],[[43,76751],[8,25],[10,-22],[5,-50],[-12,-2],[-10,-32],[-1,81]],[[3,76640],[12,18],[6,-59],[-18,-25],[0,66]],[[99917,77451],[12,-2],[12,35],[26,14],[31,-61],[-9,-68],[-24,-42],[-12,-5],[-25,29],[-11,29],[0,71]],[[99678,77049],[5,24],[26,-29],[19,3],[27,-24],[4,-31],[24,-42],[27,-78],[25,-26],[11,-57],[44,-11],[21,-33],[-18,-19],[-9,14],[-29,-16],[-15,41],[-41,72],[-30,101],[-30,43],[-17,-8],[-22,25],[-22,51]],[[99628,77446],[9,11],[20,-16],[11,-33],[-14,-49],[-10,-4],[-16,91]],[[99570,77271],[19,-7],[21,-67],[-22,15],[-18,59]],[[99530,77510],[7,22],[17,-22],[3,-34],[-17,-20],[-10,54]],[[99282,77351],[24,27],[15,50],[39,26],[6,63],[16,96],[11,18],[20,-52],[-12,-32],[-8,-57],[-20,-53],[21,-18],[0,-35],[-13,-10],[-42,17],[-17,-31],[-4,-70],[-11,2],[-25,40],[0,19]],[[98911,77903],[26,-13],[-18,-27],[-8,40]],[[98408,78327],[22,-8],[3,-26],[-24,15],[-1,19]],[[98376,78346],[14,-8],[0,-29],[-14,37]],[[98352,78374],[20,-27],[-12,-2],[-8,29]],[[98210,77943],[6,31],[19,27],[23,-6],[26,67],[41,5],[-17,-40],[-5,-37],[10,-104],[-21,0],[-17,52],[-35,-19],[-30,24]],[[97960,78551],[47,86],[33,11],[100,-20],[29,-63],[24,-15],[35,-94],[2,-18],[-35,-8],[-21,38],[-17,-71],[-9,-13],[-38,15],[-26,-41],[-27,32],[-12,40],[-3,63],[-32,56],[-35,-24],[-15,26]],[[13347,81071],[9,23],[10,-28],[-5,-52],[-16,34],[2,23]],[[13279,80906],[61,56],[7,-80],[13,-14],[-20,-68],[-24,-1],[-33,63],[-4,44]],[[13241,80901],[26,65],[8,-25],[-26,-58],[-8,18]],[[13234,81005],[16,62],[-2,43],[13,20],[-14,43],[-2,70],[5,39],[11,9],[19,-32],[5,-35],[13,-7],[17,-40],[0,-165],[-9,-34],[-27,-2],[-13,32],[-23,-36],[-9,33]],[[13172,81388],[4,66],[6,1],[52,-135],[-12,-28],[-1,-68],[-15,-111],[-23,74],[-9,113],[-2,88]],[[12999,82714],[4,48],[9,-30],[-13,-18]],[[12979,82569],[2,29],[21,40],[21,-38],[-1,-22],[-24,-37],[-19,28]],[[12954,82690],[20,33],[17,52],[-5,-50],[-18,-75],[-14,40]],[[12888,80934],[18,6],[-4,-53],[-14,47]],[[12850,82395],[7,53],[10,-24],[22,-97],[10,-68],[-13,-15],[-21,61],[-9,4],[-6,86]],[[12838,82543],[18,86],[21,30],[30,-20],[24,22],[28,-42],[4,-36],[-18,-53],[6,-82],[-16,-19],[-44,-22],[-23,65],[-24,29],[-6,42]],[[12768,81460],[21,27],[-2,-46],[-16,-11],[-3,30]],[[12700,80811],[9,0],[10,-128],[-15,29],[-4,99]],[[12674,81692],[9,23],[1,61],[20,-30],[1,-32],[-22,-72],[-9,50]],[[12659,81749],[12,9],[-1,-36],[-11,27]],[[12637,81497],[8,92],[8,25],[32,-9],[10,-16],[-2,-35],[-16,-42],[8,-16],[20,40],[5,43],[13,-19],[19,68],[19,-2],[16,-39],[-5,-60],[-15,-35],[-19,15],[-13,-35],[17,-22],[-2,-37],[-22,-21],[-22,-50],[-9,-97],[-23,78],[17,61],[-1,78],[-29,51],[-14,-16]],[[12629,82086],[11,22],[24,102],[28,10],[11,20],[-22,13],[-1,47],[15,-22],[9,34],[-36,62],[14,29],[-10,86],[23,49],[45,-24],[71,-17],[24,-82],[11,-73],[-5,-69],[14,-6],[13,-68],[17,-48],[17,5],[57,-119],[12,-52],[33,-111],[3,-126],[29,-29],[8,-82],[8,-32],[31,-50],[13,-58],[-10,-6],[-19,46],[-75,98],[-3,-31],[-23,-74],[11,-8],[14,47],[8,-19],[23,10],[5,-37],[20,-13],[10,-29],[-38,-14],[8,-36],[32,21],[14,-52],[16,-14],[11,-87],[8,-9],[-12,-49],[-20,9],[2,-32],[22,-22],[11,8],[3,46],[14,36],[9,-21],[5,-91],[-15,-34],[4,-36],[-22,-94],[-29,-40],[18,-23],[27,59],[15,-10],[0,-203],[7,-72],[-20,-105],[-37,-9],[-26,48],[-14,-19],[-17,38],[-1,37],[-38,-2],[17,53],[27,-10],[1,39],[-19,42],[-19,13],[-35,78],[9,38],[10,115],[-15,9],[-11,-58],[7,101],[8,28],[-11,39],[-5,-55],[-27,-21],[14,-103],[-18,-58],[-47,56],[-4,35],[17,58],[-18,100],[-20,-5],[-10,50],[-21,3],[12,-78],[18,-65],[6,-72],[-7,-36],[15,-17],[20,-145],[24,-26],[-4,58],[24,18],[28,-65],[4,-124],[-14,-16],[-18,74],[-7,-7],[23,-170],[-29,0],[-26,32],[-2,60],[-20,40],[-49,177],[-10,22],[-2,84],[-12,10],[-8,61],[29,8],[-27,33],[3,119],[-33,-28],[-10,26],[-18,-19],[-9,42],[6,84],[33,30],[11,-63],[17,20],[-13,29],[6,39],[14,20],[14,-14],[22,44],[-29,96],[14,12],[-16,32],[4,66],[-24,-21],[-49,87],[-4,28],[16,-1],[-9,50],[3,35],[-27,18],[6,-57],[-10,-13],[-32,39],[-16,58],[12,52],[28,14],[37,-54],[28,35],[-17,67],[-18,16],[-12,-20],[-9,17],[8,30],[-2,42],[7,63],[-5,16],[-13,-47],[-27,-65],[-22,-33],[-23,38],[-5,45]],[[12611,83642],[15,25],[14,-33],[-27,-31],[-2,39]],[[12594,82026],[14,28],[11,-6],[4,-52],[-8,-48],[-10,3],[-11,75]],[[12476,82024],[28,22],[1,-43],[31,33],[8,75],[7,-2],[-9,-101],[-22,-24],[-20,-56],[-18,17],[8,30],[-14,49]],[[12463,83115],[17,52],[16,17],[7,33],[33,-1],[1,26],[28,-40],[11,-83],[18,-54],[31,-2],[9,-21],[10,26],[-29,44],[-13,80],[-2,55],[-35,79],[11,53],[34,26],[51,-37],[25,-9],[47,-44],[31,-20],[7,14],[57,-11],[30,-74],[14,-82],[3,-56],[9,-23],[23,-11],[16,-48],[5,-46],[33,-52],[9,-64],[15,-34],[-31,-38],[-20,-42],[-26,-24],[-16,16],[-31,4],[-43,24],[5,-48],[-23,-51],[-40,25],[-19,29],[-12,-47],[-15,-20],[-25,-2],[-17,15],[-3,87],[-11,32],[-30,-64],[13,-29],[-2,-90],[-23,-3],[-2,-31],[10,-51],[-11,-51],[-2,-62],[-17,-50],[4,-39],[-9,-64],[-10,-11],[-25,15],[-14,-103],[-15,19],[-12,52],[-7,63],[-1,109],[-10,87],[2,75],[14,48],[-3,57],[15,101],[-12,28],[-22,-1],[5,77],[-20,56],[-8,75],[2,43],[-5,91]],[[12311,84926],[43,-96],[7,-47],[14,-9],[8,-130],[19,1],[21,38],[11,-23],[20,-2],[21,-29],[54,13],[-3,-89],[25,-75],[2,-52],[21,-52],[14,-87],[17,-55],[2,-142],[21,-60],[4,-65],[-9,-2],[-5,47],[-38,120],[-10,115],[-19,37],[-9,53],[-21,0],[26,-101],[4,-34],[-13,-23],[35,-121],[23,-49],[-2,-62],[24,-113],[-19,6],[15,-102],[0,-27],[-25,-62],[-20,26],[-17,-1],[4,-34],[-21,-104],[-38,-83],[-24,-25],[-2,-33],[-31,-65],[-29,3],[-9,89],[-4,135],[21,80],[15,23],[-16,31],[-1,69],[14,6],[12,-39],[6,23],[-40,141],[-1,58],[-18,60],[-5,82],[-11,43],[8,125],[-12,81],[-3,95],[-11,91],[4,44],[-20,93],[-17,45],[-9,77],[-6,101],[3,42]],[[12292,85061],[35,-45],[27,-125],[-10,-5],[-22,115],[-23,19],[-7,41]],[[12202,85643],[15,-71],[0,-46],[-10,29],[-5,88]],[[12106,83714],[16,11],[1,26],[28,65],[-4,68],[36,64],[18,-12],[25,-85],[15,10],[18,-58],[23,-24],[38,4],[22,-14],[12,-79],[-2,-49],[-20,35],[-19,-2],[-1,-22],[21,-25],[11,-46],[29,-278],[-1,-71],[12,-56],[0,-58],[18,-142],[5,-107],[-5,-112],[-11,1],[8,-81],[3,-240],[-9,-111],[-11,6],[-28,70],[-10,86],[-21,59],[-40,212],[4,48],[22,23],[-18,30],[-26,-31],[-14,88],[-11,-15],[-17,42],[-12,55],[2,34],[-14,-22],[-10,24],[-30,2],[-19,96],[19,3],[10,-29],[10,13],[-3,105],[19,53],[6,38],[-39,86],[24,63],[-4,22],[14,35],[4,53],[-33,16],[-21,-28],[-14,79],[-26,72]],[[12097,84881],[16,18],[19,-7],[16,-52],[-29,-6],[-22,47]],[[12062,83572],[4,48],[-3,66],[25,9],[34,-62],[15,-74],[12,-19],[17,30],[23,-10],[-16,-82],[-24,-14],[-27,-161],[-12,6],[-40,-30],[-9,8],[3,102],[25,47],[1,50],[-22,4],[2,29],[-13,31],[5,22]],[[11978,85151],[9,14],[7,-59],[-16,45]],[[11978,84786],[30,41],[3,-53],[-16,-19],[-17,31]],[[11861,84371],[5,174],[16,33],[8,-9],[29,60],[3,51],[-12,92],[32,-2],[0,-54],[12,-60],[28,61],[29,-6],[17,-20],[17,49],[36,50],[14,-55],[41,-30],[25,-53],[-12,-78],[-31,-76],[4,-49],[12,-5],[8,60],[32,108],[15,12],[34,-55],[46,-10],[11,-32],[29,-16],[15,-79],[-4,-67],[-22,-44],[-37,49],[-10,-8],[12,-40],[18,-18],[33,-75],[-21,-29],[-25,-2],[4,-28],[21,-13],[23,24],[7,-95],[14,-69],[12,-143],[-14,-42],[-42,-11],[-17,12],[-44,95],[-65,99],[-27,50],[-22,-26],[-9,29],[-4,-32],[30,-55],[22,-8],[-21,-31],[6,-25],[0,-72],[-9,-50],[-31,-87],[-51,47],[-1,38],[-42,85],[-20,90],[-12,-38],[-19,43],[-10,79],[4,25],[-18,86],[2,24],[-16,57],[-26,30],[-7,49],[-25,36]],[[9331,87212],[28,-14],[12,-44],[-27,-9],[-13,67]],[[9232,87245],[16,14],[58,-26],[-3,-31],[-21,-10],[-50,53]],[[8867,87809],[26,35],[27,3],[15,-16],[-18,-53],[-50,31]],[[8817,87545],[4,86],[28,16],[21,-89],[-11,-44],[-37,-10],[-5,41]],[[8816,87079],[2,14],[43,47],[1,-36],[-40,-59],[-6,34]],[[8698,86532],[8,21],[3,71],[23,12],[-3,42],[21,54],[16,7],[-3,41],[30,34],[9,30],[43,75],[22,118],[27,44],[-3,40],[10,71],[27,34],[4,-43],[24,2],[-17,-51],[9,-17],[24,28],[8,-22],[-11,-37],[-62,-118],[-49,-129],[-8,-80],[-33,-60],[30,-57],[-19,-42],[-23,-8],[-22,15],[-17,-57],[-9,6],[-45,-47],[-14,23]],[[8692,87068],[44,270],[11,-41],[12,13],[-4,66],[44,84],[0,-54],[-12,-32],[-3,-82],[-20,-37],[20,-42],[-24,-97],[2,-46],[-17,-104],[-24,45],[-3,25],[-25,7],[-1,25]],[[8672,87628],[15,31],[17,-19],[17,-48],[-24,-45],[-25,81]],[[17950,55027],[5,31],[24,-13],[25,26],[-2,40],[18,63],[1,79],[-15,136],[-16,8],[-7,-13],[-13,25],[-3,-17],[-14,68],[7,67],[2,142],[-15,41],[9,65],[-8,51],[19,9],[28,138],[9,24],[-4,46],[4,110],[8,12],[-2,74],[-7,64],[1,51],[6,6],[-2,55],[-7,20],[28,116],[0,69],[8,28],[23,29],[10,40],[17,21],[1,19],[25,65],[-1,49],[-11,54],[-14,19],[-31,100],[-13,7],[2,58],[-26,239],[-23,63],[-7,69],[-16,57],[1,147]],[[17974,57684],[6,95],[-10,22],[21,43],[0,72],[-9,178],[-6,65],[-11,47],[-4,58],[6,36],[0,103],[-9,38],[3,39],[-7,31],[3,51],[-5,59],[4,56],[9,24],[-10,31],[-12,97],[4,43],[-7,80],[25,31],[9,29],[5,-14],[12,25],[17,-1],[2,-25],[24,19],[13,-3],[18,-71],[-2,-28],[21,-51],[24,11],[24,183],[5,15],[1,230],[-2,272],[0,437]],[[18136,60011],[200,0],[222,0],[313,1],[97,1],[160,2],[6,-7],[235,0],[162,1]],[[19531,60009],[0,-1691],[-1,-237],[1,-30],[0,-925],[-1,-608],[1,-145],[-1,-113],[0,-2847]],[[19530,53413],[-64,2],[-201,-1],[-128,-1],[-172,0],[-359,476],[-212,269],[-102,136],[-368,471],[5,66],[-5,17],[1,60],[8,16],[17,103]],[[19530,64667],[242,0],[154,2],[327,0],[66,-5],[137,-1],[242,1],[7,2],[217,2]],[[20922,64668],[282,1],[135,0],[140,0],[0,-1163]],[[21479,63506],[1,-381],[0,-434],[1,-193],[0,-1270],[1,-137],[0,-1089]],[[21482,60002],[-183,3],[-22,5],[-62,1]],[[21215,60011],[-204,-3],[-169,-5],[-184,0],[-34,2],[-301,-1],[-186,-2],[-2,9],[-152,-1],[-230,-1],[-222,0]],[[19531,60009],[0,583],[1,36],[0,738],[-5,129],[0,517],[2,216],[0,1857],[1,46],[0,536]],[[27414,45876],[14,60],[5,-33],[-14,-44],[-5,17]],[[27386,45813],[9,39],[11,4],[-5,-33],[-15,-10]],[[27310,45701],[52,90],[6,-30],[-45,-80],[-13,20]],[[27118,45540],[19,106],[20,46],[25,43],[3,23],[36,66],[38,-67],[4,-52],[14,-43],[-4,-11],[-40,-48],[-3,27],[-27,-5],[-3,-24],[-46,-73],[-36,-15],[0,27]],[[27062,45510],[39,24],[-10,-43],[-17,-14],[-13,8],[1,25]],[[27020,45533],[6,35],[12,-10],[-5,-41],[-13,16]],[[26992,48019],[5,-18],[19,-211],[8,-28],[17,-26],[7,17],[14,-21],[-14,-31],[-9,-1],[-21,50],[-7,28],[-13,115],[-6,76],[0,50]],[[26806,45614],[15,13],[4,-23],[-20,-10],[1,20]],[[26322,51623],[29,47],[0,-29],[-16,-37],[-11,-6],[-2,25]],[[26229,53027],[6,-79],[11,-52],[2,-83],[6,-75],[14,-48],[136,-25],[261,-56],[206,-51],[135,-34],[-5,-14],[2,-57],[7,-26],[-3,-71],[11,-76],[37,13],[0,75],[6,47],[3,119],[-12,91],[4,60],[-1,49],[8,16],[-4,24],[12,-8],[9,59],[15,-7],[7,-33],[17,-3],[18,-28],[7,-25],[33,-19],[17,-18],[14,15],[13,-19]],[[27221,52688],[4,-13],[-4,-113],[3,-92],[-4,-22],[10,-25],[4,-95],[1,-113],[23,-389],[13,-129],[0,-51],[28,-302],[32,-288],[29,-229],[65,-412],[38,-200],[4,-63],[10,-83],[-18,-57],[-4,-54],[-1,-87],[5,-130],[6,-96],[16,-145],[35,-269],[15,-166],[5,-84],[5,-29],[11,-140],[17,-152],[9,-66],[6,-94],[13,-109],[17,-258],[-1,-235],[-7,-175],[-5,-210],[-3,-37],[-8,-286],[0,-169],[-3,-80],[-7,-81],[0,-44],[-6,23],[3,51],[-5,20],[-16,-25],[-10,-102],[-6,-17],[-1,-64],[-8,-40],[-2,-78],[5,-33],[-2,-46],[6,-16],[-8,-53],[-8,-13],[-1,-49],[21,39],[25,194],[7,41],[0,-41],[-8,-83],[-34,-222],[-9,-82],[-25,-93],[-34,-139],[-24,-66],[-3,12],[34,122],[14,40],[7,53],[3,81],[5,32],[-6,23],[-9,-11],[-7,26],[-6,-18],[-34,-22],[-14,-41],[-9,-6],[-18,45],[-18,-13],[-7,-41],[-27,-18],[-23,-6],[-17,52],[-8,68],[2,79],[6,60],[6,-3],[-2,49],[-12,97],[-11,47],[2,34],[-8,62],[-11,32],[-5,85],[-6,18],[-11,-15],[-9,101],[-24,31],[-1,16],[-21,38],[-21,55],[-11,-13],[-8,-39],[-16,126],[-15,148],[-5,173],[-7,109],[-7,57],[-28,113],[-11,9],[-1,52],[-12,23],[0,-64],[-14,-11],[-1,66],[-8,113],[-12,51],[3,24],[13,-3],[9,-39],[11,159],[-2,86],[-8,14],[0,40],[8,10],[-4,31],[-12,-4],[-5,-33],[-11,-11],[8,-148],[-9,-20],[-20,-11],[-5,-50],[0,75],[-6,50],[-17,94],[-26,177],[-9,94],[-19,140],[-27,149],[-14,56],[-4,58],[-10,61],[10,-19],[1,-30],[15,30],[10,72],[12,28],[13,98],[13,34],[-2,23],[14,26],[11,84],[-5,75],[-22,21],[5,-113],[-22,30],[6,34],[-1,65],[-5,39],[-38,71],[1,-65],[-11,-28],[11,-37],[16,-6],[11,-110],[-10,-42],[0,-62],[-4,-27],[-21,-6],[-3,-32],[7,-38],[-9,-30],[-4,40],[2,83],[-14,85],[-9,26],[-8,58],[6,182],[-5,66],[-4,164],[9,1],[0,-93],[4,-89],[9,-7],[-4,153],[9,37],[1,41],[8,44],[0,38],[7,50],[0,39],[9,47],[1,91],[5,83],[-6,66],[2,56],[-13,29],[4,42],[-9,109],[12,64],[-21,110],[3,31],[-8,55],[-10,3],[5,33],[-1,49],[-7,13],[-47,23],[-9,-51],[-7,-4],[-9,100],[3,45],[-14,32],[-12,9],[-2,63],[-7,58],[-11,45],[-15,6],[-5,44],[-24,48],[0,111],[-4,67],[-12,7],[-10,38],[-13,17],[-13,61],[0,42],[-9,35],[-5,51],[-14,44],[-28,62],[-40,72],[-26,75],[-11,-2],[-26,-33],[-31,29],[-1,-35],[-26,-69],[9,-99],[-3,-28],[-10,-7],[-15,15],[-5,26],[-24,-22],[-31,-73],[-65,-132],[-6,2],[7,44],[-10,12],[-7,-39],[-15,-41],[-36,1],[13,-49],[2,-38],[16,-22],[30,53],[29,40],[27,84],[3,-13],[-24,-82],[-28,-43],[-35,-66],[-12,-14],[-10,33],[-16,22],[-23,51],[-19,7],[-17,-28],[-13,94],[-5,119],[8,42],[0,-105],[6,-91],[7,-22],[10,39],[1,97],[-17,105],[-18,60],[-17,13],[-15,40],[-16,71],[-27,47],[-22,69],[-41,95],[-47,76],[-58,70],[-31,20],[-62,18],[-33,-5],[-47,-25],[-65,-49],[-32,-15],[-7,10],[-63,-51]],[[26061,57664],[39,-2],[136,6],[183,1]],[[26419,57669],[196,-2],[-1,6],[143,10]],[[26757,57683],[-3,-72],[-31,-68],[-26,-105],[1,-36],[-8,-26],[3,-64],[30,-82],[17,-7],[23,-104],[23,-51],[28,16],[8,-12],[8,-64],[3,-64],[12,-30],[3,-50],[11,-52],[0,-51],[7,-68],[12,-24],[8,-67],[14,-48],[11,-101],[9,-1],[19,-72],[29,-52],[29,-98],[4,-61],[9,-41],[1,-40],[13,-38],[12,-2],[17,-37],[18,-93],[15,-26],[4,-24],[-7,-43],[4,-39],[-4,-32],[28,-82],[-4,-30],[13,-42],[11,5],[-2,-41],[8,-45],[27,-55],[9,1],[16,-58],[19,-43],[-5,-67],[12,-64],[2,-49],[9,-15],[0,-85],[4,-32],[-5,-45],[6,-8],[4,-48],[-5,-41],[12,-48],[25,-26],[0,-23],[23,-81],[-4,-34],[15,-105],[4,4],[6,-76],[-10,-44],[11,-67],[-4,-26],[5,-62],[21,-34],[11,17],[22,-71],[9,-4]],[[27376,54230],[12,-12],[-5,-64],[-14,-29],[-10,15],[-6,-48],[10,-8],[-16,-60],[-21,23],[-3,-56],[11,-11],[-9,-59],[-17,-54],[-17,13],[-3,-16],[12,-33],[8,5],[-1,-84],[-7,-62],[-28,-26],[0,-22],[17,10],[6,-24],[-23,-131],[-6,-91],[7,-13],[-5,-30],[-5,-97],[-13,-22],[-8,-59],[-9,-3],[0,-71],[-7,-69],[-7,2],[-12,-44],[13,-24],[11,24],[1,-81],[-16,-161],[5,-70]],[[25527,65491],[15,-41],[12,20],[7,-15],[-6,-40],[27,-23],[29,1],[28,25],[52,75],[31,59]],[[25722,65552],[90,-1],[198,-1],[187,1],[87,1],[0,-75]],[[26284,65477],[1,-242],[0,-1380],[-3,-437],[0,-441],[-2,-278],[0,-238]],[[26280,62461],[-19,-45],[-2,-20],[16,-71],[2,-31],[-11,-38],[3,-37],[17,-7],[4,-25],[-13,-46],[6,-44],[-22,3],[-16,-23],[-9,5],[-35,-63],[-14,-39],[-19,10],[-10,43],[-26,-7],[-16,7],[-12,-33],[4,-125],[6,-71],[-16,-40],[-7,-44],[-30,-34],[-19,-161],[-19,-39],[-14,24],[-10,-13],[-6,-63],[-16,-72],[1,-87],[-5,-70],[-8,-24],[-23,-18],[-4,-36],[-13,58],[-22,1],[-26,55],[-1,94],[-21,67],[-8,-2],[1,-34],[13,-12],[-1,-25],[-13,-2],[-8,-29],[-8,23],[-9,-29],[9,-17],[-6,-42],[-18,-9],[-2,-94],[5,-38],[-23,-9],[-2,-63],[-11,-29],[-7,24],[5,51],[-10,10],[-10,-25],[-10,22],[-12,89],[-17,-2],[-14,-52],[-29,-27],[-10,-30],[-5,-97],[-7,-27],[-11,-3],[-8,62],[-18,13],[-22,57],[-22,44],[-20,6],[-14,-37],[-14,19],[-6,49],[-8,6],[-7,-66],[11,-64],[-13,-40],[-11,3],[3,56],[-5,30],[-42,-31],[-11,52],[-9,4],[-10,-40],[10,-91],[-12,-47],[-23,32]],[[25386,60941],[-11,2],[-4,34],[12,-9],[-16,92],[24,-8],[-15,29],[15,67],[1,60],[-8,26],[19,19],[2,38],[-12,-19],[22,73],[-14,60],[-4,59],[9,-10],[9,68],[5,-35],[7,41],[8,-33],[13,102],[8,9],[13,84],[-2,38],[24,42],[0,66],[9,83],[7,32],[14,12],[14,76],[-1,42],[-15,94],[11,111],[-18,40],[1,79],[-16,55],[-3,73],[19,60],[-9,50],[2,60],[6,32],[13,9],[0,347],[-1,0],[0,397],[1,12],[0,294],[1,247],[0,1196],[1,254]],[[21479,63506],[257,-1],[104,0],[263,-1],[273,1],[163,0],[279,-1],[263,-1],[144,0],[133,0]],[[23358,63503],[16,-60],[13,-11],[1,-43],[13,6],[5,-36],[26,-14],[8,41],[24,-13],[-4,-28],[7,-33],[11,-11],[-4,-42],[-9,-1],[3,-36],[12,16],[-1,-49],[-10,-6],[-13,24],[-5,-75],[-15,-19],[-7,-41],[2,-41],[-17,-24],[1,-48],[15,-41],[1,-29],[16,-31],[12,-61],[14,0],[5,-21],[-9,-25],[6,-79],[18,-52],[-3,-28],[15,-13],[5,-31],[14,-11],[9,16],[5,-31],[20,-3],[-5,-41],[0,-444],[-1,-120],[0,-696],[-1,-52],[0,-779],[-1,-97],[0,-281]],[[23550,60009],[-249,1],[-196,-1],[-169,0],[-218,0],[-208,-1],[-258,2],[-103,0],[-154,3],[-149,-4],[-209,-4],[-155,-3]],[[30863,68384],[14,7],[-7,-35],[-7,28]],[[30827,68345],[7,83],[6,-34],[19,-55],[-15,-45],[-5,34],[-12,17]],[[30819,68560],[3,42],[11,-71],[-14,29]],[[30732,68434],[14,2],[3,-41],[-17,39]],[[30712,67988],[8,37],[1,-75],[-9,38]],[[30703,68290],[8,41],[25,45],[11,-50],[-9,-8],[14,-78],[-11,-39],[-18,-13],[-12,24],[5,25],[-3,50],[-10,3]],[[30697,68452],[13,68],[2,64],[9,25],[6,-26],[-9,-35],[1,-36],[-8,-70],[-10,-29],[-4,39]],[[30213,67064],[-35,81],[0,69],[6,42],[-41,128],[-9,53],[8,101],[-4,10],[6,88],[-6,23],[-5,313],[0,89],[-11,861],[-15,757]],[[30107,69679],[21,15],[0,33],[25,-41],[-1,-38],[7,-43],[11,-15],[13,85],[2,86],[-6,28],[12,36],[8,-3],[12,-44],[21,-9],[1,39],[-24,83],[-1,32],[22,107],[14,27],[11,43],[8,-1],[15,41],[24,38],[-9,71],[21,66],[23,45],[5,56],[-7,28],[-14,0],[0,66],[10,38],[-8,14],[15,51],[5,46],[-15,44],[16,115],[8,18],[-1,37],[17,32],[14,59],[11,8],[17,324],[215,890],[13,-3],[27,-38],[11,4],[-3,-58],[1,-141],[4,-18],[37,-73],[25,43],[26,30],[28,2],[11,52],[30,11],[25,-12],[0,62],[16,23],[25,-6],[23,-36],[4,-32],[33,-68],[36,-132],[0,-15],[28,-51],[0,-545],[3,-693],[-1,-71],[9,-30],[-15,-39],[14,-70],[-15,-34],[1,-136],[23,-18],[3,20],[10,-57],[19,-28],[30,-23],[14,19],[8,-62],[1,-56],[-13,8],[-11,-22],[7,-68],[16,-63],[-9,-73],[-10,-41],[23,-116],[0,-23],[18,-40],[13,28],[1,46],[18,-30],[19,-3],[13,-56],[6,-51],[-8,-14],[10,-32],[12,-98],[15,-38],[1,-118],[-12,-50],[-10,2],[-4,-32],[-32,-113],[-24,-25],[4,-22],[-15,-8],[6,42],[-4,85],[-27,-30],[12,-58],[-12,-43],[-11,13],[-13,-58],[-13,18],[-10,-12],[2,-35],[16,-40],[-22,-57],[-13,46],[-6,57],[-13,-10],[-3,-38],[-8,3],[-7,59],[-7,-62],[-9,-14],[-8,-74],[-7,19],[-6,-48],[-4,42],[-20,-51],[-5,27],[-12,-92],[-16,39],[0,36],[-10,-21],[-11,9],[2,-66],[-16,-71],[11,-33],[-35,-16],[-23,32],[-16,107],[6,29],[22,27],[-9,45],[-13,-35],[2,44],[-10,-3],[1,-68],[-5,0],[0,64],[-24,-56],[5,-35],[-6,-43],[14,-67],[-3,-45],[-23,-77],[9,-11],[-12,-31],[11,-56],[-5,-69],[-16,-10],[-3,85],[6,4],[-3,55],[-17,45],[-4,64],[15,51],[-19,40],[6,26],[-10,10],[-18,-21],[1,113],[11,44],[1,50],[-7,14],[-7,-46],[-14,-40],[-11,33],[-7,-32],[-15,-4],[14,-81],[-3,-48],[-12,-23],[-10,-71],[-4,-72],[-13,-78],[19,-30],[-13,-28],[10,-57],[-10,-38],[-27,4],[-13,-72],[-15,-1],[-2,-58],[-11,-9],[0,52],[7,37],[-9,15],[-3,-30],[-12,-13],[5,65],[-18,-9],[1,-52],[-16,-37],[-5,-50],[-12,51],[-2,-47],[-15,-32],[-12,26],[-3,-66],[-13,51],[-13,-92],[-23,-27],[-5,-19],[-5,83],[-16,5],[-15,-42],[-5,-39],[-20,4],[-7,-49],[-20,4],[-10,-49],[-3,-50],[5,-29],[-8,-32],[-13,29],[-22,-31],[-9,-46],[6,-67],[-8,-43],[-10,-15],[3,-33],[-14,-24],[-14,4],[-10,-25],[-11,-98],[5,-19],[-14,-80],[1,-22],[-14,-74],[-9,-13]],[[30332,65028],[13,-24],[29,5],[18,17],[12,70],[16,-105],[-1,-30],[-10,-16],[-33,4],[-41,60],[-3,19]],[[30177,65078],[18,0],[19,90],[27,60],[11,-15],[7,-70],[15,-27],[10,40],[-1,-84],[-41,1],[-31,-9],[-18,-47],[-16,61]],[[29500,66699],[224,-22]],[[29724,66677],[199,-23],[126,-12],[10,46],[21,1],[-1,62],[15,36],[19,-18],[9,62],[36,32],[15,-30],[8,13]],[[30181,66846],[2,-72],[9,-136],[25,-47],[12,42],[14,-34],[-16,-90],[-23,-7],[-38,-35],[12,-50],[-18,-50],[-7,9],[-5,-59],[-4,41],[-11,-53],[11,-74],[-13,10],[-5,-28],[8,-26],[-5,-27],[14,-14],[6,36],[14,8],[9,-47],[24,-28],[12,-42],[2,-46],[21,-93],[-1,-50],[-7,-39],[-12,-5],[3,-24],[21,-51],[12,8],[8,-24],[8,-83],[-5,-50],[13,-48],[23,-35],[34,-12],[9,-23],[19,44],[19,8],[27,33],[6,25],[-1,79],[-6,61],[-13,-31],[0,97],[-5,55],[-15,34],[-9,-7],[-5,-39],[-11,59],[13,11],[21,-18],[23,-58],[18,-123],[9,-119],[2,-137],[-15,-129],[-2,-44],[-7,9],[12,112],[-7,23],[-26,-5],[-43,-40],[-30,8],[-7,-28],[-17,-7],[-15,-62],[-33,-10],[-34,-66],[-16,-47],[-21,-28],[-23,-15],[6,26],[35,34],[16,47],[24,49],[5,40],[-2,117],[6,41],[-26,26],[0,-59],[-7,14],[-4,-50],[-14,3],[2,-32],[-31,-11],[-7,-49],[2,-44],[-6,-29],[-25,-23],[-12,17],[-10,-14]],[[30097,65246],[-3,189],[-18,18]],[[30076,65453],[-8,41]],[[30068,65494],[-10,48],[-19,33],[-5,56],[2,81],[-12,-6],[0,147],[-116,-13]],[[29908,65840],[-1,18],[-202,13],[-22,-4],[-42,6],[-3,-39],[-14,-6],[1,45],[-54,3],[-118,14],[-15,-1]],[[29438,65889],[-6,42],[34,395],[34,373]],[[22823,73980],[83,-1],[266,0],[229,-1],[0,449],[27,-37],[28,20],[29,-53],[8,-35],[14,-202],[7,-25],[18,-251],[-6,-69],[4,-54],[14,-43],[29,-45],[24,-12],[8,19],[44,-11],[11,-58],[61,-7],[48,-21],[8,-66],[-3,-49],[6,-12],[42,2],[5,15],[22,-2],[23,20],[-1,48],[33,46],[39,18],[9,-22],[53,0],[72,-98],[26,4],[1,-49],[-19,-7],[-4,-37],[16,-31],[41,13],[15,-54],[-6,-34],[6,-49],[24,-127],[25,27],[-8,84],[13,45],[15,-11],[42,16],[16,-44],[-2,-65],[17,-41],[14,9],[9,-36],[41,-9],[5,-67],[-4,-31],[20,-21],[23,13],[-3,-75],[22,28],[14,-22],[19,24],[34,17],[46,113],[17,13],[13,32],[25,30],[14,-13],[0,-67],[17,-17],[-6,-26],[10,-48],[16,-3],[35,29],[6,-29],[25,15],[26,-18],[19,13],[48,8],[29,-28],[9,-66],[34,-53],[15,35],[20,9],[13,-20],[23,6],[11,-18],[25,22],[-27,-56],[-10,20],[-4,-34],[-17,-15],[-26,-58],[-37,-34],[-14,-37],[-52,-44],[-48,-54],[-15,-6],[-42,-45],[-4,-14],[-51,-77],[-37,-79],[-72,-183],[-17,-69],[-55,-178],[-26,-72],[-26,-41],[-26,-88],[-11,-11],[-28,-83],[-10,-10],[-61,-134],[-9,-25],[8,-50],[14,-46]],[[24276,71309],[-21,50],[-14,-11],[-3,-29],[-16,-14],[9,-19],[-11,-43],[-22,16],[0,-685],[-10,-10],[-6,-59],[-24,7],[-10,-56],[-14,13],[-8,-38],[-25,-23],[-20,-47],[-20,-148],[-22,-49],[-7,-114],[1,-53],[21,-21],[10,9],[14,-32],[-1,-31],[23,-85],[-1,-50],[-15,-47],[1,-29],[-17,-49],[2,-91],[-4,-32],[6,-91],[-16,-58],[11,-34],[-2,-65],[6,-41],[-7,-42],[3,-75],[-12,-80],[5,-36],[16,-27],[31,-87],[-1,-24],[14,-16],[9,-44],[50,-9],[12,-17],[10,-78],[14,-38],[50,-51],[22,-39],[14,-40],[0,-53],[8,-15],[5,-84],[17,-45],[27,-41],[3,-29],[36,-90],[39,-29],[15,-55],[30,-136],[9,-75],[-8,-113],[2,-71],[10,-37],[-4,-44],[8,-53]],[[24498,67577],[-204,0],[-224,0],[-116,-1],[-223,0],[-180,1],[-313,0],[-199,0]],[[23039,67577],[0,1215],[1,101],[-1,302],[0,479],[-10,65],[-36,59],[-18,4],[-14,55],[-9,73],[-26,98],[5,46],[25,62],[22,39],[12,63],[14,46],[4,128]],[[23008,70412],[-4,106],[6,37],[-11,188],[-1,129],[-13,27],[-20,98],[-5,49],[-4,119],[-11,57],[-2,39],[5,68],[-6,112],[5,17],[6,117],[-6,-11],[-11,51],[1,171],[-5,92],[-2,114],[3,50],[-7,103],[1,217],[-5,3],[-7,89],[-11,92],[-8,17],[-11,101],[-3,58],[-11,34],[-5,121],[-16,101],[-3,110],[7,53],[-8,93],[3,52],[-1,107],[-7,59],[7,76],[9,24],[3,62],[-15,80],[-8,124],[-6,24],[-11,98],[3,40]],[[28860,63072],[14,65]],[[28874,63137],[9,32],[5,61],[12,42]],[[28900,63272],[17,44],[38,25],[25,45],[0,69],[16,25],[7,33],[34,72],[18,15],[12,51],[10,-8],[17,39],[-14,71],[-20,41],[-7,52],[-21,54],[-7,68],[-25,19],[-4,45],[2,95],[-10,37],[-17,-5],[-9,14],[-2,83],[7,30],[-8,22],[9,100],[11,-5],[23,113],[-24,120],[13,48],[18,29],[16,56],[-4,24],[17,35],[11,49],[14,124],[22,69],[16,13]],[[29101,65083],[88,-173],[132,-246],[3,-19],[-20,-187],[-12,-65],[-4,-65],[-6,-22]],[[29282,64306],[-7,-34]],[[29275,64272],[-37,-35],[-4,-84],[-9,-16],[-3,-50]],[[29222,64087],[0,-43],[19,-28],[16,18],[24,-44],[14,-9],[4,44],[4,-90],[-3,-107],[-14,-182],[-13,-247],[-5,-173],[-40,-241],[-11,-48],[-9,-9],[3,-32],[-10,-55],[-20,-63],[-1,-19],[-31,-55],[-32,-108],[-21,-118],[-22,-149],[-20,-60],[-19,-14],[-11,14],[6,88],[15,97],[3,69],[-21,37],[-18,4],[-6,25],[-18,-3],[-7,-36],[-9,24],[-2,47],[-18,37],[-3,30],[-10,-12],[-15,68],[-7,-8],[-18,58],[-10,56],[-19,25],[6,140],[-12,29]],[[28861,63044],[-1,28]],[[28814,58772],[18,-19],[12,-74],[1,-47],[-15,9],[2,45],[-18,86]],[[28734,57762],[8,60],[8,0],[47,86],[15,12],[14,33],[12,2],[16,35],[13,10],[5,74],[11,252],[0,54],[-8,95],[-6,105],[3,-2],[11,-106],[5,-95],[-3,-136],[-15,-286],[-24,-8],[-50,-64],[-43,-78],[-19,-43]],[[27156,59531],[84,-16],[55,-3],[95,-15],[37,4],[114,-21],[48,-2],[170,-2],[279,0],[74,4],[264,0],[106,-1],[0,10],[31,-2],[120,0],[142,0]],[[28775,59487],[2,-58],[17,-245],[16,-158],[23,-156],[35,-271],[-9,14],[-18,146],[-14,80],[-13,11],[-9,174],[-16,155],[-8,23],[3,39],[-5,89],[-10,30],[-4,48],[-25,13],[-1,40],[-13,-20],[6,-61],[16,-48],[11,10],[0,-67],[15,-135],[9,-61],[-1,-26],[11,-75],[0,-47],[-19,64],[1,37],[-13,61],[-3,38],[-12,12],[6,-38],[-3,-28],[14,-39],[-31,25],[-32,118],[-15,12],[19,-97],[10,-17],[6,-52],[-9,-23],[-24,-14],[-21,71],[7,-63],[10,-27],[-7,-14],[-31,45],[-13,5],[-5,29],[-18,24],[23,-73],[21,-23],[-7,-19],[-24,-8],[-13,-62],[-16,-22],[-17,1],[-8,31],[-20,12],[-12,121],[0,61],[12,78],[-5,13],[-14,-76],[-2,-76],[8,-94],[11,-77],[-5,-42],[8,-34],[40,10],[37,47],[9,-49],[13,6],[13,30],[26,24],[32,-1],[14,-41],[0,-43],[-14,-78],[3,-55],[2,-164],[9,5],[7,115],[3,150],[14,40],[-6,33],[14,20],[25,-21],[16,-94],[7,-65],[-4,-52],[7,-98],[-8,-25],[4,-54],[-13,-54],[-17,-10],[-6,18],[-10,-16],[-6,-40],[-10,-9],[-3,-43],[-7,-11],[-7,-71],[-13,-15],[-3,-46],[-17,-25],[-3,-24],[-26,25],[-29,-4],[-26,18],[-5,25],[-10,-14],[-15,45],[-13,115],[31,3],[5,45],[-28,-25],[-12,11],[-9,-33],[9,-57],[6,-86],[-7,0],[-29,47],[-14,-10],[-20,34],[-31,30],[-23,48],[-1,-29],[17,-61],[21,-5],[63,-102],[46,-28],[8,-31],[1,-40],[-7,-56],[-13,-54],[1,-28],[-9,-53],[-15,-42],[-50,-112],[-50,112],[1,-65],[24,-55],[36,-43],[36,80],[13,2],[27,30],[4,62],[11,-14],[3,-66],[8,-31],[18,-5],[-9,75],[20,-29],[2,-85],[-17,-75],[-18,-13],[0,-34],[-11,-20],[-14,-84],[-7,-71],[-17,20],[1,80],[-10,19],[1,-82],[-16,-7],[42,-64],[23,123],[33,120],[24,75],[47,176],[8,-21],[-28,-83],[-26,-96],[-22,-62],[-21,-78],[-18,-82],[-21,-115],[-3,-32],[-4,67],[-35,55],[-39,1],[-60,-38],[-29,-33],[-20,-32],[-32,-81],[-39,-75],[-26,-63],[-37,-113],[-14,-55],[-25,-128],[-14,-111],[-10,-112],[-9,-69],[-4,-69],[-13,7],[-3,34],[-21,21],[-23,9],[-28,-2],[-30,-12],[-35,-42],[-8,-17]],[[28030,56345],[-93,330],[-104,362],[-31,116],[-88,302],[-61,1],[-74,7],[-178,10],[4,135],[-42,199],[-30,-73],[-5,21],[7,48],[-2,53],[-55,13],[-105,16],[-188,29],[-23,-20],[-5,39],[-12,-52],[-7,9],[-20,-27],[-6,5],[-29,-47],[-28,-60],[-7,21],[-91,-99]],[[26419,57669],[9,275],[22,48],[3,-26],[28,4],[22,63],[-5,57],[9,25],[-4,44],[17,62],[13,15],[8,48],[16,8],[15,45],[80,7],[11,50],[22,32],[5,26],[10,-7],[16,48],[4,35],[16,4],[8,40],[21,29],[24,-18],[26,115],[-3,63],[10,30],[15,-36],[20,98],[33,70],[10,-40],[-5,-70],[15,-20],[28,62],[15,93],[15,35],[17,21],[12,-5],[9,33],[19,-12],[4,-50],[15,0],[14,28],[33,200],[21,53],[11,12],[8,-23],[17,0],[-10,74],[7,65],[6,12],[-4,80],[9,60]],[[20923,73979],[188,-1],[322,0],[212,0],[92,0],[193,1],[160,-1],[135,0],[141,1],[256,1],[201,0]],[[23008,70412],[-210,-1],[-186,1],[-119,1],[-252,4],[-192,2],[-179,2],[-253,1],[-123,0],[-292,1],[-173,0],[-105,0]],[[20924,70423],[0,2828],[-1,17],[0,711]],[[23550,60009],[0,-581]],[[23550,59428],[6,-130],[7,-206],[6,-127],[14,-355],[4,-82],[15,-387],[-2,-319],[-3,-261],[-1,-235],[-2,-170],[-2,-417],[-5,-642]],[[23587,56097],[-9,-25],[-19,73],[-16,-13],[-1,23],[-17,-1],[-18,79],[-15,-16],[-12,5],[-21,78],[-7,58],[-22,2],[-23,85],[-27,28],[-7,-68],[-11,-32],[-13,-7],[-34,4],[0,15],[-21,-7],[-7,61],[-10,3],[-24,-52],[-20,3],[1,-45],[-13,9],[-9,-31],[-29,61],[-1,-30],[-30,-29],[-15,13],[1,-20],[-14,8],[-8,-90],[-14,-14],[-19,19],[-7,-81],[-12,-3],[-1,22],[-17,79],[-21,-6],[-8,57],[-11,-4],[-16,30],[12,58],[-25,16],[-8,-86],[-18,-9],[-4,42],[-13,14],[-6,-33],[-9,25],[-6,95],[-5,11],[-14,-27],[-6,15],[3,-73],[-16,-57],[-13,19],[11,-42],[-13,-22],[3,-64],[-11,-31],[-11,14],[-12,94],[10,30],[-2,66],[-9,28],[-10,-19],[-2,-42],[-13,19],[-9,-7],[-11,-64],[-20,5],[-5,30],[1,63],[-12,19],[-16,-27],[-11,25],[3,41],[-19,42],[-9,-3],[-12,-58],[-29,-92],[-12,-9],[-16,34],[-9,3],[4,65],[-5,-1],[7,60],[-7,20],[-13,-14],[-19,11],[-10,91],[8,35],[-4,50],[-17,-47],[-20,22],[-15,0],[-19,28],[-11,-40],[-3,-44],[-20,-26],[-24,96],[-21,23],[-12,-37],[-21,4],[-13,26],[-13,3],[-17,24],[-19,46],[-16,-27],[-9,15],[-12,-11],[-2,20],[-18,-3],[-5,140],[-18,56],[4,22],[-16,5],[-18,57],[-4,-92],[-12,-4],[-22,47],[-17,2],[-6,-49],[-30,15],[-24,78],[-37,143],[-20,-19],[0,2257],[-123,0],[-179,0],[-150,0],[-175,1],[-210,0]],[[21214,59429],[1,119],[0,463]],[[27478,65805],[48,61],[45,74],[9,24],[10,60],[13,3],[3,-28],[36,72],[47,74]],[[27689,66145],[0,-314],[1,-2],[247,-1],[77,3],[167,-2],[243,1],[105,3],[111,-4],[169,-1],[107,2],[14,-59],[5,4],[8,-100],[15,4],[27,-34],[10,-49],[-8,-32],[14,-21],[2,-159],[-8,-12],[25,-113],[1,-34],[11,5],[15,-33],[-2,-18],[25,3],[3,-22],[16,8],[-1,-30],[13,-55]],[[28900,63272],[-23,37],[-22,6],[-24,-20],[-15,-34],[-20,-82]],[[28796,63179],[-217,-1],[-118,-1],[-151,0],[-236,3],[-305,-2]],[[27769,63178],[-167,0],[-124,0],[0,1068]],[[27478,64246],[0,1559]],[[20920,69320],[5,4],[0,872],[-1,227]],[[23039,67577],[-40,0],[5,-22],[-7,-37],[22,-64],[-1,-110],[-14,-5],[8,-52],[-3,-31],[24,-3],[2,-83],[9,-35],[-7,-66],[-14,-16],[5,-56],[-8,-28],[6,-21],[-12,-46],[0,-80],[-11,-16],[-3,-52],[-11,-26],[1,-76],[15,-27],[17,-60],[10,-87],[-4,-45],[13,-31]],[[23041,66402],[-17,-7],[-5,30],[-24,-5],[-7,53],[-21,66],[7,52],[-11,16],[-21,3],[-1,40],[-28,35],[-12,-17],[-8,48],[-43,13],[-5,28],[-18,20],[-1,38],[-25,25],[-15,-14],[-15,13],[-7,-23],[-18,14],[-16,-13],[-16,11],[-18,-17],[-25,9],[-20,21],[-8,-11],[-9,-74],[-12,-29],[-19,-9],[-31,69],[-36,62],[-58,85],[-9,59],[-112,0],[-186,-1],[-153,1],[-214,-1],[-206,-2],[-62,4],[-178,0],[-143,1],[-293,1]],[[20922,66996],[0,345],[-1,8],[0,1828],[-1,143]],[[23587,56097],[8,8],[0,-54],[11,-25],[9,6],[-2,-36],[10,-9],[5,27],[8,-18],[3,29],[21,-27],[11,46],[12,-17],[5,-30],[6,21],[16,-22]],[[23710,55996],[0,0]],[[23710,55996],[1,-11],[0,-608]],[[23711,55377],[0,-1196],[8,-12],[11,-72],[18,-31],[9,-83],[15,-55],[-2,-34],[8,-56],[-7,-42],[3,-45],[-7,-28],[6,-51],[9,-32],[13,-6],[3,-35],[-6,-27],[14,-36],[-1,-32],[8,-15],[3,-49],[-6,-53],[12,-47],[6,2],[6,-113],[19,12],[-6,-102],[8,-31],[2,-54],[-13,-21],[-1,-33],[12,-55],[-9,-22],[-3,-38],[4,-63],[-9,-33],[-9,-63],[-3,-73],[-12,-25],[-2,-68],[-14,-30],[-3,-40],[7,-24],[5,-91],[-13,-51],[-6,-74],[16,-52],[1,-53],[-5,-39],[9,-79],[-12,-70],[9,-19],[-11,-51],[-14,-39],[-7,-78],[-13,-74],[-17,-45],[-2,-25],[9,-30],[17,-94]],[[23768,51502],[0,-14],[-46,3],[-37,-40],[-128,-208],[-28,-61],[-10,-54],[-15,7],[22,71],[9,47],[13,-1],[9,19],[8,46],[9,-16],[11,8],[-15,55],[-54,-54],[-8,26],[17,90],[4,80],[0,74],[-12,5],[-5,23],[-17,-29],[-10,-41],[-4,-50],[-15,-24],[-6,46],[-18,-45],[-2,-35],[9,-32],[-10,-50],[10,-55],[20,-17],[-6,-54],[11,-20],[2,-78],[-2,-67],[-8,-31],[-9,10],[-19,-71],[-22,-65],[-3,26],[-13,-8],[-2,-88],[6,-26],[13,44],[26,65],[3,19],[32,99],[15,23],[0,45],[26,-15],[-20,-61],[-62,-153],[-24,-69],[-4,-25],[-32,-91],[-40,-143],[-15,-8],[-69,-146],[-35,-80],[-53,-89],[-61,-112],[-34,-87],[-13,-42],[-15,-74],[-53,-111],[-24,-68],[-47,-155],[-32,-143],[-11,-83],[-14,-59],[-33,-221],[-24,-197],[-11,-127],[-10,-192],[-2,-108],[1,-103],[8,-205],[14,-207],[12,-134],[16,-229],[11,-260],[-7,47],[-5,147],[-12,189],[-11,152],[-24,16],[18,27],[-9,83],[-6,87],[-9,88],[-3,106],[1,138],[-1,122],[11,276],[16,180],[19,148],[14,70],[10,87],[8,35],[-2,47],[13,86],[18,38],[9,45],[18,127],[28,58],[8,53],[16,2],[35,105],[23,49],[24,23],[-4,43],[9,29],[-9,16],[-16,-41],[-20,-35],[-11,-40],[-17,-5],[-6,40],[0,60],[-18,12],[-6,-31],[0,-84],[-5,-25],[6,-41],[-4,-36],[-20,-56],[-17,-61],[-8,-1],[-18,30],[-3,43],[-32,-61],[-17,-67],[21,-22],[24,57],[8,-74],[-7,-23],[-38,-223],[-12,-2],[-6,55],[-21,-10],[-4,18],[-32,-11],[-11,12],[-6,-38],[12,-32],[15,-1],[11,17],[-4,-64],[7,-48],[15,-34],[17,-18],[-19,-146],[-13,-185],[-12,-106],[-20,-27],[-7,-27],[-11,18],[14,21],[3,59],[-8,3],[-6,-31],[-29,-75],[4,-32],[24,-16],[25,38],[8,2],[-5,-116],[3,-4],[-4,-202],[-6,-207],[-4,-3],[10,-230],[8,-65],[1,-84],[9,-1],[23,-215],[5,-29],[-9,-47],[4,-34],[-1,-62],[8,-72],[20,-11],[1,-35],[12,18],[2,-127],[-23,7],[-13,-8],[0,-19],[-21,-12],[-6,-99],[-20,11],[-7,40],[-15,3],[-6,55],[-11,4],[-18,98],[-31,12],[-11,33],[-17,-9],[-7,16],[-23,-17],[-4,18],[-13,-1],[-3,-29],[-10,31],[-20,-14],[-8,22],[-6,-22],[-14,20],[-8,30],[3,25],[-16,1],[-3,44],[-15,-1],[-21,75],[-9,-11],[-25,48],[-19,-22],[-13,35],[-15,69],[-10,8],[-2,33],[-8,12],[-18,-15],[-21,47],[-12,-3],[-8,20],[-12,-19],[-9,44],[6,50],[-10,56],[-11,13],[-3,98],[-6,42],[-3,79],[-8,25],[-1,49],[-7,64],[-17,43],[2,31],[-13,26],[-7,37],[5,20],[-11,46],[-9,7],[-1,52],[6,31],[-3,66],[4,29],[-4,86],[-16,25],[1,37],[-12,11],[9,30],[5,86],[-3,31],[4,60],[-13,10],[5,76],[-12,58],[-7,-14],[-7,46],[-9,-18],[-9,39],[-10,-6],[-18,90],[-9,11],[-3,38],[-8,-9],[-10,38],[0,50],[-7,26],[3,41],[-13,48],[2,47],[-17,16],[-7,81],[-10,23],[-8,70],[-35,53],[-4,53],[-7,-2],[-13,59],[2,38],[-17,100],[3,47],[-9,39],[9,29],[-12,11],[-9,47],[4,39],[-14,28],[1,33],[-15,28],[-4,51],[2,41],[-8,26],[-4,73],[-6,1],[-9,88],[-8,1],[-6,47],[1,76],[-7,106],[-18,46],[-10,40],[3,14],[-9,71],[-23,41],[-2,30],[-17,46],[-18,25],[-13,84],[0,21],[-26,21],[-6,44],[-23,7],[3,57],[-2,65],[-5,5],[-6,-67],[-6,27],[2,53],[-17,27],[-13,108],[-8,-4],[-9,32],[-13,-25],[-7,44],[-8,-27],[-37,-13],[-19,31],[-6,-8],[-15,22],[-22,-14],[-12,24],[-17,-7],[-4,-22],[-26,21],[-11,50],[-13,-3],[-20,40],[-14,-18],[-10,-111],[-34,19],[-9,-37],[-7,11],[-22,-32],[-7,10],[-8,-54],[2,-23],[-13,-40],[0,-50],[-7,0],[-2,-59],[-11,-30],[1,-33],[-7,-58],[2,-52],[-5,-48],[-10,-5],[-3,-72],[-5,-37],[10,-22],[-5,-38],[-18,-38],[-10,8],[-7,-67],[-17,-43],[-7,-36],[-4,-84],[-14,-8],[-17,15],[-15,-11],[-14,46],[-27,24],[-27,111],[-24,33],[-10,-8],[-22,38],[-18,77],[-13,24],[-39,21],[-17,28],[-19,61],[-11,12],[-19,81],[0,24],[-14,47],[-21,7],[-12,27],[-5,34],[-30,78],[-9,43],[-7,110],[-12,56],[-7,60],[-13,63],[0,59],[-7,57],[6,72],[-3,54],[2,55],[-7,68],[-11,30],[-3,44],[-13,39],[-1,30],[-13,34],[2,33],[-13,177],[-7,40],[-12,4],[-11,91],[-15,0],[-14,66],[-12,10],[-3,24],[-15,34],[-12,-4],[-7,28],[-31,39],[0,39],[-44,118],[-13,107],[-12,37],[-18,26],[-9,33],[-9,2],[-2,36],[-24,106],[-20,35],[-4,54],[-14,32],[-21,7],[-35,78],[-11,88],[-10,24],[-6,68],[-13,89],[-9,41],[-19,38],[-11,-19],[-11,41]],[[20232,53938],[-5,28],[-16,20],[1,23],[-10,25],[-3,38],[7,18],[1,101],[331,0],[250,-1],[226,0],[183,1],[0,1212],[2,254],[0,149],[2,417],[2,232],[0,1518],[1,434],[0,809],[-1,213],[11,0]],[[20922,66996],[0,-2328]],[[19530,64667],[-136,-2],[-143,-1],[-52,-3],[-133,1],[-93,2],[0,442],[1,219],[-1,508]],[[18973,65833],[0,676],[1,163],[0,1090],[-1,26],[0,516],[-1,267],[1,140]],[[18973,68711],[-2,175],[-1,282],[1,156],[75,2],[22,-12],[85,2],[11,8],[45,-5],[25,8],[87,-2],[194,5],[11,-7],[221,0],[316,0],[14,-4],[144,-2],[178,-1],[23,7],[132,0],[251,-2],[115,-1]],[[29908,65840],[0,-107],[3,-222],[0,-150],[-3,-209],[-12,-8],[3,-76],[-8,-29]],[[29891,65039],[-7,19],[-17,2],[-21,-24],[-18,3],[-13,-24],[-16,28],[-6,-37],[-49,-35],[-3,20],[-15,0],[-27,-33],[-6,21],[-26,1],[-7,-26],[-18,23],[-40,-27],[-3,60],[-9,-17],[-19,-82],[-12,0],[-22,-73],[-13,23],[-24,-58],[-7,13],[-23,-28],[5,-22],[-10,-32],[-29,-11],[-22,-54],[-9,15],[-15,-35]],[[29390,64649],[1,33],[-20,102],[68,130],[-19,97],[4,161],[5,295],[9,422]],[[23231,64184],[167,-9],[159,-8],[156,3],[130,8],[62,0],[197,12],[152,13],[101,14],[12,-38],[1,-33],[18,-14],[-1,-36],[16,-57],[10,-2],[1,-56],[11,-31],[19,-7]],[[24442,63943],[-8,-18],[-17,-144],[-2,-71],[6,-165],[14,-99],[7,-28],[-8,-66],[5,-38],[15,-34],[4,-28],[-3,-61],[26,-77],[15,-57],[11,-14],[10,-69],[13,-8],[11,-76],[16,-54],[59,-137],[20,-90],[3,-90],[8,-78],[-9,-36],[11,-85],[3,-65],[22,-69],[11,7],[11,32],[9,66],[19,4],[27,-45],[16,-5],[38,-82],[-2,-60],[-12,-29],[-13,-59],[10,-92],[-2,-37],[-22,-96],[-6,-99],[-17,-68],[-7,-52],[-1,-78],[5,-70],[18,-50],[20,-89],[25,-37],[11,-54],[8,0],[17,-60],[16,7],[3,-27],[-12,-24],[6,-50],[20,-5],[10,31],[13,-28],[1,-29],[15,-12],[23,-70],[-2,-40],[14,-3],[9,-42],[19,-24],[0,-57],[11,-68],[-13,-8],[2,-50],[26,-161],[-4,-62],[-15,-12],[-8,-56],[17,-53],[-1,-47],[13,-87],[11,-46],[-1,-53],[24,-56],[10,27],[-15,45],[14,12],[17,-56],[8,-53],[11,14]],[[25079,59990],[9,-21],[-5,-90],[-6,-46],[-10,-9],[-1,-38],[17,-37],[-3,-28],[-16,3],[-4,-44],[11,-58],[-8,-29],[-7,-71],[-13,-18],[-18,78],[-13,-13],[-13,-142]],[[24999,59427],[-8,-40],[-13,7],[2,31]],[[24980,59425],[6,38],[-5,49],[-21,2],[-4,-30],[9,-58]],[[24965,59426],[6,-22],[-7,-64],[10,-59],[-5,-37],[-24,-1],[0,-37],[21,-39],[1,-27],[-15,-15],[-30,16],[-3,-21],[28,-74],[1,-61],[-22,-40],[-3,-75],[-12,-23]],[[24911,58847],[-179,-6],[16,110],[23,58],[0,23],[15,53],[16,28],[3,43],[9,7],[5,133],[-22,44],[3,15],[-5,71],[-349,-1],[-323,1],[-141,0],[-222,1],[-210,1]],[[23358,63503],[-31,56],[8,79],[-24,76],[-2,77],[-20,19],[1,32],[-18,26],[-12,110],[1,39],[-11,34],[-1,40],[13,42],[-11,18],[-1,-33],[-20,3],[1,63]],[[26900,61666],[18,-20],[35,40],[23,11],[5,49],[3,98],[12,28],[16,-7],[6,30],[-3,101],[-10,105],[21,52],[0,67],[14,88],[12,27],[6,37],[13,-40],[11,-1],[12,-79],[-8,-40],[11,-20],[9,22],[3,42],[9,20],[9,-25],[4,111],[-10,29],[-3,43],[19,19],[-3,96],[8,41],[10,12],[3,55],[31,-7],[3,83],[25,76],[17,-19],[6,-52],[11,3],[21,47],[17,8],[11,54],[11,8],[8,48],[16,57],[30,89],[16,9],[4,83],[10,26],[-11,50],[12,48],[0,57],[10,23],[-4,60],[13,-11],[-2,52],[7,20],[0,122],[9,30],[0,58],[10,48],[5,61],[10,23],[5,65],[-3,95],[4,71],[-9,84],[-11,44],[9,50],[14,-1],[18,27]],[[27769,63178],[-3,-600],[10,7],[33,103],[12,-1],[10,67],[31,60],[13,75],[11,-2],[28,-36],[11,54],[38,158],[13,-10],[-13,-14],[13,-18],[2,-26],[20,-34],[17,1],[7,-18],[28,-4],[14,38],[-7,49],[13,-1],[-11,32],[14,-11],[9,37],[19,-23],[28,87],[24,-20],[17,-49],[8,-40],[18,20],[17,-23],[14,4],[0,-37],[-16,-15],[12,-69],[19,-41],[-2,-33],[9,-12],[5,-43],[-6,-63],[10,-14]],[[28258,62713],[-9,-45],[-21,-175],[-78,209],[-66,179],[-4,-62],[5,-28],[-6,-36],[7,-11],[-23,-106],[6,-15],[-11,-54],[10,-36],[-16,-62],[-7,-7],[-24,-88],[6,-16],[-14,-63],[-7,21],[-15,-66],[-10,-24],[0,36],[-23,-71],[-20,-130],[-35,101],[-9,-69],[-17,-82],[-1,-71],[-8,1],[-10,-57],[-15,-138],[-28,-94],[-46,53],[-17,109],[-31,47],[-14,-121],[3,-65],[-12,-60],[-22,-87],[6,-44],[-12,-21],[-25,-81],[-7,-56],[6,-29],[-8,-30],[-6,-60],[-10,-51],[-18,-51],[-30,-104],[-21,-112],[2,-36],[-12,-39],[4,-41],[17,-34],[-12,-40],[-18,-34],[-1,-32],[13,-4],[-4,-29],[-49,-99],[-10,68],[-12,-9],[-19,-47],[-41,-71],[-4,26],[-21,38],[-7,-51],[9,-43],[-19,-47],[-17,-5],[-37,-27],[-31,-51],[-27,75],[-11,45],[-8,-21],[-8,-55],[-23,-17],[-2,-30],[-13,-29],[-34,-7],[-19,48],[0,24],[-12,25],[-18,3],[-7,52],[-14,31],[-2,90],[-15,22],[-1,33],[18,34],[-11,29]],[[27075,60636],[-14,-4],[-28,30],[-3,37],[-8,1],[-7,40],[-9,-2],[-7,42],[-15,11],[-13,134],[-10,19],[-13,61],[1,34],[-15,19],[-8,39],[11,55],[-15,22],[-9,80],[-10,45],[-15,37],[0,38],[8,0],[3,55],[-4,20],[11,33],[1,58],[-8,36],[1,90]],[[24442,63943],[12,16],[-2,50],[4,90],[-11,35],[13,69],[31,43],[18,-1],[18,41],[1,61],[6,49],[1,67],[10,27],[14,66],[11,19],[6,106],[-1,98],[-13,75],[-13,6],[-20,85],[11,77],[2,74],[6,55],[19,21],[13,-15],[23,40],[31,-6],[24,17],[16,56],[10,13],[26,-1],[18,57],[16,21],[-1,66],[9,59],[0,52],[9,29],[28,49],[-1,41],[8,72],[-3,58],[7,61],[-7,37],[1,89],[-13,41],[-47,73],[-15,74],[3,60],[-16,63],[-22,37],[-2,26],[-22,35],[0,47]],[[24658,66423],[45,-2],[227,-2],[51,-5],[194,-11],[41,4],[152,1],[82,-5]],[[25450,66403],[-2,-124],[-8,-97],[10,-109],[21,-117],[12,-37],[3,-54],[13,-139],[4,-75],[14,-93],[8,-20],[2,-47]],[[25386,60941],[-8,-66],[-17,-35],[-11,-56],[7,-105],[20,-68],[-6,-50],[-48,-19],[-12,-11],[-18,-52],[-14,26],[-18,-44],[-2,-55],[-9,-65],[2,-25],[17,-65],[7,-66],[-10,-89],[-15,-10],[-13,13],[-19,52],[-35,40],[-14,39],[-31,42],[-19,5],[-13,-21],[-13,-42],[-9,-65],[-16,-52],[-4,-55],[14,-52]],[[20232,53938],[-214,0],[-254,0],[0,-524],[-234,-1]],[[24911,58847],[4,-38],[18,-49],[0,-45],[-24,23],[-9,-49],[20,-36],[-11,-33],[-11,-1],[-9,-52],[-17,-22],[-9,21],[-15,-41],[6,-68],[9,-17],[12,23],[3,-38],[-26,-42],[1,-53],[9,-10],[-3,-40],[-22,56],[-9,-9],[-5,-58],[9,-42],[-11,-75],[-8,88],[-23,-67],[-3,-46],[12,-6],[2,43],[15,-35],[-9,-47],[0,-45],[-16,-10],[4,-47],[15,-7],[6,-29],[-12,-43],[15,-58],[-10,-25],[-12,21],[-9,-26],[-9,-100],[-25,13],[-3,-49]],[[24751,57677],[17,-55],[0,-45],[-18,-44],[-31,-44],[-4,59],[-11,2],[-2,-29],[8,-44],[-5,-25],[6,-72],[-14,-19],[-5,34],[2,57],[-10,-27],[2,-35],[-7,-14],[6,-40],[20,-2],[2,-31],[-14,-50],[-11,18],[1,49],[-10,-21],[0,-64],[12,-61],[1,-27],[-13,-51],[6,-83],[-25,-57],[0,-63],[-10,1],[3,54],[-19,-1],[-5,-27],[8,-45],[-7,-30],[-19,-15],[-4,-71],[-16,43],[-9,-29],[14,-43],[20,1],[2,-25],[-13,-28],[-16,33],[-12,-32],[9,-51],[11,3],[3,-24],[-8,-61],[-24,-6],[7,-45],[-11,-16],[-5,43],[-16,-23],[-3,-29],[22,-34],[-18,-78],[7,-55],[16,-26],[-10,-34],[-8,18],[-24,-2],[-1,-59],[10,-26],[13,14],[8,-50],[-12,-18],[-16,22],[-7,35],[-17,-16],[-2,-28],[25,-51],[2,-33],[-28,-41],[13,-63],[-14,-80],[18,16],[-1,51],[14,-27],[-4,-54],[-17,-10],[-3,-19],[10,-24],[17,14],[10,73],[5,-32],[-23,-90],[0,-64],[12,-68],[3,42],[10,13],[2,-23],[-13,-52],[2,-75],[-3,-23],[-14,-8],[-11,14],[-5,-39],[23,-62],[-13,-59]],[[24512,55359],[-219,4],[-154,5],[-157,7],[-86,0],[-185,2]],[[16868,55911],[16,-5],[28,-53],[21,-22],[1,-25],[16,-61],[-5,-43],[-13,25],[-26,7],[-6,35],[0,74],[-20,16],[-12,52]],[[16867,55390],[9,4],[22,-117],[40,-130],[-10,4],[-11,-22],[-17,44],[-13,72],[-14,119],[-6,26]],[[16741,55926],[8,7],[1,-41],[-11,7],[2,27]],[[16637,56552],[8,-17],[11,14],[0,-30],[-17,-4],[-9,21],[7,16]],[[16596,55679],[14,7],[20,-35],[8,-31],[-13,-15],[-20,21],[-9,53]],[[16501,56608],[18,-7],[13,-22],[15,5],[19,-43],[19,-4],[7,39],[20,-20],[-11,-43],[-28,-11],[-17,-31],[-42,24],[-1,61],[-12,52]],[[16410,56520],[22,8],[9,21],[13,-8],[13,19],[0,-48],[18,-13],[1,-48],[-41,-54],[-16,37],[-19,86]],[[16354,56562],[16,17],[6,28],[6,-35],[13,-26],[-21,-6],[-20,22]],[[15305,65829],[155,-4],[9,6],[77,-1],[56,12],[28,-8],[115,2],[37,5],[95,-1],[45,-5],[154,-8],[114,-4],[197,0],[92,2]],[[16479,65825],[0,-1]],[[16479,65824],[0,-1448],[1,-34],[0,-756],[-1,-393],[-1,-13],[0,-457],[-1,-122],[2,-263],[26,-77],[115,-330],[114,-336],[63,-182],[99,-298],[125,-377],[62,-186],[127,-394],[313,-989],[234,-759],[70,-234],[147,-492]],[[17950,55027],[-416,-126],[-254,-89],[-3,98],[-9,62],[-8,20],[-14,-23],[-3,66],[1,71],[-8,41],[9,61],[-9,161],[-13,127],[-9,54],[-40,193],[-25,61],[-10,51],[-15,37],[-9,-2],[-19,95],[-26,59],[-14,15],[-20,57],[-25,88],[-24,39],[-2,-47],[-21,-23],[-18,14],[-10,25],[-15,6],[-4,38],[9,34],[1,43],[-14,116],[-11,64],[-17,50],[-35,1],[-22,-8],[-16,-36],[-14,38],[-28,16],[-37,59],[-12,2],[-24,53],[-17,141],[-10,10],[-17,53],[-4,-3],[-20,65],[-21,25],[-6,20],[-32,4],[-16,-24],[-18,25],[-22,-10],[-37,60],[-23,0],[-15,15],[-44,-7],[-48,-22],[-1,31],[-13,66],[-16,30],[-12,-4],[-6,32],[13,143],[-11,60],[8,119],[-17,54],[9,115],[1,140],[-18,56],[-14,7],[-3,-21],[-27,55],[-11,48],[10,131],[-2,50],[-11,53],[-27,14],[-27,102],[-18,101],[-24,25],[-17,66],[-5,81],[-16,47],[-7,37],[-14,35],[-6,99],[-5,35],[-20,29],[-15,104],[-25,94],[-33,64],[-11,45],[-8,80],[1,42],[-11,101],[2,92],[-11,16],[10,74],[18,-38],[9,30],[7,61],[8,141],[-21,149],[-12,43],[-10,11],[-9,-28],[-37,2],[-28,68],[-22,102],[-14,18],[-2,31],[-17,60],[-4,62],[5,129],[-12,89],[-2,52],[-12,14],[-6,33],[-1,64],[5,27],[2,77],[-6,134],[14,28],[16,8],[6,-24],[7,-88],[-9,-9],[11,-107],[-2,-27],[27,-23],[27,-80],[8,5],[14,-63],[12,3],[-6,40],[-12,19],[-10,87],[-7,109],[-21,54],[-2,46],[-22,26],[9,74],[-7,68],[-15,-1],[-14,68],[8,-9],[9,26],[0,40],[19,-2],[10,39],[-10,71],[-26,44],[-13,-30],[-14,-6],[2,-47],[-5,-46],[15,-51],[-12,-25],[-4,-44],[19,-56],[-7,-14],[-11,29],[7,-71],[-15,-16],[-9,38],[-26,61],[-13,-12],[-23,67],[-10,53],[-17,33],[-16,8],[-20,-33],[14,127],[3,48],[-12,92],[7,20],[-16,70],[-11,-10],[-1,67],[-17,106],[-20,51],[-14,19],[-22,64],[-37,176],[-14,29],[-8,41],[-31,90],[-24,116],[14,78],[-1,42],[-14,126],[-16,123],[-7,105],[3,99],[13,132],[-5,52],[0,65],[-14,92],[-4,108],[-16,36],[-6,55],[-35,133],[-7,6],[0,43],[-8,43],[-22,32],[-49,151],[4,63],[-4,70],[-13,74],[9,98],[14,109],[42,265],[11,95],[7,119],[-12,37],[-1,97],[4,2],[11,99],[12,244],[-5,126],[-15,128],[-8,96],[-9,-4],[-17,54],[10,74],[5,110],[-3,67]],[[28861,63044],[-1,28]],[[28874,63137],[-6,7],[-22,-81],[2,-39],[11,-31],[1,-49],[-8,-28],[0,-41],[14,-52],[7,-58],[21,-62],[10,-68],[3,-58],[-5,-35],[2,-126],[16,-48],[7,-43],[2,-74],[34,-137],[16,-29],[10,24],[4,-36],[5,-129],[4,-244]],[[29002,61700],[-105,1],[-74,9],[-2,72],[-25,1311],[0,86]],[[28426,62262],[21,70],[37,-118],[-36,-118]],[[28448,62096],[0,93],[-22,73]],[[6433,39922],[2,44],[19,76],[12,7],[13,93],[16,52],[3,58],[-17,94],[-4,45],[-1,105],[8,37],[18,-9],[18,-32],[3,-32],[22,-44],[15,-47],[12,6],[25,-32],[39,-77],[13,-19],[22,-61],[16,-57],[17,-76],[-3,-47],[1,-90],[8,-10],[16,12],[7,-57],[-1,-57],[22,-82],[22,-39],[5,-21],[-4,-44],[-13,-51],[-17,-47],[-14,-56],[-23,-38],[-20,-47],[-20,-18],[-16,15],[-9,-9],[-18,-66],[-16,-25],[-13,-48],[-14,-16],[-12,-59],[1,-33],[-8,-37],[-5,-59],[-20,-63],[-15,61],[-22,52],[-22,29],[-10,95],[5,113],[4,151],[-10,106],[1,46],[-9,12],[-5,114],[-7,66],[-9,8],[-8,108]],[[6254,41293],[5,69],[11,56],[14,6],[13,-33],[10,-78],[10,-50],[24,29],[18,35],[26,-21],[0,-16],[17,-51],[10,-15],[5,-40],[31,-37],[5,-32],[0,-52],[-8,-43],[-13,-40],[-6,3],[-17,-36],[-14,10],[-30,-53],[-21,-9],[-17,26],[-7,210],[-7,20],[-14,-24],[-26,50],[-13,58],[-6,58]],[[6253,40841],[7,29],[28,57],[10,-30],[-4,-44],[5,-17],[-13,-19],[-5,15],[-18,-23],[-10,32]],[[6153,41274],[7,27],[13,5],[26,-19],[17,-60],[8,-51],[-9,-65],[-19,-29],[-17,-5],[-7,60],[-3,73],[-14,32],[-2,32]],[[6084,41504],[6,52],[9,29],[-2,58],[17,-2],[3,-14],[54,-29],[10,34],[4,-42],[22,-13],[27,18],[17,-25],[-8,-55],[-18,-51],[-20,-21],[-35,32],[-26,31],[-15,-14],[-29,-5],[-16,17]],[[5814,42059],[43,9],[13,49],[4,35],[13,48],[14,15],[6,-27],[6,-70],[20,-84],[4,-52],[-4,-15],[3,-47],[18,-55],[3,57],[12,-2],[-4,-64],[8,-24],[-1,-29],[17,-70],[-12,-37],[-11,18],[-21,-29],[-6,26],[-17,31],[-25,11],[-30,-20],[-7,4],[-7,84],[-11,34],[-1,31],[-14,67],[0,61],[-13,45]],[[5394,42585],[1,40],[11,38],[4,49],[33,72],[8,26],[23,-18],[3,25],[16,-11],[8,14],[15,-20],[10,-37],[5,-45],[0,-46],[-11,-63],[1,-106],[-4,-28],[-28,-78],[-8,15],[-36,12],[-18,71],[-24,29],[-9,61]],[[5266,42374],[4,43],[12,44],[19,45],[2,38],[11,9],[2,-31],[-5,-57],[2,-36],[-20,-28],[-16,-97],[-12,30],[1,40]],[[24498,67577],[-5,-52],[10,-50],[-1,-74],[27,-41],[13,-76],[-18,-60],[-6,-52],[-9,-24],[1,-108],[8,-88],[0,-68],[12,-25],[13,-169],[33,-64],[47,-37],[17,-20],[18,-109],[0,-37]],[[23231,64184],[4,28],[-10,56],[-13,16],[-15,58],[2,37],[13,35],[-4,83],[10,51],[-7,27],[2,66],[-9,20],[1,42],[-7,30],[5,27],[-5,93],[12,17],[-24,24],[4,37],[-5,63],[13,41],[-20,27],[7,29],[-1,116],[-20,10],[2,77],[-9,1],[-2,-37],[-15,28],[3,56],[-11,39],[7,39],[-8,41],[11,18],[-6,54],[8,20],[3,46],[-12,23],[-1,38],[-14,61],[6,11],[3,66],[-16,6],[1,30],[-15,11],[5,16],[-15,25],[1,83],[-22,56],[-3,48],[10,25],[-14,103],[-11,29],[0,76],[9,44],[-4,44],[-14,8]],[[26280,62461],[18,48],[7,-2],[15,-54],[21,-28],[14,29],[14,-3],[8,29],[8,-8],[4,-69],[29,-32],[10,-84],[16,-83],[0,-66],[5,-26],[40,-41],[33,19],[29,-46],[3,-34],[15,-26],[5,-50],[28,-29],[14,66],[26,22],[15,-32],[28,-20],[11,-24],[5,-43],[13,24],[30,-1],[10,53],[18,34],[9,39],[15,0],[21,32],[7,-33],[-3,-44],[9,-111],[13,-37],[21,-6],[21,-79],[13,-35],[2,-44]],[[27075,60636],[-108,-317],[-37,-39],[-22,-41],[-19,-49],[-25,-45],[0,-86],[-16,-39],[-12,-2],[-12,-33],[3,-59],[-6,-45],[-25,-36],[-29,-4],[-16,-80],[-2,-50],[-16,-4],[-33,-35],[-39,-52],[-21,2],[-33,-49],[-8,-27]],[[26599,59546],[-4,-21],[-83,8],[-79,2],[-76,5],[-83,11],[-51,16],[-74,9],[-55,-14],[-96,8],[-56,10],[-83,22],[-49,4],[-16,-22],[-7,22],[-146,-12],[-92,-2],[-114,-8],[1,35],[-61,17],[10,-147],[-6,-64],[-137,6],[-126,0],[-84,6],[-33,-10]],[[24980,59425],[-15,1]],[[28739,61120],[-14,0]],[[28725,61120],[-1,72],[8,28],[11,-40],[-4,-60]],[[28711,61320],[2,79],[11,13],[7,-30],[5,-118],[-15,21],[4,27],[-14,8]],[[28627,62072],[5,20],[5,-46],[-10,26]],[[29002,61700],[-1,-43],[-9,-105],[-5,-15],[-20,-211],[-18,-120]],[[28949,61206],[-107,-38],[-6,-55],[-6,4]],[[28830,61117],[-13,30],[-19,-4],[-22,-64],[-9,-1],[-1,67],[7,70],[17,28],[-17,2],[2,45],[11,40],[-21,9],[-12,-33],[-4,28],[5,58],[26,27],[-6,39],[-9,-13],[-4,36],[15,112],[-15,-24],[-7,-47],[0,-60],[-8,-1],[-11,77],[11,9],[-1,53],[-8,10],[-4,-49],[-9,-33],[6,-27],[-9,-62],[-4,29],[-17,-23],[-9,12],[-16,83],[-9,13],[2,43],[-24,151],[20,14],[5,39],[-8,-7],[-9,51],[8,40],[12,22],[6,-25],[12,26],[1,-36],[22,-9],[13,-39],[4,10],[-16,69],[-17,14],[-8,42],[-7,-3],[-16,77],[-5,-28],[-12,20],[-1,-59],[-7,8],[3,101],[18,92],[14,-45],[8,10],[-3,124],[-8,17],[-17,-47],[-12,4],[1,-48],[-12,-17],[4,104],[16,101],[7,-51],[21,-11],[11,31],[-6,54],[11,55],[-16,-9],[-3,-52],[4,-31],[-12,17],[3,63],[-6,59],[-7,14],[16,136],[12,42],[-2,24],[14,25],[7,37],[30,-6],[-11,24],[18,70],[-10,6],[12,122],[-35,-24],[-6,-48],[12,-24],[4,-32],[-12,-14],[-34,-97],[-7,31],[7,54],[-8,28],[0,-44],[-9,-51],[8,-34],[-7,-46],[-6,96],[-15,14],[6,-103],[-8,8],[-6,-42],[12,-22],[-21,-44],[-7,-28],[-13,8],[-2,26],[-22,46],[3,-46],[9,-13],[2,-41],[27,-54],[2,-67],[-5,-25],[13,-48],[-23,-45],[7,-37],[-3,-40],[-9,4],[-7,-55],[6,-53],[-17,-58],[9,-50],[-2,-54],[6,-73],[-2,-89],[7,-65],[22,-80],[8,-62],[-9,-45],[-14,7],[9,-42],[9,22],[8,-14],[-7,-47],[4,-48],[18,-92],[-5,-22],[5,-97],[-9,19],[-11,58],[-8,4],[-5,64],[-8,-9],[-2,-57],[-7,38],[-8,-3],[-5,48],[-12,45],[-23,23],[-35,3],[-8,129],[-8,13],[-4,-31],[10,-68],[-2,-22],[-22,43],[-2,34],[-13,31],[-12,114],[-20,-44],[-33,-56],[-12,27],[-7,115],[11,82],[15,57],[20,30],[-5,10]],[[28423,61914],[-1,45],[7,27],[18,25],[1,85]],[[28426,62262],[-9,37],[-20,6],[-8,17],[1,48],[-26,42],[-34,15],[-6,39],[-10,13],[1,58],[9,18],[7,49],[-23,43],[-6,45],[-15,-1],[-16,25],[-13,-3]],[[26327,70327],[8,17],[9,-60],[65,-63],[-17,-58],[-23,18],[-14,61],[-28,85]],[[26120,70229],[5,40],[7,-20],[-12,-20]],[[26084,70289],[21,-39],[-4,-36],[-19,38],[2,37]],[[26055,70019],[7,48],[3,69],[6,15],[1,57],[18,-7],[-1,-85],[4,-83],[-19,-44],[-19,30]],[[26035,70180],[13,8],[-5,-54],[-7,1],[-1,45]],[[25984,69839],[13,-17],[1,-59],[-14,76]],[[25933,69486],[6,23],[19,-25],[-6,-96],[-17,52],[-2,46]],[[25908,69335],[11,44],[6,-47],[-17,3]],[[25759,70041],[20,-64],[-8,-22],[-4,36],[-14,43],[6,7]],[[25722,65552],[30,68],[27,87],[37,261],[34,146],[19,134],[10,99],[10,176],[-1,58],[6,87],[-1,163],[-6,182],[-11,120],[-35,230],[-11,94],[-12,138],[-17,119],[0,48],[22,102],[7,50],[1,77],[-9,134],[-14,90],[4,32],[20,51],[24,151],[21,112],[4,124],[9,134],[-11,112],[1,33],[27,43],[20,15],[6,93],[-2,74],[10,36],[13,-18],[16,80],[18,-35],[17,13],[8,32],[9,86],[10,16],[15,94],[11,47],[9,-7],[12,35],[3,-39],[-19,-32],[-3,-42],[12,-81],[-23,-81],[13,19],[0,-74],[-6,-7],[-8,-84],[7,-95],[8,-2],[19,145],[3,98],[13,20],[-8,-158],[-15,-44],[-6,-67],[14,-14],[8,65],[7,13],[22,135],[5,78],[-1,56],[4,82],[-6,85],[5,94],[17,49],[10,3],[18,48],[18,16],[25,-7],[26,14],[12,20],[-1,33],[-33,17],[-14,47],[-8,114],[16,75],[13,14],[20,69],[-2,31],[-18,27],[60,-15],[7,49],[61,-102],[26,-58],[13,20],[11,-16],[13,10],[32,-34],[24,-85],[3,-57],[17,-27],[33,4],[8,-9],[29,-77],[23,-7],[34,-71],[29,6],[21,-78],[11,-25],[-9,-27],[15,-96],[11,-30],[14,-133],[-20,21],[-16,34],[-15,-41],[4,-110],[12,-44],[21,-26],[5,-59],[1,-98],[7,-37],[-4,-71],[-8,-67],[2,-65],[-5,-111],[-1,-121],[-12,-15],[-14,-64],[-24,2],[-8,-30],[-8,-108],[-4,-115],[-19,-5],[-8,-19],[0,-49],[-42,-6],[-13,-35],[-9,-76],[-5,-124],[-8,-42],[13,-91],[16,-32],[9,33],[5,-38],[20,-21],[13,-38],[10,16],[28,120],[14,0],[7,25],[-7,51],[9,44],[9,87],[4,-50],[19,31],[5,29],[-21,31],[24,-3],[11,24],[5,41],[23,10],[34,28],[9,45],[31,30],[11,-30],[23,-25],[15,-39],[17,-123],[10,-37],[7,-97],[5,-208],[17,-178],[4,-247],[10,-143],[18,-110],[2,-48],[-11,-46],[-7,-145],[4,-47],[-12,-113],[-4,-67],[-18,-66],[-15,4],[-12,-42],[1,66],[-9,27],[10,16],[15,62],[-14,26],[-15,-5],[-19,-34],[-7,-32],[9,-27],[2,-45],[-15,4],[-11,-52],[1,-84],[-7,-77],[-17,-53],[-30,-25],[-18,-97],[2,-127],[-3,-44],[-15,-25],[-1,-70],[-16,-39],[-6,-39],[-13,-4],[-7,-65],[-11,-11],[-17,-72],[5,-79],[-8,-9]],[[26661,65520],[-86,-11],[-167,-20],[-124,-12]],[[25045,72671],[21,69],[95,141],[7,-2],[43,98],[31,42],[6,-11],[28,29],[-1,-28],[-12,-16],[-30,-80],[0,-30],[-25,-55],[-51,-53],[-42,-66],[2,-20],[23,0],[-59,-73],[-18,3],[-18,52]],[[24721,71146],[19,40],[12,3],[39,49],[38,34],[31,77],[19,64],[16,27],[33,17],[15,-17],[29,27],[22,-3],[52,75],[30,94],[22,5],[29,23],[10,39],[5,51],[25,65],[14,16],[30,82],[23,23],[21,56],[11,54],[20,52],[58,85],[56,25],[50,-7],[23,-39],[1,-45],[-11,5],[-17,-24],[-19,13],[-21,-10],[5,-47],[-32,-57],[-30,-95],[-19,-20],[-5,-74],[-7,9],[-7,-52],[-14,-26],[-5,-67],[-12,-48],[-9,-6],[-12,-164],[6,-52],[-9,-35],[11,3],[20,87],[3,44],[7,-13],[29,80],[28,43],[-12,-55],[-12,-24],[-15,-77],[30,84],[26,18],[14,-13],[37,1],[15,-30],[8,8],[17,-35],[8,-39],[15,11],[22,-63],[3,-61],[17,-49],[6,-47],[14,-49],[19,-15],[-2,-79],[11,-28],[26,-15],[42,10],[25,43],[11,-8],[14,-72],[12,-27],[19,-4],[8,46],[16,-7],[9,-38],[4,69],[-7,53],[16,20],[7,-32],[-6,-56],[17,-26],[26,72],[40,62],[59,110],[11,-21],[61,42],[46,-16],[35,-3],[30,7],[62,85],[24,12],[30,-7],[32,14],[-22,-84],[-2,-135],[2,-45],[-8,-19],[9,-51],[16,-8],[9,16],[6,-26],[15,3],[17,-28],[34,49],[13,-4],[11,-46],[-1,-35],[25,28],[7,-7],[10,65],[19,24],[23,-19],[11,9],[8,39],[27,-5],[5,-30],[-10,-100],[7,-120],[1,-95],[-29,-2],[-8,-65],[15,-12],[5,21],[15,-4],[8,-38],[19,-19],[-13,-40],[24,-75],[12,-1],[20,-45],[8,38],[14,-35],[8,26],[-16,100],[14,-15],[41,13],[12,-15],[14,-91],[16,-31],[-10,-64],[-14,-20],[-27,39],[-31,-16],[-31,42],[-11,-12],[-27,1],[-27,23],[-60,-26],[-13,-28],[-37,69],[-15,48],[-13,-7],[-13,30],[-10,-41],[2,-51],[-15,-32],[1,-45],[9,-63],[-12,-20],[-24,42],[-3,31],[-21,37],[-5,30],[-22,64],[-38,46],[-13,-7],[-33,49],[-18,-5],[-13,23],[-5,-20],[-19,11],[-25,-75],[-17,-73],[-9,-8],[-32,23],[-23,-15],[-8,-22],[2,-34],[-23,37],[-21,17],[-24,-14],[-10,11],[-23,-24],[-13,-42],[-2,-63],[-9,-72],[-14,4],[-7,-39],[-22,-15],[-6,-46],[-13,-3],[0,-45],[-12,-9],[4,-61],[-20,32],[-9,40],[12,27],[1,34],[11,31],[1,40],[13,-4],[15,87],[-3,43],[-12,10],[-18,-75],[-38,24],[3,-51],[-13,-47],[-5,-56],[-30,-31],[-5,-27],[-6,39],[3,55],[-4,67],[-8,32],[-10,-19],[-5,-120],[3,-12],[-31,-55],[-26,-129],[-17,-146],[-19,-65],[-20,-112],[-41,-174],[6,-33]],[[25508,69434],[-19,14],[-8,47],[-13,28],[-2,29],[15,118],[11,48],[-2,34],[-11,25],[-16,-47],[-27,-10]],[[25436,69720],[0,0]],[[25436,69720],[-7,47],[7,24],[-3,38],[13,34],[6,40],[-3,47],[8,69],[-14,75],[12,13],[-8,44],[-13,18],[-6,33],[-24,4],[-9,43],[-21,-18],[-18,45],[17,52],[-7,21],[0,47],[-40,48],[-14,-14],[-24,47],[-12,-15],[-21,21],[-2,25],[-27,-2],[-3,-32],[-14,0],[-4,29],[-17,16],[-12,-13],[-86,142],[-287,231],[1,27],[-28,167],[-27,16],[-10,24]],[[24739,71113],[0,0]],[[24739,71113],[-12,-6],[-6,39]],[[25252,52115],[30,-13],[-14,-20],[-12,9],[-4,24]],[[25179,52148],[16,13],[30,-29],[6,-15],[-24,5],[-28,26]],[[25119,52114],[15,7],[15,31],[-4,-29],[-21,-27],[-5,18]],[[25071,52140],[21,-1],[8,13],[-5,-43],[-10,-7],[-17,26],[3,12]],[[24751,57677],[229,-2],[156,1],[202,1]],[[25284,52292],[-4,-32],[-7,15],[-10,-40],[-18,27],[-13,-15],[-5,30],[-18,7],[-18,-23],[-23,49],[-2,-28],[-21,38],[-22,-3],[-31,-27],[-28,-42],[-30,-33],[4,54],[-10,30],[-14,-27],[9,-17],[1,-40],[-25,-57],[-8,-80],[-9,10],[-13,-16]],[[24969,52072],[-12,0],[-13,50],[-4,66],[0,69],[-15,77],[0,54],[-10,43],[-11,19],[-4,39],[-10,34],[-4,95],[-8,14],[10,88],[-4,36],[7,25],[9,125],[7,19],[-1,45],[7,22],[-7,36],[-165,-2],[-134,-1],[-226,0],[13,21],[7,58],[-16,50],[-1,28],[10,46],[-3,41],[-12,30],[1,38],[18,-7],[17,20],[2,43],[-12,37],[-1,45],[-7,16],[9,39],[4,-50],[8,-29],[9,7],[0,29],[-13,75],[-1,74],[20,18],[12,35],[-4,32],[-18,-13],[-9,30],[5,38],[10,-28],[18,0],[1,106],[11,35],[23,5],[4,18],[-29,11],[7,94],[12,11],[2,-43],[7,-17],[5,28],[-6,21],[24,78],[-2,50],[7,25],[19,14],[0,50],[-19,26],[5,25],[13,-39],[5,36],[12,22],[9,69],[-15,24],[2,-62],[-32,11],[2,79],[27,20],[7,27],[14,-31],[5,42],[-2,53],[12,-8],[16,79],[-4,18],[-6,-40],[-23,17],[0,58],[8,20],[-8,35],[-10,-20],[-23,49],[3,58],[5,1],[17,-48],[10,7],[-5,26],[-21,50],[14,31],[8,37],[-7,37],[-6,-46],[-20,-26],[-6,14],[-3,52],[9,38],[16,33],[2,27],[-31,30],[1,71],[5,37],[21,52],[2,39],[-9,72],[-11,-4],[1,-67],[-14,-26],[-9,22],[3,48],[10,50]],[[17580,73980],[234,-2],[232,3],[190,-5],[190,2],[348,-2],[211,0],[232,2],[328,0],[141,0],[292,0],[227,1],[143,-1],[294,0],[114,0],[167,1]],[[18973,68711],[-21,23],[-6,49],[-24,59],[2,43],[-28,117],[-17,36],[-8,-52],[-20,-3],[5,-33],[-16,-98],[15,-64],[-32,26],[-9,-16],[-24,13],[-3,-19],[-30,-40],[-13,63],[-22,-8],[-13,-25],[-10,13],[-21,-30],[-8,22],[-14,-8],[-12,35],[-16,7],[-9,-35],[-9,0],[-2,-61],[-8,-45],[-24,38],[-8,-20],[-11,24],[-33,2],[-17,22],[-17,-23],[-15,-72],[6,-53],[-9,-22],[-11,44],[-18,24],[-15,40],[-6,53],[5,34],[-21,81],[9,48],[-5,50],[-18,109],[-32,58],[-26,-44],[-4,40],[-28,53],[-11,97],[14,13],[2,55],[-4,61],[-19,39],[2,26],[-17,15],[-7,73],[-24,73],[-1,35],[-14,54],[2,70],[-8,19],[-6,57],[6,30],[-1,46],[-19,0],[7,95],[-15,25],[-12,-2],[2,26],[-10,44],[-15,26],[-9,-13],[2,-41],[-15,-35],[-19,-82],[-19,-26],[-13,12],[-3,-58],[-24,-42],[-5,36],[-14,22],[-13,60],[-25,0],[4,53],[-8,36],[18,37],[1,48],[-19,74],[18,89],[25,1],[7,44],[-13,54],[6,49],[-19,27],[-4,54],[9,58],[-17,33],[2,49],[19,7],[-1,79],[-6,30],[13,24],[1,116],[13,65],[-7,69],[12,3],[10,123],[-3,58],[-8,10],[-26,-23],[-4,-21],[-22,15],[-19,-5],[-8,39],[6,39],[-7,30],[-14,9],[-4,-30],[-15,-21],[-6,17],[6,55],[-34,58],[-16,59],[4,71],[-20,60],[-13,-1],[-6,60],[-19,82],[-17,54],[-12,13],[-5,37],[-11,7],[2,38],[-9,41],[-24,10],[-32,45],[-7,54],[-47,87],[-11,-2],[12,36],[22,8],[3,22],[-16,7],[-5,57],[-11,5],[2,34],[13,32],[-12,55],[2,63],[-13,24],[-7,47],[-8,-6],[-8,88],[-15,21],[-39,152],[-1,279],[1,109],[0,804]],[[29991,69339],[3,68],[18,64],[-3,15],[11,74],[-13,36],[18,11],[4,26],[22,42],[15,-61],[28,-5],[13,70]],[[30213,67064],[-30,-174],[-2,-44]],[[29724,66677],[-9,53],[-6,-10],[-12,102],[9,73],[1,57],[13,10],[8,45],[-6,52],[9,33],[-5,65],[4,138],[12,64],[-6,60],[10,135],[-5,35],[5,74],[15,33],[6,109],[9,44],[19,43],[6,44],[-1,64],[19,67],[0,85],[12,44],[12,69],[0,47],[-10,68],[6,57],[-6,34],[10,61],[35,32],[10,-13],[16,21],[5,52],[24,14],[14,39],[7,45],[16,22],[-6,59],[11,13],[2,73],[-10,38],[-11,102],[15,52],[4,64],[18,75],[-13,89],[11,30]],[[29842,64964],[3,18],[27,22],[-21,-43],[-9,3]],[[29812,64781],[5,20],[11,-16],[0,-50],[-6,35],[-10,11]],[[29792,64880],[16,16],[-12,-43],[-4,27]],[[29275,64272],[5,-67],[-9,-39],[-38,-78],[-11,-1]],[[28633,68013],[16,50],[-5,-45],[-11,-5]],[[28611,68032],[12,40],[9,-5],[-21,-35]],[[27689,66145],[33,53],[53,111],[29,91],[30,50],[26,25],[11,70],[13,36],[4,52],[36,56],[19,54],[-4,80],[-13,40],[2,43],[-7,37],[-23,35],[1,92],[-18,15],[9,77],[-5,125],[-3,13],[28,22],[38,42],[56,47],[40,20],[33,2],[38,-9],[36,8],[86,-42],[23,-19],[15,-47],[23,-46],[12,-10],[40,49],[35,1],[43,12],[21,-19],[23,-1],[14,25],[30,20],[18,40],[9,1],[19,80],[30,64],[10,8],[19,54],[14,5],[20,-15],[17,19],[9,53],[2,87],[-9,180],[-20,40],[11,50],[14,11],[2,-33],[21,41],[-3,43],[-19,47],[-22,-15],[5,29],[-15,51],[-15,1],[1,80],[16,115],[19,5],[23,42],[0,48],[18,22],[27,55],[9,-5],[16,29],[25,75],[4,46],[12,51],[41,121],[31,100],[56,141],[-1,12],[68,109],[26,62],[18,0],[22,37],[27,-29],[19,10],[91,-8],[53,-1],[107,14],[24,-1],[93,10]],[[29478,69336],[1,-109],[-7,-30],[-4,-63],[13,-57],[-10,-55],[-2,-92],[-4,-31],[4,-70],[19,-88],[4,-69],[-12,-80],[7,-114],[-4,-36],[-19,-63],[-5,-89],[-8,-79],[9,-27],[-1,-103],[10,-67],[-5,-64],[12,-57],[-16,-97],[-7,-114],[10,-26],[7,66],[19,0],[2,-53],[13,-29],[-2,-343],[-6,-422],[0,-74],[-4,-37],[8,-65]],[[29390,64649],[-7,-42],[-21,-42],[-2,-79],[-13,2],[9,-60],[18,87],[11,-15],[10,42],[21,27],[18,2],[4,33],[22,-30],[2,41],[9,-28],[20,-8],[18,-23],[23,28],[2,43],[17,8],[10,-12],[75,3],[39,20],[14,18],[30,63],[9,40],[12,13],[13,50],[21,21],[12,-2],[-18,-52],[-9,-6],[15,-31],[5,-44],[17,-12],[11,25],[16,-72],[15,17],[23,48],[2,28],[17,11],[12,-12],[-5,-21],[-67,-94],[-78,-123],[-50,-62],[-81,-93],[-53,-78],[-43,-41],[-27,-12],[-6,15],[-64,-60],[-61,10],[-46,-55],[3,38],[-23,-2],[3,25],[-11,39],[7,35],[-8,36]],[[26861,65369],[16,17],[-2,-36],[-14,19]],[[26831,65420],[6,90],[11,-35],[-3,-35],[-14,-42],[0,22]],[[26661,65520],[1,-26],[21,-28],[13,17],[37,-82],[25,-20],[11,-21],[18,-66],[19,-29],[18,23],[2,50],[7,13],[14,-55],[19,2],[-1,-37],[29,-96],[16,-33],[22,-21],[41,57],[22,4],[17,35],[51,60],[37,-38],[19,15],[20,-9],[29,61],[29,86],[8,10],[16,58],[44,102],[10,1],[67,108],[30,17],[24,34],[65,69],[17,24]],[[15490,70789],[21,10],[13,-45],[-1,-55],[17,-42],[25,-1],[32,51],[14,-4],[59,-119],[7,-61],[18,-81],[1,-57],[7,-52],[-3,-67],[10,-88],[-4,-41],[3,-50],[33,-54],[46,-35],[11,-19],[17,14],[13,-32],[18,-5],[23,39],[23,7],[54,83],[12,45],[15,16],[21,-15],[29,12],[28,26],[19,-30],[17,-9],[18,14],[34,-40],[9,-75],[14,4],[19,50],[34,4],[13,-16],[11,34],[47,51],[15,35],[21,-9],[21,-51],[22,6],[34,26],[20,5],[11,42],[28,27],[29,46],[46,27],[37,10],[13,57],[14,23],[24,-22],[64,39],[17,-14],[19,6],[28,42],[11,36],[163,1],[250,-3],[164,-3]],[[17338,70482],[16,-107],[11,-27],[16,-75],[18,5],[10,-47],[19,-2],[16,-48],[0,-53],[13,-49],[7,-54],[-24,-108],[-1,-55],[-10,-23],[-24,-150],[1,-36],[-9,-51],[-7,-116],[-13,-40],[-6,-53],[-14,-44],[-3,-51],[7,-58],[-9,-68],[-18,-76],[0,-21],[-32,-49],[-14,-93],[-8,-97],[-10,-66],[-18,-48],[3,-66],[-8,-36],[15,-69],[-8,-56],[13,-35],[19,25],[16,-59],[20,12],[2,-53],[18,-17],[1,-31],[-10,-62],[-12,-17],[1,-42],[11,-32],[-1,-43],[-12,-81],[0,-54],[-11,-11],[-2,-59],[0,-2105]],[[17307,65831],[-166,-2],[-273,-5],[-26,-3],[-143,2],[-220,2]],[[15305,65829],[-21,55],[-15,55],[-7,69],[2,33],[-14,81],[2,32],[-7,63],[-2,126],[13,147],[-7,107],[-17,87],[-11,2],[-11,123],[15,90],[12,96],[6,83],[0,52],[9,80],[6,99],[-6,42],[17,53],[8,43],[16,132],[15,193],[15,283],[7,225],[4,188],[-2,8],[10,197],[-1,69],[7,184],[0,92],[-5,39],[8,91],[12,227],[8,117],[4,157],[-3,66],[3,109],[-4,69],[5,24],[5,176],[-1,76],[-11,41],[6,87],[-2,83],[-7,45],[16,36],[1,109],[-19,193],[27,-79],[14,-14],[-3,38],[23,10],[7,17],[11,-28],[12,31],[15,0],[20,51]],[[26599,59546],[33,-4],[78,1],[5,-5],[157,-1],[61,3],[151,-2],[3,26],[77,-5],[-8,-28]],[[18139,65823],[61,-6],[262,13],[192,2],[5,-5],[196,3],[118,3]],[[18136,60011],[0,880],[1,11],[-1,272],[1,173],[-1,298],[1,318],[0,1661],[1,149],[0,628],[1,266],[0,1156]],[[28738,60998],[7,-15],[-7,-27],[0,42]],[[28949,61206],[-16,-79],[-15,-98],[-8,-27],[-5,21],[-15,-7],[-19,-78],[-12,-70],[-11,-126],[1,-64],[-23,-128],[7,-14],[-18,-91],[-12,-79],[-9,-11],[1,-57],[-11,-86],[-18,-64],[-16,2],[4,-35],[-9,-5],[-1,84],[-10,55],[-4,61],[2,70],[9,59],[3,89],[10,105],[4,76],[16,79],[18,110],[-4,34],[21,17],[15,65],[1,28],[-20,21],[25,54]],[[28739,61120],[-11,-44],[-3,44]],[[28423,61914],[-20,-21],[-13,21],[0,-52],[-18,-113],[-4,-52],[2,-76],[15,-59],[29,15],[6,26],[15,0],[12,38],[9,-30],[-6,-74],[19,-64],[0,-49],[35,-59],[25,-2],[7,-28],[6,21],[24,-9],[4,-44],[16,-39],[8,-59],[13,-15],[15,-54],[20,-23],[30,-68],[-5,-65],[-15,-24],[-2,-107],[4,-29],[-11,-46],[13,-23],[-19,-30],[-31,64],[-11,-27],[-7,25],[0,41],[-13,81],[-19,32],[-8,35],[-12,12],[-21,103],[-11,11],[-4,45],[-13,30],[-2,-30],[28,-89],[20,-114],[15,-24],[1,-25],[16,-14],[10,-96],[11,-53],[30,-4],[7,-36],[31,-24],[-14,-29],[-1,-37],[13,-8],[4,22],[8,-41],[5,-110],[-8,-90],[-18,63],[-21,45],[-9,-42],[11,-39],[7,-55],[9,-14],[-22,-24],[-18,-4],[6,-39],[22,11],[-2,-76],[14,12],[4,-31],[12,-20],[6,-49],[-9,-97],[-4,15],[-16,-18],[-15,-34],[-10,68],[-29,61],[-14,45],[4,48],[-13,71],[-22,-9],[-8,-25],[-10,46],[-18,11],[-4,23],[-21,-35],[11,-33],[12,8],[18,-13],[15,-55],[9,-2],[8,58],[8,-119],[1,-67],[22,-19],[25,-82],[1,-65],[27,4],[9,27],[1,-33],[9,-11],[-3,86],[17,6],[13,-29],[35,-36],[17,27],[11,-11],[8,-128],[12,-140],[9,-71],[7,-94]],[[15775,72069],[4,105],[10,72],[12,-52],[-2,-58],[19,-32],[-18,-27],[-5,-26],[-18,-12],[-2,30]],[[15740,73454],[0,40],[20,-41],[-17,-26],[-3,27]],[[15720,73667],[6,14],[26,-115],[-18,42],[-14,59]],[[15715,73495],[8,29],[12,-47],[-15,-33],[-5,51]],[[15707,73080],[13,89],[14,59],[2,55],[16,11],[7,-19],[0,-49],[19,-38],[3,-26],[-15,-19],[-17,15],[-1,-29],[-13,-34],[-14,-7],[3,-24],[23,10],[11,-42],[8,-84],[-4,-14],[10,-100],[8,27],[-5,67],[10,-3],[16,-57],[16,-13],[7,-94],[-8,-58],[-14,13],[-12,86],[-21,-25],[2,30],[-19,44],[3,93],[-5,56],[-18,-4],[-3,30],[-22,54]],[[15649,73739],[11,-4],[34,-53],[-8,-8],[-22,20],[-15,45]],[[15623,73630],[17,26],[2,-33],[-19,7]],[[15618,73982],[15,0],[4,-29],[-17,-2],[-2,31]],[[15586,73509],[7,30],[20,1],[2,-29],[15,-33],[17,-9],[-18,69],[37,108],[12,-2],[37,-58],[-19,-50],[11,-66],[-2,-62],[-11,-25],[4,-69],[-20,-12],[-15,50],[-9,-12],[-22,11],[-31,62],[-6,76],[-9,20]],[[15577,73617],[18,-10],[18,-54],[-30,41],[-6,23]],[[17306,73978],[-1,-290],[0,-441],[-2,-286],[0,-702],[1,-52],[0,-1247],[-7,-48],[20,-76],[8,-54],[0,-63],[12,-40],[-17,-93],[7,-11],[11,-93]],[[15490,70789],[-34,9],[-3,34],[-12,6],[-10,-31],[-13,10],[-19,-51],[-9,7],[-21,74],[-10,8],[-7,-47],[-10,-10],[6,139],[1,124],[-4,165],[13,-61],[-2,-100],[4,-137],[17,0],[1,37],[-10,40],[0,61],[12,-37],[14,83],[-19,116],[11,42],[25,53],[-17,37],[-6,-27],[-18,-2],[4,-23],[-16,4],[-20,44],[-1,55],[-11,130],[8,8],[6,-52],[11,31],[52,63],[-10,27],[-34,23],[-2,45],[-27,14],[-8,-24],[8,-90],[-16,-21],[3,38],[-4,206],[-14,176],[-24,80],[-9,207],[-5,77],[-15,162],[-14,36],[-4,55],[-14,23],[-5,31],[-19,29],[-12,110],[-8,101],[1,53],[-11,56],[12,58],[9,138],[-19,46],[3,22],[17,1],[40,-55],[32,-64],[10,-1],[25,-39],[6,12],[41,-55],[-1,-20],[35,-41],[56,-11],[21,13],[31,-37],[9,19],[10,-18],[24,7],[12,-32],[41,2],[32,71],[-3,-24],[22,-42],[7,-45],[17,17],[17,-5],[-3,-32],[14,-20],[1,-59],[10,6],[3,53],[-14,34],[0,40],[12,28],[21,10],[3,-31],[-15,-34],[10,-50],[7,6],[2,48],[10,14],[8,-100],[-15,-10],[11,-42],[8,-78],[13,-21],[-8,-25],[-16,2],[2,-42],[-17,-36],[-9,-113],[-14,-9],[11,113],[-6,17],[-19,-101],[-4,-53],[-21,-70],[-38,-183],[-13,-119],[12,8],[23,-13],[12,27],[21,17],[3,38],[-44,-62],[-17,27],[42,226],[31,74],[29,28],[3,73],[16,73],[31,68],[-9,97],[22,-40],[14,-187],[-22,0],[3,-40],[11,-14],[-4,-56],[7,-19],[0,-53],[-14,-38],[-1,-38],[15,-16],[-10,-48],[-6,-87],[4,-21],[-10,-57],[7,-49],[-15,-79],[-27,78],[8,96],[-16,-42],[-6,-63],[30,-83],[-10,-16],[1,-48],[-11,-26],[-16,46],[-20,105],[12,37],[1,61],[-7,25],[0,-51],[-12,-57],[7,-72],[-6,-48],[13,14],[11,-66],[27,-22],[11,37],[0,33],[13,16],[8,79],[10,53],[-2,30],[25,-58],[10,25],[-4,36],[27,34],[0,50],[-8,58],[-8,11],[6,35],[-10,40],[-7,71],[22,38],[-24,58],[16,82],[-6,91],[15,46],[9,119],[22,25],[-1,69],[-14,23],[-23,86],[1,74],[-10,49],[-15,4],[3,-24],[-11,-28],[10,-67],[18,-50],[1,-35],[-26,85],[-12,4],[-7,58],[2,77],[18,24],[16,-22],[10,42],[-10,45],[-28,45],[-13,48],[1,39],[-29,-33],[-7,33],[4,45],[-13,-17],[3,39],[24,28],[13,-15],[9,-49],[19,7],[-10,108],[17,6],[5,34],[-21,66],[-5,66],[8,44],[-13,30],[-17,-6],[-11,-41],[9,-44],[-19,40],[8,57],[-10,25],[-9,-14],[-1,65],[-21,54],[11,21],[-5,36],[-13,16],[16,54],[184,0],[97,-6],[145,5],[143,-2],[190,0],[169,0],[165,1],[178,0],[325,-2]],[[25685,69733],[6,80],[31,-17],[-23,-128],[-14,65]],[[25568,69555],[12,14],[2,-63],[-14,23],[0,26]],[[24707,71654],[8,83],[12,4],[-5,-75],[-15,-12]],[[24691,71507],[21,33],[-14,-47],[-7,14]],[[24655,71564],[5,21],[30,29],[5,-13],[-11,-48],[-24,-11],[-5,22]],[[24625,71464],[3,27],[20,41],[1,-19],[-24,-49]],[[24631,71609],[14,-54],[-13,-3],[-8,37],[7,20]],[[24621,71679],[35,36],[11,-55],[14,34],[2,-44],[-16,-9],[-17,-49],[-11,42],[-16,20],[-2,25]],[[24616,71401],[17,18],[32,86],[14,-32],[-30,-33],[5,-35],[-17,-4],[-20,-37],[-1,37]],[[24563,71635],[15,17],[-1,-44],[-14,27]],[[24276,71309],[20,-30],[34,11],[49,52],[19,27],[18,0],[48,70],[25,27],[6,26],[17,-22],[7,33],[25,10],[22,70],[14,-12],[14,35],[10,-4],[24,-81],[-14,-76],[-24,-78],[9,-73],[-16,-35],[-11,-77],[13,-16],[42,73],[5,54],[42,-108],[13,-22],[9,10],[25,-27]],[[25508,69434],[-10,-58],[-1,-80],[-37,-13],[-21,-40],[3,-47],[-11,-59],[-9,-15],[-11,-83],[-12,-42],[-7,-104],[3,-25],[-13,-50],[20,-42],[12,7],[7,53],[26,64],[10,3],[15,63],[0,36],[31,133],[26,36],[11,-7],[11,34],[15,-32],[-6,46],[12,97],[27,109],[7,100],[12,-5],[21,32],[1,59],[17,60],[22,-3],[-2,-87],[-16,-5],[-2,-142],[-12,-40],[-8,4],[-5,-53],[-14,-52],[5,-43],[-13,-39],[4,-26],[-18,-33],[-13,-62],[-8,-87],[-17,-107],[-9,-26],[-9,-62],[-21,-268],[9,-94],[-2,-71],[-12,-41],[-23,-46],[-3,-62],[-8,-37],[-14,-162],[2,-82],[8,-50],[-2,-102],[-21,-118],[-7,-136],[-20,-107],[-9,-156],[8,-76],[-5,-38],[8,-85],[-7,-57],[14,-62],[0,-85],[6,-63],[16,-59],[-4,-89],[-11,-107],[6,-145]],[[2682,386],[26,11],[1,-51],[-9,8],[-8,-28],[-10,60]],[[2636,452],[21,8],[-4,-21],[-13,-12],[-4,25]],[[2313,271],[13,35],[16,2],[19,68],[4,-20],[27,2],[4,-44],[-7,13],[-29,-30],[-23,-89],[-11,47],[-13,16]],[[90204,32599],[5,15],[34,16],[21,137],[6,65],[7,-11],[7,-43],[14,-11],[-10,-88],[-32,-109],[-9,-44],[-2,-111],[-12,-56],[-18,30],[-7,101],[8,50],[-12,59]],[[90597,35570],[10,43],[4,-16],[-8,-45],[-6,18]],[[90537,37432],[5,20],[1,-49],[-6,29]],[[90507,37973],[14,53],[0,59],[11,0],[0,-66],[-9,-13],[-10,-55],[-6,22]],[[90501,34555],[4,28],[2,101],[9,-12],[20,67],[5,-22],[-14,-80],[4,-63],[-13,7],[0,-73],[-12,18],[-5,29]],[[90487,38800],[6,39],[11,-28],[-1,-51],[-8,-23],[-7,25],[-1,38]],[[90486,35993],[20,2],[3,-36],[-19,-8],[-4,42]],[[90472,34420],[4,45],[13,54],[5,-54],[-4,-24],[7,-40],[-2,-61],[-9,-29],[-14,109]],[[90343,33382],[11,51],[21,35],[15,-9],[-2,-35],[-12,-13],[-8,-39],[-11,-6],[-5,23],[-9,-7]],[[28030,56345],[-13,-8],[-36,-51],[-27,-66],[-35,-121],[-18,-79],[-7,-45],[-16,-58],[-14,-93],[-13,-174],[3,-55],[-7,-48],[-14,-47],[-23,-41],[-9,-97],[-17,10],[-17,-16],[-11,39],[-16,-33],[-10,-63],[3,-31],[8,10],[0,-33],[-15,-20],[-18,-45],[-9,-52],[-34,-59],[-10,38],[-11,-7],[-1,-32],[17,-22],[-5,-59],[-25,-52],[-7,-40],[-10,5],[-24,-22],[-17,-59],[-6,18],[-36,-90],[-8,21],[-15,-28],[-2,30],[-13,-1],[-4,-42],[15,-83],[-7,-74],[-32,-62],[-19,-20],[-2,41],[-19,40],[-11,-22],[-2,-31],[12,-15],[14,-59],[-15,-65],[-25,-59],[-9,0],[-17,-67],[5,-21]],[[31708,38299],[11,-21],[12,13],[9,-36],[-17,-36],[-12,19],[-3,61]],[[31642,38028],[49,54],[35,-32],[-18,-26],[-21,-7],[-11,-24],[-8,12],[-17,-17],[-9,40]],[[31637,38350],[7,-14],[0,-44],[-7,58]],[[31170,38320],[15,18],[17,49],[-4,63],[7,32],[14,12],[20,-6],[17,-25],[50,2],[20,-22],[24,26],[18,-5],[25,-25],[8,20],[28,0],[27,-20],[16,1],[7,-19],[6,24],[37,-35],[4,19],[18,-18],[6,7],[31,-33],[14,-49],[7,13],[5,-27],[10,-6],[14,22],[-5,-40],[3,-84],[13,-30],[-7,-43],[-11,19],[3,-28],[-10,2],[-7,-32],[-13,1],[-11,-59],[-7,-83],[-8,-6],[-1,-44],[-25,-46],[-15,-9],[-12,12],[-7,-27],[-10,13],[-21,-43],[-10,9],[-9,-29],[-8,9],[-18,66],[-12,-10],[-7,-34],[-21,60],[-8,0],[-25,-33],[-14,24],[-12,-19],[-25,47],[-7,-39],[-14,-27],[-21,-3],[-12,-18],[-8,41],[-21,8],[-11,-32],[-19,19],[-12,-12],[1,53],[10,31],[-11,12],[3,65],[5,15],[1,75],[7,31],[-10,101],[-13,21],[-9,78]],[[30985,38023],[20,12],[5,-43],[-15,-38],[-12,32],[2,37]],[[31858,38286],[13,39],[11,-4],[15,-28],[-13,-4],[1,-49],[-9,20],[-13,-5],[-5,31]],[[31828,37522],[7,36],[-4,40],[7,30],[10,-13],[8,22],[17,3],[6,-29],[39,5],[2,-18],[-32,-48],[-41,-30],[-19,2]],[[31779,38288],[6,50],[10,-23],[12,26],[19,-21],[33,6],[-2,-23],[-14,-4],[9,-42],[-16,-11],[-15,23],[-7,-20],[-12,49],[-23,-10]],[[17306,73978],[171,1],[103,1]],[[18139,65823],[-119,3],[-36,-2],[-58,9],[-63,-7],[-79,0],[-293,0],[-184,5]],[[29478,69336],[71,5],[115,0],[40,-9],[62,-5],[57,2],[168,10]],[[25149,51924],[13,-63],[5,-76],[-3,-101],[-10,-105],[-4,3],[8,90],[4,100],[-1,46],[-12,106]],[[25020,51931],[11,38],[32,81],[2,-14],[-13,-63],[2,-28],[13,-33],[-15,-50],[-3,47],[-10,-10],[-17,10],[-2,22]],[[24941,51321],[17,10],[-9,-42],[-8,32]],[[24732,50824],[7,27],[13,-65],[-8,-14],[-12,52]],[[24681,50807],[39,-33],[-19,-8],[-20,41]],[[24628,50763],[25,19],[2,-17],[-26,-20],[-1,18]],[[24275,51386],[10,27],[12,-5],[3,26],[22,-6],[23,-61],[9,7],[6,-29],[-15,-36],[-1,-40],[-14,-19],[-59,115],[4,21]],[[24969,52072],[-17,-35],[-8,7],[-17,-56],[-2,-38],[-12,-15],[3,-40],[-28,17],[-11,-45],[5,-68],[18,-10],[13,25],[-4,-59],[8,-34],[15,-19],[13,11],[6,29],[5,101],[-2,13],[24,54],[3,44],[18,-34],[13,6],[0,-21],[-17,-34],[0,-34],[15,-17],[3,-61],[15,14],[11,82],[16,-25],[-4,-55],[-13,0],[-12,-44],[22,2],[-3,-29],[-31,-22],[13,-66],[11,22],[-7,-59],[-9,26],[-14,11],[-12,-55],[-1,-99],[-9,-5],[-6,86],[-11,1],[-2,-66],[13,-58],[-13,33],[-14,5],[-8,-17],[-15,6],[18,-39],[0,-32],[-23,49],[0,-25],[12,-32],[-12,-14],[1,-34],[11,-36],[20,-11],[-1,-22],[12,-24],[-1,-34],[7,-46],[9,30],[5,-21],[22,-2],[16,-34],[3,30],[20,-91],[11,44],[24,-111],[0,-59],[6,-13],[18,28],[7,-41],[-24,-15],[-2,-33],[16,-3],[-8,-52],[-11,24],[-12,-96],[2,-44],[-21,36],[-2,55],[-8,16],[-31,-138],[-15,-41],[7,67],[9,29],[5,48],[9,21],[0,54],[9,23],[-1,51],[-10,24],[-4,-62],[-16,-29],[-12,29],[-14,77],[-34,43],[-10,45],[-56,33],[-12,-14],[-48,-143],[-46,-115],[-7,10],[4,41],[-12,16],[-2,41],[6,3],[-12,100],[-11,27],[-9,-1],[1,-28],[-8,-36],[2,76],[-10,56],[-13,-64],[-14,14],[-7,-22],[-7,31],[-6,-27],[10,-63],[-12,4],[-7,-27],[-4,-54],[-8,7],[-5,-57],[-8,12],[-19,-33],[-6,-76],[-16,16],[5,21],[-13,67],[-18,57],[-11,-13],[-26,21],[-10,33],[-25,12],[-16,25],[-16,60],[12,14],[7,58],[8,-12],[12,-52],[7,22],[-1,-68],[15,-17],[-4,104],[-23,64],[0,42],[-11,7],[-9,-41],[-13,-13],[2,41],[-10,-7],[3,39],[9,28],[-10,40],[-29,-50],[-10,80],[-10,-8],[-6,118],[-26,1],[6,33],[1,85],[-32,16],[-13,-10],[-20,-38],[-7,57],[8,41],[8,-3],[-2,46],[-16,8],[-14,-22],[-9,20],[-2,-40],[-24,-36],[-14,-34],[-6,32],[-18,-16],[0,-32],[9,-30],[18,-8],[-9,-30],[8,-63],[20,21],[5,-18],[-13,-14],[6,-20],[-32,-6],[-26,-49],[-20,-9],[-82,63],[-35,42],[-57,101],[-23,32],[-41,40],[-33,5],[-14,-14],[-36,7],[-58,-25],[-17,-13],[-26,-53]],[[30097,65246],[-20,-46],[-6,102],[2,64],[-10,22],[2,-159],[-17,2],[-2,-35],[-10,-7],[-1,55],[16,95],[8,68],[17,46]],[[30029,65436],[5,7],[11,-52],[-5,-7],[-11,52]],[[30019,65203],[6,51],[-4,23],[5,57],[4,-20],[0,-85],[-11,-26]],[[29960,64853],[11,80],[5,-14],[1,-76],[-17,10]],[[30068,65494],[-3,-45],[-14,-41],[-6,42],[4,35],[-19,54],[-8,40],[5,-129],[-22,17],[12,-39],[1,-75],[-12,-11],[8,-53],[0,-72],[-10,-45],[-8,-73],[-12,6],[-27,-18],[-27,-34],[-38,-30],[-1,16]]]};var Cve={name:"vega-lite",author:'Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',version:"5.2.0",collaborators:["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-Lite is a concise high-level language for interactive visualization.",main:"build/vega-lite.js",unpkg:"build/vega-lite.min.js",jsdelivr:"build/vega-lite.min.js",module:"build/src/index",types:"build/src/index.d.ts",bin:{vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2pdf:"./bin/vl2pdf",vl2vg:"./bin/vl2vg"},directories:{test:"test"},files:["bin","build","src","vega-lite*","tsconfig.json"],scripts:{changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",eslintbase:"eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@babel/core":"^7.16.0","@babel/preset-env":"^7.16.0","@babel/preset-typescript":"^7.16.0","@rollup/plugin-alias":"^3.1.8","@rollup/plugin-babel":"^5.3.0","@rollup/plugin-commonjs":"^21.0.1","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^13.0.6","@types/chai":"^4.2.22","@types/d3":"^7.1.0","@types/jest":"^27.0.2","@types/mkdirp":"^1.0.2","@types/pako":"^1.0.2","@typescript-eslint/eslint-plugin":"^5.4.0","@typescript-eslint/parser":"^5.4.0",ajv:"^8.8.0","ajv-formats":"^2.1.1",chai:"^4.3.4",cheerio:"^1.0.0-rc.10","conventional-changelog-cli":"^2.1.1",d3:"^7.1.1","del-cli":"^4.0.1",eslint:"^8.2.0","eslint-config-prettier":"^8.3.0","eslint-plugin-jest":"^25.2.4","eslint-plugin-prettier":"^4.0.0","gh-pages":"^3.2.3","highlight.js":"^11.3.1",jest:"^27.3.1","jest-dev-server":"^6.0.0",mkdirp:"^1.0.4",pako:"^2.0.4",prettier:"^2.4.1",puppeteer:"^11.0.0",rollup:"^2.60.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3","rollup-plugin-terser":"^7.0.2",serve:"^13.0.2",terser:"^5.10.0","ts-jest":"^27.0.7","ts-json-schema-generator":"^0.97.0",typescript:"~4.5.2","vega-cli":"^5.21.0","vega-datasets":"~2.2.0","vega-embed":"^6.20.2","vega-tooltip":"^0.27.0","yaml-front-matter":"^4.1.1"},dependencies:{"@types/clone":"~2.1.1","array-flat-polyfill":"^1.0.1",clone:"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0",tslib:"~2.3.1","vega-event-selector":"~3.0.0","vega-expression":"~5.0.0","vega-util":"~1.17.0",yargs:"~17.2.1"},peerDependencies:{vega:"^5.21.0"},engines:{node:">=12"}};function Eo(t,e,r){return t.fields=e||[],t.fname=r,t}function Br(t){return t==null?null:t.fname}function Pi(t){return t==null?null:t.fields}function Ove(t){return t.length===1?Ict(t[0]):Mct(t)}var Ict=t=>function(e){return e[t]},Mct=t=>{let e=t.length;return function(r){for(let n=0;n<e;++n)r=r[t[n]];return r}};function W(t){throw Error(t)}function s0(t){let e=[],r=t.length,n=null,i=0,s="",o,a,u;t=t+"";function l(){e.push(s+t.substring(o,a)),s="",o=a+1}for(o=a=0;a<r;++a)if(u=t[a],u==="\\")s+=t.substring(o,a),s+=t.substring(++a,++a),o=a;else if(u===n)l(),n=null,i=-1;else{if(n)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,n=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||W("Access path missing open bracket: "+t),i>0&&l(),i=0,o=a+1)}return i&&W("Access path missing closing bracket: "+t),n&&W("Access path missing closing quote: "+t),a>o&&(a++,l()),e}function si(t,e,r){let n=s0(t);return t=n.length===1?n[0]:t,Eo((r&&r.get||Ove)(n),[t],e||t)}var QC=si("id"),On=Eo(t=>t,[],"identity"),Zc=Eo(()=>0,[],"zero"),Bx=Eo(()=>1,[],"one"),ki=Eo(()=>!0,[],"true"),zp=Eo(()=>!1,[],"false");function Pct(t,e,r){let n=[e].concat([].slice.call(r));console[t].apply(console,n)}var kct=0,uk=1,Oee=2,Dve=3,Nve=4;function lk(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pct,n=t||kct;return{level(i){return arguments.length?(n=+i,this):n},error(){return n>=uk&&r(e||"error","ERROR",arguments),this},warn(){return n>=Oee&&r(e||"warn","WARN",arguments),this},info(){return n>=Dve&&r(e||"log","INFO",arguments),this},debug(){return n>=Nve&&r(e||"log","DEBUG",arguments),this}}}var j=Array.isArray;function Se(t){return t===Object(t)}var Rve=t=>t!=="__proto__";function e4(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduce((n,i)=>{for(let s in i)if(s==="signals")n.signals=Bct(n.signals,i.signals);else{let o=s==="legend"?{layout:1}:s==="style"?!0:null;t4(n,s,i[s],o)}return n},{})}function t4(t,e,r,n){if(!Rve(e))return;let i,s;if(Se(r)&&!j(r)){s=Se(t[e])?t[e]:t[e]={};for(i in r)n&&(n===!0||n[i])?t4(s,i,r[i]):Rve(i)&&(s[i]=r[i])}else t[e]=r}function Bct(t,e){if(t==null)return e;let r={},n=[];function i(s){r[s.name]||(r[s.name]=1,n.push(s))}return e.forEach(i),t.forEach(i),n}function xt(t){return t[t.length-1]}function jn(t){return t==null||t===""?null:+t}var Fve=t=>e=>t*Math.exp(e),wve=t=>e=>Math.log(t*e),Lve=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),Ive=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,ak=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function ck(t,e,r,n){let i=r(t[0]),s=r(xt(t)),o=(s-i)*e;return[n(i-o),n(s-o)]}function Mve(t,e){return ck(t,e,jn,On)}function Pve(t,e){var r=Math.sign(t[0]);return ck(t,e,wve(r),Fve(r))}function kve(t,e,r){return ck(t,e,ak(r),ak(1/r))}function Bve(t,e,r){return ck(t,e,Lve(r),Ive(r))}function fk(t,e,r,n,i){let s=n(t[0]),o=n(xt(t)),a=e!=null?n(e):(s+o)/2;return[i(a+(s-a)*r),i(a+(o-a)*r)]}function xk(t,e,r){return fk(t,e,r,jn,On)}function dk(t,e,r){let n=Math.sign(t[0]);return fk(t,e,r,wve(n),Fve(n))}function VC(t,e,r,n){return fk(t,e,r,ak(n),ak(1/n))}function hk(t,e,r,n){return fk(t,e,r,Lve(n),Ive(n))}function qve(t){return 1+~~(new Date(t).getMonth()/3)}function Uve(t){return 1+~~(new Date(t).getUTCMonth()/3)}function le(t){return t!=null?j(t)?t:[t]:[]}function $ve(t,e,r){let n=t[0],i=t[1],s;return i<n&&(s=i,i=n,n=s),s=i-n,s>=r-e?[e,r]:[n=Math.min(Math.max(n,e),r-s),n+s]}function Je(t){return typeof t=="function"}var qct="descending";function pk(t,e,r){r=r||{},e=le(e)||[];let n=[],i=[],s={},o=r.comparator||Uct;return le(t).forEach((a,u)=>{a!=null&&(n.push(e[u]===qct?-1:1),i.push(a=Je(a)?a:si(a,null,r)),(Pi(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Eo(o(i,n),Object.keys(s))}var mk=(t,e)=>(t<e||t==null)&&e!=null?-1:(t>e||e==null)&&t!=null?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),Uct=(t,e)=>t.length===1?$ct(t[0],e[0]):jct(t,e,t.length),$ct=(t,e)=>function(r,n){return mk(t(r),t(n))*e},jct=(t,e,r)=>(e.push(0),function(n,i){let s,o=0,a=-1;for(;o===0&&++a<r;)s=t[a],o=mk(s(n),s(i));return o*e[a]});function Zr(t){return Je(t)?t:()=>t}function gk(t,e){let r;return n=>{r&&clearTimeout(r),r=setTimeout(()=>(e(n),r=null),t)}}function Ke(t){for(let e,r,n=1,i=arguments.length;n<i;++n){e=arguments[n];for(r in e)t[r]=e[r]}return t}function ia(t,e){let r=0,n,i,s,o;if(t&&(n=t.length))if(e==null){for(i=t[r];r<n&&(i==null||i!==i);i=t[++r]);for(s=o=i;r<n;++r)i=t[r],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=e(t[r]);r<n&&(i==null||i!==i);i=e(t[++r]));for(s=o=i;r<n;++r)i=e(t[r]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function jve(t,e){let r=t.length,n=-1,i,s,o,a,u;if(e==null){for(;++n<r;)if(s=t[n],s!=null&&s>=s){i=o=s;break}if(n===r)return[-1,-1];for(a=u=n;++n<r;)s=t[n],s!=null&&(i>s&&(i=s,a=n),o<s&&(o=s,u=n))}else{for(;++n<r;)if(s=e(t[n],n,t),s!=null&&s>=s){i=o=s;break}if(n===r)return[-1,-1];for(a=u=n;++n<r;)s=e(t[n],n,t),s!=null&&(i>s&&(i=s,a=n),o<s&&(o=s,u=n))}return[a,u]}var Hct=Object.prototype.hasOwnProperty;function Fe(t,e){return Hct.call(t,e)}var sk={};function mg(t){let e={},r;function n(s){return Fe(e,s)&&e[s]!==sk}let i={size:0,empty:0,object:e,has:n,get(s){return n(s)?e[s]:void 0},set(s,o){return n(s)||(++i.size,e[s]===sk&&--i.empty),e[s]=o,this},delete(s){return n(s)&&(--i.size,++i.empty,e[s]=sk),this},clear(){i.size=i.empty=0,i.object=e={}},test(s){return arguments.length?(r=s,i):r},clean(){let s={},o=0;for(let a in e){let u=e[a];u!==sk&&(!r||!r(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=e=s}};return t&&Object.keys(t).forEach(s=>{i.set(s,t[s])}),i}function Hve(t,e,r,n,i,s){if(!r&&r!==0)return s;let o=+r,a=t[0],u=xt(t),l;u<a&&(l=a,a=u,u=l),l=Math.abs(e-a);let c=Math.abs(u-e);return l<c&&l<=o?n:c<=o?i:s}function ce(t,e,r){let n=t.prototype=Object.create(e.prototype);return Object.defineProperty(n,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),Ke(n,r)}function gg(t,e,r,n){let i=e[0],s=e[e.length-1],o;return i>s&&(o=i,i=s,s=o),r=r===void 0||r,n=n===void 0||n,(r?i<=t:i<t)&&(n?t<=s:t<s)}function o0(t){return typeof t=="boolean"}function ef(t){return Object.prototype.toString.call(t)==="[object Date]"}function zve(t){return t&&Je(t[Symbol.iterator])}function Ct(t){return typeof t=="number"}function Gve(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function he(t){return typeof t=="string"}function yk(t,e,r){t&&(t=e?le(t).map(a=>a.replace(/\\(.)/g,"$1")):le(t));let n=t&&t.length,i=r&&r.get||Ove,s=a=>i(e?[a]:s0(a)),o;if(!n)o=function(){return""};else if(n===1){let a=s(t[0]);o=function(u){return""+a(u)}}else{let a=t.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<n;)l+="|"+a[c](u);return l}}return Eo(o,t,"key")}function Qve(t,e){let r=t[0],n=xt(t),i=+e;return i?i===1?n:r+i*(n-r):r}var zct=1e4;function Vve(t){t=+t||zct;let e,r,n,i=()=>{e={},r={},n=0},s=(o,a)=>(++n>t&&(r=e,e={},n=1),e[o]=a);return i(),{clear:i,has:o=>Fe(e,o)||Fe(r,o),get:o=>Fe(e,o)?e[o]:Fe(r,o)?s(o,r[o]):void 0,set:(o,a)=>Fe(e,o)?e[o]=a:s(o,a)}}function Wve(t,e,r,n){let i=e.length,s=r.length;if(!s)return e;if(!i)return r;let o=n||new e.constructor(i+s),a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=t(e[a],r[u])>0?r[u++]:e[a++];for(;a<i;++a,++l)o[l]=e[a];for(;u<s;++u,++l)o[l]=r[u];return o}function ok(t,e){let r="";for(;--e>=0;)r+=t;return r}function Yve(t,e,r,n){let i=r||" ",s=t+"",o=e-s.length;return o<=0?s:n==="left"?ok(i,o)+s:n==="center"?ok(i,~~(o/2))+s+ok(i,Math.ceil(o/2)):s+ok(i,o)}function Gp(t){return t&&xt(t)-t[0]||0}function fe(t){return j(t)?"["+t.map(fe)+"]":Se(t)||he(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function Ek(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}var Gct=t=>Ct(t)||ef(t)?t:Date.parse(t);function Ak(t,e){return e=e||Gct,t==null||t===""?null:e(t)}function Sk(t){return t==null||t===""?null:t+""}function Bi(t){let e={},r=t.length;for(let n=0;n<r;++n)e[t[n]]=!0;return e}function Kve(t,e,r,n){let i=n??"\u2026",s=t+"",o=s.length,a=Math.max(0,e-i.length);return o<=e?s:r==="left"?i+s.slice(o-a):r==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Qp(t,e,r){if(t)if(e){let n=t.length;for(let i=0;i<n;++i){let s=e(t[i]);s&&r(s,i,t)}}else t.forEach(r)}Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var e=isNaN(arguments[0])?1:Number(arguments[0]);return e?Array.prototype.reduce.call(this,function(r,n){return Array.isArray(n)?r.push.apply(r,t.call(n,e-1)):r.push(n),r},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var n_e=Na(Xve()),i_e=Na(Zve()),Ck=Na(t_e());function _k(t){return!!t.or}function bk(t){return!!t.and}function Tk(t){return!!t.not}function WC(t,e){if(Tk(t))WC(t.not,e);else if(bk(t))for(let r of t.and)WC(r,e);else if(_k(t))for(let r of t.or)WC(r,e);else e(t)}function Vp(t,e){return Tk(t)?{not:Vp(t.not,e)}:bk(t)?{and:t.and.map(r=>Vp(r,e))}:_k(t)?{or:t.or.map(r=>Vp(r,e))}:e(t)}var sa=i_e.default,we=n_e.default;function s_e(t){throw new Error(t)}function Wp(t,e){let r={};for(let n of e)Fe(t,n)&&(r[n]=t[n]);return r}function Hn(t,e){let r=Object.assign({},t);for(let n of e)delete r[n];return r}Set.prototype.toJSON=function(){return`Set(${[...this].map(t=>(0,Ck.default)(t)).join(",")})`};var jt=Ck.default;function $e(t){if(Ct(t))return t;let e=he(t)?t:(0,Ck.default)(t);if(e.length<250)return e;let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);r=(r<<5)-r+i,r=r&r}return r}function Dee(t){return t===!1||t===null}function We(t,e){return t.includes(e)}function qx(t,e){let r=0;for(let[n,i]of t.entries())if(e(i,n,r++))return!0;return!1}function Nee(t,e){let r=0;for(let[n,i]of t.entries())if(!e(i,n,r++))return!1;return!0}function o_e(t,...e){for(let r of e)Vct(t,r??{});return t}function Vct(t,e){for(let r of H(e))t4(t,r,e[r],!0)}function Ao(t,e){let r=[],n={},i;for(let s of t)i=e(s),!(i in n)&&(n[i]=1,r.push(s));return r}function a_e(t,e){if(t.size!==e.size)return!1;for(let r of t)if(!e.has(r))return!1;return!0}function Fee(t,e){for(let r of t)if(e.has(r))return!0;return!1}function r_e(t){let e=new Set;for(let r of t){let i=s0(r).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(let o of s)e.add(o)}return e}function wee(t,e){return t===void 0||e===void 0?!0:Fee(r_e(t),r_e(e))}function mt(t){return H(t).length===0}var H=Object.keys,en=Object.values,iu=Object.entries;function KC(t){return t===!0||t===!1}function Lt(t){let e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function YC(t,e){return Tk(t)?`!(${YC(t.not,e)})`:bk(t)?`(${t.and.map(r=>YC(r,e)).join(") && (")})`:_k(t)?`(${t.or.map(r=>YC(r,e)).join(") || (")})`:e(t)}function Rk(t,e){if(e.length===0)return!0;let r=e.shift();return r in t&&Rk(t[r],e)&&delete t[r],mt(t)}function yg(t){return t.charAt(0).toUpperCase()+t.substr(1)}function Ok(t,e="datum"){let r=s0(t),n=[];for(let i=1;i<=r.length;i++){let s=`[${r.slice(0,i).map(fe).join("][")}]`;n.push(`${e}${s}`)}return n.join(" && ")}function u_e(t,e="datum"){return`${e}[${fe(s0(t).join("."))}]`}function Wct(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function oi(t){return`${s0(t).map(Wct).join("\\.")}`}function tf(t,e,r){return t.replace(new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),r)}function Dk(t){return`${s0(t).join(".")}`}function r4(t){return t?s0(t).length:0}function It(...t){for(let e of t)if(e!==void 0)return e}var Yct=42;function l_e(t){let e=++Yct;return t?String(t)+e:e}function c_e(t){return Kct(t)?t:`__${t}`}function Kct(t){return t.startsWith("__")}function Eg(t){if(t!==void 0)return(t%360+360)%360}function Nk(t){return Ct(t)?!0:!isNaN(t)&&!isNaN(parseFloat(t))}var XC=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},oa="row",aa="column",n4="facet",Ht="x",Cr="y",ua="x2",su="y2",Ju="xOffset",rf="yOffset",la="radius",a0="radius2",So="theta",u0="theta2",vo="latitude",_o="longitude",qs="latitude2",fs="longitude2",hn="color",Us="fill",$s="stroke",tn="shape",ca="size",l0="angle",bo="opacity",ou="fillOpacity",au="strokeOpacity",uu="strokeWidth",lu="strokeDash",Ag="text",Sg="order",vg="detail",i4="key",Ux="tooltip",s4="href",o4="url",a4="description",Xct={x:1,y:1,x2:1,y2:1},f_e={theta:1,theta2:1,radius:1,radius2:1};function Lee(t){return t in f_e}var Iee={longitude:1,longitude2:1,latitude:1,latitude2:1};function x_e(t){switch(t){case vo:return"y";case qs:return"y2";case _o:return"x";case fs:return"x2"}}function d_e(t){return t in Iee}var h_e=H(Iee),wk=Object.assign(Object.assign(Object.assign(Object.assign({},Xct),f_e),Iee),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function $x(t){return t===hn||t===Us||t===$s}var p_e={row:1,column:1,facet:1},qi=H(p_e),Lk=Object.assign(Object.assign({},wk),p_e),m_e=H(Lk),{order:WUt,detail:YUt,tooltip:KUt}=Lk,Mee=XC(Lk,["order","detail","tooltip"]),{row:XUt,column:JUt,facet:ZUt}=Mee,g_e=XC(Mee,["row","column","facet"]),e$t=H(Mee),t$t=H(g_e);function y_e(t){return!!g_e[t]}function Ik(t){return!!Lk[t]}var E_e=[ua,su,qs,fs,u0,a0];function Mk(t){return cu(t)!==t}function cu(t){switch(t){case ua:return Ht;case su:return Cr;case qs:return vo;case fs:return _o;case u0:return So;case a0:return la}return t}function Zu(t){if(Lee(t))switch(t){case So:return"startAngle";case u0:return"endAngle";case la:return"outerRadius";case a0:return"innerRadius"}return t}function js(t){switch(t){case Ht:return ua;case Cr:return su;case vo:return qs;case _o:return fs;case So:return u0;case la:return a0}}function rn(t){switch(t){case Ht:case ua:return"width";case Cr:case su:return"height"}}function A_e(t){switch(t){case Ht:return"xOffset";case Cr:return"yOffset";case ua:return"x2Offset";case su:return"y2Offset";case So:return"thetaOffset";case la:return"radiusOffset";case u0:return"theta2Offset";case a0:return"radius2Offset"}}function Pk(t){switch(t){case Ht:return"xOffset";case Cr:return"yOffset"}}function kk(t){switch(t){case"xOffset":return"x";case"yOffset":return"y"}}var S_e=H(wk),{x:r$t,y:n$t,x2:i$t,y2:s$t,xOffset:o$t,yOffset:a$t,latitude:u$t,longitude:l$t,latitude2:c$t,longitude2:f$t,theta:x$t,theta2:d$t,radius:h$t,radius2:p$t}=wk,Bk=XC(wk,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),v_e=H(Bk),Pee={x:1,y:1},ai=H(Pee);function Ar(t){return t in Pee}var qk={theta:1,radius:1},__e=H(qk);function Yp(t){return t==="width"?Ht:Cr}var kee={xOffset:1,yOffset:1},m$t=H(kee);function c0(t){return t in kee}var{text:g$t,tooltip:y$t,href:E$t,url:A$t,description:S$t,detail:v$t,key:_$t,order:b$t}=Bk,b_e=XC(Bk,["text","tooltip","href","url","description","detail","key","order"]),T_e=H(b_e);function C_e(t){return!!Bk[t]}function R_e(t){switch(t){case hn:case Us:case $s:case ca:case tn:case bo:case uu:case lu:return!0;case ou:case au:case l0:return!1}}var O_e=Object.assign(Object.assign(Object.assign(Object.assign({},Pee),qk),kee),b_e),Kp=H(O_e);function Hs(t){return!!O_e[t]}function D_e(t,e){return Zct(t)[e]}var Bee={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:T$t}=Bee,Jct=XC(Bee,["geoshape"]);function Zct(t){switch(t){case hn:case Us:case $s:case a4:case vg:case i4:case Ux:case s4:case Sg:case bo:case ou:case au:case uu:case n4:case oa:case aa:return Bee;case Ht:case Cr:case Ju:case rf:case vo:case _o:return Jct;case ua:case su:case qs:case fs:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ca:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case lu:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case tn:return{point:"always",geoshape:"always"};case Ag:return{text:"always"};case l0:return{point:"always",square:"always",text:"always"};case o4:return{image:"always"};case So:return{text:"always",arc:"always"};case la:return{text:"always",arc:"always"};case u0:case a0:return{arc:"always"}}}function Uk(t){switch(t){case Ht:case Cr:case So:case la:case Ju:case rf:case ca:case l0:case uu:case bo:case ou:case au:case ua:case su:case u0:case a0:return;case n4:case oa:case aa:case tn:case lu:case Ag:case Ux:case s4:case o4:case a4:return"discrete";case hn:case Us:case $s:return"flexible";case vo:case _o:case qs:case fs:case vg:case i4:case Sg:return}}var tft={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},N_e={count:1,min:1,max:1};function fu(t){return!!t&&!!t.argmin}function el(t){return!!t&&!!t.argmax}function u4(t){return he(t)&&!!tft[t]}var rft=new Set(["count","valid","missing","distinct"]);function $k(t){return he(t)&&rft.has(t)}function F_e(t){return he(t)&&We(["min","max"],t)}var w_e=new Set(["count","sum","distinct","valid","missing"]),L_e=new Set(["mean","average","median","q1","q3","min","max"]);function jk(t){return o0(t)&&(t=c4(t,void 0)),"bin"+H(t).map(e=>l4(t[e])?Lt(`_${e}_${iu(t[e])}`):Lt(`_${e}_${t[e]}`)).join("")}function St(t){return t===!0||f0(t)&&!t.binned}function qr(t){return t==="binned"||f0(t)&&t.binned===!0}function f0(t){return Se(t)}function l4(t){return t?.param}function qee(t){switch(t){case oa:case aa:case ca:case hn:case Us:case $s:case uu:case bo:case ou:case au:case tn:return 6;case lu:return 4;default:return 10}}function Xp(t){return t&&!!t.expr}function zn(t){let e=H(t||{}),r={};for(let n of e)r[n]=Ui(t[n]);return r}var nft=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function Hk(t){let{anchor:e,frame:r,offset:n,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:x,subtitleLineHeight:d,subtitlePadding:h}=t,p=nft(t,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),m=Object.assign(Object.assign({},p),a?{fill:a}:{}),g=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e?{anchor:e}:{}),r?{frame:r}:{}),n?{offset:n}:{}),i?{orient:i}:{}),s!==void 0?{angle:s}:{}),o!==void 0?{limit:o}:{}),y=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?{subtitleColor:u}:{}),l?{subtitleFont:l}:{}),c?{subtitleFontSize:c}:{}),f?{subtitleFontStyle:f}:{}),x?{subtitleFontWeight:x}:{}),d?{subtitleLineHeight:d}:{}),h?{subtitlePadding:h}:{}),A=Wp(t,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:A,nonMarkTitleProperties:g,subtitle:y}}function x0(t){return he(t)||j(t)&&he(t[0])}function be(t){return t&&!!t.signal}function zs(t){return!!t.step}function I_e(t){return j(t)?!1:"fields"in t&&!("data"in t)}function M_e(t){return j(t)?!1:"fields"in t&&"data"in t}function d0(t){return j(t)?!1:"field"in t&&"data"in t}var ift={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},P_e=H(ift),k_e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},zk=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];var Uee=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function Gk(t){let e=j(t.condition)?t.condition.map(B_e):B_e(t.condition);return Object.assign(Object.assign({},Ui(t)),{condition:e})}function Ui(t){if(Xp(t)){let{expr:e}=t,r=Uee(t,["expr"]);return Object.assign({signal:e},r)}return t}function B_e(t){if(Xp(t)){let{expr:e}=t,r=Uee(t,["expr"]);return Object.assign({signal:e},r)}return t}function vt(t){if(Xp(t)){let{expr:e}=t,r=Uee(t,["expr"]);return Object.assign({signal:e},r)}return be(t)?t:t!==void 0?{value:t}:void 0}function q_e(t){return be(t)?t.signal:fe(t)}function $ee(t){return be(t)?t.signal:fe(t.value)}function xu(t){return be(t)?t.signal:t==null?null:fe(t)}function U_e(t,e,r){for(let n of r){let i=nf(n,e.markDef,e.config);i!==void 0&&(t[n]=vt(i))}return t}function jee(t){var e;return[].concat(t.type,(e=t.style)!==null&&e!==void 0?e:[])}function st(t,e,r,n={}){let{vgChannel:i,ignoreVgConfig:s}=n;return i&&e[i]!==void 0?e[i]:e[t]!==void 0?e[t]:s&&(!i||i===t)?void 0:nf(t,e,r,n)}function nf(t,e,r,{vgChannel:n}={}){return It(n?JC(t,e,r.style):void 0,JC(t,e,r.style),n?r[e.type][n]:void 0,r[e.type][t],n?r.mark[n]:r.mark[t])}function JC(t,e,r){return Hee(t,jee(e),r)}function Hee(t,e,r){e=le(e);let n;for(let i of e){let s=r[i];s&&s[t]!==void 0&&(n=s[t])}return n}function Qk(t,e){return le(t).reduce((r,n)=>{var i;return r.field.push(ue(n,e)),r.order.push((i=n.sort)!==null&&i!==void 0?i:"ascending"),r},{field:[],order:[]})}function zee(t,e){let r=[...t];return e.forEach(n=>{for(let i of r)if(sa(i,n))return;r.push(n)}),r}function Gee(t,e){return sa(t,e)||!e?t:t?[...le(t),...le(e)].join(", "):e}function Vk(t,e){let r=t.value,n=e.value;if(r==null||n===null)return{explicit:t.explicit,value:null};if((x0(r)||be(r))&&(x0(n)||be(n)))return{explicit:t.explicit,value:Gee(r,n)};if(x0(r)||be(r))return{explicit:t.explicit,value:r};if(x0(n)||be(n))return{explicit:t.explicit,value:n};if(!x0(r)&&!be(r)&&!x0(n)&&!be(n))return{explicit:t.explicit,value:zee(r,n)};throw new Error("It should never reach here")}var z={};qo(z,{ADD_SAME_CHILD_TWICE:()=>Rft,CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN:()=>ext,CONCAT_CANNOT_SHARE_AXIS:()=>bft,FACETED_INDEPENDENT_DIFFERENT_SOURCES:()=>gxt,FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES:()=>yxt,FACETED_INDEPENDENT_SAME_SOURCE:()=>Ext,FIT_NON_SINGLE:()=>oft,INTERVAL_INITIALIZED_WITH_X_Y:()=>Sft,INVALID_CHANNEL_FOR_AXIS:()=>Axt,LEGEND_BINDINGS_MUST_HAVE_PROJECTION:()=>gft,LINE_WITH_VARYING_SIZE:()=>Hft,MORE_THAN_ONE_SORT:()=>mxt,NEEDS_SAME_SELECTION:()=>Aft,NO_FIELDS_NEEDS_AS:()=>Dft,REPLACE_ANGLE_WITH_THETA:()=>wft,SCALE_BINDINGS_CONTINUOUS:()=>mft,cannotApplySizeToNonOrientedMark:()=>oxt,cannotLookupVariableParameter:()=>yft,cannotProjectAggregate:()=>xft,cannotProjectOnChannelWithoutField:()=>fft,cannotStackNonLinearScale:()=>vxt,cannotStackRangedMark:()=>Sxt,cannotUseRelativeBandSizeWithNonBandScale:()=>rxt,cannotUseScalePropertyWithNonColor:()=>txt,channelRequiredForBinned:()=>Nxt,channelShouldBeDiscrete:()=>Vft,channelShouldBeDiscreteOrDiscretizing:()=>Wft,channelShouldNotBeUsedForBinned:()=>Fxt,columnsNotSupportByRowCol:()=>_ft,containerSizeNonSingle:()=>aft,containerSizeNotCompatibleWithAutosize:()=>uft,customFormatTypeNotAllowed:()=>Nft,differentParse:()=>Cft,discreteChannelCannotEncode:()=>Kft,domainRequiredForThresholdScale:()=>wxt,domainSortDropped:()=>pxt,droppedDay:()=>Txt,droppingColor:()=>Uft,droppingFit:()=>lft,emptyFieldDef:()=>jft,errorBand1DNotSupport:()=>Dxt,errorBarCenterAndExtentAreNotNeeded:()=>Cxt,errorBarCenterIsUsedWithWrongExtent:()=>Rxt,errorBarContinuousAxisHasCustomizedAggregate:()=>Oxt,facetChannelDropped:()=>Yft,incompatibleChannel:()=>zft,independentScaleMeansIndependentGuide:()=>hxt,invalidAggregate:()=>Bft,invalidEncodingChannel:()=>Qft,invalidFieldType:()=>Pft,invalidFieldTypeForCountAggregate:()=>kft,invalidSpec:()=>sft,invalidTimeUnit:()=>bxt,invalidTransformIgnored:()=>Oft,lineWithRange:()=>Jft,mergeConflictingDomainProperty:()=>dxt,mergeConflictingProperty:()=>xxt,missingFieldType:()=>qft,nearestNotSupportForContinuous:()=>dft,noSameUnitLookup:()=>Eft,noSuchRepeatedValue:()=>vft,offsetEncodingScaleIgnored:()=>Gft,offsetNestedInsideContinuousPositionScaleDropped:()=>Lft,orientOverridden:()=>Zft,primitiveChannelDef:()=>Mft,projectionOverridden:()=>Fft,rangeMarkAlignmentCannotBeExpression:()=>Xft,relativeBandSizeNotSupported:()=>$ft,replaceOffsetWithMainChannel:()=>Ift,scalePropertyNotWorkWithScaleType:()=>lxt,scaleTypeNotWorkWithChannel:()=>axt,scaleTypeNotWorkWithFieldDef:()=>uxt,scaleTypeNotWorkWithMark:()=>cxt,selectionNotFound:()=>pft,selectionNotSupported:()=>hft,stackNonSummativeAggregate:()=>_xt,stepDropped:()=>fxt,unaggregateDomainHasNoEffectForRawField:()=>nxt,unaggregateDomainWithNonSharedDomainOp:()=>ixt,unaggregatedDomainWithLogScale:()=>sxt,unknownField:()=>cft,unrecognizedParse:()=>Tft});function sft(t){return`Invalid specification ${jt(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}var oft='Autosize "fit" only works for single views and layered views.';function aft(t){return`${t=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function uft(t){let e=t=="width"?"Width":"Height",r=t=="width"?"x":"y";return`${e} "container" only works well with autosize "fit" or "fit-${r}".`}function lft(t){return t?`Dropping "fit-${t}" because spec has discrete ${rn(t)}.`:'Dropping "fit" because spec has discrete size.'}function cft(t){return`Unknown field for ${t}. Cannot calculate view size.`}function fft(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function xft(t,e){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${e}").`}function dft(t){return`The "nearest" transform is not supported for ${t} marks.`}function hft(t){return`Selection not supported for ${t} yet.`}function pft(t){return`Cannot find a selection named "${t}".`}var mft="Scale bindings are currently only supported for scales with unbinned, continuous domains.",gft="Legend bindings are only supported for selections over an individual field or encoding channel.";function yft(t){return`Lookups can only be performed on selection parameters. "${t}" is a variable parameter.`}function Eft(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}var Aft="The same selection must be used to override scale domains in a layered view.",Sft='Interval selections should be initialized using "x" and/or "y" keys.';function vft(t){return`Unknown repeated value "${t}".`}function _ft(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}var bft="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Tft(t){return`Unrecognized parse "${t}".`}function Cft(t,e,r){return`An ancestor parsed field "${t}" as ${r} but a child wants to parse the field as ${e}.`}var Rft="Attempt to add the same child twice.";function Oft(t){return`Ignoring an invalid transform: ${jt(t)}.`}var Dft='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Nft(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function Fft(t){let{parentProjection:e,projection:r}=t;return`Layer's shared projection ${jt(e)} is overridden by a child projection ${jt(r)}.`}var wft="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Lft(t){return`${t}Offset dropped because ${t} is continuous`}function Ift(t){return`There is no ${t} encoding. Replacing ${t}Offset encoding as ${t}.`}function Mft(t,e,r){return`Channel ${t} is a ${e}. Converted to {value: ${jt(r)}}.`}function Pft(t){return`Invalid field type "${t}".`}function kft(t,e){return`Invalid field type "${t}" for aggregate: "${e}", using "quantitative" instead.`}function Bft(t){return`Invalid aggregation operator "${t}".`}function qft(t,e){return`Missing type for channel "${t}", using "${e}" instead.`}function Uft(t,e){let{fill:r,stroke:n}=e;return`Dropping color ${t} as the plot also has ${r&&n?"fill and stroke":r?"fill":"stroke"}.`}function $ft(t){return`Position range does not support relative band size for ${t}.`}function jft(t,e){return`Dropping ${jt(t)} from channel "${e}" since it does not contain any data field, datum, value, or signal.`}var Hft="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function zft(t,e,r){return`${t} dropped as it is incompatible with "${e}"${r?` when ${r}`:""}.`}function Gft(t){return`${t} encoding has no scale, so specified scale is ignored.`}function Qft(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function Vft(t){return`${t} encoding should be discrete (ordinal / nominal / binned).`}function Wft(t){return`${t} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Yft(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function Kft(t,e){return`Using discrete channel "${t}" to encode "${e}" field can be misleading as it does not encode ${e==="ordinal"?"order":"magnitude"}.`}function Xft(t){return`The ${t} for range marks cannot be an expression`}function Jft(t,e){return`Line mark is for continuous lines and thus cannot be used with ${t&&e?"x2 and y2":t?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Zft(t,e){return`Specified orient "${t}" overridden with "${e}".`}var ext="Custom domain scale cannot be unioned with default field-based domain.";function txt(t){return`Cannot use the scale property "${t}" with non-color channel.`}function rxt(t){return`Cannot use the relative band size with ${t} scale.`}function nxt(t){return`Using unaggregated domain with raw field has no effect (${jt(t)}).`}function ixt(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function sxt(t){return`Unaggregated domain is currently unsupported for log scale (${jt(t)}).`}function oxt(t){return`Cannot apply size to non-oriented mark "${t}".`}function axt(t,e,r){return`Channel "${t}" does not work with "${e}" scale. We are using "${r}" scale instead.`}function uxt(t,e){return`FieldDef does not work with "${t}" scale. We are using "${e}" scale instead.`}function lxt(t,e,r){return`${r}-scale's "${e}" is dropped as it does not work with ${t} scale.`}function cxt(t,e){return`Scale type "${e}" does not work with mark "${t}".`}function fxt(t){return`The step for "${t}" is dropped because the ${t==="width"?"x":"y"} is continuous.`}function xxt(t,e,r,n){return`Conflicting ${e.toString()} property "${t.toString()}" (${jt(r)} and ${jt(n)}). Using ${jt(r)}.`}function dxt(t,e,r,n){return`Conflicting ${e.toString()} property "${t.toString()}" (${jt(r)} and ${jt(n)}). Using the union of the two domains.`}function hxt(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function pxt(t){return`Dropping sort property ${jt(t)} as unioned domains only support boolean or op "count", "min", and "max".`}var mxt="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",gxt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",yxt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Ext="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",Axt="Invalid channel for axis.";function Sxt(t){return`Cannot stack "${t}" if there is already "${t}2".`}function vxt(t){return`Cannot stack non-linear scale (${t}).`}function _xt(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function bxt(t,e){return`Invalid ${t}: ${jt(e)}.`}function Txt(t){return`Dropping day from datetime ${jt(t)} as day cannot be combined with other units.`}function Cxt(t,e){return`${e?"extent ":""}${e&&t?"and ":""}${t?"center ":""}${e&&t?"are ":"is "}not needed when data are aggregated.`}function Rxt(t,e,r){return`${t} is not usually used with ${e} for ${r}.`}function Oxt(t,e){return`Continuous axis should not have customized aggregation function ${t}; ${e} already agregates the axis.`}function Dxt(t){return`1D error band does not support ${t}.`}function Nxt(t){return`Channel ${t} is required for "binned" bin.`}function Fxt(t){return`Channel ${t} should not be used with "binned" bin.`}function wxt(t){return`Domain for ${t} is required for threshold scale.`}var Lxt;var $_e=lk(Oee),f4=$_e;Lxt=new WeakMap;function j_e(t){return f4=t,f4}function H_e(){return f4=$_e,f4}function K(...t){f4.warn(...t)}function z_e(...t){f4.debug(...t)}function tl(t){if(t&&Se(t)){for(let e of Wk)if(e in t)return!0}return!1}var G_e=["january","february","march","april","may","june","july","august","september","october","november","december"],Ixt=G_e.map(t=>t.substr(0,3)),Q_e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Mxt=Q_e.map(t=>t.substr(0,3));function Pxt(t){if(Nk(t)&&(t=+t),Ct(t))return t>4&&K(z.invalidTimeUnit("quarter",t)),t-1;throw new Error(z.invalidTimeUnit("quarter",t))}function kxt(t){if(Nk(t)&&(t=+t),Ct(t))return t-1;{let e=t.toLowerCase(),r=G_e.indexOf(e);if(r!==-1)return r;let n=e.substr(0,3),i=Ixt.indexOf(n);if(i!==-1)return i;throw new Error(z.invalidTimeUnit("month",t))}}function Bxt(t){if(Nk(t)&&(t=+t),Ct(t))return t%7;{let e=t.toLowerCase(),r=Q_e.indexOf(e);if(r!==-1)return r;let n=e.substr(0,3),i=Mxt.indexOf(n);if(i!==-1)return i;throw new Error(z.invalidTimeUnit("day",t))}}function Qee(t,e){let r=[];if(e&&t.day!==void 0&&H(t).length>1&&(K(z.droppedDay(t)),t=we(t),delete t.day),t.year!==void 0?r.push(t.year):r.push(2012),t.month!==void 0){let n=e?kxt(t.month):t.month;r.push(n)}else if(t.quarter!==void 0){let n=e?Pxt(t.quarter):t.quarter;r.push(Ct(n)?n*3:`${n}*3`)}else r.push(0);if(t.date!==void 0)r.push(t.date);else if(t.day!==void 0){let n=e?Bxt(t.day):t.day;r.push(Ct(n)?n+1:`${n}+1`)}else r.push(1);for(let n of["hours","minutes","seconds","milliseconds"]){let i=t[n];r.push(typeof i>"u"?0:i)}return r}function Jp(t){let r=Qee(t,!0).join(", ");return t.utc?`utc(${r})`:`datetime(${r})`}function V_e(t){let r=Qee(t,!1).join(", ");return t.utc?`utc(${r})`:`datetime(${r})`}function W_e(t){let e=Qee(t,!0);return t.utc?+new Date(Date.UTC(...e)):+new Date(...e)}var qxt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Y_e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Wk=H(Y_e);function K_e(t){return!!Y_e[t]}function Vee(t){return t.startsWith("utc")}function Uxt(t){return t.substr(3)}var $xt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function ZC(t){return Wk.filter(e=>X_e(t,e))}function X_e(t,e){let r=t.indexOf(e);return!(r<0||r>0&&e==="seconds"&&t.charAt(r-1)==="i"||t.length>r+3&&e==="day"&&t.charAt(r+3)==="o"||r>0&&e==="year"&&t.charAt(r-1)==="f")}function J_e(t,e,{end:r}={end:!1}){let n=Ok(e),i=Vee(t)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${n})-1)`:`${i}${u}(${n})`}let o,a={};for(let u of Wk)X_e(t,u)&&(a[u]=s(u),o=u);return r&&(a[o]+="+1"),V_e(a)}function Wee(t){if(!t)return;let e=ZC(t);return`timeUnitSpecifier(${jt(e)}, ${jt($xt)})`}function Z_e(t,e,r){if(!t)return;let n=Wee(t);return`${r||Vee(t)?"utc":"time"}Format(${e}, ${n})`}function nn(t){if(!t)return;let e;return he(t)?e={unit:t}:Se(t)&&(e=Object.assign(Object.assign({},t),t.unit?{unit:t.unit}:{})),Vee(e.unit)&&(e.utc=!0,e.unit=Uxt(e.unit)),e}function e5e(t){let e=nn(t),{utc:r}=e,n=qxt(e,["utc"]);return n.unit?(r?"utc":"")+H(n).map(i=>Lt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(r?"utc":"")+"timeunit"+H(n).map(i=>Lt(`_${i}_${n[i]}`)).join("")}function t5e(t){return t?.param}function Yk(t){return t&&!!t.field&&t.equal!==void 0}function Kk(t){return t&&!!t.field&&t.lt!==void 0}function Xk(t){return t&&!!t.field&&t.lte!==void 0}function Jk(t){return t&&!!t.field&&t.gt!==void 0}function Zk(t){return t&&!!t.field&&t.gte!==void 0}function eB(t){if(t?.field){if(j(t.range)&&t.range.length===2)return!0;if(be(t.range))return!0}return!1}function tB(t){return t&&!!t.field&&(j(t.oneOf)||j(t.in))}function jxt(t){return t&&!!t.field&&t.valid!==void 0}function Yee(t){return tB(t)||Yk(t)||eB(t)||Kk(t)||Jk(t)||Xk(t)||Zk(t)}function sf(t,e){return _g(t,{timeUnit:e,wrapTime:!0})}function Hxt(t,e){return t.map(r=>sf(r,e))}function rB(t,e=!0){var r;let{field:n}=t,i=(r=nn(t.timeUnit))===null||r===void 0?void 0:r.unit,s=i?`time(${J_e(i,n)})`:ue(t,{expr:"datum"});if(Yk(t))return`${s}===${sf(t.equal,i)}`;if(Kk(t)){let o=t.lt;return`${s}<${sf(o,i)}`}else if(Jk(t)){let o=t.gt;return`${s}>${sf(o,i)}`}else if(Xk(t)){let o=t.lte;return`${s}<=${sf(o,i)}`}else if(Zk(t)){let o=t.gte;return`${s}>=${sf(o,i)}`}else{if(tB(t))return`indexof([${Hxt(t.oneOf,i).join(",")}], ${s}) !== -1`;if(jxt(t))return eR(s,t.valid);if(eB(t)){let{range:o}=t,a=be(o)?{signal:`${o.signal}[0]`}:o[0],u=be(o)?{signal:`${o.signal}[1]`}:o[1];if(a!==null&&u!==null&&e)return"inrange("+s+", ["+sf(a,i)+", "+sf(u,i)+"])";let l=[];return a!==null&&l.push(`${s} >= ${sf(a,i)}`),u!==null&&l.push(`${s} <= ${sf(u,i)}`),l.length>0?l.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${jt(t)}`)}function eR(t,e=!0){return e?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function r5e(t){var e;return Yee(t)&&t.timeUnit?Object.assign(Object.assign({},t),{timeUnit:(e=nn(t.timeUnit))===null||e===void 0?void 0:e.unit}):t}var n5e={},Kee={},Xee=34,tR=10,Jee=13;function s5e(t){return new Function("d","return {"+t.map(function(e,r){return JSON.stringify(e)+": d["+r+'] || ""'}).join(",")+"}")}function zxt(t,e){var r=s5e(t);return function(n,i){return e(r(n),i,t)}}function i5e(t){var e=Object.create(null),r=[];return t.forEach(function(n){for(var i in n)i in e||r.push(e[i]=i)}),r}function fa(t,e){var r=t+"",n=r.length;return n<e?new Array(e-n+1).join(0)+r:r}function Gxt(t){return t<0?"-"+fa(-t,6):t>9999?"+"+fa(t,6):fa(t,4)}function Qxt(t){var e=t.getUTCHours(),r=t.getUTCMinutes(),n=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Gxt(t.getUTCFullYear(),4)+"-"+fa(t.getUTCMonth()+1,2)+"-"+fa(t.getUTCDate(),2)+(i?"T"+fa(e,2)+":"+fa(r,2)+":"+fa(n,2)+"."+fa(i,3)+"Z":n?"T"+fa(e,2)+":"+fa(r,2)+":"+fa(n,2)+"Z":r||e?"T"+fa(e,2)+":"+fa(r,2)+"Z":"")}function Zee(t){var e=new RegExp('["'+t+`
\r]`),r=t.charCodeAt(0);function n(f,x){var d,h,p=i(f,function(m,g){if(d)return d(m,g-1);h=m,d=x?zxt(m,x):s5e(m)});return p.columns=h||[],p}function i(f,x){var d=[],h=f.length,p=0,m=0,g,y=h<=0,A=!1;f.charCodeAt(h-1)===tR&&--h,f.charCodeAt(h-1)===Jee&&--h;function S(){if(y)return Kee;if(A)return A=!1,n5e;var _,b=p,R;if(f.charCodeAt(b)===Xee){for(;p++<h&&f.charCodeAt(p)!==Xee||f.charCodeAt(++p)===Xee;);return(_=p)>=h?y=!0:(R=f.charCodeAt(p++))===tR?A=!0:R===Jee&&(A=!0,f.charCodeAt(p)===tR&&++p),f.slice(b+1,_-1).replace(/""/g,'"')}for(;p<h;){if((R=f.charCodeAt(_=p++))===tR)A=!0;else if(R===Jee)A=!0,f.charCodeAt(p)===tR&&++p;else if(R!==r)continue;return f.slice(b,_)}return y=!0,f.slice(b,h)}for(;(g=S())!==Kee;){for(var T=[];g!==n5e&&g!==Kee;)T.push(g),g=S();x&&(T=x(T,m++))==null||d.push(T)}return d}function s(f,x){return f.map(function(d){return x.map(function(h){return c(d[h])}).join(t)})}function o(f,x){return x==null&&(x=i5e(f)),[x.map(c).join(t)].concat(s(f,x)).join(`
`)}function a(f,x){return x==null&&(x=i5e(f)),s(f,x).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(t)}function c(f){return f==null?"":f instanceof Date?Qxt(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:n,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function ete(t){return t}function nB(t){if(t==null)return ete;var e,r,n=t.scale[0],i=t.scale[1],s=t.translate[0],o=t.translate[1];return function(a,u){u||(e=r=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(e+=a[0])*n+s,f[1]=(r+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function o5e(t,e){for(var r,n=t.length,i=n-e;i<--n;)r=t[i],t[i++]=t[n],t[n]=r}function tte(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(r){return a5e(t,r)})}:a5e(t,e)}function a5e(t,e){var r=e.id,n=e.bbox,i=e.properties==null?{}:e.properties,s=iB(t,e);return r==null&&n==null?{type:"Feature",properties:i,geometry:s}:n==null?{type:"Feature",id:r,properties:i,geometry:s}:{type:"Feature",id:r,bbox:n,properties:i,geometry:s}}function iB(t,e){var r=nB(t.transform),n=t.arcs;function i(c,f){f.length&&f.pop();for(var x=n[c<0?~c:c],d=0,h=x.length;d<h;++d)f.push(r(x[d],d));c<0&&o5e(f,h)}function s(c){return r(c)}function o(c){for(var f=[],x=0,d=c.length;x<d;++x)i(c[x],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,x;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":x=s(c.coordinates);break;case"MultiPoint":x=c.coordinates.map(s);break;case"LineString":x=o(c.arcs);break;case"MultiLineString":x=c.arcs.map(o);break;case"Polygon":x=u(c.arcs);break;case"MultiPolygon":x=c.arcs.map(u);break;default:return null}return{type:f,coordinates:x}}return l(e)}function rte(t,e){var r={},n={},i={},s=[],o=-1;e.forEach(function(l,c){var f=t.arcs[l<0?~l:l],x;f.length<3&&!f[1][0]&&!f[1][1]&&(x=e[++o],e[o]=l,e[c]=x)}),e.forEach(function(l){var c=a(l),f=c[0],x=c[1],d,h;if(d=i[f])if(delete i[d.end],d.push(l),d.end=x,h=n[x]){delete n[h.start];var p=h===d?d:d.concat(h);n[p.start=d.start]=i[p.end=h.end]=p}else n[d.start]=i[d.end]=d;else if(d=n[x])if(delete n[d.start],d.unshift(l),d.start=f,h=i[f]){delete i[h.end];var m=h===d?d:h.concat(d);n[m.start=h.start]=i[m.end=d.end]=m}else n[d.start]=i[d.end]=d;else d=[l],n[d.start=f]=i[d.end=x]=d});function a(l){var c=t.arcs[l<0?~l:l],f=c[0],x;return t.transform?(x=[0,0],c.forEach(function(d){x[0]+=d[0],x[1]+=d[1]})):x=c[c.length-1],l<0?[x,f]:[f,x]}function u(l,c){for(var f in l){var x=l[f];delete c[x.start],delete x.start,delete x.end,x.forEach(function(d){r[d<0?~d:d]=1}),s.push(x)}}return u(i,n),u(n,i),e.forEach(function(l){r[l<0?~l:l]||s.push([l])}),s}function nte(t){return iB(t,u5e.apply(this,arguments))}function u5e(t,e,r){var n,i,s;if(arguments.length>1)n=Vxt(t,e,r);else for(i=0,n=new Array(s=t.arcs.length);i<s;++i)n[i]=i;return{type:"MultiLineString",arcs:rte(t,n)}}function Vxt(t,e,r){var n=[],i=[],s;function o(f){var x=f<0?~f:f;(i[x]||(i[x]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(e),i.forEach(r==null?function(f){n.push(f[0].i)}:function(f){r(f[0].g,f[f.length-1].g)&&n.push(f[0].i)}),n}function Gs(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ite(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function h0(t){let e,r,n;t.length!==2?(e=Gs,r=(a,u)=>Gs(t(a),u),n=(a,u)=>t(a)-u):(e=t===Gs||t===ite?t:Kxt,r=t,n=t);function i(a,u,l=0,c=a.length){if(l<c){if(e(u,u)!==0)return c;do{let f=l+c>>>1;r(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(e(u,u)!==0)return c;do{let f=l+c>>>1;r(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){let f=i(a,u,l,c-1);return f>l&&n(a[f-1],u)>-n(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Kxt(){return 0}function rR(t){return t===null?NaN:+t}function*l5e(t,e){if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of t)(n=e(n,++r,t))!=null&&(n=+n)>=n&&(yield n)}}var c5e=h0(Gs),bg=c5e.right,ste=c5e.left,Xxt=h0(rR).center,p0=bg;function ote(t,e){let r=0,n,i=0,s=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(n=o-i,i+=n/++r,s+=n*(o-i));else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&(a=+a)>=a&&(n=a-i,i+=n/++r,s+=n*(a-i))}if(r>1)return s/(r-1)}function sB(t,e){let r=ote(t,e);return r&&Math.sqrt(r)}var Ur=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){let r=this._partials,n=0;for(let i=0;i<this._n&&i<32;i++){let s=r[i],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(r[n++]=a),e=o}return r[n]=e,this._n=n+1,this}valueOf(){let e=this._partials,r=this._n,n,i,s,o=0;if(r>0){for(o=e[--r];r>0&&(n=o,i=e[--r],o=n+i,s=i-(o-n),!s););r>0&&(s<0&&e[r-1]<0||s>0&&e[r-1]>0)&&(i=s*2,n=o+i,i==n-o&&(o=n))}return o}};var x4=class extends Map{constructor(e,r=d5e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(let[n,i]of e)this.set(n,i)}get(e){return super.get(ate(this,e))}has(e){return super.has(ate(this,e))}set(e,r){return super.set(f5e(this,e),r)}delete(e){return super.delete(x5e(this,e))}},jx=class extends Set{constructor(e,r=d5e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(let n of e)this.add(n)}has(e){return super.has(ate(this,e))}add(e){return super.add(f5e(this,e))}delete(e){return super.delete(x5e(this,e))}};function ate({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):r}function f5e({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function x5e({_intern:t,_key:e},r){let n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function d5e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function oB(t,e){return Array.from(e,r=>t[r])}function h5e(t=Gs){if(t===Gs)return ute;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{let n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function ute(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var Jxt=Math.sqrt(50),Zxt=Math.sqrt(10),edt=Math.sqrt(2);function aB(t,e,r){let n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),o=s>=Jxt?10:s>=Zxt?5:s>=edt?2:1,a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(t*l),u=Math.round(e*l),a/l<t&&++a,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(t/l),u=Math.round(e/l),a*l<t&&++a,u*l>e&&--u),u<a&&.5<=r&&r<2?aB(t,e,r*2):[a,u,l]}function Tg(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];let n=e<t,[i,s,o]=n?aB(e,t,r):aB(t,e,r);if(!(s>=i))return[];let a=s-i+1,u=new Array(a);if(n)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function nR(t,e,r){return e=+e,t=+t,r=+r,aB(t,e,r)[2]}function To(t,e,r){e=+e,t=+t,r=+r;let n=e<t,i=n?nR(e,t,r):nR(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function rl(t,e){let r;if(e===void 0)for(let n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function Cg(t,e){let r;if(e===void 0)for(let n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}return r}function uB(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?ute:h5e(i);n>r;){if(n-r>600){let u=n-r+1,l=e-r+1,c=Math.log(u),f=.5*Math.exp(2*c/3),x=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),d=Math.max(r,Math.floor(e-l*f/u+x)),h=Math.min(n,Math.floor(e+(u-l)*f/u+x));uB(t,e,d,h,i)}let s=t[e],o=r,a=n;for(iR(t,r,e),i(t[n],s)>0&&iR(t,r,n);o<a;){for(iR(t,o,a),++o,--a;i(t[o],s)<0;)++o;for(;i(t[a],s)>0;)--a}i(t[r],s)===0?iR(t,r,a):(++a,iR(t,a,n)),a<=e&&(r=a+1),e<=a&&(n=a-1)}return t}function iR(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}function Rg(t,e,r){if(t=Float64Array.from(l5e(t,r)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return Cg(t);if(e>=1)return rl(t);var n,i=(n-1)*e,s=Math.floor(i),o=rl(uB(t,s).subarray(0,s+1)),a=Cg(t.subarray(s+1));return o+(a-o)*(i-s)}}function sR(t,e,r=rR){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,s=Math.floor(i),o=+r(t[s],s,t),a=+r(t[s+1],s+1,t);return o+(a-o)*(i-s)}}function lB(t,e){let r=0,n=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++r,n+=i);else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(s=+s)>=s&&(++r,n+=s)}if(r)return n/r}function d4(t,e){return Rg(t,.5,e)}function*rdt(t){for(let e of t)yield*e}function h4(t){return Array.from(rdt(t))}function Dn(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(i);++n<i;)s[n]=t+n*r;return s}function p4(t,e){let r=0;if(e===void 0)for(let n of t)(n=+n)&&(r+=n);else{let n=-1;for(let i of t)(i=+e(i,++n,t))&&(r+=i)}return r}function p5e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Og(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function of(t){return t=Og(Math.abs(t)),t?t[1]:NaN}function m5e(t,e){return function(r,n){for(var i=r.length,s=[],o=0,a=t[0],u=0;i>0&&a>0&&(u+a+1>n&&(a=Math.max(1,n-u)),s.push(r.substring(i-=a,i+a)),!((u+=a+1)>n));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function g5e(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var ndt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function du(t){if(!(e=ndt.exec(t)))throw new Error("invalid format: "+t);var e;return new cB({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}du.prototype=cB.prototype;function cB(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}cB.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function y5e(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var lte;function E5e(t,e){var r=Og(t,e);if(!r)return t+"";var n=r[0],i=r[1],s=i-(lte=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Og(t,Math.max(0,e+s-1))[0]}function cte(t,e){var r=Og(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}var fte={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:p5e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>cte(t*100,e),r:cte,s:E5e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function xte(t){return t}var A5e=Array.prototype.map,S5e=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function oR(t){var e=t.grouping===void 0||t.thousands===void 0?xte:m5e(A5e.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?xte:g5e(A5e.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f){f=du(f);var x=f.fill,d=f.align,h=f.sign,p=f.symbol,m=f.zero,g=f.width,y=f.comma,A=f.precision,S=f.trim,T=f.type;T==="n"?(y=!0,T="g"):fte[T]||(A===void 0&&(A=12),S=!0,T="g"),(m||x==="0"&&d==="=")&&(m=!0,x="0",d="=");var _=p==="$"?r:p==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",b=p==="$"?n:/[%p]/.test(T)?o:"",R=fte[T],O=/[defgprs%]/.test(T);A=A===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function N(F){var $=_,q=b,X,P,te;if(T==="c")q=R(F)+q,F="";else{F=+F;var me=F<0||1/F<0;if(F=isNaN(F)?u:R(Math.abs(F),A),S&&(F=y5e(F)),me&&+F==0&&h!=="+"&&(me=!1),$=(me?h==="("?h:a:h==="-"||h==="("?"":h)+$,q=(T==="s"?S5e[8+lte/3]:"")+q+(me&&h==="("?")":""),O){for(X=-1,P=F.length;++X<P;)if(te=F.charCodeAt(X),48>te||te>57){q=(te===46?i+F.slice(X+1):F.slice(X))+q,F=F.slice(0,X);break}}}y&&!m&&(F=e(F,1/0));var Ce=$.length+F.length+q.length,Pe=Ce<g?new Array(g-Ce+1).join(x):"";switch(y&&m&&(F=e(Pe+F,Pe.length?g-q.length:1/0),Pe=""),d){case"<":F=$+F+q+Pe;break;case"=":F=$+Pe+F+q;break;case"^":F=Pe.slice(0,Ce=Pe.length>>1)+$+F+q+Pe.slice(Ce);break;default:F=Pe+$+F+q;break}return s(F)}return N.toString=function(){return f+""},N}function c(f,x){var d=l((f=du(f),f.type="f",f)),h=Math.max(-8,Math.min(8,Math.floor(of(x)/3)))*3,p=Math.pow(10,-h),m=S5e[8+h/3];return function(g){return d(p*g)+m}}return{format:l,formatPrefix:c}}var fB,Zp,m4;dte({thousands:",",grouping:[3],currency:["$",""]});function dte(t){return fB=oR(t),Zp=fB.format,m4=fB.formatPrefix,fB}function aR(t){return Math.max(0,-of(Math.abs(t)))}function uR(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(of(e)/3)))*3-of(Math.abs(t)))}function lR(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,of(e)-of(t))+1}var hte=new Date,pte=new Date;function Sr(t,e,r,n){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{let o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{let u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),e(s,a),t(s);while(l<s&&s<o);return u},i.filter=s=>Sr(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),r&&(i.count=(s,o)=>(hte.setTime(+s),pte.setTime(+o),t(hte),t(pte),Math.floor(r(hte,pte))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?o=>n(o)%s===0:o=>i.count(0,o)%s===0):i)),i}var m0=Sr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);m0.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Sr(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):m0);var v5e=m0.range;var Qs=Sr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*1e3)},(t,e)=>(e-t)/1e3,t=>t.getUTCSeconds()),_5e=Qs.range;var e2=Sr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getMinutes()),idt=e2.range,t2=Sr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getUTCMinutes()),sdt=t2.range;var r2=Sr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getHours()),odt=r2.range,n2=Sr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getUTCHours()),adt=n2.range;var xa=Sr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),udt=xa.range,nl=Sr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>t.getUTCDate()-1),ldt=nl.range,xB=Sr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>Math.floor(t/864e5)),cdt=xB.range;function Fg(t){return Sr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5)}var il=Fg(0),g4=Fg(1),T5e=Fg(2),C5e=Fg(3),i2=Fg(4),R5e=Fg(5),O5e=Fg(6),D5e=il.range,fdt=g4.range,xdt=T5e.range,ddt=C5e.range,hdt=i2.range,pdt=R5e.range,mdt=O5e.range;function wg(t){return Sr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/6048e5)}var sl=wg(0),y4=wg(1),N5e=wg(2),F5e=wg(3),s2=wg(4),w5e=wg(5),L5e=wg(6),I5e=sl.range,gdt=y4.range,ydt=N5e.range,Edt=F5e.range,Adt=s2.range,Sdt=w5e.range,vdt=L5e.range;var Hx=Sr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),_dt=Hx.range,zx=Sr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),bdt=zx.range;var Co=Sr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Co.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Sr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});var Tdt=Co.range,Ro=Sr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ro.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Sr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});var Cdt=Ro.range;function P5e(t,e,r,n,i,s){let o=[[Qs,1,1e3],[Qs,5,5*1e3],[Qs,15,15*1e3],[Qs,30,30*1e3],[s,1,6e4],[s,5,5*6e4],[s,15,15*6e4],[s,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[n,1,864e5],[n,2,2*864e5],[r,1,6048e5],[e,1,2592e6],[e,3,3*2592e6],[t,1,31536e6]];function a(l,c,f){let x=c<l;x&&([l,c]=[c,l]);let d=f&&typeof f.range=="function"?f:u(l,c,f),h=d?d.range(l,+c+1):[];return x?h.reverse():h}function u(l,c,f){let x=Math.abs(c-l)/f,d=h0(([,,m])=>m).right(o,x);if(d===o.length)return t.every(To(l/31536e6,c/31536e6,f));if(d===0)return m0.every(Math.max(To(l,c,f),1));let[h,p]=o[x/o[d-1][2]<o[d][2]/x?d-1:d];return h.every(p)}return[a,u]}var[mte,gte]=P5e(Ro,zx,sl,xB,n2,t2),[yte,Ete]=P5e(Co,Hx,il,xa,r2,e2);var xs="year",da="quarter",Ws="month",ui="week",ha="date",Vs="day",Gx="dayofyear",hu="hours",pu="minutes",ol="seconds",g0="milliseconds",Cte=[xs,da,Ws,ui,ha,Vs,Gx,hu,pu,ol,g0],Ate=Cte.reduce((t,e,r)=>(t[e]=1+r,t),{});function Rte(t){let e=le(t).slice(),r={};return e.length||W("Missing time unit."),e.forEach(i=>{Fe(Ate,i)?r[i]=1:W(`Invalid time unit: ${i}.`)}),(r[ui]||r[Vs]?1:0)+(r[da]||r[Ws]||r[ha]?1:0)+(r[Gx]?1:0)>1&&W(`Incompatible time units: ${t}`),e.sort((i,s)=>Ate[i]-Ate[s]),e}var Odt={[xs]:"%Y ",[da]:"Q%q ",[Ws]:"%b ",[ha]:"%d ",[ui]:"W%U ",[Vs]:"%a ",[Gx]:"%j ",[hu]:"%H:00",[pu]:"00:%M",[ol]:":%S",[g0]:".%L",[`${xs}-${Ws}`]:"%Y-%m ",[`${xs}-${Ws}-${ha}`]:"%Y-%m-%d ",[`${hu}-${pu}`]:"%H:%M"};function q5e(t,e){let r=Ke({},Odt,e),n=Rte(t),i=n.length,s="",o=0,a,u;for(o=0;o<i;)for(a=n.length;a>o;--a)if(u=n.slice(o,a).join("-"),r[u]!=null){s+=r[u],o=a;break}return s.trim()}var Lg=new Date;function Ote(t){return Lg.setFullYear(t),Lg.setMonth(0),Lg.setDate(1),Lg.setHours(0,0,0,0),Lg}function U5e(t){return j5e(new Date(t))}function $5e(t){return Ste(new Date(t))}function j5e(t){return xa.count(Ote(t.getFullYear())-1,t)}function Ste(t){return il.count(Ote(t.getFullYear())-1,t)}function vte(t){return Ote(t).getDay()}function Ddt(t,e,r,n,i,s,o){if(0<=t&&t<100){let a=new Date(-1,e,r,n,i,s,o);return a.setFullYear(t),a}return new Date(t,e,r,n,i,s,o)}function H5e(t){return G5e(new Date(t))}function z5e(t){return _te(new Date(t))}function G5e(t){let e=Date.UTC(t.getUTCFullYear(),0,1);return nl.count(e-1,t)}function _te(t){let e=Date.UTC(t.getUTCFullYear(),0,1);return sl.count(e-1,t)}function bte(t){return Lg.setTime(Date.UTC(t,0,1)),Lg.getUTCDay()}function Ndt(t,e,r,n,i,s,o){if(0<=t&&t<100){let a=new Date(Date.UTC(-1,e,r,n,i,s,o));return a.setUTCFullYear(r.y),a}return new Date(Date.UTC(t,e,r,n,i,s,o))}function Q5e(t,e,r,n,i){let s=e||1,o=xt(t),a=(g,y,A)=>(A=A||g,Fdt(r[A],n[A],g===o&&s,y)),u=new Date,l=Bi(t),c=l[xs]?a(xs):Zr(2012),f=l[Ws]?a(Ws):l[da]?a(da):Zc,x=l[ui]&&l[Vs]?a(Vs,1,ui+Vs):l[ui]?a(ui,1):l[Vs]?a(Vs,1):l[ha]?a(ha,1):l[Gx]?a(Gx,1):Bx,d=l[hu]?a(hu):Zc,h=l[pu]?a(pu):Zc,p=l[ol]?a(ol):Zc,m=l[g0]?a(g0):Zc;return function(g){u.setTime(+g);let y=c(u);return i(y,f(u),x(u,y),d(u),h(u),p(u),m(u))}}function Fdt(t,e,r,n){let i=r<=1?t:n?(s,o)=>n+r*Math.floor((t(s,o)-n)/r):(s,o)=>r*Math.floor(t(s,o)/r);return e?(s,o)=>e(i(s,o),o):i}function E4(t,e,r){return e+t*7-(r+6)%7}var wdt={[xs]:t=>t.getFullYear(),[da]:t=>Math.floor(t.getMonth()/3),[Ws]:t=>t.getMonth(),[ha]:t=>t.getDate(),[hu]:t=>t.getHours(),[pu]:t=>t.getMinutes(),[ol]:t=>t.getSeconds(),[g0]:t=>t.getMilliseconds(),[Gx]:t=>j5e(t),[ui]:t=>Ste(t),[ui+Vs]:(t,e)=>E4(Ste(t),t.getDay(),vte(e)),[Vs]:(t,e)=>E4(1,t.getDay(),vte(e))},Ldt={[da]:t=>3*t,[ui]:(t,e)=>E4(t,0,vte(e))};function V5e(t,e){return Q5e(t,e||1,wdt,Ldt,Ddt)}var Idt={[xs]:t=>t.getUTCFullYear(),[da]:t=>Math.floor(t.getUTCMonth()/3),[Ws]:t=>t.getUTCMonth(),[ha]:t=>t.getUTCDate(),[hu]:t=>t.getUTCHours(),[pu]:t=>t.getUTCMinutes(),[ol]:t=>t.getUTCSeconds(),[g0]:t=>t.getUTCMilliseconds(),[Gx]:t=>G5e(t),[ui]:t=>_te(t),[Vs]:(t,e)=>E4(1,t.getUTCDay(),bte(e)),[ui+Vs]:(t,e)=>E4(_te(t),t.getUTCDay(),bte(e))},Mdt={[da]:t=>3*t,[ui]:(t,e)=>E4(t,0,bte(e))};function W5e(t,e){return Q5e(t,e||1,Idt,Mdt,Ndt)}var Pdt={[xs]:Co,[da]:Hx.every(3),[Ws]:Hx,[ui]:il,[ha]:xa,[Vs]:xa,[Gx]:xa,[hu]:r2,[pu]:e2,[ol]:Qs,[g0]:m0},kdt={[xs]:Ro,[da]:zx.every(3),[Ws]:zx,[ui]:sl,[ha]:nl,[Vs]:nl,[Gx]:nl,[hu]:n2,[pu]:t2,[ol]:Qs,[g0]:m0};function o2(t){return Pdt[t]}function a2(t){return kdt[t]}function Y5e(t,e,r){return t?t.offset(e,r):void 0}function K5e(t,e,r){return Y5e(o2(t),e,r)}function X5e(t,e,r){return Y5e(a2(t),e,r)}function J5e(t,e,r,n){return t?t.range(e,r,n):void 0}function Z5e(t,e,r,n){return J5e(o2(t),e,r,n)}function ebe(t,e,r,n){return J5e(a2(t),e,r,n)}var xR=1e3,dR=xR*60,hR=dR*60,dB=hR*24,Bdt=dB*7,k5e=dB*30,Tte=dB*365,tbe=[xs,Ws,ha,hu,pu,ol,g0],pR=tbe.slice(0,-1),mR=pR.slice(0,-1),gR=mR.slice(0,-1),qdt=gR.slice(0,-1),Udt=[xs,ui],B5e=[xs,Ws],rbe=[xs],fR=[[pR,1,xR],[pR,5,5*xR],[pR,15,15*xR],[pR,30,30*xR],[mR,1,dR],[mR,5,5*dR],[mR,15,15*dR],[mR,30,30*dR],[gR,1,hR],[gR,3,3*hR],[gR,6,6*hR],[gR,12,12*hR],[qdt,1,dB],[Udt,1,Bdt],[B5e,1,k5e],[B5e,3,3*k5e],[rbe,1,Tte]];function nbe(t){let e=t.extent,r=t.maxbins||40,n=Math.abs(Gp(e))/r,i=h0(a=>a[2]).right(fR,n),s,o;return i===fR.length?(s=rbe,o=To(e[0]/Tte,e[1]/Tte,r)):i?(i=fR[n/fR[i-1][2]<fR[i][2]/n?i-1:i],s=i[0],o=i[1]):(s=tbe,o=Math.max(To(e[0],e[1],r),1)),{units:s,step:o}}function Dte(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Nte(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function yR(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function A4(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,u=t.shortMonths,l=ER(i),c=AR(i),f=ER(s),x=AR(s),d=ER(o),h=AR(o),p=ER(a),m=AR(a),g=ER(u),y=AR(u),A={a:me,A:Ce,b:Pe,B:ct,c:null,d:lbe,e:lbe,f:lht,g:Eht,G:Sht,H:oht,I:aht,j:uht,L:hbe,m:cht,M:fht,p:rr,q:Ir,Q:xbe,s:dbe,S:xht,u:dht,U:hht,V:pht,w:mht,W:ght,x:null,X:null,y:yht,Y:Aht,Z:vht,"%":fbe},S={a:En,A:oo,b:vr,B:Q0,c:null,d:cbe,e:cbe,f:Cht,g:Pht,G:Bht,H:_ht,I:bht,j:Tht,L:mbe,m:Rht,M:Oht,p:L,q:I,Q:xbe,s:dbe,S:Dht,u:Nht,U:Fht,V:wht,w:Lht,W:Iht,x:null,X:null,y:Mht,Y:kht,Z:qht,"%":fbe},T={a:N,A:F,b:$,B:q,c:X,d:abe,e:abe,f:rht,g:obe,G:sbe,H:ube,I:ube,j:Jdt,L:tht,m:Xdt,M:Zdt,p:O,q:Kdt,Q:iht,s:sht,S:eht,u:Gdt,U:Qdt,V:Vdt,w:zdt,W:Wdt,x:P,X:te,y:obe,Y:sbe,Z:Ydt,"%":nht};A.x=_(r,A),A.X=_(n,A),A.c=_(e,A),S.x=_(r,S),S.X=_(n,S),S.c=_(e,S);function _(D,ae){return function(w){var G=[],k=-1,ie=0,ze=D.length,ge,rt,_t;for(w instanceof Date||(w=new Date(+w));++k<ze;)D.charCodeAt(k)===37&&(G.push(D.slice(ie,k)),(rt=ibe[ge=D.charAt(++k)])!=null?ge=D.charAt(++k):rt=ge==="e"?" ":"0",(_t=ae[ge])&&(ge=_t(w,rt)),G.push(ge),ie=k+1);return G.push(D.slice(ie,k)),G.join("")}}function b(D,ae){return function(w){var G=yR(1900,void 0,1),k=R(G,D,w+="",0),ie,ze;if(k!=w.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(G.s*1e3+("L"in G?G.L:0));if(ae&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+G.p*12),G.m===void 0&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?(ie=Nte(yR(G.y,0,1)),ze=ie.getUTCDay(),ie=ze>4||ze===0?y4.ceil(ie):y4(ie),ie=nl.offset(ie,(G.V-1)*7),G.y=ie.getUTCFullYear(),G.m=ie.getUTCMonth(),G.d=ie.getUTCDate()+(G.w+6)%7):(ie=Dte(yR(G.y,0,1)),ze=ie.getDay(),ie=ze>4||ze===0?g4.ceil(ie):g4(ie),ie=xa.offset(ie,(G.V-1)*7),G.y=ie.getFullYear(),G.m=ie.getMonth(),G.d=ie.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),ze="Z"in G?Nte(yR(G.y,0,1)).getUTCDay():Dte(yR(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+G.W*7-(ze+5)%7:G.w+G.U*7-(ze+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,Nte(G)):Dte(G)}}function R(D,ae,w,G){for(var k=0,ie=ae.length,ze=w.length,ge,rt;k<ie;){if(G>=ze)return-1;if(ge=ae.charCodeAt(k++),ge===37){if(ge=ae.charAt(k++),rt=T[ge in ibe?ae.charAt(k++):ge],!rt||(G=rt(D,w,G))<0)return-1}else if(ge!=w.charCodeAt(G++))return-1}return G}function O(D,ae,w){var G=l.exec(ae.slice(w));return G?(D.p=c.get(G[0].toLowerCase()),w+G[0].length):-1}function N(D,ae,w){var G=d.exec(ae.slice(w));return G?(D.w=h.get(G[0].toLowerCase()),w+G[0].length):-1}function F(D,ae,w){var G=f.exec(ae.slice(w));return G?(D.w=x.get(G[0].toLowerCase()),w+G[0].length):-1}function $(D,ae,w){var G=g.exec(ae.slice(w));return G?(D.m=y.get(G[0].toLowerCase()),w+G[0].length):-1}function q(D,ae,w){var G=p.exec(ae.slice(w));return G?(D.m=m.get(G[0].toLowerCase()),w+G[0].length):-1}function X(D,ae,w){return R(D,e,ae,w)}function P(D,ae,w){return R(D,r,ae,w)}function te(D,ae,w){return R(D,n,ae,w)}function me(D){return o[D.getDay()]}function Ce(D){return s[D.getDay()]}function Pe(D){return u[D.getMonth()]}function ct(D){return a[D.getMonth()]}function rr(D){return i[+(D.getHours()>=12)]}function Ir(D){return 1+~~(D.getMonth()/3)}function En(D){return o[D.getUTCDay()]}function oo(D){return s[D.getUTCDay()]}function vr(D){return u[D.getUTCMonth()]}function Q0(D){return a[D.getUTCMonth()]}function L(D){return i[+(D.getUTCHours()>=12)]}function I(D){return 1+~~(D.getUTCMonth()/3)}return{format:function(D){var ae=_(D+="",A);return ae.toString=function(){return D},ae},parse:function(D){var ae=b(D+="",!1);return ae.toString=function(){return D},ae},utcFormat:function(D){var ae=_(D+="",S);return ae.toString=function(){return D},ae},utcParse:function(D){var ae=b(D+="",!0);return ae.toString=function(){return D},ae}}}var ibe={"-":"",_:" ",0:"0"},$i=/^\s*\d+/,$dt=/^%/,jdt=/[\\^$*+?|[\]().{}]/g;function Gt(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(e)+i:i)}function Hdt(t){return t.replace(jdt,"\\$&")}function ER(t){return new RegExp("^(?:"+t.map(Hdt).join("|")+")","i")}function AR(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function zdt(t,e,r){var n=$i.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Gdt(t,e,r){var n=$i.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Qdt(t,e,r){var n=$i.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Vdt(t,e,r){var n=$i.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Wdt(t,e,r){var n=$i.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function sbe(t,e,r){var n=$i.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function obe(t,e,r){var n=$i.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Ydt(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Kdt(t,e,r){var n=$i.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Xdt(t,e,r){var n=$i.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function abe(t,e,r){var n=$i.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Jdt(t,e,r){var n=$i.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function ube(t,e,r){var n=$i.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function Zdt(t,e,r){var n=$i.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function eht(t,e,r){var n=$i.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function tht(t,e,r){var n=$i.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function rht(t,e,r){var n=$i.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function nht(t,e,r){var n=$dt.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function iht(t,e,r){var n=$i.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function sht(t,e,r){var n=$i.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function lbe(t,e){return Gt(t.getDate(),e,2)}function oht(t,e){return Gt(t.getHours(),e,2)}function aht(t,e){return Gt(t.getHours()%12||12,e,2)}function uht(t,e){return Gt(1+xa.count(Co(t),t),e,3)}function hbe(t,e){return Gt(t.getMilliseconds(),e,3)}function lht(t,e){return hbe(t,e)+"000"}function cht(t,e){return Gt(t.getMonth()+1,e,2)}function fht(t,e){return Gt(t.getMinutes(),e,2)}function xht(t,e){return Gt(t.getSeconds(),e,2)}function dht(t){var e=t.getDay();return e===0?7:e}function hht(t,e){return Gt(il.count(Co(t)-1,t),e,2)}function pbe(t){var e=t.getDay();return e>=4||e===0?i2(t):i2.ceil(t)}function pht(t,e){return t=pbe(t),Gt(i2.count(Co(t),t)+(Co(t).getDay()===4),e,2)}function mht(t){return t.getDay()}function ght(t,e){return Gt(g4.count(Co(t)-1,t),e,2)}function yht(t,e){return Gt(t.getFullYear()%100,e,2)}function Eht(t,e){return t=pbe(t),Gt(t.getFullYear()%100,e,2)}function Aht(t,e){return Gt(t.getFullYear()%1e4,e,4)}function Sht(t,e){var r=t.getDay();return t=r>=4||r===0?i2(t):i2.ceil(t),Gt(t.getFullYear()%1e4,e,4)}function vht(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Gt(e/60|0,"0",2)+Gt(e%60,"0",2)}function cbe(t,e){return Gt(t.getUTCDate(),e,2)}function _ht(t,e){return Gt(t.getUTCHours(),e,2)}function bht(t,e){return Gt(t.getUTCHours()%12||12,e,2)}function Tht(t,e){return Gt(1+nl.count(Ro(t),t),e,3)}function mbe(t,e){return Gt(t.getUTCMilliseconds(),e,3)}function Cht(t,e){return mbe(t,e)+"000"}function Rht(t,e){return Gt(t.getUTCMonth()+1,e,2)}function Oht(t,e){return Gt(t.getUTCMinutes(),e,2)}function Dht(t,e){return Gt(t.getUTCSeconds(),e,2)}function Nht(t){var e=t.getUTCDay();return e===0?7:e}function Fht(t,e){return Gt(sl.count(Ro(t)-1,t),e,2)}function gbe(t){var e=t.getUTCDay();return e>=4||e===0?s2(t):s2.ceil(t)}function wht(t,e){return t=gbe(t),Gt(s2.count(Ro(t),t)+(Ro(t).getUTCDay()===4),e,2)}function Lht(t){return t.getUTCDay()}function Iht(t,e){return Gt(y4.count(Ro(t)-1,t),e,2)}function Mht(t,e){return Gt(t.getUTCFullYear()%100,e,2)}function Pht(t,e){return t=gbe(t),Gt(t.getUTCFullYear()%100,e,2)}function kht(t,e){return Gt(t.getUTCFullYear()%1e4,e,4)}function Bht(t,e){var r=t.getUTCDay();return t=r>=4||r===0?s2(t):s2.ceil(t),Gt(t.getUTCFullYear()%1e4,e,4)}function qht(){return"+0000"}function fbe(){return"%"}function xbe(t){return+t}function dbe(t){return Math.floor(+t/1e3)}var S4,v4,hB,_4,pB;Fte({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Fte(t){return S4=A4(t),v4=S4.format,hB=S4.parse,_4=S4.utcFormat,pB=S4.utcParse,S4}function SR(t){let e={};return r=>e[r]||(e[r]=t(r))}function Uht(t,e){return r=>{let n=t(r),i=n.indexOf(e);if(i<0)return n;let s=$ht(n,i),o=s<n.length?n.slice(s):"";for(;--s>i;)if(n[s]!=="0"){++s;break}return n.slice(0,s)+o}}function $ht(t,e){let r=t.lastIndexOf("e"),n;if(r>0)return r;for(r=t.length;--r>e;)if(n=t.charCodeAt(r),n>=48&&n<=57)return r+1}function Ebe(t){let e=SR(t.format),r=t.formatPrefix;return{format:e,formatPrefix:r,formatFloat(n){let i=du(n||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Uht(e(i),e(".1f")(1)[1])}else return e(i)},formatSpan(n,i,s,o){o=du(o??",f");let a=To(n,i,s),u=Math.max(Math.abs(n),Math.abs(i)),l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=uR(a,u))||(o.precision=l),r(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=lR(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=aR(a))||(o.precision=l-(o.type==="%")*2);break}}return e(o)}}}var wte;jht();function jht(){return wte=Ebe({format:Zp,formatPrefix:m4})}function Abe(t){return Ebe(oR(t))}function mB(t){return arguments.length?wte=Abe(t):wte}function ybe(t,e,r){r=r||{},Se(r)||W(`Invalid time multi-format specifier: ${r}`);let n=e(ol),i=e(pu),s=e(hu),o=e(ha),a=e(ui),u=e(Ws),l=e(da),c=e(xs),f=t(r[g0]||".%L"),x=t(r[ol]||":%S"),d=t(r[pu]||"%I:%M"),h=t(r[hu]||"%I %p"),p=t(r[ha]||r[Vs]||"%a %d"),m=t(r[ui]||"%b %d"),g=t(r[Ws]||"%B"),y=t(r[da]||"%B"),A=t(r[xs]||"%Y");return S=>(n(S)<S?f:i(S)<S?x:s(S)<S?d:o(S)<S?h:u(S)<S?a(S)<S?p:m:c(S)<S?l(S)<S?g:y:A)(S)}function Sbe(t){let e=SR(t.format),r=SR(t.utcFormat);return{timeFormat:n=>he(n)?e(n):ybe(e,o2,n),utcFormat:n=>he(n)?r(n):ybe(r,a2,n),timeParse:SR(t.parse),utcParse:SR(t.utcParse)}}var Lte;Hht();function Hht(){return Lte=Sbe({format:v4,parse:hB,utcFormat:_4,utcParse:pB})}function vbe(t){return Sbe(A4(t))}function b4(t){return arguments.length?Lte=vbe(t):Lte}var Ite=(t,e)=>Ke({},t,e);function Mte(t,e){let r=t?Abe(t):mB(),n=e?vbe(e):b4();return Ite(r,n)}function Pte(t,e){let r=arguments.length;return r&&r!==2&&W("defaultLocale expects either zero or two arguments."),r?Ite(mB(t),b4(e)):Ite(mB(),b4())}var zht=/^(data:|([A-Za-z]+:)?\/\/)/,Ght=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Qht=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,_be="file://";function Vht(t,e){return r=>({options:r||{},sanitize:Yht,load:Wht,fileAccess:!!e,file:Kht(e),http:Jht(t)})}async function Wht(t,e){let r=await this.sanitize(t,e),n=r.href;return r.localFile?this.file(n):this.http(n,e)}async function Yht(t,e){e=Ke({},this.options,e);let r=this.fileAccess,n={href:null},i,s,o,a=Ght.test(t.replace(Qht,""));(t==null||typeof t!="string"||!a)&&W("Sanitize failure, invalid URI: "+fe(t));let u=zht.test(t);return(o=e.baseURL)&&!u&&(!t.startsWith("/")&&!o.endsWith("/")&&(t="/"+t),t=o+t),s=(i=t.startsWith(_be))||e.mode==="file"||e.mode!=="http"&&!u&&r,i?t=t.slice(_be.length):t.startsWith("//")&&(e.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(n,"localFile",{value:!!s}),n.href=t,e.target&&(n.target=e.target+""),e.rel&&(n.rel=e.rel+""),e.context==="image"&&e.crossOrigin&&(n.crossOrigin=e.crossOrigin+""),n}function Kht(t){return t?e=>new Promise((r,n)=>{t.readFile(e,(i,s)=>{i?n(i):r(s)})}):Xht}async function Xht(){W("No file system access.")}function Jht(t){return t?async function(e,r){let n=Ke({},this.options.http,r),i=r&&r.response,s=await t(e,n);return s.ok?Je(s[i])?s[i]():s.text():W(s.status+""+s.statusText)}:Zht}async function Zht(){W("No HTTP fetch method available.")}var ept=t=>t!=null&&t===t,tpt=t=>t==="true"||t==="false"||t===!0||t===!1,rpt=t=>!Number.isNaN(Date.parse(t)),Cbe=t=>!Number.isNaN(+t)&&!(t instanceof Date),npt=t=>Cbe(t)&&Number.isInteger(+t),bbe={boolean:Ek,integer:jn,number:jn,date:Ak,string:Sk,unknown:On},gB=[tpt,npt,Cbe,rpt],ipt=["boolean","integer","number","date"];function spt(t,e){if(!t||!t.length)return"unknown";let r=t.length,n=gB.length,i=gB.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<r;++s)for(u=e?t[s][e]:t[s],a=0;a<n;++a)if(i[a]&&ept(u)&&!gB[a](u)&&(i[a]=0,++o,o===gB.length))return"string";return ipt[i.reduce((s,o)=>s===0?o:s,0)-1]}function opt(t,e){return e.reduce((r,n)=>(r[n]=spt(t,n),r),{})}function Tbe(t){let e=function(r,n){let i={delimiter:t};return Bte(r,n?Ke(n,i):i)};return e.responseType="text",e}function Bte(t,e){return e.header&&(t=e.header.map(fe).join(e.delimiter)+`
`+t),Zee(e.delimiter).parse(t+"")}Bte.responseType="text";function apt(t){return typeof Buffer=="function"&&Je(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function qte(t,e){let r=e&&e.property?si(e.property):On;return Se(t)&&!apt(t)?upt(r(t),e):r(JSON.parse(t))}qte.responseType="json";function upt(t,e){return!j(t)&&zve(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}var lpt={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function Rbe(t,e){let r,n,i,s;return t=qte(t,e),e&&e.feature?(r=tte,i=e.feature):e&&e.mesh?(r=nte,i=e.mesh,s=lpt[e.filter]):W("Missing TopoJSON feature or mesh parameter."),n=(n=t.objects[i])?r(t,n,s):W("Invalid TopoJSON object: "+i),n&&n.features||[n]}Rbe.responseType="json";var kte={dsv:Bte,csv:Tbe(","),tsv:Tbe("	"),json:qte,topojson:Rbe};function Obe(t,e){return arguments.length>1?(kte[t]=e,this):Fe(kte,t)?kte[t]:null}function Dbe(t){let e=Obe(t);return e&&e.responseType||"text"}function Nbe(t,e,r,n){e=e||{};let i=Obe(e.type||"json");return i||W("Unknown data format type: "+e.type),t=i(t,e),e.parse&&cpt(t,e.parse,r,n),Fe(t,"columns")&&delete t.columns,t}function cpt(t,e,r,n){if(!t.length)return;let i=b4();r=r||i.timeParse,n=n||i.utcParse;let s=t.columns||Object.keys(t[0]),o,a,u,l,c,f;e==="auto"&&(e=opt(t,s)),s=Object.keys(e);let x=s.map(d=>{let h=e[d],p,m;if(h&&(h.startsWith("date:")||h.startsWith("utc:")))return p=h.split(/:(.+)?/,2),m=p[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(p[0]==="utc"?n:r)(m);if(!bbe[h])throw Error("Illegal format pattern: "+d+":"+h);return bbe[h]});for(u=0,c=t.length,f=s.length;u<c;++u)for(o=t[u],l=0;l<f;++l)a=s[l],o[a]=x[l](o[a])}var vR=Vht(typeof fetch<"u"&&fetch,null);function SB(t){let e=t||On,r=[],n={};return r.add=i=>{let s=e(i);return n[s]||(n[s]=1,r.push(i)),r},r.remove=i=>{let s=e(i);if(n[s]){n[s]=0;let o=r.indexOf(i);o>=0&&r.splice(o,1)}return r},r}async function TR(t,e){try{await e(t)}catch(r){t.error(r)}}var kbe=Symbol("vega_id"),fpt=1;function C4(t){return!!(t&&He(t))}function He(t){return t[kbe]}function Bbe(t,e){return t[kbe]=e,t}function wt(t){let e=t===Object(t)?t:{data:t};return He(e)?e:Bbe(e,fpt++)}function vB(t){return Ig(t,wt({}))}function Ig(t,e){for(let r in t)e[r]=t[r];return e}function _B(t,e){return Bbe(e,He(t))}function lf(t,e){return t?e?(r,n)=>t(r,n)||He(e(r))-He(e(n)):(r,n)=>t(r,n)||He(r)-He(n):null}function $te(t){return t&&t.constructor===x2}function x2(){let t=[],e=[],r=[],n=[],i=[],s=null,o=!1;return{constructor:x2,insert(a){let u=le(a),l=u.length;for(let c=0;c<l;++c)t.push(u[c]);return this},remove(a){let u=Je(a)?n:e,l=le(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){let c={field:u,value:Zr(l)};return Je(a)?(c.filter=a,i.push(c)):(c.tuple=a,r.push(c)),this},encode(a,u){return Je(a)?i.push({filter:a,field:u}):r.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){let l={},c={},f,x,d,h,p,m;for(f=0,x=u.length;f<x;++f)l[He(u[f])]=1;for(f=0,x=e.length;f<x;++f)p=e[f],l[He(p)]=-1;for(f=0,x=n.length;f<x;++f)h=n[f],u.forEach(y=>{h(y)&&(l[He(y)]=-1)});for(f=0,x=t.length;f<x;++f)p=t[f],m=He(p),l[m]?l[m]=1:a.add.push(wt(t[f]));for(f=0,x=u.length;f<x;++f)p=u[f],l[He(p)]<0&&a.rem.push(p);function g(y,A,S){S?y[A]=S(y):a.encode=A,o||(c[He(y)]=y)}for(f=0,x=r.length;f<x;++f)d=r[f],p=d.tuple,h=d.field,m=l[He(p)],m>0&&(g(p,h,d.value),a.modifies(h));for(f=0,x=i.length;f<x;++f)d=i[f],h=d.filter,u.forEach(y=>{h(y)&&l[He(y)]>0&&g(y,d.field,d.value)}),a.modifies(d.field);if(o)a.mod=e.length||n.length?u.filter(y=>l[He(y)]>0):u.slice();else for(m in c)a.mod.push(c[m]);return(s||s==null&&(e.length||n.length))&&a.clean(!0),a}}}var EB="_:mod:_";function bB(){Object.defineProperty(this,EB,{writable:!0,value:{}})}bB.prototype={set(t,e,r,n){let i=this,s=i[t],o=i[EB];return e!=null&&e>=0?(s[e]!==r||n)&&(s[e]=r,o[e+":"+t]=-1,o[t]=-1):(s!==r||n)&&(i[t]=r,o[t]=j(r)?1+r.length:-1),i},modified(t,e){let r=this[EB];if(arguments.length){if(j(t)){for(let n=0;n<t.length;++n)if(r[t[n]])return!0;return!1}}else{for(let n in r)if(r[n])return!0;return!1}return e!=null&&e>=0?e+1<r[t]||!!r[e+":"+t]:!!r[t]},clear(){return this[EB]={},this}};var xpt=0,dpt="pulse",hpt=new bB,ppt=1,mpt=2;function fr(t,e,r,n){this.id=++xpt,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),r&&this.parameters(r,n)}function Fbe(t){return function(e){let r=this.flags;return arguments.length===0?!!(r&t):(this.flags=e?r|t:r&~t,this)}}fr.prototype={targets(){return this._targets||(this._targets=SB(QC))},set(t){return this.value!==t?(this.value=t,1):0},skip:Fbe(ppt),modified:Fbe(mpt),parameters(t,e,r){e=e!==!1;let n=this._argval=this._argval||new bB,i=this._argops=this._argops||[],s=[],o,a,u,l,c=(f,x,d)=>{d instanceof fr?(d!==this&&(e&&d.targets().add(this),s.push(d)),i.push({op:d,name:f,index:x})):n.set(f,x,d)};for(o in t)if(a=t[o],o===dpt)le(a).forEach(f=>{f instanceof fr?f!==this&&(f.targets().add(this),s.push(f)):W("Pulse parameters must be operator instances.")}),this.source=a;else if(j(a))for(n.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),r&&(i.initonly=!0),s},marshall(t){let e=this._argval||hpt,r=this._argops,n,i,s,o;if(r){let a=r.length;for(i=0;i<a;++i)n=r[i],s=n.op,o=s.modified()&&s.stamp===t,e.set(n.name,n.index,s.value,o);if(r.initonly){for(i=0;i<a;++i)n=r[i],n.op.targets().remove(this);this._argops=null,this._update=null}}return e},detach(){let t=this._argops,e,r,n,i;if(t)for(e=0,r=t.length;e<r;++e)n=t[e],i=n.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){let e=this._update;if(e){let r=this.marshall(t.stamp),n=e.call(this,r,t);if(r.clear(),n!==this.value)this.value=n;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t}};function gpt(t,e,r,n){let i=1,s;return t instanceof fr?s=t:t&&t.prototype instanceof fr?s=new t:Je(t)?s=new fr(null,t):(i=0,s=new fr(t,e)),this.rank(s),i&&(n=r,r=e),r&&this.connect(s,s.parameters(r,n)),this.touch(s),s}function ypt(t,e){let r=t.rank,n=e.length;for(let i=0;i<n;++i)if(r<e[i].rank){this.rerank(t);return}}var Ept=0;function CR(t,e,r){this.id=++Ept,this.value=null,r&&(this.receive=r),t&&(this._filter=t),e&&(this._apply=e)}function u2(t,e,r){return new CR(t,e,r)}CR.prototype={_filter:ki,_apply:On,targets(){return this._targets||(this._targets=SB(QC))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){let e=this.value=this._apply(t),r=this._targets,n=r?r.length:0;for(let i=0;i<n;++i)r[i].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){let e=u2(t);return this.targets().add(e),e},apply(t){let e=u2(null,t);return this.targets().add(e),e},merge(){let t=u2();this.targets().add(t);for(let e=0,r=arguments.length;e<r;++e)arguments[e].targets().add(t);return t},throttle(t){let e=-1;return this.filter(()=>{let r=Date.now();return r-e>t?(e=r,1):0})},debounce(t){let e=u2();return this.targets().add(u2(null,null,gk(t,r=>{let n=r.dataflow;e.receive(r),n&&n.run&&n.run()}))),e},between(t,e){let r=!1;return t.targets().add(u2(null,null,()=>r=!0)),e.targets().add(u2(null,null,()=>r=!1)),this.filter(()=>r)},detach(){this._filter=ki,this._targets=null}};function Apt(t,e,r,n){let i=this,s=u2(r,n),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}},a;typeof t=="string"&&typeof document<"u"?a=document.querySelectorAll(t):a=le(t);let u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(e,o);return s}function Spt(t,e){let r=this.locale();return Nbe(t,e,r.timeParse,r.utcParse)}function vpt(t,e,r){return e=this.parse(e,r),this.pulse(t,this.changeset().insert(e))}async function _pt(t,e){let r=this,n=0,i;try{i=await r.loader().load(t,{context:"dataflow",response:Dbe(e&&e.type)});try{i=r.parse(i,e)}catch(s){n=-2,r.warn("Data ingestion failed",t,s)}}catch(s){n=-1,r.warn("Loading failed",t,s)}return{data:i,status:n}}async function bpt(t,e,r){let n=this,i=n._pending||Tpt(n);i.requests+=1;let s=await n.request(e,r);return n.pulse(t,n.changeset().remove(ki).insert(s.data||[])),i.done(),s}function Tpt(t){let e,r=new Promise(n=>e=n);return r.requests=0,r.done=()=>{--r.requests===0&&(t._pending=null,e(t))},t._pending=r}var Cpt={skip:!0};function Rpt(t,e,r,n,i){return(t instanceof fr?Dpt:Opt)(this,t,e,r,n,i),this}function Opt(t,e,r,n,i,s){let o=Ke({},s,Cpt),a,u;Je(r)||(r=Zr(r)),n===void 0?a=l=>t.touch(r(l)):Je(n)?(u=new fr(null,n,i,!1),a=l=>{u.evaluate(l);let c=r(l),f=u.value;$te(f)?t.pulse(c,f,s):t.update(c,f,o)}):a=l=>t.update(r(l),n,o),e.apply(a)}function Dpt(t,e,r,n,i,s){if(n===void 0)e.targets().add(r);else{let o=s||{},a=new fr(null,Npt(r,n),i,!1);a.modified(o.force),a.rank=e.rank,e.targets().add(a),r&&(a.skip(!0),a.value=r.value,a.targets().add(r),t.connect(r,[a]))}}function Npt(t,e){return e=Je(e)?e:Zr(e),t?function(r,n){let i=e(r,n);return t.skip()||(t.skip(i!==this.value).value=i),i}:e}function Fpt(t){t.rank=++this._rank}function wpt(t){let e=[t],r,n,i;for(;e.length;)if(this.rank(r=e.pop()),n=r._targets)for(i=n.length;--i>=0;)e.push(r=n[i]),r===t&&W("Cycle detected in dataflow graph.")}var AB={},uf=1,l2=2,Qx=4,Lpt=uf|l2,wbe=uf|Qx,T4=uf|l2|Qx,Lbe=8,_R=16,Ibe=32,Mbe=64;function c2(t,e,r){this.dataflow=t,this.stamp=e??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=r||null}function Ute(t,e){let r=[];return Qp(t,e,n=>r.push(n)),r}function Pbe(t,e){let r={};return t.visit(e,n=>{r[He(n)]=1}),n=>r[He(n)]?null:n}function yB(t,e){return t?(r,n)=>t(r,n)&&e(r,n):e}c2.prototype={StopPropagation:AB,ADD:uf,REM:l2,MOD:Qx,ADD_REM:Lpt,ADD_MOD:wbe,ALL:T4,REFLOW:Lbe,SOURCE:_R,NO_SOURCE:Ibe,NO_FIELDS:Mbe,fork(t){return new c2(this.dataflow).init(this,t)},clone(){let t=this.fork(T4);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(T4|_R)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new c2(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,e){let r=this;return r.stamp=t.stamp,r.encode=t.encode,t.fields&&!(e&Mbe)&&(r.fields=t.fields),e&uf?(r.addF=t.addF,r.add=t.add):(r.addF=null,r.add=[]),e&l2?(r.remF=t.remF,r.rem=t.rem):(r.remF=null,r.rem=[]),e&Qx?(r.modF=t.modF,r.mod=t.mod):(r.modF=null,r.mod=[]),e&Ibe?(r.srcF=null,r.source=null):(r.srcF=t.srcF,r.source=t.source,t.cleans&&(r.cleans=t.cleans)),r},runAfter(t){this.dataflow.runAfter(t)},changed(t){let e=t||T4;return e&uf&&this.add.length||e&l2&&this.rem.length||e&Qx&&this.mod.length},reflow(t){if(t)return this.fork(T4).reflow();let e=this.add.length,r=this.source&&this.source.length;return r&&r!==e&&(this.mod=this.source,e&&this.filter(Qx,Pbe(this,uf))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){let e=this.fields||(this.fields={});return j(t)?t.forEach(r=>e[r]=!0):e[t]=!0,this},modified(t,e){let r=this.fields;return(e||this.mod.length)&&r?arguments.length?j(t)?t.some(n=>r[n]):r[t]:!!r:!1},filter(t,e){let r=this;return t&uf&&(r.addF=yB(r.addF,e)),t&l2&&(r.remF=yB(r.remF,e)),t&Qx&&(r.modF=yB(r.modF,e)),t&_R&&(r.srcF=yB(r.srcF,e)),r},materialize(t){t=t||T4;let e=this;return t&uf&&e.addF&&(e.add=Ute(e.add,e.addF),e.addF=null),t&l2&&e.remF&&(e.rem=Ute(e.rem,e.remF),e.remF=null),t&Qx&&e.modF&&(e.mod=Ute(e.mod,e.modF),e.modF=null),t&_R&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit(t,e){let r=this,n=e;if(t&_R)return Qp(r.source,r.srcF,n),r;t&uf&&Qp(r.add,r.addF,n),t&l2&&Qp(r.rem,r.remF,n),t&Qx&&Qp(r.mod,r.modF,n);let i=r.source;if(t&Lbe&&i){let s=r.add.length+r.mod.length;s===i.length||(s?Qp(i,Pbe(r,wbe),n):Qp(i,r.srcF,n))}return r}};function jte(t,e,r,n){let i=this,s=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=n||null,this.pulses=r;for(let o of r)if(o.stamp===e){if(o.fields){let a=i.fields||(i.fields={});for(let u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}ce(jte,c2,{fork(t){let e=new c2(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&e.ADD&&this.visit(e.ADD,r=>e.add.push(r)),t&e.REM&&this.visit(e.REM,r=>e.rem.push(r)),t&e.MOD&&this.visit(e.MOD,r=>e.mod.push(r))),e},changed(t){return this.changes&t},modified(t){let e=this,r=e.fields;return r&&e.changes&e.MOD?j(t)?t.some(n=>r[n]):r[t]:0},filter(){W("MultiPulse does not support filtering.")},materialize(){W("MultiPulse does not support materialization.")},visit(t,e){let r=this,n=r.pulses,i=n.length,s=0;if(t&r.SOURCE)for(;s<i;++s)n[s].visit(t,e);else for(;s<i;++s)n[s].stamp===r.stamp&&n[s].visit(t,e);return r}});async function Ipt(t,e,r){let n=this,i=[];if(n._pulse)return qbe(n);if(n._pending&&await n._pending,e&&await TR(n,e),!n._touched.length)return n.debug("Dataflow invoked, but nothing to do."),n;let s=++n._clock;n._pulse=new c2(n,s,t),n._touched.forEach(c=>n._enqueue(c,!0)),n._touched=SB(QC);let o=0,a,u,l;try{for(;n._heap.size()>0;){if(a=n._heap.pop(),a.rank!==a.qrank){n._enqueue(a,!0);continue}u=a.run(n._getPulse(a,t)),u.then?u=await u:u.async&&(i.push(u.async),u=AB),u!==AB&&a._targets&&a._targets.forEach(c=>n._enqueue(c)),++o}}catch(c){n._heap.clear(),l=c}if(n._input={},n._pulse=null,n.debug(`Pulse ${s}: ${o} operators`),l&&(n._postrun=[],n.error(l)),n._postrun.length){let c=n._postrun.sort((f,x)=>x.priority-f.priority);n._postrun=[];for(let f=0;f<c.length;++f)await TR(n,c[f].callback)}return r&&await TR(n,r),i.length&&Promise.all(i).then(c=>n.runAsync(null,()=>{c.forEach(f=>{try{f(n)}catch(x){n.error(x)}})})),n}async function Mpt(t,e,r){for(;this._running;)await this._running;let n=()=>this._running=null;return(this._running=this.evaluate(t,e,r)).then(n,n),this._running}function Ppt(t,e,r){return this._pulse?qbe(this):(this.evaluate(t,e,r),this)}function kpt(t,e,r){if(this._pulse||e)this._postrun.push({priority:r||0,callback:t});else try{t(this)}catch(n){this.error(n)}}function qbe(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function Bpt(t,e){let r=t.stamp<this._clock;r&&(t.stamp=this._clock),(r||e)&&(t.qrank=t.rank,this._heap.push(t))}function qpt(t,e){let r=t.source,n=this._clock;return r&&j(r)?new jte(this,n,r.map(i=>i.pulse),e):this._input[t.id]||Upt(this._pulse,r&&r.pulse)}function Upt(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==AB&&(t.source=e.source),t)}var Hte={skip:!1,force:!1};function $pt(t,e){let r=e||Hte;return this._pulse?this._enqueue(t):this._touched.add(t),r.skip&&t.skip(!0),this}function jpt(t,e,r){let n=r||Hte;return(t.set(e)||n.force)&&this.touch(t,n),this}function Hpt(t,e,r){this.touch(t,r||Hte);let n=new c2(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return n.target=t,this._input[t.id]=e.pulse(n,i),this}function zpt(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:r=>(e.push(r),Ube(e,0,e.length-1,t)),pop:()=>{let r=e.pop(),n;return e.length?(n=e[0],e[0]=r,Gpt(e,0,t)):n=r,n}}}function Ube(t,e,r,n){let i,s,o=t[r];for(;r>e;){if(s=r-1>>1,i=t[s],n(o,i)<0){t[r]=i,r=s;continue}break}return t[r]=o}function Gpt(t,e,r){let n=e,i=t.length,s=t[e],o=(e<<1)+1,a;for(;o<i;)a=o+1,a<i&&r(t[o],t[a])>=0&&(o=a),t[e]=t[o],e=o,o=(e<<1)+1;return t[e]=s,Ube(t,n,e,r)}function Mg(){this.logger(lk()),this.logLevel(uk),this._clock=0,this._rank=0,this._locale=Pte();try{this._loader=vR()}catch{}this._touched=SB(QC),this._input={},this._pulse=null,this._heap=zpt((t,e)=>t.qrank-e.qrank),this._postrun=[]}function bR(t){return function(){return this._log[t].apply(this,arguments)}}Mg.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:bR("error"),warn:bR("warn"),info:bR("info"),debug:bR("debug"),logLevel:bR("level"),cleanThreshold:1e4,add:gpt,connect:ypt,rank:Fpt,rerank:wpt,pulse:Hpt,touch:$pt,update:jpt,changeset:x2,ingest:vpt,parse:Spt,preload:bpt,request:_pt,events:Apt,on:Rpt,evaluate:Ipt,run:Ppt,runAsync:Mpt,runAfter:kpt,_enqueue:Bpt,_getPulse:qpt};function V(t,e){fr.call(this,t,null,e)}ce(V,fr,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(r=>this.pulse=r):e!==t.StopPropagation&&(this.pulse=e),e},evaluate(t){let e=this.marshall(t.stamp),r=this.transform(e,t);return e.clear(),r},transform(){}});var f2={};function zte(t){let e=$be(t);return e&&e.Definition||null}function $be(t){return t=t&&t.toLowerCase(),Fe(f2,t)?f2[t]:null}var Mre={};qo(Mre,{aggregate:()=>d2,bin:()=>fre,collect:()=>xre,compare:()=>cTe,countpattern:()=>dre,cross:()=>hre,density:()=>pre,dotbin:()=>gre,expression:()=>pTe,extent:()=>yre,facet:()=>NB,field:()=>mTe,filter:()=>Are,flatten:()=>Sre,fold:()=>vre,formula:()=>_re,generate:()=>gTe,impute:()=>bre,joinaggregate:()=>Tre,kde:()=>Cre,key:()=>yTe,load:()=>ETe,lookup:()=>Rre,multiextent:()=>ATe,multivalues:()=>STe,params:()=>vTe,pivot:()=>Ore,prefacet:()=>_Te,project:()=>Dre,proxy:()=>bTe,quantile:()=>Nre,relay:()=>TTe,sample:()=>Fre,sequence:()=>wre,sieve:()=>CTe,subflow:()=>Ere,timeunit:()=>Lre,tupleindex:()=>OTe,values:()=>DTe,window:()=>Ire});function*zbe(t,e){if(e==null)for(let r of t)r!=null&&r!==""&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of t)n=e(n,++r,t),n!=null&&n!==""&&(n=+n)>=n&&(yield n)}}function Gte(t,e,r){let n=Float64Array.from(zbe(t,r));return n.sort(Gs),e.map(i=>sR(n,i))}function Qte(t,e){return Gte(t,[.25,.5,.75],e)}function Vte(t,e){let r=t.length,n=sB(t,e),i=Qte(t,e),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(n,s)||n||Math.abs(i[0])||1)*Math.pow(r,-.2)}function Gbe(t){let e=t.maxbins||20,r=t.base||10,n=Math.log(r),i=t.divide||[5,2],s=t.extent[0],o=t.extent[1],a,u,l,c,f,x,d=t.span||o-s||Math.abs(s)||1;if(t.step)a=t.step;else if(t.steps){for(c=d/e,f=0,x=t.steps.length;f<x&&t.steps[f]<c;++f);a=t.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(e)/n),l=t.minstep||0,a=Math.max(l,Math.pow(r,Math.round(Math.log(d)/n)-u));Math.ceil(d/a)>e;)a*=r;for(f=0,x=i.length;f<x;++f)c=a/i[f],c>=l&&d/c<=e&&(a=c)}c=Math.log(a);let h=c>=0?0:~~(-c/n)+1,p=Math.pow(r,-h-1);return(t.nice||t.nice===void 0)&&(c=Math.floor(s/a+p)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var al=Math.random;function Qbe(t,e,r,n){if(!t.length)return[void 0,void 0];let i=Float64Array.from(zbe(t,n)),s=i.length,o=e,a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(al()*s)];c[l]=a/s}return c.sort(Gs),[Rg(c,r/2),Rg(c,1-r/2)]}function Vbe(t,e,r,n){n=n||(x=>x);let i=t.length,s=new Float64Array(i),o=0,a=1,u=n(t[0]),l=u,c=u+e,f;for(;a<i;++a){if(f=n(t[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+e,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return r?Qpt(s,e+e/4):s}function Qpt(t,e){let r=t.length,n=0,i=1,s,o;for(;t[n]===t[i];)++i;for(;i<r;){for(s=i+1;t[i]===t[s];)++s;if(t[i]-t[i-1]<e){for(o=i+(n+s-i-i>>1);o<i;)t[o++]=t[i];for(;o>i;)t[o--]=t[n]}n=i,i=s}return t}var Wbe=Math.sqrt(2*Math.PI),Vpt=Math.SQRT2,RR=NaN;function TB(t,e){t=t||0,e=e??1;let r=0,n=0,i,s;if(RR===RR)r=RR,RR=NaN;else{do r=al()*2-1,n=al()*2-1,i=r*r+n*n;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),r*=s,RR=n*s}return t+r*e}function Wte(t,e,r){r=r??1;let n=(t-(e||0))/r;return Math.exp(-.5*n*n)/(r*Wbe)}function CB(t,e,r){e=e||0,r=r??1;let n=(t-e)/r,i=Math.abs(n),s;if(i>37)s=0;else{let o=Math.exp(-i*i/2),a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return n>0?1-s:s}function RB(t,e,r){return t<0||t>1?NaN:(e||0)+(r??1)*Vpt*Wpt(2*t-1)}function Wpt(t){let e=-Math.log((1-t)*(1+t)),r;return e<6.25?(e-=3.125,r=-364441206401782e-35,r=-16850591381820166e-35+r*e,r=128584807152564e-32+r*e,r=11157877678025181e-33+r*e,r=-1333171662854621e-31+r*e,r=20972767875968562e-33+r*e,r=6637638134358324e-30+r*e,r=-4054566272975207e-29+r*e,r=-8151934197605472e-29+r*e,r=26335093153082323e-28+r*e,r=-12975133253453532e-27+r*e,r=-5415412054294628e-26+r*e,r=10512122733215323e-25+r*e,r=-4112633980346984e-24+r*e,r=-29070369957882005e-24+r*e,r=42347877827932404e-23+r*e,r=-13654692000834679e-22+r*e,r=-13882523362786469e-21+r*e,r=.00018673420803405714+r*e,r=-.000740702534166267+r*e,r=-.006033670871430149+r*e,r=.24015818242558962+r*e,r=1.6536545626831027+r*e):e<16?(e=Math.sqrt(e)-3.25,r=22137376921775787e-25,r=9075656193888539e-23+r*e,r=-27517406297064545e-23+r*e,r=18239629214389228e-24+r*e,r=15027403968909828e-22+r*e,r=-4013867526981546e-21+r*e,r=29234449089955446e-22+r*e,r=12475304481671779e-21+r*e,r=-47318229009055734e-21+r*e,r=6828485145957318e-20+r*e,r=24031110387097894e-21+r*e,r=-.0003550375203628475+r*e,r=.0009532893797373805+r*e,r=-.0016882755560235047+r*e,r=.002491442096107851+r*e,r=-.003751208507569241+r*e,r=.005370914553590064+r*e,r=1.0052589676941592+r*e,r=3.0838856104922208+r*e):Number.isFinite(e)?(e=Math.sqrt(e)-5,r=-27109920616438573e-27,r=-2555641816996525e-25+r*e,r=15076572693500548e-25+r*e,r=-3789465440126737e-24+r*e,r=761570120807834e-23+r*e,r=-1496002662714924e-23+r*e,r=2914795345090108e-23+r*e,r=-6771199775845234e-23+r*e,r=22900482228026655e-23+r*e,r=-99298272942317e-20+r*e,r=4526062597223154e-21+r*e,r=-1968177810553167e-20+r*e,r=7599527703001776e-20+r*e,r=-.00021503011930044477+r*e,r=-.00013871931833623122+r*e,r=1.0103004648645344+r*e,r=4.849906401408584+r*e):r=1/0,r*t}function Yte(t,e){let r,n,i={mean(s){return arguments.length?(r=s||0,i):r},stdev(s){return arguments.length?(n=s??1,i):n},sample:()=>TB(r,n),pdf:s=>Wte(s,r,n),cdf:s=>CB(s,r,n),icdf:s=>RB(s,r,n)};return i.mean(t).stdev(e)}function Kte(t,e){let r=Yte(),n=0,i={data(s){return arguments.length?(t=s,n=s?s.length:0,i.bandwidth(e)):t},bandwidth(s){return arguments.length?(e=s,!e&&t&&(e=Vte(t)),i):e},sample(){return t[~~(al()*n)]+e*r.sample()},pdf(s){let o=0,a=0;for(;a<n;++a)o+=r.pdf((s-t[a])/e);return o/e/n},cdf(s){let o=0,a=0;for(;a<n;++a)o+=r.cdf((s-t[a])/e);return o/n},icdf(){throw Error("KDE icdf not supported.")}};return i.data(t)}function Xte(t,e){return t=t||0,e=e??1,Math.exp(t+TB()*e)}function Jte(t,e,r){if(t<=0)return 0;e=e||0,r=r??1;let n=(Math.log(t)-e)/r;return Math.exp(-.5*n*n)/(r*Wbe*t)}function Zte(t,e,r){return CB(Math.log(t),e,r)}function ere(t,e,r){return Math.exp(RB(t,e,r))}function Ybe(t,e){let r,n,i={mean(s){return arguments.length?(r=s||0,i):r},stdev(s){return arguments.length?(n=s??1,i):n},sample:()=>Xte(r,n),pdf:s=>Jte(s,r,n),cdf:s=>Zte(s,r,n),icdf:s=>ere(s,r,n)};return i.mean(t).stdev(e)}function Kbe(t,e){let r=0,n;function i(o){let a=[],u=0,l;for(l=0;l<r;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<r;++l)a[l]/=u;return a}let s={weights(o){return arguments.length?(n=i(e=o||[]),s):e},distributions(o){return arguments.length?(o?(r=o.length,t=o):(r=0,t=[]),s.weights(e)):t},sample(){let o=al(),a=t[r-1],u=n[0],l=0;for(;l<r-1;u+=n[++l])if(o<u){a=t[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<r;++u)a+=n[u]*t[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<r;++u)a+=n[u]*t[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(t).weights(e)}function tre(t,e){return e==null&&(e=t??1,t=0),t+(e-t)*al()}function rre(t,e,r){return r==null&&(r=e??1,e=0),t>=e&&t<=r?1/(r-e):0}function nre(t,e,r){return r==null&&(r=e??1,e=0),t<e?0:t>r?1:(t-e)/(r-e)}function ire(t,e,r){return r==null&&(r=e??1,e=0),t>=0&&t<=1?e+t*(r-e):NaN}function Xbe(t,e){let r,n,i={min(s){return arguments.length?(r=s||0,i):r},max(s){return arguments.length?(n=s??1,i):n},sample:()=>tre(r,n),pdf:s=>rre(s,r,n),cdf:s=>nre(s,r,n),icdf:s=>ire(s,r,n)};return e==null&&(e=t??1,t=0),i.min(t).max(e)}function OR(t,e,r,n){let i=n-t*t,s=Math.abs(i)<1e-24?0:(r-t*e)/i;return[e-s*t,s]}function OB(t,e,r,n){t=t.filter(d=>{let h=e(d),p=r(d);return h!=null&&(h=+h)>=h&&p!=null&&(p=+p)>=p}),n&&t.sort((d,h)=>e(d)-e(h));let i=t.length,s=new Float64Array(i),o=new Float64Array(i),a=0,u=0,l=0,c,f,x;for(x of t)s[a]=c=+e(x),o[a]=f=+r(x),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function DR(t,e,r,n){let i=-1,s,o;for(let a of t)s=e(a),o=r(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&n(s,o,++i)}function R4(t,e,r,n,i){let s=0,o=0;return DR(t,e,r,(a,u)=>{let l=u-i(a),c=u-n;s+=l*l,o+=c*c}),1-s/o}function sre(t,e,r){let n=0,i=0,s=0,o=0,a=0;DR(t,e,r,(c,f)=>{++a,n+=(c-n)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});let u=OR(n,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:R4(t,e,r,i,l)}}function Jbe(t,e,r){let n=0,i=0,s=0,o=0,a=0;DR(t,e,r,(c,f)=>{++a,c=Math.log(c),n+=(c-n)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});let u=OR(n,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:R4(t,e,r,i,l)}}function Zbe(t,e,r){let[n,i,s,o]=OB(t,e,r),a=0,u=0,l=0,c=0,f=0,x,d,h;DR(t,e,r,(y,A)=>{x=n[f++],d=Math.log(A),h=x*A,a+=(A*d-a)/f,u+=(h-u)/f,l+=(h*d-l)/f,c+=(x*h-c)/f});let[p,m]=OR(u/o,a/o,l/o,c/o),g=y=>Math.exp(p+m*(y-s));return{coef:[Math.exp(p-m*s),m],predict:g,rSquared:R4(t,e,r,o,g)}}function eTe(t,e,r){let n=0,i=0,s=0,o=0,a=0,u=0;DR(t,e,r,(f,x)=>{let d=Math.log(f),h=Math.log(x);++u,n+=(d-n)/u,i+=(h-i)/u,s+=(d*h-s)/u,o+=(d*d-o)/u,a+=(x-a)/u});let l=OR(n,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:R4(t,e,r,a,c)}}function ore(t,e,r){let[n,i,s,o]=OB(t,e,r),a=n.length,u=0,l=0,c=0,f=0,x=0,d,h,p,m;for(d=0;d<a;)h=n[d],p=i[d++],m=h*h,u+=(m-u)/d,l+=(m*h-l)/d,c+=(m*m-c)/d,f+=(h*p-f)/d,x+=(m*p-x)/d;let g=c-u*u,y=u*g-l*l,A=(x*u-f*l)/y,S=(f*g-x*l)/y,T=-A*u,_=b=>(b=b-s,A*b*b+S*b+T+o);return{coef:[T-S*s+A*s*s+o,S-2*A*s,A],predict:_,rSquared:R4(t,e,r,o,_)}}function tTe(t,e,r,n){if(n===1)return sre(t,e,r);if(n===2)return ore(t,e,r);let[i,s,o,a]=OB(t,e,r),u=i.length,l=[],c=[],f=n+1,x,d,h,p,m;for(x=0;x<f;++x){for(h=0,p=0;h<u;++h)p+=Math.pow(i[h],x)*s[h];for(l.push(p),m=new Float64Array(f),d=0;d<f;++d){for(h=0,p=0;h<u;++h)p+=Math.pow(i[h],x+d);m[d]=p}c.push(m)}c.push(l);let g=Kpt(c),y=A=>{A-=o;let S=a+g[0]+g[1]*A+g[2]*A*A;for(x=3;x<f;++x)S+=g[x]*Math.pow(A,x);return S};return{coef:Ypt(f,g,-o,a),predict:y,rSquared:R4(t,e,r,a,y)}}function Ypt(t,e,r,n){let i=Array(t),s,o,a,u;for(s=0;s<t;++s)i[s]=0;for(s=t-1;s>=0;--s)for(a=e[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(r,o)*u;return i[0]+=n,i}function Kpt(t){let e=t.length-1,r=[],n,i,s,o,a;for(n=0;n<e;++n){for(o=n,i=n+1;i<e;++i)Math.abs(t[n][i])>Math.abs(t[n][o])&&(o=i);for(s=n;s<e+1;++s)a=t[s][n],t[s][n]=t[s][o],t[s][o]=a;for(i=n+1;i<e;++i)for(s=e;s>=n;s--)t[s][i]-=t[s][n]*t[n][i]/t[n][n]}for(i=e-1;i>=0;--i){for(a=0,s=i+1;s<e;++s)a+=t[s][i]*r[s];r[i]=(t[e][i]-a)/t[i][i]}return r}var jbe=2,Hbe=1e-12;function rTe(t,e,r,n){let[i,s,o,a]=OB(t,e,r,!0),u=i.length,l=Math.max(2,~~(n*u)),c=new Float64Array(u),f=new Float64Array(u),x=new Float64Array(u).fill(1);for(let d=-1;++d<=jbe;){let h=[0,l-1];for(let m=0;m<u;++m){let g=i[m],y=h[0],A=h[1],S=g-i[y]>i[A]-g?y:A,T=0,_=0,b=0,R=0,O=0,N=1/Math.abs(i[S]-g||1);for(let q=y;q<=A;++q){let X=i[q],P=s[q],te=Xpt(Math.abs(g-X)*N)*x[q],me=X*te;T+=te,_+=me,b+=P*te,R+=P*me,O+=X*me}let[F,$]=OR(_/T,b/T,R/T,O/T);c[m]=F+$*g,f[m]=Math.abs(s[m]-c[m]),Jpt(i,m+1,h)}if(d===jbe)break;let p=d4(f);if(Math.abs(p)<Hbe)break;for(let m=0,g,y;m<u;++m)g=f[m]/(6*p),x[m]=g>=1?Hbe:(y=1-g*g)*y}return Zpt(i,c,o,a)}function Xpt(t){return(t=1-t*t*t)*t*t}function Jpt(t,e,r){let n=t[e],i=r[0],s=r[1]+1;if(!(s>=t.length))for(;e>i&&t[s]-n<=n-t[i];)r[0]=++i,r[1]=s,++s}function Zpt(t,e,r,n){let i=t.length,s=[],o=0,a=0,u=[],l;for(;o<i;++o)l=t[o]+r,u[0]===l?u[1]+=(e[o]-u[1])/++a:(a=0,u[1]+=n,u=[l,e[o]],s.push(u));return u[1]+=n,s}var e2t=.5*Math.PI/180;function NR(t,e,r,n){r=r||25,n=Math.max(r,n||200);let i=p=>[p,t(p)],s=e[0],o=e[1],a=o-s,u=a/n,l=[i(s)],c=[];if(r===n){for(let p=1;p<n;++p)l.push(i(s+p/r*a));return l.push(i(o)),l}else{c.push(i(o));for(let p=r;--p>0;)c.push(i(s+p/r*a))}let f=l[0],x=c[c.length-1],d=1/a,h=t2t(f[1],c);for(;x;){let p=i((f[0]+x[0])/2);p[0]-f[0]>=u&&r2t(f,p,x,d,h)>e2t?c.push(p):(f=x,l.push(x),c.pop()),x=c[c.length-1]}return l}function t2t(t,e){let r=t,n=t,i=e.length;for(let s=0;s<i;++s){let o=e[s][1];o<r&&(r=o),o>n&&(n=o)}return 1/(n-r)}function r2t(t,e,r,n,i){let s=Math.atan2(i*(r[1]-t[1]),n*(r[0]-t[0])),o=Math.atan2(i*(e[1]-t[1]),n*(e[0]-t[0]));return Math.abs(s-o)}function n2t(t){return e=>{let r=t.length,n=1,i=String(t[0](e));for(;n<r;++n)i+="|"+t[n](e);return i}}function lre(t){return!t||!t.length?function(){return""}:t.length===1?t[0]:n2t(t)}function sTe(t,e,r){return r||t+(e?"_"+e:"")}var are=()=>{},i2t={init:are,add:are,rem:are,idx:0},FR={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.sum,add:(t,e)=>t.sum+=+e,rem:(t,e)=>t.sum-=e},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,e)=>t.product*=e,rem:(t,e)=>t.product/=e},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>(t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,e)=>(t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,e)=>{(e<t.min||t.min===void 0)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,e)=>{(e>t.max||t.max===void 0)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,e,r)=>{e<t.min&&(t.argmin=r)},rem:(t,e)=>{e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,e,r)=>{e>t.max&&(t.argmax=r)},rem:(t,e)=>{e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},LR=Object.keys(FR).filter(t=>t!=="__count__");function s2t(t,e){return r=>Ke({name:t,out:r||t},i2t,e)}[...LR,"__count__"].forEach(t=>{FR[t]=s2t(t,FR[t])});function oTe(t,e){return FR[t](e)}function aTe(t,e){return t.idx-e.idx}function o2t(t){let e={};t.forEach(n=>e[n.name]=n);let r=n=>{n.req&&n.req.forEach(i=>{e[i]||r(e[i]=FR[i]())})};return t.forEach(r),Object.values(e).sort(aTe)}function a2t(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.init(this))}function u2t(t,e){if(t==null||t===""){++this.missing;return}t===t&&(++this.valid,this._ops.forEach(r=>r.add(this,t,e)))}function l2t(t,e){if(t==null||t===""){--this.missing;return}t===t&&(--this.valid,this._ops.forEach(r=>r.rem(this,t,e)))}function c2t(t){return this._out.forEach(e=>t[e.out]=e.value(this)),t}function uTe(t,e){let r=e||On,n=o2t(t),i=t.slice().sort(aTe);function s(o){this._ops=n,this._out=i,this.cell=o,this.init()}return s.prototype.init=a2t,s.prototype.add=u2t,s.prototype.rem=l2t,s.prototype.set=c2t,s.prototype.get=r,s.fields=t.map(o=>o.out),s}function cre(t){this._key=t?si(t):He,this.reset()}var ds=cre.prototype;ds.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};ds.add=function(t){this._add.push(t)};ds.rem=function(t){this._rem.push(t)};ds.values=function(){if(this._get=null,this._rem.length===0)return this._add;let t=this._add,e=this._rem,r=this._key,n=t.length,i=e.length,s=Array(n-i),o={},a,u,l;for(a=0;a<i;++a)o[r(e[a])]=1;for(a=0,u=0;a<n;++a)o[r(l=t[a])]?o[r(l)]=0:s[u++]=l;return this._rem=[],this._add=s};ds.distinct=function(t){let e=this.values(),r={},n=e.length,i=0,s;for(;--n>=0;)s=t(e[n])+"",Fe(r,s)||(r[s]=1,++i);return i};ds.extent=function(t){if(this._get!==t||!this._ext){let e=this.values(),r=jve(e,t);this._ext=[e[r[0]],e[r[1]]],this._get=t}return this._ext};ds.argmin=function(t){return this.extent(t)[0]||{}};ds.argmax=function(t){return this.extent(t)[1]||{}};ds.min=function(t){let e=this.extent(t)[0];return e!=null?t(e):void 0};ds.max=function(t){let e=this.extent(t)[1];return e!=null?t(e):void 0};ds.quartile=function(t){return(this._get!==t||!this._q)&&(this._q=Qte(this.values(),t),this._get=t),this._q};ds.q1=function(t){return this.quartile(t)[0]};ds.q2=function(t){return this.quartile(t)[1]};ds.q3=function(t){return this.quartile(t)[2]};ds.ci=function(t){return(this._get!==t||!this._ci)&&(this._ci=Qbe(this.values(),1e3,.05,t),this._get=t),this._ci};ds.ci0=function(t){return this.ci(t)[0]};ds.ci1=function(t){return this.ci(t)[1]};function d2(t){V.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}d2.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:LR},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ce(d2,V,{transform(t,e){let r=this,n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.modified();return r.stamp=n.stamp,r.value&&(i||e.modified(r._inputs,!0))?(r._prev=r.value,r.value=i?r.init(t):{},e.visit(e.SOURCE,s=>r.add(s))):(r.value=r.value||r.init(t),e.visit(e.REM,s=>r.rem(s)),e.visit(e.ADD,s=>r.add(s))),n.modifies(r._outputs),r._drop=t.drop!==!1,t.cross&&r._dims.length>1&&(r._drop=!1,r.cross()),e.clean()&&r._drop&&n.clean(!0).runAfter(()=>this.clean()),r.changes(n)},cross(){let t=this,e=t.value,r=t._dnames,n=r.map(()=>({})),i=r.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)n[l][f=c[r[l]]]=f}s(t._prev),s(e);function o(a,u,l){let c=r[l],f=n[l++];for(let x in f){let d=a?a+"|"+x:x;u[c]=f[x],l<i?o(d,u,l):e[d]||t.cell(d,u)}}o("",{},0)},init(t){let e=this._inputs=[],r=this._outputs=[],n={};function i(m){let g=le(Pi(m)),y=g.length,A=0,S;for(;A<y;++A)n[S=g[A]]||(n[S]=1,e.push(S))}this._dims=le(t.groupby),this._dnames=this._dims.map(m=>{let g=Br(m);return i(m),r.push(g),g}),this.cellkey=t.key?t.key:lre(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];let s=t.fields||[null],o=t.ops||["count"],a=t.as||[],u=s.length,l={},c,f,x,d,h,p;for(u!==o.length&&W("Unmatched number of fields and aggregate ops."),p=0;p<u;++p){if(c=s[p],f=o[p],c==null&&f!=="count"&&W("Null aggregate field specified."),d=Br(c),h=sTe(f,d,a[p]),r.push(h),f==="count"){this._counts.push(h);continue}x=l[d],x||(i(c),x=l[d]=[],x.field=c,this._measures.push(x)),f!=="count"&&(this._countOnly=!1),x.push(oTe(f,h))}return this._measures=this._measures.map(m=>uTe(m,m.field)),{}},cellkey:lre(),cell(t,e){let r=this.value[t];return r?r.num===0&&this._drop&&r.stamp<this.stamp?(r.stamp=this.stamp,this._adds[this._alen++]=r):r.stamp<this.stamp&&(r.stamp=this.stamp,this._mods[this._mlen++]=r):(r=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=r),r},newcell(t,e){let r={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){let n=this._measures,i=n.length;r.agg=Array(i);for(let s=0;s<i;++s)r.agg[s]=new n[s](r)}return r.store&&(r.data=new cre),r},newtuple(t,e){let r=this._dnames,n=this._dims,i=n.length,s={};for(let o=0;o<i;++o)s[r[o]]=n[o](t);return e?_B(e.tuple,s):wt(s)},clean(){let t=this.value;for(let e in t)t[e].num===0&&delete t[e]},add(t){let e=this.cellkey(t),r=this.cell(e,t);if(r.num+=1,this._countOnly)return;r.store&&r.data.add(t);let n=r.agg;for(let i=0,s=n.length;i<s;++i)n[i].add(n[i].get(t),t)},rem(t){let e=this.cellkey(t),r=this.cell(e,t);if(r.num-=1,this._countOnly)return;r.store&&r.data.rem(t);let n=r.agg;for(let i=0,s=n.length;i<s;++i)n[i].rem(n[i].get(t),t)},celltuple(t){let e=t.tuple,r=this._counts;t.store&&t.data.values();for(let n=0,i=r.length;n<i;++n)e[r[n]]=t.num;if(!this._countOnly){let n=t.agg;for(let i=0,s=n.length;i<s;++i)n[i].set(e)}return e},changes(t){let e=this._adds,r=this._mods,n=this._prev,i=this._drop,s=t.add,o=t.rem,a=t.mod,u,l,c,f;if(n)for(l in n)u=n[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(e[c])),e[c]=null;for(c=0,f=this._mlen;c<f;++c)u=r[c],(u.num===0&&i?o:a).push(this.celltuple(u)),r[c]=null;return this._alen=this._mlen=0,this._prev=null,t}});var f2t=1e-14;function fre(t){V.call(this,null,t)}fre.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ce(fre,V,{transform(t,e){let r=t.interval!==!1,n=this._bins(t),i=n.start,s=n.step,o=t.as||["bin0","bin1"],a=o[0],u=o[1],l;return t.modified()?(e=e.reflow(!0),l=e.SOURCE):l=e.modified(Pi(t.field))?e.ADD_MOD:e.ADD,e.visit(l,r?c=>{let f=n(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=n(c)),e.modifies(r?o:a)},_bins(t){if(this.value&&!t.modified())return this.value;let e=t.field,r=Gbe(t),n=r.step,i=r.start,s=i+Math.ceil((r.stop-i)/n)*n,o,a;(o=t.anchor)!=null&&(a=o-(i+n*Math.floor((o-i)/n)),i+=a,s+=a);let u=function(l){let c=jn(e(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-n)),i+n*Math.floor(f2t+(c-i)/n))};return u.start=i,u.stop=r.stop,u.step=n,this.value=Eo(u,Pi(e),t.name||"bin_"+Br(e))}});function lTe(t,e,r){let n=t,i=e||[],s=r||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[n(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[n(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?Wve(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function xre(t){V.call(this,[],t)}xre.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ce(xre,V,{transform(t,e){let r=e.fork(e.ALL),n=lTe(He,this.value,r.materialize(r.ADD).add),i=t.sort,s=e.changed()||i&&(t.modified("sort")||e.modified(i.fields));return r.visit(r.REM,n.remove),this.modified(s),this.value=r.source=n.data(lf(i),s),e.source&&e.source.root&&(this.value.root=e.source.root),r}});function cTe(t){fr.call(this,null,x2t,t)}ce(cTe,fr);function x2t(t){return this.value&&!t.modified()?this.value:pk(t.fields,t.orders)}function dre(t){V.call(this,null,t)}dre.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function d2t(t,e,r){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(r)}ce(dre,V,{transform(t,e){let r=f=>x=>{for(var d=d2t(a(x),t.case,s)||[],h,p=0,m=d.length;p<m;++p)o.test(h=d[p])||f(h)},n=this._parameterCheck(t,e),i=this._counts,s=this._match,o=this._stop,a=t.field,u=t.as||["text","count"],l=r(f=>i[f]=1+(i[f]||0)),c=r(f=>i[f]-=1);return n?e.visit(e.SOURCE,l):(e.visit(e.ADD,l),e.visit(e.REM,c)),this._finish(e,u)},_parameterCheck(t,e){let r=!1;return(t.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),r=!0),(t.modified("pattern")||!this._match)&&(this._match=new RegExp(t.pattern||"[\\w']+","g"),r=!0),(t.modified("field")||e.modified(t.field.fields))&&(r=!0),r&&(this._counts={}),r},_finish(t,e){let r=this._counts,n=this._tuples||(this._tuples={}),i=e[0],s=e[1],o=t.fork(t.NO_SOURCE|t.NO_FIELDS),a,u,l;for(a in r)u=n[a],l=r[a]||0,!u&&l?(n[a]=u=wt({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),r[a]=null,n[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(e)}});function hre(t){V.call(this,null,t)}hre.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ce(hre,V,{transform(t,e){let r=e.fork(e.NO_SOURCE),n=t.as||["a","b"],i=n[0],s=n[1],o=!this.value||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter"),a=this.value;return o?(a&&(r.rem=a),a=e.materialize(e.SOURCE).source,r.add=this.value=h2t(a,i,s,t.filter||ki)):r.mod=a,r.source=this.value,r.modifies(n)}});function h2t(t,e,r,n){for(var i=[],s={},o=t.length,a=0,u,l;a<o;++a)for(s[e]=l=t[a],u=0;u<o;++u)s[r]=t[u],n(s)&&(i.push(wt(s)),s={},s[e]=l);return i}var nTe={kde:Kte,mixture:Kbe,normal:Yte,lognormal:Ybe,uniform:Xbe},p2t="distributions",iTe="function",m2t="field";function fTe(t,e){let r=t[iTe];Fe(nTe,r)||W("Unknown distribution function: "+r);let n=nTe[r]();for(let i in t)i===m2t?n.data((t.from||e()).map(t[i])):i===p2t?n[i](t[i].map(s=>fTe(s,e))):typeof n[i]===iTe&&n[i](t[i]);return n}function pre(t){V.call(this,null,t)}var xTe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],g2t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:xTe},{name:"weights",type:"number",array:!0}]};pre.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:xTe.concat(g2t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ce(pre,V,{transform(t,e){let r=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){let n=fTe(t.distribution,y2t(e)),i=t.steps||t.minsteps||25,s=t.steps||t.maxsteps||200,o=t.method||"pdf";o!=="pdf"&&o!=="cdf"&&W("Invalid density method: "+o),!t.extent&&!n.data&&W("Missing density extent parameter."),o=n[o];let a=t.as||["value","density"],u=t.extent||ia(n.data()),l=NR(o,u,i,s).map(c=>{let f={};return f[a[0]]=c[0],f[a[1]]=c[1],wt(f)});this.value&&(r.rem=this.value),this.value=r.add=r.source=l}return r}});function y2t(t){return()=>t.materialize(t.SOURCE).source}function dTe(t,e){return t?t.map((r,n)=>e[n]||Br(r)):null}function mre(t,e,r){let n=[],i=f=>f(u),s,o,a,u,l,c;if(e==null)n.push(t.map(r));else for(s={},o=0,a=t.length;o<a;++o)u=t[o],l=e.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,n.push(c)),c.push(r(u));return n}var hTe="bin";function gre(t){V.call(this,null,t)}gre.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:hTe}]};var E2t=(t,e)=>Gp(ia(t,e))/30;ce(gre,V,{transform(t,e){if(this.value&&!(t.modified()||e.changed()))return e;let r=e.materialize(e.SOURCE).source,n=mre(e.source,t.groupby,On),i=t.smooth||!1,s=t.field,o=t.step||E2t(r,s),a=lf((h,p)=>s(h)-s(p)),u=t.as||hTe,l=n.length,c=1/0,f=-1/0,x=0,d;for(;x<l;++x){let h=n[x].sort(a);d=-1;for(let p of Vbe(h,o,i,s))p<c&&(c=p),p>f&&(f=p),h[++d][u]=p}return this.value={start:c,stop:f,step:o},e.reflow(!0).modifies(u)}});function pTe(t){fr.call(this,null,A2t,t),this.modified(!0)}ce(pTe,fr);function A2t(t){let e=t.expr;return this.value&&!t.modified("expr")?this.value:Eo(r=>e(r,t),Pi(e),Br(e))}function yre(t){V.call(this,[void 0,void 0],t)}yre.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ce(yre,V,{transform(t,e){let r=this.value,n=t.field,i=e.changed()||e.modified(n.fields)||t.modified("field"),s=r[0],o=r[1];if((i||s==null)&&(s=1/0,o=-1/0),e.visit(i?e.SOURCE:e.ADD,a=>{let u=jn(n(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Br(n);a&&(a=` for field "${a}"`),e.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Ere(t,e){fr.call(this,t),this.parent=e,this.count=0}ce(Ere,fr,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}});function NB(t){V.call(this,{},t),this._keys=mg();let e=this._targets=[];e.active=0,e.forEach=r=>{for(let n=0,i=e.active;n<i;++n)r(e[n],n,e)}}ce(NB,V,{activate(t){this._targets[this._targets.active++]=t},subflow(t,e,r,n){let i=this.value,s=Fe(i,t)&&i[t],o,a;return s?s.value.stamp<r.stamp&&(s.init(r),this.activate(s)):(a=n||(a=this._group[t])&&a.tuple,o=r.dataflow,s=new Ere(r.fork(r.NO_SOURCE),this),o.add(s).connect(e(o,t,a)),i[t]=s,this.activate(s)),s},clean(){let t=this.value,e=0;for(let r in t)if(t[r].count===0){let n=t[r].detachSubflow;n&&n(),delete t[r],++e}if(e){let r=this._targets.filter(n=>n&&n.count>0);this.initTargets(r)}},initTargets(t){let e=this._targets,r=e.length,n=t?t.length:0,i=0;for(;i<n;++i)e[i]=t[i];for(;i<r&&e[i]!=null;++i)e[i]=null;e.active=n},transform(t,e){let r=e.dataflow,n=t.key,i=t.subflow,s=this._keys,o=t.modified("key"),a=u=>this.subflow(u,i,e);return this._group=t.group||{},this.initTargets(),e.visit(e.REM,u=>{let l=He(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),e.visit(e.ADD,u=>{let l=n(u);s.set(He(u),l),a(l).add(u)}),o||e.modified(n.fields)?e.visit(e.MOD,u=>{let l=He(u),c=s.get(l),f=n(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):e.changed(e.MOD)&&e.visit(e.MOD,u=>{a(s.get(He(u))).mod(u)}),o&&e.visit(e.REFLOW,u=>{let l=He(u),c=s.get(l),f=n(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),e.clean()?r.runAfter(()=>{this.clean(),s.clean()}):s.empty>r.cleanThreshold&&r.runAfter(s.clean),e}});function mTe(t){fr.call(this,null,S2t,t)}ce(mTe,fr);function S2t(t){return this.value&&!t.modified()?this.value:j(t.name)?le(t.name).map(e=>si(e)):si(t.name,t.as)}function Are(t){V.call(this,mg(),t)}Are.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ce(Are,V,{transform(t,e){let r=e.dataflow,n=this.value,i=e.fork(),s=i.add,o=i.rem,a=i.mod,u=t.expr,l=!0;e.visit(e.REM,f=>{let x=He(f);n.has(x)?n.delete(x):o.push(f)}),e.visit(e.ADD,f=>{u(f,t)?s.push(f):n.set(He(f),1)});function c(f){let x=He(f),d=u(f,t),h=n.get(x);d&&h?(n.delete(x),s.push(f)):!d&&!h?(n.set(x,1),o.push(f)):l&&d&&!h&&a.push(f)}return e.visit(e.MOD,c),t.modified()&&(l=!1,e.visit(e.REFLOW,c)),n.empty>r.cleanThreshold&&r.runAfter(n.clean),i}});function Sre(t){V.call(this,[],t)}Sre.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ce(Sre,V,{transform(t,e){let r=e.fork(e.NO_SOURCE),n=t.fields,i=dTe(n,t.as||[]),s=t.index||null,o=i.length;return r.rem=this.value,e.visit(e.SOURCE,a=>{let u=n.map(h=>h(a)),l=u.reduce((h,p)=>Math.max(h,p.length),0),c=0,f,x,d;for(;c<l;++c){for(x=vB(a),f=0;f<o;++f)x[i[f]]=(d=u[f][c])==null?null:d;s&&(x[s]=c),r.add.push(x)}}),this.value=r.source=r.add,s&&r.modifies(s),r.modifies(i)}});function vre(t){V.call(this,[],t)}vre.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ce(vre,V,{transform(t,e){let r=e.fork(e.NO_SOURCE),n=t.fields,i=n.map(Br),s=t.as||["key","value"],o=s[0],a=s[1],u=n.length;return r.rem=this.value,e.visit(e.SOURCE,l=>{for(let c=0,f;c<u;++c)f=vB(l),f[o]=i[c],f[a]=n[c](l),r.add.push(f)}),this.value=r.source=r.add,r.modifies(s)}});function _re(t){V.call(this,null,t)}_re.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ce(_re,V,{transform(t,e){let r=t.expr,n=t.as,i=t.modified(),s=t.initonly?e.ADD:i?e.SOURCE:e.modified(r.fields)||e.modified(n)?e.ADD_MOD:e.ADD;return i&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(n),e.visit(s,o=>o[n]=r(o,t))}});function gTe(t){V.call(this,[],t)}ce(gTe,V,{transform(t,e){let r=e.fork(e.ALL),n=t.generator,i=this.value,s=t.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=wt(n(t))),i.push(u);r.add=r.add.length?r.materialize(r.ADD).add.concat(o):o}else a=i.slice(0,-s),r.rem=r.rem.length?r.materialize(r.REM).rem.concat(a):a,i=i.slice(-s);return r.source=this.value=i,r}});var DB={value:"value",median:d4,mean:lB,min:Cg,max:rl},v2t=[];function bre(t){V.call(this,[],t)}bre.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function _2t(t){var e=t.method||DB.value,r;if(DB[e]==null)W("Unrecognized imputation method: "+e);else return e===DB.value?(r=t.value!==void 0?t.value:0,()=>r):DB[e]}function b2t(t){let e=t.field;return r=>r?e(r):NaN}ce(bre,V,{transform(t,e){var r=e.fork(e.ALL),n=_2t(t),i=b2t(t),s=Br(t.field),o=Br(t.key),a=(t.groupby||[]).map(Br),u=T2t(e.source,t.groupby,t.key,t.keyvals),l=[],c=this.value,f=u.domain.length,x,d,h,p,m,g,y,A,S,T;for(m=0,A=u.length;m<A;++m)for(x=u[m],h=x.values,d=NaN,y=0;y<f;++y)if(x[y]==null){for(p=u.domain[y],T={_impute:!0},g=0,S=h.length;g<S;++g)T[a[g]]=h[g];T[o]=p,T[s]=Number.isNaN(d)?d=n(x,i):d,l.push(wt(T))}return l.length&&(r.add=r.materialize(r.ADD).add.concat(l)),c.length&&(r.rem=r.materialize(r.REM).rem.concat(c)),this.value=l,r}});function T2t(t,e,r,n){var i=g=>g(m),s=[],o=n?n.slice():[],a={},u={},l,c,f,x,d,h,p,m;for(o.forEach((g,y)=>a[g]=y+1),x=0,p=t.length;x<p;++x)m=t[x],h=r(m),d=a[h]||(a[h]=o.push(h)),c=(l=e?e.map(i):v2t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[d-1]=m;return s.domain=o,s}function Tre(t){d2.call(this,t)}Tre.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:LR},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ce(Tre,d2,{transform(t,e){let r=this,n=t.modified(),i;return r.value&&(n||e.modified(r._inputs,!0))?(i=r.value=n?r.init(t):{},e.visit(e.SOURCE,s=>r.add(s))):(i=r.value=r.value||this.init(t),e.visit(e.REM,s=>r.rem(s)),e.visit(e.ADD,s=>r.add(s))),r.changes(),e.visit(e.SOURCE,s=>{Ke(s,i[r.cellkey(s)].tuple)}),e.reflow(n).modifies(this._outputs)},changes(){let t=this._adds,e=this._mods,r,n;for(r=0,n=this._alen;r<n;++r)this.celltuple(t[r]),t[r]=null;for(r=0,n=this._mlen;r<n;++r)this.celltuple(e[r]),e[r]=null;this._alen=this._mlen=0}});function Cre(t){V.call(this,null,t)}Cre.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ce(Cre,V,{transform(t,e){let r=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){let n=e.materialize(e.SOURCE).source,i=mre(n,t.groupby,t.field),s=(t.groupby||[]).map(Br),o=t.bandwidth,a=t.cumulative?"cdf":"pdf",u=t.as||["value","density"],l=[],c=t.extent,f=t.steps||t.minsteps||25,x=t.steps||t.maxsteps||200;a!=="pdf"&&a!=="cdf"&&W("Invalid density method: "+a),t.resolve==="shared"&&(c||(c=ia(n,t.field)),f=x=t.steps||x),i.forEach(d=>{let h=Kte(d,o)[a],p=t.counts?d.length:1,m=c||ia(d);NR(h,m,f,x).forEach(g=>{let y={};for(let A=0;A<s.length;++A)y[s[A]]=d.dims[A];y[u[0]]=g[0],y[u[1]]=g[1]*p,l.push(wt(y))})}),this.value&&(r.rem=this.value),this.value=r.add=r.source=l}return r}});function yTe(t){fr.call(this,null,C2t,t)}ce(yTe,fr);function C2t(t){return this.value&&!t.modified()?this.value:yk(t.fields,t.flat)}function ETe(t){V.call(this,[],t),this._pending=null}ce(ETe,V,{transform(t,e){let r=e.dataflow;return this._pending?ure(this,e,this._pending):R2t(t)?e.StopPropagation:t.values?ure(this,e,r.parse(t.values,t.format)):t.async?{async:r.request(t.url,t.format).then(i=>(this._pending=le(i.data),s=>s.touch(this)))}:r.request(t.url,t.format).then(n=>ure(this,e,le(n.data)))}});function R2t(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function ure(t,e,r){r.forEach(wt);let n=e.fork(e.NO_FIELDS&e.NO_SOURCE);return n.rem=t.value,t.value=n.source=n.add=r,t._pending=null,n.rem.length&&n.clean(!0),n}function Rre(t){V.call(this,{},t)}Rre.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ce(Rre,V,{transform(t,e){let r=t.fields,n=t.index,i=t.values,s=t.default==null?null:t.default,o=t.modified(),a=r.length,u=o?e.SOURCE:e.ADD,l=e,c=t.as,f,x,d;return i?(x=i.length,a>1&&!c&&W('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*x&&W('The "as" parameter has too few output field names.'),c=c||i.map(Br),f=function(h){for(var p=0,m=0,g,y;p<a;++p)if(y=n.get(r[p](h)),y==null)for(g=0;g<x;++g,++m)h[c[m]]=s;else for(g=0;g<x;++g,++m)h[c[m]]=i[g](y)}):(c||W("Missing output field names."),f=function(h){for(var p=0,m;p<a;++p)m=n.get(r[p](h)),h[c[p]]=m??s}),o?l=e.reflow(!0):(d=r.some(h=>e.modified(h.fields)),u|=d?e.MOD:0),e.visit(u,f),l.modifies(c)}});function ATe(t){fr.call(this,null,O2t,t)}ce(ATe,fr);function O2t(t){if(this.value&&!t.modified())return this.value;let e=t.extents,r=e.length,n=1/0,i=-1/0,s,o;for(s=0;s<r;++s)o=e[s],o[0]<n&&(n=o[0]),o[1]>i&&(i=o[1]);return[n,i]}function STe(t){fr.call(this,null,D2t,t)}ce(STe,fr);function D2t(t){return this.value&&!t.modified()?this.value:t.values.reduce((e,r)=>e.concat(r),[])}function vTe(t){V.call(this,null,t)}ce(vTe,V,{transform(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function Ore(t){d2.call(this,t)}Ore.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:LR,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ce(Ore,d2,{_transform:d2.prototype.transform,transform(t,e){return this._transform(N2t(t,e),e)}});function N2t(t,e){let r=t.field,n=t.value,i=(t.op==="count"?"__count__":t.op)||"sum",s=Pi(r).concat(Pi(n)),o=w2t(r,t.limit||0,e);return e.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:o.map(()=>i),fields:o.map(a=>F2t(a,r,n,s)),as:o.map(a=>a+""),modified:t.modified.bind(t)}}function F2t(t,e,r,n){return Eo(i=>e(i)===t?r(i):NaN,n,t+"")}function w2t(t,e,r){let n={},i=[];return r.visit(r.SOURCE,s=>{let o=t(s);n[o]||(n[o]=1,i.push(o))}),i.sort(mk),e?i.slice(0,e):i}function _Te(t){NB.call(this,t)}ce(_Te,NB,{transform(t,e){let r=t.subflow,n=t.field,i=s=>this.subflow(He(s),r,e,s);return(t.modified("field")||n&&e.modified(Pi(n)))&&W("PreFacet does not support field modification."),this.initTargets(),n?(e.visit(e.MOD,s=>{let o=i(s);n(s).forEach(a=>o.mod(a))}),e.visit(e.ADD,s=>{let o=i(s);n(s).forEach(a=>o.add(wt(a)))}),e.visit(e.REM,s=>{let o=i(s);n(s).forEach(a=>o.rem(a))})):(e.visit(e.MOD,s=>i(s).mod(s)),e.visit(e.ADD,s=>i(s).add(s)),e.visit(e.REM,s=>i(s).rem(s))),e.clean()&&e.runAfter(()=>this.clean()),e}});function Dre(t){V.call(this,null,t)}Dre.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ce(Dre,V,{transform(t,e){let r=e.fork(e.NO_SOURCE),n=t.fields,i=dTe(t.fields,t.as||[]),s=n?(a,u)=>L2t(a,u,n,i):Ig,o;return this.value?o=this.value:(e=e.addAll(),o=this.value={}),e.visit(e.REM,a=>{let u=He(a);r.rem.push(o[u]),o[u]=null}),e.visit(e.ADD,a=>{let u=s(a,wt({}));o[He(a)]=u,r.add.push(u)}),e.visit(e.MOD,a=>{r.mod.push(s(a,o[He(a)]))}),r}});function L2t(t,e,r,n){for(let i=0,s=r.length;i<s;++i)e[n[i]]=r[i](t);return e}function bTe(t){V.call(this,null,t)}ce(bTe,V,{transform(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function Nre(t){V.call(this,null,t)}Nre.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};var I2t=1e-14;ce(Nre,V,{transform(t,e){let r=e.fork(e.NO_SOURCE|e.NO_FIELDS),n=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return r.source=this.value,r;let i=e.materialize(e.SOURCE).source,s=mre(i,t.groupby,t.field),o=(t.groupby||[]).map(Br),a=[],u=t.step||.01,l=t.probs||Dn(u/2,1-I2t,u),c=l.length;return s.forEach(f=>{let x=Gte(f,l);for(let d=0;d<c;++d){let h={};for(let p=0;p<o.length;++p)h[o[p]]=f.dims[p];h[n[0]]=l[d],h[n[1]]=x[d],a.push(wt(h))}}),this.value&&(r.rem=this.value),this.value=r.add=r.source=a,r}});function TTe(t){V.call(this,null,t)}ce(TTe,V,{transform(t,e){let r,n;return this.value?n=this.value:(r=e=e.addAll(),n=this.value={}),t.derive&&(r=e.fork(e.NO_SOURCE),e.visit(e.REM,i=>{let s=He(i);r.rem.push(n[s]),n[s]=null}),e.visit(e.ADD,i=>{let s=vB(i);n[He(i)]=s,r.add.push(s)}),e.visit(e.MOD,i=>{let s=n[He(i)];for(let o in i)s[o]=i[o],r.modifies(o);r.mod.push(s)})),r}});function Fre(t){V.call(this,[],t),this.count=0}Fre.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ce(Fre,V,{transform(t,e){let r=e.fork(e.NO_SOURCE),n=t.modified("size"),i=t.size,s=this.value.reduce((c,f)=>(c[He(f)]=1,c),{}),o=this.value,a=this.count,u=0;function l(c){let f,x;o.length<i?o.push(c):(x=~~((a+1)*al()),x<o.length&&x>=u&&(f=o[x],s[He(f)]&&r.rem.push(f),o[x]=c)),++a}if(e.rem.length&&(e.visit(e.REM,c=>{let f=He(c);s[f]&&(s[f]=-1,r.rem.push(c)),--a}),o=o.filter(c=>s[He(c)]!==-1)),(e.rem.length||n)&&o.length<i&&e.source&&(u=a=o.length,e.visit(e.SOURCE,c=>{s[He(c)]||l(c)}),u=-1),n&&o.length>i){let c=o.length-i;for(let f=0;f<c;++f)s[He(o[f])]=-1,r.rem.push(o[f]);o=o.slice(c)}return e.mod.length&&e.visit(e.MOD,c=>{s[He(c)]&&r.mod.push(c)}),e.add.length&&e.visit(e.ADD,l),(e.add.length||u<0)&&(r.add=o.filter(c=>!s[He(c)])),this.count=a,this.value=r.source=o,r}});function wre(t){V.call(this,null,t)}wre.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ce(wre,V,{transform(t,e){if(this.value&&!t.modified())return;let r=e.materialize().fork(e.MOD),n=t.as||"data";return r.rem=this.value?e.rem.concat(this.value):e.rem,this.value=Dn(t.start,t.stop,t.step||1).map(i=>{let s={};return s[n]=i,wt(s)}),r.add=e.add.concat(this.value),r}});function CTe(t){V.call(this,null,t),this.modified(!0)}ce(CTe,V,{transform(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function Lre(t){V.call(this,null,t)}var RTe=["unit0","unit1"];Lre.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Cte,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:RTe}]};ce(Lre,V,{transform(t,e){let r=t.field,n=t.interval!==!1,i=t.timezone==="utc",s=this._floor(t,e),o=(i?a2:o2)(s.unit).offset,a=t.as||RTe,u=a[0],l=a[1],c=s.step,f=s.start||1/0,x=s.stop||-1/0,d=e.ADD;return(t.modified()||e.changed(e.REM)||e.modified(Pi(r)))&&(e=e.reflow(!0),d=e.SOURCE,f=1/0,x=-1/0),e.visit(d,h=>{let p=r(h),m,g;p==null?(h[u]=null,n&&(h[l]=null)):(h[u]=m=g=s(p),n&&(h[l]=g=o(m,c)),m<f&&(f=m),g>x&&(x=g))}),s.start=f,s.stop=x,e.modifies(n?a:u)},_floor(t,e){let r=t.timezone==="utc",{units:n,step:i}=t.units?{units:t.units,step:t.step||1}:nbe({extent:t.extent||ia(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),s=Rte(n),o=this.value||{},a=(r?W5e:V5e)(s,i);return a.unit=xt(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function OTe(t){V.call(this,mg(),t)}ce(OTe,V,{transform(t,e){let r=e.dataflow,n=t.field,i=this.value,s=a=>i.set(n(a),a),o=!0;return t.modified("field")||e.modified(n.fields)?(i.clear(),e.visit(e.SOURCE,s)):e.changed()?(e.visit(e.REM,a=>i.delete(n(a))),e.visit(e.ADD,s)):o=!1,this.modified(o),i.empty>r.cleanThreshold&&r.runAfter(i.clean),e.fork()}});function DTe(t){V.call(this,null,t)}ce(DTe,V,{transform(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(lf(t.sort)):e.source).map(t.field))}});function M2t(t,e,r,n){let i=wR[t](e,r);return{init:i.init||Zc,update:function(s,o){o[n]=i.next(s)}}}var wR={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:e=>{let r=e.index,n=e.data;return r&&e.compare(n[r-1],n[r])?t=r+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:e=>{let r=e.index,n=e.data;return r&&e.compare(n[r-1],n[r])?++t:t}}},percent_rank:function(){let t=wR.rank(),e=t.next;return{init:t.init,next:r=>(e(r)-1)/(r.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:e=>{let r=e.data,n=e.compare,i=e.index;if(t<i){for(;i+1<r.length&&!n(r[i],r[i+1]);)++i;t=i}return(1+t)/r.length}}},ntile:function(t,e){e=+e,e>0||W("ntile num must be greater than zero.");let r=wR.cume_dist(),n=r.next;return{init:r.init,next:i=>Math.ceil(e*n(i))}},lag:function(t,e){return e=+e||1,{next:r=>{let n=r.index-e;return n>=0?t(r.data[n]):null}}},lead:function(t,e){return e=+e||1,{next:r=>{let n=r.index+e,i=r.data;return n<i.length?t(i[n]):null}}},first_value:function(t){return{next:e=>t(e.data[e.i0])}},last_value:function(t){return{next:e=>t(e.data[e.i1-1])}},nth_value:function(t,e){return e=+e,e>0||W("nth_value nth must be greater than zero."),{next:r=>{let n=r.i0+(e-1);return n<r.i1?t(r.data[n]):null}}},prev_value:function(t){let e;return{init:()=>e=null,next:r=>{let n=t(r.data[r.index]);return n!=null?e=n:e}}},next_value:function(t){let e,r;return{init:()=>(e=null,r=-1),next:n=>{let i=n.data;return n.index<=r?e:(r=P2t(t,i,n.index))<0?(r=i.length,e=null):e=t(i[r])}}}};function P2t(t,e,r){for(let n=e.length;r<n;++r)if(t(e[r])!=null)return r;return-1}var k2t=Object.keys(wR);function NTe(t){let e=le(t.ops),r=le(t.fields),n=le(t.params),i=le(t.as),s=this.outputs=[],o=this.windows=[],a={},u={},l=[],c=[],f=!0;function x(d){le(Pi(d)).forEach(h=>a[h]=1)}x(t.sort),e.forEach((d,h)=>{let p=r[h],m=Br(p),g=sTe(d,m,i[h]);if(x(p),s.push(g),Fe(wR,d))o.push(M2t(d,r[h],n[h],g));else{if(p==null&&d!=="count"&&W("Null aggregate field specified."),d==="count"){l.push(g);return}f=!1;let y=u[m];y||(y=u[m]=[],y.field=p,c.push(y)),y.push(oTe(d,g))}}),(l.length||c.length)&&(this.cell=B2t(c,l,f)),this.inputs=Object.keys(a)}var FTe=NTe.prototype;FTe.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()};FTe.update=function(t,e){let r=this.cell,n=this.windows,i=t.data,s=n&&n.length,o;if(r){for(o=t.p0;o<t.i0;++o)r.rem(i[o]);for(o=t.p1;o<t.i1;++o)r.add(i[o]);r.set(e)}for(o=0;o<s;++o)n[o].update(t,e)};function B2t(t,e,r){t=t.map(u=>uTe(u,u.field));let n={num:0,agg:null,store:!1,count:e};if(!r)for(var i=t.length,s=n.agg=Array(i),o=0;o<i;++o)s[o]=new t[o](n);if(n.store)var a=n.data=new cre;return n.add=function(u){if(n.num+=1,!r){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},n.rem=function(u){if(n.num-=1,!r){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},n.set=function(u){let l,c;for(a&&a.values(),l=0,c=e.length;l<c;++l)u[e[l]]=n.num;if(!r)for(l=0,c=s.length;l<c;++l)s[l].set(u)},n.init=function(){n.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},n}function Ire(t){V.call(this,{},t),this._mlen=0,this._mods=[]}Ire.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:k2t.concat(LR)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ce(Ire,V,{transform(t,e){this.stamp=e.stamp;let r=t.modified(),n=lf(t.sort),i=lre(t.groupby),s=a=>this.group(i(a)),o=this.state;(!o||r)&&(o=this.state=new NTe(t)),r||e.modified(o.inputs)?(this.value={},e.visit(e.SOURCE,a=>s(a).add(a))):(e.visit(e.REM,a=>s(a).remove(a)),e.visit(e.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)q2t(this._mods[a],o,n,t);return this._mlen=0,this._mods=[],e.reflow(r).modifies(o.outputs)},group(t){let e=this.value[t];return e||(e=this.value[t]=lTe(He),e.stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e}});function q2t(t,e,r,n){let i=n.sort,s=i&&!n.ignorePeers,o=n.frame||[null,0],a=t.data(r),u=a.length,l=s?h0(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Zr(-1)};e.init();for(let f=0;f<u;++f)U2t(c,o,f,u),s&&$2t(c,l),e.update(c,a[f])}function U2t(t,e,r,n){t.p0=t.i0,t.p1=t.i1,t.i0=e[0]==null?0:Math.max(0,r-Math.abs(e[0])),t.i1=e[1]==null?n:Math.min(n,r+Math.abs(e[1])+1),t.index=r}function $2t(t,e){let r=t.i0,n=t.i1-1,i=t.compare,s=t.data,o=s.length-1;r>0&&!i(s[r],s[r-1])&&(t.i0=e.left(s,s[r])),n<o&&!i(s[n],s[n+1])&&(t.i1=e.right(s,s[n]))}var Iie={};qo(Iie,{bound:()=>YOe,identifier:()=>Lie,mark:()=>KOe,overlap:()=>XOe,render:()=>ZOe,viewlayout:()=>t6e});function Bt(t){return function(){return t}}var Pre=Math.abs,hs=Math.atan2,h2=Math.cos,wTe=Math.max,FB=Math.min,y0=Math.sin,Vx=Math.sqrt,ji=1e-12,p2=Math.PI,IR=p2/2,wB=2*p2;function LTe(t){return t>1?0:t<-1?p2:Math.acos(t)}function kre(t){return t>=1?IR:t<=-1?-IR:Math.asin(t)}var Bre=Math.PI,qre=2*Bre,Pg=1e-6,j2t=qre-Pg;function ITe(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function H2t(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return ITe;let r=10**e;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}var kg=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?ITe:H2t(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,s,o){this._append`C${+e},${+r},${+n},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,i,s){if(e=+e,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=n-e,l=i-r,c=o-e,f=a-r,x=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(x>Pg)if(!(Math.abs(f*u-l*c)>Pg)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let d=n-o,h=i-a,p=u*u+l*l,m=d*d+h*h,g=Math.sqrt(p),y=Math.sqrt(x),A=s*Math.tan((Bre-Math.acos((p+x-m)/(2*g*y)))/2),S=A/y,T=A/g;Math.abs(S-1)>Pg&&this._append`L${e+S*c},${r+S*f}`,this._append`A${s},${s},0,0,${+(f*d>c*h)},${this._x1=e+T*u},${this._y1=r+T*l}`}}arc(e,r,n,i,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),u=n*Math.sin(i),l=e+a,c=r+u,f=1^o,x=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Pg||Math.abs(this._y1-c)>Pg)&&this._append`L${l},${c}`,n&&(x<0&&(x=x%qre+qre),x>j2t?this._append`A${n},${n},0,1,${f},${e-a},${r-u}A${n},${n},0,1,${f},${this._x1=l},${this._y1=c}`:x>Pg&&this._append`A${n},${n},0,${+(x>=Bre)},${f},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}};function MR(){return new kg}MR.prototype=kg.prototype;function m2(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{let n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new kg(e)}function z2t(t){return t.innerRadius}function G2t(t){return t.outerRadius}function Q2t(t){return t.startAngle}function V2t(t){return t.endAngle}function W2t(t){return t&&t.padAngle}function Y2t(t,e,r,n,i,s,o,a){var u=r-t,l=n-e,c=o-i,f=a-s,x=f*u-c*l;if(!(x*x<ji))return x=(c*(e-s)-f*(t-i))/x,[t+x*u,e+x*l]}function LB(t,e,r,n,i,s,o){var a=t-r,u=e-n,l=(o?s:-s)/Vx(a*a+u*u),c=l*u,f=-l*a,x=t+c,d=e+f,h=r+c,p=n+f,m=(x+h)/2,g=(d+p)/2,y=h-x,A=p-d,S=y*y+A*A,T=i-s,_=x*p-h*d,b=(A<0?-1:1)*Vx(wTe(0,T*T*S-_*_)),R=(_*A-y*b)/S,O=(-_*y-A*b)/S,N=(_*A+y*b)/S,F=(-_*y+A*b)/S,$=R-m,q=O-g,X=N-m,P=F-g;return $*$+q*q>X*X+P*P&&(R=N,O=F),{cx:R,cy:O,x01:-c,y01:-f,x11:R*(i/T-1),y11:O*(i/T-1)}}function Ure(){var t=z2t,e=G2t,r=Bt(0),n=null,i=Q2t,s=V2t,o=W2t,a=null,u=m2(l);function l(){var c,f,x=+t.apply(this,arguments),d=+e.apply(this,arguments),h=i.apply(this,arguments)-IR,p=s.apply(this,arguments)-IR,m=Pre(p-h),g=p>h;if(a||(a=c=u()),d<x&&(f=d,d=x,x=f),!(d>ji))a.moveTo(0,0);else if(m>wB-ji)a.moveTo(d*h2(h),d*y0(h)),a.arc(0,0,d,h,p,!g),x>ji&&(a.moveTo(x*h2(p),x*y0(p)),a.arc(0,0,x,p,h,g));else{var y=h,A=p,S=h,T=p,_=m,b=m,R=o.apply(this,arguments)/2,O=R>ji&&(n?+n.apply(this,arguments):Vx(x*x+d*d)),N=FB(Pre(d-x)/2,+r.apply(this,arguments)),F=N,$=N,q,X;if(O>ji){var P=kre(O/x*y0(R)),te=kre(O/d*y0(R));(_-=P*2)>ji?(P*=g?1:-1,S+=P,T-=P):(_=0,S=T=(h+p)/2),(b-=te*2)>ji?(te*=g?1:-1,y+=te,A-=te):(b=0,y=A=(h+p)/2)}var me=d*h2(y),Ce=d*y0(y),Pe=x*h2(T),ct=x*y0(T);if(N>ji){var rr=d*h2(A),Ir=d*y0(A),En=x*h2(S),oo=x*y0(S),vr;if(m<p2)if(vr=Y2t(me,Ce,En,oo,rr,Ir,Pe,ct)){var Q0=me-vr[0],L=Ce-vr[1],I=rr-vr[0],D=Ir-vr[1],ae=1/y0(LTe((Q0*I+L*D)/(Vx(Q0*Q0+L*L)*Vx(I*I+D*D)))/2),w=Vx(vr[0]*vr[0]+vr[1]*vr[1]);F=FB(N,(x-w)/(ae-1)),$=FB(N,(d-w)/(ae+1))}else F=$=0}b>ji?$>ji?(q=LB(En,oo,me,Ce,d,$,g),X=LB(rr,Ir,Pe,ct,d,$,g),a.moveTo(q.cx+q.x01,q.cy+q.y01),$<N?a.arc(q.cx,q.cy,$,hs(q.y01,q.x01),hs(X.y01,X.x01),!g):(a.arc(q.cx,q.cy,$,hs(q.y01,q.x01),hs(q.y11,q.x11),!g),a.arc(0,0,d,hs(q.cy+q.y11,q.cx+q.x11),hs(X.cy+X.y11,X.cx+X.x11),!g),a.arc(X.cx,X.cy,$,hs(X.y11,X.x11),hs(X.y01,X.x01),!g))):(a.moveTo(me,Ce),a.arc(0,0,d,y,A,!g)):a.moveTo(me,Ce),!(x>ji)||!(_>ji)?a.lineTo(Pe,ct):F>ji?(q=LB(Pe,ct,rr,Ir,x,-F,g),X=LB(me,Ce,En,oo,x,-F,g),a.lineTo(q.cx+q.x01,q.cy+q.y01),F<N?a.arc(q.cx,q.cy,F,hs(q.y01,q.x01),hs(X.y01,X.x01),!g):(a.arc(q.cx,q.cy,F,hs(q.y01,q.x01),hs(q.y11,q.x11),!g),a.arc(0,0,x,hs(q.cy+q.y11,q.cx+q.x11),hs(X.cy+X.y11,X.cx+X.x11),g),a.arc(X.cx,X.cy,F,hs(X.y11,X.x11),hs(X.y01,X.x01),!g))):a.arc(0,0,x,T,S,g)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-p2/2;return[h2(f)*c,y0(f)*c]},l.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Bt(+c),l):t},l.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Bt(+c),l):e},l.cornerRadius=function(c){return arguments.length?(r=typeof c=="function"?c:Bt(+c),l):r},l.padRadius=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:Bt(+c),l):n},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Bt(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Bt(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Bt(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}var hQt=Array.prototype.slice;function IB(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function MTe(t){this._context=t}MTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Bg(t){return new MTe(t)}function MB(t){return t[0]}function PB(t){return t[1]}function PR(t,e){var r=Bt(!0),n=null,i=Bg,s=null,o=m2(a);t=typeof t=="function"?t:t===void 0?MB:Bt(t),e=typeof e=="function"?e:e===void 0?PB:Bt(e);function a(u){var l,c=(u=IB(u)).length,f,x=!1,d;for(n==null&&(s=i(d=o())),l=0;l<=c;++l)!(l<c&&r(f=u[l],l,u))===x&&((x=!x)?s.lineStart():s.lineEnd()),x&&s.point(+t(f,l,u),+e(f,l,u));if(d)return s=null,d+""||null}return a.x=function(u){return arguments.length?(t=typeof u=="function"?u:Bt(+u),a):t},a.y=function(u){return arguments.length?(e=typeof u=="function"?u:Bt(+u),a):e},a.defined=function(u){return arguments.length?(r=typeof u=="function"?u:Bt(!!u),a):r},a.curve=function(u){return arguments.length?(i=u,n!=null&&(s=i(n)),a):i},a.context=function(u){return arguments.length?(u==null?n=s=null:s=i(n=u),a):n},a}function kB(t,e,r){var n=null,i=Bt(!0),s=null,o=Bg,a=null,u=m2(l);t=typeof t=="function"?t:t===void 0?MB:Bt(+t),e=typeof e=="function"?e:e===void 0?Bt(0):Bt(+e),r=typeof r=="function"?r:r===void 0?PB:Bt(+r);function l(f){var x,d,h,p=(f=IB(f)).length,m,g=!1,y,A=new Array(p),S=new Array(p);for(s==null&&(a=o(y=u())),x=0;x<=p;++x){if(!(x<p&&i(m=f[x],x,f))===g)if(g=!g)d=x,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=x-1;h>=d;--h)a.point(A[h],S[h]);a.lineEnd(),a.areaEnd()}g&&(A[x]=+t(m,x,f),S[x]=+e(m,x,f),a.point(n?+n(m,x,f):A[x],r?+r(m,x,f):S[x]))}if(y)return a=null,y+""||null}function c(){return PR().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:Bt(+f),n=null,l):t},l.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Bt(+f),l):t},l.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Bt(+f),l):n},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:Bt(+f),r=null,l):e},l.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Bt(+f),l):e},l.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Bt(+f),l):r},l.lineX0=l.lineY0=function(){return c().x(t).y(e)},l.lineY1=function(){return c().x(t).y(r)},l.lineX1=function(){return c().x(n).y(e)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Bt(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}var PTe={draw(t,e){let r=Vx(e/p2);t.moveTo(r,0),t.arc(0,0,r,0,wB)}};function BB(t,e){let r=null,n=m2(i);t=typeof t=="function"?t:Bt(t||PTe),e=typeof e=="function"?e:Bt(e===void 0?64:+e);function i(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Bt(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Bt(+s),i):e},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function ul(){}function O4(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function kR(t){this._context=t}kR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:O4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:O4(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function $re(t){return new kR(t)}function kTe(t){this._context=t}kTe.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:O4(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function jre(t){return new kTe(t)}function BTe(t){this._context=t}BTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:O4(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Hre(t){return new BTe(t)}function qTe(t,e){this._basis=new kR(t),this._beta=e}qTe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,r=t.length-1;if(r>0)for(var n=t[0],i=e[0],s=t[r]-n,o=e[r]-i,a=-1,u;++a<=r;)u=a/r,this._basis.point(this._beta*t[a]+(1-this._beta)*(n+u*s),this._beta*e[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var zre=function t(e){function r(n){return e===1?new kR(n):new qTe(n,e)}return r.beta=function(n){return t(+n)},r}(.85);function D4(t,e,r){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-r),t._x2,t._y2)}function qB(t,e){this._context=t,this._k=(1-e)/6}qB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:D4(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:D4(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Gre=function t(e){function r(n){return new qB(n,e)}return r.tension=function(n){return t(+n)},r}(0);function UB(t,e){this._context=t,this._k=(1-e)/6}UB.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:D4(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Qre=function t(e){function r(n){return new UB(n,e)}return r.tension=function(n){return t(+n)},r}(0);function $B(t,e){this._context=t,this._k=(1-e)/6}$B.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:D4(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Vre=function t(e){function r(n){return new $B(n,e)}return r.tension=function(n){return t(+n)},r}(0);function BR(t,e,r){var n=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>ji){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);n=(n*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>ji){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*l+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*l+t._y1*t._l23_2a-r*t._l12_2a)/c}t._context.bezierCurveTo(n,i,s,o,t._x2,t._y2)}function UTe(t,e){this._context=t,this._alpha=e}UTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:BR(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Wre=function t(e){function r(n){return e?new UTe(n,e):new qB(n,0)}return r.alpha=function(n){return t(+n)},r}(.5);function $Te(t,e){this._context=t,this._alpha=e}$Te.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:BR(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Yre=function t(e){function r(n){return e?new $Te(n,e):new UB(n,0)}return r.alpha=function(n){return t(+n)},r}(.5);function jTe(t,e){this._context=t,this._alpha=e}jTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:BR(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Kre=function t(e){function r(n){return e?new jTe(n,e):new $B(n,0)}return r.alpha=function(n){return t(+n)},r}(.5);function HTe(t){this._context=t}HTe.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Xre(t){return new HTe(t)}function zTe(t){return t<0?-1:1}function GTe(t,e,r){var n=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(n||i<0&&-0),o=(r-t._y1)/(i||n<0&&-0),a=(s*i+o*n)/(n+i);return(zTe(s)+zTe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function QTe(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Jre(t,e,r){var n=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-n)/3;t._context.bezierCurveTo(n+a,i+a*e,s-a,o-a*r,s,o)}function jB(t){this._context=t}jB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Jre(this,this._t0,QTe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Jre(this,QTe(this,r=GTe(this,t,e)),r);break;default:Jre(this,this._t0,r=GTe(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function VTe(t){this._context=new WTe(t)}(VTe.prototype=Object.create(jB.prototype)).point=function(t,e){jB.prototype.point.call(this,e,t)};function WTe(t){this._context=t}WTe.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,s){this._context.bezierCurveTo(e,t,n,r,s,i)}};function Zre(t){return new jB(t)}function ene(t){return new VTe(t)}function KTe(t){this._context=t}KTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=YTe(t),i=YTe(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function YTe(t){var e,r=t.length-1,n,i=new Array(r),s=new Array(r),o=new Array(r);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function tne(t){return new KTe(t)}function HB(t,e){this._context=t,this._t=e}HB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function rne(t){return new HB(t,.5)}function nne(t){return new HB(t,0)}function ine(t){return new HB(t,1)}function ll(t,e){if(typeof document<"u"&&document.createElement){let r=document.createElement("canvas");if(r&&r.getContext)return r.width=t,r.height=e,r}return null}var XTe=()=>typeof Image<"u"?Image:null;function Gn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function cf(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}var N4=Symbol("implicit");function qg(){var t=new x4,e=[],r=[],n=N4;function i(s){let o=t.get(s);if(o===void 0){if(n!==N4)return n;t.set(s,o=e.push(s)-1)}return r[o%r.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new x4;for(let o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return qg(e,r).unknown(n)},Gn.apply(i,arguments),i}var yne={};qo(yne,{interpolate:()=>Ys,interpolateArray:()=>_Ce,interpolateBasis:()=>XB,interpolateBasisClosed:()=>JB,interpolateCubehelix:()=>$Ce,interpolateCubehelixLong:()=>jCe,interpolateDate:()=>eq,interpolateDiscrete:()=>bCe,interpolateHcl:()=>BCe,interpolateHclLong:()=>qCe,interpolateHsl:()=>MCe,interpolateHslLong:()=>PCe,interpolateHue:()=>TCe,interpolateLab:()=>gne,interpolateNumber:()=>Ks,interpolateNumberArray:()=>M4,interpolateObject:()=>tq,interpolateRgb:()=>jR,interpolateRgbBasis:()=>SCe,interpolateRgbBasisClosed:()=>vCe,interpolateRound:()=>hf,interpolateString:()=>rq,interpolateTransformCss:()=>NCe,interpolateTransformSvg:()=>FCe,interpolateZoom:()=>LCe,piecewise:()=>Qg,quantize:()=>HCe});function Wx(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function g2(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function xf(){}var y2=.7,jg=1/y2,F4="\\s*([+-]?\\d+)\\s*",qR="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ff="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",X2t=/^#([0-9a-f]{3,8})$/,J2t=new RegExp(`^rgb\\(${F4},${F4},${F4}\\)$`),Z2t=new RegExp(`^rgb\\(${ff},${ff},${ff}\\)$`),e1t=new RegExp(`^rgba\\(${F4},${F4},${F4},${qR}\\)$`),t1t=new RegExp(`^rgba\\(${ff},${ff},${ff},${qR}\\)$`),r1t=new RegExp(`^hsl\\(${qR},${ff},${ff}\\)$`),n1t=new RegExp(`^hsla\\(${qR},${ff},${ff},${qR}\\)$`),JTe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wx(xf,E2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ZTe,formatHex:ZTe,formatHex8:i1t,formatHsl:s1t,formatRgb:eCe,toString:eCe});function ZTe(){return this.rgb().formatHex()}function i1t(){return this.rgb().formatHex8()}function s1t(){return oCe(this).formatHsl()}function eCe(){return this.rgb().formatRgb()}function E2(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=X2t.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?tCe(e):r===3?new Qn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?zB(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?zB(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=J2t.exec(t))?new Qn(e[1],e[2],e[3],1):(e=Z2t.exec(t))?new Qn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=e1t.exec(t))?zB(e[1],e[2],e[3],e[4]):(e=t1t.exec(t))?zB(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=r1t.exec(t))?iCe(e[1],e[2]/100,e[3]/100,1):(e=n1t.exec(t))?iCe(e[1],e[2]/100,e[3]/100,e[4]):JTe.hasOwnProperty(t)?tCe(JTe[t]):t==="transparent"?new Qn(NaN,NaN,NaN,0):null}function tCe(t){return new Qn(t>>16&255,t>>8&255,t&255,1)}function zB(t,e,r,n){return n<=0&&(t=e=r=NaN),new Qn(t,e,r,n)}function UR(t){return t instanceof xf||(t=E2(t)),t?(t=t.rgb(),new Qn(t.r,t.g,t.b,t.opacity)):new Qn}function cl(t,e,r,n){return arguments.length===1?UR(t):new Qn(t,e,r,n??1)}function Qn(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}Wx(Qn,cl,g2(xf,{brighter(t){return t=t==null?jg:Math.pow(jg,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?y2:Math.pow(y2,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qn($g(this.r),$g(this.g),$g(this.b),QB(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rCe,formatHex:rCe,formatHex8:o1t,formatRgb:nCe,toString:nCe}));function rCe(){return`#${Ug(this.r)}${Ug(this.g)}${Ug(this.b)}`}function o1t(){return`#${Ug(this.r)}${Ug(this.g)}${Ug(this.b)}${Ug((isNaN(this.opacity)?1:this.opacity)*255)}`}function nCe(){let t=QB(this.opacity);return`${t===1?"rgb(":"rgba("}${$g(this.r)}, ${$g(this.g)}, ${$g(this.b)}${t===1?")":`, ${t})`}`}function QB(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $g(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ug(t){return t=$g(t),(t<16?"0":"")+t.toString(16)}function iCe(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new E0(t,e,r,n)}function oCe(t){if(t instanceof E0)return new E0(t.h,t.s,t.l,t.opacity);if(t instanceof xf||(t=E2(t)),!t)return new E0;if(t instanceof E0)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,a=s-i,u=(s+i)/2;return a?(e===s?o=(r-n)/a+(r<n)*6:r===s?o=(n-e)/a+2:o=(e-r)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new E0(o,a,u,t.opacity)}function Hg(t,e,r,n){return arguments.length===1?oCe(t):new E0(t,e,r,n??1)}function E0(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Wx(E0,Hg,g2(xf,{brighter(t){return t=t==null?jg:Math.pow(jg,t),new E0(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?y2:Math.pow(y2,t),new E0(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Qn(sne(t>=240?t-240:t+120,i,n),sne(t,i,n),sne(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new E0(sCe(this.h),GB(this.s),GB(this.l),QB(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=QB(this.opacity);return`${t===1?"hsl(":"hsla("}${sCe(this.h)}, ${GB(this.s)*100}%, ${GB(this.l)*100}%${t===1?")":`, ${t})`}`}}));function sCe(t){return t=(t||0)%360,t<0?t+360:t}function GB(t){return Math.max(0,Math.min(1,t||0))}function sne(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}var VB=Math.PI/180,WB=180/Math.PI;var YB=18,aCe=.96422,uCe=1,lCe=.82521,cCe=4/29,w4=6/29,fCe=3*w4*w4,a1t=w4*w4*w4;function xCe(t){if(t instanceof df)return new df(t.l,t.a,t.b,t.opacity);if(t instanceof Yx)return dCe(t);t instanceof Qn||(t=UR(t));var e=lne(t.r),r=lne(t.g),n=lne(t.b),i=one((.2225045*e+.7168786*r+.0606169*n)/uCe),s,o;return e===r&&r===n?s=o=i:(s=one((.4360747*e+.3850649*r+.1430804*n)/aCe),o=one((.0139322*e+.0971045*r+.7141733*n)/lCe)),new df(116*i-16,500*(s-i),200*(i-o),t.opacity)}function A2(t,e,r,n){return arguments.length===1?xCe(t):new df(t,e,r,n??1)}function df(t,e,r,n){this.l=+t,this.a=+e,this.b=+r,this.opacity=+n}Wx(df,A2,g2(xf,{brighter(t){return new df(this.l+YB*(t??1),this.a,this.b,this.opacity)},darker(t){return new df(this.l-YB*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,r=isNaN(this.b)?t:t-this.b/200;return e=aCe*ane(e),t=uCe*ane(t),r=lCe*ane(r),new Qn(une(3.1338561*e-1.6168667*t-.4906146*r),une(-.9787684*e+1.9161415*t+.033454*r),une(.0719453*e-.2289914*t+1.4052427*r),this.opacity)}}));function one(t){return t>a1t?Math.pow(t,1/3):t/fCe+cCe}function ane(t){return t>w4?t*t*t:fCe*(t-cCe)}function une(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function lne(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function u1t(t){if(t instanceof Yx)return new Yx(t.h,t.c,t.l,t.opacity);if(t instanceof df||(t=xCe(t)),t.a===0&&t.b===0)return new Yx(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*WB;return new Yx(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function zg(t,e,r,n){return arguments.length===1?u1t(t):new Yx(t,e,r,n??1)}function Yx(t,e,r,n){this.h=+t,this.c=+e,this.l=+r,this.opacity=+n}function dCe(t){if(isNaN(t.h))return new df(t.l,0,0,t.opacity);var e=t.h*VB;return new df(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Wx(Yx,zg,g2(xf,{brighter(t){return new Yx(this.h,this.c,this.l+YB*(t??1),this.opacity)},darker(t){return new Yx(this.h,this.c,this.l-YB*(t??1),this.opacity)},rgb(){return dCe(this).rgb()}}));var gCe=-.14861,cne=1.78277,fne=-.29227,KB=-.90649,$R=1.97294,hCe=$R*KB,pCe=$R*cne,mCe=cne*fne-KB*gCe;function l1t(t){if(t instanceof Gg)return new Gg(t.h,t.s,t.l,t.opacity);t instanceof Qn||(t=UR(t));var e=t.r/255,r=t.g/255,n=t.b/255,i=(mCe*n+hCe*e-pCe*r)/(mCe+hCe-pCe),s=n-i,o=($R*(r-i)-fne*s)/KB,a=Math.sqrt(o*o+s*s)/($R*i*(1-i)),u=a?Math.atan2(o,s)*WB-120:NaN;return new Gg(u<0?u+360:u,a,i,t.opacity)}function L4(t,e,r,n){return arguments.length===1?l1t(t):new Gg(t,e,r,n??1)}function Gg(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Wx(Gg,L4,g2(xf,{brighter(t){return t=t==null?jg:Math.pow(jg,t),new Gg(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?y2:Math.pow(y2,t),new Gg(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*VB,e=+this.l,r=isNaN(this.s)?0:this.s*e*(1-e),n=Math.cos(t),i=Math.sin(t);return new Qn(255*(e+r*(gCe*n+cne*i)),255*(e+r*(fne*n+KB*i)),255*(e+r*($R*n)),this.opacity)}}));function xne(t,e,r,n,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*r+(1+3*t+3*s-3*o)*n+o*i)/6}function XB(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),i=t[n],s=t[n+1],o=n>0?t[n-1]:2*i-s,a=n<e-1?t[n+2]:2*s-i;return xne((r-n/e)*e,o,i,s,a)}}function JB(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),i=t[(n+e-1)%e],s=t[n%e],o=t[(n+1)%e],a=t[(n+2)%e];return xne((r-n/e)*e,i,s,o,a)}}var I4=t=>()=>t;function yCe(t,e){return function(r){return t+r*e}}function c1t(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function S2(t,e){var r=e-t;return r?yCe(t,r>180||r<-180?r-360*Math.round(r/360):r):I4(isNaN(t)?e:t)}function ECe(t){return(t=+t)==1?$r:function(e,r){return r-e?c1t(e,r,t):I4(isNaN(e)?r:e)}}function $r(t,e){var r=e-t;return r?yCe(t,r):I4(isNaN(t)?e:t)}var jR=function t(e){var r=ECe(e);function n(i,s){var o=r((i=cl(i)).r,(s=cl(s)).r),a=r(i.g,s.g),u=r(i.b,s.b),l=$r(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return n.gamma=t,n}(1);function ACe(t){return function(e){var r=e.length,n=new Array(r),i=new Array(r),s=new Array(r),o,a;for(o=0;o<r;++o)a=cl(e[o]),n[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return n=t(n),i=t(i),s=t(s),a.opacity=1,function(u){return a.r=n(u),a.g=i(u),a.b=s(u),a+""}}}var SCe=ACe(XB),vCe=ACe(JB);function M4(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=t[i]*(1-s)+e[i]*s;return n}}function ZB(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _Ce(t,e){return(ZB(e)?M4:dne)(t,e)}function dne(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)i[o]=Ys(t[o],e[o]);for(;o<r;++o)s[o]=e[o];return function(a){for(o=0;o<n;++o)s[o]=i[o](a);return s}}function eq(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Ks(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function tq(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=Ys(t[i],e[i]):n[i]=e[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var pne=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hne=new RegExp(pne.source,"g");function f1t(t){return function(){return t}}function x1t(t){return function(e){return t(e)+""}}function rq(t,e){var r=pne.lastIndex=hne.lastIndex=0,n,i,s,o=-1,a=[],u=[];for(t=t+"",e=e+"";(n=pne.exec(t))&&(i=hne.exec(e));)(s=i.index)>r&&(s=e.slice(r,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Ks(n,i)})),r=hne.lastIndex;return r<e.length&&(s=e.slice(r),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?x1t(u[0].x):f1t(e):(e=u.length,function(l){for(var c=0,f;c<e;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Ys(t,e){var r=typeof e,n;return e==null||r==="boolean"?I4(e):(r==="number"?Ks:r==="string"?(n=E2(e))?(e=n,jR):rq:e instanceof E2?jR:e instanceof Date?eq:ZB(e)?M4:Array.isArray(e)?dne:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?tq:Ks)(t,e)}function bCe(t){var e=t.length;return function(r){return t[Math.max(0,Math.min(e-1,Math.floor(r*e)))]}}function TCe(t,e){var r=S2(+t,+e);return function(n){var i=r(n);return i-360*Math.floor(i/360)}}function hf(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var CCe=180/Math.PI,nq={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mne(t,e,r,n,i,s){var o,a,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*r+e*n)&&(r-=t*u,n-=e*u),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,u/=a),t*n<e*r&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*CCe,skewX:Math.atan(u)*CCe,scaleX:o,scaleY:a}}var iq;function RCe(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nq:mne(e.a,e.b,e.c,e.d,e.e,e.f)}function OCe(t){return t==null?nq:(iq||(iq=document.createElementNS("http://www.w3.org/2000/svg","g")),iq.setAttribute("transform",t),(t=iq.transform.baseVal.consolidate())?(t=t.matrix,mne(t.a,t.b,t.c,t.d,t.e,t.f)):nq)}function DCe(t,e,r,n){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,x,d,h){if(l!==f||c!==x){var p=d.push("translate(",null,e,null,r);h.push({i:p-4,x:Ks(l,f)},{i:p-2,x:Ks(c,x)})}else(f||x)&&d.push("translate("+f+e+x+r)}function o(l,c,f,x){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),x.push({i:f.push(i(f)+"rotate(",null,n)-2,x:Ks(l,c)})):c&&f.push(i(f)+"rotate("+c+n)}function a(l,c,f,x){l!==c?x.push({i:f.push(i(f)+"skewX(",null,n)-2,x:Ks(l,c)}):c&&f.push(i(f)+"skewX("+c+n)}function u(l,c,f,x,d,h){if(l!==f||c!==x){var p=d.push(i(d)+"scale(",null,",",null,")");h.push({i:p-4,x:Ks(l,f)},{i:p-2,x:Ks(c,x)})}else(f!==1||x!==1)&&d.push(i(d)+"scale("+f+","+x+")")}return function(l,c){var f=[],x=[];return l=t(l),c=t(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,x),o(l.rotate,c.rotate,f,x),a(l.skewX,c.skewX,f,x),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,x),l=c=null,function(d){for(var h=-1,p=x.length,m;++h<p;)f[(m=x[h]).i]=m.x(d);return f.join("")}}}var NCe=DCe(RCe,"px, ","px)","deg)"),FCe=DCe(OCe,", ",")",")");var d1t=1e-12;function wCe(t){return((t=Math.exp(t))+1/t)/2}function h1t(t){return((t=Math.exp(t))-1/t)/2}function p1t(t){return((t=Math.exp(2*t))-1)/(t+1)}var LCe=function t(e,r,n){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],x=o[2],d=c-a,h=f-u,p=d*d+h*h,m,g;if(p<d1t)g=Math.log(x/l)/e,m=function(b){return[a+b*d,u+b*h,l*Math.exp(e*b*g)]};else{var y=Math.sqrt(p),A=(x*x-l*l+n*p)/(2*l*r*y),S=(x*x-l*l-n*p)/(2*x*r*y),T=Math.log(Math.sqrt(A*A+1)-A),_=Math.log(Math.sqrt(S*S+1)-S);g=(_-T)/e,m=function(b){var R=b*g,O=wCe(T),N=l/(r*y)*(O*p1t(e*R+T)-h1t(T));return[a+N*d,u+N*h,l*O/wCe(e*R+T)]}}return m.duration=g*1e3*e/Math.SQRT2,m}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return t(o,a,u)},i}(Math.SQRT2,2,4);function ICe(t){return function(e,r){var n=t((e=Hg(e)).h,(r=Hg(r)).h),i=$r(e.s,r.s),s=$r(e.l,r.l),o=$r(e.opacity,r.opacity);return function(a){return e.h=n(a),e.s=i(a),e.l=s(a),e.opacity=o(a),e+""}}}var MCe=ICe(S2),PCe=ICe($r);function gne(t,e){var r=$r((t=A2(t)).l,(e=A2(e)).l),n=$r(t.a,e.a),i=$r(t.b,e.b),s=$r(t.opacity,e.opacity);return function(o){return t.l=r(o),t.a=n(o),t.b=i(o),t.opacity=s(o),t+""}}function kCe(t){return function(e,r){var n=t((e=zg(e)).h,(r=zg(r)).h),i=$r(e.c,r.c),s=$r(e.l,r.l),o=$r(e.opacity,r.opacity);return function(a){return e.h=n(a),e.c=i(a),e.l=s(a),e.opacity=o(a),e+""}}}var BCe=kCe(S2),qCe=kCe($r);function UCe(t){return function e(r){r=+r;function n(i,s){var o=t((i=L4(i)).h,(s=L4(s)).h),a=$r(i.s,s.s),u=$r(i.l,s.l),l=$r(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,r)),i.opacity=l(c),i+""}}return n.gamma=e,n}(1)}var $Ce=UCe(S2),jCe=UCe($r);function Qg(t,e){e===void 0&&(e=t,t=Ys);for(var r=0,n=e.length-1,i=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(i,i=e[++r]);return function(o){var a=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[a](o-a)}}function HCe(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t(n/(e-1));return r}function Ene(t){return function(){return t}}function P4(t){return+t}var zCe=[0,1];function ps(t){return t}function Ane(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Ene(isNaN(e)?NaN:.5)}function m1t(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function g1t(t,e,r){var n=t[0],i=t[1],s=e[0],o=e[1];return i<n?(n=Ane(i,n),s=r(o,s)):(n=Ane(n,i),s=r(s,o)),function(a){return s(n(a))}}function y1t(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=Ane(t[o],t[o+1]),s[o]=r(e[o],e[o+1]);return function(a){var u=p0(t,a,1,n)-1;return s[u](i[u](a))}}function pf(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Vg(){var t=zCe,e=zCe,r=Ys,n,i,s,o=ps,a,u,l;function c(){var x=Math.min(t.length,e.length);return o!==ps&&(o=m1t(t[0],t[x-1])),a=x>2?y1t:g1t,u=l=null,f}function f(x){return x==null||isNaN(x=+x)?s:(u||(u=a(t.map(n),e,r)))(n(o(x)))}return f.invert=function(x){return o(i((l||(l=a(e,t.map(n),Ks)))(x)))},f.domain=function(x){return arguments.length?(t=Array.from(x,P4),c()):t.slice()},f.range=function(x){return arguments.length?(e=Array.from(x),c()):e.slice()},f.rangeRound=function(x){return e=Array.from(x),r=hf,c()},f.clamp=function(x){return arguments.length?(o=x?!0:ps,c()):o!==ps},f.interpolate=function(x){return arguments.length?(r=x,c()):r},f.unknown=function(x){return arguments.length?(s=x,f):s},function(x,d){return n=x,i=d,c()}}function HR(){return Vg()(ps,ps)}function k4(t,e,r,n){var i=To(t,e,r),s;switch(n=du(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=uR(i,o))&&(n.precision=s),m4(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=lR(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=aR(i))&&(n.precision=s-(n.type==="%")*2);break}}return Zp(n)}function mu(t){var e=t.domain;return t.ticks=function(r){var n=e();return Tg(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return k4(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,s=n.length-1,o=n[i],a=n[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=nR(o,a,r),l===u)return n[i]=o,n[s]=a,e(n);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return t},t}function zR(){var t=HR();return t.copy=function(){return pf(t,zR())},Gn.apply(t,arguments),mu(t)}function GR(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,P4),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return GR(t).unknown(e)},t=arguments.length?Array.from(t,P4):[0,1],mu(r)}function QR(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],s=t[n],o;return s<i&&(o=r,r=n,n=o,o=i,i=s,s=o),t[r]=e.floor(i),t[n]=e.ceil(s),t}function GCe(t){return Math.log(t)}function QCe(t){return Math.exp(t)}function E1t(t){return-Math.log(-t)}function A1t(t){return-Math.exp(-t)}function S1t(t){return isFinite(t)?+("1e"+t):t<0?0:t}function v1t(t){return t===10?S1t:t===Math.E?Math.exp:e=>Math.pow(t,e)}function _1t(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function VCe(t){return(e,r)=>-t(-e,r)}function VR(t){let e=t(GCe,QCe),r=e.domain,n=10,i,s;function o(){return i=_1t(n),s=v1t(n),r()[0]<0?(i=VCe(i),s=VCe(s),t(E1t,A1t)):t(GCe,QCe),e}return e.base=function(a){return arguments.length?(n=+a,o()):n},e.domain=function(a){return arguments.length?(r(a),o()):r()},e.ticks=a=>{let u=r(),l=u[0],c=u[u.length-1],f=c<l;f&&([l,c]=[c,l]);let x=i(l),d=i(c),h,p,m=a==null?10:+a,g=[];if(!(n%1)&&d-x<m){if(x=Math.floor(x),d=Math.ceil(d),l>0){for(;x<=d;++x)for(h=1;h<n;++h)if(p=x<0?h/s(-x):h*s(x),!(p<l)){if(p>c)break;g.push(p)}}else for(;x<=d;++x)for(h=n-1;h>=1;--h)if(p=x>0?h/s(-x):h*s(x),!(p<l)){if(p>c)break;g.push(p)}g.length*2<m&&(g=Tg(l,c,m))}else g=Tg(x,d,Math.min(d-x,m)).map(s);return f?g.reverse():g},e.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=n===10?"s":","),typeof u!="function"&&(!(n%1)&&(u=du(u)).precision==null&&(u.trim=!0),u=Zp(u)),a===1/0)return u;let l=Math.max(1,n*a/e.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*n<n-.5&&(f*=n),f<=l?u(c):""}},e.nice=()=>r(QR(r(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function WR(){let t=VR(Vg()).domain([1,10]);return t.copy=()=>pf(t,WR()).base(t.base()),Gn.apply(t,arguments),t}function WCe(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function YCe(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function YR(t){var e=1,r=t(WCe(e),YCe(e));return r.constant=function(n){return arguments.length?t(WCe(e=+n),YCe(e)):e},mu(r)}function KR(){var t=YR(Vg());return t.copy=function(){return pf(t,KR()).constant(t.constant())},Gn.apply(t,arguments)}function KCe(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function b1t(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function T1t(t){return t<0?-t*t:t*t}function XR(t){var e=t(ps,ps),r=1;function n(){return r===1?t(ps,ps):r===.5?t(b1t,T1t):t(KCe(r),KCe(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},mu(e)}function B4(){var t=XR(Vg());return t.copy=function(){return pf(t,B4()).exponent(t.exponent())},Gn.apply(t,arguments),t}function Sne(){return B4.apply(null,arguments).exponent(.5)}function JR(){var t=[],e=[],r=[],n;function i(){var o=0,a=Math.max(1,e.length);for(r=new Array(a-1);++o<a;)r[o-1]=sR(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?n:e[p0(r,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?r[a-1]:t[0],a<r.length?r[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Gs),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return JR().domain(t).range(e).unknown(n)},Gn.apply(s,arguments)}function ZR(){var t=0,e=1,r=1,n=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[p0(n,u,0,r)]:s}function a(){var u=-1;for(n=new Array(r);++u<r;)n[u]=((u+1)*e-(u-r)*t)/(r+1);return o}return o.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,a()):[t,e]},o.range=function(u){return arguments.length?(r=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[t,n[0]]:l>=r?[n[r-1],e]:[n[l-1],n[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return n.slice()},o.copy=function(){return ZR().domain([t,e]).range(i).unknown(s)},Gn.apply(mu(o),arguments)}function eO(){var t=[.5],e=[0,1],r,n=1;function i(s){return s!=null&&s<=s?e[p0(t,s,0,n)]:r}return i.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return eO().domain(t).range(e).unknown(r)},Gn.apply(i,arguments)}function C1t(t){return new Date(t)}function R1t(t){return t instanceof Date?+t:+new Date(+t)}function sq(t,e,r,n,i,s,o,a,u,l){var c=HR(),f=c.invert,x=c.domain,d=l(".%L"),h=l(":%S"),p=l("%I:%M"),m=l("%I %p"),g=l("%a %d"),y=l("%b %d"),A=l("%B"),S=l("%Y");function T(_){return(u(_)<_?d:a(_)<_?h:o(_)<_?p:s(_)<_?m:n(_)<_?i(_)<_?g:y:r(_)<_?A:S)(_)}return c.invert=function(_){return new Date(f(_))},c.domain=function(_){return arguments.length?x(Array.from(_,R1t)):x().map(C1t)},c.ticks=function(_){var b=x();return t(b[0],b[b.length-1],_??10)},c.tickFormat=function(_,b){return b==null?T:l(b)},c.nice=function(_){var b=x();return(!_||typeof _.range!="function")&&(_=e(b[0],b[b.length-1],_??10)),_?x(QR(b,_)):c},c.copy=function(){return pf(c,sq(t,e,r,n,i,s,o,a,u,l))},c}function oq(){return Gn.apply(sq(yte,Ete,Co,Hx,il,xa,r2,e2,Qs,v4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function aq(){return Gn.apply(sq(mte,gte,Ro,zx,sl,nl,n2,t2,Qs,_4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function uq(){var t=0,e=1,r,n,i,s,o=ps,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-r)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([t,e]=f,r=s(t=+t),n=s(e=+e),i=r===n?0:1/(n-r),l):[t,e]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(x){var d,h;return arguments.length?([d,h]=x,o=f(d,h),l):[o(0),o(1)]}}return l.range=c(Ys),l.rangeRound=c(hf),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,r=f(t),n=f(e),i=r===n?0:1/(n-r),l}}function Kx(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function q4(){var t=mu(uq()(ps));return t.copy=function(){return Kx(t,q4())},cf.apply(t,arguments)}function lq(){var t=VR(uq()).domain([1,10]);return t.copy=function(){return Kx(t,lq()).base(t.base())},cf.apply(t,arguments)}function cq(){var t=YR(uq());return t.copy=function(){return Kx(t,cq()).constant(t.constant())},cf.apply(t,arguments)}function tO(){var t=XR(uq());return t.copy=function(){return Kx(t,tO()).exponent(t.exponent())},cf.apply(t,arguments)}function vne(){return tO.apply(null,arguments).exponent(.5)}function fq(){var t=0,e=.5,r=1,n=1,i,s,o,a,u,l=ps,c,f=!1,x;function d(p){return isNaN(p=+p)?x:(p=.5+((p=+c(p))-s)*(n*p<n*s?a:u),l(f?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e,r]=p,i=c(t=+t),s=c(e=+e),o=c(r=+r),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),n=s<i?-1:1,d):[t,e,r]},d.clamp=function(p){return arguments.length?(f=!!p,d):f},d.interpolator=function(p){return arguments.length?(l=p,d):l};function h(p){return function(m){var g,y,A;return arguments.length?([g,y,A]=m,l=Qg(p,[g,y,A]),d):[l(0),l(.5),l(1)]}}return d.range=h(Ys),d.rangeRound=h(hf),d.unknown=function(p){return arguments.length?(x=p,d):x},function(p){return c=p,i=p(t),s=p(e),o=p(r),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),n=s<i?-1:1,d}}function rO(){var t=mu(fq()(ps));return t.copy=function(){return Kx(t,rO())},cf.apply(t,arguments)}function xq(){var t=VR(fq()).domain([.1,1,10]);return t.copy=function(){return Kx(t,xq()).base(t.base())},cf.apply(t,arguments)}function dq(){var t=YR(fq());return t.copy=function(){return Kx(t,dq()).constant(t.constant())},cf.apply(t,arguments)}function nO(){var t=XR(fq());return t.copy=function(){return Kx(t,nO()).exponent(t.exponent())},cf.apply(t,arguments)}function _ne(){return nO.apply(null,arguments).exponent(.5)}function iO(t,e,r){let n=t-e+r*2;return t?n>0?n:1:0}var D1t="identity",Yg="linear",mf="log",U4="pow",$4="sqrt",sO="symlog",v2="time",_2="utc",A0="sequential",Kg="diverging",Wg="quantile",oO="quantize",aO="threshold",pq="ordinal",mq="point",Tne="band",gq="bin-ordinal",li="continuous",uO="discrete",lO="discretizing",fl="interpolating",Cne="temporal";function N1t(t){return function(e){let r=e[0],n=e[1],i;return n<r&&(i=r,r=n,n=i),[t.invert(r),t.invert(n)]}}function F1t(t){return function(e){let r=t.range(),n=e[0],i=e[1],s=-1,o,a,u,l;for(i<n&&(a=n,n=i,i=a),u=0,l=r.length;u<l;++u)r[u]>=n&&r[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return n=t.invertExtent(r[s]),i=t.invertExtent(r[o]),[n[0]===void 0?n[1]:n[0],i[1]===void 0?i[0]:i[1]]}}function Rne(){let t=qg().unknown(void 0),e=t.domain,r=t.range,n=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete t.unknown;function c(){let f=e().length,x=n[1]<n[0],d=n[1-x],h=iO(f,a,u),p=n[x-0];i=(d-p)/(h||1),o&&(i=Math.floor(i)),p+=(d-p-i*(f-a))*l,s=i*(1-a),o&&(p=Math.round(p),s=Math.round(s));let m=Dn(f).map(g=>p+i*g);return r(x?m.reverse():m)}return t.domain=function(f){return arguments.length?(e(f),c()):e()},t.range=function(f){return arguments.length?(n=[+f[0],+f[1]],c()):n.slice()},t.rangeRound=function(f){return n=[+f[0],+f[1]],o=!0,c()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(f){return arguments.length?(o=!!f,c()):o},t.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},t.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},t.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},t.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},t.invertRange=function(f){if(f[0]==null||f[1]==null)return;let x=n[1]<n[0],d=x?r().reverse():r(),h=d.length-1,p=+f[0],m=+f[1],g,y,A;if(!(p!==p||m!==m)&&(m<p&&(A=p,p=m,m=A),!(m<d[0]||p>n[1-x])))return g=Math.max(0,bg(d,p)-1),y=p===m?g:bg(d,m)-1,p-d[g]>s+1e-10&&++g,x&&(A=g,g=h-y,y=h-A),g>y?void 0:e().slice(g,y+1)},t.invert=function(f){let x=t.invertRange([f,f]);return x&&x[0]},t.copy=function(){return Rne().domain(e()).range(n).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function eRe(t){let e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return eRe(e())},t}function w1t(){return eRe(Rne().paddingInner(1))}var L1t=Array.prototype.map;function I1t(t){return L1t.call(t,jn)}var M1t=Array.prototype.slice;function tRe(){let t=[],e=[];function r(n){return n==null||n!==n?void 0:e[(p0(t,n)-1)%e.length]}return r.domain=function(n){return arguments.length?(t=I1t(n),r):t.slice()},r.range=function(n){return arguments.length?(e=M1t.call(n),r):e.slice()},r.tickFormat=function(n,i){return k4(t[0],xt(t),n??10,i)},r.copy=function(){return tRe().domain(r.domain()).range(r.range())},r}var hq=new Map,rRe=Symbol("vega_scale");function One(t){return t[rRe]=!0,t}function nRe(t){return t&&t[rRe]===!0}function P1t(t,e,r){let n=function(){let s=e();return s.invertRange||(s.invertRange=s.invert?N1t(s):s.invertExtent?F1t(s):void 0),s.type=t,One(s)};return n.metadata=Bi(le(r)),n}function Mt(t,e,r){return arguments.length>1?(hq.set(t,P1t(t,e,r)),this):Dne(t)?hq.get(t):void 0}Mt(D1t,GR);Mt(Yg,zR,li);Mt(mf,WR,[li,mf]);Mt(U4,B4,li);Mt($4,Sne,li);Mt(sO,KR,li);Mt(v2,oq,[li,Cne]);Mt(_2,aq,[li,Cne]);Mt(A0,q4,[li,fl]);Mt(`${A0}-${Yg}`,q4,[li,fl]);Mt(`${A0}-${mf}`,lq,[li,fl,mf]);Mt(`${A0}-${U4}`,tO,[li,fl]);Mt(`${A0}-${$4}`,vne,[li,fl]);Mt(`${A0}-${sO}`,cq,[li,fl]);Mt(`${Kg}-${Yg}`,rO,[li,fl]);Mt(`${Kg}-${mf}`,xq,[li,fl,mf]);Mt(`${Kg}-${U4}`,nO,[li,fl]);Mt(`${Kg}-${$4}`,_ne,[li,fl]);Mt(`${Kg}-${sO}`,dq,[li,fl]);Mt(Wg,JR,[lO,Wg]);Mt(oO,ZR,lO);Mt(aO,eO,lO);Mt(gq,tRe,[uO,lO]);Mt(pq,qg,uO);Mt(Tne,Rne,uO);Mt(mq,w1t,uO);function Dne(t){return hq.has(t)}function Xg(t,e){let r=hq.get(t);return r&&r.metadata[e]}function cO(t){return Xg(t,li)}function b2(t){return Xg(t,uO)}function yq(t){return Xg(t,lO)}function Nne(t){return Xg(t,mf)}function k1t(t){return Xg(t,Cne)}function Fne(t){return Xg(t,fl)}function wne(t){return Xg(t,Wg)}var B1t=["clamp","base","constant","exponent"];function Lne(t,e){let r=e[0],n=xt(e)-r;return function(i){return t(r+i*n)}}function fO(t,e,r){return Qg(Aq(e||"rgb",r),t)}function Ine(t,e){let r=new Array(e),n=e+1;for(let i=0;i<e;)r[i]=t(++i/n);return r}function Eq(t,e,r){let n=r-e,i,s,o;return!n||!Number.isFinite(n)?Zr(.5):(i=(s=t.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=Mt(s)().domain([e,r]).range([0,1]),B1t.forEach(a=>t[a]?o[a](t[a]()):0),o)}function Aq(t,e){let r=yne[q1t(t)];return e!=null&&r&&r.gamma?r.gamma(e):r}function q1t(t){return"interpolate"+t.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}var U1t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},$1t={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function iRe(t){let e=t.length/6|0,r=new Array(e);for(let n=0;n<e;)r[n]="#"+t.slice(n*6,++n*6);return r}function sRe(t,e){for(let r in t)Sq(r,e(t[r]))}var XCe={};sRe($1t,iRe);sRe(U1t,t=>fO(iRe(t)));function Sq(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(XCe[t]=e,this):XCe[t]}var xO="symbol",j1t="discrete",oRe="gradient",H1t=t=>j(t)?t.map(e=>String(e)):String(t),z1t=(t,e)=>t[1]-e[1],G1t=(t,e)=>e[1]-t[1];function vq(t,e,r){let n;return Ct(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),r!=null&&(e=Math.min(e,Math.floor(Gp(t.domain())/r||1)))),Se(e)&&(n=e.step,e=e.interval),he(e)&&(e=t.type===v2?o2(e):t.type==_2?a2(e):W("Only time and utc scales accept interval strings."),n&&(e=e.every(n))),e}function Mne(t,e,r){let n=t.range(),i=n[0],s=xt(n),o=z1t;if(i>s&&(n=s,s=i,i=n,o=G1t),i=Math.floor(i),s=Math.ceil(s),e=e.map(a=>[a,t(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),r>0&&e.length>1){let a=[e[0],xt(e)];for(;e.length>r&&e.length>=3;)e=e.filter((u,l)=>!(l%2));e.length<3&&(e=a)}return e}function _q(t,e){return t.bins?Mne(t,t.bins):t.ticks?t.ticks(e):t.domain()}function Pne(t,e,r,n,i,s){let o=e.type,a=H1t;if(o===v2||i===v2)a=t.timeFormat(n);else if(o===_2||i===_2)a=t.utcFormat(n);else if(Nne(o)){let u=t.formatFloat(n);if(s||e.bins)a=u;else{let l=aRe(e,r,!1);a=c=>l(c)?u(c):""}}else if(e.tickFormat){let u=e.domain();a=t.formatSpan(u[0],u[u.length-1],r,n)}else n&&(a=t.format(n));return a}function aRe(t,e,r){let n=_q(t,e),i=t.base(),s=Math.log(i),o=Math.max(1,i*e/n.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return r?n.filter(a):a}var bne={[Wg]:"quantiles",[oO]:"thresholds",[aO]:"domain"},uRe={[Wg]:"quantiles",[oO]:"domain"};function kne(t,e){return t.bins?W1t(t.bins):t.type===mf?aRe(t,e,!0):bne[t.type]?V1t(t[bne[t.type]]()):_q(t,e)}function Q1t(t,e,r){let n=e[uRe[e.type]](),i=n.length,s=i>1?n[1]-n[0]:n[0],o;for(o=1;o<i;++o)s=Math.min(s,n[o]-n[o-1]);return t.formatSpan(0,s,3*10,r)}function V1t(t){let e=[-1/0].concat(t);return e.max=1/0,e}function W1t(t){let e=t.slice(0,-1);return e.max=xt(t),e}var Y1t=t=>bne[t.type]||t.bins;function Bne(t,e,r,n,i,s,o){let a=uRe[e.type]&&s!==v2&&s!==_2?Q1t(t,e,i):Pne(t,e,r,i,s,o);return n===xO&&Y1t(e)?K1t(a):n===j1t?X1t(a):J1t(a)}var K1t=t=>(e,r,n)=>{let i=JCe(n[r+1],JCe(n.max,1/0)),s=ZCe(e,t),o=ZCe(i,t);return s&&o?s+" \u2013 "+o:o?"< "+o:"\u2265 "+s},JCe=(t,e)=>t??e,X1t=t=>(e,r)=>r?t(e):null,J1t=t=>e=>t(e),ZCe=(t,e)=>Number.isFinite(t)?e(t):null;function lRe(t){let e=t.domain(),r=e.length-1,n=+e[0],i=+xt(e),s=i-n;if(t.type===aO){let o=r?s/r:.1;n-=o,i+=o,s=i-n}return o=>(o-n)/s}function Z1t(t,e,r,n){let i=n||e.type;return he(r)&&k1t(i)&&(r=r.replace(/%a/g,"%A").replace(/%b/g,"%B")),!r&&i===v2?t.timeFormat("%A, %d %B %Y, %X"):!r&&i===_2?t.utcFormat("%A, %d %B %Y, %X UTC"):Bne(t,e,5,null,r,n,!0)}function qne(t,e,r){r=r||{};let n=Math.max(3,r.maxlen||7),i=Z1t(t,e,r.format,r.formatType);if(yq(e.type)){let s=kne(e).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(b2(e.type)){let s=e.domain(),o=s.length,a=o>n?s.slice(0,n-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{let s=e.domain();return`values from ${i(s[0])} to ${i(xt(s))}`}}var emt=0;var wq="p_";function iie(t){return t&&t.gradient}function MRe(t,e,r){let n=t.gradient,i=t.id,s=n==="radial"?wq:"";return i||(i=t.id="gradient_"+emt++,n==="radial"?(t.x1=gf(t.x1,.5),t.y1=gf(t.y1,.5),t.r1=gf(t.r1,0),t.x2=gf(t.x2,.5),t.y2=gf(t.y2,.5),t.r2=gf(t.r2,.5),s=wq):(t.x1=gf(t.x1,0),t.y1=gf(t.y1,0),t.x2=gf(t.x2,1),t.y2=gf(t.y2,0))),e[i]=t,"url("+(r||"")+"#"+s+i+")"}function gf(t,e){return t??e}function PRe(t,e){var r=[],n;return n={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(i,s){return r.push({offset:i,color:s}),n}}}var cRe={basis:{curve:$re},"basis-closed":{curve:jre},"basis-open":{curve:Hre},bundle:{curve:zre,tension:"beta",value:.85},cardinal:{curve:Gre,tension:"tension",value:0},"cardinal-open":{curve:Vre,tension:"tension",value:0},"cardinal-closed":{curve:Qre,tension:"tension",value:0},"catmull-rom":{curve:Wre,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Yre,tension:"alpha",value:.5},"catmull-rom-open":{curve:Kre,tension:"alpha",value:.5},linear:{curve:Bg},"linear-closed":{curve:Xre},monotone:{horizontal:ene,vertical:Zre},natural:{curve:tne},step:{curve:rne},"step-after":{curve:ine},"step-before":{curve:nne}};function kRe(t,e,r){var n=Fe(cRe,t)&&cRe[t],i=null;return n&&(i=n.curve||n[e||"vertical"],n.tension&&r!=null&&(i=i[n.tension](r))),i}var tmt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},rmt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,nmt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,imt=/^((\s+,?\s*)|(,\s*))/,smt=/^[01]/;function $q(t){let e=[];return(t.match(rmt)||[]).forEach(n=>{let i=n[0],s=i.toLowerCase(),o=tmt[s],a=omt(s,o,n.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(e.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)e.push([i,...a.slice(l,l+o)])}}),e}function omt(t,e,r){let n=[];for(let i=0;e&&i<r.length;)for(let s=0;s<e;++s){let o=t==="a"&&(s===3||s===4)?smt:nmt,a=r.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,n.push(+a[0]);let u=r.slice(i).match(imt);u!==null&&(i+=u[0].length)}return n}var D2=Math.PI/180,amt=1e-14,Jg=Math.PI/2,yf=Math.PI*2,j4=Math.sqrt(3)/2,Une={},$ne={},BRe=[].join;function umt(t,e,r,n,i,s,o,a,u){let l=BRe.call(arguments);if(Une[l])return Une[l];let c=o*D2,f=Math.sin(c),x=Math.cos(c);r=Math.abs(r),n=Math.abs(n);let d=x*(a-t)*.5+f*(u-e)*.5,h=x*(u-e)*.5-f*(a-t)*.5,p=d*d/(r*r)+h*h/(n*n);p>1&&(p=Math.sqrt(p),r*=p,n*=p);let m=x/r,g=f/r,y=-f/n,A=x/n,S=m*a+g*u,T=y*a+A*u,_=m*t+g*e,b=y*t+A*e,O=1/((_-S)*(_-S)+(b-T)*(b-T))-.25;O<0&&(O=0);let N=Math.sqrt(O);s==i&&(N=-N);let F=.5*(S+_)-N*(b-T),$=.5*(T+b)+N*(_-S),q=Math.atan2(T-$,S-F),P=Math.atan2(b-$,_-F)-q;P<0&&s===1?P+=yf:P>0&&s===0&&(P-=yf);let te=Math.ceil(Math.abs(P/(Jg+.001))),me=[];for(let Ce=0;Ce<te;++Ce){let Pe=q+Ce*P/te,ct=q+(Ce+1)*P/te;me[Ce]=[F,$,Pe,ct,r,n,f,x]}return Une[l]=me}function lmt(t){let e=BRe.call(t);if($ne[e])return $ne[e];var r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],u=t[6],l=t[7];let c=l*o,f=-u*a,x=u*o,d=l*a,h=Math.cos(i),p=Math.sin(i),m=Math.cos(s),g=Math.sin(s),y=.5*(s-i),A=Math.sin(y*.5),S=8/3*A*A/Math.sin(y),T=r+h-S*p,_=n+p+S*h,b=r+m,R=n+g,O=b+S*g,N=R-S*m;return $ne[e]=[c*T+f*_,x*T+d*_,c*O+f*N,x*O+d*N,c*b+f*R,x*b+d*R]}var xl=["l",0,0,0,0,0,0,0];function cmt(t,e,r){let n=xl[0]=t[0];if(n==="a"||n==="A")xl[1]=e*t[1],xl[2]=r*t[2],xl[3]=t[3],xl[4]=t[4],xl[5]=t[5],xl[6]=e*t[6],xl[7]=r*t[7];else if(n==="h"||n==="H")xl[1]=e*t[1];else if(n==="v"||n==="V")xl[1]=r*t[1];else for(var i=1,s=t.length;i<s;++i)xl[i]=(i%2==1?e:r)*t[i];return xl}function EO(t,e,r,n,i,s){var o,a=null,u=0,l=0,c=0,f=0,x,d,h,p,m=0,g=0;r==null&&(r=0),n==null&&(n=0),i==null&&(i=1),s==null&&(s=i),t.beginPath&&t.beginPath();for(var y=0,A=e.length;y<A;++y){switch(o=e[y],(i!==1||s!==1)&&(o=cmt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],t.lineTo(u+r,l+n);break;case"L":u=o[1],l=o[2],t.lineTo(u+r,l+n);break;case"h":u+=o[1],t.lineTo(u+r,l+n);break;case"H":u=o[1],t.lineTo(u+r,l+n);break;case"v":l+=o[1],t.lineTo(u+r,l+n);break;case"V":l=o[1],t.lineTo(u+r,l+n);break;case"m":u+=o[1],l+=o[2],m=u,g=l,t.moveTo(u+r,l+n);break;case"M":u=o[1],l=o[2],m=u,g=l,t.moveTo(u+r,l+n);break;case"c":x=u+o[5],d=l+o[6],c=u+o[3],f=l+o[4],t.bezierCurveTo(u+o[1]+r,l+o[2]+n,c+r,f+n,x+r,d+n),u=x,l=d;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],t.bezierCurveTo(o[1]+r,o[2]+n,c+r,f+n,u+r,l+n);break;case"s":x=u+o[3],d=l+o[4],c=2*u-c,f=2*l-f,t.bezierCurveTo(c+r,f+n,u+o[1]+r,l+o[2]+n,x+r,d+n),c=u+o[1],f=l+o[2],u=x,l=d;break;case"S":x=o[3],d=o[4],c=2*u-c,f=2*l-f,t.bezierCurveTo(c+r,f+n,o[1]+r,o[2]+n,x+r,d+n),u=x,l=d,c=o[1],f=o[2];break;case"q":x=u+o[3],d=l+o[4],c=u+o[1],f=l+o[2],t.quadraticCurveTo(c+r,f+n,x+r,d+n),u=x,l=d;break;case"Q":x=o[3],d=o[4],t.quadraticCurveTo(o[1]+r,o[2]+n,x+r,d+n),u=x,l=d,c=o[1],f=o[2];break;case"t":x=u+o[1],d=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-h,f=2*l-p):a[0]==="q"&&(c=2*u-c,f=2*l-f),h=c,p=f,t.quadraticCurveTo(c+r,f+n,x+r,d+n),u=x,l=d,c=u+o[1],f=l+o[2];break;case"T":x=o[1],d=o[2],c=2*u-c,f=2*l-f,t.quadraticCurveTo(c+r,f+n,x+r,d+n),u=x,l=d;break;case"a":fRe(t,u+r,l+n,[o[1],o[2],o[3],o[4],o[5],o[6]+u+r,o[7]+l+n]),u+=o[6],l+=o[7];break;case"A":fRe(t,u+r,l+n,[o[1],o[2],o[3],o[4],o[5],o[6]+r,o[7]+n]),u=o[6],l=o[7];break;case"z":case"Z":u=m,l=g,t.closePath();break}a=o}}function fRe(t,e,r,n){let i=umt(n[5],n[6],n[0],n[1],n[3],n[4],n[2],e,r);for(let s=0;s<i.length;++s){let o=lmt(i[s]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var xRe=.5773502691896257,dRe={circle:{draw:function(t,e){let r=Math.sqrt(e)/2;t.moveTo(r,0),t.arc(0,0,r,0,yf)}},cross:{draw:function(t,e){var r=Math.sqrt(e)/2,n=r/2.5;t.moveTo(-r,-n),t.lineTo(-r,n),t.lineTo(-n,n),t.lineTo(-n,r),t.lineTo(n,r),t.lineTo(n,n),t.lineTo(r,n),t.lineTo(r,-n),t.lineTo(n,-n),t.lineTo(n,-r),t.lineTo(-n,-r),t.lineTo(-n,-n),t.closePath()}},diamond:{draw:function(t,e){let r=Math.sqrt(e)/2;t.moveTo(-r,0),t.lineTo(0,-r),t.lineTo(r,0),t.lineTo(0,r),t.closePath()}},square:{draw:function(t,e){var r=Math.sqrt(e),n=-r/2;t.rect(n,n,r,r)}},arrow:{draw:function(t,e){var r=Math.sqrt(e)/2,n=r/7,i=r/2.5,s=r/8;t.moveTo(-n,r),t.lineTo(n,r),t.lineTo(n,-s),t.lineTo(i,-s),t.lineTo(0,-r),t.lineTo(-i,-s),t.lineTo(-n,-s),t.closePath()}},wedge:{draw:function(t,e){var r=Math.sqrt(e)/2,n=j4*r,i=n-r*xRe,s=r/4;t.moveTo(0,-n-i),t.lineTo(-s,n-i),t.lineTo(s,n-i),t.closePath()}},triangle:{draw:function(t,e){var r=Math.sqrt(e)/2,n=j4*r,i=n-r*xRe;t.moveTo(0,-n-i),t.lineTo(-r,n-i),t.lineTo(r,n-i),t.closePath()}},"triangle-up":{draw:function(t,e){var r=Math.sqrt(e)/2,n=j4*r;t.moveTo(0,-n),t.lineTo(-r,n),t.lineTo(r,n),t.closePath()}},"triangle-down":{draw:function(t,e){var r=Math.sqrt(e)/2,n=j4*r;t.moveTo(0,n),t.lineTo(-r,-n),t.lineTo(r,-n),t.closePath()}},"triangle-right":{draw:function(t,e){var r=Math.sqrt(e)/2,n=j4*r;t.moveTo(n,0),t.lineTo(-n,-r),t.lineTo(-n,r),t.closePath()}},"triangle-left":{draw:function(t,e){var r=Math.sqrt(e)/2,n=j4*r;t.moveTo(-n,0),t.lineTo(n,-r),t.lineTo(n,r),t.closePath()}},stroke:{draw:function(t,e){let r=Math.sqrt(e)/2;t.moveTo(-r,0),t.lineTo(r,0)}}};function fmt(t){return Fe(dRe,t)?dRe[t]:xmt(t)}var jne={};function xmt(t){if(!Fe(jne,t)){let e=$q(t);jne[t]={draw:function(r,n){EO(r,e,0,0,Math.sqrt(n)/2)}}}return jne[t]}var T2=.448084975506;function dmt(t){return t.x}function hmt(t){return t.y}function pmt(t){return t.width}function mmt(t){return t.height}function Xx(t){return typeof t=="function"?t:()=>+t}function bq(t,e,r){return Math.max(e,Math.min(t,r))}function gmt(){var t=dmt,e=hmt,r=pmt,n=mmt,i=Xx(0),s=i,o=i,a=i,u=null;function l(c,f,x){var d,h=f??+t.call(this,c),p=x??+e.call(this,c),m=+r.call(this,c),g=+n.call(this,c),y=Math.min(m,g)/2,A=bq(+i.call(this,c),0,y),S=bq(+s.call(this,c),0,y),T=bq(+o.call(this,c),0,y),_=bq(+a.call(this,c),0,y);if(u||(u=d=MR()),A<=0&&S<=0&&T<=0&&_<=0)u.rect(h,p,m,g);else{var b=h+m,R=p+g;u.moveTo(h+A,p),u.lineTo(b-S,p),u.bezierCurveTo(b-T2*S,p,b,p+T2*S,b,p+S),u.lineTo(b,R-_),u.bezierCurveTo(b,R-T2*_,b-T2*_,R,b-_,R),u.lineTo(h+T,R),u.bezierCurveTo(h+T2*T,R,h,R-T2*T,h,R-T),u.lineTo(h,p+A),u.bezierCurveTo(h,p+T2*A,h+T2*A,p,h+A,p),u.closePath()}if(d)return u=null,d+""||null}return l.x=function(c){return arguments.length?(t=Xx(c),l):t},l.y=function(c){return arguments.length?(e=Xx(c),l):e},l.width=function(c){return arguments.length?(r=Xx(c),l):r},l.height=function(c){return arguments.length?(n=Xx(c),l):n},l.cornerRadius=function(c,f,x,d){return arguments.length?(i=Xx(c),s=f!=null?Xx(f):i,a=x!=null?Xx(x):i,o=d!=null?Xx(d):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function ymt(){var t,e,r,n,i=null,s,o,a,u;function l(f,x,d){let h=d/2;if(s){var p=a-x,m=f-o;if(p||m){var g=Math.sqrt(p*p+m*m),y=(p/=g)*u,A=(m/=g)*u,S=Math.atan2(m,p);i.moveTo(o-y,a-A),i.lineTo(f-p*h,x-m*h),i.arc(f,x,h,S-Math.PI,S),i.lineTo(o+y,a+A),i.arc(o,a,u,S,S+Math.PI)}else i.arc(f,x,h,0,yf);i.closePath()}else s=1;o=f,a=x,u=h}function c(f){var x,d=f.length,h,p=!1,m;for(i==null&&(i=m=MR()),x=0;x<=d;++x)!(x<d&&n(h=f[x],x,f))===p&&(p=!p)&&(s=0),p&&l(+t(h,x,f),+e(h,x,f),+r(h,x,f));if(m)return i=null,m+""||null}return c.x=function(f){return arguments.length?(t=f,c):t},c.y=function(f){return arguments.length?(e=f,c):e},c.size=function(f){return arguments.length?(r=f,c):r},c.defined=function(f){return arguments.length?(n=f,c):n},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function _O(t,e){return t??e}var bO=t=>t.x||0,TO=t=>t.y||0,Emt=t=>t.width||0,Amt=t=>t.height||0,Smt=t=>(t.x||0)+(t.width||0),vmt=t=>(t.y||0)+(t.height||0),_mt=t=>t.startAngle||0,bmt=t=>t.endAngle||0,Tmt=t=>t.padAngle||0,Cmt=t=>t.innerRadius||0,Rmt=t=>t.outerRadius||0,Omt=t=>t.cornerRadius||0,Dmt=t=>_O(t.cornerRadiusTopLeft,t.cornerRadius)||0,Nmt=t=>_O(t.cornerRadiusTopRight,t.cornerRadius)||0,Fmt=t=>_O(t.cornerRadiusBottomRight,t.cornerRadius)||0,wmt=t=>_O(t.cornerRadiusBottomLeft,t.cornerRadius)||0,Lmt=t=>_O(t.size,64),Imt=t=>t.size||1,jq=t=>t.defined!==!1,Mmt=t=>fmt(t.shape||"circle"),Pmt=Ure().startAngle(_mt).endAngle(bmt).padAngle(Tmt).innerRadius(Cmt).outerRadius(Rmt).cornerRadius(Omt),kmt=kB().x(bO).y1(TO).y0(vmt).defined(jq),Bmt=kB().y(TO).x1(bO).x0(Smt).defined(jq),qmt=PR().x(bO).y(TO).defined(jq),Umt=gmt().x(bO).y(TO).width(Emt).height(Amt).cornerRadius(Dmt,Nmt,Fmt,wmt),$mt=BB().type(Mmt).size(Lmt),jmt=ymt().x(bO).y(TO).defined(jq).size(Imt);function sie(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function Hmt(t,e){return Pmt.context(t)(e)}function zmt(t,e){let r=e[0],n=r.interpolate||"linear";return(r.orient==="horizontal"?Bmt:kmt).curve(kRe(n,r.orient,r.tension)).context(t)(e)}function Gmt(t,e){let r=e[0],n=r.interpolate||"linear";return qmt.curve(kRe(n,r.orient,r.tension)).context(t)(e)}function Q4(t,e,r,n){return Umt.context(t)(e,r,n)}function Qmt(t,e){return(e.mark.shape||e.shape).context(t)(e)}function Vmt(t,e){return $mt.context(t)(e)}function Wmt(t,e){return jmt.context(t)(e)}var Ymt=1;function oie(t,e,r){var n=e.clip,i=t._defs,s=e.clip_id||(e.clip_id="clip"+Ymt++),o=i.clipping[s]||(i.clipping[s]={id:s});return Je(n)?o.path=n(null):sie(r)?o.path=Q4(null,r,0,0):(o.width=r.width||0,o.height=r.height||0),"url(#"+s+")"}function Nn(t){this.clear(),t&&this.union(t)}Nn.prototype={clone(){return new Nn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,r,n){return r<t?(this.x2=t,this.x1=r):(this.x1=t,this.x2=r),n<e?(this.y2=e,this.y1=n):(this.y1=e,this.y2=n),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,r){let n=this.rotatedPoints(t,e,r);return this.clear().add(n[0],n[1]).add(n[2],n[3]).add(n[4],n[5]).add(n[6],n[7])},rotatedPoints(t,e,r){var{x1:n,y1:i,x2:s,y2:o}=this,a=Math.cos(t),u=Math.sin(t),l=e-e*a+r*u,c=r-e*u-r*a;return[a*n-u*i+l,u*n+a*i+c,a*n-u*o+l,u*n+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Hq(t){this.mark=t,this.bounds=this.bounds||new Nn}function zq(t){Hq.call(this,t),this.items=this.items||[]}ce(zq,Hq);function qRe(t){this._pending=0,this._loader=t||vR()}function hRe(t){t._pending+=1}function dO(t){t._pending-=1}qRe.prototype={pending(){return this._pending},sanitizeURL(t){let e=this;return hRe(e),e._loader.sanitize(t,{context:"href"}).then(r=>(dO(e),r)).catch(()=>(dO(e),null))},loadImage(t){let e=this,r=XTe();return hRe(e),e._loader.sanitize(t,{context:"image"}).then(n=>{let i=n.href;if(!i||!r)throw{url:i};let s=new r,o=Fe(n,"crossOrigin")?n.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>dO(e),s.onerror=()=>dO(e),s.src=i,s}).catch(n=>(dO(e),{complete:!1,width:0,height:0,src:n&&n.url||""}))},ready(){let t=this;return new Promise(e=>{function r(n){t.pending()?setTimeout(()=>{r(!0)},10):e(n)}r(!1)})}};function Zx(t,e,r){if(e.stroke&&e.opacity!==0&&e.strokeOpacity!==0){let n=e.strokeWidth!=null?+e.strokeWidth:1;t.expand(n+(r?Kmt(e,n):0))}return t}function Kmt(t,e){return t.strokeJoin&&t.strokeJoin!=="miter"?0:e}var Xmt=yf-1e-8,Gq,Tq,Cq,t3,Vne,Rq,Wne,Yne,C2=(t,e)=>Gq.add(t,e),Oq=(t,e)=>C2(Tq=t,Cq=e),pRe=t=>C2(t,Gq.y1),mRe=t=>C2(Gq.x1,t),Zg=(t,e)=>Vne*t+Wne*e,e3=(t,e)=>Rq*t+Yne*e,Hne=(t,e)=>C2(Zg(t,e),e3(t,e)),zne=(t,e)=>Oq(Zg(t,e),e3(t,e));function Qq(t,e){return Gq=t,e?(t3=e*D2,Vne=Yne=Math.cos(t3),Rq=Math.sin(t3),Wne=-Rq):(Vne=Yne=1,t3=Rq=Wne=0),Jmt}var Jmt={beginPath(){},closePath(){},moveTo:zne,lineTo:zne,rect(t,e,r,n){t3?(Hne(t+r,e),Hne(t+r,e+n),Hne(t,e+n),zne(t,e)):(C2(t+r,e+n),Oq(t,e))},quadraticCurveTo(t,e,r,n){let i=Zg(t,e),s=e3(t,e),o=Zg(r,n),a=e3(r,n);gRe(Tq,i,o,pRe),gRe(Cq,s,a,mRe),Oq(o,a)},bezierCurveTo(t,e,r,n,i,s){let o=Zg(t,e),a=e3(t,e),u=Zg(r,n),l=e3(r,n),c=Zg(i,s),f=e3(i,s);yRe(Tq,o,u,c,pRe),yRe(Cq,a,l,f,mRe),Oq(c,f)},arc(t,e,r,n,i,s){if(n+=t3,i+=t3,Tq=r*Math.cos(i)+t,Cq=r*Math.sin(i)+e,Math.abs(i-n)>Xmt)C2(t-r,e-r),C2(t+r,e+r);else{let o=l=>C2(r*Math.cos(l)+t,r*Math.sin(l)+e),a,u;if(o(n),o(i),i!==n)if(n=n%yf,n<0&&(n+=yf),i=i%yf,i<0&&(i+=yf),i<n&&(s=!s,a=n,n=i,i=a),s)for(i-=yf,a=n-n%Jg,u=0;u<4&&a>i;++u,a-=Jg)o(a);else for(a=n-n%Jg+Jg,u=0;u<4&&a<i;++u,a=a+Jg)o(a)}}};function gRe(t,e,r,n){let i=(t-e)/(t+r-2*e);0<i&&i<1&&n(t+(e-t)*i)}function yRe(t,e,r,n,i){let s=n-t+3*e-3*r,o=t+r-2*e,a=t-e,u=0,l=0,c;Math.abs(s)>amt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(ERe(u,t,e,r,n)),0<l&&l<1&&i(ERe(l,t,e,r,n))}function ERe(t,e,r,n,i){let s=1-t,o=s*s,a=t*t;return o*s*e+3*o*t*r+3*s*a*n+a*t*i}var O2=(O2=ll(1,1))?O2.getContext("2d"):null,Kne=new Nn;function URe(t){return function(e,r){if(!O2)return!0;t(O2,e),Kne.clear().union(e.bounds).intersect(r).round();let{x1:n,y1:i,x2:s,y2:o}=Kne;for(let a=i;a<=o;++a)for(let u=n;u<=s;++u)if(O2.isPointInPath(u,a))return!0;return!1}}function $Re(t,e){return e.contains(t.x||0,t.y||0)}function jRe(t,e){let r=t.x||0,n=t.y||0,i=t.width||0,s=t.height||0;return e.intersects(Kne.set(r,n,r+i,n+s))}function Zmt(t,e){let r=t.x||0,n=t.y||0,i=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:n;return pO(e,r,n,i,s)}function pO(t,e,r,n,i){let{x1:s,y1:o,x2:a,y2:u}=t,l=n-e,c=i-r,f=0,x=1,d,h,p,m;for(m=0;m<4;++m){if(m===0&&(d=-l,h=-(s-e)),m===1&&(d=l,h=a-e),m===2&&(d=-c,h=-(o-r)),m===3&&(d=c,h=u-r),Math.abs(d)<1e-10&&h<0)return!1;if(p=h/d,d<0){if(p>x)return!1;p>f&&(f=p)}else if(d>0){if(p<f)return!1;p<x&&(x=p)}}return!0}function H4(t,e){t.globalCompositeOperation=e.blend||"source-over"}function S0(t,e){return t??e}function ARe(t,e){let r=e.length;for(let n=0;n<r;++n)t.addColorStop(e[n].offset,e[n].color);return t}function egt(t,e,r){let n=r.width(),i=r.height(),s;if(e.gradient==="radial")s=t.createRadialGradient(r.x1+S0(e.x1,.5)*n,r.y1+S0(e.y1,.5)*i,Math.max(n,i)*S0(e.r1,0),r.x1+S0(e.x2,.5)*n,r.y1+S0(e.y2,.5)*i,Math.max(n,i)*S0(e.r2,.5));else{let o=S0(e.x1,0),a=S0(e.y1,0),u=S0(e.x2,1),l=S0(e.y2,0);if(o===u||a===l||n===i)s=t.createLinearGradient(r.x1+o*n,r.y1+a*i,r.x1+u*n,r.y1+l*i);else{let c=ll(Math.ceil(n),Math.ceil(i)),f=c.getContext("2d");return f.scale(n,i),f.fillStyle=ARe(f.createLinearGradient(o,a,u,l),e.stops),f.fillRect(0,0,n,i),t.createPattern(c,"no-repeat")}}return ARe(s,e.stops)}function HRe(t,e,r){return iie(r)?egt(t,r,e.bounds):r}function Lq(t,e,r){return r*=e.fillOpacity==null?1:e.fillOpacity,r>0?(t.globalAlpha=r,t.fillStyle=HRe(t,e,e.fill),!0):!1}var tgt=[];function z4(t,e,r){var n=(n=e.strokeWidth)!=null?n:1;return n<=0?!1:(r*=e.strokeOpacity==null?1:e.strokeOpacity,r>0?(t.globalAlpha=r,t.strokeStyle=HRe(t,e,e.stroke),t.lineWidth=n,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||tgt),t.lineDashOffset=e.strokeDashOffset||0),!0):!1)}function rgt(t,e){return t.zindex-e.zindex||t.index-e.index}function zRe(t){if(!t.zdirty)return t.zitems;var e=t.items,r=[],n,i,s;for(i=0,s=e.length;i<s;++i)n=e[i],n.index=i,n.zindex&&r.push(n);return t.zdirty=!1,t.zitems=r.sort(rgt)}function Af(t,e){var r=t.items,n,i;if(!r||!r.length)return;let s=zRe(t);if(s&&s.length){for(n=0,i=r.length;n<i;++n)r[n].zindex||e(r[n]);r=s}for(n=0,i=r.length;n<i;++n)e(r[n])}function Xne(t,e){var r=t.items,n,i;if(!r||!r.length)return null;let s=zRe(t);for(s&&s.length&&(r=s),i=r.length;--i>=0;)if(n=e(r[i]))return n;if(r===s){for(r=t.items,i=r.length;--i>=0;)if(!r[i].zindex&&(n=e(r[i])))return n}return null}function aie(t){return function(e,r,n){Af(r,i=>{(!n||n.intersects(i.bounds))&&GRe(t,e,i,i)})}}function ngt(t){return function(e,r,n){r.items.length&&(!n||n.intersects(r.bounds))&&GRe(t,e,r.items[0],r.items)}}function GRe(t,e,r,n){var i=r.opacity==null?1:r.opacity;i!==0&&(t(e,n)||(H4(e,r),r.fill&&Lq(e,r,i)&&e.fill(),r.stroke&&z4(e,r,i)&&e.stroke()))}function Vq(t){return t=t||ki,function(e,r,n,i,s,o){return n*=e.pixelRatio,i*=e.pixelRatio,Xne(r,a=>{let u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&t(e,a,n,i,s,o))return a})}}function CO(t,e){return function(r,n,i,s){var o=Array.isArray(n)?n[0]:n,a=e??o.fill,u=o.stroke&&r.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,r.lineWidth=l??1,r.lineCap=c??"butt"),t(r,n)?!1:a&&r.isPointInPath(i,s)||u&&r.isPointInStroke(i,s)}}function uie(t){return Vq(CO(t))}function n3(t,e){return"translate("+t+","+e+")"}function lie(t){return"rotate("+t+")"}function igt(t,e){return"scale("+t+","+e+")"}function QRe(t){return n3(t.x||0,t.y||0)}function sgt(t){return n3(t.x||0,t.y||0)+(t.angle?" "+lie(t.angle):"")}function ogt(t){return n3(t.x||0,t.y||0)+(t.angle?" "+lie(t.angle):"")+(t.scaleX||t.scaleY?" "+igt(t.scaleX||1,t.scaleY||1):"")}function cie(t,e,r){function n(o,a){o("transform",sgt(a)),o("d",e(null,a))}function i(o,a){return e(Qq(o,a.angle),a),Zx(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=D2),o.beginPath(),e(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:t,tag:"path",nested:!1,attr:n,bound:i,draw:aie(s),pick:uie(s),isect:r||URe(s)}}var agt=cie("arc",Hmt);function ugt(t,e){for(var r=t[0].orient==="horizontal"?e[1]:e[0],n=t[0].orient==="horizontal"?"y":"x",i=t.length,s=1/0,o,a;--i>=0;)t[i].defined!==!1&&(a=Math.abs(t[i][n]-r),a<s&&(s=a,o=t[i]));return o}function lgt(t,e){for(var r=Math.pow(t[0].strokeWidth||1,2),n=t.length,i,s,o;--n>=0;)if(t[n].defined!==!1&&(i=t[n].x-e[0],s=t[n].y-e[1],o=i*i+s*s,o<r))return t[n];return null}function cgt(t,e){for(var r=t.length,n,i,s;--r>=0;)if(t[r].defined!==!1&&(n=t[r].x-e[0],i=t[r].y-e[1],s=n*n+i*i,n=t[r].size||1,s<n*n))return t[r];return null}function fie(t,e,r){function n(u,l){var c=l.mark.items;c.length&&u("d",e(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(e(Qq(u),c),Zx(u,c[0]))}function s(u,l){u.beginPath(),e(u,l)}let o=CO(s);function a(u,l,c,f,x,d){var h=l.items,p=l.bounds;return!h||!h.length||p&&!p.contains(x,d)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,h,c,f)?h[0]:null)}return{type:t,tag:"path",nested:!0,attr:n,bound:i,draw:ngt(s),pick:a,isect:$Re,tip:r}}var fgt=fie("area",zmt,ugt);function xgt(t,e){var r=e.clip;t.save(),Je(r)?(t.beginPath(),r(t),t.clip()):VRe(t,e.group)}function VRe(t,e){t.beginPath(),sie(e)?Q4(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function WRe(t){let e=S0(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function dgt(t,e){t("transform",QRe(e))}function YRe(t,e){let r=WRe(e);t("d",Q4(null,e,r,r))}function hgt(t,e){t("class","background"),t("aria-hidden",!0),YRe(t,e)}function pgt(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?YRe(t,e):t("d","")}function mgt(t,e,r){let n=e.clip?oie(r,e,e):null;t("clip-path",n)}function ggt(t,e){if(!e.clip&&e.items){let r=e.items,n=r.length;for(let i=0;i<n;++i)t.union(r[i].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),Zx(t,e),t.translate(e.x||0,e.y||0)}function AO(t,e,r,n){let i=WRe(e);t.beginPath(),Q4(t,e,(r||0)+i,(n||0)+i)}var ygt=CO(AO),Egt=CO(AO,!1),Agt=CO(AO,!0);function Sgt(t,e,r){Af(e,n=>{let i=n.x||0,s=n.y||0,o=n.strokeForeground,a=n.opacity==null?1:n.opacity;(n.stroke||n.fill)&&a&&(AO(t,n,i,s),H4(t,n),n.fill&&Lq(t,n,a)&&t.fill(),n.stroke&&!o&&z4(t,n,a)&&t.stroke()),t.save(),t.translate(i,s),n.clip&&VRe(t,n),r&&r.translate(-i,-s),Af(n,u=>{this.draw(t,u,r)}),r&&r.translate(i,s),t.restore(),o&&n.stroke&&a&&(AO(t,n,i,s),H4(t,n),z4(t,n,a)&&t.stroke())})}function vgt(t,e,r,n,i,s){if(e.bounds&&!e.bounds.contains(i,s)||!e.items)return null;let o=r*t.pixelRatio,a=n*t.pixelRatio;return Xne(e,u=>{let l,c,f,x=u.bounds;if(x&&!x.contains(i,s))return;c=u.x||0,f=u.y||0;let d=c+(u.width||0),h=f+(u.height||0),p=u.clip;if(p&&(i<c||i>d||s<f||s>h))return;if(t.save(),t.translate(c,f),c=i-c,f=s-f,p&&sie(u)&&!Agt(t,u,o,a))return t.restore(),null;let m=u.strokeForeground,g=e.interactive!==!1;return g&&m&&u.stroke&&Egt(t,u,o,a)?(t.restore(),u):(l=Xne(u,y=>_gt(y,c,f)?this.pick(y,r,n,c,f):null),!l&&g&&(u.fill||!m&&u.stroke)&&ygt(t,u,o,a)&&(l=u),t.restore(),l||null)})}function _gt(t,e,r){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(e,r)}var bgt={type:"group",tag:"g",nested:!1,attr:dgt,bound:ggt,draw:Sgt,pick:vgt,isect:jRe,content:mgt,background:hgt,foreground:pgt},SO={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function xie(t,e){var r=t.image;return(!r||t.url&&t.url!==r.url)&&(r={complete:!1,width:0,height:0},e.loadImage(t.url).then(n=>{t.image=n,t.image.url=t.url})),r}function die(t,e){return t.width!=null?t.width:!e||!e.width?0:t.aspect!==!1&&t.height?t.height*e.width/e.height:e.width}function hie(t,e){return t.height!=null?t.height:!e||!e.height?0:t.aspect!==!1&&t.width?t.width*e.height/e.width:e.height}function Wq(t,e){return t==="center"?e/2:t==="right"?e:0}function Yq(t,e){return t==="middle"?e/2:t==="bottom"?e:0}function Tgt(t,e,r){let n=xie(e,r),i=die(e,n),s=hie(e,n),o=(e.x||0)-Wq(e.align,i),a=(e.y||0)-Yq(e.baseline,s),u=!n.src&&n.toDataURL?n.toDataURL():n.src||"";t("href",u,SO["xmlns:xlink"],"xlink:href"),t("transform",n3(o,a)),t("width",i),t("height",s),t("preserveAspectRatio",e.aspect===!1?"none":"xMidYMid")}function Cgt(t,e){let r=e.image,n=die(e,r),i=hie(e,r),s=(e.x||0)-Wq(e.align,n),o=(e.y||0)-Yq(e.baseline,i);return t.set(s,o,s+n,o+i)}function Rgt(t,e,r){Af(e,n=>{if(r&&!r.intersects(n.bounds))return;let i=xie(n,this),s=die(n,i),o=hie(n,i);if(s===0||o===0)return;let a=(n.x||0)-Wq(n.align,s),u=(n.y||0)-Yq(n.baseline,o),l,c,f,x;n.aspect!==!1&&(c=i.width/i.height,f=n.width/n.height,c===c&&f===f&&c!==f&&(f<c?(x=s/c,u+=(o-x)/2,o=x):(x=o*c,a+=(s-x)/2,s=x))),(i.complete||i.toDataURL)&&(H4(t,n),t.globalAlpha=(l=n.opacity)!=null?l:1,t.imageSmoothingEnabled=n.smooth!==!1,t.drawImage(i,a,u,s,o))})}var Ogt={type:"image",tag:"image",nested:!1,attr:Tgt,bound:Cgt,draw:Rgt,pick:Vq(),isect:ki,get:xie,xOffset:Wq,yOffset:Yq},Dgt=fie("line",Gmt,lgt);function Ngt(t,e){var r=e.scaleX||1,n=e.scaleY||1;(r!==1||n!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",ogt(e)),t("d",e.path)}function Dq(t,e){var r=e.path;if(r==null)return!0;var n=e.x||0,i=e.y||0,s=e.scaleX||1,o=e.scaleY||1,a=(e.angle||0)*D2,u=e.pathCache;(!u||u.path!==r)&&((e.pathCache=u=$q(r)).path=r),a&&t.rotate&&t.translate?(t.translate(n,i),t.rotate(a),EO(t,u,0,0,s,o),t.rotate(-a),t.translate(-n,-i)):EO(t,u,n,i,s,o)}function Fgt(t,e){return Dq(Qq(t,e.angle),e)?t.set(0,0,0,0):Zx(t,e,!0)}var wgt={type:"path",tag:"path",nested:!1,attr:Ngt,bound:Fgt,draw:aie(Dq),pick:uie(Dq),isect:URe(Dq)};function Lgt(t,e){t("d",Q4(null,e))}function Igt(t,e){var r,n;return Zx(t.set(r=e.x||0,n=e.y||0,r+e.width||0,n+e.height||0),e)}function SRe(t,e){t.beginPath(),Q4(t,e)}var Mgt={type:"rect",tag:"path",nested:!1,attr:Lgt,bound:Igt,draw:aie(SRe),pick:uie(SRe),isect:jRe};function Pgt(t,e){t("transform",QRe(e)),t("x2",e.x2!=null?e.x2-(e.x||0):0),t("y2",e.y2!=null?e.y2-(e.y||0):0)}function kgt(t,e){var r,n;return Zx(t.set(r=e.x||0,n=e.y||0,e.x2!=null?e.x2:r,e.y2!=null?e.y2:n),e)}function KRe(t,e,r){var n,i,s,o;return e.stroke&&z4(t,e,r)?(n=e.x||0,i=e.y||0,s=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:i,t.beginPath(),t.moveTo(n,i),t.lineTo(s,o),!0):!1}function Bgt(t,e,r){Af(e,n=>{if(!(r&&!r.intersects(n.bounds))){var i=n.opacity==null?1:n.opacity;i&&KRe(t,n,i)&&(H4(t,n),t.stroke())}})}function qgt(t,e,r,n){return t.isPointInStroke?KRe(t,e,1)&&t.isPointInStroke(r,n):!1}var Ugt={type:"rule",tag:"line",nested:!1,attr:Pgt,bound:kgt,draw:Bgt,pick:Vq(qgt),isect:Zmt},$gt=cie("shape",Qmt),jgt=cie("symbol",Vmt,$Re),vRe=Vve(),v0={height:ed,measureWidth:pie,estimateWidth:Jne,width:Jne,canvas:XRe};XRe(!0);function XRe(t){v0.width=t&&O2?pie:Jne}function Jne(t,e){return JRe(N2(t,e),ed(t))}function JRe(t,e){return~~(.8*t.length*e)}function pie(t,e){return ed(t)<=0||!(e=N2(t,e))?0:ZRe(e,gie(t))}function ZRe(t,e){let r=`(${e}) ${t}`,n=vRe.get(r);return n===void 0&&(O2.font=e,n=O2.measureText(t).width,vRe.set(r,n)),n}function ed(t){return t.fontSize!=null?+t.fontSize||0:11}function i3(t){return t.lineHeight!=null?t.lineHeight:ed(t)+2}function Hgt(t){return j(t)?t.length>1?t:t[0]:t}function RO(t){return Hgt(t.lineBreak&&t.text&&!j(t.text)?t.text.split(t.lineBreak):t.text)}function mie(t){let e=RO(t);return(j(e)?e.length-1:0)*i3(t)}function N2(t,e){let r=e==null?"":(e+"").trim();return t.limit>0&&r.length?Ggt(t,r):r}function zgt(t){if(v0.width===pie){let e=gie(t);return r=>ZRe(r,e)}else{let e=ed(t);return r=>JRe(r,e)}}function Ggt(t,e){var r=+t.limit,n=zgt(t);if(n(e)<r)return e;var i=t.ellipsis||"\u2026",s=t.dir==="rtl",o=0,a=e.length,u;if(r-=n(i),s){for(;o<a;)u=o+a>>>1,n(e.slice(u))>r?o=u+1:a=u;return i+e.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),n(e.slice(0,u))<r?o=u:a=u-1;return e.slice(0,o)+i}}function Kq(t,e){var r=t.font;return(e&&r?String(r).replace(/"/g,"'"):r)||"sans-serif"}function gie(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+ed(t)+"px "+Kq(t,e)}function yie(t){var e=t.baseline,r=ed(t);return Math.round(e==="top"?.79*r:e==="middle"?.3*r:e==="bottom"?-.21*r:e==="line-top"?.29*r+.5*i3(t):e==="line-bottom"?.29*r-.5*i3(t):0)}var Qgt={left:"start",center:"middle",right:"end"},mO=new Nn;function Xq(t){var e=t.x||0,r=t.y||0,n=t.radius||0,i;return n&&(i=(t.theta||0)-Jg,e+=n*Math.cos(i),r+=n*Math.sin(i)),mO.x1=e,mO.y1=r,mO}function Vgt(t,e){var r=e.dx||0,n=(e.dy||0)+yie(e),i=Xq(e),s=i.x1,o=i.y1,a=e.angle||0,u;t("text-anchor",Qgt[e.align]||"start"),a?(u=n3(s,o)+" "+lie(a),(r||n)&&(u+=" "+n3(r,n))):u=n3(s+r,o+n),t("transform",u)}function Eie(t,e,r){var n=v0.height(e),i=e.align,s=Xq(e),o=s.x1,a=s.y1,u=e.dx||0,l=(e.dy||0)+yie(e)-Math.round(.8*n),c=RO(e),f;if(j(c)?(n+=i3(e)*(c.length-1),f=c.reduce((x,d)=>Math.max(x,v0.width(e,d)),0)):f=v0.width(e,c),i==="center"?u-=f/2:i==="right"&&(u-=f),t.set(u+=o,l+=a,u+f,l+n),e.angle&&!r)t.rotate(e.angle*D2,o,a);else if(r===2)return t.rotatedPoints(e.angle*D2,o,a);return t}function Wgt(t,e,r){Af(e,n=>{var i=n.opacity==null?1:n.opacity,s,o,a,u,l,c,f;if(!(r&&!r.intersects(n.bounds)||i===0||n.fontSize<=0||n.text==null||n.text.length===0)){if(t.font=gie(n),t.textAlign=n.align||"left",s=Xq(n),o=s.x1,a=s.y1,n.angle&&(t.save(),t.translate(o,a),t.rotate(n.angle*D2),o=a=0),o+=n.dx||0,a+=(n.dy||0)+yie(n),c=RO(n),H4(t,n),j(c))for(l=i3(n),u=0;u<c.length;++u)f=N2(n,c[u]),n.fill&&Lq(t,n,i)&&t.fillText(f,o,a),n.stroke&&z4(t,n,i)&&t.strokeText(f,o,a),a+=l;else f=N2(n,c),n.fill&&Lq(t,n,i)&&t.fillText(f,o,a),n.stroke&&z4(t,n,i)&&t.strokeText(f,o,a);n.angle&&t.restore()}})}function Ygt(t,e,r,n,i,s){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=Xq(e),a=o.x1,u=o.y1,l=Eie(mO,e,1),c=-e.angle*D2,f=Math.cos(c),x=Math.sin(c),d=f*i-x*s+(a-f*a+x*u),h=x*i+f*s+(u-x*a-f*u);return l.contains(d,h)}function Kgt(t,e){let r=Eie(mO,t,2);return pO(e,r[0],r[1],r[2],r[3])||pO(e,r[0],r[1],r[4],r[5])||pO(e,r[4],r[5],r[6],r[7])||pO(e,r[2],r[3],r[6],r[7])}var Xgt={type:"text",tag:"text",nested:!1,attr:Vgt,bound:Eie,draw:Wgt,pick:Vq(Ygt),isect:Kgt},Jgt=fie("trail",Wmt,cgt),pa={arc:agt,area:fgt,group:bgt,image:Ogt,line:Dgt,path:wgt,rect:Mgt,rule:Ugt,shape:$gt,symbol:jgt,text:Xgt,trail:Jgt};function _Re(t,e,r){var n=pa[t.mark.marktype],i=e||n.bound;return n.nested&&(t=t.mark),i(t.bounds||(t.bounds=new Nn),t,r)}var bRe={mark:null};function Zgt(t,e,r){var n=pa[t.marktype],i=n.bound,s=t.items,o=s&&s.length,a,u,l,c;if(n.nested)return o?l=s[0]:(bRe.mark=t,l=bRe),c=_Re(l,i,r),e=e&&e.union(c)||c,e;if(e=e||t.bounds&&t.bounds.clear()||new Nn,o)for(a=0,u=s.length;a<u;++a)e.union(_Re(s[a],i,r));return t.bounds=e}var e3t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function t3t(t,e){return JSON.stringify(t,e3t,e)}function r3t(t){let e=typeof t=="string"?JSON.parse(t):t;return eOe(e)}function eOe(t){var e=t.marktype,r=t.items,n,i,s;if(r)for(i=0,s=r.length;i<s;++i)n=e?"mark":"group",r[i][n]=t,r[i].zindex&&(r[i][n].zdirty=!0),(e||n)==="group"&&eOe(r[i]);return e&&Zgt(t),t}function Aie(t){arguments.length?this.root=r3t(t):(this.root=tOe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new zq(this.root)])}Aie.prototype={toJSON(t){return t3t(this.root,t||0)},mark(t,e,r){e=e||this.root.items[0];let n=tOe(t,e);return e.items[r]=n,n.zindex&&(n.group.zdirty=!0),n}};function tOe(t,e){let r={bounds:new Nn,clip:!!t.clip,group:e,interactive:t.interactive!==!1,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(r.aria=t.aria),t.description&&(r.description=t.description),r}function r3(t,e,r){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?r?t.createElementNS(r,e):t.createElement(e):null}function rOe(t,e){e=e.toLowerCase();for(var r=t.childNodes,n=0,i=r.length;n<i;++n)if(r[n].tagName.toLowerCase()===e)return r[n]}function gu(t,e,r,n){var i=t.childNodes[e],s;return(!i||i.tagName.toLowerCase()!==r.toLowerCase())&&(s=i||null,i=r3(t.ownerDocument,r,n),t.insertBefore(i,s)),i}function Ef(t,e){for(var r=t.childNodes,n=r.length;n>e;)t.removeChild(r[--n]);return t}function nOe(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function Jq(t,e){let r=e.getBoundingClientRect();return[t.clientX-r.left-(e.clientLeft||0),t.clientY-r.top-(e.clientTop||0)]}function n3t(t,e,r,n){var i=t&&t.mark,s,o;if(i&&(s=pa[i.marktype]).tip){for(o=Jq(e,r),o[0]-=n[0],o[1]-=n[1];t=t.mark.group;)o[0]-=t.x||0,o[1]-=t.y||0;t=s.tip(i.items,o)}return t}function s3(t,e){this._active=null,this._handlers={},this._loader=t||vR(),this._tooltip=e||i3t}function i3t(t,e,r,n){t.element().setAttribute("title",n||"")}s3.prototype={initialize(t,e,r){return this._el=t,this._obj=r||null,this.origin(e)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,e,r){for(let n=t?t.length:0;--n>=0;)if(t[n].type===e&&(!r||t[n].handler===r))return n;return-1},handlers(t){let e=this._handlers,r=[];if(t)r.push(...e[this.eventName(t)]);else for(let n in e)r.push(...e[n]);return r},eventName(t){let e=t.indexOf(".");return e<0?t:t.slice(0,e)},handleHref(t,e,r){this._loader.sanitize(r,{context:"href"}).then(n=>{let i=new MouseEvent(t.type,t),s=r3(null,"a");for(let o in n)s.setAttribute(o,n[o]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(t,e,r){if(e&&e.tooltip!=null){e=n3t(e,t,this.canvas(),this._origin);let n=r&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,n)}},getItemBoundingClientRect(t){let e=this.canvas();if(!e)return;let r=e.getBoundingClientRect(),n=this._origin,i=t.bounds,s=i.width(),o=i.height(),a=i.x1+n[0]+r.left,u=i.y1+n[1]+r.top;for(;t.mark&&(t=t.mark.group);)a+=t.x||0,u+=t.y||0;return{x:a,y:u,width:s,height:o,left:a,top:u,right:a+s,bottom:u+o}}};function td(t){this._el=null,this._bgcolor=null,this._loader=new qRe(t)}td.prototype={initialize(t,e,r,n,i){return this._el=t,this.resize(e,r,n,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)},resize(t,e,r,n){return this._width=t,this._height=e,this._origin=r||[0,0],this._scale=n||1,this},dirty(){},render(t){let e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},_render(){},renderAsync(t){let e=this.render(t);return this._ready?this._ready.then(()=>e):Promise.resolve(e)},_load(t,e){var r=this,n=r._loader[t](e);if(!r._ready){let i=r._call;r._ready=r._loader.ready().then(s=>{s&&i(),r._ready=null})}return n},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};var s3t="keydown",o3t="keypress",a3t="keyup",iOe="dragenter",Nq="dragleave",sOe="dragover",Zne="mousedown",u3t="mouseup",Iq="mousemove",gO="mouseout",oOe="mouseover",Mq="click",l3t="dblclick",c3t="wheel",aOe="mousewheel",Pq="touchstart",kq="touchmove",Bq="touchend",f3t=[s3t,o3t,a3t,iOe,Nq,sOe,Zne,u3t,Iq,gO,oOe,Mq,l3t,c3t,aOe,Pq,kq,Bq],eie=Iq,vO=gO,tie=Mq;function OO(t,e){s3.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}var x3t=t=>t===Pq||t===kq||t===Bq?[Pq,kq,Bq]:[t];function TRe(t,e){x3t(e).forEach(r=>d3t(t,r))}function d3t(t,e){let r=t.canvas();r&&!t._events[e]&&(t._events[e]=1,r.addEventListener(e,t[e]?n=>t[e](n):n=>t.fire(e,n)))}function CRe(t,e,r){return function(n){let i=this._active,s=this.pickEvent(n);s===i?this.fire(t,n):((!i||!i.exit)&&this.fire(r,n),this._active=s,this.fire(e,n),this.fire(t,n))}}function RRe(t){return function(e){this.fire(t,e),this._active=null}}ce(OO,s3,{initialize(t,e,r){return this._canvas=t&&rOe(t,"canvas"),[Mq,Zne,Iq,gO,Nq].forEach(n=>TRe(this,n)),s3.prototype.initialize.call(this,t,e,r)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:f3t,DOMMouseScroll(t){this.fire(aOe,t)},mousemove:CRe(Iq,oOe,gO),dragover:CRe(sOe,iOe,Nq),mouseout:RRe(gO),dragleave:RRe(Nq),mousedown(t){this._down=this._active,this.fire(Zne,t)},click(t){this._down===this._active&&(this.fire(Mq,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Pq,t,!0)},touchmove(t){this.fire(kq,t,!0)},touchend(t){this.fire(Bq,t,!0),this._touch=null},fire(t,e,r){let n=r?this._touch:this._active,i=this._handlers[t];if(e.vegaType=t,t===tie&&n&&n.href?this.handleHref(e,n,n.href):(t===eie||t===vO)&&this.handleTooltip(e,n,t!==vO),i)for(let s=0,o=i.length;s<o;++s)i[s].handler.call(this._obj,e,n)},on(t,e){let r=this.eventName(t),n=this._handlers;return this._handlerIndex(n[r],t,e)<0&&(TRe(this,t),(n[r]||(n[r]=[])).push({type:t,handler:e})),this},off(t,e){let r=this.eventName(t),n=this._handlers[r],i=this._handlerIndex(n,t,e);return i>=0&&n.splice(i,1),this},pickEvent(t){let e=Jq(t,this._canvas),r=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-r[0],e[1]-r[1])},pick(t,e,r,n,i){let s=this.context();return pa[t.marktype].pick.call(this,s,t,e,r,n,i)}});function h3t(){return typeof window<"u"&&window.devicePixelRatio||1}var p3t=h3t();function m3t(t,e,r,n,i,s){let o=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,a=t.getContext("2d"),u=o?p3t:i;t.width=e*u,t.height=r*u;for(let l in s)a[l]=s[l];return o&&u!==1&&(t.style.width=e+"px",t.style.height=r+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*n[0],u*n[1]),t}function rie(t){td.call(this,t),this._options={},this._redraw=!1,this._dirty=new Nn,this._tempb=new Nn}var ORe=td.prototype,g3t=(t,e,r)=>new Nn().set(0,0,e,r).translate(-t[0],-t[1]);function y3t(t,e,r){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-(r[0]%1),-(r[1]%1)),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}ce(rie,td,{initialize(t,e,r,n,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:ll(1,1,this._options.type),t&&this._canvas&&(Ef(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),ORe.initialize.call(this,t,e,r,n,i)},resize(t,e,r,n){if(ORe.resize.call(this,t,e,r,n),this._canvas)m3t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let i=this._options.externalContext;i||W("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){let e=this._tempb.clear().union(t.bounds),r=t.mark.group;for(;r;)e.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(e)},_render(t){let e=this.context(),r=this._origin,n=this._width,i=this._height,s=this._dirty,o=g3t(r,n,i);e.save();let a=this._redraw||s.empty()?(this._redraw=!1,o.expand(1)):y3t(e,o.intersect(s),r);return this.clear(-r[0],-r[1],n,i),this.draw(e,t,a),e.restore(),s.clear(),this},draw(t,e,r){let n=pa[e.marktype];e.clip&&xgt(t,e),n.draw.call(this,t,e,r),e.clip&&t.restore()},clear(t,e,r,n){let i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(t,e,r,n),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,e,r,n))}});function uOe(t,e){s3.call(this,t,e);let r=this;r._hrefHandler=nie(r,(n,i)=>{i&&i.href&&r.handleHref(n,i,i.href)}),r._tooltipHandler=nie(r,(n,i)=>{r.handleTooltip(n,i,n.type!==vO)})}var nie=(t,e)=>r=>{let n=r.target.__data__;n=Array.isArray(n)?n[0]:n,r.vegaType=r.type,e.call(t._obj,r,n)};ce(uOe,s3,{initialize(t,e,r){let n=this._svg;return n&&(n.removeEventListener(tie,this._hrefHandler),n.removeEventListener(eie,this._tooltipHandler),n.removeEventListener(vO,this._tooltipHandler)),this._svg=n=t&&rOe(t,"svg"),n&&(n.addEventListener(tie,this._hrefHandler),n.addEventListener(eie,this._tooltipHandler),n.addEventListener(vO,this._tooltipHandler)),s3.prototype.initialize.call(this,t,e,r)},canvas(){return this._svg},on(t,e){let r=this.eventName(t),n=this._handlers;if(this._handlerIndex(n[r],t,e)<0){let s={type:t,handler:e,listener:nie(this,e)};(n[r]||(n[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this},off(t,e){let r=this.eventName(t),n=this._handlers[r],i=this._handlerIndex(n,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(r,n[i].listener),n.splice(i,1)),this}});var lOe="aria-hidden",Sie="aria-label",vie="role",_ie="aria-roledescription",cOe="graphics-object",bie="graphics-symbol",fOe=(t,e,r)=>({[vie]:t,[_ie]:e,[Sie]:r||void 0}),E3t=Bi(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),DRe={axis:{desc:"axis",caption:v3t},legend:{desc:"legend",caption:_3t},"title-text":{desc:"title",caption:t=>`Title text '${FRe(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${FRe(t)}'`}},NRe={ariaRole:vie,ariaRoleDescription:_ie,description:Sie};function xOe(t,e){let r=e.aria===!1;if(t(lOe,r||void 0),r||e.description==null)for(let n in NRe)t(NRe[n],void 0);else{let n=e.mark.marktype;t(Sie,e.description),t(vie,e.ariaRole||(n==="group"?cOe:bie)),t(_ie,e.ariaRoleDescription||`${n} mark`)}}function dOe(t){return t.aria===!1?{[lOe]:!0}:E3t[t.role]?null:DRe[t.role]?S3t(t,DRe[t.role]):A3t(t)}function A3t(t){let e=t.marktype,r=e==="group"||e==="text"||t.items.some(n=>n.description!=null&&n.aria!==!1);return fOe(r?cOe:bie,`${e} mark container`,t.description)}function S3t(t,e){try{let r=t.items[0],n=e.caption||(()=>"");return fOe(e.role||bie,e.desc,r.description||n(r))}catch{return null}}function FRe(t){return le(t.text).join(" ")}function v3t(t){let e=t.datum,r=t.orient,n=e.title?hOe(t):null,i=t.context,s=i.scales[e.scale].value,o=i.dataflow.locale(),a=s.type;return`${r==="left"||r==="right"?"Y":"X"}-axis`+(n?` titled '${n}'`:"")+` for a ${b2(a)?"discrete":a} scale with ${qne(o,s,t)}`}function _3t(t){let e=t.datum,r=e.title?hOe(t):null,n=`${e.type||""} legend`.trim(),i=e.scales,s=Object.keys(i),o=t.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return T3t(n)+(r?` titled '${r}'`:"")+` for ${b3t(s)} with ${qne(u,a,t)}`}function hOe(t){try{return le(xt(t.items).items[0].text).join(" ")}catch{return null}}function b3t(t){return t=t.map(e=>e+(e==="fill"||e==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+xt(t)}function T3t(t){return t.length?t[0].toUpperCase()+t.slice(1):t}var pOe=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),C3t=t=>pOe(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function mOe(){let t="",e="",r="",n=[],i=()=>e=r="",s=u=>{e&&(t+=`${e}>${r}`,i()),n.push(u)},o=(u,l)=>(l!=null&&(e+=` ${u}="${C3t(l)}"`),a),a={open(u){s(u),e="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(let x of c)for(let d in x)o(d,x[d]);return a},close(){let u=n.pop();return e?t+=e+(r?`>${r}</${u}>`:"/>"):t+=`</${u}>`,i(),a},attr:o,text:u=>(r+=pOe(u),a),toString:()=>t};return a}var R3t=t=>gOe(mOe(),t)+"";function gOe(t,e){if(t.open(e.tagName),e.hasAttributes()){let r=e.attributes,n=r.length;for(let i=0;i<n;++i)t.attr(r[i].name,r[i].value)}if(e.hasChildNodes()){let r=e.childNodes;for(let n of r)n.nodeType===3?t.text(n.nodeValue):gOe(t,n)}return t.close()}var qq={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Uq={blend:"mix-blend-mode"},yOe={fill:"none","stroke-miterlimit":10},hO=0,wRe="http://www.w3.org/2000/xmlns/",ci=SO.xmlns;function EOe(t){td.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var Gne=td.prototype;ce(EOe,td,{initialize(t,e,r,n,i){return this._defs={},this._clearDefs(),t&&(this._svg=gu(t,0,"svg",ci),this._svg.setAttributeNS(wRe,"xmlns",ci),this._svg.setAttributeNS(wRe,"xmlns:xlink",SO["xmlns:xlink"]),this._svg.setAttribute("version",SO.version),this._svg.setAttribute("class","marks"),Ef(t,1),this._root=gu(this._svg,hO,"g",ci),R2(this._root,yOe),Ef(this._svg,hO+1)),this.background(this._bgcolor),Gne.initialize.call(this,t,e,r,n,i)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),Gne.background.apply(this,arguments)},resize(t,e,r,n){return Gne.resize.call(this,t,e,r,n),this._svg&&(R2(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){let t=this._svg,e=this._bgcolor;if(!t)return null;let r;e&&(t.removeAttribute("style"),r=gu(t,hO,"rect",ci),R2(r,{width:this._width,height:this._height,fill:e}));let n=R3t(t);return e&&(t.removeChild(r),this._svg.style.setProperty("background-color",e)),n},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),Ef(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;let t=this._dirty;if(!t.length||!this._dirtyID)return!0;let e=++this._dirtyID,r,n,i,s,o,a,u;for(o=0,a=t.length;o<a;++o)if(r=t[o],n=r.mark,n.marktype!==i&&(i=n.marktype,s=pa[i]),n.zdirty&&n.dirty!==e&&(this._dirtyAll=!1,LRe(r,e),n.items.forEach(l=>{l.dirty=e})),!n.zdirty){if(r.exit){s.nested&&n.items.length?(u=n.items[0],u._svg&&this._update(s,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=s.nested?n.items[0]:r,r._update!==e&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,LRe(r,e)):this._update(s,r._svg,r),r._update=e)}return!this._dirtyAll},mark(t,e,r){if(!this.isDirty(e))return e._svg;let n=this._svg,i=pa[e.marktype],s=e.interactive===!1?"none":null,o=i.tag==="g",a=IRe(e,t,r,"g",n);a.setAttribute("class",nOe(e));let u=dOe(e);for(let x in u)Oo(a,x,u[x]);o||Oo(a,"pointer-events",s),Oo(a,"clip-path",e.clip?oie(this,e,e.group):null);let l=null,c=0,f=x=>{let d=this.isDirty(x),h=IRe(x,a,l,i.tag,n);d&&(this._update(i,h,x),o&&N3t(this,h,x)),l=h,++c};return i.nested?e.items.length&&f(e.items[0]):Af(e,f),Ef(a,c),a},_update(t,e,r){Jx=e,Xs=e.__values__,xOe(yO,r),t.attr(yO,r,this);let n=w3t[t.type];n&&n.call(this,t,e,r),Jx&&this.style(Jx,r)},style(t,e){if(e!=null){for(let r in qq){let n=r==="font"?Kq(e):e[r];if(n===Xs[r])continue;let i=qq[r];n==null?t.removeAttribute(i):(iie(n)&&(n=MRe(n,this._defs.gradient,AOe())),t.setAttribute(i,n+"")),Xs[r]=n}for(let r in Uq)Fq(t,Uq[r],e[r])}},defs(){let t=this._svg,e=this._defs,r=e.el,n=0;for(let i in e.gradient)r||(e.el=r=gu(t,hO+1,"defs",ci)),n=O3t(r,e.gradient[i],n);for(let i in e.clipping)r||(e.el=r=gu(t,hO+1,"defs",ci)),n=D3t(r,e.clipping[i],n);r&&(n===0?(t.removeChild(r),e.el=null):Ef(r,n))},_clearDefs(){let t=this._defs;t.gradient={},t.clipping={}}});function LRe(t,e){for(;t&&t.dirty!==e;t=t.mark.group)if(t.dirty=e,t.mark&&t.mark.dirty!==e)t.mark.dirty=e;else return}function O3t(t,e,r){let n,i,s;if(e.gradient==="radial"){let o=gu(t,r++,"pattern",ci);R2(o,{id:wq+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=gu(o,0,"rect",ci),R2(o,{width:1,height:1,fill:`url(${AOe()}#${e.id})`}),t=gu(t,r++,"radialGradient",ci),R2(t,{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else t=gu(t,r++,"linearGradient",ci),R2(t,{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(n=0,i=e.stops.length;n<i;++n)s=gu(t,n,"stop",ci),s.setAttribute("offset",e.stops[n].offset),s.setAttribute("stop-color",e.stops[n].color);return Ef(t,n),r}function D3t(t,e,r){let n;return t=gu(t,r,"clipPath",ci),t.setAttribute("id",e.id),e.path?(n=gu(t,0,"path",ci),n.setAttribute("d",e.path)):(n=gu(t,0,"rect",ci),R2(n,{x:0,y:0,width:e.width,height:e.height})),Ef(t,1),r+1}function N3t(t,e,r){e=e.lastChild.previousSibling;let n,i=0;Af(r,s=>{n=t.mark(e,s,n),++i}),Ef(e,1+i)}function IRe(t,e,r,n,i){let s=t._svg,o;if(!s&&(o=e.ownerDocument,s=r3(o,n,ci),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},n==="g"))){let a=r3(o,"path",ci);s.appendChild(a),a.__data__=t;let u=r3(o,"g",ci);s.appendChild(u),u.__data__=t;let l=r3(o,"path",ci);s.appendChild(l),l.__data__=t,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||F3t(s,r))&&e.insertBefore(s,r?r.nextSibling:e.firstChild),s}function F3t(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}var Jx=null,Xs=null,w3t={group(t,e,r){let n=Jx=e.childNodes[2];Xs=n.__values__,t.foreground(yO,r,this),Xs=e.__values__,Jx=e.childNodes[1],t.content(yO,r,this);let i=Jx=e.childNodes[0];t.background(yO,r,this);let s=r.mark.interactive===!1?"none":null;if(s!==Xs.events&&(Oo(n,"pointer-events",s),Oo(i,"pointer-events",s),Xs.events=s),r.strokeForeground&&r.stroke){let o=r.fill;Oo(n,"display",null),this.style(i,r),Oo(i,"stroke",null),o&&(r.fill=null),Xs=n.__values__,this.style(n,r),o&&(r.fill=o),Jx=null}else Oo(n,"display","none")},image(t,e,r){r.smooth===!1?(Fq(e,"image-rendering","optimizeSpeed"),Fq(e,"image-rendering","pixelated")):Fq(e,"image-rendering",null)},text(t,e,r){let n=RO(r),i,s,o,a;j(n)?(s=n.map(u=>N2(r,u)),i=s.join(`
`),i!==Xs.text&&(Ef(e,0),o=e.ownerDocument,a=i3(r),s.forEach((u,l)=>{let c=r3(o,"tspan",ci);c.__data__=r,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),e.appendChild(c)}),Xs.text=i)):(s=N2(r,n),s!==Xs.text&&(e.textContent=s,Xs.text=s)),Oo(e,"font-family",Kq(r)),Oo(e,"font-size",ed(r)+"px"),Oo(e,"font-style",r.fontStyle),Oo(e,"font-variant",r.fontVariant),Oo(e,"font-weight",r.fontWeight)}};function yO(t,e,r){e!==Xs[t]&&(r?L3t(Jx,t,e,r):Oo(Jx,t,e),Xs[t]=e)}function Fq(t,e,r){r!==Xs[e]&&(r==null?t.style.removeProperty(e):t.style.setProperty(e,r+""),Xs[e]=r)}function R2(t,e){for(let r in e)Oo(t,r,e[r])}function Oo(t,e,r){r!=null?t.setAttribute(e,r):t.removeAttribute(e)}function L3t(t,e,r,n){r!=null?t.setAttributeNS(n,e,r):t.removeAttributeNS(n,e)}function AOe(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function SOe(t){td.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}ce(SOe,td,{svg(){return this._text},_render(t){let e=mOe();e.open("svg",Ke({},SO,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&e.open("rect",{width:this._width,height:this._height,fill:r}).close(),e.open("g",yOe,{transform:"translate("+this._origin+")"}),this.mark(e,t),e.close(),this.defs(e),this._text=e.close()+"",this},mark(t,e){let r=pa[e.marktype],n=r.tag,i=[xOe,r.attr];t.open("g",{class:nOe(e),"clip-path":e.clip?oie(this,e,e.group):null},dOe(e),{"pointer-events":n!=="g"&&e.interactive===!1?"none":null});let s=o=>{let a=this.href(o);if(a&&t.open("a",a),t.open(n,this.attr(e,o,i,n!=="g"?n:null)),n==="text"){let u=RO(o);if(j(u)){let l={x:0,dy:i3(o)};for(let c=0;c<u.length;++c)t.open("tspan",c?l:null).text(N2(o,u[c])).close()}else t.text(N2(o,u))}else if(n==="g"){let u=o.strokeForeground,l=o.fill,c=o.stroke;u&&c&&(o.stroke=null),t.open("path",this.attr(e,o,r.background,"bgrect")).close(),t.open("g",this.attr(e,o,r.content)),Af(o,f=>this.mark(t,f)),t.close(),u&&c?(l&&(o.fill=null),o.stroke=c,t.open("path",this.attr(e,o,r.foreground,"bgrect")).close(),l&&(o.fill=l)):t.open("path",this.attr(e,o,r.foreground,"bgfore")).close()}t.close(),a&&t.close()};return r.nested?e.items&&e.items.length&&s(e.items[0]):Af(e,s),t.close()},href(t){let e=t.href,r;if(e){if(r=this._hrefs&&this._hrefs[e])return r;this.sanitizeURL(e).then(n=>{n["xlink:href"]=n.href,n.href=null,(this._hrefs||(this._hrefs={}))[e]=n})}return null},attr(t,e,r,n){let i={},s=(o,a,u,l)=>{i[l||o]=a};return Array.isArray(r)?r.forEach(o=>o(s,e,this)):r(s,e,this),n&&I3t(i,e,t,n,this._defs),i},defs(t){let e=this._defs.gradient,r=this._defs.clipping;if(Object.keys(e).length+Object.keys(r).length!==0){t.open("defs");for(let i in e){let s=e[i],o=s.stops;s.gradient==="radial"?(t.open("pattern",{id:wq+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),t.close(),t.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let a=0;a<o.length;++a)t.open("stop",{offset:o[a].offset,"stop-color":o[a].color}).close();t.close()}for(let i in r){let s=r[i];t.open("clipPath",{id:i}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}});function I3t(t,e,r,n,i){let s;if(e==null||(n==="bgrect"&&r.interactive===!1&&(t["pointer-events"]="none"),n==="bgfore"&&(r.interactive===!1&&(t["pointer-events"]="none"),t.display="none",e.fill!==null)))return t;n==="image"&&e.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),n==="text"&&(t["font-family"]=Kq(e),t["font-size"]=ed(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(let o in qq){let a=e[o],u=qq[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(iie(a)&&(a=MRe(a,i.gradient,"")),t[u]=a)}for(let o in Uq){let a=e[o];a!=null&&(s=s||[],s.push(`${Uq[o]}: ${a};`))}return s&&(t.style=s.join(" ")),t}var vOe="canvas",_Oe="png",bOe="svg",TOe="none",F2={Canvas:vOe,PNG:_Oe,SVG:bOe,None:TOe},G4={};G4[vOe]=G4[_Oe]={renderer:rie,headless:rie,handler:OO};G4[bOe]={renderer:EOe,headless:SOe,handler:uOe};G4[TOe]={};function Zq(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(G4[t]=e,this):G4[t]}function COe(t,e,r){let n=[],i=new Nn().union(e),s=t.marktype;return s?ROe(t,i,r,n):s==="group"?OOe(t,i,r,n):W("Intersect scene must be mark node or group item.")}function ROe(t,e,r,n){if(M3t(t,e,r)){let i=t.items,s=t.marktype,o=i.length,a=0;if(s==="group")for(;a<o;++a)OOe(i[a],e,r,n);else for(let u=pa[s].isect;a<o;++a){let l=i[a];DOe(l,e,u)&&n.push(l)}}return n}function M3t(t,e,r){return t.bounds&&e.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!r||r(t)))}function OOe(t,e,r,n){r&&r(t.mark)&&DOe(t,e,pa.group.isect)&&n.push(t);let i=t.items,s=i&&i.length;if(s){let o=t.x||0,a=t.y||0;e.translate(-o,-a);for(let u=0;u<s;++u)ROe(i[u],e,r,n);e.translate(o,a)}return n}function DOe(t,e,r){let n=t.bounds;return e.encloses(n)||e.intersects(n)&&r(t,e)}var Qne=new Nn;function NOe(t){let e=t.clip;if(Je(e))e(Qq(Qne.clear()));else if(e)Qne.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(Qne)}var Y4="top",_0="left",b0="right",I2="bottom",P3t="top-left",k3t="top-right",B3t="bottom-left",q3t="bottom-right",Rie="start",Tie="middle",Do="end",U3t="x",$3t="y",iU="group",Oie="axis",Die="title",j3t="frame",H3t="scope",Nie="legend",UOe="row-header",$Oe="row-footer",jOe="row-title",HOe="column-header",zOe="column-footer",GOe="column-title",z3t="padding",G3t="symbol",QOe="fit",VOe="fit-x",WOe="fit-y",Q3t="pad",Fie="none",eU="all",Cie="each",wie="flush",w2="column",L2="row";function YOe(t){V.call(this,null,t)}ce(YOe,V,{transform(t,e){let r=e.dataflow,n=t.mark,i=n.marktype,s=pa[i],o=s.bound,a=n.bounds,u;if(s.nested)n.items.length&&r.dirty(n.items[0]),a=tU(n,o),n.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===iU||t.modified())switch(e.visit(e.MOD,l=>r.dirty(l)),a.clear(),n.items.forEach(l=>a.union(tU(l,o))),n.role){case Oie:case Nie:case Die:e.reflow()}else u=e.changed(e.REM),e.visit(e.ADD,l=>{a.union(tU(l,o))}),e.visit(e.MOD,l=>{u=u||a.alignsWith(l.bounds),r.dirty(l),a.union(tU(l,o))}),u&&(a.clear(),n.items.forEach(l=>a.union(l.bounds)));return NOe(n),e.modifies("bounds")}});function tU(t,e,r){return e(t.bounds.clear(),t,r)}var FOe=":vega_identifier:";function Lie(t){V.call(this,0,t)}Lie.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ce(Lie,V,{transform(t,e){let r=V3t(e.dataflow),n=t.as,i=r.value;return e.visit(e.ADD,s=>s[n]=s[n]||++i),r.set(this.value=i),e}});function V3t(t){return t._signals[FOe]||(t._signals[FOe]=t.add(0))}function KOe(t){V.call(this,null,t)}ce(KOe,V,{transform(t,e){let r=this.value;r||(r=e.dataflow.scenegraph().mark(t.markdef,W3t(t),t.index),r.group.context=t.context,t.context.group||(t.context.group=r.group),r.source=this.source,r.clip=t.clip,r.interactive=t.interactive,this.value=r);let n=r.marktype===iU?zq:Hq;return e.visit(e.ADD,i=>n.call(i,r)),(t.modified("clip")||t.modified("interactive"))&&(r.clip=t.clip,r.interactive=!!t.interactive,r.zdirty=!0,e.reflow()),r.items=e.source,e}});function W3t(t){let e=t.groups,r=t.parent;return e&&e.size===1?e.get(Object.keys(e.object)[0]):e&&r?e.lookup(r):null}function XOe(t){V.call(this,null,t)}var wOe={parity:t=>t.filter((e,r)=>r%2?e.opacity=0:1),greedy:(t,e)=>{let r;return t.filter((n,i)=>!i||!JOe(r.bounds,n.bounds,e)?(r=n,1):n.opacity=0)}},JOe=(t,e,r)=>r>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2),LOe=(t,e)=>{for(var r=1,n=t.length,i=t[0].bounds,s;r<n;i=s,++r)if(JOe(i,s=t[r].bounds,e))return!0},Y3t=t=>{let e=t.bounds;return e.width()>1&&e.height()>1},K3t=(t,e,r)=>{var n=t.range(),i=new Nn;return e===Y4||e===I2?i.set(n[0],-1/0,n[1],1/0):i.set(-1/0,n[0],1/0,n[1]),i.expand(r||1),s=>i.encloses(s.bounds)},IOe=t=>(t.forEach(e=>e.opacity=1),t),MOe=(t,e)=>t.reflow(e.modified()).modifies("opacity");ce(XOe,V,{transform(t,e){let r=wOe[t.method]||wOe.parity,n=t.separation||0,i=e.materialize(e.SOURCE).source,s,o;if(!i||!i.length)return;if(!t.method)return t.modified("method")&&(IOe(i),e=MOe(e,t)),e;if(i=i.filter(Y3t),!i.length)return;if(t.sort&&(i=i.slice().sort(t.sort)),s=IOe(i),e=MOe(e,t),s.length>=3&&LOe(s,n)){do s=r(s,n);while(s.length>=3&&LOe(s,n));s.length<3&&!xt(i).opacity&&(s.length>1&&(xt(s).opacity=0),xt(i).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(o=K3t(t.boundScale,t.boundOrient,+t.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));let a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),e}});function ZOe(t){V.call(this,null,t)}ce(ZOe,V,{transform(t,e){let r=e.dataflow;if(e.visit(e.ALL,n=>r.dirty(n)),e.fields&&e.fields.zindex){let n=e.source&&e.source[0];n&&(n.mark.zdirty=!0)}}});var Js=new Nn;function W4(t,e,r){return t[e]===r?0:(t[e]=r,1)}function X3t(t){var e=t.items[0].orient;return e===_0||e===b0}function J3t(t){let e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function Z3t(t,e,r,n){var i=e.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=J3t(s),l=i.range,c=i.offset,f=i.position,x=i.minExtent,d=i.maxExtent,h=s.title&&i.items[u[2]].items[0],p=i.titlePadding,m=i.bounds,g=h&&mie(h),y=0,A=0,S,T;switch(Js.clear().union(m),m.clear(),(S=u[0])>-1&&m.union(i.items[S].bounds),(S=u[1])>-1&&m.union(i.items[S].bounds),a){case Y4:y=f||0,A=-c,T=Math.max(x,Math.min(d,-m.y1)),m.add(0,-T).add(l,0),h&&rU(t,h,T,p,g,0,-1,m);break;case _0:y=-c,A=f||0,T=Math.max(x,Math.min(d,-m.x1)),m.add(-T,0).add(0,l),h&&rU(t,h,T,p,g,1,-1,m);break;case b0:y=r+c,A=f||0,T=Math.max(x,Math.min(d,m.x2)),m.add(0,0).add(T,l),h&&rU(t,h,T,p,g,1,1,m);break;case I2:y=f||0,A=n+c,T=Math.max(x,Math.min(d,m.y2)),m.add(0,0).add(l,T),h&&rU(t,h,T,p,0,0,1,m);break;default:y=i.x,A=i.y}return Zx(m.translate(y,A),i),W4(i,"x",y+o)|W4(i,"y",A+o)&&(i.bounds=Js,t.dirty(i),i.bounds=m,t.dirty(i)),i.mark.bounds.clear().union(m)}function rU(t,e,r,n,i,s,o,a){let u=e.bounds;if(e.auto){let l=o*(r+i+n),c=0,f=0;t.dirty(e),s?c=(e.x||0)-(e.x=l):f=(e.y||0)-(e.y=l),e.mark.bounds.clear().union(u.translate(-c,-f)),t.dirty(e)}a.union(u)}var POe=(t,e)=>Math.floor(Math.min(t,e)),kOe=(t,e)=>Math.ceil(Math.max(t,e));function eyt(t){var e=t.items,r=e.length,n=0,i,s;let o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;n<r;++n)if(i=e[n],s=i.items,i.marktype===iU)switch(i.role){case Oie:case Nie:case Die:break;case UOe:o.rowheaders.push(...s);break;case $Oe:o.rowfooters.push(...s);break;case HOe:o.colheaders.push(...s);break;case zOe:o.colfooters.push(...s);break;case jOe:o.rowtitle=s[0];break;case GOe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function tyt(t){return new Nn().set(0,0,t.width||0,t.height||0)}function ryt(t){let e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function jr(t,e,r){let n=Se(t)?t[e]:t;return n??(r!==void 0?r:0)}function BOe(t){return t<0?Math.ceil(-t):0}function e6e(t,e,r){var n=!r.nodirty,i=r.bounds===wie?tyt:ryt,s=Js.set(0,0,0,0),o=jr(r.align,w2),a=jr(r.align,L2),u=jr(r.padding,w2),l=jr(r.padding,L2),c=r.columns||e.length,f=c<=0?1:Math.ceil(e.length/c),x=e.length,d=Array(x),h=Array(c),p=0,m=Array(x),g=Array(f),y=0,A=Array(x),S=Array(x),T=Array(x),_,b,R,O,N,F,$,q,X,P,te;for(b=0;b<c;++b)h[b]=0;for(b=0;b<f;++b)g[b]=0;for(b=0;b<x;++b)F=e[b],N=T[b]=i(F),F.x=F.x||0,A[b]=0,F.y=F.y||0,S[b]=0,R=b%c,O=~~(b/c),p=Math.max(p,$=Math.ceil(N.x2)),y=Math.max(y,q=Math.ceil(N.y2)),h[R]=Math.max(h[R],$),g[O]=Math.max(g[O],q),d[b]=u+BOe(N.x1),m[b]=l+BOe(N.y1),n&&t.dirty(e[b]);for(b=0;b<x;++b)b%c===0&&(d[b]=0),b<c&&(m[b]=0);if(o===Cie)for(R=1;R<c;++R){for(te=0,b=R;b<x;b+=c)te<d[b]&&(te=d[b]);for(b=R;b<x;b+=c)d[b]=te+h[R-1]}else if(o===eU){for(te=0,b=0;b<x;++b)b%c&&te<d[b]&&(te=d[b]);for(b=0;b<x;++b)b%c&&(d[b]=te+p)}else for(o=!1,R=1;R<c;++R)for(b=R;b<x;b+=c)d[b]+=h[R-1];if(a===Cie)for(O=1;O<f;++O){for(te=0,b=O*c,_=b+c;b<_;++b)te<m[b]&&(te=m[b]);for(b=O*c;b<_;++b)m[b]=te+g[O-1]}else if(a===eU){for(te=0,b=c;b<x;++b)te<m[b]&&(te=m[b]);for(b=c;b<x;++b)m[b]=te+y}else for(a=!1,O=1;O<f;++O)for(b=O*c,_=b+c;b<_;++b)m[b]+=g[O-1];for(X=0,b=0;b<x;++b)X=d[b]+(b%c?X:0),A[b]+=X-e[b].x;for(R=0;R<c;++R)for(P=0,b=R;b<x;b+=c)P+=m[b],S[b]+=P-e[b].y;if(o&&jr(r.center,w2)&&f>1)for(b=0;b<x;++b)N=o===eU?p:h[b%c],X=N-T[b].x2-e[b].x-A[b],X>0&&(A[b]+=X/2);if(a&&jr(r.center,L2)&&c!==1)for(b=0;b<x;++b)N=a===eU?y:g[~~(b/c)],P=N-T[b].y2-e[b].y-S[b],P>0&&(S[b]+=P/2);for(b=0;b<x;++b)s.union(T[b].translate(A[b],S[b]));switch(X=jr(r.anchor,U3t),P=jr(r.anchor,$3t),jr(r.anchor,w2)){case Do:X-=s.width();break;case Tie:X-=s.width()/2}switch(jr(r.anchor,L2)){case Do:P-=s.height();break;case Tie:P-=s.height()/2}for(X=Math.round(X),P=Math.round(P),s.clear(),b=0;b<x;++b)e[b].mark.bounds.clear();for(b=0;b<x;++b)F=e[b],F.x+=A[b]+=X,F.y+=S[b]+=P,s.union(F.mark.bounds.union(F.bounds.translate(A[b],S[b]))),n&&t.dirty(F);return s}function nyt(t,e,r){var n=eyt(e),i=n.marks,s=r.bounds===wie?iyt:syt,o=r.offset,a=r.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,x,d,h,p,m;let g=e6e(t,i,r);g.empty()&&g.set(0,0,0,0),n.rowheaders&&(p=jr(r.headerBand,L2,null),c=nU(t,n.rowheaders,i,a,u,-jr(o,"rowHeader"),POe,0,s,"x1",0,a,1,p)),n.colheaders&&(p=jr(r.headerBand,w2,null),f=nU(t,n.colheaders,i,a,a,-jr(o,"columnHeader"),POe,1,s,"y1",0,1,a,p)),n.rowfooters&&(p=jr(r.footerBand,L2,null),x=nU(t,n.rowfooters,i,a,u,jr(o,"rowFooter"),kOe,0,s,"x2",a-1,a,1,p)),n.colfooters&&(p=jr(r.footerBand,w2,null),d=nU(t,n.colfooters,i,a,a,jr(o,"columnFooter"),kOe,1,s,"y2",l-a,1,a,p)),n.rowtitle&&(h=jr(r.titleAnchor,L2),m=jr(o,"rowTitle"),m=h===Do?x+m:c-m,p=jr(r.titleBand,L2,.5),qOe(t,n.rowtitle,m,0,g,p)),n.coltitle&&(h=jr(r.titleAnchor,w2),m=jr(o,"columnTitle"),m=h===Do?d+m:f-m,p=jr(r.titleBand,w2,.5),qOe(t,n.coltitle,m,1,g,p))}function iyt(t,e){return e==="x1"?t.x||0:e==="y1"?t.y||0:e==="x2"?(t.x||0)+(t.width||0):e==="y2"?(t.y||0)+(t.height||0):void 0}function syt(t,e){return t.bounds[e]}function nU(t,e,r,n,i,s,o,a,u,l,c,f,x,d){var h=r.length,p=0,m=0,g,y,A,S,T,_,b,R,O;if(!h)return p;for(g=c;g<h;g+=f)r[g]&&(p=o(p,u(r[g],l)));if(!e.length)return p;for(e.length>i&&(t.warn("Grid headers exceed limit: "+i),e=e.slice(0,i)),p+=s,y=0,S=e.length;y<S;++y)t.dirty(e[y]),e[y].mark.bounds.clear();for(g=c,y=0,S=e.length;y<S;++y,g+=f){for(_=e[y],T=_.mark.bounds,A=g;A>=0&&(b=r[A])==null;A-=x);a?(R=d==null?b.x:Math.round(b.bounds.x1+d*b.bounds.width()),O=p):(R=p,O=d==null?b.y:Math.round(b.bounds.y1+d*b.bounds.height())),T.union(_.bounds.translate(R-(_.x||0),O-(_.y||0))),_.x=R,_.y=O,t.dirty(_),m=o(m,T[l])}return m}function qOe(t,e,r,n,i,s){if(e){t.dirty(e);var o=r,a=r;n?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),e.bounds.translate(o-(e.x||0),a-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=o,e.y=a,t.dirty(e)}}function oyt(t,e){let r=t[e]||{};return(n,i)=>r[n]!=null?r[n]:t[n]!=null?t[n]:i}function ayt(t,e){let r=-1/0;return t.forEach(n=>{n.offset!=null&&(r=Math.max(r,n.offset))}),r>-1/0?r:e}function uyt(t,e,r,n,i,s,o){let a=oyt(r,e),u=ayt(t,a("offset",0)),l=a("anchor",Rie),c=l===Do?1:l===Tie?.5:0,f={align:Cie,bounds:a("bounds",wie),columns:a("direction")==="vertical"?1:t.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(e){case _0:f.anchor={x:Math.floor(n.x1)-u,column:Do,y:c*(o||n.height()+2*n.y1),row:l};break;case b0:f.anchor={x:Math.ceil(n.x2)+u,y:c*(o||n.height()+2*n.y1),row:l};break;case Y4:f.anchor={y:Math.floor(i.y1)-u,row:Do,x:c*(s||i.width()+2*i.x1),column:l};break;case I2:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case P3t:f.anchor={x:u,y:u};break;case k3t:f.anchor={x:s-u,y:u,column:Do};break;case B3t:f.anchor={x:u,y:o-u,row:Do};break;case q3t:f.anchor={x:s-u,y:o-u,column:Do,row:Do};break}return f}function lyt(t,e){var r=e.items[0],n=r.datum,i=r.orient,s=r.bounds,o=r.x,a=r.y,u,l;return r._bounds?r._bounds.clear().union(s):r._bounds=s.clone(),s.clear(),fyt(t,r,r.items[0].items[0]),s=cyt(r,s),u=2*r.padding,l=2*r.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),n.type===G3t&&xyt(r.items[0].items[0].items[0].items),i!==Fie&&(r.x=o=0,r.y=a=0),r.width=u,r.height=l,Zx(s.set(o,a,o+u,a+l),r),r.mark.bounds.clear().union(s),r}function cyt(t,e){return t.items.forEach(r=>e.union(r.bounds)),e.x1=t.padding,e.y1=t.padding,e}function fyt(t,e,r){var n=e.padding,i=n-r.x,s=n-r.y;if(!e.datum.title)(i||s)&&DO(t,r,i,s);else{var o=e.items[1].items[0],a=o.anchor,u=e.titlePadding||0,l=n-o.x,c=n-o.y;switch(o.orient){case _0:i+=Math.ceil(o.bounds.width())+u;break;case b0:case I2:break;default:s+=o.bounds.height()+u}switch((i||s)&&DO(t,r,i,s),o.orient){case _0:c+=V4(e,r,o,a,1,1);break;case b0:l+=V4(e,r,o,Do,0,0)+u,c+=V4(e,r,o,a,1,1);break;case I2:l+=V4(e,r,o,a,0,0),c+=V4(e,r,o,Do,-1,0,1)+u;break;default:l+=V4(e,r,o,a,0,0)}(l||c)&&DO(t,o,l,c),(l=Math.round(o.bounds.x1-n))<0&&(DO(t,r,-l,0),DO(t,o,-l,0))}}function V4(t,e,r,n,i,s,o){let a=t.datum.type!=="symbol",u=r.datum.vgrad,l=a&&(s||!u)&&!o?e.items[0]:e,c=l.bounds[i?"y2":"x2"]-t.padding,f=u&&s?c:0,x=u&&s?0:c,d=i<=0?0:mie(r);return Math.round(n===Rie?f:n===Do?x-d:.5*(c-d))}function DO(t,e,r,n){e.x+=r,e.y+=n,e.bounds.translate(r,n),e.mark.bounds.translate(r,n),t.dirty(e)}function xyt(t){let e=t.reduce((r,n)=>(r[n.column]=Math.max(n.bounds.x2-n.x,r[n.column]||0),r),{});t.forEach(r=>{r.width=e[r.column],r.height=r.bounds.y2-r.y})}function dyt(t,e,r,n,i){var s=e.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],x=s.items[1]&&s.items[1].items[0],d=a===_0||a===b0?n:r,h=0,p=0,m=0,g=0,y=0,A;if(o!==iU?a===_0?(h=i.y2,d=i.y1):a===b0?(h=i.y1,d=i.y2):(h=i.x1,d=i.x2):a===_0&&(h=n,d=0),A=u===Rie?h:u===Do?d:(h+d)/2,x&&x.text){switch(a){case Y4:case I2:y=f.bounds.height()+c;break;case _0:g=f.bounds.width()+c;break;case b0:g=-f.bounds.width()-c;break}Js.clear().union(x.bounds),Js.translate(g-(x.x||0),y-(x.y||0)),W4(x,"x",g)|W4(x,"y",y)&&(t.dirty(x),x.bounds.clear().union(Js),x.mark.bounds.clear().union(Js),t.dirty(x)),Js.clear().union(x.bounds)}else Js.clear();switch(Js.union(f.bounds),a){case Y4:p=A,m=i.y1-Js.height()-l;break;case _0:p=i.x1-Js.width()-l,m=A;break;case b0:p=i.x2+Js.width()+l,m=A;break;case I2:p=A,m=i.y2+l;break;default:p=s.x,m=s.y}return W4(s,"x",p)|W4(s,"y",m)&&(Js.translate(p,m),t.dirty(s),s.bounds.clear().union(Js),e.bounds.clear().union(Js),t.dirty(s)),s.bounds}function t6e(t){V.call(this,null,t)}ce(t6e,V,{transform(t,e){let r=e.dataflow;return t.mark.items.forEach(n=>{t.layout&&nyt(r,n,t.layout),pyt(r,n,t)}),hyt(t.mark.group)?e.reflow():e}});function hyt(t){return t&&t.mark.role!=="legend-entry"}function pyt(t,e,r){var n=e.items,i=Math.max(0,e.width||0),s=Math.max(0,e.height||0),o=new Nn().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,x,d,h,p;for(h=0,p=n.length;h<p;++h)switch(f=n[h],f.role){case Oie:d=X3t(f)?a:u,d.union(Z3t(t,f,i,s));break;case Die:c=f;break;case Nie:l.push(lyt(t,f));break;case j3t:case H3t:case UOe:case $Oe:case jOe:case HOe:case zOe:case GOe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){let m={};l.forEach(g=>{x=g.orient||b0,x!==Fie&&(m[x]||(m[x]=[])).push(g)});for(let g in m){let y=m[g];e6e(t,y,uyt(y,g,r.legends,a,u,i,s))}l.forEach(g=>{let y=g.bounds;if(y.equals(g._bounds)||(g.bounds=g._bounds,t.dirty(g),g.bounds=y,t.dirty(g)),r.autosize&&(r.autosize.type===QOe||r.autosize.type===VOe||r.autosize.type===WOe))switch(g.orient){case _0:case b0:o.add(y.x1,0).add(y.x2,0);break;case Y4:case I2:o.add(0,y.y1).add(0,y.y2)}else o.union(y)})}o.union(a).union(u),c&&o.union(dyt(t,c,i,s,o)),e.clip&&o.set(0,0,e.width||0,e.height||0),myt(t,e,o,r)}function myt(t,e,r,n){let i=n.autosize||{},s=i.type;if(t._autosize<1||!s)return;let o=t._width,a=t._height,u=Math.max(0,e.width||0),l=Math.max(0,Math.ceil(-r.x1)),c=Math.max(0,e.height||0),f=Math.max(0,Math.ceil(-r.y1)),x=Math.max(0,Math.ceil(r.x2-u)),d=Math.max(0,Math.ceil(r.y2-c));if(i.contains===z3t){let h=t.padding();o-=h.left+h.right,a-=h.top+h.bottom}s===Fie?(l=0,f=0,u=o,c=a):s===QOe?(u=Math.max(0,o-l-x),c=Math.max(0,a-f-d)):s===VOe?(u=Math.max(0,o-l-x),a=c+f+d):s===WOe?(o=u+l+x,c=Math.max(0,a-f-d)):s===Q3t&&(o=u+l+x,a=c+f+d),t._resizeView(o,a,u,c,[l,f],i.resize)}var qie={};qo(qie,{axisticks:()=>s6e,datajoin:()=>o6e,encode:()=>a6e,legendentries:()=>u6e,linkpath:()=>Pie,pie:()=>kie,scale:()=>d6e,sortitems:()=>p6e,stack:()=>Bie});function s6e(t){V.call(this,null,t)}ce(s6e,V,{transform(t,e){if(this.value&&!t.modified())return e.StopPropagation;var r=e.dataflow.locale(),n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=this.value,s=t.scale,o=t.count==null?t.values?t.values.length:10:t.count,a=vq(s,o,t.minstep),u=t.format||Pne(r,s,a,t.formatSpecifier,t.formatType,!!t.values),l=t.values?Mne(s,t.values,a):_q(s,a);return i&&(n.rem=i),i=l.map((c,f)=>wt({index:f/(l.length-1||1),value:c,label:u(c)})),t.extra&&i.length&&i.push(wt({index:-1,extra:{value:i[0].value},label:""})),n.source=i,n.add=i,this.value=i,n}});function o6e(t){V.call(this,null,t)}function gyt(){return wt({})}function yyt(t){let e=mg().test(r=>r.exit);return e.lookup=r=>e.get(t(r)),e}ce(o6e,V,{transform(t,e){var r=e.dataflow,n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.item||gyt,s=t.key||He,o=this.value;return j(n.encode)&&(n.encode=null),o&&(t.modified("key")||e.modified(s))&&W("DataJoin does not support modified key function or fields."),o||(e=e.addAll(),this.value=o=yyt(s)),e.visit(e.ADD,a=>{let u=s(a),l=o.get(u);l?l.exit?(o.empty--,n.add.push(l)):n.mod.push(l):(l=i(a),o.set(u,l),n.add.push(l)),l.datum=a,l.exit=!1}),e.visit(e.MOD,a=>{let u=s(a),l=o.get(u);l&&(l.datum=a,n.mod.push(l))}),e.visit(e.REM,a=>{let u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(n.rem.push(l),l.exit=!0,++o.empty)}),e.changed(e.ADD_MOD)&&n.modifies("datum"),(e.clean()||t.clean&&o.empty>r.cleanThreshold)&&r.runAfter(o.clean),n}});function a6e(t){V.call(this,null,t)}ce(a6e,V,{transform(t,e){var r=e.fork(e.ADD_REM),n=t.mod||!1,i=t.encoders,s=e.encode;if(j(s))if(r.changed()||s.every(f=>i[f]))s=s[0],r.encode=null;else return e.StopPropagation;var o=s==="enter",a=i.update||zp,u=i.enter||zp,l=i.exit||zp,c=(s&&!o?i[s]:a)||zp;if(e.changed(e.ADD)&&(e.visit(e.ADD,f=>{u(f,t),a(f,t)}),r.modifies(u.output),r.modifies(a.output),c!==zp&&c!==a&&(e.visit(e.ADD,f=>{c(f,t)}),r.modifies(c.output))),e.changed(e.REM)&&l!==zp&&(e.visit(e.REM,f=>{l(f,t)}),r.modifies(l.output)),o||c!==zp){let f=e.MOD|(t.modified()?e.REFLOW:0);o?(e.visit(f,x=>{let d=u(x,t)||n;(c(x,t)||d)&&r.mod.push(x)}),r.mod.length&&r.modifies(u.output)):e.visit(f,x=>{(c(x,t)||n)&&r.mod.push(x)}),r.mod.length&&r.modifies(c.output)}return r.changed()?r:e.StopPropagation}});function u6e(t){V.call(this,[],t)}ce(u6e,V,{transform(t,e){if(this.value!=null&&!t.modified())return e.StopPropagation;var r=e.dataflow.locale(),n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=this.value,s=t.type||xO,o=t.scale,a=+t.limit,u=vq(o,t.count==null?5:t.count,t.minstep),l=!!t.values||s===xO,c=t.format||Bne(r,o,u,s,t.formatSpecifier,t.formatType,l),f=t.values||kne(o,u),x,d,h,p,m;return i&&(n.rem=i),s===xO?(a&&f.length>a?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),m=!0):i=f,Je(h=t.size)?(!t.values&&o(i[0])===0&&(i=i.slice(1)),p=i.reduce((g,y)=>Math.max(g,h(y,t)),0)):h=Zr(p=h||8),i=i.map((g,y)=>wt({index:y,label:c(g,y,i),value:g,offset:p,size:h(g,t)})),m&&(m=f[i.length],i.push(wt({index:i.length,label:`\u2026${f.length-i.length} entries`,value:m,offset:p,size:h(m,t)})))):s===oRe?(x=o.domain(),d=Eq(o,x[0],xt(x)),f.length<3&&!t.values&&x[0]!==xt(x)&&(f=[x[0],xt(x)]),i=f.map((g,y)=>wt({index:y,label:c(g,y,f),value:g,perc:d(g)}))):(h=f.length-1,d=lRe(o),i=f.map((g,y)=>wt({index:y,label:c(g,y,f),value:g,perc:y?d(g):0,perc2:y===h?1:d(f[y+1])}))),n.source=i,n.add=i,this.value=i,n}});var Eyt=t=>t.source.x,Ayt=t=>t.source.y,Syt=t=>t.target.x,vyt=t=>t.target.y;function Pie(t){V.call(this,{},t)}Pie.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ce(Pie,V,{transform(t,e){var r=t.sourceX||Eyt,n=t.sourceY||Ayt,i=t.targetX||Syt,s=t.targetY||vyt,o=t.as||"path",a=t.orient||"vertical",u=t.shape||"line",l=r6e.get(u+"-"+a)||r6e.get(u);return l||W("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,c=>{c[o]=l(r(c),n(c),i(c),s(c))}),e.reflow(t.modified()).modifies(o)}});var l6e=(t,e,r,n)=>"M"+t+","+e+"L"+r+","+n,_yt=(t,e,r,n)=>l6e(e*Math.cos(t),e*Math.sin(t),n*Math.cos(r),n*Math.sin(r)),c6e=(t,e,r,n)=>{var i=r-t,s=n-e,o=Math.sqrt(i*i+s*s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+t+","+e+"A"+o+","+o+" "+a+" 0 1 "+r+","+n},byt=(t,e,r,n)=>c6e(e*Math.cos(t),e*Math.sin(t),n*Math.cos(r),n*Math.sin(r)),f6e=(t,e,r,n)=>{let i=r-t,s=n-e,o=.2*(i+s),a=.2*(s-i);return"M"+t+","+e+"C"+(t+o)+","+(e+a)+" "+(r+a)+","+(n-o)+" "+r+","+n},Tyt=(t,e,r,n)=>f6e(e*Math.cos(t),e*Math.sin(t),n*Math.cos(r),n*Math.sin(r)),Cyt=(t,e,r,n)=>"M"+t+","+e+"V"+n+"H"+r,Ryt=(t,e,r,n)=>"M"+t+","+e+"H"+r+"V"+n,Oyt=(t,e,r,n)=>{let i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),a=Math.sin(r),u=Math.abs(r-t)>Math.PI?r<=t:r>t;return"M"+e*i+","+e*s+"A"+e+","+e+" 0 0,"+(u?1:0)+" "+e*o+","+e*a+"L"+n*o+","+n*a},Dyt=(t,e,r,n)=>{let i=(t+r)/2;return"M"+t+","+e+"C"+i+","+e+" "+i+","+n+" "+r+","+n},Nyt=(t,e,r,n)=>{let i=(e+n)/2;return"M"+t+","+e+"C"+t+","+i+" "+r+","+i+" "+r+","+n},Fyt=(t,e,r,n)=>{let i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),a=Math.sin(r),u=(e+n)/2;return"M"+e*i+","+e*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+n*o+","+n*a},r6e=mg({line:l6e,"line-radial":_yt,arc:c6e,"arc-radial":byt,curve:f6e,"curve-radial":Tyt,"orthogonal-horizontal":Cyt,"orthogonal-vertical":Ryt,"orthogonal-radial":Oyt,"diagonal-horizontal":Dyt,"diagonal-vertical":Nyt,"diagonal-radial":Fyt});function kie(t){V.call(this,null,t)}kie.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ce(kie,V,{transform(t,e){var r=t.as||["startAngle","endAngle"],n=r[0],i=r[1],s=t.field||Bx,o=t.startAngle||0,a=t.endAngle!=null?t.endAngle:2*Math.PI,u=e.source,l=u.map(s),c=l.length,f=o,x=(a-o)/p4(l),d=Dn(c),h,p,m;for(t.sort&&d.sort((g,y)=>l[g]-l[y]),h=0;h<c;++h)m=l[d[h]],p=u[d[h]],p[n]=f,p[i]=f+=m*x;return this.value=l,e.reflow(t.modified()).modifies(r)}});var wyt=5;function Lyt(t){let e=t.type;return!t.bins&&(e===Yg||e===U4||e===$4)}function x6e(t){return cO(t)&&t!==A0}var Iyt=Bi(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function d6e(t){V.call(this,null,t),this.modified(!0)}ce(d6e,V,{transform(t,e){var r=e.dataflow,n=this.value,i=Myt(t);(!n||i!==n.type)&&(this.value=n=Mt(i)());for(i in t)if(!Iyt[i]){if(i==="padding"&&x6e(n.type))continue;Je(n[i])?n[i](t[i]):r.warn("Unsupported scale property: "+i)}return $yt(n,t,Uyt(n,t,kyt(n,t,r))),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function Myt(t){var e=t.type,r="",n;return e===A0?A0+"-"+Yg:(Pyt(t)&&(n=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(t.domainMid!=null):0,r=n===2?A0+"-":n===3?Kg+"-":""),(r+e||Yg).toLowerCase())}function Pyt(t){let e=t.type;return cO(e)&&e!==v2&&e!==_2&&(t.scheme||t.range&&t.range.length&&t.range.every(he))}function kyt(t,e,r){let n=Byt(t,e.domainRaw,r);if(n>-1)return n;var i=e.domain,s=t.type,o=e.zero||e.zero===void 0&&Lyt(t),a,u;if(!i)return 0;if(x6e(s)&&e.padding&&i[0]!==xt(i)&&(i=qyt(s,i,e.range,e.padding,e.exponent,e.constant)),(o||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),e.domainMin!=null&&(i[0]=e.domainMin),e.domainMax!=null&&(i[a]=e.domainMax),e.domainMid!=null)){u=e.domainMid;let l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&r.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return t.domain(h6e(s,i,r)),s===pq&&t.unknown(e.domainImplicit?N4:void 0),e.nice&&t.nice&&t.nice(e.nice!==!0&&vq(t,e.nice)||null),i.length}function Byt(t,e,r){return e?(t.domain(h6e(t.type,e,r)),e.length):-1}function qyt(t,e,r,n,i,s){var o=Math.abs(xt(r)-r[0]),a=o/(o-2*n),u=t===mf?dk(e,null,a):t===$4?VC(e,null,a,.5):t===U4?VC(e,null,a,i||1):t===sO?hk(e,null,a,s||1):xk(e,null,a);return e=e.slice(),e[0]=u[0],e[e.length-1]=u[1],e}function h6e(t,e,r){if(Nne(t)){var n=Math.abs(e.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));n!==e.length&&r.warn("Log scale domain includes zero: "+fe(e))}return e}function Uyt(t,e,r){let n=e.bins;if(n&&!j(n)){let i=t.domain(),s=i[0],o=xt(i),a=n.step,u=n.start==null?s:n.start,l=n.stop==null?o:n.stop;a||W("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),n=Dn(u,l+a/2,a)}return n?t.bins=n:t.bins&&delete t.bins,t.type===gq&&(n?!e.domain&&!e.domainRaw&&(t.domain(n),r=n.length):t.bins=t.domain()),r}function $yt(t,e,r){var n=t.type,i=e.round||!1,s=e.range;if(e.rangeStep!=null)s=jyt(n,e,r);else if(e.scheme&&(s=Hyt(n,e,r),Je(s))){if(t.interpolator)return t.interpolator(s);W(`Scale type ${n} does not support interpolating color schemes.`)}if(s&&Fne(n))return t.interpolator(fO(Mie(s,e.reverse),e.interpolate,e.interpolateGamma));s&&e.interpolate&&t.interpolate?t.interpolate(Aq(e.interpolate,e.interpolateGamma)):Je(t.round)?t.round(i):Je(t.rangeRound)&&t.interpolate(i?hf:Ys),s&&t.range(Mie(s,e.reverse))}function jyt(t,e,r){t!==Tne&&t!==mq&&W("Only band and point scales support rangeStep.");var n=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,i=t===mq?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*iO(r,i,n)]}function Hyt(t,e,r){var n=e.schemeExtent,i,s;return j(e.scheme)?s=fO(e.scheme,e.interpolate,e.interpolateGamma):(i=e.scheme.toLowerCase(),s=Sq(i),s||W(`Unrecognized scheme name: ${e.scheme}`)),r=t===aO?r+1:t===gq?r-1:t===Wg||t===oO?+e.schemeCount||wyt:r,Fne(t)?n6e(s,n,e.reverse):Je(s)?Ine(n6e(s,n),r):t===pq?s:s.slice(0,r)}function n6e(t,e,r){return Je(t)&&(e||r)?Lne(t,Mie(e||[0,1],r)):t}function Mie(t,e){return e?t.slice().reverse():t}function p6e(t){V.call(this,null,t)}ce(p6e,V,{transform(t,e){let r=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return r&&e.source.sort(lf(t.sort)),this.modified(r),e}});var i6e="zero",m6e="center",g6e="normalize",y6e=["y0","y1"];function Bie(t){V.call(this,null,t)}Bie.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:i6e,values:[i6e,m6e,g6e]},{name:"as",type:"string",array:!0,length:2,default:y6e}]};ce(Bie,V,{transform(t,e){var r=t.as||y6e,n=r[0],i=r[1],s=lf(t.sort),o=t.field||Bx,a=t.offset===m6e?zyt:t.offset===g6e?Gyt:Qyt,u,l,c,f;for(u=Vyt(e.source,t.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,n,i);return e.reflow(t.modified()).modifies(r)}});function zyt(t,e,r,n,i){for(var s=(e-t.sum)/2,o=t.length,a=0,u;a<o;++a)u=t[a],u[n]=s,u[i]=s+=Math.abs(r(u))}function Gyt(t,e,r,n,i){for(var s=1/t.sum,o=0,a=t.length,u=0,l=0,c;u<a;++u)c=t[u],c[n]=o,c[i]=o=s*(l+=Math.abs(r(c)))}function Qyt(t,e,r,n,i){for(var s=0,o=0,a=t.length,u=0,l,c;u<a;++u)c=t[u],l=+r(c),l<0?(c[n]=o,c[i]=o+=l):(c[n]=s,c[i]=s+=l)}function Vyt(t,e,r,n){var i=[],s=p=>p(c),o,a,u,l,c,f,x,d,h;if(e==null)i.push(t.slice());else for(o={},a=0,u=t.length;a<u;++a)c=t[a],f=e.map(s),x=o[f],x||(o[f]=x=[],i.push(x)),x.push(c);for(f=0,h=0,l=i.length;f<l;++f){for(x=i[f],a=0,d=0,u=x.length;a<u;++a)d+=Math.abs(n(x[a]));x.sum=d,d>h&&(h=d),r&&x.sort(r)}return i.max=h,i}var noe={};qo(noe,{contour:()=>Yse,geojson:()=>Xse,geopath:()=>Jse,geopoint:()=>Zse,geoshape:()=>eoe,graticule:()=>toe,heatmap:()=>roe,isocontour:()=>Vse,kde2d:()=>Wse,projection:()=>ODe});var Le=1e-6,o3=1e-12,ot=Math.PI,xr=ot/2,K4=ot/4,Fn=ot*2,dr=180/ot,nt=ot/180,tt=Math.abs,dl=Math.atan,pn=Math.atan2,Ne=Math.cos,NO=Math.ceil,sU=Math.exp;var oU=Math.hypot,a3=Math.log,aU=Math.pow,De=Math.sin,Zs=Math.sign||function(t){return t>0?1:t<0?-1:0},hr=Math.sqrt,X4=Math.tan;function uU(t){return t>1?0:t<-1?ot:Math.acos(t)}function Fr(t){return t>1?xr:t<-1?-xr:Math.asin(t)}function wr(){}function lU(t,e){t&&A6e.hasOwnProperty(t.type)&&A6e[t.type](t,e)}var E6e={Feature:function(t,e){lU(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,i=r.length;++n<i;)lU(r[n].geometry,e)}},A6e={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)t=r[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){Uie(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)Uie(r[n],e,0)},Polygon:function(t,e){S6e(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)S6e(r[n],e)},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,i=r.length;++n<i;)lU(r[n],e)}};function Uie(t,e,r){var n=-1,i=t.length-r,s;for(e.lineStart();++n<i;)s=t[n],e.point(s[0],s[1],s[2]);e.lineEnd()}function S6e(t,e){var r=-1,n=t.length;for(e.polygonStart();++r<n;)Uie(t[r],e,1);e.polygonEnd()}function ma(t,e){t&&E6e.hasOwnProperty(t.type)?E6e[t.type](t,e):lU(t,e)}var FO=new Ur,cU=new Ur,v6e,_6e,$ie,jie,Hie,T0={point:wr,lineStart:wr,lineEnd:wr,polygonStart:function(){FO=new Ur,T0.lineStart=Wyt,T0.lineEnd=Yyt},polygonEnd:function(){var t=+FO;cU.add(t<0?Fn+t:t),this.lineStart=this.lineEnd=this.point=wr},sphere:function(){cU.add(Fn)}};function Wyt(){T0.point=Kyt}function Yyt(){b6e(v6e,_6e)}function Kyt(t,e){T0.point=b6e,v6e=t,_6e=e,t*=nt,e*=nt,$ie=t,jie=Ne(e=e/2+K4),Hie=De(e)}function b6e(t,e){t*=nt,e*=nt,e=e/2+K4;var r=t-$ie,n=r>=0?1:-1,i=n*r,s=Ne(e),o=De(e),a=Hie*o,u=jie*s+a*Ne(i),l=a*n*De(i);FO.add(pn(l,u)),$ie=t,jie=s,Hie=o}function zie(t){return cU=new Ur,ma(t,T0),cU*2}function u3(t){return[pn(t[1],t[0]),Fr(t[2])]}function hl(t){var e=t[0],r=t[1],n=Ne(r);return[n*Ne(e),n*De(e),De(r)]}function wO(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function rd(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function fU(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function LO(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function l3(t){var e=hr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var sn,ga,mn,Eu,c3,O6e,D6e,J4,IO,M2,id,nd={point:Gie,lineStart:T6e,lineEnd:C6e,polygonStart:function(){nd.point=F6e,nd.lineStart=Xyt,nd.lineEnd=Jyt,IO=new Ur,T0.polygonStart()},polygonEnd:function(){T0.polygonEnd(),nd.point=Gie,nd.lineStart=T6e,nd.lineEnd=C6e,FO<0?(sn=-(mn=180),ga=-(Eu=90)):IO>Le?Eu=90:IO<-Le&&(ga=-90),id[0]=sn,id[1]=mn},sphere:function(){sn=-(mn=180),ga=-(Eu=90)}};function Gie(t,e){M2.push(id=[sn=t,mn=t]),e<ga&&(ga=e),e>Eu&&(Eu=e)}function N6e(t,e){var r=hl([t*nt,e*nt]);if(J4){var n=rd(J4,r),i=[n[1],-n[0],0],s=rd(i,n);l3(s),s=u3(s);var o=t-c3,a=o>0?1:-1,u=s[0]*dr*a,l,c=tt(o)>180;c^(a*c3<u&&u<a*t)?(l=s[1]*dr,l>Eu&&(Eu=l)):(u=(u+360)%360-180,c^(a*c3<u&&u<a*t)?(l=-s[1]*dr,l<ga&&(ga=l)):(e<ga&&(ga=e),e>Eu&&(Eu=e))),c?t<c3?yu(sn,t)>yu(sn,mn)&&(mn=t):yu(t,mn)>yu(sn,mn)&&(sn=t):mn>=sn?(t<sn&&(sn=t),t>mn&&(mn=t)):t>c3?yu(sn,t)>yu(sn,mn)&&(mn=t):yu(t,mn)>yu(sn,mn)&&(sn=t)}else M2.push(id=[sn=t,mn=t]);e<ga&&(ga=e),e>Eu&&(Eu=e),J4=r,c3=t}function T6e(){nd.point=N6e}function C6e(){id[0]=sn,id[1]=mn,nd.point=Gie,J4=null}function F6e(t,e){if(J4){var r=t-c3;IO.add(tt(r)>180?r+(r>0?360:-360):r)}else O6e=t,D6e=e;T0.point(t,e),N6e(t,e)}function Xyt(){T0.lineStart()}function Jyt(){F6e(O6e,D6e),T0.lineEnd(),tt(IO)>Le&&(sn=-(mn=180)),id[0]=sn,id[1]=mn,J4=null}function yu(t,e){return(e-=t)<0?e+360:e}function Zyt(t,e){return t[0]-e[0]}function R6e(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Qie(t){var e,r,n,i,s,o,a;if(Eu=mn=-(sn=ga=1/0),M2=[],ma(t,nd),r=M2.length){for(M2.sort(Zyt),e=1,n=M2[0],s=[n];e<r;++e)i=M2[e],R6e(n,i[0])||R6e(n,i[1])?(yu(n[0],i[1])>yu(n[0],n[1])&&(n[1]=i[1]),yu(i[0],n[1])>yu(n[0],n[1])&&(n[0]=i[0])):s.push(n=i);for(o=-1/0,r=s.length-1,e=0,n=s[r];e<=r;n=i,++e)i=s[e],(a=yu(n[1],i[0]))>o&&(o=a,sn=i[0],mn=n[1])}return M2=id=null,sn===1/0||ga===1/0?[[NaN,NaN],[NaN,NaN]]:[[sn,ga],[mn,Eu]]}var MO,xU,dU,hU,pU,mU,gU,yU,Vie,Wie,Yie,I6e,M6e,No,Fo,wo,C0={sphere:wr,point:Kie,lineStart:w6e,lineEnd:L6e,polygonStart:function(){C0.lineStart=rEt,C0.lineEnd=nEt},polygonEnd:function(){C0.lineStart=w6e,C0.lineEnd=L6e}};function Kie(t,e){t*=nt,e*=nt;var r=Ne(e);PO(r*Ne(t),r*De(t),De(e))}function PO(t,e,r){++MO,dU+=(t-dU)/MO,hU+=(e-hU)/MO,pU+=(r-pU)/MO}function w6e(){C0.point=eEt}function eEt(t,e){t*=nt,e*=nt;var r=Ne(e);No=r*Ne(t),Fo=r*De(t),wo=De(e),C0.point=tEt,PO(No,Fo,wo)}function tEt(t,e){t*=nt,e*=nt;var r=Ne(e),n=r*Ne(t),i=r*De(t),s=De(e),o=pn(hr((o=Fo*s-wo*i)*o+(o=wo*n-No*s)*o+(o=No*i-Fo*n)*o),No*n+Fo*i+wo*s);xU+=o,mU+=o*(No+(No=n)),gU+=o*(Fo+(Fo=i)),yU+=o*(wo+(wo=s)),PO(No,Fo,wo)}function L6e(){C0.point=Kie}function rEt(){C0.point=iEt}function nEt(){P6e(I6e,M6e),C0.point=Kie}function iEt(t,e){I6e=t,M6e=e,t*=nt,e*=nt,C0.point=P6e;var r=Ne(e);No=r*Ne(t),Fo=r*De(t),wo=De(e),PO(No,Fo,wo)}function P6e(t,e){t*=nt,e*=nt;var r=Ne(e),n=r*Ne(t),i=r*De(t),s=De(e),o=Fo*s-wo*i,a=wo*n-No*s,u=No*i-Fo*n,l=oU(o,a,u),c=Fr(l),f=l&&-c/l;Vie.add(f*o),Wie.add(f*a),Yie.add(f*u),xU+=c,mU+=c*(No+(No=n)),gU+=c*(Fo+(Fo=i)),yU+=c*(wo+(wo=s)),PO(No,Fo,wo)}function Xie(t){MO=xU=dU=hU=pU=mU=gU=yU=0,Vie=new Ur,Wie=new Ur,Yie=new Ur,ma(t,C0);var e=+Vie,r=+Wie,n=+Yie,i=oU(e,r,n);return i<o3&&(e=mU,r=gU,n=yU,xU<Le&&(e=dU,r=hU,n=pU),i=oU(e,r,n),i<o3)?[NaN,NaN]:[pn(r,e)*dr,Fr(n/i)*dr]}function kO(t,e){function r(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(r.invert=function(n,i){return n=e.invert(n,i),n&&t.invert(n[0],n[1])}),r}function Jie(t,e){return tt(t)>ot&&(t-=Math.round(t/Fn)*Fn),[t,e]}Jie.invert=Jie;function Zie(t,e,r){return(t%=Fn)?e||r?kO(B6e(t),q6e(e,r)):B6e(t):e||r?q6e(e,r):Jie}function k6e(t){return function(e,r){return e+=t,tt(e)>ot&&(e-=Math.round(e/Fn)*Fn),[e,r]}}function B6e(t){var e=k6e(t);return e.invert=k6e(-t),e}function q6e(t,e){var r=Ne(t),n=De(t),i=Ne(e),s=De(e);function o(a,u){var l=Ne(u),c=Ne(a)*l,f=De(a)*l,x=De(u),d=x*r+c*n;return[pn(f*i-d*s,c*r-x*n),Fr(d*i+f*s)]}return o.invert=function(a,u){var l=Ne(u),c=Ne(a)*l,f=De(a)*l,x=De(u),d=x*i-f*s;return[pn(f*i+x*s,c*r+d*n),Fr(d*r-c*n)]},o}function U6e(t){t=Zie(t[0]*nt,t[1]*nt,t.length>2?t[2]*nt:0);function e(r){return r=t(r[0]*nt,r[1]*nt),r[0]*=dr,r[1]*=dr,r}return e.invert=function(r){return r=t.invert(r[0]*nt,r[1]*nt),r[0]*=dr,r[1]*=dr,r},e}function j6e(t,e,r,n,i,s){if(r){var o=Ne(e),a=De(e),u=n*r;i==null?(i=e+n*Fn,s=e-u/2):(i=$6e(o,i),s=$6e(o,s),(n>0?i<s:i>s)&&(i+=n*Fn));for(var l,c=i;n>0?c>s:c<s;c-=u)l=u3([o,-a*Ne(c),-a*De(c)]),t.point(l[0],l[1])}}function $6e(t,e){e=hl(e),e[0]-=t,l3(e);var r=uU(-e[1]);return((-e[2]<0?-r:r)+Fn-Le)%Fn}function EU(){var t=[],e;return{point:function(r,n,i){e.push([r,n,i])},lineStart:function(){t.push(e=[])},lineEnd:wr,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var r=t;return t=[],e=null,r}}}function Z4(t,e){return tt(t[0]-e[0])<Le&&tt(t[1]-e[1])<Le}function AU(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function SU(t,e,r,n,i){var s=[],o=[],a,u;if(t.forEach(function(h){if(!((p=h.length-1)<=0)){var p,m=h[0],g=h[p],y;if(Z4(m,g)){if(!m[2]&&!g[2]){for(i.lineStart(),a=0;a<p;++a)i.point((m=h[a])[0],m[1]);i.lineEnd();return}g[0]+=2*Le}s.push(y=new AU(m,h,null,!0)),o.push(y.o=new AU(m,null,y,!1)),s.push(y=new AU(g,h,null,!1)),o.push(y.o=new AU(g,null,y,!0))}}),!!s.length){for(o.sort(e),H6e(s),H6e(o),a=0,u=o.length;a<u;++a)o[a].e=r=!r;for(var l=s[0],c,f;;){for(var x=l,d=!0;x.v;)if((x=x.n)===l)return;c=x.z,i.lineStart();do{if(x.v=x.o.v=!0,x.e){if(d)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else n(x.x,x.n.x,1,i);x=x.n}else{if(d)for(c=x.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else n(x.x,x.p.x,-1,i);x=x.p}x=x.o,c=x.z,d=!d}while(!x.v);i.lineEnd()}}}function H6e(t){if(e=t.length){for(var e,r=0,n=t[0],i;++r<e;)n.n=i=t[r],i.p=n,n=i;n.n=i=t[0],i.p=n}}function ese(t){return tt(t[0])<=ot?t[0]:Zs(t[0])*((tt(t[0])+ot)%Fn-ot)}function z6e(t,e){var r=ese(e),n=e[1],i=De(n),s=[De(r),-Ne(r),0],o=0,a=0,u=new Ur;i===1?n=xr+Le:i===-1&&(n=-xr-Le);for(var l=0,c=t.length;l<c;++l)if(x=(f=t[l]).length)for(var f,x,d=f[x-1],h=ese(d),p=d[1]/2+K4,m=De(p),g=Ne(p),y=0;y<x;++y,h=S,m=_,g=b,d=A){var A=f[y],S=ese(A),T=A[1]/2+K4,_=De(T),b=Ne(T),R=S-h,O=R>=0?1:-1,N=O*R,F=N>ot,$=m*_;if(u.add(pn($*O*De(N),g*b+$*Ne(N))),o+=F?R+O*Fn:R,F^h>=r^S>=r){var q=rd(hl(d),hl(A));l3(q);var X=rd(s,q);l3(X);var P=(F^R>=0?-1:1)*Fr(X[2]);(n>P||n===P&&(q[0]||q[1]))&&(a+=F^R>=0?1:-1)}}return(o<-Le||o<Le&&u<-o3)^a&1}function vU(t,e,r,n){return function(i){var s=e(i),o=EU(),a=e(o),u=!1,l,c,f,x={point:d,lineStart:p,lineEnd:m,polygonStart:function(){x.point=g,x.lineStart=y,x.lineEnd=A,c=[],l=[]},polygonEnd:function(){x.point=d,x.lineStart=p,x.lineEnd=m,c=h4(c);var S=z6e(l,n);c.length?(u||(i.polygonStart(),u=!0),SU(c,oEt,S,r,i)):S&&(u||(i.polygonStart(),u=!0),i.lineStart(),r(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),r(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(S,T){t(S,T)&&i.point(S,T)}function h(S,T){s.point(S,T)}function p(){x.point=h,s.lineStart()}function m(){x.point=d,s.lineEnd()}function g(S,T){f.push([S,T]),a.point(S,T)}function y(){a.lineStart(),f=[]}function A(){g(f[0][0],f[0][1]),a.lineEnd();var S=a.clean(),T=o.result(),_,b=T.length,R,O,N;if(f.pop(),l.push(f),f=null,!!b){if(S&1){if(O=T[0],(R=O.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),_=0;_<R;++_)i.point((N=O[_])[0],N[1]);i.lineEnd()}return}b>1&&S&2&&T.push(T.pop().concat(T.shift())),c.push(T.filter(sEt))}}return x}}function sEt(t){return t.length>1}function oEt(t,e){return((t=t.x)[0]<0?t[1]-xr-Le:xr-t[1])-((e=e.x)[0]<0?e[1]-xr-Le:xr-e[1])}var tse=vU(function(){return!0},aEt,lEt,[-ot,-xr]);function aEt(t){var e=NaN,r=NaN,n=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(s,o){var a=s>0?ot:-ot,u=tt(s-e);tt(u-ot)<Le?(t.point(e,r=(r+o)/2>0?xr:-xr),t.point(n,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(s,r),i=0):n!==a&&u>=ot&&(tt(e-n)<Le&&(e-=n*Le),tt(s-a)<Le&&(s-=a*Le),r=uEt(e,r,s,o),t.point(n,r),t.lineEnd(),t.lineStart(),t.point(a,r),i=0),t.point(e=s,r=o),n=a},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-i}}}function uEt(t,e,r,n){var i,s,o=De(t-r);return tt(o)>Le?dl((De(e)*(s=Ne(n))*De(r)-De(n)*(i=Ne(e))*De(t))/(i*s*o)):(e+n)/2}function lEt(t,e,r,n){var i;if(t==null)i=r*xr,n.point(-ot,i),n.point(0,i),n.point(ot,i),n.point(ot,0),n.point(ot,-i),n.point(0,-i),n.point(-ot,-i),n.point(-ot,0),n.point(-ot,i);else if(tt(t[0]-e[0])>Le){var s=t[0]<e[0]?ot:-ot;i=r*s/2,n.point(-s,i),n.point(0,i),n.point(s,i)}else n.point(e[0],e[1])}function G6e(t){var e=Ne(t),r=6*nt,n=e>0,i=tt(e)>Le;function s(c,f,x,d){j6e(d,t,r,x,c,f)}function o(c,f){return Ne(c)*Ne(f)>e}function a(c){var f,x,d,h,p;return{lineStart:function(){h=d=!1,p=1},point:function(m,g){var y=[m,g],A,S=o(m,g),T=n?S?0:l(m,g):S?l(m+(m<0?ot:-ot),g):0;if(!f&&(h=d=S)&&c.lineStart(),S!==d&&(A=u(f,y),(!A||Z4(f,A)||Z4(y,A))&&(y[2]=1)),S!==d)p=0,S?(c.lineStart(),A=u(y,f),c.point(A[0],A[1])):(A=u(f,y),c.point(A[0],A[1],2),c.lineEnd()),f=A;else if(i&&f&&n^S){var _;!(T&x)&&(_=u(y,f,!0))&&(p=0,n?(c.lineStart(),c.point(_[0][0],_[0][1]),c.point(_[1][0],_[1][1]),c.lineEnd()):(c.point(_[1][0],_[1][1]),c.lineEnd(),c.lineStart(),c.point(_[0][0],_[0][1],3)))}S&&(!f||!Z4(f,y))&&c.point(y[0],y[1]),f=y,d=S,x=T},lineEnd:function(){d&&c.lineEnd(),f=null},clean:function(){return p|(h&&d)<<1}}}function u(c,f,x){var d=hl(c),h=hl(f),p=[1,0,0],m=rd(d,h),g=wO(m,m),y=m[0],A=g-y*y;if(!A)return!x&&c;var S=e*g/A,T=-e*y/A,_=rd(p,m),b=LO(p,S),R=LO(m,T);fU(b,R);var O=_,N=wO(b,O),F=wO(O,O),$=N*N-F*(wO(b,b)-1);if(!($<0)){var q=hr($),X=LO(O,(-N-q)/F);if(fU(X,b),X=u3(X),!x)return X;var P=c[0],te=f[0],me=c[1],Ce=f[1],Pe;te<P&&(Pe=P,P=te,te=Pe);var ct=te-P,rr=tt(ct-ot)<Le,Ir=rr||ct<Le;if(!rr&&Ce<me&&(Pe=me,me=Ce,Ce=Pe),Ir?rr?me+Ce>0^X[1]<(tt(X[0]-P)<Le?me:Ce):me<=X[1]&&X[1]<=Ce:ct>ot^(P<=X[0]&&X[0]<=te)){var En=LO(O,(-N+q)/F);return fU(En,b),[X,u3(En)]}}}function l(c,f){var x=n?t:ot-t,d=0;return c<-x?d|=1:c>x&&(d|=2),f<-x?d|=4:f>x&&(d|=8),d}return vU(o,a,s,n?[0,-t]:[-ot,t-ot])}function Q6e(t,e,r,n,i,s){var o=t[0],a=t[1],u=e[0],l=e[1],c=0,f=1,x=u-o,d=l-a,h;if(h=r-o,!(!x&&h>0)){if(h/=x,x<0){if(h<c)return;h<f&&(f=h)}else if(x>0){if(h>f)return;h>c&&(c=h)}if(h=i-o,!(!x&&h<0)){if(h/=x,x<0){if(h>f)return;h>c&&(c=h)}else if(x>0){if(h<c)return;h<f&&(f=h)}if(h=n-a,!(!d&&h>0)){if(h/=d,d<0){if(h<c)return;h<f&&(f=h)}else if(d>0){if(h>f)return;h>c&&(c=h)}if(h=s-a,!(!d&&h<0)){if(h/=d,d<0){if(h>f)return;h>c&&(c=h)}else if(d>0){if(h<c)return;h<f&&(f=h)}return c>0&&(t[0]=o+c*x,t[1]=a+c*d),f<1&&(e[0]=o+f*x,e[1]=a+f*d),!0}}}}}var BO=1e9,_U=-BO;function qO(t,e,r,n){function i(l,c){return t<=l&&l<=r&&e<=c&&c<=n}function s(l,c,f,x){var d=0,h=0;if(l==null||(d=o(l,f))!==(h=o(c,f))||u(l,c)<0^f>0)do x.point(d===0||d===3?t:r,d>1?n:e);while((d=(d+f+4)%4)!==h);else x.point(c[0],c[1])}function o(l,c){return tt(l[0]-t)<Le?c>0?0:3:tt(l[0]-r)<Le?c>0?2:1:tt(l[1]-e)<Le?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),x=o(c,1);return f!==x?f-x:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=EU(),x,d,h,p,m,g,y,A,S,T,_,b={point:R,lineStart:$,lineEnd:q,polygonStart:N,polygonEnd:F};function R(P,te){i(P,te)&&c.point(P,te)}function O(){for(var P=0,te=0,me=d.length;te<me;++te)for(var Ce=d[te],Pe=1,ct=Ce.length,rr=Ce[0],Ir,En,oo=rr[0],vr=rr[1];Pe<ct;++Pe)Ir=oo,En=vr,rr=Ce[Pe],oo=rr[0],vr=rr[1],En<=n?vr>n&&(oo-Ir)*(n-En)>(vr-En)*(t-Ir)&&++P:vr<=n&&(oo-Ir)*(n-En)<(vr-En)*(t-Ir)&&--P;return P}function N(){c=f,x=[],d=[],_=!0}function F(){var P=O(),te=_&&P,me=(x=h4(x)).length;(te||me)&&(l.polygonStart(),te&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),me&&SU(x,a,P,s,l),l.polygonEnd()),c=l,x=d=h=null}function $(){b.point=X,d&&d.push(h=[]),T=!0,S=!1,y=A=NaN}function q(){x&&(X(p,m),g&&S&&f.rejoin(),x.push(f.result())),b.point=R,S&&c.lineEnd()}function X(P,te){var me=i(P,te);if(d&&h.push([P,te]),T)p=P,m=te,g=me,T=!1,me&&(c.lineStart(),c.point(P,te));else if(me&&S)c.point(P,te);else{var Ce=[y=Math.max(_U,Math.min(BO,y)),A=Math.max(_U,Math.min(BO,A))],Pe=[P=Math.max(_U,Math.min(BO,P)),te=Math.max(_U,Math.min(BO,te))];Q6e(Ce,Pe,t,e,r,n)?(S||(c.lineStart(),c.point(Ce[0],Ce[1])),c.point(Pe[0],Pe[1]),me||c.lineEnd(),_=!1):me&&(c.lineStart(),c.point(P,te),_=!1)}y=P,A=te,S=me}return b}}function V6e(t,e,r){var n=Dn(t,e-Le,r).concat(e);return function(i){return n.map(function(s){return[i,s]})}}function W6e(t,e,r){var n=Dn(t,e-Le,r).concat(e);return function(i){return n.map(function(s){return[s,i]})}}function bU(){var t,e,r,n,i,s,o,a,u=10,l=u,c=90,f=360,x,d,h,p,m=2.5;function g(){return{type:"MultiLineString",coordinates:y()}}function y(){return Dn(NO(n/c)*c,r,c).map(h).concat(Dn(NO(a/f)*f,o,f).map(p)).concat(Dn(NO(e/u)*u,t,u).filter(function(A){return tt(A%c)>Le}).map(x)).concat(Dn(NO(s/l)*l,i,l).filter(function(A){return tt(A%f)>Le}).map(d))}return g.lines=function(){return y().map(function(A){return{type:"LineString",coordinates:A}})},g.outline=function(){return{type:"Polygon",coordinates:[h(n).concat(p(o).slice(1),h(r).reverse().slice(1),p(a).reverse().slice(1))]}},g.extent=function(A){return arguments.length?g.extentMajor(A).extentMinor(A):g.extentMinor()},g.extentMajor=function(A){return arguments.length?(n=+A[0][0],r=+A[1][0],a=+A[0][1],o=+A[1][1],n>r&&(A=n,n=r,r=A),a>o&&(A=a,a=o,o=A),g.precision(m)):[[n,a],[r,o]]},g.extentMinor=function(A){return arguments.length?(e=+A[0][0],t=+A[1][0],s=+A[0][1],i=+A[1][1],e>t&&(A=e,e=t,t=A),s>i&&(A=s,s=i,i=A),g.precision(m)):[[e,s],[t,i]]},g.step=function(A){return arguments.length?g.stepMajor(A).stepMinor(A):g.stepMinor()},g.stepMajor=function(A){return arguments.length?(c=+A[0],f=+A[1],g):[c,f]},g.stepMinor=function(A){return arguments.length?(u=+A[0],l=+A[1],g):[u,l]},g.precision=function(A){return arguments.length?(m=+A,x=V6e(s,i,90),d=W6e(e,t,m),h=V6e(a,o,90),p=W6e(n,r,m),g):m},g.extentMajor([[-180,-90+Le],[180,90-Le]]).extentMinor([[-180,-80-Le],[180,80+Le]])}var P2=t=>t;var rse=new Ur,nse=new Ur,Y6e,K6e,ise,sse,k2={point:wr,lineStart:wr,lineEnd:wr,polygonStart:function(){k2.lineStart=cEt,k2.lineEnd=xEt},polygonEnd:function(){k2.lineStart=k2.lineEnd=k2.point=wr,rse.add(tt(nse)),nse=new Ur},result:function(){var t=rse/2;return rse=new Ur,t}};function cEt(){k2.point=fEt}function fEt(t,e){k2.point=X6e,Y6e=ise=t,K6e=sse=e}function X6e(t,e){nse.add(sse*t-ise*e),ise=t,sse=e}function xEt(){X6e(Y6e,K6e)}var ose=k2;var ev=1/0,TU=ev,UO=-ev,CU=UO,dEt={point:hEt,lineStart:wr,lineEnd:wr,polygonStart:wr,polygonEnd:wr,result:function(){var t=[[ev,TU],[UO,CU]];return UO=CU=-(TU=ev=1/0),t}};function hEt(t,e){t<ev&&(ev=t),t>UO&&(UO=t),e<TU&&(TU=e),e>CU&&(CU=e)}var tv=dEt;var ase=0,use=0,$O=0,RU=0,OU=0,rv=0,lse=0,cse=0,jO=0,eDe,tDe,Sf,vf,R0={point:f3,lineStart:J6e,lineEnd:Z6e,polygonStart:function(){R0.lineStart=gEt,R0.lineEnd=yEt},polygonEnd:function(){R0.point=f3,R0.lineStart=J6e,R0.lineEnd=Z6e},result:function(){var t=jO?[lse/jO,cse/jO]:rv?[RU/rv,OU/rv]:$O?[ase/$O,use/$O]:[NaN,NaN];return ase=use=$O=RU=OU=rv=lse=cse=jO=0,t}};function f3(t,e){ase+=t,use+=e,++$O}function J6e(){R0.point=pEt}function pEt(t,e){R0.point=mEt,f3(Sf=t,vf=e)}function mEt(t,e){var r=t-Sf,n=e-vf,i=hr(r*r+n*n);RU+=i*(Sf+t)/2,OU+=i*(vf+e)/2,rv+=i,f3(Sf=t,vf=e)}function Z6e(){R0.point=f3}function gEt(){R0.point=EEt}function yEt(){rDe(eDe,tDe)}function EEt(t,e){R0.point=rDe,f3(eDe=Sf=t,tDe=vf=e)}function rDe(t,e){var r=t-Sf,n=e-vf,i=hr(r*r+n*n);RU+=i*(Sf+t)/2,OU+=i*(vf+e)/2,rv+=i,i=vf*t-Sf*e,lse+=i*(Sf+t),cse+=i*(vf+e),jO+=i*3,f3(Sf=t,vf=e)}var fse=R0;function DU(t){this._context=t}DU.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Fn);break}}},result:wr};var dse=new Ur,xse,nDe,iDe,HO,zO,NU={point:wr,lineStart:function(){NU.point=AEt},lineEnd:function(){xse&&sDe(nDe,iDe),NU.point=wr},polygonStart:function(){xse=!0},polygonEnd:function(){xse=null},result:function(){var t=+dse;return dse=new Ur,t}};function AEt(t,e){NU.point=sDe,nDe=HO=t,iDe=zO=e}function sDe(t,e){HO-=t,zO-=e,dse.add(hr(HO*HO+zO*zO)),HO=t,zO=e}var hse=NU;var oDe,FU,aDe,uDe,nv=class{constructor(e){this._append=e==null?lDe:SEt(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,r){switch(this._point){case 0:{this._append`M${e},${r}`,this._point=1;break}case 1:{this._append`L${e},${r}`;break}default:{if(this._append`M${e},${r}`,this._radius!==aDe||this._append!==FU){let n=this._radius,i=this._;this._="",this._append`m0,${n}a${n},${n} 0 1,1 0,${-2*n}a${n},${n} 0 1,1 0,${2*n}z`,aDe=n,FU=this._append,uDe=this._,this._=i}this._+=uDe;break}}}result(){let e=this._;return this._="",e.length?e:null}};function lDe(t){let e=1;this._+=t[0];for(let r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function SEt(t){let e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return lDe;if(e!==oDe){let r=10**e;oDe=e,FU=function(i){let s=1;this._+=i[0];for(let o=i.length;s<o;++s)this._+=Math.round(arguments[s]*r)/r+i[s]}}return FU}function wU(t,e){let r=3,n=4.5,i,s;function o(a){return a&&(typeof n=="function"&&s.pointRadius(+n.apply(this,arguments)),ma(a,i(s))),s.result()}return o.area=function(a){return ma(a,i(ose)),ose.result()},o.measure=function(a){return ma(a,i(hse)),hse.result()},o.bounds=function(a){return ma(a,i(tv)),tv.result()},o.centroid=function(a){return ma(a,i(fse)),fse.result()},o.projection=function(a){return arguments.length?(i=a==null?(t=null,P2):(t=a).stream,o):t},o.context=function(a){return arguments.length?(s=a==null?(e=null,new nv(r)):new DU(e=a),typeof n!="function"&&s.pointRadius(n),o):e},o.pointRadius=function(a){return arguments.length?(n=typeof a=="function"?a:(s.pointRadius(+a),+a),o):n},o.digits=function(a){if(!arguments.length)return r;if(a==null)r=null;else{let u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);r=u}return e===null&&(s=new nv(r)),o},o.projection(t).digits(r).context(e)}function x3(t){return function(e){var r=new pse;for(var n in t)r[n]=t[n];return r.stream=e,r}}function pse(){}pse.prototype={constructor:pse,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function mse(t,e,r){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),n!=null&&t.clipExtent(null),ma(r,t.stream(tv)),e(tv.result()),n!=null&&t.clipExtent(n),t}function d3(t,e,r){return mse(t,function(n){var i=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(i/(n[1][0]-n[0][0]),s/(n[1][1]-n[0][1])),a=+e[0][0]+(i-o*(n[1][0]+n[0][0]))/2,u=+e[0][1]+(s-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,u])},r)}function iv(t,e,r){return d3(t,[[0,0],e],r)}function sv(t,e,r){return mse(t,function(n){var i=+e,s=i/(n[1][0]-n[0][0]),o=(i-s*(n[1][0]+n[0][0]))/2,a=-s*n[0][1];t.scale(150*s).translate([o,a])},r)}function ov(t,e,r){return mse(t,function(n){var i=+e,s=i/(n[1][1]-n[0][1]),o=-s*n[0][0],a=(i-s*(n[1][1]+n[0][1]))/2;t.scale(150*s).translate([o,a])},r)}var cDe=16,vEt=Ne(30*nt);function gse(t,e){return+e?bEt(t,e):_Et(t)}function _Et(t){return x3({point:function(e,r){e=t(e,r),this.stream.point(e[0],e[1])}})}function bEt(t,e){function r(n,i,s,o,a,u,l,c,f,x,d,h,p,m){var g=l-n,y=c-i,A=g*g+y*y;if(A>4*e&&p--){var S=o+x,T=a+d,_=u+h,b=hr(S*S+T*T+_*_),R=Fr(_/=b),O=tt(tt(_)-1)<Le||tt(s-f)<Le?(s+f)/2:pn(T,S),N=t(O,R),F=N[0],$=N[1],q=F-n,X=$-i,P=y*q-g*X;(P*P/A>e||tt((g*q+y*X)/A-.5)>.3||o*x+a*d+u*h<vEt)&&(r(n,i,s,o,a,u,F,$,O,S/=b,T/=b,_,p,m),m.point(F,$),r(F,$,O,S,T,_,l,c,f,x,d,h,p,m))}}return function(n){var i,s,o,a,u,l,c,f,x,d,h,p,m={point:g,lineStart:y,lineEnd:S,polygonStart:function(){n.polygonStart(),m.lineStart=T},polygonEnd:function(){n.polygonEnd(),m.lineStart=y}};function g(R,O){R=t(R,O),n.point(R[0],R[1])}function y(){f=NaN,m.point=A,n.lineStart()}function A(R,O){var N=hl([R,O]),F=t(R,O);r(f,x,c,d,h,p,f=F[0],x=F[1],c=R,d=N[0],h=N[1],p=N[2],cDe,n),n.point(f,x)}function S(){m.point=g,n.lineEnd()}function T(){y(),m.point=_,m.lineEnd=b}function _(R,O){A(i=R,O),s=f,o=x,a=d,u=h,l=p,m.point=A}function b(){r(f,x,c,d,h,p,s,o,i,a,u,l,cDe,n),m.lineEnd=S,S()}return m}}var TEt=x3({point:function(t,e){this.stream.point(t*nt,e*nt)}});function CEt(t){return x3({point:function(e,r){var n=t(e,r);return this.stream.point(n[0],n[1])}})}function REt(t,e,r,n,i){function s(o,a){return o*=n,a*=i,[e+t*o,r-t*a]}return s.invert=function(o,a){return[(o-e)/t*n,(r-a)/t*i]},s}function fDe(t,e,r,n,i,s){if(!s)return REt(t,e,r,n,i);var o=Ne(s),a=De(s),u=o*t,l=a*t,c=o/t,f=a/t,x=(a*r-o*e)/t,d=(a*e+o*r)/t;function h(p,m){return p*=n,m*=i,[u*p-l*m+e,r-l*p-u*m]}return h.invert=function(p,m){return[n*(c*p-f*m+x),i*(d-f*p-c*m)]},h}function gn(t){return LU(function(){return t})()}function LU(t){var e,r=150,n=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,x=1,d=1,h=null,p=tse,m=null,g,y,A,S=P2,T=.5,_,b,R,O,N;function F(P){return R(P[0]*nt,P[1]*nt)}function $(P){return P=R.invert(P[0],P[1]),P&&[P[0]*dr,P[1]*dr]}F.stream=function(P){return O&&N===P?O:O=TEt(CEt(c)(p(_(S(N=P)))))},F.preclip=function(P){return arguments.length?(p=P,h=void 0,X()):p},F.postclip=function(P){return arguments.length?(S=P,m=g=y=A=null,X()):S},F.clipAngle=function(P){return arguments.length?(p=+P?G6e(h=P*nt):(h=null,tse),X()):h*dr},F.clipExtent=function(P){return arguments.length?(S=P==null?(m=g=y=A=null,P2):qO(m=+P[0][0],g=+P[0][1],y=+P[1][0],A=+P[1][1]),X()):m==null?null:[[m,g],[y,A]]},F.scale=function(P){return arguments.length?(r=+P,q()):r},F.translate=function(P){return arguments.length?(n=+P[0],i=+P[1],q()):[n,i]},F.center=function(P){return arguments.length?(s=P[0]%360*nt,o=P[1]%360*nt,q()):[s*dr,o*dr]},F.rotate=function(P){return arguments.length?(a=P[0]%360*nt,u=P[1]%360*nt,l=P.length>2?P[2]%360*nt:0,q()):[a*dr,u*dr,l*dr]},F.angle=function(P){return arguments.length?(f=P%360*nt,q()):f*dr},F.reflectX=function(P){return arguments.length?(x=P?-1:1,q()):x<0},F.reflectY=function(P){return arguments.length?(d=P?-1:1,q()):d<0},F.precision=function(P){return arguments.length?(_=gse(b,T=P*P),X()):hr(T)},F.fitExtent=function(P,te){return d3(F,P,te)},F.fitSize=function(P,te){return iv(F,P,te)},F.fitWidth=function(P,te){return sv(F,P,te)},F.fitHeight=function(P,te){return ov(F,P,te)};function q(){var P=fDe(r,0,0,x,d,f).apply(null,e(s,o)),te=fDe(r,n-P[0],i-P[1],x,d,f);return c=Zie(a,u,l),b=kO(e,te),R=kO(c,b),_=gse(b,T),X()}function X(){return O=N=null,F}return function(){return e=t.apply(this,arguments),F.invert=e.invert&&$,q()}}function av(t){var e=0,r=ot/3,n=LU(t),i=n(e,r);return i.parallels=function(s){return arguments.length?n(e=s[0]*nt,r=s[1]*nt):[e*dr,r*dr]},i}function xDe(t){var e=Ne(t);function r(n,i){return[n*e,De(i)/e]}return r.invert=function(n,i){return[n/e,Fr(i*e)]},r}function dDe(t,e){var r=De(t),n=(r+De(e))/2;if(tt(n)<Le)return xDe(t);var i=1+r*(2*n-r),s=hr(i)/n;function o(a,u){var l=hr(i-2*n*De(u))/n;return[l*De(a*=n),s-l*Ne(a)]}return o.invert=function(a,u){var l=s-u,c=pn(a,tt(l))*Zs(l);return l*n<0&&(c-=ot*Zs(a)*Zs(l)),[c/n,Fr((i-(a*a+l*l)*n*n)/(2*n))]},o}function B2(){return av(dDe).scale(155.424).center([0,33.6442])}function GO(){return B2().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function OEt(t){var e=t.length;return{point:function(r,n){for(var i=-1;++i<e;)t[i].point(r,n)},sphere:function(){for(var r=-1;++r<e;)t[r].sphere()},lineStart:function(){for(var r=-1;++r<e;)t[r].lineStart()},lineEnd:function(){for(var r=-1;++r<e;)t[r].lineEnd()},polygonStart:function(){for(var r=-1;++r<e;)t[r].polygonStart()},polygonEnd:function(){for(var r=-1;++r<e;)t[r].polygonEnd()}}}function yse(){var t,e,r=GO(),n,i=B2().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=B2().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(x,d){u=[x,d]}};function c(x){var d=x[0],h=x[1];return u=null,n.point(d,h),u||(s.point(d,h),u)||(a.point(d,h),u)}c.invert=function(x){var d=r.scale(),h=r.translate(),p=(x[0]-h[0])/d,m=(x[1]-h[1])/d;return(m>=.12&&m<.234&&p>=-.425&&p<-.214?i:m>=.166&&m<.234&&p>=-.214&&p<-.115?o:r).invert(x)},c.stream=function(x){return t&&e===x?t:t=OEt([r.stream(e=x),i.stream(x),o.stream(x)])},c.precision=function(x){return arguments.length?(r.precision(x),i.precision(x),o.precision(x),f()):r.precision()},c.scale=function(x){return arguments.length?(r.scale(x),i.scale(x*.35),o.scale(x),c.translate(r.translate())):r.scale()},c.translate=function(x){if(!arguments.length)return r.translate();var d=r.scale(),h=+x[0],p=+x[1];return n=r.translate(x).clipExtent([[h-.455*d,p-.238*d],[h+.455*d,p+.238*d]]).stream(l),s=i.translate([h-.307*d,p+.201*d]).clipExtent([[h-.425*d+Le,p+.12*d+Le],[h-.214*d-Le,p+.234*d-Le]]).stream(l),a=o.translate([h-.205*d,p+.212*d]).clipExtent([[h-.214*d+Le,p+.166*d+Le],[h-.115*d-Le,p+.234*d-Le]]).stream(l),f()},c.fitExtent=function(x,d){return d3(c,x,d)},c.fitSize=function(x,d){return iv(c,x,d)},c.fitWidth=function(x,d){return sv(c,x,d)},c.fitHeight=function(x,d){return ov(c,x,d)};function f(){return t=e=null,c}return c.scale(1070)}function IU(t){return function(e,r){var n=Ne(e),i=Ne(r),s=t(n*i);return s===1/0?[2,0]:[s*i*De(e),s*De(r)]}}function _f(t){return function(e,r){var n=hr(e*e+r*r),i=t(n),s=De(i),o=Ne(i);return[pn(e*s,n*o),Fr(n&&r*s/n)]}}var Ese=IU(function(t){return hr(2/(1+t))});Ese.invert=_f(function(t){return 2*Fr(t/2)});function Ase(){return gn(Ese).scale(124.75).clipAngle(180-.001)}var Sse=IU(function(t){return(t=uU(t))&&t/De(t)});Sse.invert=_f(function(t){return t});function vse(){return gn(Sse).scale(79.4188).clipAngle(180-.001)}function uv(t,e){return[t,a3(X4((xr+e)/2))]}uv.invert=function(t,e){return[t,2*dl(sU(e))-xr]};function _se(){return bse(uv).scale(961/Fn)}function bse(t){var e=gn(t),r=e.center,n=e.scale,i=e.translate,s=e.clipExtent,o=null,a,u,l;e.scale=function(f){return arguments.length?(n(f),c()):n()},e.translate=function(f){return arguments.length?(i(f),c()):i()},e.center=function(f){return arguments.length?(r(f),c()):r()},e.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=ot*n(),x=e(U6e(e.rotate()).invert([0,0]));return s(o==null?[[x[0]-f,x[1]-f],[x[0]+f,x[1]+f]]:t===uv?[[Math.max(x[0]-f,o),a],[Math.min(x[0]+f,u),l]]:[[o,Math.max(x[1]-f,a)],[u,Math.min(x[1]+f,l)]])}return c()}function MU(t){return X4((xr+t)/2)}function hDe(t,e){var r=Ne(t),n=t===e?De(t):a3(r/Ne(e))/a3(MU(e)/MU(t)),i=r*aU(MU(t),n)/n;if(!n)return uv;function s(o,a){i>0?a<-xr+Le&&(a=-xr+Le):a>xr-Le&&(a=xr-Le);var u=i/aU(MU(a),n);return[u*De(n*o),i-u*Ne(n*o)]}return s.invert=function(o,a){var u=i-a,l=Zs(n)*hr(o*o+u*u),c=pn(o,tt(u))*Zs(u);return u*n<0&&(c-=ot*Zs(o)*Zs(u)),[c/n,2*dl(aU(i/l,1/n))-xr]},s}function Tse(){return av(hDe).scale(109.5).parallels([30,30])}function lv(t,e){return[t,e]}lv.invert=lv;function Cse(){return gn(lv).scale(152.63)}function pDe(t,e){var r=Ne(t),n=t===e?De(t):(r-Ne(e))/(e-t),i=r/n+t;if(tt(n)<Le)return lv;function s(o,a){var u=i-a,l=n*o;return[u*De(l),i-u*Ne(l)]}return s.invert=function(o,a){var u=i-a,l=pn(o,tt(u))*Zs(u);return u*n<0&&(l-=ot*Zs(o)*Zs(u)),[l/n,i-Zs(n)*hr(o*o+u*u)]},s}function Rse(){return av(pDe).scale(131.154).center([0,13.9389])}var QO=1.340264,VO=-.081106,WO=893e-6,YO=.003796,PU=hr(3)/2,DEt=12;function Ose(t,e){var r=Fr(PU*De(e)),n=r*r,i=n*n*n;return[t*Ne(r)/(PU*(QO+3*VO*n+i*(7*WO+9*YO*n))),r*(QO+VO*n+i*(WO+YO*n))]}Ose.invert=function(t,e){for(var r=e,n=r*r,i=n*n*n,s=0,o,a,u;s<DEt&&(a=r*(QO+VO*n+i*(WO+YO*n))-e,u=QO+3*VO*n+i*(7*WO+9*YO*n),r-=o=a/u,n=r*r,i=n*n*n,!(tt(o)<o3));++s);return[PU*t*(QO+3*VO*n+i*(7*WO+9*YO*n))/Ne(r),Fr(De(r)/PU)]};function Dse(){return gn(Ose).scale(177.158)}function Nse(t,e){var r=Ne(e),n=Ne(t)*r;return[r*De(t)/n,De(e)/n]}Nse.invert=_f(dl);function Fse(){return gn(Nse).scale(144.049).clipAngle(60)}function wse(){var t=1,e=0,r=0,n=1,i=1,s=0,o,a,u=null,l,c,f,x=1,d=1,h=x3({point:function(S,T){var _=A([S,T]);this.stream.point(_[0],_[1])}}),p=P2,m,g;function y(){return x=t*n,d=t*i,m=g=null,A}function A(S){var T=S[0]*x,_=S[1]*d;if(s){var b=_*o-T*a;T=T*o+_*a,_=b}return[T+e,_+r]}return A.invert=function(S){var T=S[0]-e,_=S[1]-r;if(s){var b=_*o+T*a;T=T*o-_*a,_=b}return[T/x,_/d]},A.stream=function(S){return m&&g===S?m:m=h(p(g=S))},A.postclip=function(S){return arguments.length?(p=S,u=l=c=f=null,y()):p},A.clipExtent=function(S){return arguments.length?(p=S==null?(u=l=c=f=null,P2):qO(u=+S[0][0],l=+S[0][1],c=+S[1][0],f=+S[1][1]),y()):u==null?null:[[u,l],[c,f]]},A.scale=function(S){return arguments.length?(t=+S,y()):t},A.translate=function(S){return arguments.length?(e=+S[0],r=+S[1],y()):[e,r]},A.angle=function(S){return arguments.length?(s=S%360*nt,a=De(s),o=Ne(s),y()):s*dr},A.reflectX=function(S){return arguments.length?(n=S?-1:1,y()):n<0},A.reflectY=function(S){return arguments.length?(i=S?-1:1,y()):i<0},A.fitExtent=function(S,T){return d3(A,S,T)},A.fitSize=function(S,T){return iv(A,S,T)},A.fitWidth=function(S,T){return sv(A,S,T)},A.fitHeight=function(S,T){return ov(A,S,T)},A}function Lse(t,e){var r=e*e,n=r*r;return[t*(.8707-.131979*r+n*(-.013791+n*(.003971*r-.001529*n))),e*(1.007226+r*(.015085+n*(-.044475+.028874*r-.005916*n)))]}Lse.invert=function(t,e){var r=e,n=25,i;do{var s=r*r,o=s*s;r-=i=(r*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-e)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(tt(i)>Le&&--n>0);return[t/(.8707+(s=r*r)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),r]};function Ise(){return gn(Lse).scale(175.295)}function Mse(t,e){return[Ne(e)*De(t),De(e)]}Mse.invert=_f(Fr);function Pse(){return gn(Mse).scale(249.5).clipAngle(90+Le)}function kse(t,e){var r=Ne(e),n=1+Ne(t)*r;return[r*De(t)/n,De(e)/n]}kse.invert=_f(function(t){return 2*dl(t)});function Bse(){return gn(kse).scale(250).clipAngle(142)}function qse(t,e){return[a3(X4((xr+e)/2)),-t]}qse.invert=function(t,e){return[-e,2*dl(sU(t))-xr]};function Use(){var t=bse(qse),e=t.center,r=t.rotate;return t.center=function(n){return arguments.length?e([-n[1],n[0]]):(n=e(),[n[1],-n[0]])},t.rotate=function(n){return arguments.length?r([n[0],n[1],n.length>2?n[2]+90:90]):(n=r(),[n[0],n[1],n[2]-90])},r([0,0,90]).scale(159.155)}var mDe=Math.abs;var BU=Math.cos;var KO=Math.sin;var gDe=1e-6;var q2=Math.PI,kU=q2/2,ltr=q2/4;var $se=yDe(2),ctr=yDe(q2),ftr=q2*2,xtr=180/q2,dtr=q2/180;function jse(t){return t>1?kU:t<-1?-kU:Math.asin(t)}function yDe(t){return t>0?Math.sqrt(t):0}function NEt(t,e){var r=t*KO(e),n=30,i;do e-=i=(e+KO(e)-r)/(1+BU(e));while(mDe(i)>gDe&&--n>0);return e/2}function FEt(t,e,r){function n(i,s){return[t*i*BU(s=NEt(r,s)),e*KO(s)]}return n.invert=function(i,s){return s=jse(s/e),[i/(t*BU(s)),jse((2*s+KO(2*s))/r)]},n}var EDe=FEt($se/kU,$se,q2);function Hse(){return gn(EDe).scale(169.529)}var wEt=wU(),UU=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function LEt(t,e){return function r(){let n=e();return n.type=t,n.path=wU().projection(n),n.copy=n.copy||function(){let i=r();return UU.forEach(s=>{n[s]&&i[s](n[s]())}),i.path.pointRadius(n.path.pointRadius()),i},One(n)}}function $U(t,e){if(!t||typeof t!="string")throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(qU[t]=LEt(t,e),this):qU[t]||null}function zse(t){return t&&t.path||wEt}var qU={albers:GO,albersusa:yse,azimuthalequalarea:Ase,azimuthalequidistant:vse,conicconformal:Tse,conicequalarea:B2,conicequidistant:Rse,equalEarth:Dse,equirectangular:Cse,gnomonic:Fse,identity:wse,mercator:_se,mollweide:Hse,naturalEarth1:Ise,orthographic:Pse,stereographic:Bse,transversemercator:Use};for(let t in qU)$U(t,qU[t]);function IEt(){}var sd=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function vDe(){var t=1,e=1,r=a;function n(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,x=>{r(x,u,l),MEt(x)>0?c.push([x]):f.push(x)}),f.forEach(x=>{for(var d=0,h=c.length,p;d<h;++d)if(PEt((p=c[d])[0],x)!==-1){p.push(x);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,x=new Array,d,h,p,m,g,y;for(d=h=-1,m=u[0]>=l,sd[m<<1].forEach(A);++d<t-1;)p=m,m=u[d+1]>=l,sd[p|m<<1].forEach(A);for(sd[m<<0].forEach(A);++h<e-1;){for(d=-1,m=u[h*t+t]>=l,g=u[h*t]>=l,sd[m<<1|g<<2].forEach(A);++d<t-1;)p=m,m=u[h*t+t+d+1]>=l,y=g,g=u[h*t+d+1]>=l,sd[p|m<<1|g<<2|y<<3].forEach(A);sd[m|g<<3].forEach(A)}for(d=-1,g=u[h*t]>=l,sd[g<<2].forEach(A);++d<t-1;)y=g,g=u[h*t+d+1]>=l,sd[g<<2|y<<3].forEach(A);sd[g<<3].forEach(A);function A(S){var T=[S[0][0]+d,S[0][1]+h],_=[S[1][0]+d,S[1][1]+h],b=o(T),R=o(_),O,N;(O=x[b])?(N=f[R])?(delete x[O.end],delete f[N.start],O===N?(O.ring.push(_),c(O.ring)):f[O.start]=x[N.end]={start:O.start,end:N.end,ring:O.ring.concat(N.ring)}):(delete x[O.end],O.ring.push(_),x[O.end=R]=O):(O=f[R])?(N=x[b])?(delete f[O.start],delete x[N.end],O===N?(O.ring.push(_),c(O.ring)):f[N.start]=x[O.end]={start:N.start,end:O.end,ring:N.ring.concat(O.ring)}):(delete f[O.start],O.ring.unshift(T),f[O.start=b]=O):f[b]=x[R]={start:b,end:R,ring:[T,_]}}}function o(u){return u[0]*2+u[1]*(t+1)*4}function a(u,l,c){u.forEach(f=>{var x=f[0],d=f[1],h=x|0,p=d|0,m,g=l[p*t+h];x>0&&x<t&&h===x&&(m=l[p*t+h-1],f[0]=x+(c-m)/(g-m)-.5),d>0&&d<e&&p===d&&(m=l[(p-1)*t+h],f[1]=d+(c-m)/(g-m)-.5)})}return n.contour=i,n.size=function(u){if(!arguments.length)return[t,e];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||W("invalid size"),t=l,e=c,n},n.smooth=function(u){return arguments.length?(r=u?a:IEt,n):r===a},n}function MEt(t){for(var e=0,r=t.length,n=t[r-1][1]*t[0][0]-t[r-1][0]*t[0][1];++e<r;)n+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return n}function PEt(t,e){for(var r=-1,n=e.length,i;++r<n;)if(i=kEt(t,e[r]))return i;return 0}function kEt(t,e){for(var r=e[0],n=e[1],i=-1,s=0,o=t.length,a=o-1;s<o;a=s++){var u=t[s],l=u[0],c=u[1],f=t[a],x=f[0],d=f[1];if(BEt(u,f,e))return 0;c>n!=d>n&&r<(x-l)*(n-c)/(d-c)+l&&(i=-i)}return i}function BEt(t,e,r){var n;return qEt(t,e,r)&&UEt(t[n=+(t[0]===e[0])],r[n],e[n])}function qEt(t,e,r){return(e[0]-t[0])*(r[1]-t[1])===(r[0]-t[0])*(e[1]-t[1])}function UEt(t,e,r){return t<=e&&e<=r||r<=e&&e<=t}function _De(t,e,r){return function(n){var i=ia(n),s=r?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=e?To(s,o,t):a/(t+1);return Dn(s+u,o,u)}}function Vse(t){V.call(this,null,t)}Vse.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ce(Vse,V,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var r=e.fork(e.NO_SOURCE|e.NO_FIELDS),n=e.materialize(e.SOURCE).source,i=t.field||On,s=vDe().smooth(t.smooth!==!1),o=t.thresholds||$Et(n,i,t),a=t.as===null?null:t.as||"contour",u=[];return n.forEach(l=>{let c=i(l),f=s.size([c.width,c.height])(c.values,j(o)?o:o(c.values));jEt(f,c,l,t),f.forEach(x=>{u.push(Ig(l,wt(a!=null?{[a]:x}:x)))})}),this.value&&(r.rem=this.value),this.value=r.source=r.add=u,r}});function $Et(t,e,r){let n=_De(r.levels||10,r.nice,r.zero!==!1);return r.resolve!=="shared"?n:n(t.map(i=>rl(e(i).values)))}function jEt(t,e,r,n){let i=n.scale||e.scale,s=n.translate||e.translate;if(Je(i)&&(i=i(r,n)),Je(s)&&(s=s(r,n)),(i===1||i==null)&&!s)return;let o=(Ct(i)?i:i[0])||1,a=(Ct(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;t.forEach(bDe(e,o,a,u,l))}function bDe(t,e,r,n,i){let s=t.x1||0,o=t.y1||0,a=e*r<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*e+n,f[1]=(f[1]-o)*r+i}return function(f){return f.coordinates.forEach(u),f}}function ADe(t,e,r){let n=t>=0?t:Vte(e,r);return Math.round((Math.sqrt(4*n*n+1)-1)/2)}function Gse(t){return Je(t)?t:Zr(+t)}function TDe(){var t=u=>u[0],e=u=>u[1],r=Bx,n=[-1,-1],i=960,s=500,o=2;function a(u,l){let c=ADe(n[0],u,t)>>o,f=ADe(n[1],u,e)>>o,x=c?c+2:0,d=f?f+2:0,h=2*x+(i>>o),p=2*d+(s>>o),m=new Float32Array(h*p),g=new Float32Array(h*p),y=m;u.forEach(S=>{let T=x+(+t(S)>>o),_=d+(+e(S)>>o);T>=0&&T<h&&_>=0&&_<p&&(m[T+_*h]+=+r(S))}),c>0&&f>0?(cv(h,p,m,g,c),fv(h,p,g,m,f),cv(h,p,m,g,c),fv(h,p,g,m,f),cv(h,p,m,g,c),fv(h,p,g,m,f)):c>0?(cv(h,p,m,g,c),cv(h,p,g,m,c),cv(h,p,m,g,c),y=g):f>0&&(fv(h,p,m,g,f),fv(h,p,g,m,f),fv(h,p,m,g,f),y=g);let A=l?Math.pow(2,-2*o):1/p4(y);for(let S=0,T=h*p;S<T;++S)y[S]*=A;return{values:y,scale:1<<o,width:h,height:p,x1:x,y1:d,x2:x+(i>>o),y2:d+(s>>o)}}return a.x=function(u){return arguments.length?(t=Gse(u),a):t},a.y=function(u){return arguments.length?(e=Gse(u),a):e},a.weight=function(u){return arguments.length?(r=Gse(u),a):r},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||W("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||W("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=le(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&W("invalid bandwidth"),n=u,a):n},a}function cv(t,e,r,n,i){let s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=r[a+o*t]),a>=i&&(a>=s&&(u-=r[a-s+o*t]),n[a-i+o*t]=u/Math.min(a+1,t-1+s-a,s))}function fv(t,e,r,n,i){let s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=r[o+a*t]),a>=i&&(a>=s&&(u-=r[o+(a-s)*t]),n[o+(a-i)*t]=u/Math.min(a+1,e-1+s-a,s))}function Wse(t){V.call(this,null,t)}Wse.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var HEt=["x","y","weight","size","cellSize","bandwidth"];function CDe(t,e){return HEt.forEach(r=>e[r]!=null?t[r](e[r]):0),t}ce(Wse,V,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var r=e.fork(e.NO_SOURCE|e.NO_FIELDS),n=e.materialize(e.SOURCE).source,i=zEt(n,t.groupby),s=(t.groupby||[]).map(Br),o=CDe(TDe(),t),a=t.as||"grid",u=[];function l(c,f){for(let x=0;x<s.length;++x)c[s[x]]=f[x];return c}return u=i.map(c=>wt(l({[a]:o(c,t.counts)},c.dims))),this.value&&(r.rem=this.value),this.value=r.source=r.add=u,r}});function zEt(t,e){var r=[],n=c=>c(a),i,s,o,a,u,l;if(e==null)r.push(t);else for(i={},s=0,o=t.length;s<o;++s)a=t[s],u=e.map(n),l=i[u],l||(i[u]=l=[],l.dims=u,r.push(l)),l.push(a);return r}function Yse(t){V.call(this,null,t)}Yse.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ce(Yse,V,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var r=e.fork(e.NO_SOURCE|e.NO_FIELDS),n=vDe().smooth(t.smooth!==!1),i=t.values,s=t.thresholds||_De(t.count||10,t.nice,!!i),o=t.size,a,u;return i||(i=e.materialize(e.SOURCE).source,a=CDe(TDe(),t)(i,!0),u=bDe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=j(s)?s:s(i),i=n.size(o)(i,s),u&&i.forEach(u),this.value&&(r.rem=this.value),this.value=r.source=r.add=(i||[]).map(wt),r}});var Qse="Feature",Kse="FeatureCollection",GEt="MultiPoint";function Xse(t){V.call(this,null,t)}Xse.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ce(Xse,V,{transform(t,e){var r=this._features,n=this._points,i=t.fields,s=i&&i[0],o=i&&i[1],a=t.geojson||!i&&On,u=e.ADD,l;l=t.modified()||e.changed(e.REM)||e.modified(Pi(a))||s&&e.modified(Pi(s))||o&&e.modified(Pi(o)),(!this.value||l)&&(u=e.SOURCE,this._features=r=[],this._points=n=[]),a&&e.visit(u,c=>r.push(a(c))),s&&o&&(e.visit(u,c=>{var f=s(c),x=o(c);f!=null&&x!=null&&(f=+f)===f&&(x=+x)===x&&n.push([f,x])}),r=r.concat({type:Qse,geometry:{type:GEt,coordinates:n}})),this.value={type:Kse,features:r}}});function Jse(t){V.call(this,null,t)}Jse.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ce(Jse,V,{transform(t,e){var r=e.fork(e.ALL),n=this.value,i=t.field||On,s=t.as||"path",o=r.SOURCE;!n||t.modified()?(this.value=n=zse(t.projection),r.materialize().reflow()):o=i===On||e.modified(i.fields)?r.ADD_MOD:r.ADD;let a=QEt(n,t.pointRadius);return r.visit(o,u=>u[s]=n(i(u))),n.pointRadius(a),r.modifies(s)}});function QEt(t,e){let r=t.pointRadius();return t.context(null),e!=null&&t.pointRadius(e),r}function Zse(t){V.call(this,null,t)}Zse.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ce(Zse,V,{transform(t,e){var r=t.projection,n=t.fields[0],i=t.fields[1],s=t.as||["x","y"],o=s[0],a=s[1],u;function l(c){let f=r([n(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,l):(u=e.modified(n.fields)||e.modified(i.fields),e.visit(u?e.ADD_MOD:e.ADD,l)),e.modifies(s)}});function eoe(t){V.call(this,null,t)}eoe.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ce(eoe,V,{transform(t,e){var r=e.fork(e.ALL),n=this.value,i=t.as||"shape",s=r.ADD;return(!n||t.modified())&&(this.value=n=VEt(zse(t.projection),t.field||si("datum"),t.pointRadius),r.materialize().reflow(),s=r.SOURCE),r.visit(s,o=>o[i]=n),r.modifies(i)}});function VEt(t,e,r){let n=r==null?i=>t(e(i)):i=>{var s=t.pointRadius(),o=t.pointRadius(r)(e(i));return t.pointRadius(s),o};return n.context=i=>(t.context(i),n),n}function toe(t){V.call(this,[],t),this.generator=bU()}toe.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ce(toe,V,{transform(t,e){var r=this.value,n=this.generator,i;if(!r.length||t.modified())for(let s in t)Je(n[s])&&n[s](t[s]);return i=n(),r.length?e.mod.push(_B(r[0],i)):e.add.push(wt(i)),r[0]=i,e}});function roe(t){V.call(this,null,t)}roe.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ce(roe,V,{transform(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var r=e.materialize(e.SOURCE).source,n=t.resolve==="shared",i=t.field||On,s=YEt(t.opacity,t),o=WEt(t.color,t),a=t.as||"image",u={$x:0,$y:0,$value:0,$max:n?rl(r.map(l=>rl(i(l).values))):0};return r.forEach(l=>{let c=i(l),f=Ke({},l,u);n||(f.$max=rl(c.values||[])),l[a]=KEt(c,f,o.dep?o:Zr(o(f)),s.dep?s:Zr(s(f)))}),e.reflow(!0).modifies(a)}});function WEt(t,e){let r;return Je(t)?(r=n=>cl(t(n,e)),r.dep=RDe(t)):r=Zr(cl(t||"#888")),r}function YEt(t,e){let r;return Je(t)?(r=n=>t(n,e),r.dep=RDe(t)):t?r=Zr(t):(r=n=>n.$value/n.$max||0,r.dep=!0),r}function RDe(t){if(!Je(t))return!1;let e=Bi(Pi(t));return e.$x||e.$y||e.$value||e.$max}function KEt(t,e,r,n){let i=t.width,s=t.height,o=t.x1||0,a=t.y1||0,u=t.x2||i,l=t.y2||s,c=t.values,f=c?m=>c[m]:Zc,x=ll(u-o,l-a),d=x.getContext("2d"),h=d.getImageData(0,0,u-o,l-a),p=h.data;for(let m=a,g=0;m<l;++m){e.$y=m-a;for(let y=o,A=m*i;y<u;++y,g+=4){e.$x=y-o,e.$value=f(y+A);let S=r(e);p[g+0]=S.r,p[g+1]=S.g,p[g+2]=S.b,p[g+3]=~~(255*n(e))}}return d.putImageData(h,0,0),x}function ODe(t){V.call(this,null,t),this.modified(!0)}ce(ODe,V,{transform(t,e){let r=this.value;return!r||t.modified("type")?(this.value=r=JEt(t.type),UU.forEach(n=>{t[n]!=null&&SDe(r,n,t[n])})):UU.forEach(n=>{t.modified(n)&&SDe(r,n,t[n])}),t.pointRadius!=null&&r.path.pointRadius(t.pointRadius),t.fit&&XEt(r,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function XEt(t,e){let r=ZEt(e.fit);e.extent?t.fitExtent(e.extent,r):e.size&&t.fitSize(e.size,r)}function JEt(t){let e=$U((t||"mercator").toLowerCase());return e||W("Unrecognized projection type: "+t),e()}function SDe(t,e,r){Je(t[e])&&t[e](r)}function ZEt(t){return t=le(t),t.length===1?t[0]:{type:Kse,features:t.reduce((e,r)=>e.concat(eAt(r)),[])}}function eAt(t){return t.type===Kse?t.features:le(t).filter(e=>e!=null).map(e=>e.type===Qse?e:{type:Qse,geometry:e})}var goe={};qo(goe,{force:()=>moe});function ioe(t,e){var r,n=1;t==null&&(t=0),e==null&&(e=0);function i(){var s,o=r.length,a,u=0,l=0;for(s=0;s<o;++s)a=r[s],u+=a.x,l+=a.y;for(u=(u/o-t)*n,l=(l/o-e)*n,s=0;s<o;++s)a=r[s],a.x-=u,a.y-=l}return i.initialize=function(s){r=s},i.x=function(s){return arguments.length?(t=+s,i):t},i.y=function(s){return arguments.length?(e=+s,i):e},i.strength=function(s){return arguments.length?(n=+s,i):n},i}function DDe(t){let e=+this._x.call(null,t),r=+this._y.call(null,t);return NDe(this.cover(e,r),e,r,t)}function NDe(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var i,s=t._root,o={data:n},a=t._x0,u=t._y0,l=t._x1,c=t._y1,f,x,d,h,p,m,g,y;if(!s)return t._root=o,t;for(;s.length;)if((p=e>=(f=(a+l)/2))?a=f:l=f,(m=r>=(x=(u+c)/2))?u=x:c=x,i=s,!(s=s[g=m<<1|p]))return i[g]=o,t;if(d=+t._x.call(null,s.data),h=+t._y.call(null,s.data),e===d&&r===h)return o.next=s,i?i[g]=o:t._root=o,t;do i=i?i[g]=new Array(4):t._root=new Array(4),(p=e>=(f=(a+l)/2))?a=f:l=f,(m=r>=(x=(u+c)/2))?u=x:c=x;while((g=m<<1|p)===(y=(h>=x)<<1|d>=f));return i[y]=s,i[g]=o,t}function FDe(t){var e,r,n=t.length,i,s,o=new Array(n),a=new Array(n),u=1/0,l=1/0,c=-1/0,f=-1/0;for(r=0;r<n;++r)isNaN(i=+this._x.call(null,e=t[r]))||isNaN(s=+this._y.call(null,e))||(o[r]=i,a[r]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),r=0;r<n;++r)NDe(this,o[r],a[r],t[r]);return this}function wDe(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,i=this._x1,s=this._y1;if(isNaN(r))i=(r=Math.floor(t))+1,s=(n=Math.floor(e))+1;else{for(var o=i-r||1,a=this._root,u,l;r>t||t>=i||n>e||e>=s;)switch(l=(e<n)<<1|t<r,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=r+o,s=n+o;break;case 1:r=i-o,s=n+o;break;case 2:i=r+o,n=s-o;break;case 3:r=i-o,n=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=r,this._y0=n,this._x1=i,this._y1=s,this}function LDe(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function IDe(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Hi(t,e,r,n,i){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=i}function MDe(t,e,r){var n,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,x=[],d=this._root,h,p;for(d&&x.push(new Hi(d,i,s,c,f)),r==null?r=1/0:(i=t-r,s=e-r,c=t+r,f=e+r,r*=r);h=x.pop();)if(!(!(d=h.node)||(o=h.x0)>c||(a=h.y0)>f||(u=h.x1)<i||(l=h.y1)<s))if(d.length){var m=(o+u)/2,g=(a+l)/2;x.push(new Hi(d[3],m,g,u,l),new Hi(d[2],o,g,m,l),new Hi(d[1],m,a,u,g),new Hi(d[0],o,a,m,g)),(p=(e>=g)<<1|t>=m)&&(h=x[x.length-1],x[x.length-1]=x[x.length-1-p],x[x.length-1-p]=h)}else{var y=t-+this._x.call(null,d.data),A=e-+this._y.call(null,d.data),S=y*y+A*A;if(S<r){var T=Math.sqrt(r=S);i=t-T,s=e-T,c=t+T,f=e+T,n=d.data}}return n}function PDe(t){if(isNaN(c=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,r=this._root,n,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,x,d,h,p,m,g;if(!r)return this;if(r.length)for(;;){if((h=c>=(x=(o+u)/2))?o=x:u=x,(p=f>=(d=(a+l)/2))?a=d:l=d,e=r,!(r=r[m=p<<1|h]))return this;if(!r.length)break;(e[m+1&3]||e[m+2&3]||e[m+3&3])&&(n=e,g=m)}for(;r.data!==t;)if(i=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,i?(s?i.next=s:delete i.next,this):e?(s?e[m]=s:delete e[m],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(n?n[g]=r:this._root=r),this):(this._root=s,this)}function kDe(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this}function BDe(){return this._root}function qDe(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function UDe(t){var e=[],r,n=this._root,i,s,o,a,u;for(n&&e.push(new Hi(n,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!t(n=r.node,s=r.x0,o=r.y0,a=r.x1,u=r.y1)&&n.length){var l=(s+a)/2,c=(o+u)/2;(i=n[3])&&e.push(new Hi(i,l,c,a,u)),(i=n[2])&&e.push(new Hi(i,s,c,l,u)),(i=n[1])&&e.push(new Hi(i,l,o,a,c)),(i=n[0])&&e.push(new Hi(i,s,o,l,c))}return this}function $De(t){var e=[],r=[],n;for(this._root&&e.push(new Hi(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var s,o=n.x0,a=n.y0,u=n.x1,l=n.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&e.push(new Hi(s,o,a,c,f)),(s=i[1])&&e.push(new Hi(s,c,a,u,f)),(s=i[2])&&e.push(new Hi(s,o,f,c,l)),(s=i[3])&&e.push(new Hi(s,c,f,u,l))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this}function jDe(t){return t[0]}function HDe(t){return arguments.length?(this._x=t,this):this._x}function zDe(t){return t[1]}function GDe(t){return arguments.length?(this._y=t,this):this._y}function h3(t,e,r){var n=new soe(e??jDe,r??zDe,NaN,NaN,NaN,NaN);return t==null?n:n.addAll(t)}function soe(t,e,r,n,i,s){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=i,this._y1=s,this._root=void 0}function QDe(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var Lo=h3.prototype=soe.prototype;Lo.copy=function(){var t=new soe(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,n;if(!e)return t;if(!e.length)return t._root=QDe(e),t;for(r=[{source:e,target:t._root=new Array(4)}];e=r.pop();)for(var i=0;i<4;++i)(n=e.source[i])&&(n.length?r.push({source:n,target:e.target[i]=new Array(4)}):e.target[i]=QDe(n));return t};Lo.add=DDe;Lo.addAll=FDe;Lo.cover=wDe;Lo.data=LDe;Lo.extent=IDe;Lo.find=MDe;Lo.remove=PDe;Lo.removeAll=kDe;Lo.root=BDe;Lo.size=qDe;Lo.visit=UDe;Lo.visitAfter=$De;Lo.x=HDe;Lo.y=GDe;function Vn(t){return function(){return t}}function O0(t){return(t()-.5)*1e-6}function tAt(t){return t.x+t.vx}function rAt(t){return t.y+t.vy}function ooe(t){var e,r,n,i=1,s=1;typeof t!="function"&&(t=Vn(t==null?1:+t));function o(){for(var l,c=e.length,f,x,d,h,p,m,g=0;g<s;++g)for(f=h3(e,tAt,rAt).visitAfter(a),l=0;l<c;++l)x=e[l],p=r[x.index],m=p*p,d=x.x+x.vx,h=x.y+x.vy,f.visit(y);function y(A,S,T,_,b){var R=A.data,O=A.r,N=p+O;if(R){if(R.index>x.index){var F=d-R.x-R.vx,$=h-R.y-R.vy,q=F*F+$*$;q<N*N&&(F===0&&(F=O0(n),q+=F*F),$===0&&($=O0(n),q+=$*$),q=(N-(q=Math.sqrt(q)))/q*i,x.vx+=(F*=q)*(N=(O*=O)/(m+O)),x.vy+=($*=q)*N,R.vx-=F*(N=1-N),R.vy-=$*N)}return}return S>d+N||_<d-N||T>h+N||b<h-N}}function a(l){if(l.data)return l.r=r[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(e){var l,c=e.length,f;for(r=new Array(c),l=0;l<c;++l)f=e[l],r[f.index]=+t(f,l,e)}}return o.initialize=function(l,c){e=l,n=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(t=typeof l=="function"?l:Vn(+l),u(),o):t},o}function nAt(t){return t.index}function VDe(t,e){var r=t.get(e);if(!r)throw new Error("node not found: "+e);return r}function aoe(t){var e=nAt,r=f,n,i=Vn(30),s,o,a,u,l,c=1;t==null&&(t=[]);function f(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function x(m){for(var g=0,y=t.length;g<c;++g)for(var A=0,S,T,_,b,R,O,N;A<y;++A)S=t[A],T=S.source,_=S.target,b=_.x+_.vx-T.x-T.vx||O0(l),R=_.y+_.vy-T.y-T.vy||O0(l),O=Math.sqrt(b*b+R*R),O=(O-s[A])/O*m*n[A],b*=O,R*=O,_.vx-=b*(N=u[A]),_.vy-=R*N,T.vx+=b*(N=1-N),T.vy+=R*N}function d(){if(o){var m,g=o.length,y=t.length,A=new Map(o.map((T,_)=>[e(T,_,o),T])),S;for(m=0,a=new Array(g);m<y;++m)S=t[m],S.index=m,typeof S.source!="object"&&(S.source=VDe(A,S.source)),typeof S.target!="object"&&(S.target=VDe(A,S.target)),a[S.source.index]=(a[S.source.index]||0)+1,a[S.target.index]=(a[S.target.index]||0)+1;for(m=0,u=new Array(y);m<y;++m)S=t[m],u[m]=a[S.source.index]/(a[S.source.index]+a[S.target.index]);n=new Array(y),h(),s=new Array(y),p()}}function h(){if(o)for(var m=0,g=t.length;m<g;++m)n[m]=+r(t[m],m,t)}function p(){if(o)for(var m=0,g=t.length;m<g;++m)s[m]=+i(t[m],m,t)}return x.initialize=function(m,g){o=m,l=g,d()},x.links=function(m){return arguments.length?(t=m,d(),x):t},x.id=function(m){return arguments.length?(e=m,x):e},x.iterations=function(m){return arguments.length?(c=+m,x):c},x.strength=function(m){return arguments.length?(r=typeof m=="function"?m:Vn(+m),h(),x):r},x.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Vn(+m),p(),x):i},x}var iAt={value:()=>{}};function YDe(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new jU(r)}function jU(t){this._=t}function sAt(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}jU.prototype=YDe.prototype={constructor:jU,on:function(t,e){var r=this._,n=sAt(t+"",r),i,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((i=(t=n[s]).type)&&(i=oAt(r[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=n[s]).type)r[i]=WDe(r[i],t.name,e);else if(e==null)for(i in r)r[i]=WDe(r[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new jU(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,s;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],n=0,i=s.length;n<i;++n)s[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,s=n.length;i<s;++i)n[i].value.apply(e,r)}};function oAt(t,e){for(var r=0,n=t.length,i;r<n;++r)if((i=t[r]).name===e)return i.value}function WDe(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=iAt,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var uoe=YDe;var xv=0,JO=0,XO=0,XDe=1e3,HU,ZO,zU=0,p3=0,GU=0,e6=typeof performance=="object"&&performance.now?performance:Date,JDe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function r6(){return p3||(JDe(aAt),p3=e6.now()+GU)}function aAt(){p3=0}function t6(){this._call=this._time=this._next=null}t6.prototype=QU.prototype={constructor:t6,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?r6():+r)+(e==null?0:+e),!this._next&&ZO!==this&&(ZO?ZO._next=this:HU=this,ZO=this),this._call=t,this._time=r,loe()},stop:function(){this._call&&(this._call=null,this._time=1/0,loe())}};function QU(t,e,r){var n=new t6;return n.restart(t,e,r),n}function ZDe(){r6(),++xv;for(var t=HU,e;t;)(e=p3-t._time)>=0&&t._call.call(void 0,e),t=t._next;--xv}function KDe(){p3=(zU=e6.now())+GU,xv=JO=0;try{ZDe()}finally{xv=0,lAt(),p3=0}}function uAt(){var t=e6.now(),e=t-zU;e>XDe&&(GU-=e,zU=t)}function lAt(){for(var t,e=HU,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:HU=r);ZO=t,loe(n)}function loe(t){if(!xv){JO&&(JO=clearTimeout(JO));var e=t-p3;e>24?(t<1/0&&(JO=setTimeout(KDe,t-e6.now()-GU)),XO&&(XO=clearInterval(XO))):(XO||(zU=e6.now(),XO=setInterval(uAt,XDe)),xv=1,JDe(KDe))}}function coe(t,e,r){var n=new t6,i=e;return e==null?(n.restart(t,e,r),n):(n._restart=n.restart,n.restart=function(s,o,a){o=+o,a=a==null?r6():+a,n._restart(function u(l){l+=i,n._restart(u,i+=o,a),s(l)},o,a)},n.restart(t,e,r),n)}function eNe(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function tNe(t){return t.x}function rNe(t){return t.y}var cAt=10,fAt=Math.PI*(3-Math.sqrt(5));function foe(t){var e,r=1,n=.001,i=1-Math.pow(n,1/300),s=0,o=.6,a=new Map,u=QU(f),l=uoe("tick","end"),c=eNe();t==null&&(t=[]);function f(){x(),l.call("tick",e),r<n&&(u.stop(),l.call("end",e))}function x(p){var m,g=t.length,y;p===void 0&&(p=1);for(var A=0;A<p;++A)for(r+=(s-r)*i,a.forEach(function(S){S(r)}),m=0;m<g;++m)y=t[m],y.fx==null?y.x+=y.vx*=o:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=o:(y.y=y.fy,y.vy=0);return e}function d(){for(var p=0,m=t.length,g;p<m;++p){if(g=t[p],g.index=p,g.fx!=null&&(g.x=g.fx),g.fy!=null&&(g.y=g.fy),isNaN(g.x)||isNaN(g.y)){var y=cAt*Math.sqrt(.5+p),A=p*fAt;g.x=y*Math.cos(A),g.y=y*Math.sin(A)}(isNaN(g.vx)||isNaN(g.vy))&&(g.vx=g.vy=0)}}function h(p){return p.initialize&&p.initialize(t,c),p}return d(),e={tick:x,restart:function(){return u.restart(f),e},stop:function(){return u.stop(),e},nodes:function(p){return arguments.length?(t=p,d(),a.forEach(h),e):t},alpha:function(p){return arguments.length?(r=+p,e):r},alphaMin:function(p){return arguments.length?(n=+p,e):n},alphaDecay:function(p){return arguments.length?(i=+p,e):+i},alphaTarget:function(p){return arguments.length?(s=+p,e):s},velocityDecay:function(p){return arguments.length?(o=1-p,e):1-o},randomSource:function(p){return arguments.length?(c=p,a.forEach(h),e):c},force:function(p,m){return arguments.length>1?(m==null?a.delete(p):a.set(p,h(m)),e):a.get(p)},find:function(p,m,g){var y=0,A=t.length,S,T,_,b,R;for(g==null?g=1/0:g*=g,y=0;y<A;++y)b=t[y],S=p-b.x,T=m-b.y,_=S*S+T*T,_<g&&(R=b,g=_);return R},on:function(p,m){return arguments.length>1?(l.on(p,m),e):l.on(p)}}}function xoe(){var t,e,r,n,i=Vn(-30),s,o=1,a=1/0,u=.81;function l(d){var h,p=t.length,m=h3(t,tNe,rNe).visitAfter(f);for(n=d,h=0;h<p;++h)e=t[h],m.visit(x)}function c(){if(t){var d,h=t.length,p;for(s=new Array(h),d=0;d<h;++d)p=t[d],s[p.index]=+i(p,d,t)}}function f(d){var h=0,p,m,g=0,y,A,S;if(d.length){for(y=A=S=0;S<4;++S)(p=d[S])&&(m=Math.abs(p.value))&&(h+=p.value,g+=m,y+=m*p.x,A+=m*p.y);d.x=y/g,d.y=A/g}else{p=d,p.x=p.data.x,p.y=p.data.y;do h+=s[p.data.index];while(p=p.next)}d.value=h}function x(d,h,p,m){if(!d.value)return!0;var g=d.x-e.x,y=d.y-e.y,A=m-h,S=g*g+y*y;if(A*A/u<S)return S<a&&(g===0&&(g=O0(r),S+=g*g),y===0&&(y=O0(r),S+=y*y),S<o&&(S=Math.sqrt(o*S)),e.vx+=g*d.value*n/S,e.vy+=y*d.value*n/S),!0;if(d.length||S>=a)return;(d.data!==e||d.next)&&(g===0&&(g=O0(r),S+=g*g),y===0&&(y=O0(r),S+=y*y),S<o&&(S=Math.sqrt(o*S)));do d.data!==e&&(A=s[d.data.index]*n/S,e.vx+=g*A,e.vy+=y*A);while(d=d.next)}return l.initialize=function(d,h){t=d,r=h,c()},l.strength=function(d){return arguments.length?(i=typeof d=="function"?d:Vn(+d),c(),l):i},l.distanceMin=function(d){return arguments.length?(o=d*d,l):Math.sqrt(o)},l.distanceMax=function(d){return arguments.length?(a=d*d,l):Math.sqrt(a)},l.theta=function(d){return arguments.length?(u=d*d,l):Math.sqrt(u)},l}function doe(t){var e=Vn(.1),r,n,i;typeof t!="function"&&(t=Vn(t==null?0:+t));function s(a){for(var u=0,l=r.length,c;u<l;++u)c=r[u],c.vx+=(i[u]-c.x)*n[u]*a}function o(){if(r){var a,u=r.length;for(n=new Array(u),i=new Array(u),a=0;a<u;++a)n[a]=isNaN(i[a]=+t(r[a],a,r))?0:+e(r[a],a,r)}}return s.initialize=function(a){r=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Vn(+a),o(),s):e},s.x=function(a){return arguments.length?(t=typeof a=="function"?a:Vn(+a),o(),s):t},s}function hoe(t){var e=Vn(.1),r,n,i;typeof t!="function"&&(t=Vn(t==null?0:+t));function s(a){for(var u=0,l=r.length,c;u<l;++u)c=r[u],c.vy+=(i[u]-c.y)*n[u]*a}function o(){if(r){var a,u=r.length;for(n=new Array(u),i=new Array(u),a=0;a<u;++a)n[a]=isNaN(i[a]=+t(r[a],a,r))?0:+e(r[a],a,r)}}return s.initialize=function(a){r=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Vn(+a),o(),s):e},s.y=function(a){return arguments.length?(t=typeof a=="function"?a:Vn(+a),o(),s):t},s}var nNe={center:ioe,collide:ooe,nbody:xoe,link:aoe,x:doe,y:hoe},n6="forces",poe=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],xAt=["static","iterations"],iNe=["x","y","vx","vy"];function moe(t){V.call(this,null,t)}moe.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:iNe}]};ce(moe,V,{transform(t,e){var r=this.value,n=e.changed(e.ADD_REM),i=t.modified(poe),s=t.iterations||300;if(r?(n&&(e.modifies("index"),r.nodes(e.source)),(i||e.changed(e.MOD))&&sNe(r,t,0,e)):(this.value=r=hAt(e.source,t),r.on("tick",dAt(e.dataflow,this)),t.static||(n=!0,r.tick()),e.modifies("index")),i||n||t.modified(xAt)||e.changed()&&t.restart){if(r.alpha(Math.max(r.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(r.alphaMin(),1/s)),t.static)for(r.stop();--s>=0;)r.tick();else if(r.stopped()&&r.restart(),!n)return e.StopPropagation}return this.finish(t,e)},finish(t,e){let r=e.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==n6||c.op._argval.force!=="link")){for(var n=c.op._argops,i=0,s=n.length,o;i<s;++i)if(n[i].name==="links"&&(o=n[i].op.source)){r.pulse(o,r.changeset().reflow());break}}return e.reflow(t.modified()).modifies(iNe)}});function dAt(t,e){return()=>t.touch(e).run()}function hAt(t,e){let r=foe(t),n=r.stop,i=r.restart,s=!1;return r.stopped=()=>s,r.restart=()=>(s=!1,i()),r.stop=()=>(s=!0,n()),sNe(r,e,!0).on("end",()=>s=!0)}function sNe(t,e,r,n){var i=le(e.forces),s,o,a,u;for(s=0,o=poe.length;s<o;++s)a=poe[s],a!==n6&&e.modified(a)&&t[a](e[a]);for(s=0,o=i.length;s<o;++s)u=n6+s,a=r||e.modified(n6,s)?mAt(i[s]):n&&pAt(i[s],n)?t.force(u):null,a&&t.force(u,a);for(o=t.numForces||0;s<o;++s)t.force(n6+s,null);return t.numForces=i.length,t}function pAt(t,e){var r,n;for(r in t)if(Je(n=t[r])&&e.modified(Pi(n)))return 1;return 0}function mAt(t){var e,r;Fe(nNe,t.force)||W("Unrecognized force: "+t.force),e=nNe[t.force]();for(r in t)Je(e[r])&&gAt(e[r],t[r],t);return e}function gAt(t,e,r){t(Je(e)?n=>e(n,r):e)}var Woe={};qo(Woe,{nest:()=>$oe,pack:()=>joe,partition:()=>Hoe,stratify:()=>zoe,tree:()=>Goe,treelinks:()=>Qoe,treemap:()=>Voe});function yAt(t,e){return t.parent===e.parent?1:2}function EAt(t){return t.reduce(AAt,0)/t.length}function AAt(t,e){return t+e.x}function SAt(t){return 1+t.reduce(vAt,0)}function vAt(t,e){return Math.max(t,e.y)}function _At(t){for(var e;e=t.children;)t=e[0];return t}function bAt(t){for(var e;e=t.children;)t=e[e.length-1];return t}function yoe(){var t=yAt,e=1,r=1,n=!1;function i(s){var o,a=0;s.eachAfter(function(x){var d=x.children;d?(x.x=EAt(d),x.y=SAt(d)):(x.x=o?a+=t(x,o):0,x.y=0,o=x)});var u=_At(s),l=bAt(s),c=u.x-t(u,l)/2,f=l.x+t(l,u)/2;return s.eachAfter(n?function(x){x.x=(x.x-s.x)*e,x.y=(s.y-x.y)*r}:function(x){x.x=(x.x-c)/(f-c)*e,x.y=(1-(s.y?x.y/s.y:1))*r})}return i.separation=function(s){return arguments.length?(t=s,i):t},i.size=function(s){return arguments.length?(n=!1,e=+s[0],r=+s[1],i):n?null:[e,r]},i.nodeSize=function(s){return arguments.length?(n=!0,e=+s[0],r=+s[1],i):n?[e,r]:null},i}function TAt(t){var e=0,r=t.children,n=r&&r.length;if(!n)e=1;else for(;--n>=0;)e+=r[n].value;t.value=e}function oNe(){return this.eachAfter(TAt)}function aNe(t,e){let r=-1;for(let n of this)t.call(e,n,++r,this);return this}function uNe(t,e){for(var r=this,n=[r],i,s,o=-1;r=n.pop();)if(t.call(e,r,++o,this),i=r.children)for(s=i.length-1;s>=0;--s)n.push(i[s]);return this}function lNe(t,e){for(var r=this,n=[r],i=[],s,o,a,u=-1;r=n.pop();)if(i.push(r),s=r.children)for(o=0,a=s.length;o<a;++o)n.push(s[o]);for(;r=i.pop();)t.call(e,r,++u,this);return this}function cNe(t,e){let r=-1;for(let n of this)if(t.call(e,n,++r,this))return n}function fNe(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,n=e.children,i=n&&n.length;--i>=0;)r+=n[i].value;e.value=r})}function xNe(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function dNe(t){for(var e=this,r=CAt(e,t),n=[e];e!==r;)e=e.parent,n.push(e);for(var i=n.length;t!==r;)n.splice(i,0,t),t=t.parent;return n}function CAt(t,e){if(t===e)return t;var r=t.ancestors(),n=e.ancestors(),i=null;for(t=r.pop(),e=n.pop();t===e;)i=t,t=r.pop(),e=n.pop();return i}function hNe(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function pNe(){return Array.from(this)}function mNe(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function gNe(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}function*yNe(){var t=this,e,r=[t],n,i,s;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,n=t.children)for(i=0,s=n.length;i<s;++i)r.push(n[i]);while(r.length)}function dv(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=DAt)):e===void 0&&(e=OAt);for(var r=new od(t),n,i=[r],s,o,a,u;n=i.pop();)if((o=e(n.data))&&(u=(o=Array.from(o)).length))for(n.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new od(o[a])),s.parent=n,s.depth=n.depth+1;return r.eachBefore(Eoe)}function RAt(){return dv(this).eachBefore(NAt)}function OAt(t){return t.children}function DAt(t){return Array.isArray(t)?t[1]:null}function NAt(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Eoe(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function od(t){this.data=t,this.depth=this.height=0,this.parent=null}od.prototype=dv.prototype={constructor:od,count:oNe,each:aNe,eachAfter:lNe,eachBefore:uNe,find:cNe,sum:fNe,sort:xNe,path:dNe,ancestors:hNe,descendants:pNe,leaves:mNe,links:gNe,copy:RAt,[Symbol.iterator]:yNe};function hv(t){return t==null?null:Aoe(t)}function Aoe(t){if(typeof t!="function")throw new Error;return t}function ad(){return 0}function U2(t){return function(){return t}}function ENe(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function ANe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function SNe(t,e){let r=t.length,n,i;for(;r;)i=e()*r--|0,n=t[r],t[r]=t[i],t[i]=n;return t}function vNe(t,e){for(var r=0,n=(t=SNe(Array.from(t),e)).length,i=[],s,o;r<n;)s=t[r],o&&_Ne(o,s)?++r:(o=wAt(i=FAt(i,s)),r=0);return o}function FAt(t,e){var r,n;if(Soe(e,t))return[e];for(r=0;r<t.length;++r)if(VU(e,t[r])&&Soe(i6(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(n=r+1;n<t.length;++n)if(VU(i6(t[r],t[n]),e)&&VU(i6(t[r],e),t[n])&&VU(i6(t[n],e),t[r])&&Soe(bNe(t[r],t[n],e),t))return[t[r],t[n],e];throw new Error}function VU(t,e){var r=t.r-e.r,n=e.x-t.x,i=e.y-t.y;return r<0||r*r<n*n+i*i}function _Ne(t,e){var r=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,n=e.x-t.x,i=e.y-t.y;return r>0&&r*r>n*n+i*i}function Soe(t,e){for(var r=0;r<e.length;++r)if(!_Ne(t,e[r]))return!1;return!0}function wAt(t){switch(t.length){case 1:return LAt(t[0]);case 2:return i6(t[0],t[1]);case 3:return bNe(t[0],t[1],t[2])}}function LAt(t){return{x:t.x,y:t.y,r:t.r}}function i6(t,e){var r=t.x,n=t.y,i=t.r,s=e.x,o=e.y,a=e.r,u=s-r,l=o-n,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(r+s+u/f*c)/2,y:(n+o+l/f*c)/2,r:(f+i+a)/2}}function bNe(t,e,r){var n=t.x,i=t.y,s=t.r,o=e.x,a=e.y,u=e.r,l=r.x,c=r.y,f=r.r,x=n-o,d=n-l,h=i-a,p=i-c,m=u-s,g=f-s,y=n*n+i*i-s*s,A=y-o*o-a*a+u*u,S=y-l*l-c*c+f*f,T=d*h-x*p,_=(h*S-p*A)/(T*2)-n,b=(p*m-h*g)/T,R=(d*A-x*S)/(T*2)-i,O=(x*g-d*m)/T,N=b*b+O*O-1,F=2*(s+_*b+R*O),$=_*_+R*R-s*s,q=-(Math.abs(N)>1e-6?(F+Math.sqrt(F*F-4*N*$))/(2*N):$/F);return{x:n+_+b*q,y:i+R+O*q,r:q}}function TNe(t,e,r){var n=t.x-e.x,i,s,o=t.y-e.y,a,u,l=n*n+o*o;l?(s=e.r+r.r,s*=s,u=t.r+r.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),r.x=t.x-i*n-a*o,r.y=t.y-i*o+a*n):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),r.x=e.x+i*n-a*o,r.y=e.y+i*o+a*n)):(r.x=e.x+r.r,r.y=e.y)}function CNe(t,e){var r=t.r+e.r-1e-6,n=e.x-t.x,i=e.y-t.y;return r>0&&r*r>n*n+i*i}function RNe(t){var e=t._,r=t.next._,n=e.r+r.r,i=(e.x*r.r+r.x*e.r)/n,s=(e.y*r.r+r.y*e.r)/n;return i*i+s*s}function WU(t){this._=t,this.next=null,this.previous=null}function ONe(t,e){if(!(s=(t=ANe(t)).length))return 0;var r,n,i,s,o,a,u,l,c,f,x;if(r=t[0],r.x=0,r.y=0,!(s>1))return r.r;if(n=t[1],r.x=-n.r,n.x=r.r,n.y=0,!(s>2))return r.r+n.r;TNe(n,r,i=t[2]),r=new WU(r),n=new WU(n),i=new WU(i),r.next=i.previous=n,n.next=r.previous=i,i.next=n.previous=r;e:for(u=3;u<s;++u){TNe(r._,n._,i=t[u]),i=new WU(i),l=n.next,c=r.previous,f=n._.r,x=r._.r;do if(f<=x){if(CNe(l._,i._)){n=l,r.next=n,n.previous=r,--u;continue e}f+=l._.r,l=l.next}else{if(CNe(c._,i._)){r=c,r.next=n,n.previous=r,--u;continue e}x+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=r,i.next=n,r.next=n.previous=n=i,o=RNe(r);(i=i.next)!==n;)(a=RNe(i))<o&&(r=i,o=a);n=r.next}for(r=[n._],i=n;(i=i.next)!==n;)r.push(i._);for(i=vNe(r,e),u=0;u<s;++u)r=t[u],r.x-=i.x,r.y-=i.y;return i.r}function IAt(t){return Math.sqrt(t.value)}function _oe(){var t=null,e=1,r=1,n=ad;function i(s){let o=ENe();return s.x=e/2,s.y=r/2,t?s.eachBefore(DNe(t)).eachAfter(voe(n,.5,o)).eachBefore(NNe(1)):s.eachBefore(DNe(IAt)).eachAfter(voe(ad,1,o)).eachAfter(voe(n,s.r/Math.min(e,r),o)).eachBefore(NNe(Math.min(e,r)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(t=hv(s),i):t},i.size=function(s){return arguments.length?(e=+s[0],r=+s[1],i):[e,r]},i.padding=function(s){return arguments.length?(n=typeof s=="function"?s:U2(+s),i):n},i}function DNe(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function voe(t,e,r){return function(n){if(i=n.children){var i,s,o=i.length,a=t(n)*e||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=ONe(i,r),a)for(s=0;s<o;++s)i[s].r-=a;n.r=u+a}}}function NNe(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}function YU(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function D0(t,e,r,n,i){for(var s=t.children,o,a=-1,u=s.length,l=t.value&&(n-e)/t.value;++a<u;)o=s[a],o.y0=r,o.y1=i,o.x0=e,o.x1=e+=o.value*l}function boe(){var t=1,e=1,r=0,n=!1;function i(o){var a=o.height+1;return o.x0=o.y0=r,o.x1=t,o.y1=e/a,o.eachBefore(s(e,a)),n&&o.eachBefore(YU),o}function s(o,a){return function(u){u.children&&D0(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-r,x=u.y1-r;f<l&&(l=f=(l+f)/2),x<c&&(c=x=(c+x)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=x}}return i.round=function(o){return arguments.length?(n=!!o,i):n},i.size=function(o){return arguments.length?(t=+o[0],e=+o[1],i):[t,e]},i.padding=function(o){return arguments.length?(r=+o,i):r},i}var MAt={depth:-1},FNe={},Toe={};function PAt(t){return t.id}function kAt(t){return t.parentId}function KU(){var t=PAt,e=kAt,r;function n(i){var s=Array.from(i),o=t,a=e,u,l,c,f,x,d,h,p,m=new Map;if(r!=null){let g=s.map((S,T)=>BAt(r(S,T,i))),y=g.map(wNe),A=new Set(g).add("");for(let S of y)A.has(S)||(A.add(S),g.push(S),y.push(wNe(S)),s.push(Toe));o=(S,T)=>g[T],a=(S,T)=>y[T]}for(c=0,u=s.length;c<u;++c)l=s[c],d=s[c]=new od(l),(h=o(l,c,i))!=null&&(h+="")&&(p=d.id=h,m.set(p,m.has(p)?FNe:d)),(h=a(l,c,i))!=null&&(h+="")&&(d.parent=h);for(c=0;c<u;++c)if(d=s[c],h=d.parent){if(x=m.get(h),!x)throw new Error("missing: "+h);if(x===FNe)throw new Error("ambiguous: "+h);x.children?x.children.push(d):x.children=[d],d.parent=x}else{if(f)throw new Error("multiple roots");f=d}if(!f)throw new Error("no root");if(r!=null){for(;f.data===Toe&&f.children.length===1;)f=f.children[0],--u;for(let g=s.length-1;g>=0&&(d=s[g],d.data===Toe);--g)d.data=null}if(f.parent=MAt,f.eachBefore(function(g){g.depth=g.parent.depth+1,--u}).eachBefore(Eoe),f.parent=null,u>0)throw new Error("cycle");return f}return n.id=function(i){return arguments.length?(t=hv(i),n):t},n.parentId=function(i){return arguments.length?(e=hv(i),n):e},n.path=function(i){return arguments.length?(r=hv(i),n):r},n}function BAt(t){t=`${t}`;let e=t.length;return Coe(t,e-1)&&!Coe(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function wNe(t){let e=t.length;if(e<2)return"";for(;--e>1&&!Coe(t,e););return t.slice(0,e)}function Coe(t,e){if(t[e]==="/"){let r=0;for(;e>0&&t[--e]==="\\";)++r;if(!(r&1))return!0}return!1}function qAt(t,e){return t.parent===e.parent?1:2}function Roe(t){var e=t.children;return e?e[0]:t.t}function Ooe(t){var e=t.children;return e?e[e.length-1]:t.t}function UAt(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}function $At(t){for(var e=0,r=0,n=t.children,i=n.length,s;--i>=0;)s=n[i],s.z+=e,s.m+=e,e+=s.s+(r+=s.c)}function jAt(t,e,r){return t.a.parent===e.parent?t.a:r}function XU(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}XU.prototype=Object.create(od.prototype);function HAt(t){for(var e=new XU(t,0),r,n=[e],i,s,o,a;r=n.pop();)if(s=r._.children)for(r.children=new Array(a=s.length),o=a-1;o>=0;--o)n.push(i=r.children[o]=new XU(s[o],o)),i.parent=r;return(e.parent=new XU(null,0)).children=[e],e}function Doe(){var t=qAt,e=1,r=1,n=null;function i(l){var c=HAt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),n)l.eachBefore(u);else{var f=l,x=l,d=l;l.eachBefore(function(y){y.x<f.x&&(f=y),y.x>x.x&&(x=y),y.depth>d.depth&&(d=y)});var h=f===x?1:t(f,x)/2,p=h-f.x,m=e/(x.x+h+p),g=r/(d.depth||1);l.eachBefore(function(y){y.x=(y.x+p)*m,y.y=y.depth*g})}return l}function s(l){var c=l.children,f=l.parent.children,x=l.i?f[l.i-1]:null;if(c){$At(l);var d=(c[0].z+c[c.length-1].z)/2;x?(l.z=x.z+t(l._,x._),l.m=l.z-d):l.z=d}else x&&(l.z=x.z+t(l._,x._));l.parent.A=a(l,x,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var x=l,d=l,h=c,p=x.parent.children[0],m=x.m,g=d.m,y=h.m,A=p.m,S;h=Ooe(h),x=Roe(x),h&&x;)p=Roe(p),d=Ooe(d),d.a=l,S=h.z+y-x.z-m+t(h._,x._),S>0&&(UAt(jAt(h,l,f),l,S),m+=S,g+=S),y+=h.m,m+=x.m,A+=p.m,g+=d.m;h&&!Ooe(d)&&(d.t=h,d.m+=y-g),x&&!Roe(p)&&(p.t=x,p.m+=m-A,f=l)}return f}function u(l){l.x*=e,l.y=l.depth*r}return i.separation=function(l){return arguments.length?(t=l,i):t},i.size=function(l){return arguments.length?(n=!1,e=+l[0],r=+l[1],i):n?null:[e,r]},i.nodeSize=function(l){return arguments.length?(n=!0,e=+l[0],r=+l[1],i):n?[e,r]:null},i}function ud(t,e,r,n,i){for(var s=t.children,o,a=-1,u=s.length,l=t.value&&(i-r)/t.value;++a<u;)o=s[a],o.x0=e,o.x1=n,o.y0=r,o.y1=r+=o.value*l}var Noe=(1+Math.sqrt(5))/2;function Foe(t,e,r,n,i,s){for(var o=[],a=e.children,u,l,c=0,f=0,x=a.length,d,h,p=e.value,m,g,y,A,S,T,_;c<x;){d=i-r,h=s-n;do m=a[f++].value;while(!m&&f<x);for(g=y=m,T=Math.max(h/d,d/h)/(p*t),_=m*m*T,S=Math.max(y/_,_/g);f<x;++f){if(m+=l=a[f].value,l<g&&(g=l),l>y&&(y=l),_=m*m*T,A=Math.max(y/_,_/g),A>S){m-=l;break}S=A}o.push(u={value:m,dice:d<h,children:a.slice(c,f)}),u.dice?D0(u,r,n,i,p?n+=h*m/p:s):ud(u,r,n,p?r+=d*m/p:i,s),p-=m,c=f}return o}var s6=function t(e){function r(n,i,s,o,a){Foe(e,n,i,s,o,a)}return r.ratio=function(n){return t((n=+n)>1?n:1)},r}(Noe);function woe(){var t=s6,e=!1,r=1,n=1,i=[0],s=ad,o=ad,a=ad,u=ad,l=ad;function c(x){return x.x0=x.y0=0,x.x1=r,x.y1=n,x.eachBefore(f),i=[0],e&&x.eachBefore(YU),x}function f(x){var d=i[x.depth],h=x.x0+d,p=x.y0+d,m=x.x1-d,g=x.y1-d;m<h&&(h=m=(h+m)/2),g<p&&(p=g=(p+g)/2),x.x0=h,x.y0=p,x.x1=m,x.y1=g,x.children&&(d=i[x.depth+1]=s(x)/2,h+=l(x)-d,p+=o(x)-d,m-=a(x)-d,g-=u(x)-d,m<h&&(h=m=(h+m)/2),g<p&&(p=g=(p+g)/2),t(x,h,p,m,g))}return c.round=function(x){return arguments.length?(e=!!x,c):e},c.size=function(x){return arguments.length?(r=+x[0],n=+x[1],c):[r,n]},c.tile=function(x){return arguments.length?(t=Aoe(x),c):t},c.padding=function(x){return arguments.length?c.paddingInner(x).paddingOuter(x):c.paddingInner()},c.paddingInner=function(x){return arguments.length?(s=typeof x=="function"?x:U2(+x),c):s},c.paddingOuter=function(x){return arguments.length?c.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x):c.paddingTop()},c.paddingTop=function(x){return arguments.length?(o=typeof x=="function"?x:U2(+x),c):o},c.paddingRight=function(x){return arguments.length?(a=typeof x=="function"?x:U2(+x),c):a},c.paddingBottom=function(x){return arguments.length?(u=typeof x=="function"?x:U2(+x),c):u},c.paddingLeft=function(x){return arguments.length?(l=typeof x=="function"?x:U2(+x),c):l},c}function Loe(t,e,r,n,i){var s=t.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,t.value,e,r,n,i);function c(f,x,d,h,p,m,g){if(f>=x-1){var y=s[f];y.x0=h,y.y0=p,y.x1=m,y.y1=g;return}for(var A=l[f],S=d/2+A,T=f+1,_=x-1;T<_;){var b=T+_>>>1;l[b]<S?T=b+1:_=b}S-l[T-1]<l[T]-S&&f+1<T&&--T;var R=l[T]-A,O=d-R;if(m-h>g-p){var N=d?(h*O+m*R)/d:m;c(f,T,R,h,p,N,g),c(T,x,O,N,p,m,g)}else{var F=d?(p*O+g*R)/d:g;c(f,T,R,h,p,m,F),c(T,x,O,h,F,m,g)}}}function Ioe(t,e,r,n,i){(t.depth&1?ud:D0)(t,e,r,n,i)}var Moe=function t(e){function r(n,i,s,o,a){if((u=n._squarify)&&u.ratio===e)for(var u,l,c,f,x=-1,d,h=u.length,p=n.value;++x<h;){for(l=u[x],c=l.children,f=l.value=0,d=c.length;f<d;++f)l.value+=c[f].value;l.dice?D0(l,i,s,o,p?s+=(a-s)*l.value/p:a):ud(l,i,s,p?i+=(o-i)*l.value/p:o,a),p-=l.value}else n._squarify=u=Foe(e,n,i,s,o,a),u.ratio=e}return r.ratio=function(n){return t((n=+n)>1?n:1)},r}(Noe);function Poe(t,e,r){let n={};return t.each(i=>{let s=i.data;r(s)&&(n[e(s)]=i)}),t.lookup=n,t}function $oe(t){V.call(this,null,t)}$oe.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var zAt=t=>t.values;ce($oe,V,{transform(t,e){e.source||W("Nest transform requires an upstream data source.");var r=t.generate,n=t.modified(),i=e.clone(),s=this.value;return(!s||n||e.changed())&&(s&&s.each(o=>{o.children&&C4(o.data)&&i.rem.push(o.data)}),this.value=s=dv({values:le(t.keys).reduce((o,a)=>(o.key(a),o),GAt()).entries(i.source)},zAt),r&&s.each(o=>{o.children&&(o=wt(o.data),i.add.push(o),i.source.push(o))}),Poe(s,He,He)),i.source.root=s,i}});function GAt(){let t=[],e={entries:i=>n(r(i,0),0),key:i=>(t.push(i),e)};function r(i,s){if(s>=t.length)return i;let o=i.length,a=t[s++],u={},l={},c=-1,f,x,d;for(;++c<o;)f=a(x=i[c])+"",(d=u[f])?d.push(x):u[f]=[x];for(f in u)l[f]=r(u[f],s);return l}function n(i,s){if(++s>t.length)return i;let o=[];for(let a in i)o.push({key:a,values:n(i[a],s)});return o}return e}function ld(t){V.call(this,null,t)}var QAt=(t,e)=>t.parent===e.parent?1:2;ce(ld,V,{transform(t,e){(!e.source||!e.source.root)&&W(this.constructor.name+" transform requires a backing tree data source.");let r=this.layout(t.method),n=this.fields,i=e.source.root,s=t.as||n;t.field?i.sum(t.field):i.count(),t.sort&&i.sort(lf(t.sort,o=>o.data)),VAt(r,this.params,t),r.separation&&r.separation(t.separation!==!1?QAt:Bx);try{this.value=r(i)}catch(o){W(o)}return i.each(o=>WAt(o,n,s)),e.reflow(t.modified()).modifies(s).modifies("leaf")}});function VAt(t,e,r){for(let n,i=0,s=e.length;i<s;++i)n=e[i],n in r&&t[n](r[n])}function WAt(t,e,r){let n=t.data,i=e.length-1;for(let s=0;s<i;++s)n[r[s]]=t[e[s]];n[r[i]]=t.children?t.children.length:0}var koe=["x","y","r","depth","children"];function joe(t){ld.call(this,t)}joe.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:koe.length,default:koe}]};ce(joe,ld,{layout:_oe,params:["radius","size","padding"],fields:koe});var Boe=["x0","y0","x1","y1","depth","children"];function Hoe(t){ld.call(this,t)}Hoe.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Boe.length,default:Boe}]};ce(Hoe,ld,{layout:boe,params:["size","round","padding"],fields:Boe});function zoe(t){V.call(this,null,t)}zoe.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ce(zoe,V,{transform(t,e){e.source||W("Stratify transform requires an upstream data source.");let r=this.value,n=t.modified(),i=e.fork(e.ALL).materialize(e.SOURCE),s=!r||n||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return i.source=i.source.slice(),s&&(r=i.source.length?Poe(KU().id(t.key).parentId(t.parentKey)(i.source),t.key,ki):Poe(KU()([{}]),t.key,t.key)),i.source.root=this.value=r,i}});var LNe={tidy:Doe,cluster:yoe},qoe=["x","y","depth","children"];function Goe(t){ld.call(this,t)}Goe.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:qoe.length,default:qoe}]};ce(Goe,ld,{layout(t){let e=t||"tidy";if(Fe(LNe,e))return LNe[e]();W("Unrecognized Tree layout method: "+e)},params:["size","nodeSize"],fields:qoe});function Qoe(t){V.call(this,[],t)}Qoe.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ce(Qoe,V,{transform(t,e){let r=this.value,n=e.source&&e.source.root,i=e.fork(e.NO_SOURCE),s={};return n||W("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(i.rem=r,e.visit(e.SOURCE,o=>s[He(o)]=1),n.each(o=>{let a=o.data,u=o.parent&&o.parent.data;u&&s[He(a)]&&s[He(u)]&&i.add.push(wt({source:u,target:a}))}),this.value=i.add):e.changed(e.MOD)&&(e.visit(e.MOD,o=>s[He(o)]=1),r.forEach(o=>{(s[He(o.source)]||s[He(o.target)])&&i.mod.push(o)})),i}});var INe={binary:Loe,dice:D0,slice:ud,slicedice:Ioe,squarify:s6,resquarify:Moe},Uoe=["x0","y0","x1","y1","depth","children"];function Voe(t){ld.call(this,t)}Voe.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Uoe.length,default:Uoe}]};ce(Voe,ld,{layout(){let t=woe();return t.ratio=e=>{let r=t.tile();r.ratio&&t.tile(r.ratio(e))},t.method=e=>{Fe(INe,e)?t.tile(INe[e]):W("Unrecognized Treemap layout method: "+e)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Uoe});var sae={};qo(sae,{label:()=>iae});var Yoe=4278190080;function YAt(t,e){let r=t.bitmap();return(e||[]).forEach(n=>r.set(t(n.boundary[0]),t(n.boundary[3]))),[r,void 0]}function KAt(t,e,r,n,i){let s=t.width,o=t.height,a=n||i,u=ll(s,o).getContext("2d"),l=ll(s,o).getContext("2d"),c=a&&ll(s,o).getContext("2d");r.forEach(R=>JU(u,R,!1)),JU(l,e,!1),a&&JU(c,e,!0);let f=Koe(u,s,o),x=Koe(l,s,o),d=a&&Koe(c,s,o),h=t.bitmap(),p=a&&t.bitmap(),m,g,y,A,S,T,_,b;for(g=0;g<o;++g)for(m=0;m<s;++m)S=g*s+m,T=f[S]&Yoe,b=x[S]&Yoe,_=a&&d[S]&Yoe,(T||_||b)&&(y=t(m),A=t(g),!i&&(T||b)&&h.set(y,A),a&&(T||_)&&p.set(y,A));return[h,p]}function Koe(t,e,r){return new Uint32Array(t.getImageData(0,0,e,r).data.buffer)}function JU(t,e,r){if(!e.length)return;let n=e[0].mark.marktype;n==="group"?e.forEach(i=>{i.items.forEach(s=>JU(t,s.items,r))}):pa[n].draw(t,{items:r?e.map(XAt):e})}function XAt(t){let e=Ig(t,{});return e.stroke&&e.strokeOpacity!==0||e.fill&&e.fillOpacity!==0?{...e,strokeOpacity:1,stroke:"#000",fillOpacity:0}:e}var cd=5,Io=31,o6=32,$2=new Uint32Array(o6+1),N0=new Uint32Array(o6+1);N0[0]=0;$2[0]=~N0[0];for(let t=1;t<=o6;++t)N0[t]=N0[t-1]<<1|1,$2[t]=~N0[t];function JAt(t,e){let r=new Uint32Array(~~((t*e+o6)/o6));function n(s,o){r[s]|=o}function i(s,o){r[s]&=o}return{array:r,get:(s,o)=>{let a=o*t+s;return r[a>>>cd]&1<<(a&Io)},set:(s,o)=>{let a=o*t+s;n(a>>>cd,1<<(a&Io))},clear:(s,o)=>{let a=o*t+s;i(a>>>cd,~(1<<(a&Io)))},getRange:(s,o,a,u)=>{let l=u,c,f,x,d;for(;l>=o;--l)if(c=l*t+s,f=l*t+a,x=c>>>cd,d=f>>>cd,x===d){if(r[x]&$2[c&Io]&N0[(f&Io)+1])return!0}else{if(r[x]&$2[c&Io]||r[d]&N0[(f&Io)+1])return!0;for(let h=x+1;h<d;++h)if(r[h])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,x,d;for(;o<=u;++o)if(l=o*t+s,c=o*t+a,f=l>>>cd,x=c>>>cd,f===x)n(f,$2[l&Io]&N0[(c&Io)+1]);else for(n(f,$2[l&Io]),n(x,N0[(c&Io)+1]),d=f+1;d<x;++d)n(d,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,x,d;for(;o<=u;++o)if(l=o*t+s,c=o*t+a,f=l>>>cd,x=c>>>cd,f===x)i(f,N0[l&Io]|$2[(c&Io)+1]);else for(i(f,N0[l&Io]),i(x,$2[(c&Io)+1]),d=f+1;d<x;++d)i(d,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=e||a>=t}}function ZAt(t,e,r){let n=Math.max(1,Math.sqrt(t*e/1e6)),i=~~((t+2*r+n)/n),s=~~((e+2*r+n)/n),o=a=>~~((a+r)/n);return o.invert=a=>a*n-r,o.bitmap=()=>JAt(i,s),o.ratio=n,o.padding=r,o.width=t,o.height=e,o}function eSt(t,e,r,n){let i=t.width,s=t.height;return function(o){let a=o.datum.datum.items[n].items,u=a.length,l=o.datum.fontSize,c=v0.width(o.datum,o.datum.text),f=0,x,d,h,p,m,g,y;for(let A=0;A<u;++A)x=a[A].x,h=a[A].y,d=a[A].x2===void 0?x:a[A].x2,p=a[A].y2===void 0?h:a[A].y2,m=(x+d)/2,g=(h+p)/2,y=Math.abs(d-x+p-h),y>=f&&(f=y,o.x=m,o.y=g);return m=c/2,g=l/2,x=o.x-m,d=o.x+m,h=o.y-g,p=o.y+g,o.align="center",x<0&&d<=i?o.align="left":0<=x&&i<d&&(o.align="right"),o.baseline="middle",h<0&&p<=s?o.baseline="top":0<=h&&s<p&&(o.baseline="bottom"),!0}}function ZU(t,e,r,n,i,s){let o=r/2;return t-o<0||t+o>i||e-(o=n/2)<0||e+o>s}function j2(t,e,r,n,i,s,o,a){let u=i*s/(n*2),l=t(e-u),c=t(e+u),f=t(r-(s=s/2)),x=t(r+s);return o.outOfBounds(l,f,c,x)||o.getRange(l,f,c,x)||a&&a.getRange(l,f,c,x)}function tSt(t,e,r,n){let i=t.width,s=t.height,o=e[0],a=e[1];function u(l,c,f,x,d){let h=t.invert(l),p=t.invert(c),m=f,g=s,y;if(!ZU(h,p,x,d,i,s)&&!j2(t,h,p,d,x,m,o,a)&&!j2(t,h,p,d,x,d,o,null)){for(;g-m>=1;)y=(m+g)/2,j2(t,h,p,d,x,y,o,a)?g=y:m=y;if(m>f)return[h,p,m,!0]}}return function(l){let c=l.datum.datum.items[n].items,f=c.length,x=l.datum.fontSize,d=v0.width(l.datum,l.datum.text),h=r?x:0,p=!1,m=!1,g=0,y,A,S,T,_,b,R,O,N,F,$,q,X,P,te,me,Ce;for(let Pe=0;Pe<f;++Pe){for(y=c[Pe].x,S=c[Pe].y,A=c[Pe].x2===void 0?y:c[Pe].x2,T=c[Pe].y2===void 0?S:c[Pe].y2,y>A&&(Ce=y,y=A,A=Ce),S>T&&(Ce=S,S=T,T=Ce),N=t(y),$=t(A),F=~~((N+$)/2),q=t(S),P=t(T),X=~~((q+P)/2),R=F;R>=N;--R)for(O=X;O>=q;--O)me=u(R,O,h,d,x),me&&([l.x,l.y,h,p]=me);for(R=F;R<=$;++R)for(O=X;O<=P;++O)me=u(R,O,h,d,x),me&&([l.x,l.y,h,p]=me);!p&&!r&&(te=Math.abs(A-y+T-S),_=(y+A)/2,b=(S+T)/2,te>=g&&!ZU(_,b,d,x,i,s)&&!j2(t,_,b,x,d,x,o,null)&&(g=te,l.x=_,l.y=b,m=!0))}return p||m?(_=d/2,b=x/2,o.setRange(t(l.x-_),t(l.y-b),t(l.x+_),t(l.y+b)),l.align="center",l.baseline="middle",!0):!1}}var rSt=[-1,-1,1,1],nSt=[-1,1,-1,1];function iSt(t,e,r,n){let i=t.width,s=t.height,o=e[0],a=e[1],u=t.bitmap();return function(l){let c=l.datum.datum.items[n].items,f=c.length,x=l.datum.fontSize,d=v0.width(l.datum,l.datum.text),h=[],p=r?x:0,m=!1,g=!1,y=0,A,S,T,_,b,R,O,N,F,$,q,X;for(let P=0;P<f;++P){for(A=c[P].x,T=c[P].y,S=c[P].x2===void 0?A:c[P].x2,_=c[P].y2===void 0?T:c[P].y2,h.push([t((A+S)/2),t((T+_)/2)]);h.length;)if([O,N]=h.pop(),!(o.get(O,N)||a.get(O,N)||u.get(O,N))){u.set(O,N);for(let te=0;te<4;++te)b=O+rSt[te],R=N+nSt[te],u.outOfBounds(b,R,b,R)||h.push([b,R]);if(b=t.invert(O),R=t.invert(N),F=p,$=s,!ZU(b,R,d,x,i,s)&&!j2(t,b,R,x,d,F,o,a)&&!j2(t,b,R,x,d,x,o,null)){for(;$-F>=1;)q=(F+$)/2,j2(t,b,R,x,d,q,o,a)?$=q:F=q;F>p&&(l.x=b,l.y=R,p=F,m=!0)}}!m&&!r&&(X=Math.abs(S-A+_-T),b=(A+S)/2,R=(T+_)/2,X>=y&&!ZU(b,R,d,x,i,s)&&!j2(t,b,R,x,d,x,o,null)&&(y=X,l.x=b,l.y=R,g=!0))}return m||g?(b=d/2,R=x/2,o.setRange(t(l.x-b),t(l.y-R),t(l.x+b),t(l.y+R)),l.align="center",l.baseline="middle",!0):!1}}var sSt=["right","center","left"],oSt=["bottom","middle","top"];function aSt(t,e,r,n){let i=t.width,s=t.height,o=e[0],a=e[1],u=n.length;return function(l){let c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let x=l.textWidth??0,d,h,p,m,g,y,A,S,T,_,b,R,O,N,F;for(let $=0;$<u;++$){if(d=(r[$]&3)-1,h=(r[$]>>>2&3)-1,p=d===0&&h===0||n[$]<0,m=d&&h?Math.SQRT1_2:1,g=n[$]<0?-1:1,y=c[1+d]+n[$]*d*m,b=c[4+h]+g*f*h/2+n[$]*h*m,S=b-f/2,T=b+f/2,R=t(y),N=t(S),F=t(T),!x)if(MNe(R,R,N,F,o,a,y,y,S,T,c,p))x=v0.width(l.datum,l.datum.text);else continue;if(_=y+g*x*d/2,y=_-x/2,A=_+x/2,R=t(y),O=t(A),MNe(R,O,N,F,o,a,y,A,S,T,c,p))return l.x=d?d*g<0?A:y:_,l.y=h?h*g<0?T:S:b,l.align=sSt[d*g+1],l.baseline=oSt[h*g+1],o.setRange(R,N,O,F),!0}return!1}}function MNe(t,e,r,n,i,s,o,a,u,l,c,f){return!(i.outOfBounds(t,r,e,n)||(f&&s||i).getRange(t,r,e,n))}var Xoe=0,Joe=4,Zoe=8,eae=0,tae=1,rae=2,uSt={"top-left":Xoe+eae,top:Xoe+tae,"top-right":Xoe+rae,left:Joe+eae,middle:Joe+tae,right:Joe+rae,"bottom-left":Zoe+eae,bottom:Zoe+tae,"bottom-right":Zoe+rae},lSt={naive:eSt,"reduced-search":tSt,floodfill:iSt};function cSt(t,e,r,n,i,s,o,a,u,l,c){if(!t.length)return t;let f=Math.max(n.length,i.length),x=fSt(n,f),d=xSt(i,f),h=dSt(t[0].datum),p=h==="group"&&t[0].datum.items[u].marktype,m=p==="area",g=hSt(h,p,a,u),y=l===null||l===1/0,A=m&&c==="naive",S=-1,T=-1,_=t.map(N=>{let F=y?v0.width(N,N.text):void 0;return S=Math.max(S,F),T=Math.max(T,N.fontSize),{datum:N,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:g(N),textWidth:F}});l=l===null||l===1/0?Math.max(S,T)+Math.max(...n):l;let b=ZAt(e[0],e[1],l),R;if(!A){r&&_.sort(($,q)=>r($.datum,q.datum));let N=!1;for(let $=0;$<d.length&&!N;++$)N=d[$]===5||x[$]<0;let F=(h&&o||m)&&t.map($=>$.datum);R=s.length||F?KAt(b,F||[],s,N,m):YAt(b,o&&_)}let O=m?lSt[c](b,R,o,u):aSt(b,R,d,x);return _.forEach(N=>N.opacity=+O(N)),_}function fSt(t,e){let r=new Float64Array(e),n=t.length;for(let i=0;i<n;++i)r[i]=t[i]||0;for(let i=n;i<e;++i)r[i]=r[n-1];return r}function xSt(t,e){let r=new Int8Array(e),n=t.length;for(let i=0;i<n;++i)r[i]|=uSt[t[i]];for(let i=n;i<e;++i)r[i]=r[n-1];return r}function dSt(t){return t&&t.mark&&t.mark.marktype}function hSt(t,e,r,n){let i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return t?t==="line"||t==="area"?s=>i(s.datum):e==="line"?s=>{let o=s.datum.items[n].items;return i(o.length?o[r==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{let o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}var nae=["x","y","opacity","align","baseline"],PNe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function iae(t){V.call(this,null,t)}iae.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:PNe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:nae.length,default:nae}]};ce(iae,V,{transform(t,e){function r(s){let o=t[s];return Je(o)&&e.modified(o.fields)}let n=t.modified();if(!(n||e.changed(e.ADD_REM)||r("sort")))return;(!t.size||t.size.length!==2)&&W("Size parameter should be specified as a [width, height] array.");let i=t.as||nae;return cSt(e.materialize(e.SOURCE).source||[],t.size,t.sort,le(t.offset==null?1:t.offset),le(t.anchor||PNe),t.avoidMarks||[],t.avoidBaseMark!==!1,t.lineAnchor||"end",t.markIndex||0,t.padding===void 0?0:t.padding,t.method||"naive").forEach(s=>{let o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),e.reflow(n).modifies(i)}});var lae={};qo(lae,{loess:()=>aae,regression:()=>uae});function kNe(t,e){var r=[],n=function(c){return c(a)},i,s,o,a,u,l;if(e==null)r.push(t);else for(i={},s=0,o=t.length;s<o;++s)a=t[s],u=e.map(n),l=i[u],l||(i[u]=l=[],l.dims=u,r.push(l)),l.push(a);return r}function aae(t){V.call(this,null,t)}aae.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ce(aae,V,{transform(t,e){let r=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){let n=e.materialize(e.SOURCE).source,i=kNe(n,t.groupby),s=(t.groupby||[]).map(Br),o=s.length,a=t.as||[Br(t.x),Br(t.y)],u=[];i.forEach(l=>{rTe(l,t.x,t.y,t.bandwidth||.3).forEach(c=>{let f={};for(let x=0;x<o;++x)f[s[x]]=l.dims[x];f[a[0]]=c[0],f[a[1]]=c[1],u.push(wt(f))})}),this.value&&(r.rem=this.value),this.value=r.add=r.source=u}return r}});var oae={linear:sre,log:Jbe,exp:Zbe,pow:eTe,quad:ore,poly:tTe},pSt=(t,e)=>t==="poly"?e:t==="quad"?2:1;function uae(t){V.call(this,null,t)}uae.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(oae)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ce(uae,V,{transform(t,e){let r=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){let n=e.materialize(e.SOURCE).source,i=kNe(n,t.groupby),s=(t.groupby||[]).map(Br),o=t.method||"linear",a=t.order||3,u=pSt(o,a),l=t.as||[Br(t.x),Br(t.y)],c=oae[o],f=[],x=t.extent;Fe(oae,o)||W("Invalid regression method: "+o),x!=null&&o==="log"&&x[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),x=null),i.forEach(d=>{if(d.length<=u){e.dataflow.warn("Skipping regression with more parameters than data points.");return}let p=c(d,t.x,t.y,a);if(t.params){f.push(wt({keys:d.dims,coef:p.coef,rSquared:p.rSquared}));return}let m=x||ia(d,t.x),g=y=>{let A={};for(let S=0;S<s.length;++S)A[s[S]]=d.dims[S];A[l[0]]=y[0],A[l[1]]=y[1],f.push(wt(A))};o==="linear"?m.forEach(y=>g([y,p.predict(y)])):NR(p.predict,m,25,200).forEach(g)}),this.value&&(r.rem=this.value),this.value=r.add=r.source=f}return r}});var xae={};qo(xae,{voronoi:()=>fae});var qt=11102230246251565e-32,Wn=134217729,a6=(3+8*qt)*qt;function m3(t,e,r,n,i){let s,o,a,u,l=e[0],c=n[0],f=0,x=0;c>l==c>-l?(s=l,l=e[++f]):(s=c,c=n[++x]);let d=0;if(f<t&&x<r)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=e[++f]):(o=c+s,a=s-(o-c),c=n[++x]),s=o,a!==0&&(i[d++]=a);f<t&&x<r;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=e[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=n[++x]),s=o,a!==0&&(i[d++]=a);for(;f<t;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=e[++f],s=o,a!==0&&(i[d++]=a);for(;x<r;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=n[++x],s=o,a!==0&&(i[d++]=a);return(s!==0||d===0)&&(i[d++]=s),d}function u6(t,e){let r=e[0];for(let n=1;n<t;n++)r+=e[n];return r}function xe(t){return new Float64Array(t)}var mSt=(3+16*qt)*qt,gSt=(2+12*qt)*qt,ySt=(9+64*qt)*qt*qt,pv=xe(4),BNe=xe(8),qNe=xe(12),UNe=xe(16),Mo=xe(4);function ESt(t,e,r,n,i,s,o){let a,u,l,c,f,x,d,h,p,m,g,y,A,S,T,_,b,R,O=t-i,N=r-i,F=e-s,$=n-s;S=O*$,x=Wn*O,d=x-(x-O),h=O-d,x=Wn*$,p=x-(x-$),m=$-p,T=h*m-(S-d*p-h*p-d*m),_=F*N,x=Wn*F,d=x-(x-F),h=F-d,x=Wn*N,p=x-(x-N),m=N-p,b=h*m-(_-d*p-h*p-d*m),g=T-b,f=T-g,pv[0]=T-(g+f)+(f-b),y=S+g,f=y-S,A=S-(y-f)+(g-f),g=A-_,f=A-g,pv[1]=A-(g+f)+(f-_),R=y+g,f=R-y,pv[2]=y-(R-f)+(g-f),pv[3]=R;let q=u6(4,pv),X=gSt*o;if(q>=X||-q>=X||(f=t-O,a=t-(O+f)+(f-i),f=r-N,l=r-(N+f)+(f-i),f=e-F,u=e-(F+f)+(f-s),f=n-$,c=n-($+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(X=ySt*o+a6*Math.abs(q),q+=O*c+$*a-(F*l+N*u),q>=X||-q>=X))return q;S=a*$,x=Wn*a,d=x-(x-a),h=a-d,x=Wn*$,p=x-(x-$),m=$-p,T=h*m-(S-d*p-h*p-d*m),_=u*N,x=Wn*u,d=x-(x-u),h=u-d,x=Wn*N,p=x-(x-N),m=N-p,b=h*m-(_-d*p-h*p-d*m),g=T-b,f=T-g,Mo[0]=T-(g+f)+(f-b),y=S+g,f=y-S,A=S-(y-f)+(g-f),g=A-_,f=A-g,Mo[1]=A-(g+f)+(f-_),R=y+g,f=R-y,Mo[2]=y-(R-f)+(g-f),Mo[3]=R;let P=m3(4,pv,4,Mo,BNe);S=O*c,x=Wn*O,d=x-(x-O),h=O-d,x=Wn*c,p=x-(x-c),m=c-p,T=h*m-(S-d*p-h*p-d*m),_=F*l,x=Wn*F,d=x-(x-F),h=F-d,x=Wn*l,p=x-(x-l),m=l-p,b=h*m-(_-d*p-h*p-d*m),g=T-b,f=T-g,Mo[0]=T-(g+f)+(f-b),y=S+g,f=y-S,A=S-(y-f)+(g-f),g=A-_,f=A-g,Mo[1]=A-(g+f)+(f-_),R=y+g,f=R-y,Mo[2]=y-(R-f)+(g-f),Mo[3]=R;let te=m3(P,BNe,4,Mo,qNe);S=a*c,x=Wn*a,d=x-(x-a),h=a-d,x=Wn*c,p=x-(x-c),m=c-p,T=h*m-(S-d*p-h*p-d*m),_=u*l,x=Wn*u,d=x-(x-u),h=u-d,x=Wn*l,p=x-(x-l),m=l-p,b=h*m-(_-d*p-h*p-d*m),g=T-b,f=T-g,Mo[0]=T-(g+f)+(f-b),y=S+g,f=y-S,A=S-(y-f)+(g-f),g=A-_,f=A-g,Mo[1]=A-(g+f)+(f-_),R=y+g,f=R-y,Mo[2]=y-(R-f)+(g-f),Mo[3]=R;let me=m3(te,qNe,4,Mo,UNe);return UNe[me-1]}function mv(t,e,r,n,i,s){let o=(e-s)*(r-i),a=(t-i)*(n-s),u=o-a;if(o===0||a===0||o>0!=a>0)return u;let l=Math.abs(o+a);return Math.abs(u)>=mSt*l?u:-ESt(t,e,r,n,i,s,l)}var jir=(7+56*qt)*qt,Hir=(3+28*qt)*qt,zir=(26+288*qt)*qt*qt,Gir=xe(4),Qir=xe(4),Vir=xe(4),Wir=xe(4),Yir=xe(4),Kir=xe(4),Xir=xe(4),Jir=xe(4),Zir=xe(4),esr=xe(8),tsr=xe(8),rsr=xe(8),nsr=xe(4),isr=xe(8),ssr=xe(8),osr=xe(8),asr=xe(12),usr=xe(192),lsr=xe(192);var xsr=(10+96*qt)*qt,dsr=(4+48*qt)*qt,hsr=(44+576*qt)*qt*qt,psr=xe(4),msr=xe(4),gsr=xe(4),ysr=xe(4),Esr=xe(4),Asr=xe(4),Ssr=xe(4),vsr=xe(4),_sr=xe(8),bsr=xe(8),Tsr=xe(8),Csr=xe(8),Rsr=xe(8),Osr=xe(8),Dsr=xe(8),Nsr=xe(8),Fsr=xe(8),wsr=xe(4),Lsr=xe(4),Isr=xe(4),Msr=xe(8),Psr=xe(16),ksr=xe(16),Bsr=xe(16),qsr=xe(32),Usr=xe(32),$sr=xe(48),jsr=xe(64),Hsr=xe(1152),zsr=xe(1152);var Wsr=(16+224*qt)*qt,Ysr=(5+72*qt)*qt,Ksr=(71+1408*qt)*qt*qt,Xsr=xe(4),Jsr=xe(4),Zsr=xe(4),eor=xe(4),tor=xe(4),ror=xe(4),nor=xe(4),ior=xe(4),sor=xe(4),oor=xe(4),aor=xe(24),uor=xe(24),lor=xe(24),cor=xe(24),xor=xe(24),dor=xe(24),hor=xe(24),por=xe(24),mor=xe(24),gor=xe(24),yor=xe(1152),Eor=xe(1152),Aor=xe(1152),Sor=xe(1152),vor=xe(1152),_or=xe(2304),bor=xe(2304),Tor=xe(3456),Cor=xe(5760),Ror=xe(8),Oor=xe(8),Dor=xe(8),Nor=xe(16),For=xe(24),wor=xe(48),Lor=xe(48),Ior=xe(96),Mor=xe(192),Por=xe(384),kor=xe(384),Bor=xe(384),qor=xe(768);var Uor=xe(96),$or=xe(96),jor=xe(96),Hor=xe(1152);var jNe=Math.pow(2,-52),e$=new Uint32Array(512),yv=class t{static from(e,r=TSt,n=CSt){let i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){let a=e[o];s[2*o]=r(a),s[2*o+1]=n(a)}return new t(s)}constructor(e){let r=e.length>>1;if(r>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;let n=Math.max(2*r-5,0);this._triangles=new Uint32Array(n*3),this._halfedges=new Int32Array(n*3),this._hashSize=Math.ceil(Math.sqrt(r)),this._hullPrev=new Uint32Array(r),this._hullNext=new Uint32Array(r),this._hullTri=new Uint32Array(r),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(r),this._dists=new Float64Array(r),this.update()}update(){let{coords:e,_hullPrev:r,_hullNext:n,_hullTri:i,_hullHash:s}=this,o=e.length>>1,a=1/0,u=1/0,l=-1/0,c=-1/0;for(let N=0;N<o;N++){let F=e[2*N],$=e[2*N+1];F<a&&(a=F),$<u&&(u=$),F>l&&(l=F),$>c&&(c=$),this._ids[N]=N}let f=(a+l)/2,x=(u+c)/2,d=1/0,h,p,m;for(let N=0;N<o;N++){let F=cae(f,x,e[2*N],e[2*N+1]);F<d&&(h=N,d=F)}let g=e[2*h],y=e[2*h+1];d=1/0;for(let N=0;N<o;N++){if(N===h)continue;let F=cae(g,y,e[2*N],e[2*N+1]);F<d&&F>0&&(p=N,d=F)}let A=e[2*p],S=e[2*p+1],T=1/0;for(let N=0;N<o;N++){if(N===h||N===p)continue;let F=_St(g,y,A,S,e[2*N],e[2*N+1]);F<T&&(m=N,T=F)}let _=e[2*m],b=e[2*m+1];if(T===1/0){for(let $=0;$<o;$++)this._dists[$]=e[2*$]-e[0]||e[2*$+1]-e[1];gv(this._ids,this._dists,0,o-1);let N=new Uint32Array(o),F=0;for(let $=0,q=-1/0;$<o;$++){let X=this._ids[$];this._dists[X]>q&&(N[F++]=X,q=this._dists[X])}this.hull=N.subarray(0,F),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(mv(g,y,A,S,_,b)<0){let N=p,F=A,$=S;p=m,A=_,S=b,m=N,_=F,b=$}let R=bSt(g,y,A,S,_,b);this._cx=R.x,this._cy=R.y;for(let N=0;N<o;N++)this._dists[N]=cae(e[2*N],e[2*N+1],R.x,R.y);gv(this._ids,this._dists,0,o-1),this._hullStart=h;let O=3;n[h]=r[m]=p,n[p]=r[h]=m,n[m]=r[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(A,S)]=p,s[this._hashKey(_,b)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let N=0,F,$;N<this._ids.length;N++){let q=this._ids[N],X=e[2*q],P=e[2*q+1];if(N>0&&Math.abs(X-F)<=jNe&&Math.abs(P-$)<=jNe||(F=X,$=P,q===h||q===p||q===m))continue;let te=0;for(let rr=0,Ir=this._hashKey(X,P);rr<this._hashSize&&(te=s[(Ir+rr)%this._hashSize],!(te!==-1&&te!==n[te]));rr++);te=r[te];let me=te,Ce;for(;Ce=n[me],mv(X,P,e[2*me],e[2*me+1],e[2*Ce],e[2*Ce+1])>=0;)if(me=Ce,me===te){me=-1;break}if(me===-1)continue;let Pe=this._addTriangle(me,q,n[me],-1,-1,i[me]);i[q]=this._legalize(Pe+2),i[me]=Pe,O++;let ct=n[me];for(;Ce=n[ct],mv(X,P,e[2*ct],e[2*ct+1],e[2*Ce],e[2*Ce+1])<0;)Pe=this._addTriangle(ct,q,Ce,i[q],-1,i[ct]),i[q]=this._legalize(Pe+2),n[ct]=ct,O--,ct=Ce;if(me===te)for(;Ce=r[me],mv(X,P,e[2*Ce],e[2*Ce+1],e[2*me],e[2*me+1])<0;)Pe=this._addTriangle(Ce,q,me,-1,i[me],i[Ce]),this._legalize(Pe+2),i[Ce]=Pe,n[me]=me,O--,me=Ce;this._hullStart=r[q]=me,n[me]=r[ct]=q,n[q]=ct,s[this._hashKey(X,P)]=q,s[this._hashKey(e[2*me],e[2*me+1])]=me}this.hull=new Uint32Array(O);for(let N=0,F=this._hullStart;N<O;N++)this.hull[N]=F,F=n[F];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,r){return Math.floor(SSt(e-this._cx,r-this._cy)*this._hashSize)%this._hashSize}_legalize(e){let{_triangles:r,_halfedges:n,coords:i}=this,s=0,o=0;for(;;){let a=n[e],u=e-e%3;if(o=u+(e+2)%3,a===-1){if(s===0)break;e=e$[--s];continue}let l=a-a%3,c=u+(e+1)%3,f=l+(a+2)%3,x=r[o],d=r[e],h=r[c],p=r[f];if(vSt(i[2*x],i[2*x+1],i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1])){r[e]=p,r[a]=x;let g=n[f];if(g===-1){let A=this._hullStart;do{if(this._hullTri[A]===f){this._hullTri[A]=e;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(e,g),this._link(a,n[o]),this._link(o,f);let y=l+(a+1)%3;s<e$.length&&(e$[s++]=y)}else{if(s===0)break;e=e$[--s]}}return o}_link(e,r){this._halfedges[e]=r,r!==-1&&(this._halfedges[r]=e)}_addTriangle(e,r,n,i,s,o){let a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=r,this._triangles[a+2]=n,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}};function SSt(t,e){let r=t/(Math.abs(t)+Math.abs(e));return(e>0?3-r:1+r)/4}function cae(t,e,r,n){let i=t-r,s=e-n;return i*i+s*s}function vSt(t,e,r,n,i,s,o,a){let u=t-o,l=e-a,c=r-o,f=n-a,x=i-o,d=s-a,h=u*u+l*l,p=c*c+f*f,m=x*x+d*d;return u*(f*m-p*d)-l*(c*m-p*x)+h*(c*d-f*x)<0}function _St(t,e,r,n,i,s){let o=r-t,a=n-e,u=i-t,l=s-e,c=o*o+a*a,f=u*u+l*l,x=.5/(o*l-a*u),d=(l*c-a*f)*x,h=(o*f-u*c)*x;return d*d+h*h}function bSt(t,e,r,n,i,s){let o=r-t,a=n-e,u=i-t,l=s-e,c=o*o+a*a,f=u*u+l*l,x=.5/(o*l-a*u),d=t+(l*c-a*f)*x,h=e+(o*f-u*c)*x;return{x:d,y:h}}function gv(t,e,r,n){if(n-r<=20)for(let i=r+1;i<=n;i++){let s=t[i],o=e[s],a=i-1;for(;a>=r&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=s}else{let i=r+n>>1,s=r+1,o=n;l6(t,i,s),e[t[r]]>e[t[n]]&&l6(t,r,n),e[t[s]]>e[t[n]]&&l6(t,s,n),e[t[r]]>e[t[s]]&&l6(t,r,s);let a=t[s],u=e[a];for(;;){do s++;while(e[t[s]]<u);do o--;while(e[t[o]]>u);if(o<s)break;l6(t,s,o)}t[r+1]=t[o],t[o]=a,n-s+1>=o-r?(gv(t,e,s,n),gv(t,e,r,o-1)):(gv(t,e,r,o-1),gv(t,e,s,n))}}function l6(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}function TSt(t){return t[0]}function CSt(t){return t[1]}var pl=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,r){this._+=`L${this._x1=+e},${this._y1=+r}`}arc(e,r,n){e=+e,r=+r,n=+n;let i=e+n,s=r;if(n<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+="L"+i+","+s),n&&(this._+=`A${n},${n},0,1,1,${e-n},${r}A${n},${n},0,1,1,${this._x1=i},${this._y1=s}`)}rect(e,r,n,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${+n}v${+i}h${-n}Z`}value(){return this._||null}};var H2=class{constructor(){this._=[]}moveTo(e,r){this._.push([e,r])}closePath(){this._.push(this._[0].slice())}lineTo(e,r){this._.push([e,r])}value(){return this._.length?this._:null}};var c6=class{constructor(e,[r,n,i,s]=[0,0,960,500]){if(!((i=+i)>=(r=+r))||!((s=+s)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=i,this.xmin=r,this.ymax=s,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:e,hull:r,triangles:n},vectors:i}=this,s,o,a=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let p=0,m=0,g=n.length,y,A;p<g;p+=3,m+=2){let S=n[p]*2,T=n[p+1]*2,_=n[p+2]*2,b=e[S],R=e[S+1],O=e[T],N=e[T+1],F=e[_],$=e[_+1],q=O-b,X=N-R,P=F-b,te=$-R,me=(q*te-X*P)*2;if(Math.abs(me)<1e-9){if(s===void 0){s=o=0;for(let Pe of r)s+=e[Pe*2],o+=e[Pe*2+1];s/=r.length,o/=r.length}let Ce=1e9*Math.sign((s-b)*te-(o-R)*P);y=(b+F)/2-Ce*te,A=(R+$)/2+Ce*P}else{let Ce=1/me,Pe=q*q+X*X,ct=P*P+te*te;y=b+(te*Pe-X*ct)*Ce,A=R+(q*ct-P*Pe)*Ce}a[m]=y,a[m+1]=A}let u=r[r.length-1],l,c=u*4,f,x=e[2*u],d,h=e[2*u+1];i.fill(0);for(let p=0;p<r.length;++p)u=r[p],l=c,f=x,d=h,c=u*4,x=e[2*u],h=e[2*u+1],i[l+2]=i[c]=d-h,i[l+3]=i[c+1]=x-f}render(e){let r=e==null?e=new pl:void 0,{delaunay:{halfedges:n,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=n.length;c<f;++c){let x=n[c];if(x<c)continue;let d=Math.floor(c/3)*2,h=Math.floor(x/3)*2,p=o[d],m=o[d+1],g=o[h],y=o[h+1];this._renderSegment(p,m,g,y,e)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];let f=Math.floor(i[l]/3)*2,x=o[f],d=o[f+1],h=u*4,p=this._project(x,d,a[h+2],a[h+3]);p&&this._renderSegment(x,d,p[0],p[1],e)}return r&&r.value()}renderBounds(e){let r=e==null?e=new pl:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),r&&r.value()}renderCell(e,r){let n=r==null?r=new pl:void 0,i=this._clip(e);if(i===null||!i.length)return;r.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&r.lineTo(i[o],i[o+1]);return r.closePath(),n&&n.value()}*cellPolygons(){let{delaunay:{points:e}}=this;for(let r=0,n=e.length/2;r<n;++r){let i=this.cellPolygon(r);i&&(i.index=r,yield i)}}cellPolygon(e){let r=new H2;return this.renderCell(e,r),r.value()}_renderSegment(e,r,n,i,s){let o,a=this._regioncode(e,r),u=this._regioncode(n,i);a===0&&u===0?(s.moveTo(e,r),s.lineTo(n,i)):(o=this._clipSegment(e,r,n,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(e,r,n){return r=+r,r!==r||(n=+n,n!==n)?!1:this.delaunay._step(e,r,n)===e}*neighbors(e){let r=this._clip(e);if(r)for(let n of this.delaunay.neighbors(e)){let i=this._clip(n);if(i){e:for(let s=0,o=r.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(r[s]===i[a]&&r[s+1]===i[a+1]&&r[(s+2)%o]===i[(a+u-2)%u]&&r[(s+3)%o]===i[(a+u-1)%u]){yield n;break e}}}}_cell(e){let{circumcenters:r,delaunay:{inedges:n,halfedges:i,triangles:s}}=this,o=n[e];if(o===-1)return null;let a=[],u=o;do{let l=Math.floor(u/3);if(a.push(r[l*2],r[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==e)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let r=this._cell(e);if(r===null)return null;let{vectors:n}=this,i=e*4;return this._simplify(n[i]||n[i+1]?this._clipInfinite(e,r,n[i],n[i+1],n[i+2],n[i+3]):this._clipFinite(e,r))}_clipFinite(e,r){let n=r.length,i=null,s,o,a=r[n-2],u=r[n-1],l,c=this._regioncode(a,u),f,x=0;for(let d=0;d<n;d+=2)if(s=a,o=u,a=r[d],u=r[d+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=x,x=0,i?i.push(a,u):i=[a,u];else{let h,p,m,g,y;if(l===0){if((h=this._clipSegment(s,o,a,u,l,c))===null)continue;[p,m,g,y]=h}else{if((h=this._clipSegment(a,u,s,o,c,l))===null)continue;[g,y,p,m]=h,f=x,x=this._edgecode(p,m),f&&x&&this._edge(e,f,x,i,i.length),i?i.push(p,m):i=[p,m]}f=x,x=this._edgecode(g,y),f&&x&&this._edge(e,f,x,i,i.length),i?i.push(g,y):i=[g,y]}if(i)f=x,x=this._edgecode(i[0],i[1]),f&&x&&this._edge(e,f,x,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,r,n,i,s,o){let a=s<o;for(a&&([e,r,n,i,s,o]=[n,i,e,r,o,s]);;){if(s===0&&o===0)return a?[n,i,e,r]:[e,r,n,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=e+(n-e)*(this.ymax-r)/(i-r),l=this.ymax):c&4?(u=e+(n-e)*(this.ymin-r)/(i-r),l=this.ymin):c&2?(l=r+(i-r)*(this.xmax-e)/(n-e),u=this.xmax):(l=r+(i-r)*(this.xmin-e)/(n-e),u=this.xmin),s?(e=u,r=l,s=this._regioncode(e,r)):(n=u,i=l,o=this._regioncode(n,i))}}_clipInfinite(e,r,n,i,s,o){let a=Array.from(r),u;if((u=this._project(a[0],a[1],n,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(e,a))for(let l=0,c=a.length,f,x=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=x,x=this._edgecode(a[l],a[l+1]),f&&x&&(l=this._edge(e,f,x,a,l),c=a.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(e,r,n,i,s){for(;r!==n;){let o,a;switch(r){case 5:r=4;continue;case 4:r=6,o=this.xmax,a=this.ymin;break;case 6:r=2;continue;case 2:r=10,o=this.xmax,a=this.ymax;break;case 10:r=8;continue;case 8:r=9,o=this.xmin,a=this.ymax;break;case 9:r=1;continue;case 1:r=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(e,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(e,r,n,i){let s=1/0,o,a,u;if(i<0){if(r<=this.ymin)return null;(o=(this.ymin-r)/i)<s&&(u=this.ymin,a=e+(s=o)*n)}else if(i>0){if(r>=this.ymax)return null;(o=(this.ymax-r)/i)<s&&(u=this.ymax,a=e+(s=o)*n)}if(n>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/n)<s&&(a=this.xmax,u=r+(s=o)*i)}else if(n<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/n)<s&&(a=this.xmin,u=r+(s=o)*i)}return[a,u]}_edgecode(e,r){return(e===this.xmin?1:e===this.xmax?2:0)|(r===this.ymin?4:r===this.ymax?8:0)}_regioncode(e,r){return(e<this.xmin?1:e>this.xmax?2:0)|(r<this.ymin?4:r>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let r=0;r<e.length;r+=2){let n=(r+2)%e.length,i=(r+4)%e.length;(e[r]===e[n]&&e[n]===e[i]||e[r+1]===e[n+1]&&e[n+1]===e[i+1])&&(e.splice(n,2),r-=2)}e.length||(e=null)}return e}};var RSt=2*Math.PI,Ev=Math.pow;function OSt(t){return t[0]}function DSt(t){return t[1]}function NSt(t){let{triangles:e,coords:r}=t;for(let n=0;n<e.length;n+=3){let i=2*e[n],s=2*e[n+1],o=2*e[n+2];if((r[o]-r[i])*(r[s+1]-r[i+1])-(r[s]-r[i])*(r[o+1]-r[i+1])>1e-10)return!1}return!0}function FSt(t,e,r){return[t+Math.sin(t+e)*r,e+Math.cos(t-e)*r]}var Av=class t{static from(e,r=OSt,n=DSt,i){return new t("length"in e?wSt(e,r,n,i):Float64Array.from(LSt(e,r,n,i)))}constructor(e){this._delaunator=new yv(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let e=this._delaunator,r=this.points;if(e.hull&&e.hull.length>2&&NSt(e)){this.collinear=Int32Array.from({length:r.length/2},(x,d)=>d).sort((x,d)=>r[2*x]-r[2*d]||r[2*x+1]-r[2*d+1]);let u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[r[2*u],r[2*u+1],r[2*l],r[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let x=0,d=r.length/2;x<d;++x){let h=FSt(r[2*x],r[2*x+1],f);r[2*x]=h[0],r[2*x+1]=h[1]}this._delaunator=new yv(r)}else delete this.collinear;let n=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=n.length;u<l;++u){let c=s[u%3===2?u-2:u+1];(n[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(e){return new c6(this,e)}*neighbors(e){let{inedges:r,hull:n,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){let f=a.indexOf(e);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}let u=r[e];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==e)return;if(l=s[l],l===-1){let f=n[(i[e]+1)%n.length];f!==c&&(yield f);return}}while(l!==u)}find(e,r,n=0){if(e=+e,e!==e||(r=+r,r!==r))return-1;let i=n,s;for(;(s=this._step(n,e,r))>=0&&s!==n&&s!==i;)n=s;return s}_step(e,r,n){let{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[e]===-1||!l.length)return(e+1)%(l.length>>1);let c=e,f=Ev(r-l[e*2],2)+Ev(n-l[e*2+1],2),x=i[e],d=x;do{let h=u[d],p=Ev(r-l[h*2],2)+Ev(n-l[h*2+1],2);if(p<f&&(f=p,c=h),d=d%3===2?d-2:d+1,u[d]!==e)break;if(d=a[d],d===-1){if(d=s[(o[e]+1)%s.length],d!==h&&Ev(r-l[d*2],2)+Ev(n-l[d*2+1],2)<f)return d;break}}while(d!==x);return c}render(e){let r=e==null?e=new pl:void 0,{points:n,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){let u=i[o];if(u<o)continue;let l=s[o]*2,c=s[u]*2;e.moveTo(n[l],n[l+1]),e.lineTo(n[c],n[c+1])}return this.renderHull(e),r&&r.value()}renderPoints(e,r){r===void 0&&(!e||typeof e.moveTo!="function")&&(r=e,e=null),r=r==null?2:+r;let n=e==null?e=new pl:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){let a=i[s],u=i[s+1];e.moveTo(a+r,u),e.arc(a,u,r,0,RSt)}return n&&n.value()}renderHull(e){let r=e==null?e=new pl:void 0,{hull:n,points:i}=this,s=n[0]*2,o=n.length;e.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){let u=2*n[a];e.lineTo(i[u],i[u+1])}return e.closePath(),r&&r.value()}hullPolygon(){let e=new H2;return this.renderHull(e),e.value()}renderTriangle(e,r){let n=r==null?r=new pl:void 0,{points:i,triangles:s}=this,o=s[e*=3]*2,a=s[e+1]*2,u=s[e+2]*2;return r.moveTo(i[o],i[o+1]),r.lineTo(i[a],i[a+1]),r.lineTo(i[u],i[u+1]),r.closePath(),n&&n.value()}*trianglePolygons(){let{triangles:e}=this;for(let r=0,n=e.length/3;r<n;++r)yield this.trianglePolygon(r)}trianglePolygon(e){let r=new H2;return this.renderTriangle(e,r),r.value()}};function wSt(t,e,r,n){let i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){let a=t[o];s[o*2]=e.call(n,a,o,t),s[o*2+1]=r.call(n,a,o,t)}return s}function*LSt(t,e,r,n){let i=0;for(let s of t)yield e.call(n,s,i,t),yield r.call(n,s,i,t),++i}function fae(t){V.call(this,null,t)}fae.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var ISt=[-1e5,-1e5,1e5,1e5];ce(fae,V,{transform(t,e){let r=t.as||"path",n=e.source;if(!n||!n.length)return e;let i=t.size;i=i?[0,0,i[0],i[1]]:(i=t.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:ISt;let s=this.value=Av.from(n,t.x,t.y).voronoi(i);for(let o=0,a=n.length;o<a;++o){let u=s.cellPolygon(o);n[o][r]=u?MSt(u):null}return e.reflow(t.modified()).modifies(r)}});function MSt(t){let e=t[0][0],r=t[0][1],n=t.length-1;for(;t[n][0]===e&&t[n][1]===r;--n);return"M"+t.slice(0,n+1).join("L")+"Z"}var pae={};qo(pae,{wordcloud:()=>hae});var dae=Math.PI/180,f6=64,t$=2048;function PSt(){var t=[256,256],e,r,n,i,s,o,a,u=HNe,l=[],c=Math.random,f={};f.layout=function(){for(var h=x(ll()),p=jSt((t[0]>>5)*t[1]),m=null,g=l.length,y=-1,A=[],S=l.map(_=>({text:e(_),font:r(_),style:i(_),weight:s(_),rotate:o(_),size:~~(n(_)+1e-14),padding:a(_),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:_})).sort((_,b)=>b.size-_.size);++y<g;){var T=S[y];T.x=t[0]*(c()+.5)>>1,T.y=t[1]*(c()+.5)>>1,kSt(h,T,S,y),T.hasText&&d(p,T,m)&&(A.push(T),m?qSt(m,T):m=[{x:T.x+T.x0,y:T.y+T.y0},{x:T.x+T.x1,y:T.y+T.y1}],T.x-=t[0]>>1,T.y-=t[1]>>1)}return A};function x(h){h.width=h.height=1;var p=Math.sqrt(h.getContext("2d").getImageData(0,0,1,1).data.length>>2);h.width=(f6<<5)/p,h.height=t$/p;var m=h.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:p}}function d(h,p,m){for(var g=p.x,y=p.y,A=Math.sqrt(t[0]*t[0]+t[1]*t[1]),S=u(t),T=c()<.5?1:-1,_=-T,b,R,O;(b=S(_+=T))&&(R=~~b[0],O=~~b[1],!(Math.min(Math.abs(R),Math.abs(O))>=A));)if(p.x=g+R,p.y=y+O,!(p.x+p.x0<0||p.y+p.y0<0||p.x+p.x1>t[0]||p.y+p.y1>t[1])&&(!m||!BSt(p,h,t[0]))&&(!m||USt(p,m))){for(var N=p.sprite,F=p.width>>5,$=t[0]>>5,q=p.x-(F<<4),X=q&127,P=32-X,te=p.y1-p.y0,me=(p.y+p.y0)*$+(q>>5),Ce,Pe=0;Pe<te;Pe++){Ce=0;for(var ct=0;ct<=F;ct++)h[me+ct]|=Ce<<P|(ct<F?(Ce=N[Pe*F+ct])>>>X:0);me+=$}return p.sprite=null,!0}return!1}return f.words=function(h){return arguments.length?(l=h,f):l},f.size=function(h){return arguments.length?(t=[+h[0],+h[1]],f):t},f.font=function(h){return arguments.length?(r=g3(h),f):r},f.fontStyle=function(h){return arguments.length?(i=g3(h),f):i},f.fontWeight=function(h){return arguments.length?(s=g3(h),f):s},f.rotate=function(h){return arguments.length?(o=g3(h),f):o},f.text=function(h){return arguments.length?(e=g3(h),f):e},f.spiral=function(h){return arguments.length?(u=HSt[h]||h,f):u},f.fontSize=function(h){return arguments.length?(n=g3(h),f):n},f.padding=function(h){return arguments.length?(a=g3(h),f):a},f.random=function(h){return arguments.length?(c=h,f):c},f}function kSt(t,e,r,n){if(!e.sprite){var i=t.context,s=t.ratio;i.clearRect(0,0,(f6<<5)/s,t$/s);var o=0,a=0,u=0,l=r.length,c,f,x,d,h;for(--n;++n<l;){if(e=r[n],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/s)+"px "+e.font,c=i.measureText(e.text+"m").width*s,x=e.size<<1,e.rotate){var p=Math.sin(e.rotate*dae),m=Math.cos(e.rotate*dae),g=c*m,y=c*p,A=x*m,S=x*p;c=Math.max(Math.abs(g+S),Math.abs(g-S))+31>>5<<5,x=~~Math.max(Math.abs(y+A),Math.abs(y-A))}else c=c+31>>5<<5;if(x>u&&(u=x),o+c>=f6<<5&&(o=0,a+=u,u=0),a+x>=t$)break;i.translate((o+(c>>1))/s,(a+(x>>1))/s),e.rotate&&i.rotate(e.rotate*dae),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=c,e.height=x,e.xoff=o,e.yoff=a,e.x1=c>>1,e.y1=x>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=c}for(var T=i.getImageData(0,0,(f6<<5)/s,t$/s).data,_=[];--n>=0;)if(e=r[n],!!e.hasText){for(c=e.width,f=c>>5,x=e.y1-e.y0,d=0;d<x*f;d++)_[d]=0;if(o=e.xoff,o==null)return;a=e.yoff;var b=0,R=-1;for(h=0;h<x;h++){for(d=0;d<c;d++){var O=f*h+(d>>5),N=T[(a+h)*(f6<<5)+(o+d)<<2]?1<<31-d%32:0;_[O]|=N,b|=N}b?R=h:(e.y0++,x--,h--,a++)}e.y1=e.y0+R,e.sprite=_.slice(0,(e.y1-e.y0)*f)}}}function BSt(t,e,r){r>>=5;for(var n=t.sprite,i=t.width>>5,s=t.x-(i<<4),o=s&127,a=32-o,u=t.y1-t.y0,l=(t.y+t.y0)*r+(s>>5),c,f=0;f<u;f++){c=0;for(var x=0;x<=i;x++)if((c<<a|(x<i?(c=n[f*i+x])>>>o:0))&e[l+x])return!0;l+=r}return!1}function qSt(t,e){var r=t[0],n=t[1];e.x+e.x0<r.x&&(r.x=e.x+e.x0),e.y+e.y0<r.y&&(r.y=e.y+e.y0),e.x+e.x1>n.x&&(n.x=e.x+e.x1),e.y+e.y1>n.y&&(n.y=e.y+e.y1)}function USt(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function HNe(t){var e=t[0]/t[1];return function(r){return[e*(r*=.1)*Math.cos(r),r*Math.sin(r)]}}function $St(t){var e=4,r=e*t[0]/t[1],n=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:n+=r;break;case 1:i+=e;break;case 2:n-=r;break;default:i-=e;break}return[n,i]}}function jSt(t){for(var e=[],r=-1;++r<t;)e[r]=0;return e}function g3(t){return typeof t=="function"?t:function(){return t}}var HSt={archimedean:HNe,rectangular:$St},zNe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],zSt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function hae(t){V.call(this,PSt(),t)}hae.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:zNe}]};ce(hae,V,{transform(t,e){t.size&&!(t.size[0]&&t.size[1])&&W("Wordcloud size dimensions must be non-zero.");function r(h){let p=t[h];return Je(p)&&e.modified(p.fields)}let n=t.modified();if(!(n||e.changed(e.ADD_REM)||zSt.some(r)))return;let i=e.materialize(e.SOURCE).source,s=this.value,o=t.as||zNe,a=t.fontSize||14,u;if(Je(a)?u=t.fontSizeRange:a=Zr(a),u){let h=a,p=Mt("sqrt")().domain(ia(i,h)).range(u);a=m=>p(h(m))}i.forEach(h=>{h[o[0]]=NaN,h[o[1]]=NaN,h[o[3]]=0});let l=s.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(a).random(al).layout(),c=s.size(),f=c[0]>>1,x=c[1]>>1,d=l.length;for(let h=0,p,m;h<d;++h)p=l[h],m=p.datum,m[o[0]]=p.x+f,m[o[1]]=p.y+x,m[o[2]]=p.font,m[o[3]]=p.size,m[o[4]]=p.style,m[o[5]]=p.weight,m[o[6]]=p.rotate;return e.reflow(n).modifies(o)}});var yae={};qo(yae,{crossfilter:()=>mae,resolvefilter:()=>gae});var GSt=t=>new Uint8Array(t),QSt=t=>new Uint16Array(t),x6=t=>new Uint32Array(t);function VSt(){let t=8,e=[],r=x6(0),n=r$(0,t),i=r$(0,t);return{data:()=>e,seen:()=>r=WSt(r,e.length),add(s){for(let o=0,a=e.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,e.push(l)},remove(s,o){let a=e.length,u=Array(a-s),l=e,c,f,x;for(f=0;!o[f]&&f<a;++f)u[f]=e[f],l[f]=f;for(x=f;f<a;++f)c=e[f],o[f]?l[f]=-1:(l[f]=x,n[x]=n[f],i[x]=i[f],u[x]=c,c._index=x++),n[f]=0;return e=u,l},size:()=>e.length,curr:()=>n,prev:()=>i,reset:s=>i[s]=n[s],all:()=>t<257?255:t<65537?65535:4294967295,set(s,o){n[s]|=o},clear(s,o){n[s]&=~o},resize(s,o){let a=n.length;(s>a||o>t)&&(t=Math.max(o,t),n=r$(s,t,n),i=r$(s,t))}}}function WSt(t,e,r){return t.length>=e?t:(r=r||new t.constructor(e),r.set(t),r)}function r$(t,e,r){let n=(e<257?GSt:e<65537?QSt:x6)(t);return r&&n.set(r),n}function GNe(t,e,r){let n=1<<e;return{one:n,zero:~n,range:r.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(i,s){let o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length,x;for(x=0;x<l;++x)s[u[x]]|=n;for(x=c;x<f;++x)s[u[x]]|=n;return o}}}function QNe(){let t=x6(0),e=[],r=0;function n(a,u,l){if(!u.length)return[];let c=r,f=u.length,x=x6(f),d=Array(f),h,p,m;for(m=0;m<f;++m)d[m]=a(u[m]),x[m]=m;if(d=YSt(d,x),c)h=e,p=t,e=Array(c+f),t=x6(c+f),KSt(l,h,p,c,d,x,f,e,t);else{if(l>0)for(m=0;m<f;++m)x[m]+=l;e=d,t=x}return r=c+f,{index:x,value:d}}function i(a,u){let l=r,c,f,x;for(f=0;!u[t[f]]&&f<l;++f);for(x=f;f<l;++f)u[c=t[f]]||(t[x]=c,e[x]=e[f],++x);r=l-a}function s(a){for(let u=0,l=r;u<l;++u)t[u]=a[t[u]]}function o(a,u){let l;return u?l=u.length:(u=e,l=r),[ste(u,a[0],0,l),bg(u,a[1],0,l)]}return{insert:n,remove:i,bisect:o,reindex:s,index:()=>t,size:()=>r}}function YSt(t,e){return t.sort.call(e,(r,n)=>{let i=t[r],s=t[n];return i<s?-1:i>s?1:0}),oB(t,e)}function KSt(t,e,r,n,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<n&&c<o;++f)e[l]<i[c]?(a[f]=e[l],u[f]=r[l++]):(a[f]=i[c],u[f]=s[c++]+t);for(;l<n;++l,++f)a[f]=e[l],u[f]=r[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+t}function mae(t){V.call(this,VSt(),t),this._indices=null,this._dims=null}mae.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ce(mae,V,{transform(t,e){if(this._dims){var r=t.modified("fields")||t.fields.some(n=>e.modified(n.fields));return r?this.reinit(t,e):this.eval(t,e)}else return this.init(t,e)},init(t,e){let r=t.fields,n=t.query,i=this._indices={},s=this._dims=[],o=n.length,a=0,u,l;for(;a<o;++a)u=r[a].fname,l=i[u]||(i[u]=QNe()),s.push(GNe(l,a,n[a]));return this.eval(t,e)},reinit(t,e){let r=e.materialize().fork(),n=t.fields,i=t.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=r.rem=r.add,x=r.mod,d=i.length,h={},p,m,g,y,A,S,T,_,b;if(l.set(u),e.rem.length&&(A=this.remove(t,e,r)),e.add.length&&a.add(e.add),e.mod.length)for(S={},y=e.mod,T=0,_=y.length;T<_;++T)S[y[T]._index]=1;for(T=0;T<d;++T)b=n[T],(!o[T]||t.modified("fields",T)||e.modified(b.fields))&&(g=b.fname,(p=h[g])||(s[g]=m=QNe(),h[g]=p=m.insert(b,e.source,0)),o[T]=GNe(m,T,i[T]).onAdd(p,u));for(T=0,_=a.data().length;T<_;++T)A[T]||(l[T]!==u[T]?f.push(T):S[T]&&u[T]!==c&&x.push(T));return a.mask=(1<<d)-1,r},eval(t,e){let r=e.materialize().fork(),n=this._dims.length,i=0;return e.rem.length&&(this.remove(t,e,r),i|=(1<<n)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,e,r)),e.add.length&&(this.insert(t,e,r),i|=(1<<n)-1),e.mod.length&&(this.modify(e,r),i|=(1<<n)-1),this.value.mask=i,r},insert(t,e,r){let n=e.add,i=this.value,s=this._dims,o=this._indices,a=t.fields,u={},l=r.add,c=i.size()+n.length,f=s.length,x=i.size(),d,h,p;i.resize(c,f),i.add(n);let m=i.curr(),g=i.prev(),y=i.all();for(d=0;d<f;++d)h=a[d].fname,p=u[h]||(u[h]=o[h].insert(a[d],n,x)),s[d].onAdd(p,m);for(;x<c;++x)g[x]=y,m[x]!==y&&l.push(x)},modify(t,e){let r=e.mod,n=this.value,i=n.curr(),s=n.all(),o=t.mod,a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&r.push(l)},remove(t,e,r){let n=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=r.rem,c=e.rem,f,x,d,h;for(f=0,x=c.length;f<x;++f)d=c[f]._index,u[d]=1,o[d]=h=s[d],s[d]=a,h!==a&&l.push(d);for(d in n)n[d].remove(x,u);return this.reindex(e,x,u),u},reindex(t,e,r){let n=this._indices,i=this.value;t.runAfter(()=>{let s=i.remove(e,r);for(let o in n)n[o].reindex(s)})},update(t,e,r){let n=this._dims,i=t.query,s=e.stamp,o=n.length,a=0,u,l;for(r.filters=0,l=0;l<o;++l)t.modified("query",l)&&(u=l,++a);if(a===1)a=n[u].one,this.incrementOne(n[u],i[u],r.add,r.rem);else for(l=0,a=0;l<o;++l)t.modified("query",l)&&(a|=n[l].one,this.incrementAll(n[l],i[l],s,r.add),r.rem=r.add);return a},incrementAll(t,e,r,n){let i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=t.index(),l=t.bisect(t.range),c=t.bisect(e),f=c[0],x=c[1],d=l[0],h=l[1],p=t.one,m,g,y;if(f<d)for(m=f,g=Math.min(d,x);m<g;++m)y=u[m],s[y]!==r&&(a[y]=o[y],s[y]=r,n.push(y)),o[y]^=p;else if(f>d)for(m=d,g=Math.min(f,h);m<g;++m)y=u[m],s[y]!==r&&(a[y]=o[y],s[y]=r,n.push(y)),o[y]^=p;if(x>h)for(m=Math.max(f,h),g=x;m<g;++m)y=u[m],s[y]!==r&&(a[y]=o[y],s[y]=r,n.push(y)),o[y]^=p;else if(x<h)for(m=Math.max(d,x),g=h;m<g;++m)y=u[m],s[y]!==r&&(a[y]=o[y],s[y]=r,n.push(y)),o[y]^=p;t.range=e.slice()},incrementOne(t,e,r,n){let i=this.value,s=i.curr(),o=t.index(),a=t.bisect(t.range),u=t.bisect(e),l=u[0],c=u[1],f=a[0],x=a[1],d=t.one,h,p,m;if(l<f)for(h=l,p=Math.min(f,c);h<p;++h)m=o[h],s[m]^=d,r.push(m);else if(l>f)for(h=f,p=Math.min(l,x);h<p;++h)m=o[h],s[m]^=d,n.push(m);if(c>x)for(h=Math.max(l,x),p=c;h<p;++h)m=o[h],s[m]^=d,r.push(m);else if(c<x)for(h=Math.max(f,c),p=x;h<p;++h)m=o[h],s[m]^=d,n.push(m);t.range=e.slice()}});function gae(t){V.call(this,null,t)}gae.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ce(gae,V,{transform(t,e){let r=~(t.ignore||0),n=t.filter,i=n.mask;if(!(i&r))return e.StopPropagation;let s=e.fork(e.ALL),o=n.data(),a=n.curr(),u=n.prev(),l=c=>a[c]&r?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{let f=a[c]&r;return!f&&f^u[c]&r?o[c]:null}),s.filter(s.REM,c=>{let f=a[c]&r;return f&&!(f^(f^u[c]&r))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&r)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});var XSt="RawCode",xd="Literal",JSt="Property",ZSt="Identifier",e4t="ArrayExpression",t4t="BinaryExpression",bae="CallExpression",r4t="ConditionalExpression",n4t="LogicalExpression",i4t="MemberExpression",s4t="ObjectExpression",o4t="UnaryExpression";function F0(t){this.type=t}F0.prototype.visit=function(t){let e,r,n;if(t(this))return 1;for(e=a4t(this),r=0,n=e.length;r<n;++r)if(e[r].visit(t))return 1};function a4t(t){switch(t.type){case e4t:return t.elements;case t4t:case n4t:return[t.left,t.right];case bae:return[t.callee].concat(t.arguments);case r4t:return[t.test,t.consequent,t.alternate];case i4t:return[t.object,t.property];case s4t:return t.properties;case JSt:return[t.key,t.value];case o4t:return[t.argument];case ZSt:case xd:case XSt:default:return[]}}var bf,je,J,eo,sr,s$=1,g6=2,y3=3,z2=4,o$=5,A3=6,ya=7,y6=8,u4t=9;bf={};bf[s$]="Boolean";bf[g6]="<end>";bf[y3]="Identifier";bf[z2]="Keyword";bf[o$]="Null";bf[A3]="Numeric";bf[ya]="Punctuator";bf[y6]="String";bf[u4t]="RegularExpression";var l4t="ArrayExpression",c4t="BinaryExpression",f4t="CallExpression",x4t="ConditionalExpression",eFe="Identifier",d4t="Literal",h4t="LogicalExpression",p4t="MemberExpression",m4t="ObjectExpression",g4t="Property",y4t="UnaryExpression",zi="Unexpected token %0",E4t="Unexpected number",A4t="Unexpected string",S4t="Unexpected identifier",v4t="Unexpected reserved word",_4t="Unexpected end of input",vae="Invalid regular expression",Eae="Invalid regular expression: missing /",tFe="Octal literals are not allowed in strict mode.",b4t="Duplicate data property in object literal not allowed in strict mode",ms="ILLEGAL",p6="Disabled.",T4t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),C4t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function a$(t,e){if(!t)throw new Error("ASSERT: "+e)}function fd(t){return t>=48&&t<=57}function Tae(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function h6(t){return"01234567".indexOf(t)>=0}function R4t(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function m6(t){return t===10||t===13||t===8232||t===8233}function E6(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&T4t.test(String.fromCharCode(t))}function i$(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&C4t.test(String.fromCharCode(t))}var O4t={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function rFe(){for(;J<eo;){let t=je.charCodeAt(J);if(R4t(t)||m6(t))++J;else break}}function _ae(t){var e,r,n,i=0;for(r=t==="u"?4:2,e=0;e<r;++e)J<eo&&Tae(je[J])?(n=je[J++],i=i*16+"0123456789abcdef".indexOf(n.toLowerCase())):Qt({},zi,ms);return String.fromCharCode(i)}function D4t(){var t,e,r,n;for(t=je[J],e=0,t==="}"&&Qt({},zi,ms);J<eo&&(t=je[J++],!!Tae(t));)e=e*16+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||t!=="}")&&Qt({},zi,ms),e<=65535?String.fromCharCode(e):(r=(e-65536>>10)+55296,n=(e-65536&1023)+56320,String.fromCharCode(r,n))}function nFe(){var t,e;for(t=je.charCodeAt(J++),e=String.fromCharCode(t),t===92&&(je.charCodeAt(J)!==117&&Qt({},zi,ms),++J,t=_ae("u"),(!t||t==="\\"||!E6(t.charCodeAt(0)))&&Qt({},zi,ms),e=t);J<eo&&(t=je.charCodeAt(J),!!i$(t));)++J,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),je.charCodeAt(J)!==117&&Qt({},zi,ms),++J,t=_ae("u"),(!t||t==="\\"||!i$(t.charCodeAt(0)))&&Qt({},zi,ms),e+=t);return e}function N4t(){var t,e;for(t=J++;J<eo;){if(e=je.charCodeAt(J),e===92)return J=t,nFe();if(i$(e))++J;else break}return je.slice(t,J)}function F4t(){var t,e,r;return t=J,e=je.charCodeAt(J)===92?nFe():N4t(),e.length===1?r=y3:O4t.hasOwnProperty(e)?r=z2:e==="null"?r=o$:e==="true"||e==="false"?r=s$:r=y3,{type:r,value:e,start:t,end:J}}function Aae(){var t=J,e=je.charCodeAt(J),r,n=je[J],i,s,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++J,{type:ya,value:String.fromCharCode(e),start:t,end:J};default:if(r=je.charCodeAt(J+1),r===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return J+=2,{type:ya,value:String.fromCharCode(e)+String.fromCharCode(r),start:t,end:J};case 33:case 61:return J+=2,je.charCodeAt(J)===61&&++J,{type:ya,value:je.slice(t,J),start:t,end:J}}}if(o=je.substr(J,4),o===">>>=")return J+=4,{type:ya,value:o,start:t,end:J};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return J+=3,{type:ya,value:s,start:t,end:J};if(i=s.substr(0,2),n===i[1]&&"+-<>&|".indexOf(n)>=0||i==="=>")return J+=2,{type:ya,value:i,start:t,end:J};if(i==="//"&&Qt({},zi,ms),"<>=!+-*%&|^/".indexOf(n)>=0)return++J,{type:ya,value:n,start:t,end:J};Qt({},zi,ms)}function w4t(t){let e="";for(;J<eo&&Tae(je[J]);)e+=je[J++];return e.length===0&&Qt({},zi,ms),E6(je.charCodeAt(J))&&Qt({},zi,ms),{type:A3,value:parseInt("0x"+e,16),start:t,end:J}}function L4t(t){let e="0"+je[J++];for(;J<eo&&h6(je[J]);)e+=je[J++];return(E6(je.charCodeAt(J))||fd(je.charCodeAt(J)))&&Qt({},zi,ms),{type:A3,value:parseInt(e,8),octal:!0,start:t,end:J}}function VNe(){var t,e,r;if(r=je[J],a$(fd(r.charCodeAt(0))||r===".","Numeric literal must start with a decimal digit or a decimal point"),e=J,t="",r!=="."){if(t=je[J++],r=je[J],t==="0"){if(r==="x"||r==="X")return++J,w4t(e);if(h6(r))return L4t(e);r&&fd(r.charCodeAt(0))&&Qt({},zi,ms)}for(;fd(je.charCodeAt(J));)t+=je[J++];r=je[J]}if(r==="."){for(t+=je[J++];fd(je.charCodeAt(J));)t+=je[J++];r=je[J]}if(r==="e"||r==="E")if(t+=je[J++],r=je[J],(r==="+"||r==="-")&&(t+=je[J++]),fd(je.charCodeAt(J)))for(;fd(je.charCodeAt(J));)t+=je[J++];else Qt({},zi,ms);return E6(je.charCodeAt(J))&&Qt({},zi,ms),{type:A3,value:parseFloat(t),start:e,end:J}}function I4t(){var t="",e,r,n,i,s=!1;for(e=je[J],a$(e==="'"||e==='"',"String literal must starts with a quote"),r=J,++J;J<eo;)if(n=je[J++],n===e){e="";break}else if(n==="\\")if(n=je[J++],!n||!m6(n.charCodeAt(0)))switch(n){case"u":case"x":je[J]==="{"?(++J,t+=D4t()):t+=_ae(n);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:h6(n)?(i="01234567".indexOf(n),i!==0&&(s=!0),J<eo&&h6(je[J])&&(s=!0,i=i*8+"01234567".indexOf(je[J++]),"0123".indexOf(n)>=0&&J<eo&&h6(je[J])&&(i=i*8+"01234567".indexOf(je[J++]))),t+=String.fromCharCode(i)):t+=n;break}else n==="\r"&&je[J]===`
`&&++J;else{if(m6(n.charCodeAt(0)))break;t+=n}return e!==""&&Qt({},zi,ms),{type:y6,value:t,octal:s,start:r,end:J}}function M4t(t,e){let r=t;e.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}/g,(n,i)=>{if(parseInt(i,16)<=1114111)return"x";Qt({},vae)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(r)}catch{Qt({},vae)}try{return new RegExp(t,e)}catch{return null}}function P4t(){var t,e,r,n,i;for(t=je[J],a$(t==="/","Regular expression literal must start with a slash"),e=je[J++],r=!1,n=!1;J<eo;)if(t=je[J++],e+=t,t==="\\")t=je[J++],m6(t.charCodeAt(0))&&Qt({},Eae),e+=t;else if(m6(t.charCodeAt(0)))Qt({},Eae);else if(r)t==="]"&&(r=!1);else if(t==="/"){n=!0;break}else t==="["&&(r=!0);return n||Qt({},Eae),i=e.substr(1,e.length-2),{value:i,literal:e}}function k4t(){var t,e,r;for(e="",r="";J<eo&&(t=je[J],!!i$(t.charCodeAt(0)));)++J,t==="\\"&&J<eo?Qt({},zi,ms):(r+=t,e+=t);return r.search(/[^gimuy]/g)>=0&&Qt({},vae,r),{value:r,literal:e}}function B4t(){var t,e,r,n;return sr=null,rFe(),t=J,e=P4t(),r=k4t(),n=M4t(e.value,r.value),{literal:e.literal+r.literal,value:n,regex:{pattern:e.value,flags:r.value},start:t,end:J}}function q4t(t){return t.type===y3||t.type===z2||t.type===s$||t.type===o$}function iFe(){if(rFe(),J>=eo)return{type:g6,start:J,end:J};let t=je.charCodeAt(J);return E6(t)?F4t():t===40||t===41||t===59?Aae():t===39||t===34?I4t():t===46?fd(je.charCodeAt(J+1))?VNe():Aae():fd(t)?VNe():Aae()}function Ea(){let t=sr;return J=t.end,sr=iFe(),J=t.end,t}function sFe(){let t=J;sr=iFe(),J=t}function U4t(t){let e=new F0(l4t);return e.elements=t,e}function WNe(t,e,r){let n=new F0(t==="||"||t==="&&"?h4t:c4t);return n.operator=t,n.left=e,n.right=r,n}function $4t(t,e){let r=new F0(f4t);return r.callee=t,r.arguments=e,r}function j4t(t,e,r){let n=new F0(x4t);return n.test=t,n.consequent=e,n.alternate=r,n}function Cae(t){let e=new F0(eFe);return e.name=t,e}function d6(t){let e=new F0(d4t);return e.value=t.value,e.raw=je.slice(t.start,t.end),t.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=t.regex),e}function YNe(t,e,r){let n=new F0(p4t);return n.computed=t==="[",n.object=e,n.property=r,n.computed||(r.member=!0),n}function H4t(t){let e=new F0(m4t);return e.properties=t,e}function KNe(t,e,r){let n=new F0(g4t);return n.key=e,n.value=r,n.kind=t,n}function z4t(t,e){let r=new F0(y4t);return r.operator=t,r.argument=e,r.prefix=!0,r}function Qt(t,e){var r,n=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,(s,o)=>(a$(o<n.length,"Message reference must be in range"),n[o]));throw r=new Error(i),r.index=J,r.description=i,r}function u$(t){t.type===g6&&Qt(t,_4t),t.type===A3&&Qt(t,E4t),t.type===y6&&Qt(t,A4t),t.type===y3&&Qt(t,S4t),t.type===z2&&Qt(t,v4t),Qt(t,zi,t.value)}function to(t){let e=Ea();(e.type!==ya||e.value!==t)&&u$(e)}function Lr(t){return sr.type===ya&&sr.value===t}function Sae(t){return sr.type===z2&&sr.value===t}function G4t(){let t=[];for(J=sr.start,to("[");!Lr("]");)Lr(",")?(Ea(),t.push(null)):(t.push(E3()),Lr("]")||to(","));return Ea(),U4t(t)}function XNe(){J=sr.start;let t=Ea();return t.type===y6||t.type===A3?(t.octal&&Qt(t,tFe),d6(t)):Cae(t.value)}function Q4t(){var t,e,r,n;if(J=sr.start,t=sr,t.type===y3)return r=XNe(),to(":"),n=E3(),KNe("init",r,n);if(t.type===g6||t.type===ya)u$(t);else return e=XNe(),to(":"),n=E3(),KNe("init",e,n)}function V4t(){var t=[],e,r,n,i={},s=String;for(J=sr.start,to("{");!Lr("}");)e=Q4t(),e.key.type===eFe?r=e.key.name:r=s(e.key.value),n="$"+r,Object.prototype.hasOwnProperty.call(i,n)?Qt({},b4t):i[n]=!0,t.push(e),Lr("}")||to(",");return to("}"),H4t(t)}function W4t(){to("(");let t=Rae();return to(")"),t}var Y4t={if:1};function K4t(){var t,e,r;if(Lr("("))return W4t();if(Lr("["))return G4t();if(Lr("{"))return V4t();if(t=sr.type,J=sr.start,t===y3||Y4t[sr.value])r=Cae(Ea().value);else if(t===y6||t===A3)sr.octal&&Qt(sr,tFe),r=d6(Ea());else{if(t===z2)throw new Error(p6);t===s$?(e=Ea(),e.value=e.value==="true",r=d6(e)):t===o$?(e=Ea(),e.value=null,r=d6(e)):Lr("/")||Lr("/=")?(r=d6(B4t()),sFe()):u$(Ea())}return r}function X4t(){let t=[];if(to("("),!Lr(")"))for(;J<eo&&(t.push(E3()),!Lr(")"));)to(",");return to(")"),t}function J4t(){J=sr.start;let t=Ea();return q4t(t)||u$(t),Cae(t.value)}function Z4t(){return to("."),J4t()}function evt(){to("[");let t=Rae();return to("]"),t}function tvt(){var t,e,r;for(t=K4t();;)if(Lr("."))r=Z4t(),t=YNe(".",t,r);else if(Lr("("))e=X4t(),t=$4t(t,e);else if(Lr("["))r=evt(),t=YNe("[",t,r);else break;return t}function JNe(){let t=tvt();if(sr.type===ya&&(Lr("++")||Lr("--")))throw new Error(p6);return t}function n$(){var t,e;if(sr.type!==ya&&sr.type!==z2)e=JNe();else{if(Lr("++")||Lr("--"))throw new Error(p6);if(Lr("+")||Lr("-")||Lr("~")||Lr("!"))t=Ea(),e=n$(),e=z4t(t.value,e);else{if(Sae("delete")||Sae("void")||Sae("typeof"))throw new Error(p6);e=JNe()}}return e}function ZNe(t){let e=0;if(t.type!==ya&&t.type!==z2)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function rvt(){var t,e,r,n,i,s,o,a,u,l;if(t=sr,u=n$(),n=sr,i=ZNe(n),i===0)return u;for(n.prec=i,Ea(),e=[t,sr],o=n$(),s=[u,n,o];(i=ZNe(sr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),e.pop(),r=WNe(a,u,o),s.push(r);n=Ea(),n.prec=i,s.push(n),e.push(sr),r=n$(),s.push(r)}for(l=s.length-1,r=s[l],e.pop();l>1;)e.pop(),r=WNe(s[l-1].value,s[l-2],r),l-=2;return r}function E3(){var t,e,r;return t=rvt(),Lr("?")&&(Ea(),e=E3(),to(":"),r=E3(),t=j4t(t,e,r)),t}function Rae(){let t=E3();if(Lr(","))throw new Error(p6);return t}function A6(t){je=t,J=0,eo=je.length,sr=null,sFe();let e=Rae();if(sr.type!==g6)throw new Error("Unexpect token after expression.");return e}var Oae={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Dae(t){function e(o,a,u,l){let c=t(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(t).join(",")+")")}function r(o,a,u){return l=>e(o,l,a,u)}let n="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&W("Missing arguments to clamp function."),o.length>3&&W("Too many arguments to clamp function.");let a=o.map(t);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:r("getDate",n,0),day:r("getDay",n,0),year:r("getFullYear",n,0),month:r("getMonth",n,0),hours:r("getHours",n,0),minutes:r("getMinutes",n,0),seconds:r("getSeconds",n,0),milliseconds:r("getMilliseconds",n,0),time:r("getTime",n,0),timezoneoffset:r("getTimezoneOffset",n,0),utcdate:r("getUTCDate",n,0),utcday:r("getUTCDay",n,0),utcyear:r("getUTCFullYear",n,0),utcmonth:r("getUTCMonth",n,0),utchours:r("getUTCHours",n,0),utcminutes:r("getUTCMinutes",n,0),utcseconds:r("getUTCSeconds",n,0),utcmilliseconds:r("getUTCMilliseconds",n,0),length:r("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:r("toUpperCase",i,0),lower:r("toLowerCase",i,0),substring:r("substring",i),split:r("split",i),trim:r("trim",i,0),regexp:s,test:r("test",s),if:function(o){o.length<3&&W("Missing arguments to if function."),o.length>3&&W("Too many arguments to if function.");let a=o.map(t);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function nvt(t){let e=t&&t.length-1;return e&&(t[0]==='"'&&t[e]==='"'||t[0]==="'"&&t[e]==="'")?t.slice(1,-1):t}function Nae(t){t=t||{};let e=t.allowed?Bi(t.allowed):{},r=t.forbidden?Bi(t.forbidden):{},n=t.constants||Oae,i=(t.functions||Dae)(f),s=t.globalvar,o=t.fieldvar,a=Je(s)?s:h=>`${s}["${h}"]`,u={},l={},c=0;function f(h){if(he(h))return h;let p=x[h.type];return p==null&&W("Unsupported type: "+h.type),p(h)}let x={Literal:h=>h.raw,Identifier:h=>{let p=h.name;return c>0?p:Fe(r,p)?W("Illegal identifier: "+p):Fe(n,p)?n[p]:Fe(e,p)?p:(u[p]=1,a(p))},MemberExpression:h=>{let p=!h.computed,m=f(h.object);p&&(c+=1);let g=f(h.property);return m===o&&(l[nvt(g)]=1),p&&(c-=1),m+(p?"."+g:"["+g+"]")},CallExpression:h=>{h.callee.type!=="Identifier"&&W("Illegal callee type: "+h.callee.type);let p=h.callee.name,m=h.arguments,g=Fe(i,p)&&i[p];return g||W("Unrecognized function: "+p),Je(g)?g(m):g+"("+m.map(f).join(",")+")"},ArrayExpression:h=>"["+h.elements.map(f).join(",")+"]",BinaryExpression:h=>"("+f(h.left)+" "+h.operator+" "+f(h.right)+")",UnaryExpression:h=>"("+h.operator+f(h.argument)+")",ConditionalExpression:h=>"("+f(h.test)+"?"+f(h.consequent)+":"+f(h.alternate)+")",LogicalExpression:h=>"("+f(h.left)+h.operator+f(h.right)+")",ObjectExpression:h=>"{"+h.properties.map(f).join(",")+"}",Property:h=>{c+=1;let p=f(h.key);return c-=1,p+":"+f(h.value)}};function d(h){let p={code:f(h),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},p}return d.functions=i,d.constants=n,d}function S6(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Fae(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function l$(t){let e,r,n;t.length!==2?(e=S6,r=(a,u)=>S6(t(a),u),n=(a,u)=>t(a)-u):(e=t===S6||t===Fae?t:ivt,r=t,n=t);function i(a,u,l=0,c=a.length){if(l<c){if(e(u,u)!==0)return c;do{let f=l+c>>>1;r(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(e(u,u)!==0)return c;do{let f=l+c>>>1;r(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){let f=i(a,u,l,c-1);return f>l&&n(a[f-1],u)>-n(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function ivt(){return 0}function c$(t,...e){t=new jx(t),e=e.map(svt);e:for(let r of t)for(let n of e)if(!n.has(r)){t.delete(r);continue e}return t}function svt(t){return t instanceof jx?t:new jx(t)}function f$(...t){let e=new jx;for(let r of t)for(let n of r)e.add(n);return e}var Lae="intersect",oFe="union",ovt="vlMulti",avt="vlPoint",aFe="or",uvt="and",Tf="_vgsid_",v6=si(Tf),lvt="E",cvt="R",fvt="R-E",xvt="R-LE",dvt="R-RE",x$="index:unit";function uFe(t,e){for(var r=e.fields,n=e.values,i=r.length,s=0,o,a;s<i;++s)if(a=r[s],a.getter=si.getter||si(a.field),o=a.getter(t),ef(o)&&(o=jn(o)),ef(n[s])&&(n[s]=jn(n[s])),ef(n[s][0])&&(n[s]=n[s].map(jn)),a.type===lvt){if(j(n[s])?n[s].indexOf(o)<0:o!==n[s])return!1}else if(a.type===cvt){if(!gg(o,n[s]))return!1}else if(a.type===dvt){if(!gg(o,n[s],!0,!1))return!1}else if(a.type===fvt){if(!gg(o,n[s],!1,!1))return!1}else if(a.type===xvt&&!gg(o,n[s],!1,!0))return!1;return!0}function lFe(t,e,r){for(var n=this.context.data[t],i=n?n.values.value:[],s=n?n[x$]&&n[x$].value:void 0,o=r===Lae,a=i.length,u=0,l,c,f,x,d;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[x=l.unit]||0,f===-1)continue;if(d=uFe(e,l),c[x]=d?-1:++f,d&&s.size===1)return!0;if(!d&&f===s.get(x).count)return!1}else if(d=uFe(e,l),o^d)return d;return a&&o}var cFe=l$(v6),hvt=cFe.left,pvt=cFe.right;function fFe(t,e,r){let n=this.context.data[t],i=n?n.values.value:[],s=n?n[x$]&&n[x$].value:void 0,o=r===Lae,a=v6(e),u=hvt(i,a);if(u===i.length||v6(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(pvt(i,a)-u<s.size)return!1}return!0}function xFe(t,e){return t.map(r=>Ke(e.fields?{values:e.fields.map(n=>(n.getter||(n.getter=si(n.field)))(r.datum))}:{[Tf]:v6(r.datum)},e))}function dFe(t,e,r,n){for(var i=this.context.data[t],s=i?i.values.value:[],o={},a={},u={},l,c,f,x,d,h,p,m,g,y,A=s.length,S=0,T,_;S<A;++S)if(l=s[S],x=l.unit,c=l.fields,f=l.values,c&&f){for(T=0,_=c.length;T<_;++T)d=c[T],p=o[d.field]||(o[d.field]={}),m=p[x]||(p[x]=[]),u[d.field]=g=d.type.charAt(0),y=wae[`${g}_union`],p[x]=y(m,le(f[T]));r&&(m=a[x]||(a[x]=[]),m.push(le(f).reduce((b,R,O)=>(b[c[O].field]=R,b),{})))}else d=Tf,h=v6(l),p=o[d]||(o[d]={}),m=p[x]||(p[x]=[]),m.push(h),r&&(m=a[x]||(a[x]=[]),m.push({[Tf]:h}));if(e=e||oFe,o[Tf]?o[Tf]=wae[`${Tf}_${e}`](...Object.values(o[Tf])):Object.keys(o).forEach(b=>{o[b]=Object.keys(o[b]).map(R=>o[b][R]).reduce((R,O)=>R===void 0?O:wae[`${u[b]}_${e}`](R,O))}),s=Object.keys(a),r&&s.length){let b=n?avt:ovt;o[b]=e===oFe?{[aFe]:s.reduce((R,O)=>(R.push(...a[O]),R),[])}:{[uvt]:s.map(R=>({[aFe]:a[R]}))}}return o}var wae={[`${Tf}_union`]:f$,[`${Tf}_intersect`]:c$,E_union:function(t,e){if(!t.length)return e;for(var r=0,n=e.length;r<n;++r)t.indexOf(e[r])<0&&t.push(e[r]);return t},E_intersect:function(t,e){return t.length?t.filter(r=>e.indexOf(r)>=0):e},R_union:function(t,e){var r=jn(e[0]),n=jn(e[1]);return r>n&&(r=e[1],n=e[0]),t.length?(t[0]>r&&(t[0]=r),t[1]<n&&(t[1]=n),t):[r,n]},R_intersect:function(t,e){var r=jn(e[0]),n=jn(e[1]);return r>n&&(r=e[1],n=e[0]),t.length?n<t[0]||t[1]<r?[]:(t[0]<r&&(t[0]=r),t[1]>n&&(t[1]=n),t):[r,n]}},mvt=":",gvt="@";function d$(t,e,r,n){e[0].type!==xd&&W("First argument to selection functions must be a string literal.");let i=e[0].value,s=e.length>=2&&xt(e).value,o="unit",a=gvt+o,u=mvt+i;s===Lae&&!Fe(n,a)&&(n[a]=r.getData(i).indataRef(r,o)),Fe(n,u)||(n[u]=r.getData(i).tuplesRef())}function gFe(t){let e=this.context.data[t];return e?e.values.value:[]}function yvt(t,e,r){let n=this.context.data[t]["index:"+e],i=n?n.value.get(r):void 0;return i&&i.count}function Evt(t,e){let r=this.context.dataflow,n=this.context.data[t],i=n.input;return r.pulse(i,r.changeset().remove(ki).insert(e)),1}function Avt(t,e,r){if(t){let n=this.context.dataflow,i=t.mark.source;n.pulse(i,n.changeset().encode(t,e))}return r!==void 0?r:t}var _6=t=>function(e,r){return this.context.dataflow.locale()[t](r)(e)},Svt=_6("format"),yFe=_6("timeFormat"),vvt=_6("utcFormat"),_vt=_6("timeParse"),bvt=_6("utcParse"),h$=new Date(2e3,0,1);function p$(t,e,r){return!Number.isInteger(t)||!Number.isInteger(e)?"":(h$.setYear(2e3),h$.setMonth(t),h$.setDate(e),yFe.call(this,h$,r))}function Tvt(t){return p$.call(this,t,1,"%B")}function Cvt(t){return p$.call(this,t,1,"%b")}function Rvt(t){return p$.call(this,0,2+t,"%A")}function Ovt(t){return p$.call(this,0,2+t,"%a")}var Dvt=":",Nvt="@",Mae="%",EFe="$";function Bae(t,e,r,n){e[0].type!==xd&&W("First argument to data functions must be a string literal.");let i=e[0].value,s=Dvt+i;if(!Fe(s,n))try{n[s]=r.getData(i).tuplesRef()}catch{}}function Fvt(t,e,r,n){e[0].type!==xd&&W("First argument to indata must be a string literal."),e[1].type!==xd&&W("Second argument to indata must be a string literal.");let i=e[0].value,s=e[1].value,o=Nvt+s;Fe(o,n)||(n[o]=r.getData(i).indataRef(r,s))}function Aa(t,e,r,n){if(e[0].type===xd)hFe(r,n,e[0].value);else for(t in r.scales)hFe(r,n,t)}function hFe(t,e,r){let n=Mae+r;if(!Fe(e,n))try{e[n]=t.scaleRef(r)}catch{}}function dd(t,e){if(Je(t))return t;if(he(t)){let r=e.scales[t];return r&&nRe(r.value)?r.value:void 0}}function wvt(t,e,r){e.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,r._bandwidth=Aa,r._range=Aa,r._scale=Aa;let n=i=>"_["+(i.type===xd?fe(Mae+i.value):fe(Mae)+"+"+t(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${n(i[0])})`,_range:i=>`${n(i[0])}.range()`,_scale:i=>`${n(i[0])}(${t(i[1])})`}}function qae(t,e){return function(r,n,i){if(r){let s=dd(r,(i||this).context);return s&&s.path[t](n)}else return e(n)}}var Lvt=qae("area",zie),Ivt=qae("bounds",Qie),Mvt=qae("centroid",Xie);function Pvt(t){let e=this.context.group,r=!1;if(e)for(;t;){if(t===e){r=!0;break}t=t.mark.group}return r}function Uae(t,e,r){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(r)))}catch(n){t.warn(n)}return r[r.length-1]}function kvt(){return Uae(this.context.dataflow,"warn",arguments)}function Bvt(){return Uae(this.context.dataflow,"info",arguments)}function qvt(){return Uae(this.context.dataflow,"debug",arguments)}function Iae(t){let e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Pae(t){let e=cl(t),r=Iae(e.r),n=Iae(e.g),i=Iae(e.b);return .2126*r+.7152*n+.0722*i}function Uvt(t,e){let r=Pae(t),n=Pae(e),i=Math.max(r,n),s=Math.min(r,n);return(i+.05)/(s+.05)}function $vt(){let t=[].slice.call(arguments);return t.unshift({}),Ke(...t)}function AFe(t,e){return t===e||t!==t&&e!==e?!0:j(t)?j(e)&&t.length===e.length?jvt(t,e):!1:Se(t)&&Se(e)?SFe(t,e):!1}function jvt(t,e){for(let r=0,n=t.length;r<n;++r)if(!AFe(t[r],e[r]))return!1;return!0}function SFe(t,e){for(let r in t)if(!AFe(t[r],e[r]))return!1;return!0}function pFe(t){return e=>SFe(t,e)}function Hvt(t,e,r,n,i,s){let o=this.context.dataflow,a=this.context.data[t],u=a.input,l=o.stamp(),c=a.changes,f,x;if(o._trigger===!1||!(u.value.length||e||n))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),r&&(f=r===!0?ki:j(r)||C4(r)?r:pFe(r),c.remove(f)),e&&c.insert(e),n&&(f=pFe(n),u.value.some(f)?c.remove(f):c.insert(n)),i)for(x in s)c.modify(i,x,s[x]);return 1}function zvt(t){let e=t.touches,r=e[0].clientX-e[1].clientX,n=e[0].clientY-e[1].clientY;return Math.sqrt(r*r+n*n)}function Gvt(t){let e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}var mFe={};function Qvt(t,e){let r=mFe[e]||(mFe[e]=si(e));return j(t)?t.map(r):r(t)}function $ae(t){return j(t)||ArrayBuffer.isView(t)?t:null}function jae(t){return $ae(t)||(he(t)?t:null)}function Vvt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return $ae(t).join(...r)}function Wvt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return jae(t).indexOf(...r)}function Yvt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return jae(t).lastIndexOf(...r)}function Kvt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return jae(t).slice(...r)}function Xvt(t,e,r){return Je(r)&&W("Function argument passed to replace."),String(t).replace(e,r)}function Jvt(t){return $ae(t).slice().reverse()}function Zvt(t,e,r){return iO(t||0,e||0,r||0)}function e_t(t,e){let r=dd(t,(e||this).context);return r&&r.bandwidth?r.bandwidth():0}function t_t(t,e){let r=dd(t,(e||this).context);return r?r.copy():void 0}function r_t(t,e){let r=dd(t,(e||this).context);return r?r.domain():[]}function n_t(t,e,r){let n=dd(t,(r||this).context);return n?j(e)?(n.invertRange||n.invert)(e):(n.invert||n.invertExtent)(e):void 0}function i_t(t,e){let r=dd(t,(e||this).context);return r&&r.range?r.range():[]}function s_t(t,e,r){let n=dd(t,(r||this).context);return n?n(e):void 0}function o_t(t,e,r,n,i){t=dd(t,(i||this).context);let s=PRe(e,r),o=t.domain(),a=o[0],u=xt(o),l=On;return u-a?l=Eq(t,a,u):t=(t.interpolator?Mt("sequential")().interpolator(t.interpolator()):Mt("linear")().interpolate(t.interpolate()).range(t.range())).domain([a=0,u=1]),t.ticks&&(o=t.ticks(+n||15),a!==o[0]&&o.unshift(a),u!==xt(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),t(c))),s}function a_t(t,e,r){let n=dd(t,(r||this).context);return function(i){return n?n.path.context(i)(e):""}}function u_t(t){let e=null;return function(r){return r?EO(r,e=e||$q(t)):t}}var vFe=t=>t.data;function _Fe(t,e){let r=gFe.call(e,t);return r.root&&r.root.lookup||{}}function l_t(t,e,r){let n=_Fe(t,this),i=n[e],s=n[r];return i&&s?i.path(s).map(vFe):void 0}function c_t(t,e){let r=_Fe(t,this)[e];return r?r.ancestors().map(vFe):void 0}var bFe=()=>typeof window<"u"&&window||null;function f_t(){let t=bFe();return t?t.screen:{}}function x_t(){let t=bFe();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function d_t(){let t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}function TFe(t,e,r){if(!t)return[];let[n,i]=t,s=new Nn().set(n[0],n[1],i[0],i[1]),o=r||this.context.dataflow.scenegraph().root;return COe(o,s,h_t(e))}function h_t(t){let e=null;if(t){let r=le(t.marktype),n=le(t.markname);e=i=>(!r.length||r.some(s=>i.marktype===s))&&(!n.length||n.some(s=>i.name===s))}return e}function p_t(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;t=le(t);let i=t[t.length-1];return i===void 0||Math.sqrt((i[0]-e)**2+(i[1]-r)**2)>n?[...t,[e,r]]:t}function m_t(t){return le(t).reduce((e,r,n)=>{let[i,s]=r;return e+=n==0?`M ${i},${s} `:n===t.length-1?" Z":`L ${i},${s} `},"")}function g_t(t,e,r){let{x:n,y:i,mark:s}=r,o=new Nn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(let[u,l]of e)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(n,i),TFe([[o.x1,o.y1],[o.x2,o.y2]],t,s).filter(u=>y_t(u.x,u.y,e))}function y_t(t,e,r){let n=0;for(let i=0,s=r.length-1;i<r.length;s=i++){let[o,a]=r[s],[u,l]=r[i];l>e!=a>e&&t<(o-u)*(e-l)/(a-l)+u&&n++}return n&1}var Sv={random(){return al()},cumulativeNormal:CB,cumulativeLogNormal:Zte,cumulativeUniform:nre,densityNormal:Wte,densityLogNormal:Jte,densityUniform:rre,quantileNormal:RB,quantileLogNormal:ere,quantileUniform:ire,sampleNormal:TB,sampleLogNormal:Xte,sampleUniform:tre,isArray:j,isBoolean:o0,isDate:ef,isDefined(t){return t!==void 0},isNumber:Ct,isObject:Se,isRegExp:Gve,isString:he,isTuple:C4,isValid(t){return t!=null&&t===t},toBoolean:Ek,toDate(t){return Ak(t)},toNumber:jn,toString:Sk,indexof:Wvt,join:Vvt,lastindexof:Yvt,replace:Xvt,reverse:Jvt,slice:Kvt,flush:Hve,lerp:Qve,merge:$vt,pad:Yve,peek:xt,pluck:Qvt,span:Gp,inrange:gg,truncate:Kve,rgb:cl,lab:A2,hcl:zg,hsl:Hg,luminance:Pae,contrast:Uvt,sequence:Dn,format:Svt,utcFormat:vvt,utcParse:bvt,utcOffset:X5e,utcSequence:ebe,timeFormat:yFe,timeParse:_vt,timeOffset:K5e,timeSequence:Z5e,timeUnitSpecifier:q5e,monthFormat:Tvt,monthAbbrevFormat:Cvt,dayFormat:Rvt,dayAbbrevFormat:Ovt,quarter:qve,utcquarter:Uve,week:$5e,utcweek:z5e,dayofyear:U5e,utcdayofyear:H5e,warn:kvt,info:Bvt,debug:qvt,extent(t){return ia(t)},inScope:Pvt,intersect:TFe,clampRange:$ve,pinchDistance:zvt,pinchAngle:Gvt,screen:f_t,containerSize:d_t,windowSize:x_t,bandspace:Zvt,setdata:Evt,pathShape:u_t,panLinear:Mve,panLog:Pve,panPow:kve,panSymlog:Bve,zoomLinear:xk,zoomLog:dk,zoomPow:VC,zoomSymlog:hk,encode:Avt,modify:Hvt,lassoAppend:p_t,lassoPath:m_t,intersectLasso:g_t},E_t=["view","item","group","xy","x","y"],A_t="event.vega.",CFe="this.",Hae={},RFe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>`_[${fe(EFe+t)}]`,functions:S_t,constants:Oae,visitors:Hae},kae=Nae(RFe);function S_t(t){let e=Dae(t);E_t.forEach(r=>e[r]=A_t+r);for(let r in Sv)e[r]=CFe+r;return Ke(e,wvt(t,Sv,Hae)),e}function Yn(t,e,r){return arguments.length===1?Sv[t]:(Sv[t]=e,r&&(Hae[t]=r),kae&&(kae.functions[t]=CFe+t),this)}Yn("bandwidth",e_t,Aa);Yn("copy",t_t,Aa);Yn("domain",r_t,Aa);Yn("range",i_t,Aa);Yn("invert",n_t,Aa);Yn("scale",s_t,Aa);Yn("gradient",o_t,Aa);Yn("geoArea",Lvt,Aa);Yn("geoBounds",Ivt,Aa);Yn("geoCentroid",Mvt,Aa);Yn("geoShape",a_t,Aa);Yn("indata",yvt,Fvt);Yn("data",gFe,Bae);Yn("treePath",l_t,Bae);Yn("treeAncestors",c_t,Bae);Yn("vlSelectionTest",lFe,d$);Yn("vlSelectionIdTest",fFe,d$);Yn("vlSelectionResolve",dFe,d$);Yn("vlSelectionTuples",xFe);function w0(t,e){let r={},n;try{t=he(t)?t:fe(t)+"",n=A6(t)}catch{W("Expression parse error: "+t)}n.visit(s=>{if(s.type!==bae)return;let o=s.callee.name,a=RFe.visitors[o];a&&a(o,s.arguments,e,r)});let i=kae(n);return i.globals.forEach(s=>{let o=EFe+s;!Fe(r,o)&&e.getSignal(s)&&(r[o]=e.signalRef(s))}),{$expr:Ke({code:i.code},e.options.ast?{ast:n}:null),$fields:i.fields,$params:r}}function v_t(t){let e=this,r=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),r.forEach(n=>e.parseOperator(n)),r.forEach(n=>e.parseOperatorParameters(n)),(t.streams||[]).forEach(n=>e.parseStream(n)),(t.updates||[]).forEach(n=>e.parseUpdate(n)),e.resolve()}var __t=Bi(["rule"]),OFe=Bi(["group","image","rect"]);function b_t(t,e){let r="";return __t[e]||(t.x2&&(t.x?(OFe[e]&&(r+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),r+="o.width=o.x2-o.x;"):r+="o.x=o.x2-(o.width||0);"),t.xc&&(r+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(OFe[e]&&(r+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),r+="o.height=o.y2-o.y;"):r+="o.y=o.y2-(o.height||0);"),t.yc&&(r+="o.y=o.yc-(o.height||0)/2;")),r}function zae(t){return(t+"").toLowerCase()}function T_t(t){return zae(t)==="operator"}function C_t(t){return zae(t)==="collect"}function b6(t,e,r){r.endsWith(";")||(r="return("+r+");");let n=Function(...e.concat(r));return t&&t.functions?n.bind(t.functions):n}function R_t(t,e,r,n){return`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${r}
  : (u > v || v == null) && u != null ? ${n}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${r}
  : v !== v && u === u ? ${n} : `}var O_t={operator:(t,e)=>b6(t,["_"],e.code),parameter:(t,e)=>b6(t,["datum","_"],e.code),event:(t,e)=>b6(t,["event"],e.code),handler:(t,e)=>{let r=`var datum=event.item&&event.item.datum;return ${e.code};`;return b6(t,["_","event"],r)},encode:(t,e)=>{let{marktype:r,channels:n}=e,i="var o=item,datum=o.datum,m=0,$;";for(let s in n){let o="o["+fe(s)+"]";i+=`$=${n[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=b_t(n,r),i+="return m;",b6(t,["item","_"],i)},codegen:{get(t){let e=`[${t.map(fe).join("][")}]`,r=Function("_",`return _${e};`);return r.path=e,r},comparator(t,e){let r,n=(s,o)=>{let a=e[o],u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((r=r||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),R_t(u,l,-a,a)},i=Function("a","b","var u, v; return "+t.map(n).join("")+"0;");return r?i.bind(r):i}}};function D_t(t){let e=this;T_t(t.type)||!t.type?e.operator(t,t.update?e.operatorExpression(t.update):null):e.transform(t,t.type)}function N_t(t){let e=this;if(t.params){let r=e.get(t.id);r||W("Invalid operator id: "+t.id),e.dataflow.connect(r,r.parameters(e.parseParameters(t.params),t.react,t.initonly))}}function F_t(t,e){e=e||{};let r=this;for(let n in t){let i=t[n];e[n]=j(i)?i.map(s=>DFe(s,r,e)):DFe(i,r,e)}return e}function DFe(t,e,r){if(!t||!Se(t))return t;for(let n=0,i=NFe.length,s;n<i;++n)if(s=NFe[n],Fe(t,s.key))return s.parse(t,e,r);return t}var NFe=[{key:"$ref",parse:w_t},{key:"$key",parse:I_t},{key:"$expr",parse:L_t},{key:"$field",parse:M_t},{key:"$encode",parse:k_t},{key:"$compare",parse:P_t},{key:"$context",parse:B_t},{key:"$subflow",parse:q_t},{key:"$tupleid",parse:U_t}];function w_t(t,e){return e.get(t.$ref)||W("Operator not defined: "+t.$ref)}function L_t(t,e,r){t.$params&&e.parseParameters(t.$params,r);let n="e:"+t.$expr.code;return e.fn[n]||(e.fn[n]=Eo(e.parameterExpression(t.$expr),t.$fields))}function I_t(t,e){let r="k:"+t.$key+"_"+!!t.$flat;return e.fn[r]||(e.fn[r]=yk(t.$key,t.$flat,e.expr.codegen))}function M_t(t,e){if(!t.$field)return null;let r="f:"+t.$field+"_"+t.$name;return e.fn[r]||(e.fn[r]=si(t.$field,t.$name,e.expr.codegen))}function P_t(t,e){let r="c:"+t.$compare+"_"+t.$order,n=le(t.$compare).map(i=>i&&i.$tupleid?He:i);return e.fn[r]||(e.fn[r]=pk(n,t.$order,e.expr.codegen))}function k_t(t,e){let r=t.$encode,n={};for(let i in r){let s=r[i];n[i]=Eo(e.encodeExpression(s.$expr),s.$fields),n[i].output=s.$output}return n}function B_t(t,e){return e}function q_t(t,e){let r=t.$subflow;return function(n,i,s){let o=e.fork().parse(r),a=o.get(r.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>e.detach(o),a}}function U_t(){return He}function $_t(t){var e=this,r=t.filter!=null?e.eventExpression(t.filter):void 0,n=t.stream!=null?e.get(t.stream):void 0,i;t.source?n=e.events(t.source,t.type,r):t.merge&&(i=t.merge.map(s=>e.get(s)),n=i[0].merge.apply(i[0],i.slice(1))),t.between&&(i=t.between.map(s=>e.get(s)),n=n.between(i[0],i[1])),t.filter&&(n=n.filter(r)),t.throttle!=null&&(n=n.throttle(+t.throttle)),t.debounce!=null&&(n=n.debounce(+t.debounce)),n==null&&W("Invalid stream definition: "+JSON.stringify(t)),t.consume&&n.consume(!0),e.stream(t,n)}function j_t(t){var e=this,r=Se(r=t.source)?r.$ref:r,n=e.get(r),i=null,s=t.update,o=void 0;n||W("Source not defined: "+t.source),i=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),s&&s.$expr&&(s.$params&&(o=e.parseParameters(s.$params)),s=e.handlerExpression(s.$expr)),e.update(t,n,i,s,o)}var H_t={skip:!0};function z_t(t){var e=this,r={};if(t.signals){var n=r.signals={};Object.keys(e.signals).forEach(s=>{let o=e.signals[s];t.signals(s,o)&&(n[s]=o.value)})}if(t.data){var i=r.data={};Object.keys(e.data).forEach(s=>{let o=e.data[s];t.data(s,o)&&(i[s]=o.input.value)})}return e.subcontext&&t.recurse!==!1&&(r.subcontext=e.subcontext.map(s=>s.getState(t))),r}function G_t(t){var e=this,r=e.dataflow,n=t.data,i=t.signals;Object.keys(i||{}).forEach(s=>{r.update(e.signals[s],i[s],H_t)}),Object.keys(n||{}).forEach(s=>{r.pulse(e.data[s].input,r.changeset().remove(ki).insert(n[s]))}),(t.subcontext||[]).forEach((s,o)=>{let a=e.subcontext[o];a&&a.setState(s)})}function Gae(t,e,r,n){return new wFe(t,e,r,n)}function wFe(t,e,r,n){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=n||O_t,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},r&&(this.functions=Object.create(r),this.functions.context=this)}function FFe(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}wFe.prototype=FFe.prototype={fork(){let t=new FFe(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(r=>r!==t);let e=Object.keys(t.nodes);for(let r of e)t.nodes[r]._targets=null;for(let r of e)t.nodes[r].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,e){return this.nodes[t]=e},add(t,e){let r=this,n=r.dataflow,i=t.value;if(r.set(t.id,e),C_t(t.type)&&i&&(i.$ingest?n.ingest(e,i.$ingest,i.$format):i.$request?n.preload(e,i.$request,i.$format):n.pulse(e,n.changeset().insert(i))),t.root&&(r.root=e),t.parent){let s=r.get(t.parent.$ref);s?(n.connect(s,[e]),e.targets().add(s)):(r.unresolved=r.unresolved||[]).push(()=>{s=r.get(t.parent.$ref),n.connect(s,[e]),e.targets().add(s)})}if(t.signal&&(r.signals[t.signal]=e),t.scale&&(r.scales[t.scale]=e),t.data)for(let s in t.data){let o=r.data[s]||(r.data[s]={});t.data[s].forEach(a=>o[a]=e)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,e){this.add(t,this.dataflow.add(t.value,e))},transform(t,e){this.add(t,this.dataflow.add(this.transforms[zae(e)]))},stream(t,e){this.set(t.id,e)},update(t,e,r,n,i){this.dataflow.on(e,r,n,i,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:v_t,parseOperator:D_t,parseOperatorParameters:N_t,parseParameters:F_t,parseStream:$_t,parseUpdate:j_t,getState:z_t,setState:G_t};function Q_t(t){let e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),$Fe(e,t.description()))}function $Fe(t,e){t&&(e==null?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}function V_t(t){t.add(null,e=>(t._background=e.bg,t._resize=1,e.bg),{bg:t._signals.background})}var Qae="default";function W_t(t){let e=t._signals.cursor||(t._signals.cursor=t.add({user:Qae,item:null}));t.on(t.events("view","mousemove"),e,(r,n)=>{let i=e.value,s=i?he(i)?i:i.user:Qae,o=n.item&&n.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),t.add(null,function(r){let n=r.cursor,i=this.value;return he(n)||(i=n.item,n=n.user),Wae(t,n&&n!==Qae?n:i||n),i},{cursor:e})}function Wae(t,e){let r=t.globalCursor()?typeof document<"u"&&document.body:t.container();if(r)return e==null?r.style.removeProperty("cursor"):r.style.cursor=e}function y$(t,e){var r=t._runtime.data;return Fe(r,e)||W("Unrecognized data set: "+e),r[e]}function Y_t(t,e){return arguments.length<2?y$(this,t).values.value:A$.call(this,t,x2().remove(ki).insert(e))}function A$(t,e){$te(e)||W("Second argument to changes must be a changeset.");let r=y$(this,t);return r.modified=!0,this.pulse(r.input,e)}function K_t(t,e){return A$.call(this,t,x2().insert(e))}function X_t(t,e){return A$.call(this,t,x2().remove(e))}function jFe(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function HFe(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function S$(t){var e=t.padding(),r=t._origin;return[e.left+r[0],e.top+r[1]]}function J_t(t){var e=S$(t),r=jFe(t),n=HFe(t);t._renderer.background(t.background()),t._renderer.resize(r,n,e),t._handler.origin(e),t._resizeListeners.forEach(i=>{try{i(r,n)}catch(s){t.error(s)}})}function Z_t(t,e,r){var n=t._renderer,i=n&&n.canvas(),s,o,a;return i&&(a=S$(t),o=e.changedTouches?e.changedTouches[0]:e,s=Jq(o,i),s[0]-=a[0],s[1]-=a[1]),e.dataflow=t,e.item=r,e.vega=e5t(t,r,s),e}function e5t(t,e,r){let n=e?e.mark.marktype==="group"?e:e.mark.group:null;function i(o){var a=n,u;if(o){for(u=e;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return r;he(o)&&(o=i(o));let a=r.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Zr(t),item:Zr(e||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}var LFe="view",t5t="timer",r5t="window",n5t={trap:!1};function i5t(t){let e=Ke({defaults:{}},t),r=(n,i)=>{i.forEach(s=>{j(n[s])&&(n[s]=Bi(n[s]))})};return r(e.defaults,["prevent","allow"]),r(e,["view","window","selector"]),e}function zFe(t,e,r,n){t._eventListeners.push({type:r,sources:le(e),handler:n})}function s5t(t,e){var r=t._eventConfig.defaults,n=r.prevent,i=r.allow;return n===!1||i===!0?!1:n===!0||i===!1?!0:n?n[e]:i?!i[e]:t.preventDefault()}function m$(t,e,r){let n=t._eventConfig&&t._eventConfig[e];return n===!1||Se(n)&&!n[r]?(t.warn(`Blocked ${e} ${r} event listener.`),!1):!0}function o5t(t,e,r){var n=this,i=new CR(r),s=function(l,c){n.runAsync(null,()=>{t===LFe&&s5t(n,e)&&l.preventDefault(),i.receive(Z_t(n,l,c))})},o;if(t===t5t)m$(n,"timer",e)&&n.timer(s,e);else if(t===LFe)m$(n,"view",e)&&n.addEventListener(e,s,n5t);else if(t===r5t?m$(n,"window",e)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&m$(n,"selector",e)&&(o=Array.from(document.querySelectorAll(t))),!o)n.warn("Can not resolve event source: "+t);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(e,s);zFe(n,o,e,s)}return i}function IFe(t){return t.item}function MFe(t){return t.item.mark.source}function PFe(t){return function(e,r){return r.vega.view().changeset().encode(r.item,t)}}function a5t(t,e){return t=[t||"hover"],e=[e||"update",t[0]],this.on(this.events("view","mouseover",IFe),MFe,PFe(t)),this.on(this.events("view","mouseout",IFe),MFe,PFe(e)),this}function u5t(){var t=this._tooltip,e=this._timers,r=this._eventListeners,n,i,s;for(n=e.length;--n>=0;)e[n].stop();for(n=r.length;--n>=0;)for(s=r[n],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return t&&t.call(this,this._handler,null,null,null),this}function Au(t,e,r){let n=document.createElement(t);for(let i in e)n.setAttribute(i,e[i]);return r!=null&&(n.textContent=r),n}var l5t="vega-bind",c5t="vega-bind-name",f5t="vega-bind-radio";function x5t(t,e,r){if(!e)return;let n=r.param,i=r.state;return i||(i=r.state={elements:null,active:!1,set:null,update:o=>{o!=t.signal(n.signal)&&t.runAsync(null,()=>{i.source=!0,t.signal(n.signal,o)})}},n.debounce&&(i.update=gk(n.debounce,i.update))),(n.input==null&&n.element?d5t:p5t)(i,e,n,t),i.active||(t.on(t._signals[n.signal],null,()=>{i.source?i.source=!1:i.set(t.signal(n.signal))}),i.active=!0),i}function d5t(t,e,r,n){let i=r.event||"input",s=()=>t.update(e.value);n.signal(r.signal,e.value),e.addEventListener(i,s),zFe(n,e,i,s),t.set=o=>{e.value=o,e.dispatchEvent(h5t(i))}}function h5t(t){return typeof Event<"u"?new Event(t):{type:t}}function p5t(t,e,r,n){let i=n.signal(r.signal),s=Au("div",{class:l5t}),o=r.input==="radio"?s:s.appendChild(Au("label"));o.appendChild(Au("span",{class:c5t},r.name||r.signal)),e.appendChild(s);let a=m5t;switch(r.input){case"checkbox":a=g5t;break;case"select":a=y5t;break;case"radio":a=E5t;break;case"range":a=A5t;break}a(t,o,r,i)}function m5t(t,e,r,n){let i=Au("input");for(let s in r)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,r[s]);i.setAttribute("name",r.signal),i.value=n,e.appendChild(i),i.addEventListener("input",()=>t.update(i.value)),t.elements=[i],t.set=s=>i.value=s}function g5t(t,e,r,n){let i={type:"checkbox",name:r.signal};n&&(i.checked=!0);let s=Au("input",i);e.appendChild(s),s.addEventListener("change",()=>t.update(s.checked)),t.elements=[s],t.set=o=>s.checked=!!o||null}function y5t(t,e,r,n){let i=Au("select",{name:r.signal}),s=r.labels||[];r.options.forEach((o,a)=>{let u={value:o};E$(o,n)&&(u.selected=!0),i.appendChild(Au("option",u,(s[a]||o)+""))}),e.appendChild(i),i.addEventListener("change",()=>{t.update(r.options[i.selectedIndex])}),t.elements=[i],t.set=o=>{for(let a=0,u=r.options.length;a<u;++a)if(E$(r.options[a],o)){i.selectedIndex=a;return}}}function E5t(t,e,r,n){let i=Au("span",{class:f5t}),s=r.labels||[];e.appendChild(i),t.elements=r.options.map((o,a)=>{let u={type:"radio",name:r.signal,value:o};E$(o,n)&&(u.checked=!0);let l=Au("input",u);l.addEventListener("change",()=>t.update(o));let c=Au("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),t.set=o=>{let a=t.elements,u=a.length;for(let l=0;l<u;++l)E$(a[l].value,o)&&(a[l].checked=!0)}}function A5t(t,e,r,n){n=n!==void 0?n:(+r.max+ +r.min)/2;let i=r.max!=null?r.max:Math.max(100,+n)||100,s=r.min||Math.min(0,i,+n)||0,o=r.step||To(s,i,100),a=Au("input",{type:"range",name:r.signal,min:s,max:i,step:o});a.value=n;let u=Au("span",{},+n);e.appendChild(a),e.appendChild(u);let l=()=>{u.textContent=a.value,t.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),t.elements=[a],t.set=c=>{a.value=c,u.textContent=c}}function E$(t,e){return t===e||t+""==e+""}function GFe(t,e,r,n,i,s){return e=e||new n(t.loader()),e.initialize(r,jFe(t),HFe(t),S$(t),i,s).background(t.background())}function Yae(t,e){return e?function(){try{e.apply(this,arguments)}catch(r){t.error(r)}}:null}function S5t(t,e,r,n){let i=new n(t.loader(),Yae(t,t.tooltip())).scene(t.scenegraph().root).initialize(r,S$(t),t);return e&&e.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function v5t(t,e){let r=this,n=r._renderType,i=r._eventConfig.bind,s=Zq(n);t=r._el=t?Vae(r,t,!0):null,Q_t(r),s||r.error("Unrecognized renderer type: "+n);let o=s.handler||OO,a=t?s.renderer:s.headless;return r._renderer=a?GFe(r,r._renderer,t,a):null,r._handler=S5t(r,r._handler,t,o),r._redraw=!0,t&&i!=="none"&&(e=e?r._elBind=Vae(r,e,!0):t.appendChild(Au("form",{class:"vega-bindings"})),r._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=Vae(r,u.param.element,!!u.param.input))}),r._bind.forEach(u=>{x5t(r,u.element||e,u)})),r}function Vae(t,e,r){if(typeof e=="string")if(typeof document<"u"){if(e=document.querySelector(e),!e)return t.error("Signal bind element not found: "+e),null}else return t.error("DOM document instance not found."),null;if(e&&r)try{e.textContent=""}catch(n){e=null,t.error(n)}return e}var T6=t=>+t||0,_5t=t=>({top:t,bottom:t,left:t,right:t});function kFe(t){return Se(t)?{top:T6(t.top),bottom:T6(t.bottom),left:T6(t.left),right:T6(t.right)}:_5t(T6(t))}async function Kae(t,e,r,n){let i=Zq(e),s=i&&i.headless;return s||W("Unrecognized renderer type: "+e),await t.runAsync(),GFe(t,null,null,s,r,n).renderAsync(t._scenegraph.root)}async function b5t(t,e){t!==F2.Canvas&&t!==F2.SVG&&t!==F2.PNG&&W("Unrecognized image type: "+t);let r=await Kae(this,t,e);return t===F2.SVG?T5t(r.svg(),"image/svg+xml"):r.canvas().toDataURL("image/png")}function T5t(t,e){let r=new Blob([t],{type:e});return window.URL.createObjectURL(r)}async function C5t(t,e){return(await Kae(this,F2.Canvas,t,e)).canvas()}async function R5t(t){return(await Kae(this,F2.SVG,t)).svg()}function O5t(t,e,r){return Gae(t,f2,Sv,r).parse(e)}function D5t(t){var e=this._runtime.scales;return Fe(e,t)||W("Unrecognized scale or projection: "+t),e[t].value}var QFe="width",VFe="height",Xae="padding",BFe={skip:!0};function WFe(t,e){var r=t.autosize(),n=t.padding();return e-(r&&r.contains===Xae?n.left+n.right:0)}function YFe(t,e){var r=t.autosize(),n=t.padding();return e-(r&&r.contains===Xae?n.top+n.bottom:0)}function N5t(t){var e=t._signals,r=e[QFe],n=e[VFe],i=e[Xae];function s(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,a=>{t._width=a.size,t._viewWidth=WFe(t,a.size),s()},{size:r}),t._resizeHeight=t.add(null,a=>{t._height=a.size,t._viewHeight=YFe(t,a.size),s()},{size:n});let o=t.add(null,s,{pad:i});t._resizeWidth.rank=r.rank+1,t._resizeHeight.rank=n.rank+1,o.rank=i.rank+1}function F5t(t,e,r,n,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==r&&(a=1,o.signal(QFe,r,BFe),o._resizeWidth.skip(!0)),o.height()!==n&&(a=1,o.signal(VFe,n,BFe),o._resizeHeight.skip(!0)),o._viewWidth!==t&&(o._resize=1,o._viewWidth=t),o._viewHeight!==e&&(o._resize=1,o._viewHeight=e),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function w5t(t){return this._runtime.getState(t||{data:L5t,signals:I5t,recurse:!0})}function L5t(t,e){return e.modified&&j(e.input.value)&&t.indexOf("_:vega:_")}function I5t(t,e){return!(t==="parent"||e instanceof f2.proxy)}function M5t(t){return this.runAsync(null,e=>{e._trigger=!1,e._runtime.setState(t)},e=>{e._trigger=!0}),this}function P5t(t,e){function r(n){t({timestamp:Date.now(),elapsed:n})}this._timers.push(coe(r,e))}function k5t(t,e,r,n){let i=t.element();i&&i.setAttribute("title",B5t(n))}function B5t(t){return t==null?"":j(t)?KFe(t):Se(t)&&!ef(t)?q5t(t):t+""}function q5t(t){return Object.keys(t).map(e=>{let r=t[e];return e+": "+(j(r)?KFe(r):XFe(r))}).join(`
`)}function KFe(t){return"["+t.map(XFe).join(", ")+"]"}function XFe(t){return j(t)?"[\u2026]":Se(t)&&!ef(t)?"{\u2026}":t}function v$(t,e){let r=this;if(e=e||{},Mg.call(r),e.loader&&r.loader(e.loader),e.logger&&r.logger(e.logger),e.logLevel!=null&&r.logLevel(e.logLevel),e.locale||t.locale){let s=Ke({},t.locale,e.locale);r.locale(Mte(s.number,s.time))}r._el=null,r._elBind=null,r._renderType=e.renderer||F2.Canvas,r._scenegraph=new Aie;let n=r._scenegraph.root;r._renderer=null,r._tooltip=e.tooltip||k5t,r._redraw=!0,r._handler=new OO().scene(n),r._globalCursor=!1,r._preventDefault=!1,r._timers=[],r._eventListeners=[],r._resizeListeners=[],r._eventConfig=i5t(t.eventConfig),r.globalCursor(r._eventConfig.globalCursor);let i=O5t(r,t,e.expr);r._runtime=i,r._signals=i.signals,r._bind=(t.bindings||[]).map(s=>({state:null,param:Ke({},s)})),i.root&&i.root.set(n),n.source=i.data.root.input,r.pulse(i.data.root.input,r.changeset().insert(n.items)),r._width=r.width(),r._height=r.height(),r._viewWidth=WFe(r,r._width),r._viewHeight=YFe(r,r._height),r._origin=[0,0],r._resize=0,r._autosize=1,N5t(r),V_t(r),W_t(r),r.description(t.description),e.hover&&r.hover(),e.container&&r.initialize(e.container,e.bind)}function g$(t,e){return Fe(t._signals,e)?t._signals[e]:W("Unrecognized signal name: "+fe(e))}function JFe(t,e){let r=(t._targets||[]).filter(n=>n._update&&n._update.handler===e);return r.length?r[0]:null}function qFe(t,e,r,n){let i=JFe(r,n);return i||(i=Yae(t,()=>n(e,r.value)),i.handler=n,t.on(r,null,i)),t}function UFe(t,e,r){let n=JFe(e,r);return n&&e._targets.remove(n),t}ce(v$,Mg,{async evaluate(t,e,r){if(await Mg.prototype.evaluate.call(this,t,e),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,J_t(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(n){this.error(n)}return r&&TR(this,r),this},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){let e=t!=null?t+"":null;return e!==this._desc&&$Fe(this._el,this._desc=e),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,e,r){let n=g$(this,t);return arguments.length===1?n.value:this.update(n,e,r)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",kFe(t)):kFe(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(Zq(t)||W("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(Mg.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(g$(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:F5t,addEventListener(t,e,r){let n=e;return r&&r.trap===!1||(n=Yae(this,e),n.raw=e),this._handler.on(t,n),this},removeEventListener(t,e){for(var r=this._handler.handlers(t),n=r.length,i,s;--n>=0;)if(s=r[n].type,i=r[n].handler,t===s&&(e===i||e===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(t){let e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},removeResizeListener(t){var e=this._resizeListeners,r=e.indexOf(t);return r>=0&&e.splice(r,1),this},addSignalListener(t,e){return qFe(this,t,g$(this,t),e)},removeSignalListener(t,e){return UFe(this,g$(this,t),e)},addDataListener(t,e){return qFe(this,t,y$(this,t).values,e)},removeDataListener(t,e){return UFe(this,y$(this,t).values,e)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){let e=Wae(this,null);this._globalCursor=!!t,e&&Wae(this,e)}return this}else return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:P5t,events:o5t,finalize:u5t,hover:a5t,data:Y_t,change:A$,insert:K_t,remove:X_t,scale:D5t,initialize:v5t,toImageURL:b5t,toCanvas:C5t,toSVG:R5t,getState:w5t,setState:M5t});var U5t="view",_$="[",b$="]",ZFe="{",ewe="}",$5t=":",twe=",",j5t="@",H5t=">",z5t=/[[\]{}]/,G5t={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},rwe,nwe;function Po(t,e,r){return rwe=e||U5t,nwe=r||G5t,iwe(t.trim()).map(Jae)}function Q5t(t){return nwe[t]}function C6(t,e,r,n,i){let s=t.length,o=0,a;for(;e<s;++e){if(a=t[e],!o&&a===r)return e;i&&i.indexOf(a)>=0?--o:n&&n.indexOf(a)>=0&&++o}return e}function iwe(t){let e=[],r=t.length,n=0,i=0;for(;i<r;)i=C6(t,i,twe,_$+ZFe,b$+ewe),e.push(t.substring(n,i).trim()),n=++i;if(e.length===0)throw"Empty event selector: "+t;return e}function Jae(t){return t[0]==="["?V5t(t):W5t(t)}function V5t(t){let e=t.length,r=1,n;if(r=C6(t,r,b$,_$,b$),r===e)throw"Empty between selector: "+t;if(n=iwe(t.substring(1,r)),n.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(r+1).trim(),t[0]!==H5t)throw"Expected '>' after between selector: "+t;n=n.map(Jae);let i=Jae(t.slice(1).trim());return i.between?{between:n,stream:i}:(i.between=n,i)}function W5t(t){let e={source:rwe},r=[],n=[0,0],i=0,s=0,o=t.length,a=0,u,l;if(t[o-1]===ewe){if(a=t.lastIndexOf(ZFe),a>=0){try{n=Y5t(t.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,a).trim(),o=t.length}else throw"Unmatched right brace: "+t;a=0}if(!o)throw t;if(t[0]===j5t&&(i=++a),u=C6(t,a,$5t),u<o&&(r.push(t.substring(s,u).trim()),s=a=++u),a=C6(t,a,_$),a===o)r.push(t.substring(s,o).trim());else if(r.push(t.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+t;for(;a<o;){if(a=C6(t,a,b$),a===o)throw"Unmatched left bracket: "+t;if(l.push(t.substring(s,a).trim()),a<o-1&&t[++a]!==_$)throw"Expected left bracket: "+t;s=++a}if(!(o=r.length)||z5t.test(r[o-1]))throw"Invalid event selector: "+t;return o>1?(e.type=r[1],i?e.markname=r[0].slice(1):Q5t(r[0])?e.marktype=r[0]:e.source=r[0]):e.type=r[0],e.type.slice(-1)==="!"&&(e.consume=!0,e.type=e.type.slice(0,-1)),l!=null&&(e.filter=l),n[0]&&(e.throttle=n[0]),n[1]&&(e.debounce=n[1]),e}function Y5t(t){let e=t.split(twe);if(!t.length||e.length>2)throw t;return e.map(r=>{let n=+r;if(n!==n)throw t;return n})}function K5t(t){return Se(t)?t:{type:t||"pad"}}var R6=t=>+t||0,X5t=t=>({top:t,bottom:t,left:t,right:t});function J5t(t){return Se(t)?t.signal?t:{top:R6(t.top),bottom:R6(t.bottom),left:R6(t.left),right:R6(t.right)}:X5t(R6(t))}var Gi=t=>Se(t)&&!j(t)?Ke({},t):{value:t};function swe(t,e,r,n){return r!=null?(Se(r)&&!j(r)||j(r)&&r.length&&Se(r[0])?t.update[e]=r:t[n||"enter"][e]={value:r},1):0}function gs(t,e,r){for(let n in e)swe(t,n,e[n]);for(let n in r)swe(t,n,r[n],"update")}function Rv(t,e,r){for(let n in e)r&&Fe(r,n)||(t[n]=Ke(t[n]||{},e[n]));return t}function _v(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}var lue="mark",cue="frame",fue="scope",Z5t="axis",ebt="axis-domain",tbt="axis-grid",rbt="axis-label",nbt="axis-tick",ibt="axis-title",sbt="legend",obt="legend-band",abt="legend-entry",ubt="legend-gradient",bwe="legend-label",lbt="legend-symbol",cbt="legend-title",fbt="title",xbt="title-text",dbt="title-subtitle";function hbt(t,e,r,n,i){let s={},o={},a,u,l,c;u="lineBreak",e==="text"&&i[u]!=null&&!_v(u,t)&&Zae(s,u,i[u]),(r=="legend"||String(r).startsWith("axis"))&&(r=null),c=r===cue?i.group:r===lue?Ke({},i.mark,i[e]):null;for(u in c)l=_v(u,t)||(u==="fill"||u==="stroke")&&(_v("fill",t)||_v("stroke",t)),l||Zae(s,u,c[u]);le(n).forEach(f=>{let x=i.style&&i.style[f];for(let d in x)_v(d,t)||Zae(s,d,x[d])}),t=Ke({},t);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return t.enter=Ke(o,t.enter),a&&(t.update=Ke(a,t.update)),t}function Zae(t,e,r){t[e]=r&&r.signal?{signal:r.signal}:{value:r}}var Twe=t=>he(t)?fe(t):t.signal?`(${t.signal})`:Cwe(t);function w$(t){if(t.gradient!=null)return mbt(t);let e=t.signal?`(${t.signal})`:t.color?pbt(t.color):t.field!=null?Cwe(t.field):t.value!==void 0?fe(t.value):void 0;return t.scale!=null&&(e=gbt(t,e)),e===void 0&&(e=null),t.exponent!=null&&(e=`pow(${e},${C$(t.exponent)})`),t.mult!=null&&(e+=`*${C$(t.mult)}`),t.offset!=null&&(e+=`+${C$(t.offset)}`),t.round&&(e=`round(${e})`),e}var T$=(t,e,r,n)=>`(${t}(${[e,r,n].map(w$).join(",")})+'')`;function pbt(t){return t.c?T$("hcl",t.h,t.c,t.l):t.h||t.s?T$("hsl",t.h,t.s,t.l):t.l||t.a?T$("lab",t.l,t.a,t.b):t.r||t.g||t.b?T$("rgb",t.r,t.g,t.b):null}function mbt(t){let e=[t.start,t.stop,t.count].map(r=>r==null?null:fe(r));for(;e.length&&xt(e)==null;)e.pop();return e.unshift(Twe(t.gradient)),`gradient(${e.join(",")})`}function C$(t){return Se(t)?"("+w$(t)+")":t}function Cwe(t){return Rwe(Se(t)?t:{datum:t})}function Rwe(t){let e,r,n;if(t.signal)e="datum",n=t.signal;else if(t.group||t.parent){for(r=Math.max(1,t.level||1),e="item";r-- >0;)e+=".mark.group";t.parent?(n=t.parent,e+=".datum"):n=t.group}else t.datum?(e="datum",n=t.datum):W("Invalid field reference: "+fe(t));return t.signal||(n=he(n)?s0(n).map(fe).join("]["):Rwe(n)),e+"["+n+"]"}function gbt(t,e){let r=Twe(t.scale);return t.range!=null?e=`lerp(_range(${r}), ${+t.range})`:(e!==void 0&&(e=`_scale(${r}, ${e})`),t.band&&(e=(e?e+"+":"")+`_bandwidth(${r})`+(+t.band==1?"":"*"+C$(t.band)),t.extra&&(e=`(datum.extra ? _scale(${r}, datum.extra.value) : ${e})`)),e==null&&(e="0")),e}function ybt(t){let e="";return t.forEach(r=>{let n=w$(r);e+=r.test?`(${r.test})?${n}:`:n}),xt(e)===":"&&(e+="null"),e}function Owe(t,e,r,n,i,s){let o={};s=s||{},s.encoders={$encode:o},t=hbt(t,e,r,n,i.config);for(let a in t)o[a]=Ebt(t[a],e,s,i);return s}function Ebt(t,e,r,n){let i={},s={};for(let o in t)t[o]!=null&&(i[o]=Sbt(Abt(t[o]),n,r,s));return{$expr:{marktype:e,channels:i},$fields:Object.keys(s),$output:Object.keys(t)}}function Abt(t){return j(t)?ybt(t):w$(t)}function Sbt(t,e,r,n){let i=w0(t,e);return i.$fields.forEach(s=>n[s]=1),Ke(r,i.$params),i.$expr}var vbt="outer",_bt=["value","update","init","react","bind"];function owe(t,e){W(t+' for "outer" push: '+fe(e))}function Dwe(t,e){let r=t.name;if(t.push===vbt)e.signals[r]||owe("No prior signal definition",r),_bt.forEach(n=>{t[n]!==void 0&&owe("Invalid property ",n)});else{let n=e.addSignal(r,t.value);t.react===!1&&(n.react=!1),t.bind&&e.addBinding(r,t.bind)}}function rue(t,e,r,n){this.id=-1,this.type=t,this.value=e,this.params=r,n&&(this.parent=n)}function L$(t,e,r,n){return new rue(t,e,r,n)}function F$(t,e){return L$("operator",t,e)}function Qe(t){let e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function N6(t,e){return e?{$field:t,$name:e}:{$field:t}}var nue=N6("key");function awe(t,e){return{$compare:t,$order:e}}function bbt(t,e){let r={$key:t};return e&&(r.$flat=!0),r}var Tbt="ascending",Cbt="descending";function Rbt(t){return Se(t)?(t.order===Cbt?"-":"+")+I$(t.op,t.field):""}function I$(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}var xue="scope",iue="view";function fi(t){return t&&t.signal}function Obt(t){return t&&t.expr}function R$(t){if(fi(t))return!0;if(Se(t)){for(let e in t)if(R$(t[e]))return!0}return!1}function L0(t,e){return t??e}function v3(t){return t&&t.signal||t}var uwe="timer";function F6(t,e){return(t.merge?Nbt:t.stream?Fbt:t.type?wbt:W("Invalid stream specification: "+fe(t)))(t,e)}function Dbt(t){return t===xue?iue:t||iue}function Nbt(t,e){let r=t.merge.map(i=>F6(i,e)),n=due({merge:r},t,e);return e.addStream(n).id}function Fbt(t,e){let r=F6(t.stream,e),n=due({stream:r},t,e);return e.addStream(n).id}function wbt(t,e){let r;t.type===uwe?(r=e.event(uwe,t.throttle),t={between:t.between,filter:t.filter}):r=e.event(Dbt(t.source),t.type);let n=due({stream:r},t,e);return Object.keys(n).length===1?r:e.addStream(n).id}function due(t,e,r){let n=e.between;return n&&(n.length!==2&&W('Stream "between" parameter must have 2 entries: '+fe(e)),t.between=[F6(n[0],r),F6(n[1],r)]),n=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&n.push(Lbt(e.marktype,e.markname,e.markrole)),e.source===xue&&n.push("inScope(event.item)"),n.length&&(t.filter=w0("("+n.join(")&&(")+")",r).$expr),(n=e.throttle)!=null&&(t.throttle=+n),(n=e.debounce)!=null&&(t.debounce=+n),e.consume&&(t.consume=!0),t}function Lbt(t,e,r){let n="event.item";return n+(t&&t!=="*"?"&&"+n+".mark.marktype==='"+t+"'":"")+(r?"&&"+n+".mark.role==='"+r+"'":"")+(e?"&&"+n+".mark.name==='"+e+"'":"")}var Ibt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Mbt(t,e,r){let n=t.encode,i={target:r},s=t.events,o=t.update,a=[];s||W("Signal update missing events specification."),he(s)&&(s=Po(s,e.isSubscope()?xue:iue)),s=le(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[kbt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),n!=null&&(o&&W("Signal encode and update are mutually exclusive."),o="encode(item(),"+fe(n)+")"),i.update=he(o)?w0(o,e):o.expr!=null?w0(o.expr,e):o.value!=null?o.value:o.signal!=null?{$expr:Ibt,$params:{$value:e.signalRef(o.signal)}}:W("Invalid signal update specification."),t.force&&(i.options={force:!0}),a.forEach(u=>e.addUpdate(Ke(Pbt(u,e),i)))}function Pbt(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):F6(t,e)}}function kbt(t){return{signal:"["+t.map(e=>e.scale?'scale("'+e.scale+'")':e.signal)+"]"}}function Bbt(t,e){let r=e.getSignal(t.name),n=t.update;t.init&&(n?W("Signals can not include both init and update expressions."):(n=t.init,r.initonly=!0)),n&&(n=w0(n,e),r.update=n.$expr,r.params=n.$params),t.on&&t.on.forEach(i=>Mbt(i,e,r.id))}var pr=t=>(e,r,n)=>L$(t,r,e||void 0,n),Nwe=pr("aggregate"),qbt=pr("axisticks"),Fwe=pr("bound"),M0=pr("collect"),lwe=pr("compare"),Ubt=pr("datajoin"),wwe=pr("encode"),$bt=pr("expression"),jbt=pr("facet"),Hbt=pr("field"),zbt=pr("key"),Gbt=pr("legendentries"),Qbt=pr("load"),Vbt=pr("mark"),Wbt=pr("multiextent"),Ybt=pr("multivalues"),Kbt=pr("overlap"),Xbt=pr("params"),Lwe=pr("prefacet"),Jbt=pr("projection"),Zbt=pr("proxy"),eTt=pr("relay"),Iwe=pr("render"),tTt=pr("scale"),b3=pr("sieve"),rTt=pr("sortitems"),Mwe=pr("viewlayout"),nTt=pr("values"),iTt=0,Pwe={min:"min",max:"max",count:"sum"};function sTt(t,e){let r=t.type||"linear";Dne(r)||W("Unrecognized scale type: "+fe(r)),e.addScale(t.name,{type:r,domain:void 0})}function oTt(t,e){let r=e.getScale(t.name).params,n;r.domain=kwe(t.domain,t,e),t.range!=null&&(r.range=qwe(t,e,r)),t.interpolate!=null&&mTt(t.interpolate,r),t.nice!=null&&(r.nice=pTt(t.nice)),t.bins!=null&&(r.bins=hTt(t.bins,e));for(n in t)Fe(r,n)||n==="name"||(r[n]=ml(t[n],e))}function ml(t,e){return Se(t)?t.signal?e.signalRef(t.signal):W("Unsupported object: "+fe(t)):t}function O$(t,e){return t.signal?e.signalRef(t.signal):t.map(r=>ml(r,e))}function M$(t){W("Can not find data set: "+fe(t))}function kwe(t,e,r){if(!t){(e.domainMin!=null||e.domainMax!=null)&&W("No scale domain defined for domainMin/domainMax to override.");return}return t.signal?r.signalRef(t.signal):(j(t)?aTt:t.fields?lTt:uTt)(t,e,r)}function aTt(t,e,r){return t.map(n=>ml(n,r))}function uTt(t,e,r){let n=r.getData(t.data);return n||M$(t.data),b2(e.type)?n.valuesRef(r,t.field,Bwe(t.sort,!1)):wne(e.type)?n.domainRef(r,t.field):n.extentRef(r,t.field)}function lTt(t,e,r){let n=t.data,i=t.fields.reduce((s,o)=>(o=he(o)?{data:n,field:o}:j(o)||o.signal?cTt(o,r):o,s.push(o),s),[]);return(b2(e.type)?fTt:wne(e.type)?xTt:dTt)(t,r,i)}function cTt(t,e){let r="_:vega:_"+iTt++,n=M0({});if(j(t))n.value={$ingest:t};else if(t.signal){let i="setdata("+fe(r)+","+t.signal+")";n.params.input=e.signalRef(i)}return e.addDataPipeline(r,[n,b3({})]),{data:r,field:"data"}}function fTt(t,e,r){let n=Bwe(t.sort,!0),i,s,o=r.map(l=>{let c=e.getData(l.data);return c||M$(l.data),c.countsRef(e,l.field,n)}),a={groupby:nue,pulse:o};n&&(i=n.op||"count",s=n.field?I$(i,n.field):"count",a.ops=[Pwe[i]],a.fields=[e.fieldRef(s)],a.as=[s]),i=e.add(Nwe(a));let u=e.add(M0({pulse:Qe(i)}));return s=e.add(nTt({field:nue,sort:e.sortRef(n),pulse:Qe(u)})),Qe(s)}function Bwe(t,e){return t&&(!t.field&&!t.op?Se(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?W("No field provided for sort aggregate op: "+t.op):e&&t.field&&t.op&&!Pwe[t.op]&&W("Multiple domain scales can not be sorted using "+t.op)),t}function xTt(t,e,r){let n=r.map(i=>{let s=e.getData(i.data);return s||M$(i.data),s.domainRef(e,i.field)});return Qe(e.add(Ybt({values:n})))}function dTt(t,e,r){let n=r.map(i=>{let s=e.getData(i.data);return s||M$(i.data),s.extentRef(e,i.field)});return Qe(e.add(Wbt({extents:n})))}function hTt(t,e){return t.signal||j(t)?O$(t,e):e.objectProperty(t)}function pTt(t){return Se(t)?{interval:ml(t.interval),step:ml(t.step)}:ml(t)}function mTt(t,e){e.interpolate=ml(t.type||t),t.gamma!=null&&(e.interpolateGamma=ml(t.gamma))}function qwe(t,e,r){let n=e.config.range,i=t.range;if(i.signal)return e.signalRef(i.signal);if(he(i)){if(n&&Fe(n,i))return t=Ke({},t,{range:n[i]}),qwe(t,e,r);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=b2(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:W("Unrecognized scale range value: "+fe(i))}else if(i.scheme){r.scheme=j(i.scheme)?O$(i.scheme,e):ml(i.scheme,e),i.extent&&(r.schemeExtent=O$(i.extent,e)),i.count&&(r.schemeCount=ml(i.count,e));return}else if(i.step){r.rangeStep=ml(i.step,e);return}else{if(b2(t.type)&&!j(i))return kwe(i,t,e);j(i)||W("Unsupported range type: "+fe(i))}return i.map(s=>(j(s)?O$:ml)(s,e))}function gTt(t,e){let r=e.config.projection||{},n={};for(let i in t)i!=="name"&&(n[i]=sue(t[i],i,e));for(let i in r)n[i]==null&&(n[i]=sue(r[i],i,e));e.addProjection(t.name,n)}function sue(t,e,r){return j(t)?t.map(n=>sue(n,e,r)):Se(t)?t.signal?r.signalRef(t.signal):e==="fit"?t:W("Unsupported parameter object: "+fe(t)):t}var P0="top",Ov="left",Dv="right",G2="bottom",Uwe="center",yTt="vertical",ETt="start",ATt="middle",STt="end",oue="index",hue="label",vTt="offset",Cv="perc",_Tt="perc2",gl="value",L6="guide-label",pue="guide-title",bTt="group-title",TTt="group-subtitle",cwe="symbol",D$="gradient",aue="discrete",uue="size",CTt="shape",RTt="fill",OTt="stroke",DTt="strokeWidth",NTt="strokeDash",FTt="opacity",mue=[uue,CTt,RTt,OTt,DTt,NTt,FTt],I6={name:1,style:1,interactive:1},Ut={value:0},yl={value:1},P$="group",$we="rect",gue="rule",wTt="symbol",T3="text";function w6(t){return t.type=P$,t.interactive=t.interactive||!1,t}function Sa(t,e){let r=(n,i)=>L0(t[n],L0(e[n],i));return r.isVertical=n=>yTt===L0(t.direction,e.direction||(n?e.symbolDirection:e.gradientDirection)),r.gradientLength=()=>L0(t.gradientLength,e.gradientLength||e.gradientWidth),r.gradientThickness=()=>L0(t.gradientThickness,e.gradientThickness||e.gradientHeight),r.entryColumns=()=>L0(t.columns,L0(e.columns,+r.isVertical(!0))),r}function jwe(t,e){let r=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return r&&r.signal?r:r?r.value:null}function LTt(t,e,r){let n=e.config.style[r];return n&&n[t]}function k$(t,e,r){return`item.anchor === '${ETt}' ? ${t} : item.anchor === '${STt}' ? ${e} : ${r}`}var yue=k$(fe(Ov),fe(Dv),fe(Uwe));function ITt(t){let e=t("tickBand"),r=t("tickOffset"),n,i;return e?e.signal?(n={signal:`(${e.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${e.signal}) === 'extent'`},Se(r)||(r={signal:`(${e.signal}) === 'extent' ? 0 : ${r}`})):e==="extent"?(n=1,i=!0,r=0):(n=.5,i=!1):(n=t("bandPosition"),i=t("tickExtra")),{extra:i,band:n,offset:r}}function Hwe(t,e){return e?t?Se(t)?Object.assign({},t,{offset:Hwe(t.offset,e)}):{value:t,offset:e}:e:t}function Su(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=Rv(t.encode,e,I6)):t.interactive=!1,t}function MTt(t,e,r,n){let i=Sa(t,r),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength(),u,l,c,f,x;s?(l=[0,1],c=[0,0],f=o,x=a):(l=[0,0],c=[1,0],f=a,x=o);let d={enter:u={opacity:Ut,x:Ut,y:Ut,width:Gi(f),height:Gi(x)},update:Ke({},u,{opacity:yl,fill:{gradient:e,start:l,stop:c}}),exit:{opacity:Ut}};return gs(d,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Su({type:$we,role:ubt,encode:d},n)}function PTt(t,e,r,n,i){let s=Sa(t,r),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength(),l,c,f,x,d="";o?(l="y",f="y2",c="x",x="width",d="1-"):(l="x",f="x2",c="y",x="height");let h={opacity:Ut,fill:{scale:e,field:gl}};h[l]={signal:d+"datum."+Cv,mult:u},h[c]=Ut,h[f]={signal:d+"datum."+_Tt,mult:u},h[x]=Gi(a);let p={enter:h,update:Ke({},h,{opacity:yl}),exit:{opacity:Ut}};return gs(p,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Su({type:$we,role:obt,key:gl,from:i,encode:p},n)}var kTt=`datum.${Cv}<=0?"${Ov}":datum.${Cv}>=1?"${Dv}":"${Uwe}"`,BTt=`datum.${Cv}<=0?"${G2}":datum.${Cv}>=1?"${P0}":"${ATt}"`;function fwe(t,e,r,n){let i=Sa(t,e),s=i.isVertical(),o=Gi(i.gradientThickness()),a=i.gradientLength(),u=i("labelOverlap"),l,c,f,x,d="",h={enter:l={opacity:Ut},update:c={opacity:yl,text:{field:hue}},exit:{opacity:Ut}};return gs(h,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:L0(t.labelLimit,e.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:BTt},f="y",x="x",d="1-"):(l.align=c.align={signal:kTt},l.baseline={value:"top"},f="x",x="y"),l[f]=c[f]={signal:d+"datum."+Cv,mult:a},l[x]=c[x]=o,o.offset=L0(t.labelOffset,e.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+oue}:void 0,Su({type:T3,role:bwe,style:L6,key:gl,from:n,encode:h,overlap:u},r)}function qTt(t,e,r,n,i){let s=Sa(t,e),o=r.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},x=`(${i}) ? datum.${vTt} : datum.${uue}`,d=l?Gi(l):{field:uue},h=`datum.${oue}`,p=`max(1, ${i})`,m,g,y,A,S;d.mult=.5,m={enter:g={opacity:Ut,x:{signal:x,mult:.5,offset:c},y:d},update:y={opacity:yl,x:g.x,y:g.y},exit:{opacity:Ut}};let T=null,_=null;t.fill||(T=e.symbolBaseFillColor,_=e.symbolBaseStrokeColor),gs(m,{fill:s("symbolFillColor",T),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",_),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),mue.forEach(N=>{t[N]&&(y[N]=g[N]={scale:t[N],field:gl})});let b=Su({type:wTt,role:lbt,key:gl,from:f,clip:l?!0:void 0,encode:m},r.symbols),R=Gi(c);R.offset=s("labelOffset"),m={enter:g={opacity:Ut,x:{signal:x,offset:R},y:d},update:y={opacity:yl,text:{field:hue},x:g.x,y:g.y},exit:{opacity:Ut}},gs(m,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});let O=Su({type:T3,role:bwe,style:L6,key:gl,from:f,encode:m},r.labels);return m={enter:{noBound:{value:!l},width:Ut,height:l?Gi(l):Ut,opacity:Ut},exit:{opacity:Ut},update:y={opacity:yl,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(A=`ceil(item.mark.items.length / ${p})`,y.row.signal=`${h}%${A}`,y.column.signal=`floor(${h} / ${A})`,S={field:["row",h]}):(y.row.signal=`floor(${h} / ${p})`,y.column.signal=`${h} % ${p}`,S={field:h}),y.column.signal=`(${i})?${y.column.signal}:${h}`,n={facet:{data:n,name:"value",groupby:oue}},w6({role:fue,from:n,encode:Rv(m,o,I6),marks:[b,O],name:u,interactive:a,sort:S})}function UTt(t,e){let r=Sa(t,e);return{align:r("gridAlign"),columns:r.entryColumns(),center:{row:!0,column:!1},padding:{row:r("rowPadding"),column:r("columnPadding")}}}var Eue='item.orient === "left"',Aue='item.orient === "right"',B$=`(${Eue} || ${Aue})`,$Tt=`datum.vgrad && ${B$}`,jTt=k$('"top"','"bottom"','"middle"'),HTt=k$('"right"','"left"','"center"'),zTt=`datum.vgrad && ${Aue} ? (${HTt}) : (${B$} && !(datum.vgrad && ${Eue})) ? "left" : ${yue}`,GTt=`item._anchor || (${B$} ? "middle" : "start")`,QTt=`${$Tt} ? (${Eue} ? -90 : 90) : 0`,VTt=`${B$} ? (datum.vgrad ? (${Aue} ? "bottom" : "top") : ${jTt}) : "top"`;function WTt(t,e,r,n){let i=Sa(t,e),s={enter:{opacity:Ut},update:{opacity:yl,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ut}};return gs(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:GTt},angle:{signal:QTt},align:{signal:zTt},baseline:{signal:VTt},text:t.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Su({type:T3,role:cbt,style:pue,from:n,encode:s},r)}function YTt(t,e){let r;return Se(t)&&(t.signal?r=t.signal:t.path?r="pathShape("+xwe(t.path)+")":t.sphere&&(r="geoShape("+xwe(t.sphere)+', {type: "Sphere"})')),r?e.signalRef(r):!!t}function xwe(t){return Se(t)&&t.signal?t.signal:fe(t)}function zwe(t){let e=t.role||"";return!e.indexOf("axis")||!e.indexOf("legend")||!e.indexOf("title")?e:t.type===P$?fue:e||lue}function KTt(t){return{marktype:t.type,name:t.name||void 0,role:t.role||zwe(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function XTt(t,e){return t&&t.signal?e.signalRef(t.signal):t!==!1}function Sue(t,e){let r=zte(t.type);r||W("Unrecognized transform type: "+fe(t.type));let n=L$(r.type.toLowerCase(),null,Gwe(r,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(n)),n.metadata=r.metadata||{},n}function Gwe(t,e,r){let n={},i=t.params.length;for(let s=0;s<i;++s){let o=t.params[s];n[o.name]=JTt(o,e,r)}return n}function JTt(t,e,r){let n=t.type,i=e[t.name];if(n==="index")return ZTt(t,e,r);if(i===void 0){t.required&&W("Missing required "+fe(e.type)+" parameter: "+fe(t.name));return}else{if(n==="param")return eCt(t,e,r);if(n==="projection")return r.projectionRef(e[t.name])}return t.array&&!fi(i)?i.map(s=>dwe(t,s,r)):dwe(t,i,r)}function dwe(t,e,r){let n=t.type;if(fi(e))return pwe(n)?W("Expression references can not be signals."):eue(n)?r.fieldRef(e):mwe(n)?r.compareRef(e):r.signalRef(e.signal);{let i=t.expr||eue(n);return i&&tCt(e)?r.exprRef(e.expr,e.as):i&&rCt(e)?N6(e.field,e.as):pwe(n)?w0(e,r):nCt(n)?Qe(r.getData(e).values):eue(n)?N6(e):mwe(n)?r.compareRef(e):e}}function ZTt(t,e,r){return he(e.from)||W('Lookup "from" parameter must be a string literal.'),r.getData(e.from).lookupRef(r,e.key)}function eCt(t,e,r){let n=e[t.name];return t.array?(j(n)||W("Expected an array of sub-parameters. Instead: "+fe(n)),n.map(i=>hwe(t,i,r))):hwe(t,n,r)}function hwe(t,e,r){let n=t.params.length,i;for(let o=0;o<n;++o){i=t.params[o];for(let a in i.key)if(i.key[a]!==e[a]){i=null;break}if(i)break}i||W("Unsupported parameter: "+fe(e));let s=Ke(Gwe(i,e,r),i.key);return Qe(r.add(Xbt(s)))}var tCt=t=>t&&t.expr,rCt=t=>t&&t.field,nCt=t=>t==="data",pwe=t=>t==="expr",eue=t=>t==="field",mwe=t=>t==="compare";function iCt(t,e,r){let n,i,s,o,a;return t?(n=t.facet)&&(e||W("Only group marks can be faceted."),n.field!=null?o=a=N$(n,r):(t.data?a=Qe(r.getData(t.data).aggregate):(s=Sue(Ke({type:"aggregate",groupby:le(n.groupby)},n.aggregate),r),s.params.key=r.keyRef(n.groupby),s.params.pulse=N$(n,r),o=a=Qe(r.add(s))),i=r.keyRef(n.groupby,!0))):o=Qe(r.add(M0(null,[{}]))),o||(o=N$(t,r)),{key:i,pulse:o,parent:a}}function N$(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:Qe(e.getData(t.data).output)}function _3(t,e,r,n,i){this.scope=t,this.input=e,this.output=r,this.values=n,this.aggregate=i,this.index={}}_3.fromEntries=function(t,e){let r=e.length,n=e[r-1],i=e[r-2],s=e[0],o=null,a=1;for(s&&s.type==="load"&&(s=e[1]),t.add(e[0]);a<r;++a)e[a].params.pulse=Qe(e[a-1]),t.add(e[a]),e[a].type==="aggregate"&&(o=e[a]);return new _3(t,s,i,n,o)};function Qwe(t){return he(t)?t:null}function gwe(t,e,r){let n=I$(r.op,r.field),i;if(e.ops){for(let s=0,o=e.as.length;s<o;++s)if(e.as[s]===n)return}else e.ops=["count"],e.fields=[null],e.as=["count"];r.op&&(e.ops.push((i=r.op.signal)?t.signalRef(i):r.op),e.fields.push(t.fieldRef(r.field)),e.as.push(n))}function O6(t,e,r,n,i,s,o){let a=e[r]||(e[r]={}),u=Rbt(s),l=Qwe(i),c,f;if(l!=null&&(t=e.scope,l=l+(u?"|"+u:""),c=a[l]),!c){let x=s?{field:nue,pulse:e.countsRef(t,i,s)}:{field:t.fieldRef(i),pulse:Qe(e.output)};u&&(x.sort=t.sortRef(s)),f=t.add(L$(n,void 0,x)),o&&(e.index[i]=f),c=Qe(f),l!=null&&(a[l]=c)}return c}_3.prototype={countsRef(t,e,r){let n=this,i=n.counts||(n.counts={}),s=Qwe(e),o,a,u;return s!=null&&(t=n.scope,o=i[s]),o?r&&r.field&&gwe(t,o.agg.params,r):(u={groupby:t.fieldRef(e,"key"),pulse:Qe(n.output)},r&&r.field&&gwe(t,u,r),a=t.add(Nwe(u)),o=t.add(M0({pulse:Qe(a)})),o={agg:a,ref:Qe(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Qe(this.values)},extentRef(t,e){return O6(t,this,"extent","extent",e,!1)},domainRef(t,e){return O6(t,this,"domain","values",e,!1)},valuesRef(t,e,r){return O6(t,this,"vals","values",e,r||!0)},lookupRef(t,e){return O6(t,this,"lookup","tupleindex",e,!1)},indataRef(t,e){return O6(t,this,"indata","tupleindex",e,!0,!0)}};function sCt(t,e,r){let n=t.from.facet,i=n.name,s=N$(n,e),o;n.name||W("Facet must have a name: "+fe(n)),n.data||W("Facet must reference a data set: "+fe(n)),n.field?o=e.add(Lwe({field:e.fieldRef(n.field),pulse:s})):n.groupby?o=e.add(jbt({key:e.keyRef(n.groupby),group:Qe(e.proxy(r.parent)),pulse:s})):W("Facet must specify groupby or field: "+fe(n));let a=e.fork(),u=a.add(M0()),l=a.add(b3({pulse:Qe(u)}));a.addData(i,new _3(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(t).toRuntime()}}function oCt(t,e,r){let n=e.add(Lwe({pulse:r.pulse})),i=e.fork();i.add(b3()),i.addSignal("parent",null),n.params.subflow={$subflow:i.parse(t).toRuntime()}}function Vwe(t,e,r){let n=t.remove,i=t.insert,s=t.toggle,o=t.modify,a=t.values,u=e.add(F$()),l="if("+t.trigger+',modify("'+r+'",'+[i,n,s,o,a].map(f=>f??"null").join(",")+"),0)",c=w0(l,e);u.update=c.$expr,u.params=c.$params}function q$(t,e){let r=zwe(t),n=t.type===P$,i=t.from&&t.from.facet,s=t.overlap,o=t.layout||r===fue||r===cue,a,u,l,c,f,x,d,h=r===lue||o||i,p=iCt(t.from,n,e);u=e.add(Ubt({key:p.key||(t.key?N6(t.key):void 0),pulse:p.pulse,clean:!n}));let m=Qe(u);u=l=e.add(M0({pulse:m})),u=e.add(Vbt({markdef:KTt(t),interactive:XTt(t.interactive,e),clip:YTt(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:Qe(u)}));let g=Qe(u);u=c=e.add(wwe(Owe(t.encode,t.type,r,t.style,e,{mod:!1,pulse:g}))),u.params.parent=e.encode(),t.transform&&t.transform.forEach(_=>{let b=Sue(_,e),R=b.metadata;(R.generates||R.changes)&&W("Mark transforms should not generate new data."),R.nomod||(c.params.mod=!0),b.params.pulse=Qe(u),e.add(u=b)}),t.sort&&(u=e.add(rTt({sort:e.compareRef(t.sort),pulse:Qe(u)})));let y=Qe(u);(i||o)&&(o=e.add(Mwe({layout:e.objectProperty(t.layout),legends:e.legends,mark:g,pulse:y})),x=Qe(o));let A=e.add(Fwe({mark:g,pulse:x||y}));d=Qe(A),n&&(h&&(a=e.operators,a.pop(),o&&a.pop()),e.pushState(y,x||d,m),i?sCt(t,e,p):h?oCt(t,e,p):e.parse(t),e.popState(),h&&(o&&a.push(o),a.push(A))),s&&(d=aCt(s,d,e));let S=e.add(Iwe({pulse:d})),T=e.add(b3({pulse:Qe(S)},void 0,e.parent()));t.name!=null&&(f=t.name,e.addData(f,new _3(e,l,S,T)),t.on&&t.on.forEach(_=>{(_.insert||_.remove||_.toggle)&&W("Marks only support modify triggers."),Vwe(_,e,f)}))}function aCt(t,e,r){let n=t.method,i=t.bound,s=t.separation,o={separation:fi(s)?r.signalRef(s.signal):s,method:fi(n)?r.signalRef(n.signal):n,pulse:e};if(t.order&&(o.sort=r.compareRef({field:t.order})),i){let a=i.tolerance;o.boundTolerance=fi(a)?r.signalRef(a.signal):+a,o.boundScale=r.scaleRef(i.scale),o.boundOrient=i.orient}return Qe(r.add(Kbt(o)))}function uCt(t,e){let r=e.config.legend,n=t.encode||{},i=Sa(t,r),s=n.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={},c=0,f,x,d;mue.forEach(A=>t[A]?(l[A]=t[A],c=c||t[A]):0),c||W("Missing valid scale for legend.");let h=lCt(t,e.scaleType(c)),p={title:t.title!=null,scales:l,type:h,vgrad:h!=="symbol"&&i.isVertical()},m=Qe(e.add(M0(null,[p]))),g={enter:{x:{value:0},y:{value:0}}},y=Qe(e.add(Gbt(x={type:h,scale:e.scaleRef(c),count:e.objectProperty(i("tickCount")),limit:e.property(i("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return h===D$?(d=[MTt(t,c,r,n.gradient),fwe(t,r,n.labels,y)],x.count=x.count||e.signalRef(`max(2,2*floor((${v3(i.gradientLength())})/100))`)):h===aue?d=[PTt(t,c,r,n.gradient,y),fwe(t,r,n.labels,y)]:(f=UTt(t,r),d=[qTt(t,r,n,y,v3(f.columns))],x.size=xCt(t,e,d[0].marks)),d=[w6({role:abt,from:m,encode:g,marks:d,layout:f,interactive:a})],p.title&&d.push(WTt(t,r,n.title,m)),q$(w6({role:sbt,from:m,encode:Rv(fCt(i,t,r),s,I6),marks:d,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),e)}function lCt(t,e){let r=t.type||cwe;return!t.type&&cCt(t)===1&&(t.fill||t.stroke)&&(r=cO(e)?D$:yq(e)?aue:cwe),r!==D$?r:yq(e)?aue:D$}function cCt(t){return mue.reduce((e,r)=>e+(t[r]?1:0),0)}function fCt(t,e,r){let n={enter:{},update:{}};return gs(n,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:r.strokeWidth,strokeDash:r.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),n}function xCt(t,e,r){let n=v3(ywe("size",t,r)),i=v3(ywe("strokeWidth",t,r)),s=v3(dCt(r[1].encode,e,L6));return w0(`max(ceil(sqrt(${n})+${i}),${s})`,e)}function ywe(t,e,r){return e[t]?`scale("${e[t]}",datum)`:jwe(t,r[0].encode)}function dCt(t,e,r){return jwe("fontSize",t)||LTt("fontSize",e,r)}var hCt=`item.orient==="${Ov}"?-90:item.orient==="${Dv}"?90:0`;function pCt(t,e){t=he(t)?{text:t}:t;let r=Sa(t,e.config.title),n=t.encode||{},i=n.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Qe(e.add(M0(null,[l])));return u.push(yCt(t,r,mCt(t),c)),t.subtitle&&u.push(ECt(t,r,n.subtitle,c)),q$(w6({role:fbt,from:c,encode:gCt(r,i),marks:u,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:o,style:a}),e)}function mCt(t){let e=t.encode;return e&&e.title||Ke({name:t.name,interactive:t.interactive,style:t.style},e)}function gCt(t,e){let r={enter:{},update:{}};return gs(r,{orient:t("orient"),anchor:t("anchor"),align:{signal:yue},angle:{signal:hCt},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),Rv(r,e,I6)}function yCt(t,e,r,n){let i={value:0},s=t.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return gs(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),Su({type:T3,role:xbt,style:bTt,from:n,encode:o},r)}function ECt(t,e,r,n){let i={value:0},s=t.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return gs(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),Su({type:T3,role:dbt,style:TTt,from:n,encode:o},r)}function ACt(t,e){let r=[];t.transform&&t.transform.forEach(n=>{r.push(Sue(n,e))}),t.on&&t.on.forEach(n=>{Vwe(n,e,t.name)}),e.addDataPipeline(t.name,SCt(t,e,r))}function SCt(t,e,r){let n=[],i=null,s=!1,o=!1,a,u,l,c,f;for(t.values?fi(t.values)||R$(t.format)?(n.push(Ewe(e,t)),n.push(i=S3())):n.push(i=S3({$ingest:t.values,$format:t.format})):t.url?R$(t.url)||R$(t.format)?(n.push(Ewe(e,t)),n.push(i=S3())):n.push(i=S3({$request:t.url,$format:t.format})):t.source&&(i=a=le(t.source).map(x=>Qe(e.getData(x).output)),n.push(null)),u=0,l=r.length;u<l;++u)c=r[u],f=c.metadata,!i&&!f.source&&n.push(i=S3()),n.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,n[0]=eTt({derive:s,pulse:l?a:a[0]}),(s||l)&&n.splice(1,0,S3())),i||n.push(S3()),n.push(b3({})),n}function S3(t){let e=M0({},t);return e.metadata={source:!0},e}function Ewe(t,e){return Qbt({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}var Wwe=t=>t===G2||t===P0,U$=(t,e,r)=>fi(t)?TCt(t.signal,e,r):t===Ov||t===P0?e:r,Qi=(t,e,r)=>fi(t)?_Ct(t.signal,e,r):Wwe(t)?e:r,I0=(t,e,r)=>fi(t)?bCt(t.signal,e,r):Wwe(t)?r:e,Ywe=(t,e,r)=>fi(t)?CCt(t.signal,e,r):t===P0?{value:e}:{value:r},vCt=(t,e,r)=>fi(t)?RCt(t.signal,e,r):t===Dv?{value:e}:{value:r},_Ct=(t,e,r)=>Kwe(`${t} === '${P0}' || ${t} === '${G2}'`,e,r),bCt=(t,e,r)=>Kwe(`${t} !== '${P0}' && ${t} !== '${G2}'`,e,r),TCt=(t,e,r)=>vue(`${t} === '${Ov}' || ${t} === '${P0}'`,e,r),CCt=(t,e,r)=>vue(`${t} === '${P0}'`,e,r),RCt=(t,e,r)=>vue(`${t} === '${Dv}'`,e,r),Kwe=(t,e,r)=>(e=e!=null?Gi(e):e,r=r!=null?Gi(r):r,Awe(e)&&Awe(r)?(e=e?e.signal||fe(e.value):null,r=r?r.signal||fe(r.value):null,{signal:`${t} ? (${e}) : (${r})`}):[Ke({test:t},e)].concat(r||[])),Awe=t=>t==null||Object.keys(t).length===1,vue=(t,e,r)=>({signal:`${t} ? (${bv(e)}) : (${bv(r)})`}),OCt=(t,e,r,n,i)=>({signal:(n!=null?`${t} === '${Ov}' ? (${bv(n)}) : `:"")+(r!=null?`${t} === '${G2}' ? (${bv(r)}) : `:"")+(i!=null?`${t} === '${Dv}' ? (${bv(i)}) : `:"")+(e!=null?`${t} === '${P0}' ? (${bv(e)}) : `:"")+"(null)"}),bv=t=>fi(t)?t.signal:t==null?null:fe(t),DCt=(t,e)=>e===0?0:fi(t)?{signal:`(${t.signal}) * ${e}`}:{value:t*e},Tv=(t,e)=>{let r=t.signal;return r&&r.endsWith("(null)")?{signal:r.slice(0,-6)+e.signal}:t};function vv(t,e,r,n){let i;if(e&&Fe(e,t))return e[t];if(Fe(r,t))return r[t];if(t.startsWith("title")){switch(t){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=t[5].toLowerCase()+t.slice(6)}return n[pue][i]}else if(t.startsWith("label")){switch(t){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=t[5].toLowerCase()+t.slice(6)}return n[L6][i]}return null}function Swe(t){let e={};for(let r of t)if(r)for(let n in r)e[n]=1;return Object.keys(e)}function NCt(t,e){var r=e.config,n=r.style,i=r.axis,s=e.scaleType(t.scale)==="band"&&r.axisBand,o=t.orient,a,u,l;if(fi(o)){let f=Swe([r.axisX,r.axisY]),x=Swe([r.axisTop,r.axisBottom,r.axisLeft,r.axisRight]);a={};for(l of f)a[l]=Qi(o,vv(l,r.axisX,i,n),vv(l,r.axisY,i,n));u={};for(l of x)u[l]=OCt(o.signal,vv(l,r.axisTop,i,n),vv(l,r.axisBottom,i,n),vv(l,r.axisLeft,i,n),vv(l,r.axisRight,i,n))}else a=o===P0||o===G2?r.axisX:r.axisY,u=r["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?Ke({},i,a,u,s):i}function FCt(t,e,r,n){let i=Sa(t,e),s=t.orient,o,a,u={enter:o={opacity:Ut},update:a={opacity:yl},exit:{opacity:Ut}};gs(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});let l=vwe(t,0),c=vwe(t,1);return o.x=a.x=Qi(s,l,Ut),o.x2=a.x2=Qi(s,c),o.y=a.y=I0(s,l,Ut),o.y2=a.y2=I0(s,c),Su({type:gue,role:ebt,from:n,encode:u},r)}function vwe(t,e){return{scale:t.scale,range:e}}function wCt(t,e,r,n,i){let s=Sa(t,e),o=t.orient,a=t.gridScale,u=U$(o,1,-1),l=LCt(t.offset,u),c,f,x,d={enter:c={opacity:Ut},update:x={opacity:yl},exit:f={opacity:Ut}};gs(d,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});let h={scale:t.scale,field:gl,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},p=Qi(o,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},g=a?{scale:a,range:1,mult:u,offset:l}:Ke(p,{mult:u,offset:l});return c.x=x.x=Qi(o,h,m),c.y=x.y=I0(o,h,m),c.x2=x.x2=I0(o,g),c.y2=x.y2=Qi(o,g),f.x=Qi(o,h),f.y=I0(o,h),Su({type:gue,role:tbt,key:gl,from:n,encode:d},r)}function LCt(t,e){if(e!==1)if(!Se(t))t=fi(e)?{signal:`(${e.signal}) * (${t||0})`}:e*(t||0);else{let r=t=Ke({},t);for(;r.mult!=null;)if(Se(r.mult))r=r.mult=Ke({},r.mult);else return r.mult=fi(e)?{signal:`(${r.mult}) * (${e.signal})`}:r.mult*e,t;r.mult=e}return t}function ICt(t,e,r,n,i,s){let o=Sa(t,e),a=t.orient,u=U$(a,-1,1),l,c,f,x={enter:l={opacity:Ut},update:f={opacity:yl},exit:c={opacity:Ut}};gs(x,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});let d=Gi(i);d.mult=u;let h={scale:t.scale,field:gl,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Qi(a,Ut,h),f.y2=l.y2=Qi(a,d),c.x=Qi(a,h),f.x=l.x=I0(a,Ut,h),f.x2=l.x2=I0(a,d),c.y=I0(a,h),Su({type:gue,role:nbt,key:gl,from:n,encode:x},r)}function tue(t,e,r,n,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+r+","+n+","+i+")"}}function MCt(t,e,r,n,i,s){let o=Sa(t,e),a=t.orient,u=t.scale,l=U$(a,-1,1),c=v3(o("labelFlush")),f=v3(o("labelFlushOffset")),x=o("labelAlign"),d=o("labelBaseline"),h=c===0||!!c,p,m=Gi(i);m.mult=l,m.offset=Gi(o("labelPadding")||0),m.offset.mult=l;let g={scale:u,field:gl,band:.5,offset:Hwe(s.offset,o("labelOffset"))},y=Qi(a,h?tue(u,c,'"left"','"right"','"center"'):{value:"center"},vCt(a,"left","right")),A=Qi(a,Ywe(a,"bottom","top"),h?tue(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),S=tue(u,c,`-(${f})`,f,0);h=h&&f;let T={opacity:Ut,x:Qi(a,g,m),y:I0(a,g,m)},_={enter:T,update:p={opacity:yl,text:{field:hue},x:T.x,y:T.y,align:y,baseline:A},exit:{opacity:Ut,x:T.x,y:T.y}};gs(_,{dx:!x&&h?Qi(a,S):null,dy:!d&&h?I0(a,S):null}),gs(_,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:x,baseline:d});let b=o("labelBound"),R=o("labelOverlap");return R=R||b?{separation:o("labelSeparation"),method:R,order:"datum.index",bound:b?{scale:u,orient:a,tolerance:b}:null}:void 0,p.align!==y&&(p.align=Tv(p.align,y)),p.baseline!==A&&(p.baseline=Tv(p.baseline,A)),Su({type:T3,role:rbt,style:L6,key:gl,from:n,encode:_,overlap:R},r)}function PCt(t,e,r,n){let i=Sa(t,e),s=t.orient,o=U$(s,-1,1),a,u,l={enter:a={opacity:Ut,anchor:Gi(i("titleAnchor",null)),align:{signal:yue}},update:u=Ke({},a,{opacity:yl,text:Gi(t.title)}),exit:{opacity:Ut}},c={signal:`lerp(range("${t.scale}"), ${k$(0,1,.5)})`};return u.x=Qi(s,c),u.y=I0(s,c),a.angle=Qi(s,Ut,DCt(o,90)),a.baseline=Qi(s,Ywe(s,G2,P0),{value:G2}),u.angle=a.angle,u.baseline=a.baseline,gs(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),kCt(i,s,l,r),l.update.align=Tv(l.update.align,a.align),l.update.angle=Tv(l.update.angle,a.angle),l.update.baseline=Tv(l.update.baseline,a.baseline),Su({type:T3,role:ibt,style:pue,from:n,encode:l},r)}function kCt(t,e,r,n){let i=(a,u)=>a!=null?(r.update[u]=Tv(Gi(a),r.update[u]),!1):!_v(u,n),s=i(t("titleX"),"x"),o=i(t("titleY"),"y");r.enter.auto=o===s?Gi(o):Qi(e,Gi(o),Gi(s))}function BCt(t,e){let r=NCt(t,e),n=t.encode||{},i=n.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Sa(t,r),l=ITt(u),c={scale:t.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:t.title!=null},f=Qe(e.add(M0({},[c]))),x=Qe(e.add(qbt({scale:e.scaleRef(t.scale),extra:e.property(l.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),d=[],h;return c.grid&&d.push(wCt(t,r,n.grid,x,l)),c.ticks&&(h=u("tickSize"),d.push(ICt(t,r,n.ticks,x,h,l))),c.labels&&(h=c.ticks?h:0,d.push(MCt(t,r,n.labels,x,h,l))),c.domain&&d.push(FCt(t,r,n.domain,f)),c.title&&d.push(PCt(t,r,n.title,f)),q$(w6({role:Z5t,from:f,encode:Rv(qCt(u,t),i,I6),marks:d,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),e)}function qCt(t,e){let r={enter:{},update:{}};return gs(r,{orient:t("orient"),offset:t("offset")||0,position:L0(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${e.scale}")))`},translate:t("translate"),format:e.format,formatType:e.formatType}),r}function Xwe(t,e,r){let n=le(t.signals),i=le(t.scales);return r||n.forEach(s=>Dwe(s,e)),le(t.projections).forEach(s=>gTt(s,e)),i.forEach(s=>sTt(s,e)),le(t.data).forEach(s=>ACt(s,e)),i.forEach(s=>oTt(s,e)),(r||n).forEach(s=>Bbt(s,e)),le(t.axes).forEach(s=>BCt(s,e)),le(t.marks).forEach(s=>q$(s,e)),le(t.legends).forEach(s=>uCt(s,e)),t.title&&pCt(t.title,e),e.parseLambdas(),e}var UCt=t=>Rv({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);function $Ct(t,e){let r=e.config,n=Qe(e.root=e.add(F$())),i=jCt(t,r);i.forEach(l=>Dwe(l,e)),e.description=t.description||r.description,e.eventConfig=r.events,e.legends=e.objectProperty(r.legend&&r.legend.layout),e.locale=r.locale;let s=e.add(M0()),o=e.add(wwe(Owe(UCt(t.encode),P$,cue,t.style,e,{pulse:Qe(s)}))),a=e.add(Mwe({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:n,pulse:Qe(o)}));e.operators.pop(),e.pushState(Qe(o),Qe(a),null),Xwe(t,e,i),e.operators.push(a);let u=e.add(Fwe({mark:n,pulse:Qe(a)}));return u=e.add(Iwe({pulse:Qe(u)})),u=e.add(b3({pulse:Qe(u)})),e.addData("root",new _3(e,s,s,u)),e}function D6(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function jCt(t,e){let r=o=>L0(t[o],e[o]),n=[D6("background",r("background")),D6("autosize",K5t(r("autosize"))),D6("padding",J5t(r("padding"))),D6("width",r("width")||0),D6("height",r("height")||0)],i=n.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return le(t.signals).forEach(o=>{Fe(i,o.name)?o=Ke(i[o.name],o):n.push(o),s[o.name]=o}),le(e.signals).forEach(o=>{!Fe(s,o.name)&&!Fe(i,o.name)&&n.push(o)}),n}function Jwe(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function _we(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}Jwe.prototype=_we.prototype={parse(t){return Xwe(t,this)},fork(){return new _we(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id}),t.refs=null),t},proxy(t){let e=t instanceof rue?Qe(t):t;return this.add(Zbt({value:e}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,e;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function r(n,i,s){let o,a;n&&(o=n.data||(n.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(t in this.data){e=this.data[t],r(e.input,t,"input"),r(e.output,t,"output"),r(e.values,t,"values");for(let n in e.index)r(e.index[n],t,"index:"+n)}return this},pushState(t,e,r){this._encode.push(Qe(this.add(b3({pulse:t})))),this._parent.push(e),this._lookup.push(r?Qe(this.proxy(r)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return xt(this._parent)},encode(){return xt(this._encode)},lookup(){return xt(this._lookup)},markpath(){let t=this._markpath;return++t[t.length-1]},fieldRef(t,e){if(he(t))return N6(t,e);t.signal||W("Unsupported field reference: "+fe(t));let r=t.signal,n=this.field[r];if(!n){let i={name:this.signalRef(r)};e&&(i.as=e),this.field[r]=n=Qe(this.add(Hbt(i)))}return n},compareRef(t){let e=!1,r=s=>fi(s)?(e=!0,this.signalRef(s.signal)):Obt(s)?(e=!0,this.exprRef(s.expr)):s,n=le(t.field).map(r),i=le(t.order).map(r);return e?Qe(this.add(lwe({fields:n,orders:i}))):awe(n,i)},keyRef(t,e){let r=!1,n=s=>fi(s)?(r=!0,Qe(i[s.signal])):s,i=this.signals;return t=le(t).map(n),r?Qe(this.add(zbt({fields:t,flat:e}))):bbt(t,e)},sortRef(t){if(!t)return t;let e=I$(t.op,t.field),r=t.order||Tbt;return r.signal?Qe(this.add(lwe({fields:e,orders:this.signalRef(r.signal)}))):awe(e,r)},event(t,e){let r=t+":"+e;if(!this.events[r]){let n=this.id();this.streams.push({id:n,source:t,type:e}),this.events[r]=n}return this.events[r]},hasOwnSignal(t){return Fe(this.signals,t)},addSignal(t,e){this.hasOwnSignal(t)&&W("Duplicate signal name: "+fe(t));let r=e instanceof rue?e:this.add(F$(e));return this.signals[t]=r},getSignal(t){return this.signals[t]||W("Unrecognized signal name: "+fe(t)),this.signals[t]},signalRef(t){return this.signals[t]?Qe(this.signals[t]):(Fe(this.lambdas,t)||(this.lambdas[t]=this.add(F$(null))),Qe(this.lambdas[t]))},parseLambdas(){let t=Object.keys(this.lambdas);for(let e=0,r=t.length;e<r;++e){let n=t[e],i=w0(n,this),s=this.lambdas[n];s.params=i.$params,s.update=i.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return!t||!Se(t)?t:this.signalRef(t.signal||_ue(t))},exprRef(t,e){let r={expr:w0(t,this)};return e&&(r.expr.$name=e),Qe(this.add($bt(r)))},addBinding(t,e){this.bindings||W("Nested signals do not support binding: "+fe(t)),this.bindings.push(Ke({signal:t},e))},addScaleProj(t,e){Fe(this.scales,t)&&W("Duplicate scale or projection name: "+fe(t)),this.scales[t]=this.add(e)},addScale(t,e){this.addScaleProj(t,tTt(e))},addProjection(t,e){this.addScaleProj(t,Jbt(e))},getScale(t){return this.scales[t]||W("Unrecognized scale name: "+fe(t)),this.scales[t]},scaleRef(t){return Qe(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,e){return Fe(this.data,t)&&W("Duplicate data set name: "+fe(t)),this.data[t]=e},getData(t){return this.data[t]||W("Undefined data set name: "+fe(t)),this.data[t]},addDataPipeline(t,e){return Fe(this.data,t)&&W("Duplicate data set name: "+fe(t)),this.addData(t,_3.fromEntries(this,e))}};function _ue(t){return(j(t)?HCt:zCt)(t)}function HCt(t){let e=t.length,r="[";for(let n=0;n<e;++n){let i=t[n];r+=(n>0?",":"")+(Se(i)?i.signal||_ue(i):fe(i))}return r+"]"}function zCt(t){let e="{",r=0,n,i;for(n in t)i=t[n],e+=(++r>1?",":"")+fe(n)+":"+(Se(i)?i.signal||_ue(i):fe(i));return e+"}"}function GCt(){let t="sans-serif",n="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:n},area:{fill:n},image:null,line:{stroke:n,strokeWidth:2},path:{stroke:n},rect:{fill:n},rule:{stroke:i},shape:{stroke:n},symbol:{fill:n,size:64},text:{fill:i,font:t,fontSize:11},trail:{fill:n,size:2},style:{"guide-label":{fill:i,font:t,fontSize:10},"guide-title":{fill:i,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function bue(t,e,r){return Se(t)||W("Input Vega specification must be an object."),e=e4(GCt(),e,t.config),$Ct(t,new Jwe(e,r)).toRuntime()}Ke(f2,Mre,Iie,qie,noe,goe,sae,Woe,lae,xae,pae,yae);var Nv={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Zwe(t){return t==="quantitative"||t==="temporal"}function $$(t){return t==="ordinal"||t==="nominal"}var El=Nv.quantitative,M6=Nv.ordinal,Cf=Nv.temporal,P6=Nv.nominal,k0=Nv.geojson,zur=H(Nv);function e7e(t){if(t)switch(t=t.toLowerCase(),t){case"q":case El:return"quantitative";case"t":case Cf:return"temporal";case"o":case M6:return"ordinal";case"n":case P6:return"nominal";case k0:return"geojson"}}var VCt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Vi={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},k6={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},Xur=H(k6);function t7e(t,e){let r=k6[t],n=k6[e];return r===n||r==="ordinal-position"&&n==="time"||n==="ordinal-position"&&r==="time"}var WCt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Tue(t){return WCt[t]}var r7e=new Set(["linear","log","pow","sqrt","symlog"]),n7e=new Set([...r7e,"time","utc"]);function Cue(t){return r7e.has(t)}var i7e=new Set(["quantile","quantize","threshold"]),YCt=new Set([...n7e,...i7e,"sequential","identity"]),KCt=new Set(["ordinal","bin-ordinal","point","band"]);function or(t){return KCt.has(t)}function yn(t){return YCt.has(t)}function va(t){return n7e.has(t)}function hd(t){return i7e.has(t)}var s7e={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function o7e(t){return!he(t)&&!!t.name}function Rue(t){return t?.param}function a7e(t){return t&&t.unionWith}function u7e(t){return Se(t)&&"field"in t}var Oue={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},Jur=H(Oue),{type:Zur,domain:elr,range:tlr,rangeMax:rlr,rangeMin:nlr,scheme:ilr}=Oue,XCt=VCt(Oue,["type","domain","range","rangeMax","rangeMin","scheme"]),l7e=H(XCt);function B6(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(t);case"bins":return!["point","band","identity","ordinal"].includes(t);case"round":return va(t)||t==="band"||t==="point";case"padding":case"rangeMin":case"rangeMax":return va(t)||["point","band"].includes(t);case"paddingOuter":case"align":return["point","band"].includes(t);case"paddingInner":return t==="band";case"domainMax":case"domainMid":case"domainMin":case"clamp":return va(t);case"nice":return va(t)||t==="quantize"||t==="threshold";case"exponent":return t==="pow";case"base":return t==="log";case"constant":return t==="symlog";case"zero":return yn(t)&&!We(["log","time","utc","threshold","quantile"],t)}}function j$(t,e){switch(e){case"interpolate":case"scheme":case"domainMid":return $x(t)?void 0:z.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function c7e(t,e){return We([M6,P6],e)?t===void 0||or(t):e===Cf?We([Vi.TIME,Vi.UTC,void 0],t):e===El?Cue(t)||hd(t)||t===void 0:!0}function f7e(t,e,r=!1){if(!Hs(t))return!1;switch(t){case Ht:case Cr:case Ju:case rf:case So:case la:return va(e)||e==="band"?!0:e==="point"?!r:!1;case ca:case uu:case bo:case ou:case au:case l0:return va(e)||hd(e)||We(["band","point","ordinal"],e);case hn:case Us:case $s:return e!=="band";case lu:case tn:return e==="ordinal"||hd(e)}}var ko={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Due=ko.arc,C3=ko.area,R3=ko.bar,x7e=ko.image,O3=ko.line,Fv=ko.point,d7e=ko.rect,wv=ko.rule,H$=ko.text,q6=ko.tick,h7e=ko.trail,U6=ko.circle,$6=ko.square,z$=ko.geoshape;function ro(t){return["line","area","trail"].includes(t)}function Nue(t){return["rect","bar","image","arc"].includes(t)}var p7e=new Set(H(ko));function ys(t){return t.type}var JCt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],ZCt=["fill","fillOpacity"],m7e=[...JCt,...ZCt],eRt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Fue=H(eRt),g7e={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},y7e={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},tRt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},G$=H(tRt);function pd(t){return t&&t.band!=null}var E7e={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},A7e=5,S7e={binSpacing:1,continuousBandSize:A7e,timeUnitBandPosition:.5},v7e={binSpacing:0,continuousBandSize:A7e,timeUnitBandPosition:.5},_7e={thickness:1};function b7e(t){return ys(t)?t.type:t}function Iv(t){let{channel:e,channelDef:r,markDef:n,scale:i,config:s}=t,o=H6(t);return se(r)&&!$k(r.aggregate)&&i&&va(i.get("type"))?nRt({fieldDef:r,channel:e,markDef:n,ref:o,config:s}):o}function nRt({fieldDef:t,channel:e,markDef:r,ref:n,config:i}){return ro(r.type)?n:st("invalid",r,i)===null?[iRt(t,e),n]:n}function iRt(t,e){let r=j6(t,!0),i=cu(e)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:r},i)}function j6(t,e=!0){return eR(he(t)?t:ue(t,{expr:"datum"}),!e)}function T7e(t){let{datum:e}=t;return tl(e)?Jp(e):`${jt(e)}`}function Rf(t,e,r,n){let i={};if(e&&(i.scale=e),no(t)){let{datum:s}=t;tl(s)?i.signal=Jp(s):be(s)?i.signal=s.signal:Xp(s)?i.signal=s.expr:i.value=s}else i.field=ue(t,r);if(n){let{offset:s,band:o}=n;s&&(i.offset=s),o&&(i.band=o)}return i}function Lv({scaleName:t,fieldOrDatumDef:e,fieldOrDatumDef2:r,offset:n,startSuffix:i,bandPosition:s=.5}){let o=0<s&&s<1?"datum":void 0,a=ue(e,{expr:o,suffix:i}),u=r!==void 0?ue(r,{expr:o}):ue(e,{suffix:"end",expr:o}),l={};if(s===0||s===1){l.scale=t;let c=s===0?a:u;l.field=c}else{let c=be(s)?`${s.signal} * ${a} + (1-${s.signal}) * ${u}`:`${s} * ${a} + ${1-s} * ${u}`;l.signal=`scale("${t}", ${c})`}return n&&(l.offset=n),l}function H6({channel:t,channelDef:e,channel2Def:r,markDef:n,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){var f;if(e){if(Ve(e)){let x=o?.get("type");if(xi(e)){c??(c=wue({fieldDef:e,fieldDef2:r,markDef:n,config:i}));let{bin:d,timeUnit:h,type:p}=e;if(St(d)||c&&h&&p===Cf)return a?.impute?Rf(e,s,{binSuffix:"mid"},{offset:u}):c&&!or(x)?Lv({scaleName:s,fieldOrDatumDef:e,bandPosition:c,offset:u}):Rf(e,s,Of(e,t)?{binSuffix:"range"}:{},{offset:u});if(qr(d)){if(se(r))return Lv({scaleName:s,fieldOrDatumDef:e,fieldOrDatumDef2:r,bandPosition:c,offset:u});{let m=t===Ht?ua:su;K(z.channelRequiredForBinned(m))}}}return Rf(e,s,or(x)?{binSuffix:"range"}:{},{offset:u,band:x==="band"?(f=c??e.bandPosition)!==null&&f!==void 0?f:.5:void 0})}else if(Kn(e)){let x=e.value,d=u?{offset:u}:{};return Object.assign(Object.assign({},D3(t,x)),d)}}return Je(l)&&(l=l()),l&&Object.assign(Object.assign({},l),u?{offset:u}:{})}function D3(t,e){return We(["x","x2"],t)&&e==="width"?{field:{group:"width"}}:We(["y","y2"],t)&&e==="height"?{field:{group:"height"}}:vt(e)}function Df(t){return t&&t!=="number"&&t!=="time"}function R7e(t,e,r){return`${t}(${e}${r?`, ${jt(r)}`:""})`}var sRt=" \u2013 ";function Mv({fieldOrDatumDef:t,format:e,formatType:r,expr:n,normalizeStack:i,config:s}){var o,a;if(Df(r))return G6({fieldOrDatumDef:t,format:e,formatType:r,expr:n,config:s});let u=O7e(t,n,i);if(md(t)){let l=aRt(u,se(t)?(o=nn(t.timeUnit))===null||o===void 0?void 0:o.unit:void 0,e,s.timeFormat,Al(t)&&((a=t.scale)===null||a===void 0?void 0:a.type)===Vi.UTC);return l?{signal:l}:void 0}if(e=D7e(z6(t),e,s),se(t)&&St(t.bin)){let l=ue(t,{expr:n,binSuffix:"end"});return{signal:Pv(u,l,e,r,s)}}else return e||z6(t)==="quantitative"?{signal:`${N7e(u,e)}`}:{signal:`isValid(${u}) ? ${u} : ""+${u}`}}function O7e(t,e,r){return se(t)?r?`${ue(t,{expr:e,suffix:"end"})}-${ue(t,{expr:e,suffix:"start"})}`:ue(t,{expr:e}):T7e(t)}function G6({fieldOrDatumDef:t,format:e,formatType:r,expr:n,normalizeStack:i,config:s,field:o}){if(o??(o=O7e(t,n,i)),se(t)&&St(t.bin)){let a=ue(t,{expr:n,binSuffix:"end"});return{signal:Pv(o,a,e,r,s)}}return{signal:R7e(r,o,e)}}function V$(t,e,r,n,i,s){var o;if(!Df(n)){if(md(t)){let a=se(t)?(o=nn(t.timeUnit))===null||o===void 0?void 0:o.unit:void 0;return oRt(r,a,i,s)}return D7e(e,r,i)}}function W$(t,e,r){if(t&&(be(t)||t==="number"||t==="time"))return t;if(md(e)&&r!=="time"&&r!=="utc")return"time"}function D7e(t,e,r){if(he(e))return e;if(t===El)return r.numberFormat}function oRt(t,e,r,n){return t||(e?{signal:Wee(e)}:n?void 0:r.timeFormat)}function N7e(t,e){return`format(${t}, "${e||""}")`}function C7e(t,e,r,n){var i;return Df(r)?R7e(r,t,e):N7e(t,(i=he(e)?e:void 0)!==null&&i!==void 0?i:n.numberFormat)}function Pv(t,e,r,n,i){let s=C7e(t,r,n,i),o=C7e(e,r,n,i);return`${eR(t,!1)} ? "null" : ${s} + "${sRt}" + ${o}`}function aRt(t,e,r,n,i){return!e||r?(r=he(r)?r:n,`${i?"utc":"time"}Format(${t}, '${r}')`):Z_e(e,t,i)}var Q2="min",uRt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Lue(t){return t in uRt}function Y$(t){return!!t&&!!t.encoding}function Wi(t){return!!t&&(t.op==="count"||!!t.field)}function K$(t){return!!t&&j(t)}function Nf(t){return"row"in t||"column"in t}function X$(t){return!!t&&"header"in t}function gd(t){return"facet"in t}var Iue=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function F7e(t){return t.param}function w7e(t){return t&&!he(t)&&"repeat"in t}function Mue(t){let{field:e,timeUnit:r,bin:n,aggregate:i}=t;return Object.assign(Object.assign(Object.assign(Object.assign({},r?{timeUnit:r}:{}),n?{bin:n}:{}),i?{aggregate:i}:{}),{field:e})}function Z$(t){return"sort"in t}function wue({fieldDef:t,fieldDef2:e,markDef:r,config:n}){if(Ve(t)&&t.bandPosition!==void 0)return t.bandPosition;if(se(t)){let{timeUnit:i,bin:s}=t;if(i&&!e)return Nue(r.type)?0:nf("timeUnitBandPosition",r,n);if(St(s))return .5}}function Pue({channel:t,fieldDef:e,fieldDef2:r,markDef:n,config:i,scaleType:s,useVlSizeChannel:o}){var a,u,l;let c=rn(t),f=st(o?"size":c,n,i,{vgChannel:c});if(f!==void 0)return f;if(se(e)){let{timeUnit:x,bin:d}=e;if(x&&!r)return{band:nf("timeUnitBandSize",n,i)};if(St(d)&&!or(s))return{band:1}}if(Nue(n.type))return s?or(s)?((a=i[n.type])===null||a===void 0?void 0:a.discreteBandSize)||{band:1}:(u=i[n.type])===null||u===void 0?void 0:u.continuousBandSize:(l=i[n.type])===null||l===void 0?void 0:l.discreteBandSize}function ej(t,e,r,n){return St(t.bin)||t.timeUnit&&xi(t)&&t.type==="temporal"?wue({fieldDef:t,fieldDef2:e,markDef:r,config:n})!==void 0:!1}function V2(t){return t&&"condition"in t}function Bv(t){let e=t&&t.condition;return!!e&&!j(e)&&se(e)}function W2(t){let e=t&&t.condition;return!!e&&!j(e)&&Ve(e)}function L7e(t){let e=t&&t.condition;return!!e&&(j(e)||Kn(e))}function se(t){return t&&(!!t.field||t.aggregate==="count")}function z6(t){return t&&t.type}function no(t){return t&&"datum"in t}function _a(t){return xi(t)&&!Q6(t)||tj(t)}function tj(t){return no(t)&&Ct(t.datum)}function Ve(t){return se(t)||no(t)}function xi(t){return t&&("field"in t||t.aggregate==="count")&&"type"in t}function Kn(t){return t&&"value"in t&&"value"in t}function Al(t){return t&&("scale"in t||"sort"in t)}function rj(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function I7e(t){return t&&"legend"in t}function M7e(t){return t&&("format"in t||"formatType"in t)}function P7e(t){return Hn(t,["legend","axis","header","scale"])}function lRt(t){return"op"in t}function ue(t,e={}){var r,n,i;let s=t.field,o=e.prefix,a=e.suffix,u="";if(fRt(t))s=c_e("count");else{let l;if(!e.nofn)if(lRt(t))l=t.op;else{let{bin:c,aggregate:f,timeUnit:x}=t;St(c)?(l=jk(c),a=((r=e.binSuffix)!==null&&r!==void 0?r:"")+((n=e.suffix)!==null&&n!==void 0?n:"")):f?el(f)?(u=`["${s}"]`,s=`argmax_${f.argmax}`):fu(f)?(u=`["${s}"]`,s=`argmin_${f.argmin}`):l=String(f):x&&(l=e5e(x),a=(!["range","mid"].includes(e.binSuffix)&&e.binSuffix||"")+((i=e.suffix)!==null&&i!==void 0?i:""))}l&&(s=s?`${l}_${s}`:l)}return a&&(s=`${s}_${a}`),o&&(s=`${o}_${s}`),e.forAs?Dk(s):e.expr?u_e(s,e.expr)+u:oi(s)+u}function Q6(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return se(t)&&!!t.bin;case"temporal":return!1}throw new Error(z.invalidFieldType(t.type))}function cRt(t){var e;return Al(t)&&hd((e=t.scale)===null||e===void 0?void 0:e.type)}function fRt(t){return t.aggregate==="count"}function xRt(t,e){var r;let{field:n,bin:i,timeUnit:s,aggregate:o}=t;if(o==="count")return e.countTitle;if(St(i))return`${n} (binned)`;if(s){let a=(r=nn(s))===null||r===void 0?void 0:r.unit;if(a)return`${n} (${ZC(a).join("-")})`}else if(o)return el(o)?`${n} for max ${o.argmax}`:fu(o)?`${n} for min ${o.argmin}`:`${yg(o)} of ${n}`;return n}function dRt(t){let{aggregate:e,bin:r,timeUnit:n,field:i}=t;if(el(e))return`${i} for argmax(${e.argmax})`;if(fu(e))return`${i} for argmin(${e.argmin})`;let s=nn(n),o=e||s?.unit||s?.maxbins&&"timeunit"||St(r)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}var k7e=(t,e)=>{switch(e.fieldTitle){case"plain":return t.field;case"functional":return dRt(t);default:return xRt(t,e)}},B7e=k7e;function kue(t){B7e=t}function q7e(){kue(k7e)}function Ff(t,e,{allowDisabling:r,includeDefault:n=!0}){var i,s;let o=(i=nj(t))===null||i===void 0?void 0:i.title;if(!se(t))return o??t.title;let a=t,u=n?V6(a,e):void 0;return r?It(o,a.title,u):(s=o??a.title)!==null&&s!==void 0?s:u}function nj(t){if(rj(t)&&t.axis)return t.axis;if(I7e(t)&&t.legend)return t.legend;if(X$(t)&&t.header)return t.header}function V6(t,e){return B7e(t,e)}function qv(t){var e;if(M7e(t)){let{format:r,formatType:n}=t;return{format:r,formatType:n}}else{let r=(e=nj(t))!==null&&e!==void 0?e:{},{format:n,formatType:i}=r;return{format:n,formatType:i}}}function hRt(t,e){var r;switch(e){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Z$(t)&&j(t.sort))return"ordinal";let{aggregate:n,bin:i,timeUnit:s}=t;if(s)return"temporal";if(i||n&&!el(n)&&!fu(n))return"quantitative";if(Al(t)&&(!((r=t.scale)===null||r===void 0)&&r.type))switch(k6[t.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Es(t){if(se(t))return t;if(Bv(t))return t.condition}function er(t){if(Ve(t))return t;if(W2(t))return t.condition}function Bue(t,e,r,n={}){if(he(t)||Ct(t)||o0(t)){let i=he(t)?"string":Ct(t)?"number":"boolean";return K(z.primitiveChannelDef(e,i,t)),{value:t}}return Ve(t)?J$(t,e,r,n):W2(t)?Object.assign(Object.assign({},t),{condition:J$(t.condition,e,r,n)}):t}function J$(t,e,r,n){if(M7e(t)){let{format:i,formatType:s}=t,o=Iue(t,["format","formatType"]);if(Df(s)&&!r.customFormatTypes)return K(z.customFormatTypeNotAllowed(e)),J$(o,e,r,n)}else{let i=rj(t)?"axis":I7e(t)?"legend":X$(t)?"header":null;if(i&&t[i]){let s=t[i],{format:o,formatType:a}=s,u=Iue(s,["format","formatType"]);if(Df(a)&&!r.customFormatTypes)return K(z.customFormatTypeNotAllowed(e)),J$(Object.assign(Object.assign({},t),{[i]:u}),e,r,n)}}return se(t)?W6(t,e,n):pRt(t)}function pRt(t){let e=t.type;if(e)return t;let{datum:r}=t;return e=Ct(r)?"quantitative":he(r)?"nominal":tl(r)?"temporal":void 0,Object.assign(Object.assign({},t),{type:e})}function W6(t,e,{compositeMark:r=!1}={}){let{aggregate:n,timeUnit:i,bin:s,field:o}=t,a=Object.assign({},t);if(!r&&n&&!u4(n)&&!el(n)&&!fu(n)&&(K(z.invalidAggregate(n)),delete a.aggregate),i&&(a.timeUnit=nn(i)),o&&(a.field=`${o}`),St(s)&&(a.bin=c4(s,e)),qr(s)&&!Ar(e)&&K(z.channelShouldNotBeUsedForBinned(e)),xi(a)){let{type:u}=a,l=e7e(u);u!==l&&(a.type=l),u!=="quantitative"&&$k(n)&&(K(z.invalidFieldTypeForCountAggregate(u,n)),a.type="quantitative")}else if(!Mk(e)){let u=hRt(a,e);a.type=u}if(xi(a)){let{compatible:u,warning:l}=mRt(a,e)||{};u===!1&&K(l)}if(Z$(a)&&he(a.sort)){let{sort:u}=a;if(Lue(u))return Object.assign(Object.assign({},a),{sort:{encoding:u}});let l=u.substr(1);if(u.charAt(0)==="-"&&Lue(l))return Object.assign(Object.assign({},a),{sort:{encoding:l,order:"descending"}})}if(X$(a)){let{header:u}=a;if(u){let{orient:l}=u,c=Iue(u,["orient"]);if(l)return Object.assign(Object.assign({},a),{header:Object.assign(Object.assign({},c),{labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l})})}}return a}function c4(t,e){return o0(t)?{maxbins:qee(e)}:t==="binned"?{binned:!0}:!t.maxbins&&!t.step?Object.assign(Object.assign({},t),{maxbins:qee(e)}):t}var kv={compatible:!0};function mRt(t,e){let r=t.type;if(r==="geojson"&&e!=="shape")return{compatible:!1,warning:`Channel ${e} should not be used with a geojson data.`};switch(e){case oa:case aa:case n4:return Q6(t)?kv:{compatible:!1,warning:z.channelShouldBeDiscrete(e)};case Ht:case Cr:case Ju:case rf:case hn:case Us:case $s:case Ag:case vg:case i4:case Ux:case s4:case o4:case l0:case So:case la:case a4:return kv;case _o:case fs:case vo:case qs:return r!==El?{compatible:!1,warning:`Channel ${e} should be used with a quantitative field only, not ${t.type} field.`}:kv;case bo:case ou:case au:case uu:case ca:case u0:case a0:case ua:case su:return r==="nominal"&&!t.sort?{compatible:!1,warning:`Channel ${e} should not be used with an unsorted discrete field.`}:kv;case tn:case lu:return!Q6(t)&&!cRt(t)?{compatible:!1,warning:z.channelShouldBeDiscreteOrDiscretizing(e)}:kv;case Sg:return t.type==="nominal"&&!("sort"in t)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:kv}}function md(t){let{formatType:e}=qv(t);return e==="time"||!e&&gRt(t)}function gRt(t){return t&&(t.type==="temporal"||se(t)&&!!t.timeUnit)}function _g(t,{timeUnit:e,type:r,wrapTime:n,undefinedIfExprNotRequired:i}){var s;let o=e&&((s=nn(e))===null||s===void 0?void 0:s.unit),a=o||r==="temporal",u;return Xp(t)?u=t.expr:be(t)?u=t.signal:tl(t)?(a=!0,u=Jp(t)):(he(t)||Ct(t))&&a&&(u=`datetime(${jt(t)})`,K_e(o)&&(Ct(t)&&t<1e4||he(t)&&isNaN(Date.parse(t)))&&(u=Jp({[o]:t}))),u?n&&a?`time(${u})`:u:i?void 0:jt(t)}function ij(t,e){let{type:r}=t;return e.map(n=>{let i=_g(n,{timeUnit:se(t)?t.timeUnit:void 0,type:r,undefinedIfExprNotRequired:!0});return i!==void 0?{signal:i}:n})}function Of(t,e){return St(t.bin)?Hs(e)&&["ordinal","nominal"].includes(t.type):(console.warn("Only call this method for binned field defs."),!1)}var que={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function yd(t){return t&&t.condition}var sj=["domain","grid","labels","ticks","title"],U7e={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Uue={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},$7e=Object.assign(Object.assign({},Uue),{style:1,labelExpr:1,encoding:1});function $ue(t){return!!$7e[t]}var Jlr=H($7e),ERt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},jue=H(ERt);function di(t){return"mark"in t}var wf=class{constructor(e,r){this.name=e,this.run=r}hasMatchingType(e){return di(e)?b7e(e.mark)===this.name:!1}};var ARt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function Lf(t,e){let r=t&&t[e];return r?j(r)?qx(r,n=>!!n.field):se(r)||Bv(r):!1}function Hue(t,e){let r=t&&t[e];return r?j(r)?qx(r,n=>!!n.field):se(r)||no(r)||W2(r):!1}function Y6(t,e){if(Ar(e)){let r=t[e];if((se(r)||no(r))&&$$(r.type)){let n=Pk(e);return Hue(t,n)}}return!1}function Uv(t){return qx(m_e,e=>{if(Lf(t,e)){let r=t[e];if(j(r))return qx(r,n=>!!n.aggregate);{let n=Es(r);return n&&!!n.aggregate}}return!1})}function oj(t,e){let r=[],n=[],i=[],s=[],o={};return K6(t,(a,u)=>{if(se(a)){let{field:l,aggregate:c,bin:f,timeUnit:x}=a,d=ARt(a,["field","aggregate","bin","timeUnit"]);if(c||x||f){let h=nj(a),p=h?.title,m=ue(a,{forAs:!0}),g=Object.assign(Object.assign(Object.assign({},p?[]:{title:Ff(a,e,{allowDisabling:!0})}),d),{field:m});if(c){let y;if(el(c)?(y="argmax",m=ue({op:"argmax",field:c.argmax},{forAs:!0}),g.field=`${m}.${l}`):fu(c)?(y="argmin",m=ue({op:"argmin",field:c.argmin},{forAs:!0}),g.field=`${m}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(y=c),y){let A={op:y,as:m};l&&(A.field=l),s.push(A)}}else if(r.push(m),xi(a)&&St(f)){if(n.push({bin:f,field:l,as:m}),r.push(ue(a,{binSuffix:"end"})),Of(a,u)&&r.push(ue(a,{binSuffix:"range"})),Ar(u)){let y={field:`${m}_end`};o[`${u}2`]=y}g.bin="binned",Mk(u)||(g.type=El)}else if(x){i.push({timeUnit:x,field:l,as:m});let y=xi(a)&&a.type!==Cf&&"time";y&&(u===Ag||u===Ux?g.formatType=y:C_e(u)?g.legend=Object.assign({formatType:y},g.legend):Ar(u)&&(g.axis=Object.assign({formatType:y},g.axis)))}o[u]=g}else r.push(l),o[u]=t[u]}else o[u]=t[u]}),{bins:n,timeUnits:i,aggregate:s,groupby:r,encoding:o}}function SRt(t,e,r){let n=D_e(e,r);if(n){if(n==="binned"){let i=t[e===ua?Ht:Cr];return!!(se(i)&&se(t[e])&&qr(i.bin))}}else return!1;return!0}function j7e(t,e,r,n){let i={};for(let s of H(t))Ik(s)||K(z.invalidEncodingChannel(s));for(let s of S_e){if(!t[s])continue;let o=t[s];if(c0(s)){let a=kk(s),u=i[a];if(se(u)){if(Zwe(u.type)&&se(o)){K(z.offsetNestedInsideContinuousPositionScaleDropped(a));continue}}else s=a,K(z.replaceOffsetWithMainChannel(a))}if(s==="angle"&&e==="arc"&&!t.theta&&(K(z.REPLACE_ANGLE_WITH_THETA),s=So),!SRt(t,s,e)){K(z.incompatibleChannel(s,e));continue}if(s===ca&&e==="line"){let a=Es(t[s]);if(a?.aggregate){K(z.LINE_WITH_VARYING_SIZE);continue}}if(s===hn&&(r?"fill"in t:"stroke"in t)){K(z.droppingColor("encoding",{fill:"fill"in t,stroke:"stroke"in t}));continue}if(s===vg||s===Sg&&!j(o)&&!Kn(o)||s===Ux&&j(o))o&&(i[s]=le(o).reduce((a,u)=>(se(u)?a.push(W6(u,s)):K(z.emptyFieldDef(u,s)),a),[]));else{if(s===Ux&&o===null)i[s]=null;else if(!se(o)&&!no(o)&&!Kn(o)&&!V2(o)&&!be(o)){K(z.emptyFieldDef(o,s));continue}i[s]=Bue(o,s,n)}}return i}function Y2(t,e){let r={};for(let n of H(t)){let i=Bue(t[n],n,e,{compositeMark:!0});r[n]=i}return r}function H7e(t){let e=[];for(let r of H(t))if(Lf(t,r)){let n=t[r],i=le(n);for(let s of i)se(s)?e.push(s):Bv(s)&&e.push(s.condition)}return e}function K6(t,e,r){if(t)for(let n of H(t)){let i=t[n];if(j(i))for(let s of i)e.call(r,s,n);else e.call(r,i,n)}}function z7e(t,e,r,n){return t?H(t).reduce((i,s)=>{let o=t[s];return j(o)?o.reduce((a,u)=>e.call(n,a,u,s),i):e.call(n,i,o,s)},r):r}function aj(t,e){return H(e).reduce((r,n)=>{switch(n){case Ht:case Cr:case s4:case a4:case o4:case ua:case su:case Ju:case rf:case So:case u0:case la:case a0:case vo:case _o:case qs:case fs:case Ag:case tn:case l0:case Ux:return r;case Sg:if(t==="line"||t==="trail")return r;case vg:case i4:{let i=e[n];if(j(i)||se(i))for(let s of le(i))s.aggregate||r.push(ue(s,{}));return r}case ca:if(t==="trail")return r;case hn:case Us:case $s:case bo:case ou:case au:case lu:case uu:{let i=Es(e[n]);return i&&!i.aggregate&&r.push(ue(i,{})),r}}},[])}var G7e=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function Q7e(t){let{tooltip:e}=t,r=G7e(t,["tooltip"]);if(!e)return{filteredEncoding:r};let n,i;if(j(e)){for(let s of e)s.aggregate?(n||(n=[]),n.push(s)):(i||(i=[]),i.push(s));n&&(r.tooltip=n)}else e.aggregate?r.tooltip=e:i=e;return j(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:r}}function X6(t,e,r,n=!0){if("tooltip"in r)return{tooltip:r.tooltip};let i=t.map(({fieldPrefix:o,titlePrefix:a})=>{let u=n?` of ${lj(e)}`:"";return{field:o+e.field,type:e.type,title:be(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=H7e(r).map(P7e);return{tooltip:[...i,...Ao(s,$e)]}}function lj(t){let{title:e,field:r}=t;return It(e,r)}function $v(t,e,r,n,i){let{scale:s,axis:o}=r;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{let x=lj(r);return zue(t,a,i,{mark:u,encoding:Object.assign(Object.assign(Object.assign({[e]:Object.assign(Object.assign(Object.assign({field:`${l}_${r.field}`,type:r.type},x!==void 0?{title:x}:{}),s!==void 0?{scale:s}:{}),o!==void 0?{axis:o}:{})},he(c)?{[`${e}2`]:{field:`${c}_${r.field}`}}:{}),n),f)})}}function zue(t,e,r,n){let{clip:i,color:s,opacity:o}=t,a=t.type;return t[e]||t[e]===void 0&&r[e]?[Object.assign(Object.assign({},n),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r[e]),i?{clip:i}:{}),s?{color:s}:{}),o?{opacity:o}:{}),ys(n.mark)?n.mark:{type:n.mark}),{style:`${a}-${e}`}),o0(t[e])?{}:t[e])})]:[]}function cj(t,e,r){let{encoding:n}=t,i=e==="vertical"?"y":"x",s=n[i],o=n[`${i}2`],a=n[`${i}Error`],u=n[`${i}Error2`];return{continuousAxisChannelDef:uj(s,r),continuousAxisChannelDef2:uj(o,r),continuousAxisChannelDefError:uj(a,r),continuousAxisChannelDefError2:uj(u,r),continuousAxis:i}}function uj(t,e){if(t?.aggregate){let{aggregate:r}=t,n=G7e(t,["aggregate"]);return r!==e&&K(z.errorBarContinuousAxisHasCustomizedAggregate(r,e)),n}else return t}function fj(t,e){let{mark:r,encoding:n}=t,{x:i,y:s}=n;if(ys(r)&&r.orient)return r.orient;if(_a(i)){if(_a(s)){let o=se(i)&&i.aggregate,a=se(s)&&s.aggregate;if(!o&&a===e)return"vertical";if(!a&&o===e)return"horizontal";if(o===e&&a===e)throw new Error("Both x and y cannot have aggregate");return md(s)&&!md(i)?"horizontal":"vertical"}return"horizontal"}else{if(_a(s))return"vertical";throw new Error(`Need a valid continuous axis for ${e}s`)}}var xj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},J6="boxplot",V7e=["box","median","outliers","rule","ticks"],W7e=new wf(J6,Gue);function Y7e(t){return Ct(t)?"tukey":t}function Gue(t,{config:e}){var r,n;t=Object.assign(Object.assign({},t),{encoding:Y2(t.encoding,e)});let{mark:i,encoding:s,params:o,projection:a}=t,u=xj(t,["mark","encoding","params","projection"]),l=ys(i)?i:{type:i};o&&K(z.selectionNotSupported("boxplot"));let c=(r=l.extent)!==null&&r!==void 0?r:e.boxplot.extent,f=st("size",l,e),x=Y7e(c),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:A,encodingWithoutContinuousAxis:S,ticksOrient:T,boxOrient:_,customTooltipWithoutAggregatedField:b}=_Rt(t,c,e),{color:R,size:O}=S,N=xj(S,["color","size"]),F=rt=>$v(l,g,m,rt,e.boxplot),$=F(N),q=F(S),X=F(Object.assign(Object.assign({},N),O?{size:O}:{})),P=X6([{fieldPrefix:x==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:x==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,S),te={type:"tick",color:"black",opacity:1,orient:T,invalid:null,aria:!1},me=x==="min-max"?P:X6([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,S),Ce=[...$({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:me}),...$({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:me}),...$({partName:"ticks",mark:te,positionPrefix:"lower_whisker",extraEncoding:me}),...$({partName:"ticks",mark:te,positionPrefix:"upper_whisker",extraEncoding:me})],Pe=[...x!=="tukey"?Ce:[],...q({partName:"box",mark:Object.assign(Object.assign({type:"bar"},f?{size:f}:{}),{orient:_,invalid:null,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:P}),...X({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},Se(e.boxplot.median)&&e.boxplot.median.color?{color:e.boxplot.median.color}:{}),f?{size:f}:{}),{orient:T,aria:!1}),positionPrefix:"mid_box",extraEncoding:P})];if(x==="min-max")return Object.assign(Object.assign({},u),{transform:((n=u.transform)!==null&&n!==void 0?n:[]).concat(p),layer:Pe});let ct=`datum["lower_box_${m.field}"]`,rr=`datum["upper_box_${m.field}"]`,Ir=`(${rr} - ${ct})`,En=`${ct} - ${c} * ${Ir}`,oo=`${rr} + ${c} * ${Ir}`,vr=`datum["${m.field}"]`,Q0={joinaggregate:K7e(m.field),groupby:y},L={transform:[{filter:`(${En} <= ${vr}) && (${vr} <= ${oo})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...A],groupby:y}],layer:Ce},{tooltip:I}=N,D=xj(N,["tooltip"]),{scale:ae,axis:w}=m,G=lj(m),k=Hn(w,["title"]),ie=zue(l,"outliers",e.boxplot,{transform:[{filter:`(${vr} < ${En}) || (${vr} > ${oo})`}],mark:"point",encoding:Object.assign(Object.assign(Object.assign({[g]:Object.assign(Object.assign(Object.assign({field:m.field,type:m.type},G!==void 0?{title:G}:{}),ae!==void 0?{scale:ae}:{}),mt(k)?{}:{axis:k})},D),R?{color:R}:{}),b?{tooltip:b}:{})})[0],ze,ge=[...d,...h,Q0];return ie?ze={transform:ge,layer:[ie,L]}:(ze=L,ze.transform.unshift(...ge)),Object.assign(Object.assign({},u),{layer:[ze,{transform:p,layer:Pe}]})}function K7e(t){return[{op:"q1",field:t,as:`lower_box_${t}`},{op:"q3",field:t,as:`upper_box_${t}`}]}function _Rt(t,e,r){let n=fj(t,J6),{continuousAxisChannelDef:i,continuousAxis:s}=cj(t,n,J6),o=i.field,a=Y7e(e),u=[...K7e(o),{op:"median",field:o,as:`mid_box_${o}`},{op:"min",field:o,as:(a==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:o,as:(a==="min-max"?"upper_whisker_":"max_")+o}],l=a==="min-max"||a==="tukey"?[]:[{calculate:`datum["upper_box_${o}"] - datum["lower_box_${o}"]`,as:`iqr_${o}`},{calculate:`min(datum["upper_box_${o}"] + datum["iqr_${o}"] * ${e}, datum["max_${o}"])`,as:`upper_whisker_${o}`},{calculate:`max(datum["lower_box_${o}"] - datum["iqr_${o}"] * ${e}, datum["min_${o}"])`,as:`lower_whisker_${o}`}],c=t.encoding,f=s,x=c[f],d=xj(c,[typeof f=="symbol"?f:f+""]),{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=Q7e(d),{bins:m,timeUnits:g,aggregate:y,groupby:A,encoding:S}=oj(p,r),T=n==="vertical"?"horizontal":"vertical",_=n,b=[...m,...g,{aggregate:[...y,...u],groupby:A},...l];return{bins:m,timeUnits:g,transform:b,groupby:A,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:S,ticksOrient:T,boxOrient:_,customTooltipWithoutAggregatedField:h}}var X7e=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},dj="errorbar",Z7e=["ticks","rule"],e8e=new wf(dj,Que);function Que(t,{config:e}){t=Object.assign(Object.assign({},t),{encoding:Y2(t.encoding,e)});let{transform:r,continuousAxisChannelDef:n,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=Vue(t,dj,e);delete s.size;let c=$v(a,i,n,s,e.errorbar),f=a.thickness,x=a.size,d=Object.assign(Object.assign({type:"tick",orient:o,aria:!1},f!==void 0?{thickness:f}:{}),x!==void 0?{size:x}:{}),h=[...c({partName:"ticks",mark:d,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:d,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},f!==void 0?{size:f}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return Object.assign(Object.assign(Object.assign({},u),{transform:r}),h.length>1?{layer:h}:Object.assign({},h[0]))}function bRt(t,e){let{encoding:r}=t;if(TRt(r))return{orient:fj(t,e),inputType:"raw"};let n=CRt(r),i=RRt(r),s=r.x,o=r.y;if(n){if(i)throw new Error(`${e} cannot be both type aggregated-upper-lower and aggregated-error`);let a=r.x2,u=r.y2;if(Ve(a)&&Ve(u))throw new Error(`${e} cannot have both x2 and y2`);if(Ve(a)){if(_a(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${e}`)}else if(Ve(u)){if(_a(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${e}`)}throw new Error("No ranged axis")}else{let a=r.xError,u=r.xError2,l=r.yError,c=r.yError2;if(Ve(u)&&!Ve(a))throw new Error(`${e} cannot have xError2 without xError`);if(Ve(c)&&!Ve(l))throw new Error(`${e} cannot have yError2 without yError`);if(Ve(a)&&Ve(l))throw new Error(`${e} cannot have both xError and yError with both are quantiative`);if(Ve(a)){if(_a(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ve(l)){if(_a(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function TRt(t){return(Ve(t.x)||Ve(t.y))&&!Ve(t.x2)&&!Ve(t.y2)&&!Ve(t.xError)&&!Ve(t.xError2)&&!Ve(t.yError)&&!Ve(t.yError2)}function CRt(t){return Ve(t.x2)||Ve(t.y2)}function RRt(t){return Ve(t.xError)||Ve(t.xError2)||Ve(t.yError)||Ve(t.yError2)}function Vue(t,e,r){var n;let{mark:i,encoding:s,params:o,projection:a}=t,u=X7e(t,["mark","encoding","params","projection"]),l=ys(i)?i:{type:i};o&&K(z.selectionNotSupported(e));let{orient:c,inputType:f}=bRt(t,e),{continuousAxisChannelDef:x,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=cj(t,c,e),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:A,tooltipTitleWithFieldName:S}=ORt(l,x,d,h,p,f,e,r),T=s,_=m,b=T[_],R=m==="x"?"x2":"y2",O=T[R],N=m==="x"?"xError":"yError",F=T[N],$=m==="x"?"xError2":"yError2",q=T[$],X=X7e(T,[typeof _=="symbol"?_:_+"",typeof R=="symbol"?R:R+"",typeof N=="symbol"?N:N+"",typeof $=="symbol"?$:$+""]),{bins:P,timeUnits:te,aggregate:me,groupby:Ce,encoding:Pe}=oj(X,r),ct=[...me,...g],rr=f!=="raw"?[]:Ce,Ir=X6(A,x,Pe,S);return{transform:[...(n=u.transform)!==null&&n!==void 0?n:[],...P,...te,...ct.length===0?[]:[{aggregate:ct,groupby:rr}],...y],groupby:rr,continuousAxisChannelDef:x,continuousAxis:m,encodingWithoutContinuousAxis:Pe,ticksOrient:c==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:u,tooltipEncoding:Ir}}function ORt(t,e,r,n,i,s,o,a){let u=[],l=[],c=e.field,f,x=!1;if(s==="raw"){let d=t.center?t.center:t.extent?t.extent==="iqr"?"median":"mean":a.errorbar.center,h=t.extent?t.extent:d==="mean"?"stderr":"iqr";if(d==="median"!=(h==="iqr")&&K(z.errorBarCenterIsUsedWithWrongExtent(d,h,o)),h==="stderr"||h==="stdev")u=[{op:h,field:c,as:`extent_${c}`},{op:d,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:yg(d)},{fieldPrefix:"upper_",titlePrefix:J7e(d,h,"+")},{fieldPrefix:"lower_",titlePrefix:J7e(d,h,"-")}],x=!0;else{let p,m,g;h==="ci"?(p="mean",m="ci0",g="ci1"):(p="median",m="q1",g="q3"),u=[{op:m,field:c,as:`lower_${c}`},{op:g,field:c,as:`upper_${c}`},{op:p,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Ff({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Ff({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Ff({field:c,aggregate:p,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&K(z.errorBarCenterAndExtentAreNotNeeded(t.center,t.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${r.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${n.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${n.field}"]`,as:`lower_${c}`}));for(let d of l)f.push({fieldPrefix:d.as.substring(0,6),titlePrefix:tf(tf(d.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:x}}function J7e(t,e,r){return`${yg(t)} ${r} ${e}`}var hj="errorband",t8e=["band","borders"],r8e=new wf(hj,Wue);function Wue(t,{config:e}){t=Object.assign(Object.assign({},t),{encoding:Y2(t.encoding,e)});let{transform:r,continuousAxisChannelDef:n,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=Vue(t,hj,e),l=o,c=$v(l,i,n,s,e.errorband),f=t.encoding.x!==void 0&&t.encoding.y!==void 0,x={type:f?"area":"rect"},d={type:f?"line":"rule"},h=Object.assign(Object.assign({},l.interpolate?{interpolate:l.interpolate}:{}),l.tension&&l.interpolate?{tension:l.tension}:{});return f?(x=Object.assign(Object.assign(Object.assign({},x),h),{ariaRoleDescription:"errorband"}),d=Object.assign(Object.assign(Object.assign({},d),h),{aria:!1})):l.interpolate?K(z.errorBand1DNotSupport("interpolate")):l.tension&&K(z.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},a),{transform:r,layer:[...c({partName:"band",mark:x,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:d,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:d,positionPrefix:"upper",extraEncoding:u})]})}var n8e={};function Yue(t,e,r){let n=new wf(t,e);n8e[t]={normalizer:n,parts:r}}function i8e(){return H(n8e)}Yue(J6,Gue,V7e);Yue(dj,Que,Z7e);Yue(hj,Wue,t8e);var s8e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"];var Kue={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Xue={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},o8e=H(Kue),a8e=H(Xue),DRt={header:1,headerRow:1,headerColumn:1,headerFacet:1},Jue=H(DRt);var pj=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],u8e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Zue={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},K0r=H(Zue);var K2="_vgsid_",l8e={point:{on:"click",fields:[K2],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Z6(t){return!!t&&(t==="legend"||!!t.legend)}function mj(t){return Z6(t)&&Se(t)}function jv(t){return!!t.select}var NRt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function gj(t){let e=[];for(let r of t||[]){if(jv(r))continue;let{expr:n,bind:i}=r,s=NRt(r,["expr","bind"]);if(i&&n){let o=Object.assign(Object.assign({},s),{bind:i,init:n});e.push(o)}else{let o=Object.assign(Object.assign(Object.assign({},s),n?{update:n}:{}),i?{bind:i}:{});e.push(o)}}return e}function ele(t){return X2(t)||Hv(t)||eD(t)}function eD(t){return"concat"in t}function X2(t){return"vconcat"in t}function Hv(t){return"hconcat"in t}function tle({step:t,offsetIsDiscrete:e}){var r;return e?(r=t.for)!==null&&r!==void 0?r:"offset":"position"}function ba(t){return Se(t)&&t.step!==void 0}function rle(t){return t.view||t.width||t.height}var nle=20,FRt={align:1,bounds:1,center:1,columns:1,spacing:1},wRt=H(FRt);function c8e(t,e,r){var n,i;let s=r[e],o={},{spacing:a,columns:u}=s;a!==void 0&&(o.spacing=a),u!==void 0&&(gd(t)&&!Nf(t.facet)||eD(t))&&(o.columns=u),X2(t)&&(o.columns=1);for(let l of wRt)if(t[l]!==void 0)if(l==="spacing"){let c=t[l];o[l]=Ct(c)?c:{row:(n=c.row)!==null&&n!==void 0?n:a,column:(i=c.column)!==null&&i!==void 0?i:a}}else o[l]=t[l];return o}var LRt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function tD(t,e){var r;return(r=t[e])!==null&&r!==void 0?r:t[e==="width"?"continuousWidth":"continuousHeight"]}function N3(t,e){let r=zv(t,e);return ba(r)?r.step:d8e}function zv(t,e){var r;let n=(r=t[e])!==null&&r!==void 0?r:t[e==="width"?"discreteWidth":"discreteHeight"];return It(n,{step:t.step})}var d8e=20,IRt={continuousWidth:200,continuousHeight:200,step:d8e};var MRt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:IRt,mark:y7e,arc:{},area:{},bar:S7e,circle:{},geoshape:{},image:{},line:{},point:{},rect:v7e,rule:{color:"black"},square:{},text:{color:"black"},tick:_7e,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:s7e,projection:{},legend:u8e,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:l8e,style:{},title:{},facet:{spacing:nle},concat:{spacing:nle}},Ed=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],f8e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},x8e={blue:Ed[0],orange:Ed[1],red:Ed[2],teal:Ed[3],green:Ed[4],yellow:Ed[5],purple:Ed[6],pink:Ed[7],brown:Ed[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function PRt(t={}){return{signals:[{name:"color",value:Se(t)?Object.assign(Object.assign({},x8e),t):x8e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function kRt(t){return{signals:[{name:"fontSize",value:Se(t)?Object.assign(Object.assign({},f8e),t):f8e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function BRt(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function h8e(t){let e=H(t||{}),r={};for(let n of e){let i=t[n];r[n]=yd(i)?Gk(i):Ui(i)}return r}function qRt(t){let e=H(t),r={};for(let n of e)r[n]=h8e(t[n]);return r}var URt=[...G$,...jue,...Jue,"background","padding","legend","lineBreak","scale","style","title","view"];function yj(t={}){let{color:e,font:r,fontSize:n,selection:i}=t,s=LRt(t,["color","font","fontSize","selection"]),o=e4({},we(MRt),r?BRt(r):{},e?PRt(e):{},n?kRt(n):{},s||{});i&&t4(o,"selection",i,!0);let a=Hn(o,URt);for(let u of["background","lineBreak","padding"])o[u]&&(a[u]=Ui(o[u]));for(let u of G$)o[u]&&(a[u]=zn(o[u]));for(let u of jue)o[u]&&(a[u]=h8e(o[u]));for(let u of Jue)o[u]&&(a[u]=zn(o[u]));return o.legend&&(a.legend=zn(o.legend)),o.scale&&(a.scale=zn(o.scale)),o.style&&(a.style=qRt(o.style)),o.title&&(a.title=zn(o.title)),o.view&&(a.view=zn(o.view)),a}var $Rt=new Set(["view",...p7e]),jRt=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],HRt=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},g7e);function p8e(t){t=we(t);for(let e of jRt)delete t[e];if(t.axis)for(let e in t.axis)yd(t.axis[e])&&delete t.axis[e];if(t.legend)for(let e of s8e)delete t.legend[e];if(t.mark){for(let e of Fue)delete t.mark[e];t.mark.tooltip&&Se(t.mark.tooltip)&&delete t.mark.tooltip}t.params&&(t.signals=(t.signals||[]).concat(gj(t.params)),delete t.params);for(let e of $Rt){for(let n of Fue)delete t[e][n];let r=HRt[e];if(r)for(let n of r)delete t[e][n];GRt(t,e)}for(let e of i8e())delete t[e];zRt(t);for(let e in t)Se(t[e])&&mt(t[e])&&delete t[e];return mt(t)?void 0:t}function zRt(t){let{titleMarkConfig:e,subtitleMarkConfig:r,subtitle:n}=Hk(t.title);mt(e)||(t.style["group-title"]=Object.assign(Object.assign({},t.style["group-title"]),e)),mt(r)||(t.style["group-subtitle"]=Object.assign(Object.assign({},t.style["group-subtitle"]),r)),mt(n)?delete t.title:t.title=n}function GRt(t,e,r,n){let i=n?t[e][n]:t[e];e==="view"&&(r="cell");let s=Object.assign(Object.assign({},i),t.style[r??e]);mt(s)||(t.style[r??e]=s),n||delete t[e]}function Ad(t){return"layer"in t}function ile(t){return"repeat"in t}function m8e(t){return!j(t.repeat)&&t.repeat.layer}var QRt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},J2=class{map(e,r){return gd(e)?this.mapFacet(e,r):ile(e)?this.mapRepeat(e,r):Hv(e)?this.mapHConcat(e,r):X2(e)?this.mapVConcat(e,r):eD(e)?this.mapConcat(e,r):this.mapLayerOrUnit(e,r)}mapLayerOrUnit(e,r){if(Ad(e))return this.mapLayer(e,r);if(di(e))return this.mapUnit(e,r);throw new Error(z.invalidSpec(e))}mapLayer(e,r){return Object.assign(Object.assign({},e),{layer:e.layer.map(n=>this.mapLayerOrUnit(n,r))})}mapHConcat(e,r){return Object.assign(Object.assign({},e),{hconcat:e.hconcat.map(n=>this.map(n,r))})}mapVConcat(e,r){return Object.assign(Object.assign({},e),{vconcat:e.vconcat.map(n=>this.map(n,r))})}mapConcat(e,r){let{concat:n}=e,i=QRt(e,["concat"]);return Object.assign(Object.assign({},i),{concat:n.map(s=>this.map(s,r))})}mapFacet(e,r){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,r)})}mapRepeat(e,r){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,r)})}};var VRt={zero:1,center:1,normalize:1};function WRt(t){return t in VRt}var YRt=new Set([Due,R3,C3,wv,Fv,U6,$6,O3,H$,q6]),KRt=new Set([R3,C3,Due]);function Gv(t){return se(t)&&z6(t)==="quantitative"&&!t.bin}function g8e(t,e){var r,n;let i=e==="x"?"y":"radius",s=t[e],o=t[i];if(se(s)&&se(o))if(Gv(s)&&Gv(o)){if(s.stack)return e;if(o.stack)return i;let a=se(s)&&!!s.aggregate,u=se(o)&&!!o.aggregate;if(a!==u)return a?e:i;{let l=(r=s.scale)===null||r===void 0?void 0:r.type,c=(n=o.scale)===null||n===void 0?void 0:n.type;if(l&&l!=="linear")return i;if(c&&c!=="linear")return e}}else{if(Gv(s))return e;if(Gv(o))return i}else{if(Gv(s))return e;if(Gv(o))return i}}function XRt(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function Ej(t,e,r={}){var n,i;let s=ys(t)?t.type:t;if(!YRt.has(s))return null;let o=g8e(e,"x")||g8e(e,"theta");if(!o)return null;let a=e[o],u=se(a)?ue(a,{}):void 0,l=XRt(o),c=[],f=new Set;if(e[l]){let h=e[l],p=se(h)?ue(h,{}):void 0;p&&p!==u&&(c.push(l),f.add(p));let m=l==="x"?"xOffset":"yOffset",g=e[m],y=se(g)?ue(g,{}):void 0;y&&y!==u&&(c.push(m),f.add(y))}let x=v_e.reduce((h,p)=>{if(p!=="tooltip"&&Lf(e,p)){let m=e[p];for(let g of le(m)){let y=Es(g);if(y.aggregate)continue;let A=ue(y,{});(!A||!f.has(A))&&h.push({channel:p,fieldDef:y})}}return h},[]),d;if(a.stack!==void 0?o0(a.stack)?d=a.stack?"zero":null:d=a.stack:KRt.has(s)&&(d="zero"),!d||!WRt(d)||Uv(e)&&x.length===0)return null;if(!((n=a?.scale)===null||n===void 0)&&n.type&&((i=a?.scale)===null||i===void 0?void 0:i.type)!==Vi.LINEAR){if(r.disallowNonLinearStack)return null;K(z.cannotStackNonLinearScale(a.scale.type))}return Ve(e[js(o)])?(a.stack!==void 0&&K(z.cannotStackRangedMark(o)),null):(se(a)&&a.aggregate&&!w_e.has(a.aggregate)&&K(z.stackNonSummativeAggregate(a.aggregate)),{groupbyChannels:c,groupbyFields:f,fieldChannel:o,impute:a.impute===null?!1:ro(s),stackBy:x,offset:d})}var E8e=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function JRt(t){let{point:e,line:r}=t,n=E8e(t,["point","line"]);return H(n).length>1?n:n.type}function ZRt(t){for(let e of["line","area","rule","trail"])t[e]&&(t=Object.assign(Object.assign({},t),{[e]:Hn(t[e],["point","line"])}));return t}function sle(t,e={},r){return t.point==="transparent"?{opacity:0}:t.point?Se(t.point)?t.point:{}:t.point!==void 0?null:e.point||r.shape?Se(e.point)?e.point:{}:void 0}function y8e(t,e={}){return t.line?t.line===!0?{}:t.line:t.line!==void 0?null:e.line?e.line===!0?{}:e.line:void 0}var Aj=class{constructor(){this.name="path-overlay"}hasMatchingType(e,r){if(di(e)){let{mark:n,encoding:i}=e,s=ys(n)?n:{type:n};switch(s.type){case"line":case"rule":case"trail":return!!sle(s,r[s.type],i);case"area":return!!sle(s,r[s.type],i)||!!y8e(s,r[s.type])}}return!1}run(e,r,n){let{config:i}=r,{params:s,projection:o,mark:a,encoding:u}=e,l=E8e(e,["params","projection","mark","encoding"]),c=Y2(u,i),f=ys(a)?a:{type:a},x=sle(f,i[f.type],c),d=f.type==="area"&&y8e(f,i[f.type]),h=[Object.assign(Object.assign({},s?{params:s}:{}),{mark:JRt(Object.assign(Object.assign({},f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{}),f)),encoding:Hn(c,["shape"])})],p=Ej(f,c),m=c;if(p){let{fieldChannel:g,offset:y}=p;m=Object.assign(Object.assign({},c),{[g]:Object.assign(Object.assign({},c[g]),y?{stack:y}:{})})}return d&&h.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"line"},Wp(f,["clip","interpolate","tension","tooltip"])),d),encoding:m})),x&&h.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},Wp(f,["clip","tooltip"])),x),encoding:m})),n(Object.assign(Object.assign({},l),{layer:h}),Object.assign(Object.assign({},r),{config:ZRt(i)}))}};var eOt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function v8e(t,e){return e?Nf(t)?b8e(t,e):_8e(t,e):t}function Sj(t,e){return e?b8e(t,e):t}function ole(t,e,r){let n=e[t];if(w7e(n)){if(n.repeat in r)return Object.assign(Object.assign({},e),{[t]:r[n.repeat]});K(z.noSuchRepeatedValue(n.repeat));return}return e}function _8e(t,e){if(t=ole("field",t,e),t!==void 0){if(t===null)return null;if(Z$(t)&&Wi(t.sort)){let r=ole("field",t.sort,e);t=Object.assign(Object.assign({},t),r?{sort:r}:{})}return t}}function A8e(t,e){if(se(t))return _8e(t,e);{let r=ole("datum",t,e);return r!==t&&!r.type&&(r.type="nominal"),r}}function S8e(t,e){if(Ve(t)){let r=A8e(t,e);if(r)return r;if(V2(t))return{condition:t.condition}}else{if(W2(t)){let r=A8e(t.condition,e);if(r)return Object.assign(Object.assign({},t),{condition:r});{let{condition:n}=t;return eOt(t,["condition"])}}return t}}function b8e(t,e){let r={};for(let n in t)if(Fe(t,n)){let i=t[n];if(j(i))r[n]=i.map(s=>S8e(s,e)).filter(s=>s);else{let s=S8e(i,e);s!==void 0&&(r[n]=s)}}return r}var vj=class{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(di(e)){let{encoding:r,mark:n}=e;if(n==="line"||ys(n)&&n.type==="line")for(let i of E_e){let s=cu(i),o=r[s];if(r[i]&&(se(o)&&!qr(o.bin)||no(o)))return!0}}return!1}run(e,r,n){let{encoding:i,mark:s}=e;return K(z.lineWithRange(!!i.x2,!!i.y2)),n(Object.assign(Object.assign({},e),{mark:Se(s)?Object.assign(Object.assign({},s),{type:"rule"}):"rule"}),r)}};var Z2=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},_j=class extends J2{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[W7e,e8e,r8e,new Aj,new vj]}map(e,r){if(di(e)){let n=Lf(e.encoding,oa),i=Lf(e.encoding,aa),s=Lf(e.encoding,n4);if(n||i||s)return this.mapFacetedUnit(e,r)}return super.map(e,r)}mapUnit(e,r){let{parentEncoding:n,parentProjection:i}=r,s=Sj(e.encoding,r.repeater),o=Object.assign(Object.assign({},e),s?{encoding:s}:{});if(n||i)return this.mapUnitWithParentEncodingOrProjection(o,r);let a=this.mapLayerOrUnit.bind(this);for(let u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,r.config))return u.run(o,r,a);return o}mapRepeat(e,r){return m8e(e)?this.mapLayerRepeat(e,r):this.mapNonLayerRepeat(e,r)}mapLayerRepeat(e,r){let{repeat:n,spec:i}=e,s=Z2(e,["repeat","spec"]),{row:o,column:a,layer:u}=n,{repeater:l={},repeaterPrefix:c=""}=r;return o||a?this.mapRepeat(Object.assign(Object.assign({},e),{repeat:Object.assign(Object.assign({},o?{row:o}:{}),a?{column:a}:{}),spec:{repeat:{layer:u},spec:i}}),r):Object.assign(Object.assign({},s),{layer:u.map(f=>{let x=Object.assign(Object.assign({},l),{layer:f}),d=`${(i.name||"")+c}child__layer_${Lt(f)}`,h=this.mapLayerOrUnit(i,Object.assign(Object.assign({},r),{repeater:x,repeaterPrefix:d}));return h.name=d,h})})}mapNonLayerRepeat(e,r){var n;let{repeat:i,spec:s,data:o}=e,a=Z2(e,["repeat","spec","data"]);!j(i)&&e.columns&&(e=Hn(e,["columns"]),K(z.columnsNotSupportByRowCol("repeat")));let u=[],{repeater:l={},repeaterPrefix:c=""}=r,f=!j(i)&&i.row||[l?l.row:null],x=!j(i)&&i.column||[l?l.column:null],d=j(i)&&i||[l?l.repeat:null];for(let p of d)for(let m of f)for(let g of x){let y={repeat:p,row:m,column:g,layer:l.layer},A=(s.name||"")+c+"child__"+(j(i)?`${Lt(p)}`:(i.row?`row_${Lt(m)}`:"")+(i.column?`column_${Lt(g)}`:"")),S=this.map(s,Object.assign(Object.assign({},r),{repeater:y,repeaterPrefix:A}));S.name=A,u.push(Hn(S,["data"]))}let h=j(i)?e.columns:i.column?i.column.length:1;return Object.assign(Object.assign({data:(n=s.data)!==null&&n!==void 0?n:o,align:"all"},a),{columns:h,concat:u})}mapFacet(e,r){let{facet:n}=e;return Nf(n)&&e.columns&&(e=Hn(e,["columns"]),K(z.columnsNotSupportByRowCol("facet"))),super.mapFacet(e,r)}mapUnitWithParentEncodingOrProjection(e,r){let{encoding:n,projection:i}=e,{parentEncoding:s,parentProjection:o,config:a}=r,u=C8e({parentProjection:o,projection:i}),l=T8e({parentEncoding:s,encoding:Sj(n,r.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},e),u?{projection:u}:{}),l?{encoding:l}:{}),{config:a})}mapFacetedUnit(e,r){let n=e.encoding,{row:i,column:s,facet:o}=n,a=Z2(n,["row","column","facet"]),{mark:u,width:l,projection:c,height:f,view:x,params:d,encoding:h}=e,p=Z2(e,["mark","width","projection","height","view","params","encoding"]),{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:i,column:s,facet:o},r),y=Sj(a,r.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},p),g),{facet:m,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l?{width:l}:{}),f?{height:f}:{}),x?{view:x}:{}),c?{projection:c}:{}),{mark:u,encoding:y}),d?{params:d}:{})}),r)}getFacetMappingAndLayout(e,r){var n;let{row:i,column:s,facet:o}=e;if(i||s){o&&K(z.facetChannelDropped([...i?[oa]:[],...s?[aa]:[]]));let a={},u={};for(let l of[oa,aa]){let c=e[l];if(c){let{align:f,center:x,spacing:d,columns:h}=c,p=Z2(c,["align","center","spacing","columns"]);a[l]=p;for(let m of["align","center","spacing"])c[m]!==void 0&&((n=u[m])!==null&&n!==void 0||(u[m]={}),u[m][l]=c[m])}}return{facetMapping:a,layout:u}}else{let{align:a,center:u,spacing:l,columns:c}=o,f=Z2(o,["align","center","spacing","columns"]);return{facetMapping:v8e(f,r.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},a?{align:a}:{}),u?{center:u}:{}),l?{spacing:l}:{}),c?{columns:c}:{})}}}mapLayer(e,r){var{parentEncoding:n,parentProjection:i}=r,s=Z2(r,["parentEncoding","parentProjection"]);let{encoding:o,projection:a}=e,u=Z2(e,["encoding","projection"]),l=Object.assign(Object.assign({},s),{parentEncoding:T8e({parentEncoding:n,encoding:o,layer:!0}),parentProjection:C8e({parentProjection:i,projection:a})});return super.mapLayer(u,l)}};function T8e({parentEncoding:t,encoding:e={},layer:r}){let n={};if(t){let i=new Set([...H(t),...H(e)]);for(let s of i){let o=e[s],a=t[s];if(Ve(o)){let u=Object.assign(Object.assign({},a),o);n[s]=u}else W2(o)?n[s]=Object.assign(Object.assign({},o),{condition:Object.assign(Object.assign({},a),o.condition)}):o||o===null?n[s]=o:(r||Kn(a)||be(a)||Ve(a)||j(a))&&(n[s]=a)}}else n=e;return!n||mt(n)?void 0:n}function C8e(t){let{parentProjection:e,projection:r}=t;return e&&r&&K(z.projectionOverridden({parentProjection:e,projection:r})),r??e}function rD(t){return"filter"in t}function R8e(t){return t?.stop!==void 0}function bj(t){return"lookup"in t}function O8e(t){return"data"in t}function D8e(t){return"param"in t}function N8e(t){return"pivot"in t}function F8e(t){return"density"in t}function w8e(t){return"quantile"in t}function L8e(t){return"regression"in t}function I8e(t){return"loess"in t}function M8e(t){return"sample"in t}function P8e(t){return"window"in t}function k8e(t){return"joinaggregate"in t}function B8e(t){return"flatten"in t}function q8e(t){return"calculate"in t}function Tj(t){return"bin"in t}function U8e(t){return"impute"in t}function $8e(t){return"timeUnit"in t}function j8e(t){return"aggregate"in t}function H8e(t){return"stack"in t}function z8e(t){return"fold"in t}function G8e(t){return t.map(e=>rD(e)?{filter:Vp(e.filter,r5e)}:e)}var e1=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Cj=class extends J2{map(e,r){var n,i;return(n=r.emptySelections)!==null&&n!==void 0||(r.emptySelections={}),(i=r.selectionPredicates)!==null&&i!==void 0||(r.selectionPredicates={}),e=Q8e(e,r),super.map(e,r)}mapLayerOrUnit(e,r){if(e=Q8e(e,r),e.encoding){let n={};for(let[i,s]of iu(e.encoding))n[i]=V8e(s,r);e=Object.assign(Object.assign({},e),{encoding:n})}return super.mapLayerOrUnit(e,r)}mapUnit(e,r){let n=e,{selection:i}=n,s=e1(n,["selection"]);return i?Object.assign(Object.assign({},s),{params:iu(i).map(([o,a])=>{var u;let l=a,{init:c,bind:f,empty:x}=l,d=e1(l,["init","bind","empty"]);d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),r.emptySelections[o]=x!=="none";for(let h of en((u=r.selectionPredicates[o])!==null&&u!==void 0?u:{}))h.empty=x!=="none";return{name:o,value:c,select:d,bind:f}})}):e}};function Q8e(t,e){let{transform:r}=t,n=e1(t,["transform"]);if(r){let i=r.map(s=>{if(rD(s))return{filter:ale(s,e)};if(Tj(s)&&f0(s.bin))return Object.assign(Object.assign({},s),{bin:W8e(s.bin)});if(bj(s)){let o=s.from,{selection:a}=o,u=e1(o,["selection"]);return a?Object.assign(Object.assign({},s),{from:Object.assign({param:a},u)}):s}return s});return Object.assign(Object.assign({},n),{transform:i})}return t}function V8e(t,e){var r,n;let i=we(t);if(se(i)&&f0(i.bin)&&(i.bin=W8e(i.bin)),Al(i)&&(!((n=(r=i.scale)===null||r===void 0?void 0:r.domain)===null||n===void 0)&&n.selection)){let s=i.scale.domain,{selection:o}=s,a=e1(s,["selection"]);i.scale.domain=Object.assign(Object.assign({},a),o?{param:o}:{})}if(V2(i))if(j(i.condition))i.condition=i.condition.map(s=>{let{selection:o,param:a,test:u}=s,l=e1(s,["selection","param","test"]);return a?s:Object.assign(Object.assign({},l),{test:ale(s,e)})});else{let s=V8e(i.condition,e),{selection:o,param:a,test:u}=s,l=e1(s,["selection","param","test"]);i.condition=a?i.condition:Object.assign(Object.assign({},l),{test:ale(i.condition,e)})}return i}function W8e(t){let e=t.extent;if(e?.selection){let{selection:r}=e,n=e1(e,["selection"]);return Object.assign(Object.assign({},t),{extent:Object.assign(Object.assign({},n),{param:r})})}return t}function ale(t,e){let r=n=>Vp(n,i=>{var s,o,a;let u=(s=e.emptySelections[i])!==null&&s!==void 0?s:!0,l={param:i,empty:u};return(o=(a=e.selectionPredicates)[i])!==null&&o!==void 0||(a[i]=[]),e.selectionPredicates[i].push(l),l});return t.selection?r(t.selection):Vp(t.test||t.filter,n=>n.selection?r(n.selection):n)}var Qv=class extends J2{map(e,r){var n;let i=(n=r.selections)!==null&&n!==void 0?n:[];if(e.params&&!di(e)){let s=[];for(let o of e.params)jv(o)?i.push(o):s.push(o);e.params=s}return r.selections=i,super.map(e,Y8e(e,r))}mapUnit(e,r){var n;let i=r.selections;if(!i||!i.length)return e;let s=((n=r.path)!==null&&n!==void 0?n:[]).concat(e.name),o=[];for(let a of i)if(!a.views||!a.views.length)o.push(a);else for(let u of a.views)(he(u)&&(u===e.name||s.indexOf(u)>=0)||j(u)&&u.map(l=>s.indexOf(l)).every((l,c,f)=>l!==-1&&(c===0||l>f[c-1])))&&o.push(a);return o.length&&(e.params=o),e}};for(let t of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){let e=Qv.prototype[t];Qv.prototype[t]=function(r,n){return e.call(this,r,Y8e(r,n))}}function Y8e(t,e){var r;return t.name?Object.assign(Object.assign({},e),{path:((r=e.path)!==null&&r!==void 0?r:[]).concat(t.name)}):e}function ule(t,e){e===void 0&&(e=yj(t.config));let r=iOt(t,e),{width:n,height:i}=t,s=sOt(r,{width:n,height:i,autosize:t.autosize},e);return Object.assign(Object.assign({},r),s?{autosize:s}:{})}var tOt=new _j,rOt=new Cj,nOt=new Qv;function iOt(t,e={}){let r={config:e};return nOt.map(tOt.map(rOt.map(t,r),r),r)}function K8e(t){return he(t)?{type:t}:t??{}}function sOt(t,e,r){let{width:n,height:i}=e,s=di(t)||Ad(t),o={};s?n=="container"&&i=="container"?(o.type="fit",o.contains="padding"):n=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(n=="container"&&(K(z.containerSizeNonSingle("width")),n=void 0),i=="container"&&(K(z.containerSizeNonSingle("height")),i=void 0));let a=Object.assign(Object.assign(Object.assign({type:"pad"},o),r?K8e(r.autosize):{}),K8e(t.autosize));if(a.type==="fit"&&!s&&(K(z.FIT_NON_SINGLE),a.type="pad"),n=="container"&&!(a.type=="fit"||a.type=="fit-x")&&K(z.containerSizeNotCompatibleWithAutosize("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&K(z.containerSizeNotCompatibleWithAutosize("height")),!sa(a,{type:"pad"}))return a}function X8e(t){return t==="fit"||t==="fit-x"||t==="fit-y"}function J8e(t){return t?`fit-${Yp(t)}`:"fit"}var oOt=["background","padding"];function lle(t,e){let r={};for(let n of oOt)t&&t[n]!==void 0&&(r[n]=Ui(t[n]));return e&&(r.params=t.params),r}var io=class t{constructor(e={},r={}){this.explicit=e,this.implicit=r}clone(){return new t(we(this.explicit),we(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(e){return It(this.explicit[e],this.implicit[e])}getWithExplicit(e){return this.explicit[e]!==void 0?{explicit:!0,value:this.explicit[e]}:this.implicit[e]!==void 0?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:r,explicit:n}){r!==void 0&&this.set(e,r,n)}set(e,r,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=r,this}copyKeyFromSplit(e,{explicit:r,implicit:n}){r[e]!==void 0?this.set(e,r[e],!0):n[e]!==void 0&&this.set(e,n[e],!1)}copyKeyFromObject(e,r){r[e]!==void 0&&this.set(e,r[e],!0)}copyAll(e){for(let r of H(e.combine())){let n=e.getWithExplicit(r);this.setWithExplicit(r,n)}}};function Sl(t){return{explicit:!0,value:t}}function so(t){return{explicit:!1,value:t}}function Rj(t){return(e,r,n,i)=>{let s=t(e.value,r.value);return s>0?e:s<0?r:Vv(e,r,n,i)}}function Vv(t,e,r,n){return t.explicit&&e.explicit&&K(z.mergeConflictingProperty(r,n,t.value,e.value)),t}function Ta(t,e,r,n,i=Vv){return t===void 0||t.value===void 0?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:sa(t.value,e.value)?t:i(t,e,r,n)}var Oj=class extends io{constructor(e={},r={},n=!1){super(e,r),this.explicit=e,this.implicit=r,this.parseNothing=n}clone(){let e=super.clone();return e.parseNothing=this.parseNothing,e}};function Sd(t){return"url"in t}function F3(t){return"values"in t}function Dj(t){return"name"in t&&!Sd(t)&&!F3(t)&&!B0(t)}function B0(t){return t&&(cle(t)||fle(t)||nD(t))}function cle(t){return"sequence"in t}function fle(t){return"sphere"in t}function nD(t){return"graticule"in t}var Pt;(function(t){t[t.Raw=0]="Raw",t[t.Main=1]="Main",t[t.Row=2]="Row",t[t.Column=3]="Column",t[t.Lookup=4]="Lookup"})(Pt||(Pt={}));var aOt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function t1(t,e=!0,r=On){if(j(t)){let n=t.map(i=>t1(i,e,r));return e?`[${n.join(", ")}]`:n}else if(tl(t))return r(e?Jp(t):W_e(t));return e?r(jt(t)):t}function Z8e(t,e){var r;for(let n of en((r=t.component.selection)!==null&&r!==void 0?r:{})){let i=n.name,s=`${i}${Bo}, ${n.resolve==="global"?"true":`{unit: ${If(t)}}`}`;for(let o of Wv)o.defined(n)&&(o.signals&&(e=o.signals(t,n,e)),o.modifyExpr&&(s=o.modifyExpr(t,n,s)));e.push({name:i+s9e,on:[{events:{signal:n.name+Bo},update:`modify(${fe(n.name+q0)}, ${s})`}]})}return dle(e)}function e9e(t,e){if(t.component.selection&&H(t.component.selection).length){let r=fe(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:Po("mousemove","scope"),update:`isTuple(facet) ? facet : group(${r}).datum`}]})}return dle(e)}function t9e(t,e){var r;let n=!1;for(let i of en((r=t.component.selection)!==null&&r!==void 0?r:{})){let s=i.name,o=fe(s+q0);if(e.filter(u=>u.name===s).length===0){let u=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";e.push({name:i.name,update:`${Nj}(${o}, ${fe(u)}${l}`})}n=!0;for(let u of Wv)u.defined(i)&&u.topLevelSignals&&(e=u.topLevelSignals(t,i,e))}return n&&e.filter(s=>s.name==="unit").length===0&&e.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),dle(e)}function r9e(t,e){var r;let n=[...e];for(let i of en((r=t.component.selection)!==null&&r!==void 0?r:{})){let s={name:i.name+q0};if(i.init){let a=i.project.items.map(u=>{let{signals:l}=u;return aOt(u,["signals"])});s.values=i.init.map(u=>({unit:If(t,{escape:!1}),fields:a,values:t1(u,!1)}))}n.filter(a=>a.name===i.name+q0).length||n.push(s)}return n}function xle(t,e){var r;for(let n of en((r=t.component.selection)!==null&&r!==void 0?r:{}))for(let i of Wv)i.defined(n)&&i.marks&&(e=i.marks(t,n,e));return e}function n9e(t,e){for(let r of t.children)tr(r)&&(e=xle(r,e));return e}function i9e(t,e,r,n){let i=Fj(t,e.param,e);return{signal:yn(r.get("type"))&&j(n)&&n[0]>n[1]?`isValid(${i}) && reverse(${i})`:i}}function dle(t){return t.map(e=>(e.on&&!e.on.length&&delete e.on,e))}var Ge=class{constructor(e,r){this.debugName=r,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,r){if(this._children.includes(e)){K(z.ADD_SAME_CHILD_TWICE);return}r!==void 0?this._children.splice(r,0,e):this._children.push(e)}removeChild(e){let r=this._children.indexOf(e);return this._children.splice(r,1),r}remove(){let e=this._parent.removeChild(this);for(let r of this._children)r._parent=this._parent,this._parent.addChild(r,e++)}insertAsParentOf(e){let r=e.parent;r.removeChild(this),this.parent=r,e.parent=this}swapWithParent(){let e=this._parent,r=e.parent;for(let n of this._children)n.parent=e;this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=r,e.parent=this}},on=class extends Ge{constructor(e,r,n,i){super(e,r),this.type=n,this.refCounts=i,this._source=this._name=r,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){let e=new this.constructor;return e.debugName=`clone_${this.debugName}`,e._source=this._source,e._name=`clone_${this._name}`,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${l_e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}};var o9e=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},vl=class t extends Ge{constructor(e,r){super(e),this.formula=r}clone(){return new t(null,we(this.formula))}static makeFromEncoding(e,r){let n=r.reduceFieldDef((i,s)=>{let{field:o,timeUnit:a}=s;if(a){let u=ue(s,{forAs:!0});i[$e({as:u,field:o,timeUnit:a})]={as:u,field:o,timeUnit:a}}return i},{});return mt(n)?null:new t(e,n)}static makeFromTransform(e,r){let n=Object.assign({},r),{timeUnit:i}=n,s=o9e(n,["timeUnit"]),o=nn(i),a=Object.assign(Object.assign({},s),{timeUnit:o});return new t(e,{[$e(a)]:a})}merge(e){this.formula=Object.assign({},this.formula);for(let r in e.formula)this.formula[r]||(this.formula[r]=e.formula[r]);for(let r of e.children)e.removeChild(r),r.parent=this;e.remove()}removeFormulas(e){let r={};for(let[n,i]of iu(this.formula))e.has(i.as)||(r[n]=i);this.formula=r}producedFields(){return new Set(en(this.formula).map(e=>e.as))}dependentFields(){return new Set(en(this.formula).map(e=>e.field))}hash(){return`TimeUnit ${$e(this.formula)}`}assemble(){let e=[];for(let r of en(this.formula)){let{field:n,as:i,timeUnit:s}=r,o=nn(s),{unit:a,utc:u}=o,l=o9e(o,["unit","utc"]);e.push(Object.assign(Object.assign(Object.assign(Object.assign({field:oi(n),type:"timeunit"},a?{units:ZC(a)}:{}),u?{timezone:"utc"}:{}),l),{as:[i,`${i}_end`]}))}return e}};var uOt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},vd="_tuple_fields",hle=class{constructor(...e){this.items=e,this.hasChannel={},this.hasField={}}},lOt={defined:()=>!0,parse:(t,e,r)=>{var n;let i=e.name,s=(n=e.project)!==null&&n!==void 0?n:e.project=new hle,o={},a={},u=new Set,l=(p,m)=>{let g=m==="visual"?p.channel:p.field,y=Lt(`${i}_${g}`);for(let A=1;u.has(y);A++)y=Lt(`${i}_${g}_${A}`);return u.add(y),{[m]:y}},c=e.type,f=t.config.selection[c],x=r.value!==void 0?le(r.value):null,{fields:d,encodings:h}=Se(r.select)?r.select:{};if(!d&&!h&&x){for(let p of x)if(Se(p))for(let m of H(p))y_e(m)?(h||(h=[])).push(m):c==="interval"?(K(z.INTERVAL_INITIALIZED_WITH_X_Y),h=f.encodings):(d||(d=[])).push(m)}!d&&!h&&(h=f.encodings,"fields"in f&&(d=f.fields));for(let p of h??[]){let m=t.fieldDef(p);if(m){let g=m.field;if(m.aggregate){K(z.cannotProjectAggregate(p,m.aggregate));continue}else if(!g){K(z.cannotProjectOnChannelWithoutField(p));continue}if(m.timeUnit){g=t.vgField(p);let y={timeUnit:m.timeUnit,as:g,field:m.field};a[$e(y)]=y}if(!o[g]){let y="E";if(c==="interval"){let S=t.getScaleComponent(p).get("type");yn(S)&&(y="R")}else m.bin&&(y="R-RE");let A={field:g,channel:p,type:y};A.signals=Object.assign(Object.assign({},l(A,"data")),l(A,"visual")),s.items.push(o[g]=A),s.hasField[g]=s.hasChannel[p]=o[g]}}else K(z.cannotProjectOnChannelWithoutField(p))}for(let p of d??[]){if(s.hasField[p])continue;let m={type:"E",field:p};m.signals=Object.assign({},l(m,"data")),s.items.push(m),s.hasField[p]=m}x&&(e.init=x.map(p=>s.items.map(m=>Se(p)?p[m.channel]!==void 0?p[m.channel]:p[m.field]:p))),mt(a)||(s.timeUnit=new vl(null,a))},signals:(t,e,r)=>{let n=e.name+vd;return r.filter(s=>s.name===n).length>0?r:r.concat({name:n,value:e.project.items.map(s=>{let{signals:o,hasLegend:a}=s,u=uOt(s,["signals","hasLegend"]);return u.field=oi(u.field),u})})}},a9e=lOt;var cOt={defined:t=>t.type==="interval"&&t.resolve==="global"&&t.bind&&t.bind==="scales",parse:(t,e)=>{let r=e.scales=[];for(let n of e.project.items){let i=n.channel;if(!Hs(i))continue;let s=t.getScaleComponent(i),o=s?s.get("type"):void 0;if(!s||!yn(o)){K(z.SCALE_BINDINGS_CONTINUOUS);continue}s.set("selectionExtent",{param:e.name,field:n.field},!0),r.push(n)}},topLevelSignals:(t,e,r)=>{let n=e.scales.filter(o=>r.filter(a=>a.name===o.signals.data).length===0);if(!t.parent||ple(t)||n.length===0)return r;let i=r.filter(o=>o.name===e.name)[0],s=i.update;if(s.indexOf(Nj)>=0)i.update=`{${n.map(o=>`${fe(oi(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(let o of n){let a=`${fe(oi(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return r.concat(n.map(o=>({name:o.signals.data})))},signals:(t,e,r)=>{if(t.parent&&!ple(t))for(let n of e.scales){let i=r.filter(s=>s.name===n.signals.data)[0];i.push="outer",delete i.value,delete i.update}return r}},_l=cOt;function iD(t,e){return`domain(${fe(t.scaleName(e))})`}function ple(t){var e;return t.parent&&bl(t.parent)&&((e=!t.parent.parent)!==null&&e!==void 0?e:ple(t.parent.parent))}var fOt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},_d="_brush",mle="_scale_trigger",xOt={defined:t=>t.type==="interval",signals:(t,e,r)=>{let n=e.name,i=n+vd,s=_l.defined(e),o=e.init?e.init[0]:null,a=[],u=[];if(e.translate&&!s){let c=`!event.item || event.item.mark.name !== ${fe(n+_d)}`;l9e(e,(f,x)=>{var d,h;let p=le((d=(h=x.between[0]).filter)!==null&&d!==void 0?d:h.filter=[]);return p.includes(c)||p.push(c),f})}e.project.items.forEach((c,f)=>{let x=c.channel;if(x!==Ht&&x!==Cr){K("Interval selections only support x and y encoding channels.");return}let d=o?o[f]:null,h=dOt(t,e,c,d),p=c.signals.data,m=c.signals.visual,g=fe(t.scaleName(x)),y=t.getScaleComponent(x).get("type"),A=yn(y)?"+":"";r.push(...h),a.push(p),u.push({scaleName:t.scaleName(x),expr:`(!isArray(${p}) || (${A}invert(${g}, ${m})[0] === ${A}${p}[0] && ${A}invert(${g}, ${m})[1] === ${A}${p}[1]))`})}),!s&&u.length&&r.push({name:n+mle,value:{},on:[{events:u.map(c=>({scale:c.scaleName})),update:`${u.map(c=>c.expr).join(" && ")} ? ${n+mle} : {}`}]});let l=`unit: ${If(t)}, fields: ${i}, values`;return r.concat(Object.assign(Object.assign({name:n+Bo},o?{init:`{${l}: ${t1(o)}}`}:{}),a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}))},marks:(t,e,r)=>{let n=e.name,{x:i,y:s}=e.project.hasChannel,o=i?.signals.visual,a=s?.signals.visual,u=`data(${fe(e.name+q0)})`;if(_l.defined(e)||!i&&!s)return r;let l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(e.resolve==="global")for(let m of H(l))l[m]=[Object.assign({test:`${u}.length && ${u}[0].unit === ${If(t)}`},l[m]),{value:0}];let c=e.mark,{fill:f,fillOpacity:x,cursor:d}=c,h=fOt(c,["fill","fillOpacity","cursor"]),p=H(h).reduce((m,g)=>(m[g]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(y=>y).join(" && "),value:h[g]},{value:null}],m),{});return[{name:`${n+_d}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:x}},update:l}},...r,{name:n+_d,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},d?{cursor:{value:d}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},l),p)}}]}},u9e=xOt;function dOt(t,e,r,n){let i=r.channel,s=r.signals.visual,o=r.signals.data,a=_l.defined(e),u=fe(t.scaleName(i)),l=t.getScaleComponent(i),c=l?l.get("type"):void 0,f=p=>`scale(${u}, ${p})`,x=t.getSizeSignalRef(i===Ht?"width":"height").signal,d=`${i}(unit)`,h=l9e(e,(p,m)=>[...p,{events:m.between[0],update:`[${d}, ${d}]`},{events:m,update:`[${s}[0], clamp(${d}, 0, ${x})]`}]);return h.push({events:{signal:e.name+mle},update:yn(c)?`[${f(`${o}[0]`)}, ${f(`${o}[1]`)}]`:"[0, 0]"}),a?[{name:o,on:[]}]:[Object.assign(Object.assign({name:s},n?{init:t1(n,!0,f)}:{value:[]}),{on:h}),Object.assign(Object.assign({name:o},n?{init:t1(n)}:{}),{on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${u}, ${s})`}]})]}function l9e(t,e){return t.events.reduce((r,n)=>n.between?e(r,n):(K(`${n} is not an ordered event stream for interval selections.`),r),[])}var hOt={defined:t=>t.type==="point",signals:(t,e,r)=>{var n;let i=e.name,s=i+vd,o=e.project,a="(item().isVoronoi ? datum.datum : datum)",u=o.items.map(d=>{let h=t.fieldDef(d.channel);return h?.bin?`[${a}[${fe(t.vgField(d.channel,{}))}], ${a}[${fe(t.vgField(d.channel,{binSuffix:"end"}))}]]`:`${a}[${fe(d.field)}]`}).join(", "),l=`unit: ${If(t)}, fields: ${s}, values`,c=e.events,f=en((n=t.component.selection)!==null&&n!==void 0?n:{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+_d):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),x=`datum && item().mark.marktype !== 'group'${f?` && ${f}`:""}`;return r.concat([{name:i+Bo,on:c?[{events:c,update:`${x} ? {${l}: [${u}]} : null`,force:!0}]:[]}])}},c9e=hOt;function Ca(t,e,r,n){let i=V2(e)&&e.condition,s=n(e);if(i){let a=le(i).map(u=>{let l=n(u);if(F7e(u)){let{param:c,empty:f}=u,x=wj(t,{param:c,empty:f});return Object.assign({test:x},l)}else{let c=w3(t,u.test);return Object.assign({test:c},l)}});return{[r]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[r]:s}:{}}function r1(t,e="text"){let r=t.encoding[e];return Ca(t,r,e,n=>Yv(n,t.config))}function Yv(t,e,r="datum"){if(t){if(Kn(t))return vt(t.value);if(Ve(t)){let{format:n,formatType:i}=qv(t);return Mv({fieldOrDatumDef:t,format:n,formatType:i,expr:r,config:e})}}}function Kv(t,e={}){let{encoding:r,markDef:n,config:i,stack:s}=t,o=r.tooltip;if(j(o))return{tooltip:gle({tooltip:o},s,i,e)};{let a=e.reactiveGeom?"datum.datum":"datum";return Ca(t,o,"tooltip",u=>{let l=Yv(u,i,a);if(l)return l;if(u===null)return;let c=st("tooltip",n,i);if(c===!0&&(c={content:"encoding"}),he(c))return{value:c};if(Se(c))return be(c)?c:c.content==="encoding"?gle(r,s,i,e):{signal:a}})}}function yle(t,e,r,{reactiveGeom:n}={}){let i={},s=n?"datum.datum":"datum",o=[];function a(l,c){let f=cu(c),x=xi(l)?l:Object.assign(Object.assign({},l),{type:t[f].type}),d=x.title||V6(x,r),h=le(d).join(", "),p;if(Ar(c)){let m=c==="x"?"x2":"y2",g=Es(t[m]);if(qr(x.bin)&&g){let y=ue(x,{expr:s}),A=ue(g,{expr:s}),{format:S,formatType:T}=qv(x);p=Pv(y,A,S,T,r),i[m]=!0}else if(e&&e.fieldChannel===c&&e.offset==="normalize"){let{format:y,formatType:A}=qv(x);p=Mv({fieldOrDatumDef:x,format:y,formatType:A,expr:s,config:r,normalizeStack:!0}).signal}}p??(p=Yv(x,r,s).signal),o.push({channel:c,key:h,value:p})}K6(t,(l,c)=>{se(l)?a(l,c):Bv(l)&&a(l.condition,c)});let u={};for(let{channel:l,key:c,value:f}of o)!i[l]&&!u[c]&&(u[c]=f);return u}function gle(t,e,r,{reactiveGeom:n}={}){let i=yle(t,e,r,{reactiveGeom:n}),s=iu(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Ele(t){let{markDef:e,config:r}=t,n=st("aria",e,r);return n===!1?{}:Object.assign(Object.assign(Object.assign({},n?{aria:n}:{}),pOt(t)),mOt(t))}function pOt(t){let{mark:e,markDef:r,config:n}=t;if(n.aria===!1)return{};let i=st("ariaRoleDescription",r,n);return i!=null?{ariaRoleDescription:{value:i}}:e in k_e?{}:{ariaRoleDescription:{value:e}}}function mOt(t){let{encoding:e,markDef:r,config:n,stack:i}=t,s=e.description;if(s)return Ca(t,s,"description",u=>Yv(u,t.config));let o=st("description",r,n);if(o!=null)return{description:vt(o)};if(n.aria===!1)return{};let a=yle(e,i,n);if(!mt(a))return{description:{signal:iu(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function mr(t,e,r={}){let{markDef:n,encoding:i,config:s}=e,{vgChannel:o}=r,{defaultRef:a,defaultValue:u}=r;a===void 0&&(u??(u=st(t,n,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=vt(u)));let l=i[t];return Ca(e,l,o??t,c=>H6({channel:t,channelDef:c,markDef:n,config:s,scaleName:e.scaleName(t),scale:e.getScaleComponent(t),stack:null,defaultRef:a}))}function Xv(t,e={filled:void 0}){var r,n,i,s;let{markDef:o,encoding:a,config:u}=t,{type:l}=o,c=(r=e.filled)!==null&&r!==void 0?r:st("filled",o,u),f=We(["bar","point","circle","square","geoshape"],l)?"transparent":void 0,x=(i=(n=st(c===!0?"color":void 0,o,u,{vgChannel:"fill"}))!==null&&n!==void 0?n:u.mark[c===!0&&"color"])!==null&&i!==void 0?i:f,d=(s=st(c===!1?"color":void 0,o,u,{vgChannel:"stroke"}))!==null&&s!==void 0?s:u.mark[c===!1&&"color"],h=c?"fill":"stroke",p=Object.assign(Object.assign({},x?{fill:vt(x)}:{}),d?{stroke:vt(d)}:{});return o.color&&(c?o.fill:o.stroke)&&K(z.droppingColor("property",{fill:"fill"in o,stroke:"stroke"in o})),Object.assign(Object.assign(Object.assign(Object.assign({},p),mr("color",t,{vgChannel:h,defaultValue:c?x:d})),mr("fill",t,{defaultValue:a.fill?x:void 0})),mr("stroke",t,{defaultValue:a.stroke?d:void 0}))}function f9e(t){let{encoding:e,mark:r}=t,n=e.order;return!ro(r)&&Kn(n)?Ca(t,n,"zindex",i=>vt(i.value)):{}}function n1({channel:t,markDef:e,encoding:r={},model:n,bandPosition:i}){let s=`${t}Offset`,o=e[s],a=r[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:H6({channel:s,channelDef:a,markDef:e,config:n?.config,scaleName:n.scaleName(s),scale:n.getScaleComponent(s),stack:null,defaultRef:vt(o),bandPosition:i})};let u=e[s];return u?{offsetType:"visual",offset:u}:{}}function Hr(t,e,{defaultPos:r,vgChannel:n}){let{encoding:i,markDef:s,config:o,stack:a}=e,u=i[t],l=i[js(t)],c=e.scaleName(t),f=e.getScaleComponent(t),{offset:x,offsetType:d}=n1({channel:t,markDef:s,encoding:i,model:e,bandPosition:.5}),h=sD({model:e,defaultPos:r,channel:t,scaleName:c,scale:f}),p=!u&&Ar(t)&&(i.latitude||i.longitude)?{field:e.getName(t)}:gOt({channel:t,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:x,defaultRef:h,bandPosition:d==="encoding"?0:void 0});return p?{[n||t]:p}:void 0}function gOt(t){let{channel:e,channelDef:r,scaleName:n,stack:i,offset:s,markDef:o}=t;if(Ve(r)&&i&&e===i.fieldChannel){if(se(r)){let a=r.bandPosition;if(a===void 0&&o.type==="text"&&(e==="radius"||e==="theta")&&(a=.5),a!==void 0)return Lv({scaleName:n,fieldOrDatumDef:r,startSuffix:"start",bandPosition:a,offset:s})}return Rf(r,n,{suffix:"end"},{offset:s})}return Iv(t)}function sD({model:t,defaultPos:e,channel:r,scaleName:n,scale:i}){let{markDef:s,config:o}=t;return()=>{let a=cu(r),u=Zu(r),l=st(r,s,o,{vgChannel:u});if(l!==void 0)return D3(r,l);switch(e){case"zeroOrMin":case"zeroOrMax":if(n){let c=i.get("type");if(!We([Vi.LOG,Vi.TIME,Vi.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:n,value:0}}}if(e==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${t.width.signal},${t.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{let c=t[rn(r)];return Object.assign(Object.assign({},c),{mult:.5})}}}}var yOt={left:"x",center:"xc",right:"x2"},EOt={top:"y",middle:"yc",bottom:"y2"};function Lj(t,e,r,n="middle"){if(t==="radius"||t==="theta")return Zu(t);let i=t==="x"?"align":"baseline",s=st(i,e,r),o;return be(s)?(K(z.rangeMarkAlignmentCannotBeExpression(i)),o=void 0):o=s,t==="x"?yOt[o||(n==="top"?"left":"center")]:EOt[o||n]}function i1(t,e,{defaultPos:r,defaultPos2:n,range:i}){return i?oD(t,e,{defaultPos:r,defaultPos2:n}):Hr(t,e,{defaultPos:r})}function oD(t,e,{defaultPos:r,defaultPos2:n}){let{markDef:i,config:s}=e,o=js(t),a=rn(t),u=AOt(e,n,o),l=u[a]?Lj(t,i,s):Zu(t);return Object.assign(Object.assign({},Hr(t,e,{defaultPos:r,vgChannel:l})),u)}function AOt(t,e,r){let{encoding:n,mark:i,markDef:s,stack:o,config:a}=t,u=cu(r),l=rn(r),c=Zu(r),f=n[u],x=t.scaleName(u),d=t.getScaleComponent(u),{offset:h}=r in n||r in s?n1({channel:r,markDef:s,encoding:n,model:t}):n1({channel:u,markDef:s,encoding:n,model:t});if(!f&&(r==="x2"||r==="y2")&&(n.latitude||n.longitude)){let m=rn(r),g=t.markDef[m];return g!=null?{[m]:{value:g}}:{[c]:{field:t.getName(r)}}}let p=SOt({channel:r,channelDef:f,channel2Def:n[r],markDef:s,config:a,scaleName:x,scale:d,stack:o,offset:h,defaultRef:void 0});return p!==void 0?{[c]:p}:Ij(r,s)||Ij(r,{[r]:JC(r,s,a.style),[l]:JC(l,s,a.style)})||Ij(r,a[i])||Ij(r,a.mark)||{[c]:sD({model:t,defaultPos:e,channel:r,scaleName:x,scale:d})()}}function SOt({channel:t,channelDef:e,channel2Def:r,markDef:n,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Ve(e)&&a&&t.charAt(0)===a.fieldChannel.charAt(0)?Rf(e,s,{suffix:"start"},{offset:u}):Iv({channel:t,channelDef:r,scaleName:s,scale:o,stack:a,markDef:n,config:i,offset:u,defaultRef:l})}function Ij(t,e){let r=rn(t),n=Zu(t);if(e[n]!==void 0)return{[n]:D3(t,e[n])};if(e[t]!==void 0)return{[n]:D3(t,e[t])};if(e[r]){let i=e[r];if(pd(i))K(z.relativeBandSizeNotSupported(r));else return{[r]:D3(t,i)}}}function Ra(t,e){var r,n;let{config:i,encoding:s,markDef:o}=t,a=o.type,u=js(e),l=rn(e),c=s[e],f=s[u],x=t.getScaleComponent(e),d=x?x.get("type"):void 0,h=o.orient,p=(n=(r=s[l])!==null&&r!==void 0?r:s.size)!==null&&n!==void 0?n:st("size",o,i,{vgChannel:l}),m=a==="bar"&&(e==="x"?h==="vertical":h==="horizontal");return se(c)&&(St(c.bin)||qr(c.bin)||c.timeUnit&&!f)&&!(p&&!pd(p))&&!or(d)?bOt({fieldDef:c,fieldDef2:f,channel:e,model:t}):(Ve(c)&&or(d)||m)&&!f?_Ot(c,e,t):oD(e,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function vOt(t,e,r,n,i){if(pd(i))if(r){let o=r.get("type");if(o==="band")return{scale:e,band:i.band};i.band!==1&&(K(z.cannotUseRelativeBandSizeWithNonBandScale(o)),i=void 0)}else return{mult:i.band,field:{group:t}};else{if(be(i))return i;if(i)return{value:i}}if(r){let o=r.get("range");if(zs(o)&&Ct(o.step))return{value:o.step-2}}return{value:N3(n.view,t)-2}}function _Ot(t,e,r){let{markDef:n,encoding:i,config:s,stack:o}=r,a=n.orient,u=r.scaleName(e),l=r.getScaleComponent(e),c=rn(e),f=js(e),x=A_e(e),d=r.scaleName(x),h=a==="horizontal"&&e==="y"||a==="vertical"&&e==="x",p;(i.size||n.size)&&(h?p=mr("size",r,{vgChannel:c,defaultRef:vt(n.size)}):K(z.cannotApplySizeToNonOrientedMark(n.type)));let m=Pue({channel:e,fieldDef:t,markDef:n,config:s,scaleType:l?.get("type"),useVlSizeChannel:h});p=p||{[c]:vOt(c,d||u,l,s,m)};let g=l?.get("type")!=="band"||!("band"in p[c])?"middle":"top",y=Lj(e,n,s,g),A=y==="xc"||y==="yc",{offset:S,offsetType:T}=n1({channel:e,markDef:n,encoding:i,model:r,bandPosition:A?.5:0}),_=Iv({channel:e,channelDef:t,markDef:n,config:s,scaleName:u,scale:l,stack:o,offset:S,defaultRef:sD({model:r,defaultPos:"mid",channel:e,scaleName:u,scale:l}),bandPosition:A?T==="encoding"?0:.5:be(m)?{signal:`(1-${m})/2`}:pd(m)?(1-m.band)/2:0});if(c)return Object.assign({[y]:_},p);{let b=Zu(f),R=p[c],O=S?Object.assign(Object.assign({},R),{offset:S}):R;return{[y]:_,[b]:j(_)?[_[0],Object.assign(Object.assign({},_[1]),{offset:O})]:Object.assign(Object.assign({},_),{offset:O})}}}function aD(t,e,r,n,i){if(Lee(t))return 0;let s=t==="x"||t==="y2"?-e/2:e/2;if(be(r)||be(i)||be(n)){let o=xu(r),a=xu(i),u=xu(n),l=u?`${u} + `:"",c=o?`(${o} ? -1 : 1) * `:"",f=a?`(${a} + ${s})`:s;return{signal:l+c+f}}else return i=i||0,n+(r?-i-s:+i+s)}function bOt({fieldDef:t,fieldDef2:e,channel:r,model:n}){var i,s,o;let{config:a,markDef:u,encoding:l}=n,c=n.getScaleComponent(r),f=n.scaleName(r),x=c?c.get("type"):void 0,d=c.get("reverse"),h=Pue({channel:r,fieldDef:t,markDef:u,config:a,scaleType:x}),p=(i=n.component.axes[r])===null||i===void 0?void 0:i[0],m=(s=p?.get("translate"))!==null&&s!==void 0?s:.5,g=Ar(r)&&(o=st("binSpacing",u,a))!==null&&o!==void 0?o:0,y=js(r),A=Zu(r),S=Zu(y),{offset:T}=n1({channel:r,markDef:u,encoding:l,model:n,bandPosition:0}),_=be(h)?{signal:`(1-${h.signal})/2`}:pd(h)?(1-h.band)/2:.5;if(St(t.bin)||t.timeUnit)return{[S]:x9e({fieldDef:t,scaleName:f,bandPosition:_,offset:aD(y,g,d,m,T)}),[A]:x9e({fieldDef:t,scaleName:f,bandPosition:be(_)?{signal:`1-${_.signal}`}:1-_,offset:aD(r,g,d,m,T)})};if(qr(t.bin)){let b=Rf(t,f,{},{offset:aD(y,g,d,m,T)});if(se(e))return{[S]:b,[A]:Rf(e,f,{},{offset:aD(r,g,d,m,T)})};if(f0(t.bin)&&t.bin.step)return{[S]:b,[A]:{signal:`scale("${f}", ${ue(t,{expr:"datum"})} + ${t.bin.step})`,offset:aD(r,g,d,m,T)}}}K(z.channelRequiredForBinned(y))}function x9e({fieldDef:t,scaleName:e,bandPosition:r,offset:n}){return Lv({scaleName:e,fieldOrDatumDef:t,bandPosition:r,offset:n})}var TOt=new Set(["aria","width","height"]);function zr(t,e){let{fill:r=void 0,stroke:n=void 0}=e.color==="include"?Xv(t):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},COt(t.markDef,e)),d9e(t,"fill",r)),d9e(t,"stroke",n)),mr("opacity",t)),mr("fillOpacity",t)),mr("strokeOpacity",t)),mr("strokeWidth",t)),mr("strokeDash",t)),f9e(t)),Kv(t)),r1(t,"href")),Ele(t))}function d9e(t,e,r){let{config:n,mark:i,markDef:s}=t;if(st("invalid",s,n)==="hide"&&r&&!ro(i)){let a=ROt(t,{invalid:!0,channels:Kp});if(a)return{[e]:[{test:a,value:null},...le(r)]}}return r?{[e]:r}:{}}function COt(t,e){return P_e.reduce((r,n)=>(!TOt.has(n)&&t[n]!==void 0&&e[n]!=="ignore"&&(r[n]=vt(t[n])),r),{})}function ROt(t,{invalid:e=!1,channels:r}){let n=r.reduce((s,o)=>{let a=t.getScaleComponent(o);if(a){let u=a.get("type"),l=t.vgField(o,{expr:"datum"});l&&yn(u)&&(s[l]=!0)}return s},{}),i=H(n);if(i.length>0){let s=e?"||":"&&";return i.map(o=>j6(o,e)).join(` ${s} `)}}function Jv(t){let{config:e,markDef:r}=t;if(st("invalid",r,e)){let i=OOt(t,{channels:ai});if(i)return{defined:{signal:i}}}return{}}function OOt(t,{invalid:e=!1,channels:r}){let n=r.reduce((s,o)=>{let a=t.getScaleComponent(o);if(a){let u=a.get("type"),l=t.vgField(o,{expr:"datum"});l&&yn(u)&&(s[l]=!0)}return s},{}),i=H(n);if(i.length>0){let s=e?"||":"&&";return i.map(o=>j6(o,e)).join(` ${s} `)}}function Mj(t,e){if(e!==void 0)return{[t]:vt(e)}}var Ale="voronoi",DOt={defined:t=>t.type==="point"&&t.nearest,parse:(t,e)=>{if(e.events)for(let r of e.events)r.markname=t.getName(Ale)},marks:(t,e,r)=>{let{x:n,y:i}=e.project.hasChannel,s=t.mark;if(ro(s))return K(z.nearestNotSupportForContinuous(s)),r;let o={name:t.getName(Ale),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},Kv(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:n||!i?"datum.datum.x || 0":"0"},y:{expr:i||!n?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]},a=0,u=!1;return r.forEach((l,c)=>{var f;let x=(f=l.name)!==null&&f!==void 0?f:"";x===t.component.mark[0].name?a=c:x.indexOf(Ale)>=0&&(u=!0)}),u||r.splice(a+1,0,o),r}},Pj=DOt;var NOt={defined:t=>t.type==="point"&&t.resolve==="global"&&t.bind&&t.bind!=="scales"&&!Z6(t.bind),parse:(t,e,r)=>Bj(e,r),topLevelSignals:(t,e,r)=>{let n=e.name,i=e.project,s=e.bind,o=e.init&&e.init[0],a=Pj.defined(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{var c,f;let x=Lt(`${n}_${u.field}`);r.filter(h=>h.name===x).length||r.unshift(Object.assign(Object.assign({name:x},o?{init:t1(o[l])}:{value:null}),{on:e.events?[{events:e.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${fe(u.field)}] : null`}]:[],bind:(f=(c=s[u.field])!==null&&c!==void 0?c:s[u.channel])!==null&&f!==void 0?f:s}))}),r},signals:(t,e,r)=>{let n=e.name,i=e.project,s=r.filter(l=>l.name===n+Bo)[0],o=n+vd,a=i.items.map(l=>Lt(`${n}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,r}},kj=NOt;var Zv="_toggle",FOt={defined:t=>t.type==="point"&&!!t.toggle,signals:(t,e,r)=>r.concat({name:e.name+Zv,value:!1,on:[{events:e.events,update:e.toggle}]}),modifyExpr:(t,e)=>{let r=e.name+Bo,n=e.name+Zv;return`${n} ? null : ${r}, `+(e.resolve==="global"?`${n} ? null : true, `:`${n} ? null : {unit: ${If(t)}}, `)+`${n} ? ${r} : null`}},qj=FOt;var wOt={defined:t=>t.clear!==void 0&&t.clear!==!1,parse:(t,e)=>{e.clear&&(e.clear=he(e.clear)?Po(e.clear,"view"):e.clear)},topLevelSignals:(t,e,r)=>{if(kj.defined(e))for(let n of e.project.items){let i=r.findIndex(s=>s.name===Lt(`${e.name}_${n.field}`));i!==-1&&r[i].on.push({events:e.clear,update:"null"})}return r},signals:(t,e,r)=>{function n(i,s){i!==-1&&r[i].on&&r[i].on.push({events:e.clear,update:s})}if(e.type==="interval")for(let i of e.project.items){let s=r.findIndex(o=>o.name===i.signals.visual);if(n(s,"[0, 0]"),s===-1){let o=r.findIndex(a=>a.name===i.signals.data);n(o,"null")}}else{let i=r.findIndex(s=>s.name===e.name+Bo);n(i,"null"),qj.defined(e)&&(i=r.findIndex(s=>s.name===e.name+Zv),n(i,"false"))}return r}},h9e=wOt;var p9e={defined:t=>{let e=t.resolve==="global"&&t.bind&&Z6(t.bind),r=t.project.items.length===1&&t.project.items[0].field!==K2;return e&&!r&&K(z.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),e&&r},parse:(t,e,r)=>{var n;let i=we(r);if(i.select=he(i.select)?{type:i.select,toggle:e.toggle}:Object.assign(Object.assign({},i.select),{toggle:e.toggle}),Bj(e,i),Se(r.select)&&(r.select.on||r.select.clear)){let a='event.item && indexof(event.item.mark.role, "legend") < 0';for(let u of e.events)u.filter=le((n=u.filter)!==null&&n!==void 0?n:[]),u.filter.includes(a)||u.filter.push(a)}let s=mj(e.bind)?e.bind.legend:"click",o=he(s)?Po(s,"view"):le(s);e.bind={legend:{merge:o}}},topLevelSignals:(t,e,r)=>{let n=e.name,i=mj(e.bind)&&e.bind.legend,s=o=>a=>{let u=we(a);return u.markname=o,u};for(let o of e.project.items){if(!o.hasLegend)continue;let a=`${Lt(o.field)}_legend`,u=`${n}_${a}`;if(r.filter(c=>c.name===u).length===0){let c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));r.unshift(Object.assign(Object.assign({name:u},e.init?{}:{value:null}),{on:[{events:c,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]}))}}return r},signals:(t,e,r)=>{let n=e.name,i=e.project,s=r.find(x=>x.name===n+Bo),o=n+vd,a=i.items.filter(x=>x.hasLegend).map(x=>Lt(`${n}_${Lt(x.field)}_legend`)),l=`${a.map(x=>`${x} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;e.events&&a.length>0?s.on.push({events:a.map(x=>({signal:x})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);let c=r.find(x=>x.name===n+Zv),f=mj(e.bind)&&e.bind.legend;return c&&(e.events?c.on.push(Object.assign(Object.assign({},c.on[0]),{events:f})):c.on[0].events=f),r}},m9e=p9e;function g9e(t,e,r){var n,i,s,o;let a=(n=t.fieldDef(e))===null||n===void 0?void 0:n.field;for(let u of en((i=t.component.selection)!==null&&i!==void 0?i:{})){let l=(s=u.project.hasField[a])!==null&&s!==void 0?s:u.project.hasChannel[e];if(l&&p9e.defined(u)){let c=(o=r.get("selections"))!==null&&o!==void 0?o:[];c.push(u.name),r.set("selections",c,!1),l.hasLegend=!0}}}var E9e="_translate_anchor",A9e="_translate_delta",LOt={defined:t=>t.type==="interval"&&t.translate,signals:(t,e,r)=>{let n=e.name,i=_l.defined(e),s=n+E9e,{x:o,y:a}=e.project.hasChannel,u=Po(e.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=n+_d,l))),r.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?iD(t,Ht):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?iD(t,Cr):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:n+A9e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&y9e(t,e,o,"width",r),a!==void 0&&y9e(t,e,a,"height",r),r}},S9e=LOt;function y9e(t,e,r,n,i){var s,o;let a=e.name,u=a+E9e,l=a+A9e,c=r.channel,f=_l.defined(e),x=i.filter(b=>b.name===r.signals[f?"data":"visual"])[0],d=t.getSizeSignalRef(n).signal,h=t.getScaleComponent(c),p=h.get("type"),m=h.get("reverse"),g=f?c===Ht?m?"":"-":m?"-":"":"",y=`${u}.extent_${c}`,A=`${g}${l}.${c} / ${f?`${d}`:`span(${y})`}`,S=f?p==="log"?"panLog":p==="symlog"?"panSymlog":p==="pow"?"panPow":"panLinear":"panLinear",T=f?p==="pow"?`, ${(s=h.get("exponent"))!==null&&s!==void 0?s:1}`:p==="symlog"?`, ${(o=h.get("constant"))!==null&&o!==void 0?o:1}`:"":"",_=`${S}(${y}, ${A}${T})`;x.on.push({events:{signal:l},update:f?_:`clampRange(${_}, 0, ${d})`})}var _9e="_zoom_anchor",b9e="_zoom_delta",IOt={defined:t=>t.type==="interval"&&t.zoom,signals:(t,e,r)=>{let n=e.name,i=_l.defined(e),s=n+b9e,{x:o,y:a}=e.project.hasChannel,u=fe(t.scaleName(Ht)),l=fe(t.scaleName(Cr)),c=Po(e.zoom,"scope");return i||(c=c.map(f=>(f.markname=n+_d,f))),r.push({name:n+_9e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>!!f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&v9e(t,e,o,"width",r),a!==void 0&&v9e(t,e,a,"height",r),r}},T9e=IOt;function v9e(t,e,r,n,i){var s,o;let a=e.name,u=r.channel,l=_l.defined(e),c=i.filter(S=>S.name===r.signals[l?"data":"visual"])[0],f=t.getSizeSignalRef(n).signal,x=t.getScaleComponent(u),d=x.get("type"),h=l?iD(t,u):c.name,p=a+b9e,m=`${a}${_9e}.${u}`,g=l?d==="log"?"zoomLog":d==="symlog"?"zoomSymlog":d==="pow"?"zoomPow":"zoomLinear":"zoomLinear",y=l?d==="pow"?`, ${(s=x.get("exponent"))!==null&&s!==void 0?s:1}`:d==="symlog"?`, ${(o=x.get("constant"))!==null&&o!==void 0?o:1}`:"":"",A=`${g}(${h}, ${m}, ${p}${y})`;c.on.push({events:{signal:p},update:l?A:`clampRange(${A}, 0, ${f})`})}var q0="_store",Bo="_tuple",s9e="_modify";var Nj="vlSelectionResolve",Wv=[c9e,u9e,a9e,qj,kj,_l,m9e,h9e,S9e,T9e,Pj];function MOt(t){let e=t.parent;for(;e&&!Yi(e);)e=e.parent;return e}function If(t,{escape:e}={escape:!0}){let r=e?fe(t.name):t.name,n=MOt(t);if(n){let{facet:i}=n;for(let s of qi)i[s]&&(r+=` + '__facet_${s}_' + (facet[${fe(n.vgField(s))}])`)}return r}function uD(t){var e;return en((e=t.component.selection)!==null&&e!==void 0?e:{}).reduce((r,n)=>r||n.project.items.some(i=>i.field===K2),!1)}function Bj(t,e){(he(e.select)||!e.select.on)&&delete t.events,(he(e.select)||!e.select.clear)&&delete t.clear,(he(e.select)||!e.select.toggle)&&delete t.toggle}function Sle(t){let e=[];return t.type==="Identifier"?[t.name]:t.type==="Literal"?[t.value]:(t.type==="MemberExpression"&&(e.push(...Sle(t.object)),e.push(...Sle(t.property))),e)}function C9e(t){return t.object.type==="MemberExpression"?C9e(t.object):t.object.name==="datum"}function Uj(t){let e=A6(t),r=new Set;return e.visit(n=>{n.type==="MemberExpression"&&C9e(n)&&r.add(Sle(n).slice(1).join("."))}),r}var Mf=class t extends Ge{constructor(e,r,n){super(e),this.model=r,this.filter=n,this.expr=w3(this.model,this.filter,this),this._dependentFields=Uj(this.expr)}clone(){return new t(null,this.model,we(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}};function R9e(t,e){var r;let n={},i=t.config.selection;if(!e||!e.length)return n;for(let s of e){let o=Lt(s.name),a=s.select,u=he(a)?a:a.type,l=Se(a)?we(a):{type:u},c=i[u];for(let x in c)x==="fields"||x==="encodings"||(x==="mark"&&(l[x]=Object.assign(Object.assign({},c[x]),l[x])),(l[x]===void 0||l[x]===!0)&&(l[x]=(r=c[x])!==null&&r!==void 0?r:l[x]));let f=n[o]=Object.assign(Object.assign({},l),{name:o,type:u,init:s.value,bind:s.bind,events:he(l.on)?Po(l.on,"scope"):le(we(l.on))});for(let x of Wv)x.defined(f)&&x.parse&&x.parse(t,f,s)}return n}function wj(t,e,r,n="datum"){let i=he(e)?e:e.param,s=Lt(i),o=fe(s+q0),a;try{a=t.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){let c=r??t.component.data.raw,f=a.project.timeUnit.clone();c.parent?f.insertAsParentOf(c):c.parent=f}let u=`vlSelectionTest(${o}, ${n}${a.resolve==="global"?")":`, ${fe(a.resolve)})`}`,l=`length(data(${o}))`;return e.empty===!1?`${l} && ${u}`:`!${l} || ${u}`}function Fj(t,e,r){let n=Lt(e),i=r.encoding,s=r.field,o;try{o=t.getSelectionComponent(n,e)}catch{return n}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&K(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${fe(s)}.`);else if(i&&!s){let a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,K((a.length?"Multiple ":"No ")+`matching ${fe(i)} encoding found for selection ${fe(r.param)}. Using "field": ${fe(s)}.`)):s=a[0].field}return`${o.name}[${fe(oi(s))}]`}function O9e(t,e){var r;for(let[n,i]of iu((r=t.component.selection)!==null&&r!==void 0?r:{})){let s=t.getName(`lookup_${n}`);t.component.data.outputNodes[s]=i.materialized=new on(new Mf(e,t,{param:n}),s,Pt.Lookup,t.component.data.outputNodeRefCounts)}}function w3(t,e,r){return YC(e,n=>he(n)?n:t5e(n)?wj(t,n,r):rB(n))}var $j=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function POt(t,e){if(t)return j(t)&&!x0(t)?t.map(r=>V6(r,e)).join(", "):t}function vle(t,e,r,n){var i,s,o,a,u;(i=t.encode)!==null&&i!==void 0||(t.encode={}),(s=(a=t.encode)[e])!==null&&s!==void 0||(a[e]={}),(o=(u=t.encode[e]).update)!==null&&o!==void 0||(u.update={}),t.encode[e].update[r]=n}function e_(t,e,r,n={header:!1}){var i,s;let o=t.combine(),{disable:a,orient:u,scale:l,labelExpr:c,title:f,zindex:x}=o,d=$j(o,["disable","orient","scale","labelExpr","title","zindex"]);if(!a){for(let h in d){let p=U7e[h],m=d[h];if(p&&p!==e&&p!=="both")delete d[h];else if(yd(m)){let{condition:g}=m,y=$j(m,["condition"]),A=le(g),S=que[h];if(S){let{vgProp:T,part:_}=S,b=[...A.map(R=>{let{test:O}=R,N=$j(R,["test"]);return Object.assign({test:w3(null,O)},N)}),y];vle(d,_,T,b),delete d[h]}else if(S===null){let T={signal:A.map(_=>{let{test:b}=_,R=$j(_,["test"]);return`${w3(null,b)} ? ${$ee(R)} : `}).join("")+$ee(y)};d[h]=T}}else if(be(m)){let g=que[h];if(g){let{vgProp:y,part:A}=g;vle(d,A,y,m),delete d[h]}}We(["labelAlign","labelBaseline"],h)&&d[h]===null&&delete d[h]}if(e==="grid"){if(!d.grid)return;if(d.encode){let{grid:h}=d.encode;d.encode=Object.assign({},h?{grid:h}:{}),mt(d.encode)&&delete d.encode}return Object.assign(Object.assign({scale:l,orient:u},d),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:It(x,0)})}else{if(!n.header&&t.mainExtracted)return;if(c!==void 0){let p=c;!((s=(i=d.encode)===null||i===void 0?void 0:i.labels)===null||s===void 0)&&s.update&&be(d.encode.labels.update.text)&&(p=tf(c,"datum.label",d.encode.labels.update.text.signal)),vle(d,"labels","text",{signal:p})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(let p of sj)t.hasAxisPart(p)||delete d.encode[p];mt(d.encode)&&delete d.encode}let h=POt(f,r);return Object.assign(Object.assign(Object.assign(Object.assign({scale:l,orient:u,grid:!1},h?{title:h}:{}),d),r.aria===!1?{aria:!1}:{}),{zindex:It(x,0)})}}}function jj(t){let{axes:e}=t.component,r=[];for(let n of ai)if(e[n]){for(let i of e[n])if(!i.get("disable")&&!i.get("gridScale")){let s=n==="x"?"height":"width",o=t.getSizeSignalRef(s).signal;s!==o&&r.push({name:s,update:o})}}return r}function D9e(t,e){let{x:r=[],y:n=[]}=t;return[...r.map(i=>e_(i,"grid",e)),...n.map(i=>e_(i,"grid",e)),...r.map(i=>e_(i,"main",e)),...n.map(i=>e_(i,"main",e))].filter(i=>i)}function N9e(t,e,r,n){return Object.assign.apply(null,[{},...t.map(i=>{if(i==="axisOrient"){let s=r==="x"?"bottom":"left",o=e[r==="x"?"axisBottom":"axisLeft"]||{},a=e[r==="x"?"axisTop":"axisRight"]||{},u=new Set([...H(o),...H(a)]),l={};for(let c of u.values())l[c]={signal:`${n.signal} === "${s}" ? ${xu(o[c])} : ${xu(a[c])}`};return l}return e[i]})])}function F9e(t,e,r,n){let i=e==="band"?["axisDiscrete","axisBand"]:e==="point"?["axisDiscrete","axisPoint"]:Cue(e)?["axisQuantitative"]:e==="time"||e==="utc"?["axisTemporal"]:[],s=t==="x"?"axisX":"axisY",o=be(r)?"axisOrient":`axis${yg(r)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:N9e(a,n,t,r),vgAxisConfig:N9e(u,n,t,r),axisConfigStyle:kOt([...u,...a],n)}}function kOt(t,e){var r;let n=[{}];for(let i of t){let s=(r=e[i])===null||r===void 0?void 0:r.style;if(s){s=le(s);for(let o of s)n.push(e.style[o])}}return Object.assign.apply(null,n)}function lD(t,e,r,n={}){var i;let s=Hee(t,r,e);if(s!==void 0)return{configFrom:"style",configValue:s};for(let o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((i=n[o])===null||i===void 0?void 0:i[t])!==void 0)return{configFrom:o,configValue:n[o][t]};return{}}var ble={scale:({model:t,channel:e})=>t.scaleName(e),format:({fieldOrDatumDef:t,config:e,axis:r})=>{let{format:n,formatType:i}=r;return V$(t,t.type,n,i,e,!0)},formatType:({axis:t,fieldOrDatumDef:e,scaleType:r})=>{let{formatType:n}=t;return W$(n,e,r)},grid:({fieldOrDatumDef:t,axis:e,scaleType:r})=>{var n;return(n=e.grid)!==null&&n!==void 0?n:BOt(r,t)},gridScale:({model:t,channel:e})=>qOt(t,e),labelAlign:({axis:t,labelAngle:e,orient:r,channel:n})=>t.labelAlign||Cle(e,r,n),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:e,orient:r,channel:n})=>t.labelBaseline||Tle(e,r,n),labelFlush:({axis:t,fieldOrDatumDef:e,channel:r})=>{var n;return(n=t.labelFlush)!==null&&n!==void 0?n:UOt(e.type,r)},labelOverlap:({axis:t,fieldOrDatumDef:e,scaleType:r})=>{var n;return(n=t.labelOverlap)!==null&&n!==void 0?n:$Ot(e.type,r,se(e)&&!!e.timeUnit,se(e)?e.sort:void 0)},orient:({orient:t})=>t,tickCount:({channel:t,model:e,axis:r,fieldOrDatumDef:n,scaleType:i})=>{var s;let o=t==="x"?"width":t==="y"?"height":void 0,a=o?e.getSizeSignalRef(o):void 0;return(s=r.tickCount)!==null&&s!==void 0?s:jOt({fieldOrDatumDef:n,scaleType:i,size:a,values:r.values})},title:({axis:t,model:e,channel:r})=>{if(t.title!==void 0)return t.title;let n=Rle(e,r);if(n!==void 0)return n;let i=e.typedFieldDef(r),s=r==="x"?"x2":"y2",o=e.fieldDef(s);return zee(i?[Mue(i)]:[],se(o)?[Mue(o)]:[])},values:({axis:t,fieldOrDatumDef:e})=>HOt(t,e),zindex:({axis:t,fieldOrDatumDef:e,mark:r})=>{var n;return(n=t.zindex)!==null&&n!==void 0?n:zOt(r,e)}};function BOt(t,e){return!or(t)&&se(e)&&!St(e?.bin)&&!qr(e?.bin)}function qOt(t,e){let r=e==="x"?"y":"x";if(t.getScaleComponent(r))return t.scaleName(r)}function w9e(t,e,r,n,i){let s=e?.labelAngle;if(s!==void 0)return be(s)?s:Eg(s);{let{configValue:o}=lD("labelAngle",n,e?.style,i);return o!==void 0?Eg(o):r===Ht&&We([P6,M6],t.type)&&!(se(t)&&t.timeUnit)?270:void 0}}function _le(t){return`(((${t.signal} % 360) + 360) % 360)`}function Tle(t,e,r,n){if(t!==void 0)if(r==="x"){if(be(t)){let i=_le(t),s=be(e)?`(${e.signal} === "top")`:e==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<t&&t<135||225<t&&t<315)return"middle";if(be(e)){let i=t<=45||315<=t?"===":"!==";return{signal:`${e.signal} ${i} "top" ? "bottom" : "top"`}}return(t<=45||315<=t)==(e==="top")?"bottom":"top"}else{if(be(t)){let i=_le(t),s=be(e)?`(${e.signal} === "left")`:e==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${n?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(t<=45||315<=t||135<=t&&t<=225)return n?"middle":null;if(be(e)){let i=45<=t&&t<=135?"===":"!==";return{signal:`${e.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=t&&t<=135)==(e==="left")?"top":"bottom"}}function Cle(t,e,r){if(t===void 0)return;let n=r==="x",i=n?0:90,s=n?"bottom":"left";if(be(t)){let o=_le(t),a=be(e)?`(${e.signal} === "${s}")`:e===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${n?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((t+i)%180===0)return n?null:"center";if(be(e)){let o=i<t&&t<180+i?"===":"!==";return{signal:`${`${e.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<t&&t<180+i)==(e===s)?"left":"right"}function UOt(t,e){if(e==="x"&&We(["quantitative","temporal"],t))return!0}function $Ot(t,e,r,n){if(r&&!Se(n)||t!=="nominal"&&t!=="ordinal")return e==="log"||e==="symlog"?"greedy":!0}function L9e(t){return t==="x"?"bottom":"left"}function jOt({fieldOrDatumDef:t,scaleType:e,size:r,values:n}){var i;if(!n&&!or(e)&&e!=="log"){if(se(t)){if(St(t.bin))return{signal:`ceil(${r.signal}/10)`};if(t.timeUnit&&We(["month","hours","day","quarter"],(i=nn(t.timeUnit))===null||i===void 0?void 0:i.unit))return}return{signal:`ceil(${r.signal}/40)`}}}function Rle(t,e){let r=e==="x"?"x2":"y2",n=t.fieldDef(e),i=t.fieldDef(r),s=n?n.title:void 0,o=i?i.title:void 0;if(s&&o)return Gee(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function HOt(t,e){let r=t.values;if(j(r))return ij(e,r);if(be(r))return r}function zOt(t,e){return t==="rect"&&Q6(e)?1:0}var L3=class t extends Ge{constructor(e,r){super(e),this.transform=r,this._dependentFields=Uj(this.transform.calculate)}clone(){return new t(null,we(this.transform))}static parseAllForSortIndex(e,r){return r.forEachFieldDef((n,i)=>{if(Al(n)&&K$(n.sort)){let{field:s,timeUnit:o}=n,a=n.sort,u=a.map((l,c)=>`${rB({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;e=new t(e,{calculate:u,as:Pf(n,i,{forAs:!0})})}}),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${$e(this.transform)}`}};function Pf(t,e,r){return ue(t,Object.assign({prefix:e,suffix:"sort_index"},r??{}))}function t_(t,e){return We(["top","bottom"],e)?"column":We(["left","right"],e)||t==="row"?"row":"column"}function bd(t,e,r,n){let i=n==="row"?r.headerRow:n==="column"?r.headerColumn:r.headerFacet;return It((e||{})[t],i[t],r.header[t])}function cD(t,e,r,n){let i={};for(let s of t){let o=bd(s,e||{},r,n);o!==void 0&&(i[s]=o)}return i}var r_=["row","column"],n_=["header","footer"];function I9e(t,e){let r=t.component.layoutHeaders[e].title,n=t.config?t.config:void 0,i=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=cD(["titleAnchor","titleAngle","titleOrient"],i.header,n,e),u=t_(e,a),l=Eg(o);return{name:`${e}-title`,type:"group",role:`${u}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:r},e==="row"?{orient:"left"}:{}),{style:"guide-title"}),P9e(l,u)),M9e(u,l,s)),q9e(n,i,e,o8e,Kue))}}function M9e(t,e,r="middle"){switch(r){case"start":return{align:"left"};case"end":return{align:"right"}}let n=Cle(e,t==="row"?"left":"top",t==="row"?"y":"x");return n?{align:n}:{}}function P9e(t,e){let r=Tle(t,e==="row"?"left":"top",e==="row"?"y":"x",!0);return r?{baseline:r}:{}}function k9e(t,e){let r=t.component.layoutHeaders[e],n=[];for(let i of n_)if(r[i])for(let s of r[i]){let o=QOt(t,e,i,r,s);o!=null&&n.push(o)}return n}function GOt(t,e){var r;let{sort:n}=t;return Wi(n)?{field:ue(n,{expr:"datum"}),order:(r=n.order)!==null&&r!==void 0?r:"ascending"}:j(n)?{field:Pf(t,e,{expr:"datum"}),order:"ascending"}:{field:ue(t,{expr:"datum"}),order:n??"ascending"}}function Hj(t,e,r){let{format:n,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=cD(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t.header,r,e),l=Mv({fieldOrDatumDef:t,format:n,formatType:i,expr:"parent",config:r}).signal,c=t_(e,a);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:u?tf(tf(u,"datum.label",l),"datum.value",ue(t,{expr:"parent"})):l}},e==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),P9e(s,c)),M9e(c,s,o)),q9e(r,t,e,a8e,Xue))}function QOt(t,e,r,n,i){if(i){let s=null,{facetFieldDef:o}=n,a=t.config?t.config:void 0;if(o&&i.labels){let{labelOrient:f}=cD(["labelOrient"],o.header,a,e);(e==="row"&&!We(["top","bottom"],f)||e==="column"&&!We(["left","right"],f))&&(s=Hj(o,e,a))}let u=Yi(t)&&!Nf(t.facet),l=i.axes,c=l?.length>0;if(s||c){let f=e==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName(`${e}_${r}`),type:"group",role:`${e}-${r}`},n.facetFieldDef?{from:{data:t.getName(`${e}_domain`)},sort:GOt(o,e)}:{}),c&&u?{from:{data:t.getName(`facet_domain_${e}`)}}:{}),s?{title:s}:{}),i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{}),c?{axes:l}:{})}}return null}var VOt={column:{start:0,end:1},row:{start:1,end:0}};function WOt(t,e){return VOt[e][t]}function B9e(t,e){let r={};for(let n of qi){let i=t[n];if(i?.facetFieldDef){let{titleAnchor:s,titleOrient:o}=cD(["titleAnchor","titleOrient"],i.facetFieldDef.header,e,n),a=t_(n,o),u=WOt(s,a);u!==void 0&&(r[a]=u)}}return mt(r)?void 0:r}function q9e(t,e,r,n,i){let s={};for(let o of n){if(!i[o])continue;let a=bd(o,e?.header,t,r);a!==void 0&&(s[i[o]]=a)}return s}function i_(t){return[...zj(t,"width"),...zj(t,"height"),...zj(t,"childWidth"),...zj(t,"childHeight")]}function zj(t,e){let r=e==="width"?"x":"y",n=t.component.layoutSize.get(e);if(!n||n==="merged")return[];let i=t.getSizeSignalRef(e).signal;if(n==="step"){let s=t.getScaleComponent(r);if(s){let o=s.get("type"),a=s.get("range");if(or(o)&&zs(a)){let u=t.scaleName(r);return Yi(t.parent)&&t.parent.component.resolve.scale[r]==="independent"?[U9e(u,a)]:[U9e(u,a),{name:i,update:Ole(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(n=="container"){let s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=tD(t.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:n}]}function U9e(t,e){let r=`${t}_step`;return be(e.step)?{name:r,update:e.step.signal}:{name:r,value:e.step}}function Ole(t,e,r){let n=e.get("type"),i=e.get("padding"),s=It(e.get("paddingOuter"),i),o=e.get("paddingInner");return o=n==="band"?o!==void 0?o:i:1,`bandspace(${r}, ${xu(o)}, ${xu(s)}) * ${t}_step`}function Gj(t){return t==="childWidth"?"width":t==="childHeight"?"height":t}function Qj(t,e){return H(t).reduce((r,n)=>{let i=t[n];return Object.assign(Object.assign({},r),Ca(e,i,n,s=>vt(s.value)))},{})}function Vj(t,e){if(Yi(e))return t==="theta"?"independent":"shared";if(bl(e))return"shared";if(o_(e))return Ar(t)||t==="theta"||t==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function s_(t,e){let r=t.scale[e],n=Ar(e)?"axis":"legend";return r==="independent"?(t[n][e]==="shared"&&K(z.independentScaleMeansIndependentGuide(e)),"independent"):t[n][e]||"shared"}var YOt=Object.assign(Object.assign({},Zue),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),Dle=H(YOt),Wj=class extends io{};var Nle={symbols:KOt,gradient:XOt,labels:JOt,entries:ZOt};function KOt(t,{fieldOrDatumDef:e,model:r,channel:n,legendCmpt:i,legendType:s}){var o,a,u,l,c,f,x,d;if(s!=="symbol")return;let{markDef:h,encoding:p,config:m,mark:g}=r,y=h.filled&&g!=="trail",A=Object.assign(Object.assign({},U_e({},r,m7e)),Xv(r,{filled:y})),S=(o=i.get("symbolOpacity"))!==null&&o!==void 0?o:m.legend.symbolOpacity,T=(a=i.get("symbolFillColor"))!==null&&a!==void 0?a:m.legend.symbolFillColor,_=(u=i.get("symbolStrokeColor"))!==null&&u!==void 0?u:m.legend.symbolStrokeColor,b=S===void 0?(l=$9e(p.opacity))!==null&&l!==void 0?l:h.opacity:void 0;if(A.fill){if(n==="fill"||y&&n===hn)delete A.fill;else if(A.fill.field)T?delete A.fill:(A.fill=vt((c=m.legend.symbolBaseFillColor)!==null&&c!==void 0?c:"black"),A.fillOpacity=vt(b??1));else if(j(A.fill)){let R=(d=(x=Yj((f=p.fill)!==null&&f!==void 0?f:p.color))!==null&&x!==void 0?x:h.fill)!==null&&d!==void 0?d:y&&h.color;R&&(A.fill=vt(R))}}if(A.stroke){if(n==="stroke"||!y&&n===hn)delete A.stroke;else if(A.stroke.field||_)delete A.stroke;else if(j(A.stroke)){let R=It(Yj(p.stroke||p.color),h.stroke,y?h.color:void 0);R&&(A.stroke={value:R})}}if(n!==bo){let R=se(e)&&H9e(r,i,e);R?A.opacity=[Object.assign({test:R},vt(b??1)),vt(m.legend.unselectedOpacity)]:b&&(A.opacity=vt(b))}return A=Object.assign(Object.assign({},A),t),mt(A)?void 0:A}function XOt(t,{model:e,legendType:r,legendCmpt:n}){var i;if(r!=="gradient")return;let{config:s,markDef:o,encoding:a}=e,u={},c=((i=n.get("gradientOpacity"))!==null&&i!==void 0?i:s.legend.gradientOpacity)===void 0?$9e(a.opacity)||o.opacity:void 0;return c&&(u.opacity=vt(c)),u=Object.assign(Object.assign({},u),t),mt(u)?void 0:u}function JOt(t,{fieldOrDatumDef:e,model:r,channel:n,legendCmpt:i}){let s=r.legend(n)||{},o=r.config,a=se(e)?H9e(r,i,e):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s,f=Df(c)?G6({fieldOrDatumDef:e,field:"datum.value",format:l,formatType:c,config:o}):void 0,x=Object.assign(Object.assign(Object.assign({},u?{opacity:u}:{}),f?{text:f}:{}),t);return mt(x)?void 0:x}function ZOt(t,{legendCmpt:e}){let r=e.get("selections");return r?.length?Object.assign(Object.assign({},t),{fill:{value:"transparent"}}):t}function $9e(t){return j9e(t,(e,r)=>Math.max(e,r.value))}function Yj(t){return j9e(t,(e,r)=>It(e,r.value))}function j9e(t,e){if(L7e(t))return le(t.condition).reduce(e,t.value);if(Kn(t))return t.value}function H9e(t,e,r){let n=e.get("selections");if(!n?.length)return;let i=fe(r.field);return n.map(s=>`(!length(data(${fe(Lt(s)+q0)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}var Fle={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:e,config:r})=>{let{format:n,formatType:i}=e;return V$(t,t.type,n,i,r,!1)},formatType:({legend:t,fieldOrDatumDef:e,scaleType:r})=>{let{formatType:n}=t;return W$(n,e,r)},gradientLength:t=>{var e,r;let{legend:n,legendConfig:i}=t;return(r=(e=n.gradientLength)!==null&&e!==void 0?e:i.gradientLength)!==null&&r!==void 0?r:i6t(t)},labelOverlap:({legend:t,legendConfig:e,scaleType:r})=>{var n,i;return(i=(n=t.labelOverlap)!==null&&n!==void 0?n:e.labelOverlap)!==null&&i!==void 0?i:s6t(r)},symbolType:({legend:t,markDef:e,channel:r,encoding:n})=>{var i;return(i=t.symbolType)!==null&&i!==void 0?i:t6t(e.type,r,n.shape,e.shape)},title:({fieldOrDatumDef:t,config:e})=>Ff(t,e,{allowDisabling:!0}),type:({legendType:t,scaleType:e,channel:r})=>{if($x(r)&&va(e)){if(t==="gradient")return}else if(t==="symbol")return;return t},values:({fieldOrDatumDef:t,legend:e})=>e6t(e,t)};function e6t(t,e){let r=t.values;if(j(r))return ij(e,r);if(be(r))return r}function t6t(t,e,r,n){var i;if(e!=="shape"){let s=(i=Yj(r))!==null&&i!==void 0?i:n;if(s)return s}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function G9e(t){let{legend:e}=t;return It(e.type,r6t(t))}function r6t({channel:t,timeUnit:e,scaleType:r}){if($x(t)){if(We(["quarter","month","day"],e))return"symbol";if(va(r))return"gradient"}return"symbol"}function Q9e({legendConfig:t,legendType:e,orient:r,legend:n}){var i,s;return(s=(i=n.direction)!==null&&i!==void 0?i:t[e?"gradientDirection":"symbolDirection"])!==null&&s!==void 0?s:n6t(r,e)}function n6t(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return e==="gradient"?"horizontal":void 0}}function i6t({legendConfig:t,model:e,direction:r,orient:n,scaleType:i}){let{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=t;if(va(i))return r==="horizontal"?n==="top"||n==="bottom"?z9e(e,"width",o,s):o:z9e(e,"height",u,a)}function z9e(t,e,r,n){return{signal:`clamp(${t.getSizeSignalRef(e).signal}, ${r}, ${n})`}}function s6t(t){if(We(["quantile","threshold","log","symlog"],t))return"greedy"}function wle(t){let e=tr(t)?o6t(t):c6t(t);return t.component.legends=e,e}function o6t(t){let{encoding:e}=t,r={};for(let n of[hn,...pj]){let i=er(e[n]);!i||!t.getScaleComponent(n)||n===tn&&se(i)&&i.type===k0||(r[n]=l6t(t,n))}return r}function a6t(t,e){let r=t.scaleName(e);if(t.mark==="trail"){if(e==="color")return{stroke:r};if(e==="size")return{strokeWidth:r}}return e==="color"?t.markDef.filled?{fill:r}:{stroke:r}:{[e]:r}}function u6t(t,e,r,n){switch(e){case"disable":return r!==void 0;case"values":return!!r?.values;case"title":if(e==="title"&&t===n?.title)return!0}return t===(r||{})[e]}function l6t(t,e){var r,n,i;let s=t.legend(e),{markDef:o,encoding:a,config:u}=t,l=u.legend,c=new Wj({},a6t(t,e));g9e(t,e,c);let f=s!==void 0?!s:l.disable;if(c.set("disable",f,s!==void 0),f)return c;s=s||{};let x=t.getScaleComponent(e).get("type"),d=er(a[e]),h=se(d)?(r=nn(d.timeUnit))===null||r===void 0?void 0:r.unit:void 0,p=s.orient||u.legend.orient||"right",m=G9e({legend:s,channel:e,timeUnit:h,scaleType:x}),g=Q9e({legend:s,legendType:m,orient:p,legendConfig:l}),y={legend:s,channel:e,model:t,markDef:o,encoding:a,fieldOrDatumDef:d,legendConfig:l,config:u,scaleType:x,orient:p,legendType:m,direction:g};for(let b of Dle){if(m==="gradient"&&b.startsWith("symbol")||m==="symbol"&&b.startsWith("gradient"))continue;let R=b in Fle?Fle[b](y):s[b];if(R!==void 0){let O=u6t(R,b,s,t.fieldDef(e));(O||u.legend[b]===void 0)&&c.set(b,R,O)}}let A=(n=s?.encoding)!==null&&n!==void 0?n:{},S=c.get("selections"),T={},_={fieldOrDatumDef:d,model:t,channel:e,legendCmpt:c,legendType:m};for(let b of["labels","legend","title","symbols","gradient","entries"]){let R=Qj((i=A[b])!==null&&i!==void 0?i:{},t),O=b in Nle?Nle[b](R,_):R;O!==void 0&&!mt(O)&&(T[b]=Object.assign(Object.assign(Object.assign({},S?.length&&se(d)?{name:`${Lt(d.field)}_legend_${b}`}:{}),S?.length?{interactive:!!S}:{}),{update:O}))}return mt(T)||c.set("encode",T,!!s?.encoding),c}function c6t(t){let{legends:e,resolve:r}=t.component;for(let n of t.children){wle(n);for(let i of H(n.component.legends))r.legend[i]=s_(t.component.resolve,i),r.legend[i]==="shared"&&(e[i]=Lle(e[i],n.component.legends[i]),e[i]||(r.legend[i]="independent",delete e[i]))}for(let n of H(e))for(let i of t.children)i.component.legends[n]&&r.legend[n]==="shared"&&delete i.component.legends[n];return e}function Lle(t,e){var r,n,i,s;if(!t)return e.clone();let o=t.getWithExplicit("orient"),a=e.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;let u=!1;for(let l of Dle){let c=Ta(t.getWithExplicit(l),e.getWithExplicit(l),l,"legend",(f,x)=>{switch(l){case"symbolType":return f6t(f,x);case"title":return Vk(f,x);case"type":return u=!0,so("symbol")}return Vv(f,x,l,"legend")});t.setWithExplicit(l,c)}return u&&(!((n=(r=t.implicit)===null||r===void 0?void 0:r.encode)===null||n===void 0)&&n.gradient&&Rk(t.implicit,["encode","gradient"]),!((s=(i=t.explicit)===null||i===void 0?void 0:i.encode)===null||s===void 0)&&s.gradient&&Rk(t.explicit,["encode","gradient"])),t}function f6t(t,e){return e.value==="circle"?e:t}var x6t=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function d6t(t,e,r,n){var i,s,o,a,u;(i=t.encode)!==null&&i!==void 0||(t.encode={}),(s=(a=t.encode)[e])!==null&&s!==void 0||(a[e]={}),(o=(u=t.encode[e]).update)!==null&&o!==void 0||(u.update={}),t.encode[e].update[r]=n}function Kj(t){let e=t.component.legends,r={};for(let i of H(e)){let s=t.getScaleComponent(i),o=jt(s.get("domains"));if(r[o])for(let a of r[o])Lle(a,e[i])||r[o].push(e[i]);else r[o]=[e[i].clone()]}return en(r).flat().map(i=>h6t(i,t.config)).filter(i=>i!==void 0)}function h6t(t,e){var r,n,i;let s=t.combine(),{disable:o,labelExpr:a,selections:u}=s,l=x6t(s,["disable","labelExpr","selections"]);if(!o){if(e.aria===!1&&l.aria==null&&(l.aria=!1),!((r=l.encode)===null||r===void 0)&&r.symbols){let c=l.encode.symbols.update;c.fill&&c.fill.value!=="transparent"&&!c.stroke&&!l.stroke&&(c.stroke={value:"transparent"});for(let f of pj)l[f]&&delete c[f]}if(l.title||delete l.title,a!==void 0){let c=a;!((i=(n=l.encode)===null||n===void 0?void 0:n.labels)===null||i===void 0)&&i.update&&be(l.encode.labels.update.text)&&(c=tf(a,"datum.label",l.encode.labels.update.text.signal)),d6t(l,"labels","text",{signal:c})}return l}}function V9e(t){return bl(t)||o_(t)?p6t(t):W9e(t)}function p6t(t){return t.children.reduce((e,r)=>e.concat(r.assembleProjections()),W9e(t))}function W9e(t){let e=t.component.projection;if(!e||e.merged)return[];let r=e.combine(),{name:n}=r;if(e.data){let i={signal:`[${e.size.map(o=>o.signal).join(", ")}]`},s=e.data.reduce((o,a)=>{let u=be(a)?a.signal:`data('${t.lookupDataSource(a)}')`;return We(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:n,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]}},r)]}else return[Object.assign(Object.assign({name:n},{translate:{signal:"[width / 2, height / 2]"}}),r)]}var Y9e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];var fD=class extends io{constructor(e,r,n,i){super(Object.assign({},r),{name:e}),this.specifiedProjection=r,this.size=n,this.data=i,this.merged=!1}get isFit(){return!!this.data}};function Ile(t){t.component.projection=tr(t)?m6t(t):E6t(t)}function m6t(t){var e;if(t.hasProjection){let r=zn(t.specifiedProjection),n=!(r&&(r.scale!=null||r.translate!=null)),i=n?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,s=n?g6t(t):void 0,o=new fD(t.projectionName(!0),Object.assign(Object.assign({},(e=zn(t.config.projection))!==null&&e!==void 0?e:{}),r??{}),i,s);return o.get("type")||o.set("type","equalEarth",!1),o}}function g6t(t){let e=[],{encoding:r}=t;for(let n of[[_o,vo],[fs,qs]])(er(r[n[0]])||er(r[n[1]]))&&e.push({signal:t.getName(`geojson_${e.length}`)});return t.channelHasField(tn)&&t.typedFieldDef(tn).type===k0&&e.push({signal:t.getName(`geojson_${e.length}`)}),e.length===0&&e.push(t.requestDataName(Pt.Main)),e}function y6t(t,e){let r=Nee(Y9e,i=>!!(!Fe(t.explicit,i)&&!Fe(e.explicit,i)||Fe(t.explicit,i)&&Fe(e.explicit,i)&&sa(t.get(i),e.get(i))));if(sa(t.size,e.size)){if(r)return t;if(sa(t.explicit,{}))return e;if(sa(e.explicit,{}))return t}return null}function E6t(t){if(t.children.length===0)return;let e;for(let n of t.children)Ile(n);let r=Nee(t.children,n=>{let i=n.component.projection;if(i)if(e){let s=y6t(e,i);return s&&(e=s),!!s}else return e=i,!0;else return!0});if(e&&r){let n=t.projectionName(!0),i=new fD(n,e.specifiedProjection,e.size,we(e.data));for(let s of t.children){let o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),n),o.merged=!0)}return i}}var A6t=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function S6t(t,e,r,n){var i,s;if(Of(e,r)){let o=tr(t)?(s=(i=t.axis(r))!==null&&i!==void 0?i:t.legend(r))!==null&&s!==void 0?s:{}:{},a=ue(e,{expr:"datum"}),u=ue(e,{expr:"datum",binSuffix:"end"});return{formulaAs:ue(e,{binSuffix:"range",forAs:!0}),formula:Pv(a,u,o.format,o.formatType,n)}}return{}}function X9e(t,e){return`${jk(t)}_${e}`}function v6t(t,e){return{signal:t.getName(`${e}_bins`),extentSignal:t.getName(`${e}_extent`)}}function a_(t,e,r){var n;let i=(n=c4(r,void 0))!==null&&n!==void 0?n:{},s=X9e(i,e);return t.getName(`${s}_bins`)}function _6t(t){return"as"in t}function K9e(t,e,r){let n,i;_6t(t)?n=he(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:n=[ue(t,{forAs:!0}),ue(t,{binSuffix:"end",forAs:!0})];let s=Object.assign({},c4(e,void 0)),o=X9e(s,t.field),{signal:a,extentSignal:u}=v6t(r,o);if(l4(s.extent)){let c=s.extent;i=Fj(r,c.param,c),delete s.extent}let l=Object.assign(Object.assign(Object.assign({bin:s,field:t.field,as:[n]},a?{signal:a}:{}),u?{extentSignal:u}:{}),i?{span:i}:{});return{key:o,binComponent:l}}var U0=class t extends Ge{constructor(e,r){super(e),this.bins=r}clone(){return new t(null,we(this.bins))}static makeFromEncoding(e,r){let n=r.reduceFieldDef((i,s,o)=>{if(xi(s)&&St(s.bin)){let{key:a,binComponent:u}=K9e(s,s.bin,r);i[a]=Object.assign(Object.assign(Object.assign({},u),i[a]),S6t(r,s,o,r.config))}return i},{});return mt(n)?null:new t(e,n)}static makeFromTransform(e,r,n){let{key:i,binComponent:s}=K9e(r,r.bin,n);return new t(e,{[i]:s})}merge(e,r){for(let n of H(e.bins))n in this.bins?(r(e.bins[n].signal,this.bins[n].signal),this.bins[n].as=Ao([...this.bins[n].as,...e.bins[n].as],$e)):this.bins[n]=e.bins[n];for(let n of e.children)e.removeChild(n),n.parent=this;e.remove()}producedFields(){return new Set(en(this.bins).map(e=>e.as).flat(2))}dependentFields(){return new Set(en(this.bins).map(e=>e.field))}hash(){return`Bin ${$e(this.bins)}`}assemble(){return en(this.bins).flatMap(e=>{let r=[],[n,...i]=e.as,s=e.bin,{extent:o}=s,a=A6t(s,["extent"]),u=Object.assign(Object.assign(Object.assign({type:"bin",field:oi(e.field),as:n,signal:e.signal},l4(o)?{extent:null}:{extent:o}),e.span?{span:{signal:`span(${e.span})`}}:{}),a);!o&&e.extentSignal&&(r.push({type:"extent",field:oi(e.field),signal:e.extentSignal}),u.extent={signal:e.extentSignal}),r.push(u);for(let l of i)for(let c=0;c<2;c++)r.push({type:"formula",expr:ue({field:n[c]},{expr:"datum"}),as:l[c]});return e.formula&&r.push({type:"formula",expr:e.formula,as:e.formulaAs}),r})}};function b6t(t,e,r,n){var i;let s=tr(n)?n.encoding[js(e)]:void 0;if(xi(r)&&tr(n)&&ej(r,s,n.markDef,n.config))t.add(ue(r,{})),t.add(ue(r,{suffix:"end"})),r.bin&&Of(r,e)&&t.add(ue(r,{binSuffix:"range"}));else if(d_e(e)){let o=x_e(e);t.add(n.getName(o))}else t.add(ue(r));return Al(r)&&u7e((i=r.scale)===null||i===void 0?void 0:i.range)&&t.add(r.scale.range.field),t}function T6t(t,e){var r;for(let n of H(e)){let i=e[n];for(let s of H(i))n in t?t[n][s]=new Set([...(r=t[n][s])!==null&&r!==void 0?r:[],...i[s]]):t[n]={[s]:i[s]}}}var vu=class t extends Ge{constructor(e,r,n){super(e),this.dimensions=r,this.measures=n}clone(){return new t(null,new Set(this.dimensions),we(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(e,r){let n=!1;r.forEachFieldDef(o=>{o.aggregate&&(n=!0)});let i={},s=new Set;return!n||(r.forEachFieldDef((o,a)=>{var u,l,c,f;let{aggregate:x,field:d}=o;if(x)if(x==="count")(u=i["*"])!==null&&u!==void 0||(i["*"]={}),i["*"].count=new Set([ue(o,{forAs:!0})]);else{if(fu(x)||el(x)){let h=fu(x)?"argmin":"argmax",p=x[h];(l=i[p])!==null&&l!==void 0||(i[p]={}),i[p][h]=new Set([ue({op:h,field:p},{forAs:!0})])}else(c=i[d])!==null&&c!==void 0||(i[d]={}),i[d][x]=new Set([ue(o,{forAs:!0})]);Hs(a)&&r.scaleDomain(a)==="unaggregated"&&((f=i[d])!==null&&f!==void 0||(i[d]={}),i[d].min=new Set([ue({field:d,aggregate:"min"},{forAs:!0})]),i[d].max=new Set([ue({field:d,aggregate:"max"},{forAs:!0})]))}else b6t(s,a,o,r)}),s.size+H(i).length===0)?null:new t(e,s,i)}static makeFromTransform(e,r){var n,i,s;let o=new Set,a={};for(let u of r.aggregate){let{op:l,field:c,as:f}=u;l&&(l==="count"?((n=a["*"])!==null&&n!==void 0||(a["*"]={}),a["*"].count=new Set([f||ue(u,{forAs:!0})])):((i=a[c])!==null&&i!==void 0||(a[c]={}),a[c][l]=new Set([f||ue(u,{forAs:!0})])))}for(let u of(s=r.groupby)!==null&&s!==void 0?s:[])o.add(u);return o.size+H(a).length===0?null:new t(e,o,a)}merge(e){return a_e(this.dimensions,e.dimensions)?(T6t(this.measures,e.measures),!0):(z_e("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...H(this.measures)])}producedFields(){let e=new Set;for(let r of H(this.measures))for(let n of H(this.measures[r])){let i=this.measures[r][n];i.size===0?e.add(`${n}_${r}`):i.forEach(e.add,e)}return e}hash(){return`Aggregate ${$e({dimensions:this.dimensions,measures:this.measures})}`}assemble(){let e=[],r=[],n=[];for(let s of H(this.measures))for(let o of H(this.measures[s]))for(let a of this.measures[s][o])n.push(a),e.push(o),r.push(s==="*"?null:oi(s));return{type:"aggregate",groupby:[...this.dimensions].map(oi),ops:e,fields:r,as:n}}};var Cl=class extends Ge{constructor(e,r,n,i){super(e),this.model=r,this.name=n,this.data=i;for(let s of qi){let o=r.facet[s];if(o){let{bin:a,sort:u}=o;this[s]=Object.assign({name:r.getName(`${s}_domain`),fields:[ue(o),...St(a)?[ue(o,{binSuffix:"end"})]:[]]},Wi(u)?{sortField:u}:j(u)?{sortIndexField:Pf(o,s)}:{})}}this.childModel=r.child}hash(){let e="Facet";for(let r of qi)this[r]&&(e+=` ${r.charAt(0)}:${$e(this[r])}`);return e}get fields(){var e;let r=[];for(let n of qi)!((e=this[n])===null||e===void 0)&&e.fields&&r.push(...this[n].fields);return r}dependentFields(){let e=new Set(this.fields);for(let r of qi)this[r]&&(this[r].sortField&&e.add(this[r].sortField.field),this[r].sortIndexField&&e.add(this[r].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){let e={};for(let r of ai){let n=this.childModel.component.scales[r];if(n&&!n.merged){let i=n.get("type"),s=n.get("range");if(or(i)&&zs(s)){let o=s1(this.childModel,r),a=u_(o);a?e[r]=a:K(z.unknownField(r))}}}return e}assembleRowColumnHeaderData(e,r,n){let i={row:"y",column:"x",facet:void 0}[e],s=[],o=[],a=[];i&&n&&n[i]&&(r?(s.push(`distinct_${n[i]}`),o.push("max")):(s.push(n[i]),o.push("distinct")),a.push(`distinct_${n[i]}`));let{sortField:u,sortIndexField:l}=this[e];if(u){let{op:c=Q2,field:f}=u;s.push(f),o.push(c),a.push(ue(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[e].name,source:r??this.data,transform:[Object.assign({type:"aggregate",groupby:this[e].fields},s.length?{fields:s,ops:o,as:a}:{})]}}assembleFacetHeaderData(e){var r,n;let{columns:i}=this.model.layout,{layoutHeaders:s}=this.model.component,o=[],a={};for(let c of r_){for(let f of n_){let x=(r=s[c]&&s[c][f])!==null&&r!==void 0?r:[];for(let d of x)if(((n=d.axes)===null||n===void 0?void 0:n.length)>0){a[c]=!0;break}}if(a[c]){let f=`length(data("${this.facet.name}"))`,x=c==="row"?i?{signal:`ceil(${f} / ${i})`}:1:i?{signal:`min(${f}, ${i})`}:{signal:f};o.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:x}]})}}let{row:u,column:l}=a;return(u||l)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,e)),o}assemble(){var e,r;let n=[],i=null,s=this.getChildIndependentFieldsWithStep(),{column:o,row:a,facet:u}=this;if(o&&a&&(s.x||s.y)){i=`cross_${this.column.name}_${this.row.name}`;let l=[].concat((e=s.x)!==null&&e!==void 0?e:[],(r=s.y)!==null&&r!==void 0?r:[]),c=l.map(()=>"distinct");n.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:l,ops:c}]})}for(let l of[aa,oa])this[l]&&n.push(this.assembleRowColumnHeaderData(l,i,s));if(u){let l=this.assembleFacetHeaderData(s);l&&n.push(...l)}return n}};function J9e(t){return t.startsWith("'")&&t.endsWith("'")||t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function C6t(t,e){let r=Ok(t);if(e==="number")return`toNumber(${r})`;if(e==="boolean")return`toBoolean(${r})`;if(e==="string")return`toString(${r})`;if(e==="date")return`toDate(${r})`;if(e==="flatten")return r;if(e.startsWith("date:")){let n=J9e(e.slice(5,e.length));return`timeParse(${r},'${n}')`}else if(e.startsWith("utc:")){let n=J9e(e.slice(4,e.length));return`utcParse(${r},'${n}')`}else return K(z.unrecognizedParse(e)),null}function Z9e(t){let e={};return WC(t.filter,r=>{var n;if(Yee(r)){let i=null;Yk(r)?i=Ui(r.equal):Xk(r)?i=Ui(r.lte):Kk(r)?i=Ui(r.lt):Jk(r)?i=Ui(r.gt):Zk(r)?i=Ui(r.gte):eB(r)?i=r.range[0]:tB(r)&&(i=((n=r.oneOf)!==null&&n!==void 0?n:r.in)[0]),i&&(tl(i)?e[r.field]="date":Ct(i)?e[r.field]="number":he(i)&&(e[r.field]="string")),r.timeUnit&&(e[r.field]="date")}}),e}function eLe(t){let e={};function r(n){md(n)?e[n.field]="date":n.type==="quantitative"&&F_e(n.aggregate)?e[n.field]="number":r4(n.field)>1?n.field in e||(e[n.field]="flatten"):Al(n)&&Wi(n.sort)&&r4(n.sort.field)>1&&(n.sort.field in e||(e[n.sort.field]="flatten"))}if((tr(t)||Yi(t))&&t.forEachFieldDef((n,i)=>{if(xi(n))r(n);else{let s=cu(i),o=t.fieldDef(s);r(Object.assign(Object.assign({},n),{type:o.type}))}}),tr(t)){let{mark:n,markDef:i,encoding:s}=t;if(ro(n)&&!t.encoding.order){let o=i.orient==="horizontal"?"y":"x",a=s[o];se(a)&&a.type==="quantitative"&&!(a.field in e)&&(e[a.field]="number")}}return e}function tLe(t){let e={};if(tr(t)&&t.component.selection)for(let r of H(t.component.selection)){let n=t.component.selection[r];for(let i of n.project.items)!i.channel&&r4(i.field)>1&&(e[i.field]="flatten")}return e}var Ki=class t extends Ge{constructor(e,r){super(e),this._parse=r}clone(){return new t(null,we(this._parse))}hash(){return`Parse ${$e(this._parse)}`}static makeExplicit(e,r,n){var i;let s={},o=r.data;return!B0(o)&&(!((i=o?.format)===null||i===void 0)&&i.parse)&&(s=o.format.parse),this.makeWithAncestors(e,s,{},n)}static makeWithAncestors(e,r,n,i){for(let a of H(n)){let u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===n[a]||u.value==="derived"||n[a]==="flatten"?delete n[a]:K(z.differentParse(a,n[a],u.value)))}for(let a of H(r)){let u=i.get(a);u!==void 0&&(u===r[a]?delete r[a]:K(z.differentParse(a,r[a],u)))}let s=new io(r,n);i.copyAll(s);let o={};for(let a of H(s.combine())){let u=s.get(a);u!==null&&(o[a]=u)}return H(o).length===0||i.parseNothing?null:new t(e,o)}get parse(){return this._parse}merge(e){this._parse=Object.assign(Object.assign({},this._parse),e.parse),e.remove()}assembleFormatParse(){let e={};for(let r of H(this._parse)){let n=this._parse[r];r4(r)===1&&(e[r]=n)}return e}producedFields(){return new Set(H(this._parse))}dependentFields(){return new Set(H(this._parse))}assembleTransforms(e=!1){return H(this._parse).filter(r=>e?r4(r)>1:!0).map(r=>{let n=C6t(r,this._parse[r]);return n?{type:"formula",expr:n,as:Dk(r)}:null}).filter(r=>r!==null)}};var $0=class t extends Ge{clone(){return new t(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([K2])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:K2}}};var o1=class t extends Ge{constructor(e,r){super(e),this.params=r}clone(){return new t(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${$e(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}};var a1=class t extends Ge{constructor(e,r){super(e),this.params=r}clone(){return new t(null,this.params)}dependentFields(){return new Set}producedFields(){var e;return new Set([(e=this.params.as)!==null&&e!==void 0?e:"data"])}hash(){return`Hash ${$e(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}};var Oa=class extends Ge{constructor(e){super(null),e??(e={name:"source"});let r;if(B0(e)||(r=e.format?Object.assign({},Hn(e.format,["parse"])):{}),F3(e))this._data={values:e.values};else if(Sd(e)){if(this._data={url:e.url},!r.type){let n=/(?:\.([^.]+))?$/.exec(e.url)[1];We(["json","csv","tsv","dsv","topojson"],n)||(n="json"),r.type=n}}else fle(e)?this._data={values:[{type:"Sphere"}]}:(Dj(e)||B0(e))&&(this._data={});this._generator=B0(e),e.name&&(this._name=e.name),r&&!mt(r)&&(this._data.format=r)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}};var rLe=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},R6t=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},xD;function Xj(t){return t instanceof Oa||t instanceof o1||t instanceof a1}var l_=class{constructor(){xD.set(this,void 0),rLe(this,xD,!1,"f")}setModified(){rLe(this,xD,!0,"f")}get modifiedFlag(){return R6t(this,xD,"f")}};xD=new WeakMap;var kf=class extends l_{getNodeDepths(e,r,n){n.set(e,r);for(let i of e.children)this.getNodeDepths(i,r+1,n);return n}optimize(e){let n=[...this.getNodeDepths(e,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(let i of n)this.run(i[0]);return this.modifiedFlag}},c_=class extends l_{optimize(e){this.run(e);for(let r of e.children)this.optimize(r);return this.modifiedFlag}};var Jj=class extends c_{mergeNodes(e,r){let n=r.shift();for(let i of r)e.removeChild(i),i.parent=n,i.remove()}run(e){let r=e.children.map(i=>i.hash()),n={};for(let i=0;i<r.length;i++)n[r[i]]===void 0?n[r[i]]=[e.children[i]]:n[r[i]].push(e.children[i]);for(let i of H(n))n[i].length>1&&(this.setModified(),this.mergeNodes(e,n[i]))}},Zj=class extends c_{constructor(e){super(),this.requiresSelectionId=e&&uD(e)}run(e){e instanceof $0&&(this.requiresSelectionId&&(Xj(e.parent)||e.parent instanceof vu||e.parent instanceof Ki)||(this.setModified(),e.remove()))}},eH=class extends l_{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,r){let n=new Set;e instanceof vl&&(n=e.producedFields(),Fee(n,r)&&(this.setModified(),e.removeFormulas(r),e.producedFields.length===0&&e.remove()));for(let i of e.children)this.run(i,new Set([...r,...n]))}},tH=class extends c_{constructor(){super()}run(e){e instanceof on&&!e.isRequired()&&(this.setModified(),e.remove())}},rH=class extends kf{run(e){if(!Xj(e)&&!(e.numChildren()>1)){for(let r of e.children)if(r instanceof Ki)if(e instanceof Ki)this.setModified(),e.merge(r);else{if(wee(e.producedFields(),r.dependentFields()))continue;this.setModified(),r.swapWithParent()}}}},nH=class extends kf{run(e){let r=[...e.children],n=e.children.filter(i=>i instanceof Ki);if(e.numChildren()>1&&n.length>=1){let i={},s=new Set;for(let o of n){let a=o.parse;for(let u of H(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(let o of s)delete i[o];if(!mt(i)){this.setModified();let o=new Ki(e,i);for(let a of r){if(a instanceof Ki)for(let u of H(i))delete a.parse[u];e.removeChild(a),a.parent=o,a instanceof Ki&&H(a.parse).length===0&&a.remove()}}}}},iH=class extends kf{run(e){e instanceof on||e.numChildren()>0||e instanceof Cl||e instanceof Oa||(this.setModified(),e.remove())}},sH=class extends kf{run(e){let r=e.children.filter(i=>i instanceof vl),n=r.pop();for(let i of r)this.setModified(),n.merge(i)}},oH=class extends kf{run(e){let r=e.children.filter(i=>i instanceof vu),n={};for(let i of r){let s=$e(i.groupBy);s in n||(n[s]=[]),n[s].push(i)}for(let i of H(n)){let s=n[i];if(s.length>1){let o=s.pop();for(let a of s)o.merge(a)&&(e.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}},aH=class extends kf{constructor(e){super(),this.model=e}run(e){let r=!(Xj(e)||e instanceof Mf||e instanceof Ki||e instanceof $0),n=[],i=[];for(let s of e.children)s instanceof U0&&(r&&!wee(e.producedFields(),s.dependentFields())?n.push(s):i.push(s));if(n.length>0){let s=n.pop();for(let o of n)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),e instanceof U0?e.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){let s=i.pop();for(let o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}},uH=class extends kf{run(e){let r=[...e.children];if(!qx(r,o=>o instanceof on)||e.numChildren()<=1)return;let i=[],s;for(let o of r)if(o instanceof on){let a=o;for(;a.numChildren()===1;){let[u]=a.children;if(u instanceof on)a=u;else break}i.push(...a.children),s?(e.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(let o of i)o.parent.removeChild(o),o.parent=s}}};var j0=class t extends Ge{constructor(e,r){super(e),this.transform=r}clone(){return new t(null,we(this.transform))}addDimensions(e){this.transform.groupby=Ao(this.transform.groupby.concat(e),r=>r)}dependentFields(){let e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map(r=>r.field).filter(r=>r!==void 0).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){var r;return(r=e.as)!==null&&r!==void 0?r:ue(e)}hash(){return`JoinAggregateTransform ${$e(this.transform)}`}assemble(){let e=[],r=[],n=[];for(let s of this.transform.joinaggregate)r.push(s.op),n.push(this.getDefaultName(s)),e.push(s.field===void 0?null:s.field);let i=this.transform.groupby;return Object.assign({type:"joinaggregate",as:n,ops:r,fields:e},i!==void 0?{groupby:i}:{})}};function D6t(t){return t.stack.stackBy.reduce((e,r)=>{let n=r.fieldDef,i=ue(n);return i&&e.push(i),e},[])}function N6t(t){return j(t)&&t.every(e=>he(e))&&t.length>1}var Bf=class t extends Ge{constructor(e,r){super(e),this._stack=r}clone(){return new t(null,we(this._stack))}static makeFromTransform(e,r){let{stack:n,groupby:i,as:s,offset:o="zero"}=r,a=[],u=[];if(r.sort!==void 0)for(let f of r.sort)a.push(f.field),u.push(It(f.order,"ascending"));let l={field:a,order:u},c;return N6t(s)?c=s:he(s)?c=[s,`${s}_end`]:c=[`${r.stack}_start`,`${r.stack}_end`],new t(e,{dimensionFieldDefs:[],stackField:n,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(e,r){let n=r.stack,{encoding:i}=r;if(!n)return null;let{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=n,l=s.map(d=>{let h=i[d];return Es(h)}).filter(d=>!!d),c=D6t(r),f=r.encoding.order,x;return j(f)||se(f)?x=Qk(f):x=c.reduce((d,h)=>(d.field.push(h),d.order.push(o==="y"?"descending":"ascending"),d),{field:[],order:[]}),new t(e,{dimensionFieldDefs:l,stackField:r.vgField(o),facetby:[],stackby:c,sort:x,offset:a,impute:u,as:[r.vgField(o,{suffix:"start",forAs:!0}),r.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){let e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${$e(this._stack)}`}getGroupbyFields(){let{dimensionFieldDefs:e,impute:r,groupby:n}=this._stack;return e.length>0?e.map(i=>i.bin?r?[ue(i,{binSuffix:"mid"})]:[ue(i,{}),ue(i,{binSuffix:"end"})]:[ue(i)]).flat():n??[]}assemble(){let e=[],{facetby:r,dimensionFieldDefs:n,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(let c of n){let{bandPosition:f=.5,bin:x}=c;if(x){let d=ue(c,{expr:"datum"}),h=ue(c,{expr:"datum",binSuffix:"end"});e.push({type:"formula",expr:`${f}*${d}+${1-f}*${h}`,as:ue(c,{binSuffix:"mid",forAs:!0})})}e.push({type:"impute",field:i,groupby:[...s,...r],key:ue(c,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...r],field:i,sort:o,as:l,offset:a}),e}};var Td=class t extends Ge{constructor(e,r){super(e),this.transform=r}clone(){return new t(null,we(this.transform))}addDimensions(e){this.transform.groupby=Ao(this.transform.groupby.concat(e),r=>r)}dependentFields(){var e,r;let n=new Set;return((e=this.transform.groupby)!==null&&e!==void 0?e:[]).forEach(n.add,n),((r=this.transform.sort)!==null&&r!==void 0?r:[]).forEach(i=>n.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){var r;return(r=e.as)!==null&&r!==void 0?r:ue(e)}hash(){return`WindowTransform ${$e(this.transform)}`}assemble(){var e;let r=[],n=[],i=[],s=[];for(let x of this.transform.window)n.push(x.op),i.push(this.getDefaultName(x)),s.push(x.param===void 0?null:x.param),r.push(x.field===void 0?null:x.field);let o=this.transform.frame,a=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(x=>u4(x)))return Object.assign({type:"joinaggregate",as:i,ops:n,fields:r},a!==void 0?{groupby:a}:{});let u=[],l=[];if(this.transform.sort!==void 0)for(let x of this.transform.sort)u.push(x.field),l.push((e=x.order)!==null&&e!==void 0?e:"ascending");let c={field:u,order:l},f=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:s,as:i,ops:n,fields:r,sort:c},f!==void 0?{ignorePeers:f}:{}),a!==void 0?{groupby:a}:{}),o!==void 0?{frame:o}:{})}};function F6t(t){function e(r){if(!(r instanceof Cl)){let n=r.clone();if(n instanceof on){let i=dD+n.getSource();n.setSource(i),t.model.component.data.outputNodes[i]=n}else(n instanceof vu||n instanceof Bf||n instanceof Td||n instanceof j0)&&n.addDimensions(t.fields);for(let i of r.children.flatMap(e))i.parent=n;return[n]}return r.children.flatMap(e)}return e}function lH(t){if(t instanceof Cl)if(t.numChildren()===1&&!(t.children[0]instanceof on)){let e=t.children[0];(e instanceof vu||e instanceof Bf||e instanceof Td||e instanceof j0)&&e.addDimensions(t.fields),e.swapWithParent(),lH(t)}else{let e=t.model.component.data.main;nLe(e);let r=F6t(t),n=t.children.map(r).flat();for(let i of n)i.parent=e}else t.children.map(lH)}function nLe(t){if(t instanceof on&&t.type===Pt.Main&&t.numChildren()===1){let e=t.children[0];e instanceof Cl||(e.swapWithParent(),nLe(t))}}var dD="scale_",cH=5;function Mle(t){for(let e of t){for(let r of e.children)if(r.parent!==e)return!1;if(!Mle(e.children))return!1}return!0}function H0(t,e){let r=!1;for(let n of e)r=t.optimize(n)||r;return r}function iLe(t,e,r){let n=t.sources,i=!1;return i=H0(new tH,n)||i,i=H0(new Zj(e),n)||i,n=n.filter(s=>s.numChildren()>0),i=H0(new iH,n)||i,n=n.filter(s=>s.numChildren()>0),r||(i=H0(new rH,n)||i,i=H0(new aH(e),n)||i,i=H0(new eH,n)||i,i=H0(new nH,n)||i,i=H0(new oH,n)||i,i=H0(new sH,n)||i,i=H0(new Jj,n)||i,i=H0(new uH,n)||i),t.sources=n,i}function sLe(t,e){Mle(t.sources);let r=0,n=0;for(let i=0;i<cH&&iLe(t,e,!0);i++)r++;t.sources.map(lH);for(let i=0;i<cH&&iLe(t,e,!1);i++)n++;Mle(t.sources),Math.max(r,n)===cH&&K(`Maximum optimization runs(${cH}) reached.`)}var As=class t{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,r){return new t(()=>e(r))}};var w6t=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function qle(t){tr(t)?L6t(t):I6t(t)}function L6t(t){let e=t.component.scales;for(let r of H(e)){let n=P6t(t,r);if(e[r].setWithExplicit("domains",n),B6t(t,r),t.component.data.isFaceted){let s=t;for(;!Yi(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[r]==="shared")for(let a of n.value)d0(a)&&(a.data=dD+a.data.replace(dD,""))}}}function I6t(t){for(let r of t.children)qle(r);let e=t.component.scales;for(let r of H(e)){let n,i=null;for(let s of t.children){let o=s.component.scales[r];if(o){n===void 0?n=o.getWithExplicit("domains"):n=Ta(n,o.getWithExplicit("domains"),"domains","scale",Ble);let a=o.get("selectionExtent");i&&a&&i.param!==a.param&&K(z.NEEDS_SAME_SELECTION),i=a}}e[r].setWithExplicit("domains",n),i&&e[r].set("selectionExtent",i,!0)}}function M6t(t,e,r,n){if(t==="unaggregated"){let{valid:i,reason:s}=oLe(e,r);if(!i){K(s);return}}else if(t===void 0&&n.useUnaggregatedDomain){let{valid:i}=oLe(e,r);if(i)return"unaggregated"}return t}function P6t(t,e){let r=t.getScaleComponent(e).get("type"),{encoding:n}=t,i=M6t(t.scaleDomain(e),t.typedFieldDef(e),r,t.config.scale);return i!==t.scaleDomain(e)&&(t.specifiedScales[e]=Object.assign(Object.assign({},t.specifiedScales[e]),{domain:i})),e==="x"&&er(n.x2)?er(n.x)?Ta(u1(r,i,t,"x"),u1(r,i,t,"x2"),"domain","scale",Ble):u1(r,i,t,"x2"):e==="y"&&er(n.y2)?er(n.y)?Ta(u1(r,i,t,"y"),u1(r,i,t,"y2"),"domain","scale",Ble):u1(r,i,t,"y2"):u1(r,i,t,e)}function k6t(t,e,r){return t.map(n=>({signal:`{data: ${_g(n,{timeUnit:r,type:e})}}`}))}function Ple(t,e,r){var n;let i=(n=nn(r))===null||n===void 0?void 0:n.unit;return e==="temporal"||i?k6t(t,e,i):[t]}function u1(t,e,r,n){let{encoding:i}=r,s=er(i[n]),{type:o}=s,a=s.timeUnit;if(a7e(e)){let f=u1(t,void 0,r,n),x=Ple(e.unionWith,o,a);return Sl([...f.value,...x])}else{if(be(e))return Sl([e]);if(e&&e!=="unaggregated"&&!Rue(e))return Sl(Ple(e,o,a))}let u=r.stack;if(u&&n===u.fieldChannel){if(u.offset==="normalize")return so([[0,1]]);let f=r.requestDataName(Pt.Main);return so([{data:f,field:r.vgField(n,{suffix:"start"})},{data:f,field:r.vgField(n,{suffix:"end"})}])}let l=Hs(n)&&se(s)?q6t(r,n,t):void 0;if(no(s)){let f=Ple([s.datum],o,a);return so(f)}let c=s;if(e==="unaggregated"){let f=r.requestDataName(Pt.Main),{field:x}=s;return so([{data:f,field:ue({field:x,aggregate:"min"})},{data:f,field:ue({field:x,aggregate:"max"})}])}else if(St(c.bin)){if(or(t))return t==="bin-ordinal"?so([]):so([{data:KC(l)?r.requestDataName(Pt.Main):r.requestDataName(Pt.Raw),field:r.vgField(n,Of(c,n)?{binSuffix:"range"}:{}),sort:l===!0||!Se(l)?{field:r.vgField(n,{}),op:"min"}:l}]);{let{bin:f}=c;if(St(f)){let x=a_(r,c.field,f);return so([new As(()=>{let d=r.getSignalName(x);return`[${d}.start, ${d}.stop]`})])}else return so([{data:r.requestDataName(Pt.Main),field:r.vgField(n,{})}])}}else if(c.timeUnit&&We(["time","utc"],t)&&ej(c,tr(r)?r.encoding[js(n)]:void 0,r.markDef,r.config)){let f=r.requestDataName(Pt.Main);return so([{data:f,field:r.vgField(n)},{data:f,field:r.vgField(n,{suffix:"end"})}])}else return l?so([{data:KC(l)?r.requestDataName(Pt.Main):r.requestDataName(Pt.Raw),field:r.vgField(n),sort:l}]):so([{data:r.requestDataName(Pt.Main),field:r.vgField(n)}])}function kle(t,e){let{op:r,field:n,order:i}=t;return Object.assign(Object.assign({op:r??(e?"sum":Q2)},n?{field:oi(n)}:{}),i?{order:i}:{})}function B6t(t,e){var r;let n=t.component.scales[e],i=t.specifiedScales[e].domain,s=(r=t.fieldDef(e))===null||r===void 0?void 0:r.bin,o=Rue(i)&&i,a=f0(s)&&l4(s.extent)&&s.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function q6t(t,e,r){if(!or(r))return;let n=t.fieldDef(e),i=n.sort;if(K$(i))return{op:"min",field:Pf(n,e),order:"ascending"};let{stack:s}=t,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Wi(i)){let a=s&&!o.has(i.field);return kle(i,a)}else if(Y$(i)){let{encoding:a,order:u}=i,l=t.fieldDef(a),{aggregate:c,field:f}=l,x=s&&!o.has(f);if(fu(c)||el(c))return kle({field:ue(l),order:u},x);if(u4(c)||!c)return kle({op:c,field:f,order:u},x)}else{if(i==="descending")return{op:"min",field:t.vgField(e),order:"descending"};if(We(["ascending",void 0],i))return!0}}function oLe(t,e){let{aggregate:r,type:n}=t;return r?he(r)&&!L_e.has(r)?{valid:!1,reason:z.unaggregateDomainWithNonSharedDomainOp(r)}:n==="quantitative"&&e==="log"?{valid:!1,reason:z.unaggregatedDomainWithLogScale(t)}:{valid:!0}:{valid:!1,reason:z.unaggregateDomainHasNoEffectForRawField(t)}}function Ble(t,e,r,n){return t.explicit&&e.explicit&&K(z.mergeConflictingDomainProperty(r,n,t.value,e.value)),{explicit:t.explicit,value:[...t.value,...e.value]}}function U6t(t){let e=Ao(t.map(o=>{if(d0(o)){let{sort:a}=o;return w6t(o,["sort"])}return o}),$e),r=Ao(t.map(o=>{if(d0(o)){let a=o.sort;return a!==void 0&&!KC(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),$e);if(e.length===0)return;if(e.length===1){let o=t[0];if(d0(o)&&r.length>0){let a=r[0];if(r.length>1)K(z.MORE_THAN_ONE_SORT),a=!0;else if(Se(a)&&"field"in a){let u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return Object.assign(Object.assign({},o),{sort:a})}return o}let n=Ao(r.map(o=>KC(o)||!("op"in o)||he(o.op)&&o.op in N_e?o:(K(z.domainSortDropped(o)),!0)),$e),i;n.length===1?i=n[0]:n.length>1&&(K(z.MORE_THAN_ONE_SORT),i=!0);let s=Ao(t.map(o=>d0(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?Object.assign({data:s[0],fields:e.map(a=>a.field)},i?{sort:i}:{}):Object.assign({fields:e},i?{sort:i}:{})}function u_(t){if(d0(t)&&he(t.field))return t.field;if(I_e(t)){let e;for(let r of t.fields)if(d0(r)&&he(r.field)){if(!e)e=r.field;else if(e!==r.field)return K(z.FACETED_INDEPENDENT_DIFFERENT_SOURCES),e}return K(z.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),e}else if(M_e(t)){K(z.FACETED_INDEPENDENT_SAME_SOURCE);let e=t.fields[0];return he(e)?e:void 0}}function s1(t,e){let n=t.component.scales[e].get("domains").map(i=>(d0(i)&&(i.data=t.lookupDataSource(i.data)),i));return U6t(n)}var $6t=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function Ule(t){return bl(t)||o_(t)?t.children.reduce((e,r)=>e.concat(Ule(r)),aLe(t)):aLe(t)}function aLe(t){return H(t.component.scales).reduce((e,r)=>{let n=t.component.scales[r];if(n.merged)return e;let i=n.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c}=i,f=$6t(i,["name","type","selectionExtent","domains","range","reverse"]),x=j6t(i.range,s,r,t),d=s1(t,r),h=a?i9e(t,a,n,d):null;return e.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:s,type:o},d?{domain:d}:{}),h?{domainRaw:h}:{}),{range:x}),c!==void 0?{reverse:c}:{}),f)),e},[])}function j6t(t,e,r,n){if(Ar(r)){if(zs(t))return{step:{signal:`${e}_step`}}}else if(Se(t)&&d0(t))return Object.assign(Object.assign({},t),{data:n.lookupDataSource(t.data)});return t}var hD=class extends io{constructor(e,r){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",r)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:qx(this.get("domains"),e=>j(e)&&e.length===2&&e[0]<=0&&e[1]>=0)}};var H6t=["range","scheme"];function fLe(t){let e=t.component.scales;for(let r of Kp){let n=e[r];if(!n)continue;let i=z6t(r,t);n.setWithExplicit("range",i)}}function uLe(t,e){let r=t.fieldDef(e);if(r?.bin){let{bin:n,field:i}=r,s=rn(e),o=t.getName(s);if(Se(n)&&n.binned&&n.step!==void 0)return new As(()=>{let a=t.scaleName(e),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${n.step}`;return`${t.getSignalName(o)} / (${u})`});if(St(n)){let a=a_(t,i,n);return new As(()=>{let u=t.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${t.getSignalName(o)} / (${l})`})}}}function z6t(t,e){let r=e.specifiedScales[t],{size:n}=e,s=e.getScaleComponent(t).get("type");for(let f of H6t)if(r[f]!==void 0){let x=B6(s,f),d=j$(t,f);if(!x)K(z.scalePropertyNotWorkWithScaleType(s,f,t));else if(d)K(d);else switch(f){case"range":{let h=r.range;if(j(h)){if(Ar(t))return Sl(h.map(p=>{if(p==="width"||p==="height"){let m=e.getName(p),g=e.getSignalName.bind(e);return As.fromName(g,m)}return p}))}else if(Se(h))return Sl({data:e.requestDataName(Pt.Main),field:h.field,sort:{op:"min",field:e.vgField(t)}});return Sl(h)}case"scheme":return Sl(G6t(r[f]))}}let o=t===Ht||t==="xOffset"?"width":"height",a=n[o];if(ba(a)){if(Ar(t))if(or(s)){let f=xLe(a,e,t);if(f)return Sl({step:f})}else K(z.stepDropped(o));else if(c0(t)){let f=t===Ju?"x":"y";if(e.getScaleComponent(f).get("type")==="band"){let h=dLe(a,s);if(h)return Sl(h)}}}let{rangeMin:u,rangeMax:l}=r,c=Q6t(t,e);return(u!==void 0||l!==void 0)&&B6(s,"rangeMin")&&j(c)&&c.length===2?Sl([u??c[0],l??c[1]]):so(c)}function G6t(t){return o7e(t)?Object.assign({scheme:t.name},Hn(t,["name"])):{scheme:t}}function Q6t(t,e){let{size:r,config:n,mark:i,encoding:s}=e,o=e.getSignalName.bind(e),{type:a}=er(s[t]),l=e.getScaleComponent(t).get("type"),{domain:c,domainMid:f}=e.specifiedScales[t];switch(t){case Ht:case Cr:{if(We(["point","band"],l)){let h=hLe(t,r,n.view);if(ba(h))return{step:xLe(h,e,t)}}let x=rn(t),d=e.getName(x);return t===Cr&&yn(l)?[As.fromName(o,d),0]:[0,As.fromName(o,d)]}case Ju:case rf:return V6t(t,e,l);case ca:{let x=e.component.scales[t].get("zero"),d=pLe(i,x,n),h=K6t(i,r,e,n);return hd(l)?Y6t(d,h,W6t(l,n,c,t)):[d,h]}case So:return[0,Math.PI*2];case l0:return[0,360];case la:return[0,new As(()=>{let x=e.getSignalName("width"),d=e.getSignalName("height");return`min(${x},${d})/2`})];case uu:return[n.scale.minStrokeWidth,n.scale.maxStrokeWidth];case lu:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case tn:return"symbol";case hn:case Us:case $s:return l==="ordinal"?a==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case bo:case ou:case au:return[n.scale.minOpacity,n.scale.maxOpacity]}}function xLe(t,e,r){var n,i,s,o,a;let{encoding:u}=e,l=e.getScaleComponent(r),c=Pk(r),f=u[c];if(tle({step:t,offsetIsDiscrete:Ve(f)&&$$(f.type)})==="offset"&&Hue(u,c)){let d=e.getScaleComponent(c),p=`domain('${e.scaleName(c)}').length`;if(d.get("type")==="band"){let g=(i=(n=d.get("paddingInner"))!==null&&n!==void 0?n:d.get("padding"))!==null&&i!==void 0?i:0,y=(o=(s=d.get("paddingOuter"))!==null&&s!==void 0?s:d.get("padding"))!==null&&o!==void 0?o:0;p=`bandspace(${p}, ${g}, ${y})`}let m=(a=l.get("paddingInner"))!==null&&a!==void 0?a:l.get("padding");return{signal:`${t.step} * ${p} / (1-${q_e(m)})`}}else return t.step}function dLe(t,e){if(tle({step:t,offsetIsDiscrete:or(e)})==="offset")return{step:t.step}}function V6t(t,e,r){let n=t===Ju?"x":"y",s=e.getScaleComponent(n).get("type"),o=e.scaleName(n);if(s==="band"){let a=hLe(n,e.size,e.config.view);if(ba(a)){let u=dLe(a,r);if(u)return u}return[0,{signal:`bandwidth('${o}')`}]}else return s_e(`Cannot use ${t} scale if ${n} scale is not discrete.`)}function hLe(t,e,r){let n=t===Ht?"width":"height",i=e[n];return i||zv(r,n)}function W6t(t,e,r,n){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return r!==void 0&&j(r)?r.length+1:(K(z.domainRequiredForThresholdScale(n)),3)}}function Y6t(t,e,r){let n=()=>{let i=xu(e),s=xu(t),o=`(${i} - ${s}) / (${r} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return be(e)?new As(n):{signal:n()}}function pLe(t,e,r){if(e)return be(e)?{signal:`${e.signal} ? 0 : ${pLe(t,!1,r)}`}:0;switch(t){case"bar":case"tick":return r.scale.minBandSize;case"line":case"trail":case"rule":return r.scale.minStrokeWidth;case"text":return r.scale.minFontSize;case"point":case"square":case"circle":return r.scale.minSize}throw new Error(z.incompatibleChannel("size",t))}var lLe=.95;function K6t(t,e,r,n){let i={x:uLe(r,"x"),y:uLe(r,"y")};switch(t){case"bar":case"tick":{if(n.scale.maxBandSize!==void 0)return n.scale.maxBandSize;let s=cLe(e,i,n.view);return Ct(s)?s-1:new As(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return n.scale.maxStrokeWidth;case"text":return n.scale.maxFontSize;case"point":case"square":case"circle":{if(n.scale.maxSize)return n.scale.maxSize;let s=cLe(e,i,n.view);return Ct(s)?Math.pow(lLe*s,2):new As(()=>`pow(${lLe} * ${s.signal}, 2)`)}}throw new Error(z.incompatibleChannel("size",t))}function cLe(t,e,r){let n=ba(t.width)?t.width.step:N3(r,"width"),i=ba(t.height)?t.height.step:N3(r,"height");return e.x||e.y?new As(()=>`min(${[e.x?e.x.signal:n,e.y?e.y.signal:i].join(", ")})`):Math.min(n,i)}function $le(t,e){tr(t)?X6t(t,e):gLe(t,e)}function X6t(t,e){let r=t.component.scales,{config:n,encoding:i,markDef:s,specifiedScales:o}=t;for(let a of H(r)){let u=o[a],l=r[a],c=t.getScaleComponent(a),f=er(i[a]),x=u[e],d=c.get("type"),h=c.get("padding"),p=c.get("paddingInner"),m=B6(d,e),g=j$(a,e);if(x!==void 0&&(m?g&&K(g):K(z.scalePropertyNotWorkWithScaleType(d,e,a))),m&&g===void 0)if(x!==void 0){let y=f.timeUnit,A=f.type;switch(e){case"domainMax":case"domainMin":tl(u[e])||A==="temporal"||y?l.set(e,{signal:_g(u[e],{type:A,timeUnit:y})},!0):l.set(e,u[e],!0);break;default:l.copyKeyFromObject(e,u)}}else{let y=e in mLe?mLe[e]({model:t,channel:a,fieldOrDatumDef:f,scaleType:d,scalePadding:h,scalePaddingInner:p,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:n,hasNestedOffsetScale:Y6(i,a)}):n.scale[e];y!==void 0&&l.set(e,y,!1)}}}var mLe={bins:({model:t,fieldOrDatumDef:e})=>se(e)?J6t(t,e):void 0,interpolate:({channel:t,fieldOrDatumDef:e})=>Z6t(t,e.type),nice:({scaleType:t,channel:e,domain:r,domainMin:n,domainMax:i,fieldOrDatumDef:s})=>eDt(t,e,r,n,i,s),padding:({channel:t,scaleType:e,fieldOrDatumDef:r,markDef:n,config:i})=>tDt(t,e,i.scale,r,n,i.bar),paddingInner:({scalePadding:t,channel:e,markDef:r,scaleType:n,config:i,hasNestedOffsetScale:s})=>rDt(t,e,r.type,n,i.scale,s),paddingOuter:({scalePadding:t,channel:e,scaleType:r,scalePaddingInner:n,config:i,hasNestedOffsetScale:s})=>nDt(t,e,r,n,i.scale,s),reverse:({fieldOrDatumDef:t,scaleType:e,channel:r,config:n})=>{let i=se(t)?t.sort:void 0;return iDt(e,i,r,n.scale)},zero:({channel:t,fieldOrDatumDef:e,domain:r,markDef:n,scaleType:i})=>sDt(t,e,r,n,i)};function jle(t){tr(t)?fLe(t):gLe(t,"range")}function gLe(t,e){let r=t.component.scales;for(let n of t.children)e==="range"?jle(n):$le(n,e);for(let n of H(r)){let i;for(let s of t.children){let o=s.component.scales[n];if(o){let a=o.getWithExplicit(e);i=Ta(i,a,e,"scale",Rj((u,l)=>{switch(e){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}r[n].setWithExplicit(e,i)}}function J6t(t,e){let r=e.bin;if(St(r)){let n=a_(t,e.field,r);return new As(()=>t.getSignalName(n))}else if(qr(r)&&f0(r)&&r.step!==void 0)return{step:r.step}}function Z6t(t,e){if(We([hn,Us,$s],t)&&e!=="nominal")return"hcl"}function eDt(t,e,r,n,i,s){var o;if(!(!((o=Es(s))===null||o===void 0)&&o.bin||j(r)||i!=null||n!=null||We([Vi.TIME,Vi.UTC],t)))return Ar(e)?!0:void 0}function tDt(t,e,r,n,i,s){if(Ar(t)){if(va(e)){if(r.continuousPadding!==void 0)return r.continuousPadding;let{type:o,orient:a}=i;if(o==="bar"&&!(se(n)&&(n.bin||n.timeUnit))&&(a==="vertical"&&t==="x"||a==="horizontal"&&t==="y"))return s.continuousBandSize}if(e===Vi.POINT)return r.pointPadding}}function rDt(t,e,r,n,i,s=!1){if(t===void 0){if(Ar(e)){let{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:It(o,r==="bar"?a:u)}else if(c0(e)&&n===Vi.BAND)return i.offsetBandPaddingInner}}function nDt(t,e,r,n,i,s=!1){if(t===void 0){if(Ar(e)){let{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(r===Vi.BAND)return It(o,be(n)?{signal:`${n.signal}/2`}:n/2)}else if(c0(e)){if(r===Vi.POINT)return .5;if(r===Vi.BAND)return i.offsetBandPaddingOuter}}}function iDt(t,e,r,n){if(r==="x"&&n.xReverse!==void 0)return yn(t)&&e==="descending"?be(n.xReverse)?{signal:`!${n.xReverse.signal}`}:!n.xReverse:n.xReverse;if(yn(t)&&e==="descending")return!0}function sDt(t,e,r,n,i){if(!!r&&r!=="unaggregated"&&yn(i)){if(j(r)){let o=r[0],a=r[r.length-1];if(o<=0&&a>=0)return!0}return!1}if(t==="size"&&e.type==="quantitative"&&!hd(i))return!0;if(!(se(e)&&e.bin)&&We([...ai,...__e],t)){let{orient:o,type:a}=n;return!(We(["bar","area","line","trail"],a)&&(o==="horizontal"&&t==="y"||o==="vertical"&&t==="x"))}return!1}function yLe(t,e,r,n,i=!1){let s=oDt(e,r,n,i),{type:o}=t;return Hs(e)?o!==void 0?f7e(e,o)?se(r)&&!c7e(o,r.type)?(K(z.scaleTypeNotWorkWithFieldDef(o,s)),s):o:(K(z.scaleTypeNotWorkWithChannel(e,o,s)),s):s:null}function oDt(t,e,r,n){var i;switch(e.type){case"nominal":case"ordinal":{if($x(t)||Uk(t)==="discrete")return t==="shape"&&e.type==="ordinal"&&K(z.discreteChannelCannotEncode(t,"ordinal")),"ordinal";if(Ar(t)||c0(t)){if(We(["rect","bar","image","rule"],r.type)||n)return"band"}else if(r.type==="arc"&&t in qk)return"band";let s=r[rn(t)];return pd(s)||rj(e)&&(!((i=e.axis)===null||i===void 0)&&i.tickBand)?"band":"point"}case"temporal":return $x(t)?"time":Uk(t)==="discrete"?(K(z.discreteChannelCannotEncode(t,"temporal")),"ordinal"):se(e)&&e.timeUnit&&nn(e.timeUnit).utc?"utc":"time";case"quantitative":return $x(t)?se(e)&&St(e.bin)?"bin-ordinal":"linear":Uk(t)==="discrete"?(K(z.discreteChannelCannotEncode(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(z.invalidFieldType(e.type))}function ELe(t,{ignoreRange:e}={}){ALe(t),qle(t);for(let r of l7e)$le(t,r);e||jle(t)}function ALe(t){tr(t)?t.component.scales=aDt(t):t.component.scales=lDt(t)}function aDt(t){let{encoding:e,mark:r,markDef:n}=t,i={};for(let s of Kp){let o=er(e[s]);if(o&&r===z$&&s===tn&&o.type===k0)continue;let a=o&&o.scale;if(c0(s)){let u=kk(s);if(!Y6(e,u)){a&&K(z.offsetEncodingScaleIgnored(s));continue}}if(o&&a!==null&&a!==!1){a??(a={});let u=Y6(e,s),l=yLe(a,s,o,n,u);i[s]=new hD(t.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}var uDt=Rj((t,e)=>Tue(t)-Tue(e));function lDt(t){var e,r;let n=t.component.scales={},i={},s=t.component.resolve;for(let o of t.children){ALe(o);for(let a of H(o.component.scales))if((e=(r=s.scale)[a])!==null&&e!==void 0||(r[a]=Vj(a,t)),s.scale[a]==="shared"){let u=i[a],l=o.component.scales[a].getWithExplicit("type");u?t7e(u.value,l.value)?i[a]=Ta(u,l,"type","scale",uDt):(s.scale[a]="independent",delete i[a]):i[a]=l}}for(let o of H(i)){let a=t.scaleName(o,!0),u=i[o];n[o]=new hD(a,u);for(let l of t.children){let c=l.component.scales[o];c&&(l.renameScale(c.get("name"),a),c.merged=!0)}}return n}var Hle=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},pD=class{constructor(){this.nameMap={}}rename(e,r){this.nameMap[e]=r}has(e){return this.nameMap[e]!==void 0}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}};function tr(t){return t?.type==="unit"}function Yi(t){return t?.type==="facet"}function o_(t){return t?.type==="concat"}function bl(t){return t?.type==="layer"}var I3=class{constructor(e,r,n,i,s,o,a){var u,l;this.type=r,this.parent=n,this.config=s,this.correctDataNames=c=>{var f,x,d;return!((f=c.from)===null||f===void 0)&&f.data&&(c.from.data=this.lookupDataSource(c.from.data)),!((d=(x=c.from)===null||x===void 0?void 0:x.facet)===null||d===void 0)&&d.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c},this.parent=n,this.config=s,this.view=zn(a),this.name=(u=e.name)!==null&&u!==void 0?u:i,this.title=x0(e.title)?{text:e.title}:e.title?zn(e.title):void 0,this.scaleNameMap=n?n.scaleNameMap:new pD,this.projectionNameMap=n?n.projectionNameMap:new pD,this.signalNameMap=n?n.signalNameMap:new pD,this.data=e.data,this.description=e.description,this.transforms=G8e((l=e.transform)!==null&&l!==void 0?l:[]),this.layout=r==="layer"||r==="unit"?{}:c8e(e,r,s),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:gd(e)||n?.component.data.isFaceted&&e.data===void 0},layoutSize:new io,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},o?we(o):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){ELe(this)}parseProjection(){Ile(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){wle(this)}assembleEncodeFromView(e){let{style:r}=e,n=Hle(e,["style"]),i={};for(let s of H(n)){let o=n[s];o!==void 0&&(i[s]=vt(o))}return i}assembleGroupEncodeEntry(e){let r={};return this.view&&(r=this.assembleEncodeFromView(this.view)),!e&&(this.description&&(r.description=vt(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},r??{}):mt(r)?void 0:r}assembleLayout(){if(!this.layout)return;let e=this.layout,{spacing:r}=e,n=Hle(e,["spacing"]),{component:i,config:s}=this,o=B9e(i.layoutHeaders,s);return Object.assign(Object.assign(Object.assign({padding:r},this.assembleDefaultLayout()),n),o?{titleBand:o}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){let{layoutHeaders:e}=this.component,r=[];for(let n of qi)e[n].title&&r.push(I9e(this,n));for(let n of r_)r=r.concat(k9e(this,n));return r}assembleAxes(){return D9e(this.component.axes,this.config)}assembleLegends(){return Kj(this)}assembleProjections(){return V9e(this)}assembleTitle(){var e,r,n;let i=(e=this.title)!==null&&e!==void 0?e:{},{encoding:s}=i,o=Hle(i,["encoding"]),a=Object.assign(Object.assign(Object.assign({},Hk(this.config.title).nonMarkTitleProperties),o),s?{encode:{update:s}}:{});if(a.text)return We(["unit","layer"],this.type)?We(["middle",void 0],a.anchor)&&((r=a.frame)!==null&&r!==void 0||(a.frame="group")):(n=a.anchor)!==null&&n!==void 0||(a.anchor="start"),mt(a)?void 0:a}assembleGroup(e=[]){let r={};e=e.concat(this.assembleSignals()),e.length>0&&(r.signals=e);let n=this.assembleLayout();n&&(r.layout=n),r.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());let i=!this.parent||Yi(this.parent)?Ule(this):[];i.length>0&&(r.scales=i);let s=this.assembleAxes();s.length>0&&(r.axes=s);let o=this.assembleLegends();return o.length>0&&(r.legends=o),r}getName(e){return Lt((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(Pt[e].toLowerCase())}requestDataName(e){let r=this.getDataName(e),n=this.component.data.outputNodeRefCounts;return n[r]=(n[r]||0)+1,r}getSizeSignalRef(e){if(Yi(this.parent)){let r=Gj(e),n=Yp(r),i=this.component.scales[n];if(i&&!i.merged){let s=i.get("type"),o=i.get("range");if(or(s)&&zs(o)){let a=i.get("name"),u=s1(this,n),l=u_(u);if(l){let c=ue({aggregate:"distinct",field:l},{expr:"datum"});return{signal:Ole(a,i,c)}}else return K(z.unknownField(n)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){let r=this.component.data.outputNodes[e];return r?r.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,r){this.signalNameMap.rename(e,r)}renameScale(e,r){this.scaleNameMap.rename(e,r)}renameProjection(e,r){this.projectionNameMap.rename(e,r)}scaleName(e,r){if(r)return this.getName(e);if(Ik(e)&&Hs(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e)))return this.scaleNameMap.get(this.getName(e))}projectionName(e){if(e)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");let r=this.component.scales[e];return r&&!r.merged?r:this.parent?this.parent.getScaleComponent(e):void 0}getSelectionComponent(e,r){let n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,r)),!n)throw new Error(z.selectionNotFound(r));return n}hasAxisOrientSignalRef(){var e,r;return((e=this.component.axes.x)===null||e===void 0?void 0:e.some(n=>n.hasOrientSignalRef()))||((r=this.component.axes.y)===null||r===void 0?void 0:r.some(n=>n.hasOrientSignalRef()))}},f_=class extends I3{vgField(e,r={}){let n=this.fieldDef(e);if(n)return ue(n,r)}reduceFieldDef(e,r){return z7e(this.getMapping(),(n,i,s)=>{let o=Es(i);return o?e(n,o,s):n},r)}forEachFieldDef(e,r){K6(this.getMapping(),(n,i)=>{let s=Es(n);s&&e(s,i)},r)}};var cDt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},x_=class t extends Ge{constructor(e,r){var n,i,s;super(e),this.transform=r,this.transform=we(r);let o=(n=this.transform.as)!==null&&n!==void 0?n:[void 0,void 0];this.transform.as=[(i=o[0])!==null&&i!==void 0?i:"value",(s=o[1])!==null&&s!==void 0?s:"density"]}clone(){return new t(null,we(this.transform))}dependentFields(){var e;return new Set([this.transform.density,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${$e(this.transform)}`}assemble(){let e=this.transform,{density:r}=e,n=cDt(e,["density"]);return Object.assign({type:"kde",field:r},n)}};var d_=class t extends Ge{constructor(e,r){super(e),this.filter=r}clone(){return new t(null,Object.assign({},this.filter))}static make(e,r){let{config:n,mark:i,markDef:s}=r;if(st("invalid",s,n)!=="filter")return null;let a=r.reduceFieldDef((u,l,c)=>{let f=Hs(c)&&r.getScaleComponent(c);if(f){let x=f.get("type");yn(x)&&l.aggregate!=="count"&&!ro(i)&&(u[l.field]=l)}return u},{});return H(a).length?new t(e,a):null}dependentFields(){return new Set(H(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${$e(this.filter)}`}assemble(){let e=H(this.filter).reduce((r,n)=>{let i=this.filter[n],s=ue(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?r.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(r.push(`isValid(${s})`),r.push(`isFinite(+${s})`))),r},[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}};var h_=class t extends Ge{constructor(e,r){super(e),this.transform=r,this.transform=we(r);let{flatten:n,as:i=[]}=this.transform;this.transform.as=n.map((s,o)=>{var a;return(a=i[o])!==null&&a!==void 0?a:s})}clone(){return new t(this.parent,we(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${$e(this.transform)}`}assemble(){let{flatten:e,as:r}=this.transform;return{type:"flatten",fields:e,as:r}}};var p_=class t extends Ge{constructor(e,r){var n,i,s;super(e),this.transform=r,this.transform=we(r);let o=(n=this.transform.as)!==null&&n!==void 0?n:[void 0,void 0];this.transform.as=[(i=o[0])!==null&&i!==void 0?i:"key",(s=o[1])!==null&&s!==void 0?s:"value"]}clone(){return new t(null,we(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${$e(this.transform)}`}assemble(){let{fold:e,as:r}=this.transform;return{type:"fold",fields:e,as:r}}};var m_=class t extends Ge{constructor(e,r,n,i){super(e),this.fields=r,this.geojson=n,this.signal=i}clone(){return new t(null,we(this.fields),this.geojson,this.signal)}static parseAll(e,r){if(r.component.projection&&!r.component.projection.isFit)return e;let n=0;for(let i of[[_o,vo],[fs,qs]]){let s=i.map(o=>{let a=er(r.encoding[o]);return se(a)?a.field:no(a)?{expr:`${a.datum}`}:Kn(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(e=new t(e,s,null,r.getName(`geojson_${n++}`)))}if(r.channelHasField(tn)){let i=r.typedFieldDef(tn);i.type===k0&&(e=new t(e,null,i.field,r.getName(`geojson_${n++}`)))}return e}dependentFields(){var e;let r=((e=this.fields)!==null&&e!==void 0?e:[]).filter(he);return new Set([...this.geojson?[this.geojson]:[],...r])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${$e(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}};var g_=class t extends Ge{constructor(e,r,n,i){super(e),this.projection=r,this.fields=n,this.as=i}clone(){return new t(null,this.projection,we(this.fields),we(this.as))}static parseAll(e,r){if(!r.projectionName())return e;for(let n of[[_o,vo],[fs,qs]]){let i=n.map(o=>{let a=er(r.encoding[o]);return se(a)?a.field:no(a)?{expr:`${a.datum}`}:Kn(a)?{expr:`${a.value}`}:void 0}),s=n[0]===fs?"2":"";(i[0]||i[1])&&(e=new t(e,r.projectionName(),i,[r.getName(`x${s}`),r.getName(`y${s}`)]))}return e}dependentFields(){return new Set(this.fields.filter(he))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${$e(this.fields)} ${$e(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}};var M3=class t extends Ge{constructor(e,r){super(e),this.transform=r}clone(){return new t(null,we(this.transform))}dependentFields(){var e;return new Set([this.transform.impute,this.transform.key,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){let{start:r=0,stop:n,step:i}=e;return{signal:`sequence(${[r,n,...i?[i]:[]].join(",")})`}}static makeFromTransform(e,r){return new t(e,r)}static makeFromEncoding(e,r){let n=r.encoding,i=n.x,s=n.y;if(se(i)&&se(s)){let o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;let a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,x=aj(r.mark,n);return new t(e,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:o.field,key:a.field},u?{method:u}:{}),l!==void 0?{value:l}:{}),c?{frame:c}:{}),f!==void 0?{keyvals:f}:{}),x.length?{groupby:x}:{}))}return null}hash(){return`Impute ${$e(this.transform)}`}assemble(){let{impute:e,key:r,keyvals:n,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:e,key:r},n?{keyvals:R8e(n)?this.processSequence(n):n}:{}),{method:"value"}),s?{groupby:s}:{}),{value:!i||i==="value"?o:null});if(i&&i!=="value"){let l=Object.assign({type:"window",as:[`imputed_${e}_value`],ops:[i],fields:[e],frame:a,ignorePeers:!1},s?{groupby:s}:{}),c={type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e};return[u,l,c]}else return[u]}};var fDt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},y_=class t extends Ge{constructor(e,r){var n,i,s;super(e),this.transform=r,this.transform=we(r);let o=(n=this.transform.as)!==null&&n!==void 0?n:[void 0,void 0];this.transform.as=[(i=o[0])!==null&&i!==void 0?i:r.on,(s=o[1])!==null&&s!==void 0?s:r.loess]}clone(){return new t(null,we(this.transform))}dependentFields(){var e;return new Set([this.transform.loess,this.transform.on,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${$e(this.transform)}`}assemble(){let e=this.transform,{loess:r,on:n}=e,i=fDt(e,["loess","on"]);return Object.assign({type:"loess",x:n,y:r},i)}};var E_=class t extends Ge{constructor(e,r,n){super(e),this.transform=r,this.secondary=n}clone(){return new t(null,we(this.transform),this.secondary)}static make(e,r,n,i){let s=r.component.data.sources,{from:o}=n,a=null;if(O8e(o)){let u=zle(o.data,s);u||(u=new Oa(o.data),s.push(u));let l=r.getName(`lookup_${i}`);a=new on(u,l,Pt.Lookup,r.component.data.outputNodeRefCounts),r.component.data.outputNodes[l]=a}else if(D8e(o)){let u=o.param;n=Object.assign({as:u},n);let l;try{l=r.getSelectionComponent(Lt(u),u)}catch{throw new Error(z.cannotLookupVariableParameter(u))}if(a=l.materialized,!a)throw new Error(z.noSameUnitLookup(u))}return new t(e,n,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?le(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${$e({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e=Object.assign({values:this.transform.from.fields},this.transform.as?{as:le(this.transform.as)}:{});else{let r=this.transform.as;he(r)||(K(z.NO_FIELDS_NEEDS_AS),r="_lookup"),e={as:[r]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e),this.transform.default?{default:this.transform.default}:{})}};var xDt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},A_=class t extends Ge{constructor(e,r){var n,i,s;super(e),this.transform=r,this.transform=we(r);let o=(n=this.transform.as)!==null&&n!==void 0?n:[void 0,void 0];this.transform.as=[(i=o[0])!==null&&i!==void 0?i:"prob",(s=o[1])!==null&&s!==void 0?s:"value"]}clone(){return new t(null,we(this.transform))}dependentFields(){var e;return new Set([this.transform.quantile,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${$e(this.transform)}`}assemble(){let e=this.transform,{quantile:r}=e,n=xDt(e,["quantile"]);return Object.assign({type:"quantile",field:r},n)}};var dDt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},S_=class t extends Ge{constructor(e,r){var n,i,s;super(e),this.transform=r,this.transform=we(r);let o=(n=this.transform.as)!==null&&n!==void 0?n:[void 0,void 0];this.transform.as=[(i=o[0])!==null&&i!==void 0?i:r.on,(s=o[1])!==null&&s!==void 0?s:r.regression]}clone(){return new t(null,we(this.transform))}dependentFields(){var e;return new Set([this.transform.regression,this.transform.on,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${$e(this.transform)}`}assemble(){let e=this.transform,{regression:r,on:n}=e,i=dDt(e,["regression","on"]);return Object.assign({type:"regression",x:n,y:r},i)}};var v_=class t extends Ge{constructor(e,r){super(e),this.transform=r}clone(){return new t(null,we(this.transform))}addDimensions(e){var r;this.transform.groupby=Ao(((r=this.transform.groupby)!==null&&r!==void 0?r:[]).concat(e),n=>n)}producedFields(){}dependentFields(){var e;return new Set([this.transform.pivot,this.transform.value,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}hash(){return`PivotTransform ${$e(this.transform)}`}assemble(){let{pivot:e,value:r,groupby:n,limit:i,op:s}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:e,value:r},i!==void 0?{limit:i}:{}),s!==void 0?{op:s}:{}),n!==void 0?{groupby:n}:{})}};var __=class t extends Ge{constructor(e,r){super(e),this.transform=r}clone(){return new t(null,we(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${$e(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}};function SLe(t){let e=0;function r(n,i){var s;if(n instanceof Oa&&!n.isGenerator&&!Sd(n.data)&&(t.push(i),i={name:null,source:i.name,transform:[]}),n instanceof Ki&&(n.parent instanceof Oa&&!i.source?(i.format=Object.assign(Object.assign({},(s=i.format)!==null&&s!==void 0?s:{}),{parse:n.assembleFormatParse()}),i.transform.push(...n.assembleTransforms(!0))):i.transform.push(...n.assembleTransforms())),n instanceof Cl){i.name||(i.name=`data_${e++}`),!i.source||i.transform.length>0?(t.push(i),n.data=i.name):n.data=i.source,t.push(...n.assemble());return}switch((n instanceof o1||n instanceof a1||n instanceof d_||n instanceof Mf||n instanceof L3||n instanceof g_||n instanceof vu||n instanceof E_||n instanceof Td||n instanceof j0||n instanceof p_||n instanceof h_||n instanceof x_||n instanceof y_||n instanceof A_||n instanceof S_||n instanceof $0||n instanceof __||n instanceof v_)&&i.transform.push(n.assemble()),(n instanceof U0||n instanceof vl||n instanceof M3||n instanceof Bf||n instanceof m_)&&i.transform.push(...n.assemble()),n instanceof on&&(i.source&&i.transform.length===0?n.setSource(i.source):n.parent instanceof on?n.setSource(i.name):(i.name||(i.name=`data_${e++}`),n.setSource(i.name),n.numChildren()===1&&(t.push(i),i={name:null,source:i.name,transform:[]}))),n.numChildren()){case 0:n instanceof on&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:r(n.children[0],i);break;default:{i.name||(i.name=`data_${e++}`);let o=i.name;!i.source||i.transform.length>0?t.push(i):o=i.source;for(let a of n.children)r(a,{name:null,source:o,transform:[]});break}}}return r}function vLe(t){let e=[],r=SLe(e);for(let n of t.children)r(n,{source:t.name,name:null,transform:[]});return e}function _Le(t,e){var r,n;let i=[],s=SLe(i),o=0;for(let u of t.sources){u.hasName()||(u.dataName=`source_${o++}`);let l=u.assemble();s(u,l)}for(let u of i)u.transform.length===0&&delete u.transform;let a=0;for(let[u,l]of i.entries())((r=l.transform)!==null&&r!==void 0?r:[]).length===0&&!l.source&&i.splice(a++,0,i.splice(u,1)[0]);for(let u of i)for(let l of(n=u.transform)!==null&&n!==void 0?n:[])l.type==="lookup"&&(l.from=t.outputNodes[l.from].getSource());for(let u of i)u.name in e&&(u.values=e[u.name]);return i}function hDt(t){return t==="top"||t==="left"||be(t)?"header":"footer"}function TLe(t){for(let e of qi)pDt(t,e);bLe(t,"x"),bLe(t,"y")}function pDt(t,e){var r;let{facet:n,config:i,child:s,component:o}=t;if(t.channelHasField(e)){let a=n[e],u=bd("title",null,i,e),l=Ff(a,i,{allowDisabling:!0,includeDefault:u===void 0||!!u});s.component.layoutHeaders[e].title&&(l=j(l)?l.join(", "):l,l+=` / ${s.component.layoutHeaders[e].title}`,s.component.layoutHeaders[e].title=null);let c=bd("labelOrient",a.header,i,e),f=a.header!==null?It((r=a.header)===null||r===void 0?void 0:r.labels,i.header.labels,!0):!1,x=We(["bottom","right"],c)?"footer":"header";o.layoutHeaders[e]={title:a.header!==null?l:null,facetFieldDef:a,[x]:e==="facet"?[]:[CLe(t,e,f)]}}}function CLe(t,e,r){let n=e==="row"?"height":"width";return{labels:r,sizeSignal:t.child.component.layoutSize.get(n)?t.child.getSizeSignalRef(n):void 0,axes:[]}}function bLe(t,e){var r;let{child:n}=t;if(n.component.axes[e]){let{layoutHeaders:i,resolve:s}=t.component;if(s.axis[e]=s_(s,e),s.axis[e]==="shared"){let o=e==="x"?"column":"row",a=i[o];for(let u of n.component.axes[e]){let l=hDt(u.get("orient"));(r=a[l])!==null&&r!==void 0||(a[l]=[CLe(t,o,!1)]);let c=e_(u,"main",t.config,{header:!0});c&&a[l][0].axes.push(c),u.mainExtracted=!0}}}}function RLe(t){xH(t),fH(t,"width"),fH(t,"height")}function OLe(t){xH(t);let e=t.layout.columns===1?"width":"childWidth",r=t.layout.columns===void 0?"height":"childHeight";fH(t,e),fH(t,r)}function xH(t){for(let e of t.children)e.parseLayoutSize()}function fH(t,e){var r;let n=Gj(e),i=Yp(n),s=t.component.resolve,o=t.component.layoutSize,a;for(let u of t.children){let l=u.component.layoutSize.getWithExplicit(n),c=(r=s.scale[i])!==null&&r!==void 0?r:Vj(i,t);if(c==="independent"&&l.value==="step"){a=void 0;break}if(a){if(c==="independent"&&a.value!==l.value){a=void 0;break}a=Ta(a,l,n,"")}else a=l}if(a){for(let u of t.children)t.renameSignal(u.getName(n),t.getName(e)),u.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(e,a)}else o.setWithExplicit(e,{explicit:!1,value:void 0})}function DLe(t){let{size:e,component:r}=t;for(let n of ai){let i=rn(n);if(e[i]){let s=e[i];r.layoutSize.set(i,ba(s)?"step":s,!0)}else{let s=mDt(t,i);r.layoutSize.set(i,s,!1)}}}function mDt(t,e){let r=e==="width"?"x":"y",n=t.config,i=t.getScaleComponent(r);if(i){let s=i.get("type"),o=i.get("range");if(or(s)){let a=zv(n.view,e);return zs(o)||ba(a)?"step":a}else return tD(n.view,e)}else{if(t.hasProjection||t.mark==="arc")return tD(n.view,e);{let s=zv(n.view,e);return ba(s)?s.step:s}}}function dH(t,e,r){return ue(e,Object.assign({suffix:`by_${ue(t)}`},r??{}))}var hH=class t extends f_{constructor(e,r,n,i){super(e,"facet",r,n,i,e.resolve),this.child=b_(e.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!Nf(e))return{facet:this.initFacetFieldDef(e,"facet")};let r=H(e),n={};for(let i of r){if(![oa,aa].includes(i)){K(z.incompatibleChannel(i,"facet"));break}let s=e[i];if(s.field===void 0){K(z.emptyFieldDef(s,i));break}n[i]=this.initFacetFieldDef(s,i)}return n}initFacetFieldDef(e,r){let n=W6(e,r);return n.header?n.header=zn(n.header):n.header===null&&(n.header=null),n}channelHasField(e){return!!this.facet[e]}fieldDef(e){return this.facet[e]}parseData(){this.component.data=l1(this),this.child.parseData()}parseLayoutSize(){xH(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),TLe(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){var e,r,n;let i={};for(let s of qi)for(let o of n_){let a=this.component.layoutHeaders[s],u=a[o],{facetFieldDef:l}=a;if(l){let c=bd("titleOrient",l.header,this.config,s);if(["right","bottom"].includes(c)){let f=t_(s,c);(e=i.titleAnchor)!==null&&e!==void 0||(i.titleAnchor={}),i.titleAnchor[f]="end"}}if(u?.[0]){let c=s==="row"?"height":"width",f=o==="header"?"headerBand":"footerBand";s!=="facet"&&!this.child.component.layoutSize.get(c)&&((r=i[f])!==null&&r!==void 0||(i[f]={}),i[f][s]=.5),a.title&&((n=i.offset)!==null&&n!==void 0||(i.offset={}),i.offset[s==="row"?"rowTitle":"columnTitle"]=10)}}return i}assembleDefaultLayout(){let{column:e,row:r}=this.facet,n=e?this.columnDistinctSignal():r?1:void 0,i="all";return(!r&&this.component.resolve.scale.x==="independent"||!e&&this.component.resolve.scale.y==="independent")&&(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),n?{columns:n}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof t))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(e){return this.parent&&this.parent instanceof t?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:ue(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(e)):super.assembleGroup(e)}getCardinalityAggregateForChild(){let e=[],r=[],n=[];if(this.child instanceof t){if(this.child.channelHasField("column")){let i=ue(this.child.facet.column);e.push(i),r.push("distinct"),n.push(`distinct_${i}`)}}else for(let i of ai){let s=this.child.component.scales[i];if(s&&!s.merged){let o=s.get("type"),a=s.get("range");if(or(o)&&zs(a)){let u=s1(this.child,i),l=u_(u);l?(e.push(l),r.push("distinct"),n.push(`distinct_${l}`)):K(z.unknownField(i))}}}return{fields:e,ops:r,as:n}}assembleFacet(){let{name:e,data:r}=this.component.data.facetRoot,{row:n,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(let c of qi){let f=this.facet[c];if(f){u.push(ue(f));let{bin:x,sort:d}=f;if(St(x)&&u.push(ue(f,{binSuffix:"end"})),Wi(d)){let{field:h,op:p=Q2}=d,m=dH(f,d);n&&i?(s.push(m),o.push("max"),a.push(m)):(s.push(h),o.push(p),a.push(m))}else if(j(d)){let h=Pf(f,c);s.push(h),o.push("max"),a.push(h)}}}let l=!!n&&!!i;return Object.assign({name:e,data:r,groupby:u},l||s.length>0?{aggregate:Object.assign(Object.assign({},l?{cross:l}:{}),s.length?{fields:s,ops:o,as:a}:{})}:{})}facetSortFields(e){let{facet:r}=this,n=r[e];return n?Wi(n.sort)?[dH(n,n.sort,{expr:"datum"})]:j(n.sort)?[Pf(n,e,{expr:"datum"})]:[ue(n,{expr:"datum"})]:[]}facetSortOrder(e){let{facet:r}=this,n=r[e];if(n){let{sort:i}=n;return[(Wi(i)?i.order:!j(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var e;let{facet:r,config:n}=this;if(r.facet)return Hj(r.facet,"facet",n);let i={row:["top","bottom"],column:["left","right"]};for(let s of r_)if(r[s]){let o=bd("labelOrient",(e=r[s])===null||e===void 0?void 0:e.header,n,s);if(i[s].includes(o))return Hj(r[s],s,n)}}assembleMarks(){let{child:e}=this,r=this.component.data.facetRoot,n=vLe(r),i=e.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||e.assembleTitle(),o=e.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},s?{title:s}:{}),o?{style:o}:{}),{from:{facet:this.assembleFacet()},sort:{field:qi.map(u=>this.facetSortFields(u)).flat(),order:qi.map(u=>this.facetSortOrder(u)).flat()}}),n.length>0?{data:n}:{}),i?{encode:{update:i}}:{}),e.assembleGroup(e9e(this,[])))]}getMapping(){return this.facet}};function NLe(t,e){let{row:r,column:n}=e;if(r&&n){let i=null;for(let s of[r,n])if(Wi(s.sort)){let{field:o,op:a=Q2}=s.sort;t=i=new j0(t,{joinaggregate:[{op:a,field:o,as:dH(s,s.sort,{forAs:!0})}],groupby:[ue(s)]})}return i}return null}function zle(t,e){var r,n,i,s;for(let o of e){let a=o.data;if(t.name&&o.hasName()&&t.name!==o.dataName)continue;let u=(r=t.format)===null||r===void 0?void 0:r.mesh,l=(n=a.format)===null||n===void 0?void 0:n.feature;if(u&&l)continue;let c=(i=t.format)===null||i===void 0?void 0:i.feature;if((c||l)&&c!==l)continue;let f=(s=a.format)===null||s===void 0?void 0:s.mesh;if(!((u||f)&&u!==f)){if(F3(t)&&F3(a)){if(sa(t.values,a.values))return o}else if(Sd(t)&&Sd(a)){if(t.url===a.url)return o}else if(Dj(t)&&t.name===o.dataName)return o}}return null}function gDt(t,e){if(t.data||!t.parent){if(t.data===null){let n=new Oa({values:[]});return e.push(n),n}let r=zle(t.data,e);if(r)return B0(t.data)||(r.data.format=o_e({},t.data.format,r.data.format)),!r.hasName()&&t.data.name&&(r.dataName=t.data.name),r;{let n=new Oa(t.data);return e.push(n),n}}else return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function yDt(t,e,r){var n,i;let s=0;for(let o of e.transforms){let a,u;if(q8e(o))u=t=new L3(t,o),a="derived";else if(rD(o)){let l=Z9e(o);u=t=(n=Ki.makeWithAncestors(t,{},l,r))!==null&&n!==void 0?n:t,t=new Mf(t,e,o.filter)}else if(Tj(o))u=t=U0.makeFromTransform(t,o,e),a="number";else if($8e(o))a="date",r.getWithExplicit(o.field).value===void 0&&(t=new Ki(t,{[o.field]:a}),r.set(o.field,a,!1)),u=t=vl.makeFromTransform(t,o);else if(j8e(o))u=t=vu.makeFromTransform(t,o),a="number",uD(e)&&(t=new $0(t));else if(bj(o))u=t=E_.make(t,e,o,s++),a="derived";else if(P8e(o))u=t=new Td(t,o),a="number";else if(k8e(o))u=t=new j0(t,o),a="number";else if(H8e(o))u=t=Bf.makeFromTransform(t,o),a="derived";else if(z8e(o))u=t=new p_(t,o),a="derived";else if(B8e(o))u=t=new h_(t,o),a="derived";else if(N8e(o))u=t=new v_(t,o),a="derived";else if(M8e(o))t=new __(t,o);else if(U8e(o))u=t=M3.makeFromTransform(t,o),a="derived";else if(F8e(o))u=t=new x_(t,o),a="derived";else if(w8e(o))u=t=new A_(t,o),a="derived";else if(L8e(o))u=t=new S_(t,o),a="derived";else if(I8e(o))u=t=new y_(t,o),a="derived";else{K(z.invalidTransformIgnored(o));continue}if(u&&a!==void 0)for(let l of(i=u.producedFields())!==null&&i!==void 0?i:[])r.set(l,a,!1)}return t}function l1(t){var e,r,n,i,s,o,a,u,l,c;let f=gDt(t,t.component.data.sources),{outputNodes:x,outputNodeRefCounts:d}=t.component.data,h=t.data,m=!(h&&(B0(h)||Sd(h)||F3(h)))&&t.parent?t.parent.component.data.ancestorParse.clone():new Oj;B0(h)?(cle(h)?f=new a1(f,h.sequence):nD(h)&&(f=new o1(f,h.graticule)),m.parseNothing=!0):((e=h?.format)===null||e===void 0?void 0:e.parse)===null&&(m.parseNothing=!0),f=(r=Ki.makeExplicit(f,t,m))!==null&&r!==void 0?r:f,f=new $0(f);let g=t.parent&&bl(t.parent);(tr(t)||Yi(t))&&g&&(f=(n=U0.makeFromEncoding(f,t))!==null&&n!==void 0?n:f),t.transforms.length>0&&(f=yDt(f,t,m));let y=tLe(t),A=eLe(t);f=(i=Ki.makeWithAncestors(f,{},Object.assign(Object.assign({},y),A),m))!==null&&i!==void 0?i:f,tr(t)&&(f=m_.parseAll(f,t),f=g_.parseAll(f,t)),(tr(t)||Yi(t))&&(g||(f=(s=U0.makeFromEncoding(f,t))!==null&&s!==void 0?s:f),f=(o=vl.makeFromEncoding(f,t))!==null&&o!==void 0?o:f,f=L3.parseAllForSortIndex(f,t));let S=t.getDataName(Pt.Raw),T=new on(f,S,Pt.Raw,d);if(x[S]=T,f=T,tr(t)){let O=vu.makeFromEncoding(f,t);O&&(f=O,uD(t)&&(f=new $0(f))),f=(a=M3.makeFromEncoding(f,t))!==null&&a!==void 0?a:f,f=(u=Bf.makeFromEncoding(f,t))!==null&&u!==void 0?u:f}tr(t)&&(f=(l=d_.make(f,t))!==null&&l!==void 0?l:f);let _=t.getDataName(Pt.Main),b=new on(f,_,Pt.Main,d);x[_]=b,f=b,tr(t)&&O9e(t,b);let R=null;if(Yi(t)){let O=t.getName("facet");f=(c=NLe(f,t.facet))!==null&&c!==void 0?c:f,R=new Cl(f,t,O,b.getSource()),x[O]=R}return Object.assign(Object.assign({},t.component.data),{outputNodes:x,outputNodeRefCounts:d,raw:T,main:b,facetRoot:R,ancestorParse:m})}var pH=class extends I3{constructor(e,r,n,i){var s,o,a,u;super(e,"concat",r,n,i,e.resolve),(((o=(s=e.resolve)===null||s===void 0?void 0:s.axis)===null||o===void 0?void 0:o.x)==="shared"||((u=(a=e.resolve)===null||a===void 0?void 0:a.axis)===null||u===void 0?void 0:u.y)==="shared")&&K(z.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(e).map((l,c)=>b_(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=l1(this);for(let e of this.children)e.parseData()}parseSelections(){this.component.selection={};for(let e of this.children){e.parseSelections();for(let r of H(e.component.selection))this.component.selection[r]=e.component.selection[r]}}parseMarkGroup(){for(let e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(let e of this.children)e.parseAxesAndHeaders()}getChildren(e){return X2(e)?e.vconcat:Hv(e)?e.hconcat:e.concat}parseLayoutSize(){OLe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce((r,n)=>n.assembleSelectionTopLevelSignals(r),e)}assembleSignals(){return this.children.forEach(e=>e.assembleSignals()),[]}assembleLayoutSignals(){let e=i_(this);for(let r of this.children)e.push(...r.assembleLayoutSignals());return e}assembleSelectionData(e){return this.children.reduce((r,n)=>n.assembleSelectionData(r),e)}assembleMarks(){return this.children.map(e=>{let r=e.assembleTitle(),n=e.assembleGroupStyle(),i=e.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:e.getName("group")},r?{title:r}:{}),n?{style:n}:{}),i?{encode:{update:i}}:{}),e.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){let e=this.layout.columns;return Object.assign(Object.assign({},e!=null?{columns:e}:{}),{bounds:"full",align:"each"})}};function EDt(t){return t===!1||t===null}var ADt=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},Uue),{labelExpr:1,encode:1}),Gle=H(ADt),mH=class t extends io{constructor(e={},r={},n=!1){super(),this.explicit=e,this.implicit=r,this.mainExtracted=n}clone(){return new t(we(this.explicit),we(this.implicit),this.mainExtracted)}hasAxisPart(e){return e==="axis"?!0:e==="grid"||e==="title"?!!this.get(e):!EDt(this.get(e))}hasOrientSignalRef(){return be(this.explicit.orient)}};function FLe(t,e,r){var n;let{encoding:i,config:s}=t,o=(n=er(i[e]))!==null&&n!==void 0?n:er(i[js(e)]),a=t.axis(e)||{},{format:u,formatType:l}=a;return Df(l)?Object.assign({text:G6({fieldOrDatumDef:o,field:"datum.value",format:u,formatType:l,config:s})},r):r}function wLe(t){return ai.reduce((e,r)=>(t.component.scales[r]&&(e[r]=[RDt(r,t)]),e),{})}var vDt={bottom:"top",top:"bottom",left:"right",right:"left"};function LLe(t){var e;let{axes:r,resolve:n}=t.component,i={top:0,bottom:0,right:0,left:0};for(let s of t.children){s.parseAxesAndHeaders();for(let o of H(s.component.axes))n.axis[o]=s_(t.component.resolve,o),n.axis[o]==="shared"&&(r[o]=_Dt(r[o],s.component.axes[o]),r[o]||(n.axis[o]="independent",delete r[o]))}for(let s of ai){for(let o of t.children)if(o.component.axes[s]){if(n.axis[s]==="independent"){r[s]=((e=r[s])!==null&&e!==void 0?e:[]).concat(o.component.axes[s]);for(let a of o.component.axes[s]){let{value:u,explicit:l}=a.getWithExplicit("orient");if(!be(u)){if(i[u]>0&&!l){let c=vDt[u];i[u]>i[c]&&a.set("orient",c,!1)}i[u]++}}}delete o.component.axes[s]}if(n.axis[s]==="independent"&&r[s]&&r[s].length>1)for(let o of r[s])o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function _Dt(t,e){if(t){if(t.length!==e.length)return;let r=t.length;for(let n=0;n<r;n++){let i=t[n],s=e[n];if(!!i!=!!s)return;if(i&&s){let o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;t[n]=bDt(i,s)}}}else return e.map(r=>r.clone());return t}function bDt(t,e){for(let r of Gle){let n=Ta(t.getWithExplicit(r),e.getWithExplicit(r),r,"axis",(i,s)=>{switch(r){case"title":return Vk(i,s);case"gridScale":return{explicit:i.explicit,value:It(i.value,s.value)}}return Vv(i,s,r,"axis")});t.setWithExplicit(r,n)}return t}function TDt(t,e,r,n,i){if(e==="disable")return r!==void 0;switch(r=r||{},e){case"titleAngle":case"labelAngle":return t===(be(r.labelAngle)?r.labelAngle:Eg(r.labelAngle));case"values":return!!r.values;case"encode":return!!r.encoding||!!r.labelAngle;case"title":if(t===Rle(n,i))return!0}return t===r[e]}var CDt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function RDt(t,e){var r,n,i;let s=e.axis(t),o=new mH,a=er(e.encoding[t]),{mark:u,config:l}=e,c=s?.orient||((r=l[t==="x"?"axisX":"axisY"])===null||r===void 0?void 0:r.orient)||((n=l.axis)===null||n===void 0?void 0:n.orient)||L9e(t),f=e.getScaleComponent(t).get("type"),x=F9e(t,f,c,e.config),d=s!==void 0?!s:lD("disable",l.style,s?.style,x).configValue;if(o.set("disable",d,s!==void 0),d)return o;s=s||{};let h=w9e(a,s,t,l.style,x),p={fieldOrDatumDef:a,axis:s,channel:t,model:e,scaleType:f,orient:c,labelAngle:h,mark:u,config:l};for(let y of Gle){let A=y in ble?ble[y](p):$ue(y)?s[y]:void 0,S=A!==void 0,T=TDt(A,y,s,e,t);if(S&&T)o.set(y,A,T);else{let{configValue:_=void 0,configFrom:b=void 0}=$ue(y)&&y!=="values"?lD(y,l.style,s.style,x):{},R=_!==void 0;S&&!R?o.set(y,A,T):(b!=="vgAxisConfig"||CDt.has(y)&&R||yd(_)||be(_))&&o.set(y,_,!1)}}let m=(i=s.encoding)!==null&&i!==void 0?i:{},g=sj.reduce((y,A)=>{var S;if(!o.hasAxisPart(A))return y;let T=Qj((S=m[A])!==null&&S!==void 0?S:{},e),_=A==="labels"?FLe(e,t,T):T;return _!==void 0&&!mt(_)&&(y[A]={update:_}),y},{});return mt(g)||o.set("encode",g,!!s.encoding||s.labelAngle!==void 0),o}function ILe({encoding:t,size:e}){for(let r of ai){let n=rn(r);ba(e[n])&&_a(t[r])&&(delete e[n],K(z.stepDropped(n)))}return e}function MLe(t,e,r){let n=zn(t),i=st("orient",n,r);if(n.orient=NDt(n.type,e,i),i!==void 0&&i!==n.orient&&K(z.orientOverridden(n.orient,i)),n.type==="bar"&&n.orient){let a=st("cornerRadiusEnd",n,r);if(a!==void 0){let u=n.orient==="horizontal"&&e.x2||n.orient==="vertical"&&e.y2?["cornerRadius"]:E7e[n.orient];for(let l of u)n[l]=a;n.cornerRadiusEnd!==void 0&&delete n.cornerRadiusEnd}}return st("opacity",n,r)===void 0&&(n.opacity=DDt(n.type,e)),st("cursor",n,r)===void 0&&(n.cursor=ODt(n,e,r)),n}function ODt(t,e,r){return e.href||t.href||st("href",t,r)?"pointer":t.cursor}function DDt(t,e){if(We([Fv,q6,U6,$6],t)&&!Uv(e))return .7}function PLe(t,e,{graticule:r}){if(r)return!1;let n=nf("filled",t,e),i=t.type;return It(n,i!==Fv&&i!==O3&&i!==wv)}function NDt(t,e,r){switch(t){case Fv:case U6:case $6:case H$:case d7e:case x7e:return}let{x:n,y:i,x2:s,y2:o}=e;switch(t){case R3:if(se(n)&&(qr(n.bin)||se(i)&&i.aggregate&&!n.aggregate))return"vertical";if(se(i)&&(qr(i.bin)||se(n)&&n.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(r)return r;if(!s&&(se(n)&&n.type===El&&!St(n.bin)||tj(n)))return"horizontal";if(!o&&(se(i)&&i.type===El&&!St(i.bin)||tj(i)))return"vertical"}case wv:if(s&&!(se(n)&&qr(n.bin))&&o&&!(se(i)&&qr(i.bin)))return;case C3:if(o)return se(i)&&qr(i.bin)?"horizontal":"vertical";if(s)return se(n)&&qr(n.bin)?"vertical":"horizontal";if(t===wv){if(n&&!i)return"vertical";if(i&&!n)return"horizontal"}case O3:case q6:{let a=_a(n),u=_a(i);if(r)return r;if(a&&!u)return t!=="tick"?"horizontal":"vertical";if(!a&&u)return t!=="tick"?"vertical":"horizontal";if(a&&u){let l=n,c=i,f=l.type===Cf,x=c.type===Cf;return f&&!x?t!=="tick"?"vertical":"horizontal":!f&&x?t!=="tick"?"horizontal":"vertical":!l.aggregate&&c.aggregate?t!=="tick"?"vertical":"horizontal":l.aggregate&&!c.aggregate&&t!=="tick"?"horizontal":"vertical"}else return}}return"vertical"}var kLe={vgMark:"arc",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zr(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Hr("x",t,{defaultPos:"mid"})),Hr("y",t,{defaultPos:"mid"})),Ra(t,"radius")),Ra(t,"theta"))};var BLe={vgMark:"area",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},zr(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),i1("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="horizontal"})),i1("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="vertical"})),Jv(t))};var qLe={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},zr(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Ra(t,"x")),Ra(t,"y"))};var ULe={vgMark:"shape",encodeEntry:t=>Object.assign({},zr(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:t=>{let{encoding:e}=t,r=e.shape;return[Object.assign({type:"geoshape",projection:t.projectionName()},r&&se(r)&&r.type===k0?{field:ue(r,{expr:"datum"})}:{})]}};var $Le={vgMark:"image",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},zr(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),Ra(t,"x")),Ra(t,"y")),r1(t,"url"))};var jLe={vgMark:"line",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zr(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Hr("x",t,{defaultPos:"mid"})),Hr("y",t,{defaultPos:"mid"})),mr("size",t,{vgChannel:"strokeWidth"})),Jv(t))},HLe={vgMark:"trail",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zr(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Hr("x",t,{defaultPos:"mid"})),Hr("y",t,{defaultPos:"mid"})),mr("size",t)),Jv(t))};function Qle(t,e){let{config:r}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zr(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Hr("x",t,{defaultPos:"mid"})),Hr("y",t,{defaultPos:"mid"})),mr("size",t)),mr("angle",t)),FDt(t,r,e))}function FDt(t,e,r){return r?{shape:{value:r}}:mr("shape",t)}var zLe={vgMark:"symbol",encodeEntry:t=>Qle(t)},GLe={vgMark:"symbol",encodeEntry:t=>Qle(t,"circle")},QLe={vgMark:"symbol",encodeEntry:t=>Qle(t,"square")};var VLe={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},zr(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Ra(t,"x")),Ra(t,"y"))};var WLe={vgMark:"rule",encodeEntry:t=>{let{markDef:e}=t,r=e.orient;return!t.encoding.x&&!t.encoding.y&&!t.encoding.latitude&&!t.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},zr(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),i1("x",t,{defaultPos:r==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:r!=="vertical"})),i1("y",t,{defaultPos:r==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:r!=="horizontal"})),mr("size",t,{vgChannel:"strokeWidth"}))}};var YLe={vgMark:"text",encodeEntry:t=>{let{config:e,encoding:r}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zr(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Hr("x",t,{defaultPos:"mid"})),Hr("y",t,{defaultPos:"mid"})),r1(t)),mr("size",t,{vgChannel:"fontSize"})),mr("angle",t)),Mj("align",wDt(t.markDef,r,e))),Mj("baseline",LDt(t.markDef,r,e))),Hr("radius",t,{defaultPos:null})),Hr("theta",t,{defaultPos:null}))}};function wDt(t,e,r){if(st("align",t,r)===void 0)return"center"}function LDt(t,e,r){if(st("baseline",t,r)===void 0)return"middle"}var KLe={vgMark:"rect",encodeEntry:t=>{let{config:e,markDef:r}=t,n=r.orient,i=n==="horizontal"?"width":"height",s=n==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zr(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Hr("x",t,{defaultPos:"mid",vgChannel:"xc"})),Hr("y",t,{defaultPos:"mid",vgChannel:"yc"})),mr("size",t,{defaultValue:IDt(t),vgChannel:i})),{[s]:vt(st("thickness",r,e))})}};function IDt(t){var e;let{config:r,markDef:n}=t,{orient:i}=n,s=i==="horizontal"?"width":"height",o=t.getScaleComponent(i==="horizontal"?"x":"y"),a=(e=st("size",n,r,{vgChannel:s}))!==null&&e!==void 0?e:r.tick.bandSize;if(a!==void 0)return a;{let u=o?o.get("range"):void 0;return u&&zs(u)&&Ct(u.step)?u.step*3/4:N3(r.view,s)*3/4}}var gH={arc:kLe,area:BLe,bar:qLe,circle:GLe,geoshape:ULe,image:$Le,line:jLe,point:zLe,rect:VLe,rule:WLe,square:QLe,text:YLe,tick:KLe,trail:HLe};function ZLe(t){if(We([O3,C3,h7e],t.mark)){let e=aj(t.mark,t.encoding);if(e.length>0)return MDt(t,e)}else if(t.mark===R3){let e=zk.some(r=>st(r,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&e)return PDt(t)}return Vle(t)}var XLe="faceted_path_";function MDt(t,e){return[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:XLe+t.requestDataName(Pt.Main),data:t.requestDataName(Pt.Main),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Vle(t,{fromPrefix:XLe})}]}var JLe="stack_group_";function PDt(t){var e;let[r]=Vle(t,{fromPrefix:JLe}),n=t.scaleName(t.stack.fieldChannel),i=(c={})=>t.vgField(t.stack.fieldChannel,c),s=(c,f)=>{let x=[i({prefix:"min",suffix:"start",expr:f}),i({prefix:"max",suffix:"start",expr:f}),i({prefix:"min",suffix:"end",expr:f}),i({prefix:"max",suffix:"end",expr:f})];return`${c}(${x.map(d=>`scale('${n}',${d})`).join(",")})`},o,a;t.stack.fieldChannel==="x"?(o=Object.assign(Object.assign({},Wp(r.encode.update,["y","yc","y2","height",...zk])),{x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}}),a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},r.encode.update=Object.assign(Object.assign({},Hn(r.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(o=Object.assign(Object.assign({},Wp(r.encode.update,["x","xc","x2","width"])),{y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}}),a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},r.encode.update=Object.assign(Object.assign({},Hn(r.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(let c of zk){let f=nf(c,t.markDef,t.config);r.encode.update[c]?(o[c]=r.encode.update[c],delete r.encode.update[c]):f&&(o[c]=vt(f)),f&&(r.encode.update[c]={value:0})}let u=[];if(((e=t.stack.groupbyChannels)===null||e===void 0?void 0:e.length)>0)for(let c of t.stack.groupbyChannels){let f=t.fieldDef(c),x=ue(f);x&&u.push(x),(f?.bin||f?.timeUnit)&&u.push(ue(f,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(r.encode.update[f])return Object.assign(Object.assign({},c),{[f]:r.encode.update[f]});{let x=nf(f,t.markDef,t.config);return x!==void 0?Object.assign(Object.assign({},c),{[f]:vt(x)}):c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(Pt.Main),name:JLe+t.requestDataName(Pt.Main),groupby:u,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[r]}]}]}function kDt(t){var e;let{encoding:r,stack:n,mark:i,markDef:s,config:o}=t,a=r.order;if(!(!j(a)&&Kn(a)&&Dee(a.value)||!a&&Dee(st("order",s,o)))){if((j(a)||se(a))&&!n)return Qk(a,{expr:"datum"});if(ro(i)){let u=s.orient==="horizontal"?"y":"x",l=r[u];if(se(l)){let c=l.sort;if(j(c))return{field:ue(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Wi(c))return{field:ue({aggregate:Uv(t.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(Y$(c)){let f=t.fieldDef(c.encoding);return{field:ue(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:ue(l,{binSuffix:!((e=t.stack)===null||e===void 0)&&e.impute?"mid":void 0,expr:"datum"})}}return}}}function Vle(t,e={fromPrefix:""}){let{mark:r,markDef:n,encoding:i,config:s}=t,o=It(n.clip,BDt(t),qDt(t)),a=jee(n),u=i.key,l=kDt(t),c=UDt(t),f=st("aria",n,s),x=gH[r].postEncodingTransform?gH[r].postEncodingTransform(t):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("marks"),type:gH[r].vgMark},o?{clip:!0}:{}),a?{style:a}:{}),u?{key:u.field}:{}),l?{sort:l}:{}),c||{}),f===!1?{aria:f}:{}),{from:{data:e.fromPrefix+t.requestDataName(Pt.Main)},encode:{update:gH[r].encodeEntry(t)}}),x?{transform:x}:{})]}function BDt(t){let e=t.getScaleComponent("x"),r=t.getScaleComponent("y");return e?.get("selectionExtent")||r?.get("selectionExtent")?!0:void 0}function qDt(t){let e=t.component.projection;return e&&!e.isFit?!0:void 0}function UDt(t){if(!t.component.selection)return null;let e=H(t.component.selection).length,r=e,n=t.parent;for(;n&&r===0;)r=H(n.component.selection).length,n=n.parent;return r?{interactive:e>0||!!t.encoding.tooltip}:null}var T_=class extends f_{constructor(e,r,n,i={},s){var o;super(e,"unit",r,n,s,void 0,rle(e)?e.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];let a=ys(e.mark)?Object.assign({},e.mark):{type:e.mark},u=a.type;a.filled===void 0&&(a.filled=PLe(a,s,{graticule:e.data&&nD(e.data)}));let l=this.encoding=j7e(e.encoding||{},u,a.filled,s);this.markDef=MLe(a,l,s),this.size=ILe({encoding:l,size:rle(e)?Object.assign(Object.assign(Object.assign({},i),e.width?{width:e.width}:{}),e.height?{height:e.height}:{}):i}),this.stack=Ej(u,l),this.specifiedScales=this.initScales(u,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=e.projection,this.selection=((o=e.params)!==null&&o!==void 0?o:[]).filter(c=>jv(c))}get hasProjection(){let{encoding:e}=this,r=this.mark===z$,n=e&&h_e.some(i=>Ve(e[i]));return r||n}scaleDomain(e){let r=this.specifiedScales[e];return r?r.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,r){return Kp.reduce((n,i)=>{var s;let o=er(r[i]);return o&&(n[i]=this.initScale((s=o.scale)!==null&&s!==void 0?s:{})),n},{})}initScale(e){let{domain:r,range:n}=e,i=zn(e);return j(r)&&(i.domain=r.map(Ui)),j(n)&&(i.range=n.map(Ui)),i}initAxes(e){return ai.reduce((r,n)=>{let i=e[n];if(Ve(i)||n===Ht&&Ve(e.x2)||n===Cr&&Ve(e.y2)){let s=Ve(i)?i.axis:void 0;r[n]=s&&this.initAxis(Object.assign({},s))}return r},{})}initAxis(e){let r=H(e),n={};for(let i of r){let s=e[i];n[i]=yd(s)?Gk(s):Ui(s)}return n}initLegends(e){return T_e.reduce((r,n)=>{let i=er(e[n]);if(i&&R_e(n)){let s=i.legend;r[n]=s&&zn(s)}return r},{})}parseData(){this.component.data=l1(this)}parseLayoutSize(){DLe(this)}parseSelections(){this.component.selection=R9e(this,this.selection)}parseMarkGroup(){this.component.mark=ZLe(this)}parseAxesAndHeaders(){this.component.axes=wLe(this)}assembleSelectionTopLevelSignals(e){return t9e(this,e)}assembleSignals(){return[...jj(this),...Z8e(this,[])]}assembleSelectionData(e){return r9e(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return i_(this)}assembleMarks(){var e;let r=(e=this.component.mark)!==null&&e!==void 0?e:[];return(!this.parent||!bl(this.parent))&&(r=xle(this,r)),r.map(this.correctDataNames)}assembleGroupStyle(){let{style:e}=this.view||{};if(e!==void 0)return e;if(this.encoding.x||this.encoding.y)return"cell"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return Lf(this.encoding,e)}fieldDef(e){let r=this.encoding[e];return Es(r)}typedFieldDef(e){let r=this.fieldDef(e);return xi(r)?r:null}};var yH=class t extends I3{constructor(e,r,n,i,s){super(e,"layer",r,n,s,e.resolve,e.view);let o=Object.assign(Object.assign(Object.assign({},i),e.width?{width:e.width}:{}),e.height?{height:e.height}:{});this.children=e.layer.map((a,u)=>{if(Ad(a))return new t(a,this,this.getName(`layer_${u}`),o,s);if(di(a))return new T_(a,this,this.getName(`layer_${u}`),o,s);throw new Error(z.invalidSpec(a))})}parseData(){this.component.data=l1(this);for(let e of this.children)e.parseData()}parseLayoutSize(){RLe(this)}parseSelections(){this.component.selection={};for(let e of this.children){e.parseSelections();for(let r of H(e.component.selection))this.component.selection[r]=e.component.selection[r]}}parseMarkGroup(){for(let e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){LLe(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce((r,n)=>n.assembleSelectionTopLevelSignals(r),e)}assembleSignals(){return this.children.reduce((e,r)=>e.concat(r.assembleSignals()),jj(this))}assembleLayoutSignals(){return this.children.reduce((e,r)=>e.concat(r.assembleLayoutSignals()),i_(this))}assembleSelectionData(e){return this.children.reduce((r,n)=>n.assembleSelectionData(r),e)}assembleGroupStyle(){let e=new Set;for(let n of this.children)for(let i of le(n.assembleGroupStyle()))e.add(i);let r=Array.from(e);return r.length>1?r:r.length===1?r[0]:void 0}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(let r of this.children)if(e=r.assembleTitle(),e)return e}assembleLayout(){return null}assembleMarks(){return n9e(this,this.children.flatMap(e=>e.assembleMarks()))}assembleLegends(){return this.children.reduce((e,r)=>e.concat(r.assembleLegends()),Kj(this))}};function b_(t,e,r,n,i){if(gd(t))return new hH(t,e,r,i);if(Ad(t))return new yH(t,e,r,n,i);if(di(t))return new T_(t,e,r,n,i);if(ele(t))return new pH(t,e,r,i);throw new Error(z.invalidSpec(t))}var $Dt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function Wle(t,e={}){e.logger&&j_e(e.logger),e.fieldTitle&&kue(e.fieldTitle);try{let r=yj(e4(e.config,t.config)),n=ule(t,r),i=b_(n,null,"",void 0,r);return i.parse(),sLe(i.component.data,i),{spec:HDt(i,jDt(t,n.autosize,r,i),t.datasets,t.usermeta),normalized:n}}finally{e.logger&&H_e(),e.fieldTitle&&q7e()}}function jDt(t,e,r,n){let i=n.component.layoutSize.get("width"),s=n.component.layoutSize.get("height");if(e===void 0?(e={type:"pad"},n.hasAxisOrientSignalRef()&&(e.resize=!0)):he(e)&&(e={type:e}),i&&s&&X8e(e.type)){if(i==="step"&&s==="step")K(z.droppingFit()),e.type="pad";else if(i==="step"||s==="step"){let o=i==="step"?"width":"height";K(z.droppingFit(Yp(o)));let a=o==="width"?"height":"width";e.type=J8e(a)}}return Object.assign(Object.assign(Object.assign({},H(e).length===1&&e.type?e.type==="pad"?{}:{autosize:e.type}:{autosize:e}),lle(r,!1)),lle(t,!0))}function HDt(t,e,r={},n){let i=t.config?p8e(t.config):void 0,s=[].concat(t.assembleSelectionData([]),_Le(t.component.data,r)),o=t.assembleProjections(),a=t.assembleTitle(),u=t.assembleGroupStyle(),l=t.assembleGroupEncodeEntry(!0),c=t.assembleLayoutSignals();c=c.filter(d=>(d.name==="width"||d.name==="height")&&d.value!==void 0?(e[d.name]=+d.value,!1):!0);let{params:f}=e,x=$Dt(e,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{}),x),a?{title:a}:{}),u?{style:u}:{}),l?{encode:{update:l}}:{}),{data:s}),o.length>0?{projections:o}:{}),t.assembleGroup([...c,...t.assembleSelectionTopLevelSignals([]),...gj(f)])),i?{config:i}:{}),n?{usermeta:n}:{})}var B5r=Cve.version;var Rl=class{constructor(e,r,n,i={},s){this.document=e;this.styleDefaults=r;this.options=n;this.timezone=s;this.size=i.size||this.styleDefaults.size||"medium"}mapData(e){let r=[];for(let n of e){let i={};for(let s of e.field.intrinsicFields){let o=this.getDataValue(n.cell(s));o instanceof Date&&(o=mve(o,this.timezone)),i[s.name]=o}r.push(i)}return r}getSize(){return this.size==="large"?{height:350,width:500}:{height:175,width:250}}async render(e){if(!e.isArray())throw new Error("Invalid type for chart renderer");let r=this.getVegaLiteSpec(e),n=Wle(r,{logger:{level(o){return o!==void 0?this:0},info(){return this},error(){return this},warn(){return this},debug(){return this}}}).spec,i=new v$(bue(n),{renderer:"none"});i.logger().level(-1);let s=this.document.createElement("div");return s.innerHTML=await i.toSVG(),s}};var eIe={AL:"01",Alabama:"01",AK:"02",Alaska:"02",AZ:"04",Arizona:"04",AR:"05",Arkansas:"05",CA:"06",California:"06",CO:"08",Colorado:"08",CT:"09",Connecticut:"09",DE:"10",Delaware:"10",DC:"11","District of Columbia":"11",FL:"12",Florida:"12",GA:"13",Georgia:"13",HI:"15",Hawaii:"12",ID:"16",Idaho:"16",IL:"17",Illinois:"17",IN:"18",Indiana:"18",IA:"19",Iowa:"19",KS:"20",Kansas:"20",KY:"21",Kentucky:"21",LA:"22",Louisiana:"22",ME:"23",Maine:"23",MD:"24",Maryland:"24",MA:"25",Massachusetts:"25",MI:"26",Michigan:"26",MN:"27",Minnesota:"27",MS:"28",Mississippi:"28",MO:"29",Missouri:"29",MT:"30",Montana:"30",NE:"31",Nebraska:"31",NV:"32",Nevada:"32",NH:"33","New Hampshire":"33",NJ:"34","New Jersey":"34",NM:"35","New Mexico":"35",NY:"36","New York":"36",NC:"37","North Carolina":"37",ND:"38","North Dakota":"38",OH:"39",Ohio:"39",OK:"40",Oklahoma:"40",OR:"41",Oregon:"41",PA:"42",Pennsylvania:"42",RI:"44","Rhode Island":"44",SC:"45","South Carolina":"45",SD:"46","South Dakota":"46",TN:"47",Tennessee:"47",TX:"48",Texas:"48",UT:"49",Utah:"49",VT:"50",Vermont:"50",VA:"51",Virginia:"51",WA:"53",Washington:"53",WV:"54","West Virginia":"54",WI:"55",Wisconsin:"55",WY:"56",Wyoming:"56",PR:"72","Puerto Rico":"72",VI:"78",AS:"60",MP:"69",GU:"66"};var Yle=class extends Rl{getRegionField(e){return e.intrinsicFields[0]}getColorField(e){return e.intrinsicFields[1]}getDataValue(e){if(e.isNumber())return e.value;if(e.isString())if(e.field===this.getRegionField(e.field.parentExplore)){let r=eIe[e.value];return r===void 0?void 0:r}else return e.value;else{if(e.isNull())return;throw new Error("Invalid field type for shape map.")}}getDataType(e){if(e.isAtomicField()){if(e.isDate()||e.isTimestamp())return"nominal";if(e.isString())return e===this.getRegionField(e.parentExplore)?"quantitative":"nominal";if(e.isNumber())return"quantitative"}throw new Error("Invalid field type for shape map.")}getVegaLiteSpec(e){if(e.isNull())throw new Error("Expected struct value not to be null.");if(!e.isArray())throw new Error("Invalid data for shape map");let r=this.getRegionField(e.field),n=this.getColorField(e.field),i=n?this.getDataType(n):void 0,s=n!==void 0?{field:n.name,type:i,axis:{title:$n(this.options,n,void 0,this.timezone)},scale:cr(i,!1)}:void 0,o=this.mapData(e).filter(a=>a[r.name]!==void 0);return{...this.getSize(),data:{values:o},projection:{type:"albersUsa"},layer:[{data:{values:pg,format:{type:"topojson",feature:"states"}},mark:{type:"geoshape",fill:"#efefef",stroke:"white"}},{transform:[{lookup:r.name,from:{data:{values:pg,format:{type:"topojson",feature:"states"}},key:"id"},as:"geo"}],mark:"geoshape",encoding:{shape:{field:"geo",type:"geojson"},color:s}}],background:"transparent",config:{axis:{labelFont:"var(--malloy-font-family, Roboto)",titleFont:"var(--malloy-font-family, Roboto)",titleFontWeight:500,titleColor:"var(--malloy-title-color, #505050)",labelColor:"var(--malloy-label-color, #000000)",titleFontSize:12},legend:{labelFont:"var(--malloy-font-family, Roboto)",titleFont:"var(--malloy-font-family, Roboto)",titleFontWeight:500,titleColor:"var(--malloy-title-color, #505050)",labelColor:"var(--malloy-label-color, #000000)",titleFontSize:12},header:{labelFont:"var(--malloy-font-family, Roboto)",titleFont:"var(--malloy-font-family, Roboto)",titleFontWeight:500},mark:{font:"var(--malloy-font-family, Roboto)"},title:{font:"var(--malloy-font-family, Roboto)",subtitleFont:"var(--malloy-font-family, Roboto)",fontWeight:500}}}}},EH=class t extends et{static{this.instance=new t}create(e,r,n,i,s,o){return new Yle(e,r,n,s,o)}get rendererName(){return"shape_map"}};var tIe=Na(Bp());var Kle=class extends Rl{getDataValue(e){if(e.isNumber()||e.isString())return e.value;if(e.isTimestamp()||e.isDate())return jp(e.value,e.field.timeframe||tIe.TimestampTimeframe.Second,this.timezone);throw new Error("Invalid field type for point map chart.")}getDataType(e){if(e.isAtomicField()){if(e.isDate()||e.isTimestamp()||e.isString())return"nominal";if(e.isNumber())return"quantitative"}throw new Error("Invalid field type for point map.")}isTimeFieldDef(e){return!!(e.isAtomicField()&&(e.isDate()||e.isTimestamp()))}getVegaLiteSpec(e){if(e.isNull())throw new Error("Expected struct value not to be null.");let r=e.field.intrinsicFields,n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],u=s?this.getDataType(s):void 0,l=o?this.getDataType(o):void 0,c=a?this.getDataType(a):void 0,f=s!==void 0?{field:s.name,type:u,axis:{title:$n(this.options,s,void 0,this.timezone)},scale:cr(u,!1)}:void 0,x=o?{field:o.name,type:l,axis:{title:$n(this.options,o,void 0,this.timezone)}}:{value:5},d=a?{field:a.name,type:c,axis:{title:$n(this.options,a,void 0,this.timezone)}}:{value:"circle"};return{...this.getSize(),data:{values:this.mapData(e)},projection:{type:"albersUsa"},layer:[{data:{values:pg,format:{type:"topojson",feature:"states"}},mark:{type:"geoshape",fill:"#efefef",stroke:"white"}},{mark:"point",encoding:{latitude:{field:n.name,type:"quantitative"},longitude:{field:i.name,type:"quantitative"},size:x,color:f,shape:d}}],background:"transparent",config:{axis:{labelFont:"var(--malloy-font-family, Roboto)",titleFont:"var(--malloy-font-family, Roboto)",titleFontWeight:500,titleColor:"var(--malloy-title-color, #505050)",labelColor:"var(--malloy-label-color, #000000)",titleFontSize:12},legend:{labelFont:"var(--malloy-font-family, Roboto)",titleFont:"var(--malloy-font-family, Roboto)",titleFontWeight:500,titleColor:"var(--malloy-title-color, #505050)",labelColor:"var(--malloy-label-color, #000000)",titleFontSize:12},header:{labelFont:"var(--malloy-font-family, Roboto)",titleFont:"var(--malloy-font-family, Roboto)",titleFontWeight:500},mark:{font:"var(--malloy-Roboto"},title:{font:"var(--malloy-font-family, Roboto)",subtitleFont:"var(--malloy-font-family, Roboto)",fontWeight:500}}}}},AH=class t extends et{static{this.instance=new t}create(e,r,n,i,s,o){return new Kle(e,r,n,s,o)}get rendererName(){return"point_map"}};var Xle=class{constructor(e){this.document=e}async render(e){if(!e.isString())return Mi(this.document,"Invalid field for Image renderer");let{tag:r}=e.field.tagParse(),n=r.tag("image");if(!n)return Mi(this.document,"Missing tag for Image renderer");let i=e.isNull()?Xc(this.document):this.document.createElement("img"),s=n.text("width"),o=n.text("height");s&&(i.style.width=s),o&&(i.style.height=o);let a=i,u=n.tag("alt");if(u){let l=gve({tag:u,data:e})??u.text();l&&(a.alt=l)}return e.isNull()||(a.src=e.value),i}},SH=class t extends et{static{this.instance=new t}create(e,r,n,i,s){return new Xle(e)}get rendererName(){return"image"}};var Jle=class extends Rl{getDataValue(e){if(e.isNull()||e.isNumber()||e.isString())return e.value;throw new Error("Invalid field type for segment map.")}getDataType(e){if(e.isAtomicField()){if(e.isString())return"nominal";if(e.isNumber())return"quantitative"}throw new Error("Invalid field type for segment map.")}getVegaLiteSpec(e){if(e.isNull())throw new Error("Expected struct value not to be null.");let r=e.field.intrinsicFields,n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],u=a?this.getDataType(a):void 0,l=a!==void 0?{field:a.name,type:u,axis:{title:$n(this.options,a,void 0,this.timezone)},scale:cr(u,!1)}:void 0;return{...this.getSize(),data:{values:this.mapData(e)},projection:{type:"albersUsa"},layer:[{data:{values:pg,format:{type:"topojson",feature:"states"}},mark:{type:"geoshape",fill:"lightgray",stroke:"white"}},{mark:"line",encoding:{latitude:{field:n.name,type:"quantitative"},longitude:{field:i.name,type:"quantitative"},latitude2:{field:s.name,type:"quantitative"},longitude2:{field:o.name,type:"quantitative"},color:l}}],background:"transparent",config:{axis:{labelFont:"var(--malloy-font-family, Roboto)",titleFont:"var(--malloy-font-family, Roboto)",titleFontWeight:500,titleColor:"var(--malloy-title-color, #505050)",labelColor:"var(--malloy-label-color, #000000)",titleFontSize:12},legend:{labelFont:"var(--malloy-font-family, Roboto)",titleFont:"var(--malloy-font-family, Roboto)",titleFontWeight:500,titleColor:"var(--malloy-title-color, #505050)",labelColor:"var(--malloy-label-color, #000000)",titleFontSize:12},header:{labelFont:"var(--malloy-font-family, Roboto)",titleFont:"var(--malloy-font-family, Roboto)",titleFontWeight:500},mark:{font:"var(--malloy-font-family, Roboto)"},title:{font:"var(--malloy-font-family, Roboto)",subtitleFont:"var(--malloy-font-family, Roboto)",fontWeight:500}}}}},vH=class t extends et{static{this.instance=new t}create(e,r,n,i,s,o){return new Jle(e,r,n,s,o)}get rendererName(){return"segment_map"}};var hi={$schema:"https://vega.github.io/schema/vega-lite/v5.json",config:{params:[{name:"defaultFont",value:"var(--malloy-font-family, 'Roboto')"},{name:"titleColor",value:"var(--malloy-title-color, #505050)"},{name:"labelColor",value:"var(--malloy-label-color, #505050)"}],background:void 0,color:{expr:"titleColor"},header:{labelFont:{expr:"defaultFont"},titleFont:{expr:"defaultFont"},titleFontWeight:500},text:{font:{expr:"defaultFont"},color:{expr:"labelColor"}},mark:{font:{expr:"defaultFont"},color:{expr:"labelColor"}},title:{font:{expr:"defaultFont"},subtitleFont:{expr:"defaultFont"},fontWeight:500},axis:{labelColor:{expr:"labelColor"},labelFont:{expr:"defaultFont"},titleFont:{expr:"defaultFont"},titleFontWeight:500,titleColor:{expr:"titleColor"},titleFontSize:12},legend:{titleFontWeight:500,titleColor:{expr:"titleColor"},titleFontSize:12,labelColor:{expr:"labelColor"},labelFont:{expr:"defaultFont"},titleFont:{expr:"defaultFont"}}}},Zle={height:80,width:150},iIe={width:150},GDt={height:{step:13}},e0e={...iIe,...GDt},t0e={...iIe},r0e={height:150,width:200},rIe={},z0={config:hi.config,encoding:{y:{field:"#{1}",type:"nominal",axis:null,sort:null}},layer:[{mark:{type:"bar",color:"#aec7e8"},encoding:{x:{field:"#{2}",type:"quantitative",sort:null},color:{value:"#4285F4"}}},{mark:{type:"text",align:"left",x:5},encoding:{text:{field:"#{1}"}}}]},mD={...hi,mark:"bar",data:[],encoding:{x:{field:"#{1}",type:"nominal",sort:null},y:{field:"#{2}",type:"quantitative",sort:null},color:{value:"#4285F4"}}},QDt={...mD,encoding:{...mD.encoding,color:{field:"#{3}",type:"quantitative",scale:cr("quantitative",!0,!0)}}},VDt={...mD,encoding:{...mD.encoding,color:{field:"#{3}",scale:cr("nominal",!0,!0)}}},n0e={...z0,layer:[{...z0.layer[0],encoding:{...z0.layer[0].encoding,color:{field:"#{3}",scale:cr("nominal",!0,!0)}}},z0.layer[1]]},i0e={...z0,layer:[{...z0.layer[0],encoding:{...z0.layer[0].encoding,color:{field:"#{3}",type:"quantitative",scale:cr("quantitative",!0,!0)}}},z0.layer[1]]},c1={...hi,mark:"bar",data:[],encoding:{x:{field:"#{1}",type:"nominal",sort:null},y:{field:"#{2}",type:"quantitative",sort:null},color:{value:"#4285F4"}}},_H={...c1,encoding:{...c1.encoding,color:{field:"#{3}",type:"nominal",scale:cr("nominal",!0)}}},bH={...c1,encoding:{...c1.encoding,color:{field:"#{3}",type:"quantitative",scale:cr("quantitative",!0)}}},gbr={bar_SM:z0,bar_SM_small:{...z0,...e0e},bar_SM_medium:{...z0,...t0e},bar_SM_large:mD,bar_SMS:n0e,bar_SMS_small:{...n0e,...e0e},bar_SMS_medium:{...n0e,...t0e},bar_SMS_large:VDt,bar_SMM:i0e,bar_SMM_small:{...i0e,...e0e},bar_SMM_medium:{...i0e,...t0e},bar_SMM_large:QDt,bar_NM:c1,bar_NM_small:{...c1,...Zle},bar_NM_medium:{...c1,...r0e},bar_NM_large:{...c1},bar_NMS:_H,bar_NMS_small:{..._H,...Zle},bar_NMS_medium:{..._H,...r0e},bar_NMS_large:{..._H,...rIe},bar_NMM:bH,bar_NMM_small:{...bH,...Zle},bar_NMM_medium:{...bH,...r0e},bar_NMM_large:{...bH,...rIe},bar_SSMMM:{...hi,repeat:["#{3}","#{4}","#{5}"],spec:{description:"A simple bar chart with embedded data.",encoding:{y:{field:"#{1}",type:"nominal",axis:null,sort:null}},layer:[{mark:{type:"bar"},encoding:{x:{field:{repeat:"repeat"},type:"quantitative",sort:null},color:{field:"#{2}",scale:cr("nominal",!0,!0)}}},{mark:{type:"text",align:"left",x:5},encoding:{text:{field:"#{1}"},detail:{aggregate:"count"}}}]}},bubble_NNM:{...hi,data:[],mark:"circle",width:400,encoding:{y:{field:"#{1}",type:"ordinal",sort:null},x:{field:"#{2}",type:"ordinal",sort:null},size:{field:"#{3}",type:"quantitative"},color:{value:"#4285F4"}}},heat_NNM:{...hi,data:[],mark:"bar",width:400,encoding:{y:{field:"#{1}",type:"ordinal",sort:null},x:{field:"#{2}",type:"ordinal",sort:null},color:{field:"#{3}",type:"quantitative",scale:cr("quantitative",!1)}}},heat_SNM:{...hi,data:[],mark:"bar",width:400,encoding:{y:{field:"#{1}",type:"nominal",sort:null},x:{field:"#{2}",type:"ordinal",sort:null},color:{field:"#{3}",type:"quantitative",scale:cr("quantitative",!1)}}},stacked_line_STM:{...hi,height:50,data:[],mark:"area",encoding:{x:{field:"#{2}",type:"temporal",axis:{grid:!1},sort:null},y:{field:"#{3}",type:"quantitative",axis:{grid:!1},title:null,sort:null},color:{field:"#{1}",type:"nominal",legend:null,scale:cr("nominal",!1)},row:{field:"#{1}",type:"nominal"}}},grid_line_SSTM:{...hi,height:50,data:[],mark:"area",encoding:{x:{field:"#{3}",type:"temporal",axis:{grid:!1},sort:null},y:{field:"#{4}",type:"quantitative",axis:{grid:!1},title:null,sort:null},color:{field:"#{1}",type:"nominal",legend:null,scale:cr("nominal",!1)},row:{field:"#{1}",type:"nominal"},column:{field:"#{2}",type:"nominal"}}}};function nIe(t){return Array.isArray(t)||t!==null&&typeof t=="object"}var s0e=class extends Rl{constructor(e,r,n,i,s){super(e,r,n);let o=s.spec;if(o)this.spec=o;else if(s.spec_name){let a=n.dataStyles[s.spec_name];if(a!==void 0&&a.renderer==="vega")if(a.spec)this.spec=a.spec;else throw new Error(`No spec defined on ${s.spec_name}`);else throw new Error(`No Vega renderer named ${s.spec_name}`)}else throw new Error(`No top level vega spec defined for ${i.name}`)}getDataValue(e){if(e.isNull())return null;if(e.isTimestamp()||e.isDate()||e.isNumber()||e.isString())return e.value;throw new Error("Invalid field type for vega chart.")}getDataType(e){if(e.isAtomicField()){if(e.isDate()||e.isTimestamp()||e.isString())return"nominal";if(e.isNumber())return"quantitative"}throw new Error("Invalid field type for vega chart.")}translateField(e,r){let n=r.match(/#\{(\d+)\}/);return n&&n.groups?e.intrinsicFields[parseInt(n.groups[1])-1].name:r}translateFields(e,r){if(Array.isArray(e))for(let n of e)nIe(n)&&this.translateFields(n,r);else if(e&&typeof e=="object")for(let[n,i]of Object.entries(e))if(n==="field"&&typeof i=="string")e[n]=this.translateField(r,i);else if(n==="repeat"&&Array.isArray(i))for(let s of i.keys()){let o=i[s];typeof o=="string"&&(i[s]=this.translateField(r,o))}else nIe(i)&&this.translateFields(i,r)}getVegaLiteSpec(e){if(e.isNull()||!e.isArray())throw new Error("Expected struct value not to be null.");let r=structuredClone(this.spec);this.translateFields(r,e.field);let n={values:this.mapData(e)};return r.data=n,r}},TH=class t extends et{static{this.instance=new t}create(e,r,n,i,s){return new s0e(e,r,n,i,s)}get rendererName(){return"vega"}};var f1=class extends Rl{getVegaLiteSpec(e){let r=e.field.intrinsicFields,n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],u=this.getDataType(n),l=this.getDataType(i),c=s?this.getDataType(s):void 0,f=o?this.getDataType(o):void 0,x=a?this.getDataType(a):void 0,d=this.getMark(),h=s!==void 0?{field:s.name,type:c,axis:{title:$n(this.options,s,void 0,this.timezone)},scale:cr(c,d==="bar")}:{value:"#4285F4"},p=o?{field:o.name,type:f,axis:{title:$n(this.options,o,void 0,this.timezone)}}:void 0,m=a?{field:a.name,type:x,axis:{title:$n(this.options,a,void 0,this.timezone)}}:void 0,g=u==="nominal"?null:void 0,y=l==="nominal"?null:void 0,A={field:n.name,type:u,sort:g,axis:{title:$n(this.options,n,void 0,this.timezone)},scale:{zero:!1}},S={field:i.name,type:l,sort:y,axis:{title:$n(this.options,i,void 0,this.timezone)},scale:{zero:!1}};return{...hi,...this.getSize(),data:{values:this.mapData(e)},mark:d,encoding:{x:A,y:S,size:p,color:h,shape:m},background:"transparent"}}};var gD=class extends f1{getMark(){return"line"}getDataType(e){if(e.isAtomicField()){if(e.isDate()||e.isTimestamp())return"temporal";if(e.isString())return"nominal";if(e.isNumber())return"quantitative"}throw new Error("Invalid field type for line chart.")}getDataValue(e){if(e.isNull())return null;if(e.isTimestamp()||e.isDate()||e.isNumber()||e.isString())return e.value;throw new Error("Invalid field type for line chart.")}},CH=class t extends et{static{this.instance=new t}create(e,r,n,i,s,o){return new gD(e,r,n,s,o)}get rendererName(){return"line_chart"}};var yD=class extends gD{getSize(){return this.size==="large"?{height:100,width:250}:{height:50,width:125}}getVegaLiteSpec(e){let r=e.field.intrinsicFields,n=r[0],i=r[1],s=r[2],o=this.getDataType(n),a=this.getDataType(i),u=s?this.getDataType(s):void 0,l=s!==void 0?{field:s.name,type:u,axis:{title:null},scale:cr(u,!1)}:{value:"#4285F4"},c=o==="nominal"?null:void 0,f=a==="nominal"?null:void 0,x={field:n.name,type:o,sort:c,axis:{title:null,domain:!1,grid:!1,lables:!1,ticks:!1,values:[]},scale:{zero:!1}},d={field:i.name,type:a,sort:f,axis:{title:null,domain:!1,ticks:!1,grid:!1,lables:!1,values:[]},scale:{zero:!1}};return{...hi,...this.getSize(),data:{values:this.mapData(e)},config:{view:{stroke:"transparent"}},mark:{type:"line",tooltip:!0},encoding:{x,y:d,color:l},background:"transparent"}}},RH=class t extends et{static{this.instance=new t}create(e,r,n,i,s,o){return new yD(e,r,n,s,o)}get rendererName(){return"sparkline"}};var P3=class extends f1{getMark(){return"bar"}getDataType(e){if(e.isAtomicField()){if(e.isDate()||e.isTimestamp()||e.isString())return"nominal";if(e.isNumber())return"quantitative"}throw new Error("Invalid field type for bar chart.")}getDataValue(e){if(e.isNull())return null;if(e.isTimestamp()||e.isDate())return jp(e.value,e.field.timeframe,this.timezone);if(e.isNumber()||e.isString())return e.value;throw new Error("Invalid field type for bar chart.")}},OH=class t extends et{static{this.instance=new t}create(e,r,n,i,s,o){return new P3(e,r,n,s,o)}get rendererName(){return"bar_chart"}};var o0e=class extends P3{getSize(){return this.size==="large"?{height:250,width:100}:{height:125,width:50}}getVegaLiteSpec(e){let r=e.field.intrinsicFields,n=r[0],i=r[1],s=r[2],o=this.getDataType(n),a=this.getDataType(i),u=s?this.getDataType(s):void 0,l={type:this.getMark(),tooltip:!0},c=s!==void 0?{field:s.name,type:u,axis:{title:null},scale:cr(u,!0)}:{value:"#4285F4"},f=o==="nominal"?null:void 0,x=a==="nominal"?null:void 0,d={field:n.name,type:o,sort:f,axis:{title:null,domain:!1,grid:!1,ticks:!1,values:[]},scale:{zero:!1}},h={field:i.name,type:a,sort:x,axis:{title:null,domain:!1,ticks:!1,grid:!1,values:[]},scale:{zero:!1}};return{...hi,...this.getSize(),data:{values:this.mapData(e)},config:{view:{stroke:"transparent"}},mark:l,encoding:{y:d,x:h,color:c},background:"transparent"}}},DH=class t extends et{static{this.instance=new t}isValidMatch(e){return e.name.endsWith("_bar")}create(e,r,n,i,s,o){return new o0e(e,r,n,s,o)}get rendererName(){return"sparkline"}};var a0e=class extends yD{getVegaLiteSpec(e){let r=e.field.intrinsicFields,n=r[0],i=r[1],s=r[2],o=this.getDataType(n),a=this.getDataType(i),u=s?this.getDataType(s):void 0,l=s!==void 0?{field:s.name,type:u,axis:{title:null},scale:cr(u,!1)}:{value:"#4285F4"},c=o==="nominal"?null:void 0,f=a==="nominal"?null:void 0,x={field:n.name,type:o,sort:c,axis:{title:null,domain:!1,grid:!1,lables:!1,ticks:!1,values:[]},scale:{zero:!1}},d={field:i.name,type:a,sort:f,axis:{title:null,domain:!1,ticks:!1,grid:!1,lables:!1,values:[]},scale:{zero:!1}};return{...hi,...this.getSize(),data:{values:this.mapData(e)},config:{view:{stroke:"transparent"}},mark:{type:"area",line:{color:"#4285F4"},point:!1},encoding:{x,y:d,color:l},background:"transparent"}}},NH=class t extends et{static{this.instance=new t}isValidMatch(e){return e.name.endsWith("area")}create(e,r,n,i,s,o){return new a0e(e,r,n,s,o)}get rendererName(){return"sparkline"}};var u0e=class extends P3{getSize(){return this.size==="large"?{height:100,width:250}:{height:50,width:125}}getVegaLiteSpec(e){let r=e.field.intrinsicFields,n=r[0],i=r[1],s=r[2],o=this.getDataType(n),a=this.getDataType(i),u=s?this.getDataType(s):void 0,l={type:this.getMark(),tooltip:!0},c=s!==void 0?{field:s.name,type:u,axis:{title:null},scale:cr(u,!0)}:{value:"#4285F4"},f=o==="nominal"?null:void 0,x=a==="nominal"?null:void 0,d={field:n.name,type:o,sort:f,axis:{title:null,domain:!1,grid:!1,ticks:!1,values:[]},scale:{zero:!1}},h={field:i.name,type:a,sort:x,axis:{title:null,domain:!1,ticks:!1,grid:!1,values:[]},scale:{zero:!1}};return{...hi,...this.getSize(),data:{values:this.mapData(e)},config:{view:{stroke:"transparent"}},mark:l,encoding:{x:d,y:h,color:c},background:"transparent"}}},FH=class t extends et{static{this.instance=new t}isValidMatch(e){return e.name.endsWith("_column")}create(e,r,n,i,s,o){return new u0e(e,r,n,s,o)}get rendererName(){return"sparkline"}};var l0e=class extends f1{getMark(){return"point"}getDataType(e){if(e.isAtomicField()){if(e.isDate()||e.isTimestamp())return"temporal";if(e.isString())return"nominal";if(e.isNumber())return"quantitative"}throw new Error("Invalid field type for scatter chart.")}getDataValue(e){if(e.isNull())return null;if(e.isTimestamp()||e.isDate()||e.isNumber()||e.isString())return e.value;throw new Error("Invalid field type for scatter chart.")}},wH=class t extends et{static{this.instance=new t}create(e,r,n,i,s,o){return new l0e(e,r,n,s,o)}get rendererName(){return"scatter_chart"}};var k3=Na(Bp());var c0e=class{constructor(e,r){this.document=e;this.queryTimezone=r}async render(e){if(e.isNull())return Xc(this.document);if(!e.isDate()&&!e.isTimestamp())return Mi(this.document,"Invalid field for date renderer");let r=e.field.timeframe||(e.isTimestamp()?k3.TimestampTimeframe.Second:k3.DateTimeframe.Day),n=jp(e.value,r,this.queryTimezone),i=this.document.createElement("span");return i.appendChild(this.document.createTextNode(n)),i}},LH=class t extends et{static{this.instance=new t}activates(e){return e.hasParentExplore()&&e.isAtomicField()&&(e.type===k3.AtomicFieldType.Date||e.type===k3.AtomicFieldType.Timestamp)}create(e,r,n,i,s,o){return new c0e(e,o)}get rendererName(){return"time"}};var f0e=class extends cs{constructor(r,n){super(r);this.options=n}getText(r){if(r.isNull())return null;let n="$";switch(this.options.currency){case"euro":n="\u20AC";break;case"pound":n="\xA3";break;case"usd":break}let i=r.number.value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return`${n}${i}`}},IH=class t extends et{static{this.instance=new t}constructor(){super(),this.addExtractor((e,r)=>{e.currency=r?.text()??"usd"},this.rendererName)}create(e,r,n,i,s){return new f0e(e,s)}get rendererName(){return"currency"}};var x0e=class extends Hp{getText(e){if(e.isNull())return null;let r=e.number.value;return r===null?r:(r*100).toLocaleString("en",{maximumFractionDigits:2})+"%"}},MH=class t extends et{static{this.instance=new t}create(e,r,n,i,s){return new x0e(e,s)}get rendererName(){return"percent"}};var d0e=class extends cs{getText(e){return e.isNull()?null:e.bytes.value.toString("base64")}},PH=class t extends et{static{this.instance=new t}create(e,r,n,i,s){return new d0e(e)}get rendererName(){return"bytes"}};var sIe=Na(Bp());var h0e=class extends cs{getText(e){return e.isNull()?null:`${e.boolean.value}`}},kH=class t extends et{static{this.instance=new t}activates(e){return e.hasParentExplore()&&e.isAtomicField()&&e.type===sIe.AtomicFieldType.Boolean}create(e,r,n,i,s){return new h0e(e)}get rendererName(){return"boolean"}};var p0e=class{constructor(e){this.document=e}async render(e){if(e.isNull())return Xc(this.document);if(!e.isString())return Mi(this.document,"Invalid type for link renderer.");let r=this.document.createElement("a");return r.href=e.value,r.target="_blank",r.appendChild(this.document.createTextNode(e.value.replace(/\//g,"/\u200C"))),r}},BH=class t extends et{static{this.instance=new t}create(e,r,n,i,s){return new p0e(e)}get rendererName(){return"link"}};var m0e=class{constructor(e){this.document=e}getText(e){let r=e.value;if(typeof r=="string")return r;if(r===null)return null;if(typeof e.value=="object"){let n=e.value;if("value"in n&&typeof n.value=="string")return n.value}return JSON.stringify(e.value)}async render(e){let r=this.getText(e);if(r===null)return Xc(this.document);let n=this.document.createElement("span");return n.appendChild(this.document.createTextNode(r)),n}},qH=class t extends et{static{this.instance=new t}activates(e){return e.hasParentExplore()&&e.isAtomicField()&&e.isUnsupported()}create(e,r,n,i,s){return new m0e(e)}get rendererName(){}};var g0e=class t extends cs{constructor(r,n){super(r);this.options=n}static{this.kbMultiplier=1024}static{this.mbMultiplier=this.kbMultiplier*this.kbMultiplier}static{this.gbMultiplier=this.mbMultiplier*this.kbMultiplier}static{this.tbMultiplier=this.gbMultiplier*this.kbMultiplier}getText(r){if(r.isNull())return null;if(!r.isNumber())throw new Error(`Cannot format field ${r.field.name} as data volume since its not a number`);let n=r.number.value,i="Bytes";switch(this.options.data_volume_unit){case"bytes":break;case"kb":n=n/t.kbMultiplier,i="KB";break;case"mb":n=n/t.mbMultiplier,i="MB";break;case"gb":n=n/t.gbMultiplier,i="GB";break;case"tb":n=n/t.tbMultiplier,i="TB";break}return n===null?n:`${n.toLocaleString()} ${i}`}},UH=class t extends et{static{this.instance=new t}constructor(){super(),this.addExtractor((e,r)=>{e.data_volume_unit=r?.text()??"bytes"},this.rendererName)}create(e,r,n,i,s){return new g0e(e,s)}get rendererName(){return"data_volume"}};var y0e=class t extends cs{constructor(r,n){super(r);this.options=n}static{this.multiplierMap=new Map([["nanoseconds",1e3],["microseconds",1e3],["milliseconds",1e3],["seconds",60],["minutes",60],["hours",24],["days",Number.MAX_VALUE]])}getText(r){if(r.isNull())return null;if(!r.isNumber())throw new Error(`Cannot format field ${r.field.name} as a duration unit since its not a number`);let n=this.options.duration_unit??"seconds",i=r.number.value,s=0,o=[],a=!1;for(let[u,l]of t.multiplierMap)if(u===n&&(a=!0),!!a&&(s=i%l,i=Math.floor(i/=l),s>0&&(o=[this.formatTimeUnit(s,u),...o]),i===0))break;return o.length>0?o.slice(0,2).join(" "):this.formatTimeUnit(0,n)}formatTimeUnit(r,n){let i=n.toString();return r===1&&(i=i.substring(0,i.length-1)),`${r} ${i}`}},$H=class t extends et{static{this.instance=new t}constructor(){super(),this.addExtractor((e,r)=>{e.duration_unit=r?.text()??"seconds"},this.rendererName)}create(e,r,n,i,s){return new y0e(e,s)}get rendererName(){return"duration"}};var jH=class t{static{this.renderFactories=[EH.instance,AH.instance,SH.instance,vH.instance,XP.instance,CH.instance,FH.instance,DH.instance,NH.instance,RH.instance,wH.instance,OH.instance,TH.instance,LH.instance,IH.instance,MH.instance,UH.instance,PH.instance,BH.instance,$H.instance,kH.instance,nk.instance,qH.instance,ek.instance]}create(e,r,n,i,s,o,a){let u;for(let l of t.renderFactories)if((this.matchesRenderDef(e,l)||this.matchesTag(r,l))&&l.isValidMatch(o)||l.activates(o)){u=l;break}return u?.create(n,i,s,o,e||u.parseTagParameters(r)||{},a)}matchesRenderDef(e,r){return e&&r.rendererName&&e.renderer===r.rendererName}matchesTag(e,r){return r.rendererName&&e.has(r.rendererName)}};var HH=globalThis,zH=HH.ShadowRoot&&(HH.ShadyCSS===void 0||HH.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,E0e=Symbol(),oIe=new WeakMap,ED=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==E0e)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o,r=this.t;if(zH&&e===void 0){let n=r!==void 0&&r.length===1;n&&(e=oIe.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&oIe.set(r,e))}return e}toString(){return this.cssText}},aIe=t=>new ED(typeof t=="string"?t:t+"",void 0,E0e),AD=(t,...e)=>{let r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new ED(r,t,E0e)},A0e=(t,e)=>{if(zH)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(let r of e){let n=document.createElement("style"),i=HH.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)}},GH=zH?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(let n of e.cssRules)r+=n.cssText;return aIe(r)})(t):t;var{is:KDt,defineProperty:XDt,getOwnPropertyDescriptor:JDt,getOwnPropertyNames:ZDt,getOwnPropertySymbols:eNt,getPrototypeOf:tNt}=Object,QH=globalThis,uIe=QH.trustedTypes,rNt=uIe?uIe.emptyScript:"",nNt=QH.reactiveElementPolyfillSupport,SD=(t,e)=>t,vD={toAttribute(t,e){switch(e){case Boolean:t=t?rNt:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},VH=(t,e)=>!KDt(t,e),lIe={attribute:!0,type:String,converter:vD,reflect:!1,hasChanged:VH};Symbol.metadata??=Symbol("metadata"),QH.litPropertyMetadata??=new WeakMap;var Cd=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=lIe){if(r.state&&(r.attribute=!1),this._$Ei(),this.elementProperties.set(e,r),!r.noAccessor){let n=Symbol(),i=this.getPropertyDescriptor(e,n,r);i!==void 0&&XDt(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){let{get:i,set:s}=JDt(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get(){return i?.call(this)},set(o){let a=i?.call(this);s.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??lIe}static _$Ei(){if(this.hasOwnProperty(SD("elementProperties")))return;let e=tNt(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(SD("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(SD("properties"))){let r=this.properties,n=[...ZDt(r),...eNt(r)];for(let i of n)this.createProperty(i,r[i])}let e=this[Symbol.metadata];if(e!==null){let r=litPropertyMetadata.get(e);if(r!==void 0)for(let[n,i]of r)this.elementProperties.set(n,i)}this._$Eh=new Map;for(let[r,n]of this.elementProperties){let i=this._$Eu(r,n);i!==void 0&&this._$Eh.set(i,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){let r=[];if(Array.isArray(e)){let n=new Set(e.flat(1/0).reverse());for(let i of n)r.unshift(GH(i))}else e!==void 0&&r.push(GH(e));return r}static _$Eu(e,r){let n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$Eg=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$ES??=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$ES?.splice(this._$ES.indexOf(e)>>>0,1)}_$E_(){let e=new Map,r=this.constructor.elementProperties;for(let n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){let e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return A0e(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$ES?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$ES?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EO(e,r){let n=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,n);if(i!==void 0&&n.reflect===!0){let s=(n.converter?.toAttribute!==void 0?n.converter:vD).toAttribute(r,n.type);this._$Em=e,s==null?this.removeAttribute(i):this.setAttribute(i,s),this._$Em=null}}_$AK(e,r){let n=this.constructor,i=n._$Eh.get(e);if(i!==void 0&&this._$Em!==i){let s=n.getPropertyOptions(i),o=typeof s.converter=="function"?{fromAttribute:s.converter}:s.converter?.fromAttribute!==void 0?s.converter:vD;this._$Em=i,this[i]=o.fromAttribute(r,s.type),this._$Em=null}}requestUpdate(e,r,n,i=!1,s){if(e!==void 0){if(n??=this.constructor.getPropertyOptions(e),!(n.hasChanged??VH)(i?s:this[e],r))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$Eg=this._$EP())}C(e,r,n){this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$Em!==e&&(this._$Ej??=new Set).add(e)}async _$EP(){this.isUpdatePending=!0;try{await this._$Eg}catch(r){Promise.reject(r)}let e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this._$Ep){for(let[i,s]of this._$Ep)this[i]=s;this._$Ep=void 0}let n=this.constructor.elementProperties;if(n.size>0)for(let[i,s]of n)s.wrapped!==!0||this._$AL.has(i)||this[i]===void 0||this.C(i,this[i],s)}let e=!1,r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),this._$ES?.forEach(n=>n.hostUpdate?.()),this.update(r)):this._$ET()}catch(n){throw e=!1,this._$ET(),n}e&&this._$AE(r)}willUpdate(e){}_$AE(e){this._$ES?.forEach(r=>r.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$ET(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Eg}shouldUpdate(e){return!0}update(e){this._$Ej&&=this._$Ej.forEach(r=>this._$EO(r,this[r])),this._$ET()}updated(e){}firstUpdated(e){}};Cd.elementStyles=[],Cd.shadowRootOptions={mode:"open"},Cd[SD("elementProperties")]=new Map,Cd[SD("finalized")]=new Map,nNt?.({ReactiveElement:Cd}),(QH.reactiveElementVersions??=[]).push("2.0.1");var R0e=globalThis,WH=R0e.trustedTypes,cIe=WH?WH.createPolicy("lit-html",{createHTML:t=>t}):void 0,mIe="$lit$",x1=`lit$${(Math.random()+"").slice(9)}$`,gIe="?"+x1,iNt=`<${gIe}>`,U3=document,bD=()=>U3.createComment(""),TD=t=>t===null||typeof t!="object"&&typeof t!="function",yIe=Array.isArray,sNt=t=>yIe(t)||typeof t?.[Symbol.iterator]=="function",S0e=`[ 	
\f\r]`,_D=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,fIe=/-->/g,xIe=/>/g,B3=RegExp(`>|${S0e}(?:([^\\s"'>=/]+)(${S0e}*=${S0e}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),dIe=/'/g,hIe=/"/g,EIe=/^(?:script|style|textarea|title)$/i,AIe=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),G0=AIe(1),ECr=AIe(2),Rd=Symbol.for("lit-noChange"),wn=Symbol.for("lit-nothing"),pIe=new WeakMap,q3=U3.createTreeWalker(U3,129);function SIe(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return cIe!==void 0?cIe.createHTML(e):e}var oNt=(t,e)=>{let r=t.length-1,n=[],i,s=e===2?"<svg>":"",o=_D;for(let a=0;a<r;a++){let u=t[a],l,c,f=-1,x=0;for(;x<u.length&&(o.lastIndex=x,c=o.exec(u),c!==null);)x=o.lastIndex,o===_D?c[1]==="!--"?o=fIe:c[1]!==void 0?o=xIe:c[2]!==void 0?(EIe.test(c[2])&&(i=RegExp("</"+c[2],"g")),o=B3):c[3]!==void 0&&(o=B3):o===B3?c[0]===">"?(o=i??_D,f=-1):c[1]===void 0?f=-2:(f=o.lastIndex-c[2].length,l=c[1],o=c[3]===void 0?B3:c[3]==='"'?hIe:dIe):o===hIe||o===dIe?o=B3:o===fIe||o===xIe?o=_D:(o=B3,i=void 0);let d=o===B3&&t[a+1].startsWith("/>")?" ":"";s+=o===_D?u+iNt:f>=0?(n.push(l),u.slice(0,f)+mIe+u.slice(f)+x1+d):u+x1+(f===-2?a:d)}return[SIe(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),n]},CD=class t{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0,a=e.length-1,u=this.parts,[l,c]=oNt(e,r);if(this.el=t.createElement(l,n),q3.currentNode=this.el.content,r===2){let f=this.el.content.firstChild;f.replaceWith(...f.childNodes)}for(;(i=q3.nextNode())!==null&&u.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(let f of i.getAttributeNames())if(f.endsWith(mIe)){let x=c[o++],d=i.getAttribute(f).split(x1),h=/([.?@])?(.*)/.exec(x);u.push({type:1,index:s,name:h[2],strings:d,ctor:h[1]==="."?_0e:h[1]==="?"?b0e:h[1]==="@"?T0e:R_}),i.removeAttribute(f)}else f.startsWith(x1)&&(u.push({type:6,index:s}),i.removeAttribute(f));if(EIe.test(i.tagName)){let f=i.textContent.split(x1),x=f.length-1;if(x>0){i.textContent=WH?WH.emptyScript:"";for(let d=0;d<x;d++)i.append(f[d],bD()),q3.nextNode(),u.push({type:2,index:++s});i.append(f[x],bD())}}}else if(i.nodeType===8)if(i.data===gIe)u.push({type:2,index:s});else{let f=-1;for(;(f=i.data.indexOf(x1,f+1))!==-1;)u.push({type:7,index:s}),f+=x1.length-1}s++}}static createElement(e,r){let n=U3.createElement("template");return n.innerHTML=e,n}};function C_(t,e,r=t,n){if(e===Rd)return e;let i=n!==void 0?r._$Co?.[n]:r._$Cl,s=TD(e)?void 0:e._$litDirective$;return i?.constructor!==s&&(i?._$AO?.(!1),s===void 0?i=void 0:(i=new s(t),i._$AT(t,r,n)),n!==void 0?(r._$Co??=[])[n]=i:r._$Cl=i),i!==void 0&&(e=C_(t,i._$AS(t,e.values),i,n)),e}var v0e=class{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){let{el:{content:r},parts:n}=this._$AD,i=(e?.creationScope??U3).importNode(r,!0);q3.currentNode=i;let s=q3.nextNode(),o=0,a=0,u=n[0];for(;u!==void 0;){if(o===u.index){let l;u.type===2?l=new RD(s,s.nextSibling,this,e):u.type===1?l=new u.ctor(s,u.name,u.strings,this,e):u.type===6&&(l=new C0e(s,this,e)),this._$AV.push(l),u=n[++a]}o!==u?.index&&(s=q3.nextNode(),o++)}return q3.currentNode=U3,i}p(e){let r=0;for(let n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}},RD=class t{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,r,n,i){this.type=2,this._$AH=wn,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode,r=this._$AM;return r!==void 0&&e?.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=C_(this,e,r),TD(e)?e===wn||e==null||e===""?(this._$AH!==wn&&this._$AR(),this._$AH=wn):e!==this._$AH&&e!==Rd&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):sNt(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==wn&&TD(this._$AH)?this._$AA.nextSibling.data=e:this.$(U3.createTextNode(e)),this._$AH=e}g(e){let{values:r,_$litType$:n}=e,i=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=CD.createElement(SIe(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===i)this._$AH.p(r);else{let s=new v0e(i,this),o=s.u(this.options);s.p(r),this.$(o),this._$AH=s}}_$AC(e){let r=pIe.get(e.strings);return r===void 0&&pIe.set(e.strings,r=new CD(e)),r}T(e){yIe(this._$AH)||(this._$AH=[],this._$AR());let r=this._$AH,n,i=0;for(let s of e)i===r.length?r.push(n=new t(this.k(bD()),this.k(bD()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){for(this._$AP?.(!1,!0,r);e&&e!==this._$AB;){let n=e.nextSibling;e.remove(),e=n}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},R_=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,i,s){this.type=1,this._$AH=wn,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=wn}_$AI(e,r=this,n,i){let s=this.strings,o=!1;if(s===void 0)e=C_(this,e,r,0),o=!TD(e)||e!==this._$AH&&e!==Rd,o&&(this._$AH=e);else{let a=e,u,l;for(e=s[0],u=0;u<s.length-1;u++)l=C_(this,a[n+u],r,u),l===Rd&&(l=this._$AH[u]),o||=!TD(l)||l!==this._$AH[u],l===wn?e=wn:e!==wn&&(e+=(l??"")+s[u+1]),this._$AH[u]=l}o&&!i&&this.O(e)}O(e){e===wn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},_0e=class extends R_{constructor(){super(...arguments),this.type=3}O(e){this.element[this.name]=e===wn?void 0:e}},b0e=class extends R_{constructor(){super(...arguments),this.type=4}O(e){this.element.toggleAttribute(this.name,!!e&&e!==wn)}},T0e=class extends R_{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){if((e=C_(this,e,r,0)??wn)===Rd)return;let n=this._$AH,i=e===wn&&n!==wn||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,s=e!==wn&&(n===wn||i);i&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},C0e=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){C_(this,e)}};var aNt=R0e.litHtmlPolyfillSupport;aNt?.(CD,RD),(R0e.litHtmlVersions??=[]).push("3.0.2");var vIe=(t,e,r)=>{let n=r?.renderBefore??e,i=n._$litPart$;if(i===void 0){let s=r?.renderBefore??null;n._$litPart$=i=new RD(e.insertBefore(bD(),s),s,void 0,r??{})}return i._$AI(t),i};var qf=class extends Cd{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){let r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=vIe(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Rd}};qf._$litElement$=!0,qf.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:qf});var uNt=globalThis.litElementPolyfillSupport;uNt?.({LitElement:qf});(globalThis.litElementVersions??=[]).push("4.0.1");var YH=t=>(e,r)=>{r!==void 0?r.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)};var lNt={attribute:!0,type:String,converter:vD,reflect:!1,hasChanged:VH},cNt=(t=lNt,e,r)=>{let{kind:n,metadata:i}=r,s=globalThis.litPropertyMetadata.get(i);if(s===void 0&&globalThis.litPropertyMetadata.set(i,s=new Map),s.set(r.name,t),n==="accessor"){let{name:o}=r;return{set(a){let u=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,u,t)},init(a){return a!==void 0&&this.C(o,void 0,t),a}}}if(n==="setter"){let{name:o}=r;return function(a){let u=this[o];e.call(this,a),this.requestUpdate(o,u,t)}}throw Error("Unsupported decorator location: "+n)};function Uf(t){return(e,r)=>typeof r=="object"?cNt(t,e,r):((n,i,s)=>{let o=i.hasOwnProperty(s);return i.constructor.createProperty(s,o?{...n,wrapped:!0}:n),o?Object.getOwnPropertyDescriptor(i,s):void 0})(t,e,r)}function _Ie(t){return Uf({...t,state:!0,attribute:!1})}function bIe(t){return(e,r)=>{let n=typeof e=="function"?e:e[r];Object.assign(n,t)}}var TIe={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},CIe=t=>(...e)=>({_$litDirective$:t,values:e}),XH=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,n){this._$Ct=e,this._$AM=r,this._$Ci=n}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}};var O_=CIe(class extends XH{constructor(t){if(super(t),t.type!==TIe.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.st=new Set(t.strings.join(" ").split(/\s/).filter(n=>n!=="")));for(let n in e)e[n]&&!this.st?.has(n)&&this.it.add(n);return this.render(e)}let r=t.element.classList;for(let n of this.it)n in e||(r.remove(n),this.it.delete(n));for(let n in e){let i=!!e[n];i===this.it.has(n)||this.st?.has(n)||(i?(r.add(n),this.it.add(n)):(r.remove(n),this.it.delete(n)))}return Rd}});var d1=class extends Event{constructor(e,r,n){super("context-request",{bubbles:!0,composed:!0}),this.context=e,this.callback=r,this.subscribe=n??!1}};var D_=class{constructor(e,r,n,i){if(this.subscribe=!1,this.provided=!1,this.value=void 0,this.t=(s,o)=>{this.unsubscribe&&(this.unsubscribe!==o&&(this.provided=!1,this.unsubscribe()),this.subscribe||this.unsubscribe()),this.value=s,this.host.requestUpdate(),this.provided&&!this.subscribe||(this.provided=!0,this.callback&&this.callback(s,o)),this.unsubscribe=o},this.host=e,r.context!==void 0){let s=r;this.context=s.context,this.callback=s.callback,this.subscribe=s.subscribe??!1}else this.context=r,this.callback=n,this.subscribe=i??!1;this.host.addController(this)}hostConnected(){this.dispatchRequest()}hostDisconnected(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)}dispatchRequest(){this.host.dispatchEvent(new d1(this.context,this.t,this.subscribe))}};var JH=class{get value(){return this.o}set value(e){this.setValue(e)}setValue(e,r=!1){let n=r||!Object.is(e,this.o);this.o=e,n&&this.updateObservers()}constructor(e){this.subscriptions=new Map,this.updateObservers=()=>{for(let[r,{disposer:n}]of this.subscriptions)r(this.o,n)},e!==void 0&&(this.value=e)}addCallback(e,r,n){if(!n)return void e(this.value);this.subscriptions.has(e)||this.subscriptions.set(e,{disposer:()=>{this.subscriptions.delete(e)},consumerHost:r});let{disposer:i}=this.subscriptions.get(e);e(this.value,i)}clearCallbacks(){this.subscriptions.clear()}};var O0e=class extends Event{constructor(e){super("context-provider",{bubbles:!0,composed:!0}),this.context=e}},N_=class extends JH{constructor(e,r,n){super(r.context!==void 0?r.initialValue:n),this.onContextRequest=i=>{let s=i.composedPath()[0];i.context===this.context&&s!==this.host&&(i.stopPropagation(),this.addCallback(i.callback,s,i.subscribe))},this.onProviderRequest=i=>{let s=i.composedPath()[0];if(i.context!==this.context||s===this.host)return;let o=new Set;for(let[a,{consumerHost:u}]of this.subscriptions)o.has(a)||(o.add(a),u.dispatchEvent(new d1(this.context,a,!0)));i.stopPropagation()},this.host=e,r.context!==void 0?this.context=r.context:this.context=r,this.attachListeners(),this.host.addController?.(this)}attachListeners(){this.host.addEventListener("context-request",this.onContextRequest),this.host.addEventListener("context-provider",this.onProviderRequest)}hostConnected(){this.host.dispatchEvent(new O0e(this.context))}};function OD({context:t}){return(e,r)=>{let n=new WeakMap;if(typeof r=="object")return r.addInitializer(function(){n.set(this,new N_(this,{context:t}))}),{get(){return e.get.call(this)},set(i){return n.get(this)?.setValue(i),e.set.call(this,i)},init(i){return n.get(this)?.setValue(i),i}};{e.constructor.addInitializer(o=>{n.set(o,new N_(o,{context:t}))});let i=Object.getOwnPropertyDescriptor(e,r),s;if(i===void 0){let o=new WeakMap;s={get:function(){return o.get(this)},set:function(a){n.get(this).setValue(a),o.set(this,a)},configurable:!0,enumerable:!0}}else{let o=i.set;s={...i,set:function(a){n.get(this).setValue(a),o?.call(this,a)}}}return void Object.defineProperty(e,r,s)}}}function ZH({context:t,subscribe:e}){return(r,n)=>{typeof n=="object"?n.addInitializer(function(){new D_(this,{context:t,callback:i=>{this[n.name]=i},subscribe:e})}):r.constructor.addInitializer(i=>{new D_(i,{context:t,callback:s=>{i[n]=s},subscribe:e})})}}function OIe(t){return t.parentExplore?.allFields.findIndex(r=>r.name===t.name)??-1}function ez(t){return t.parentExplore?OIe(t)===t.parentExplore.allFields.length-1:!0}function tz(t){return OIe(t)===0}function rz(t,e){return t.isAtomicField()&&t.isNumber()&&e!==null}function DIe(t,e){return t.isAtomicField()&&t.isString()&&e!==null}function nz(t,e,r){let i=(r??document.createElement("canvas")).getContext("2d");return i.font=e,i.measureText(t).width}function NIe(t,e,r){return Math.max(t,Math.min(e,r))}var iz=Na(Ree()),fNt=new Map([["nanoseconds",1e3],["microseconds",1e3],["milliseconds",1e3],["seconds",60],["minutes",60],["hours",24],["days",Number.MAX_VALUE]]);function FIe(t,e){let r=e.toString();return t===1&&(r=r.substring(0,r.length-1)),`${t} ${r}`}function D0e(t,e){let r=e,{tag:n}=t.tagParse();if(n.has("currency")){let i="$";switch(n.text("currency")){case"euro":i="\u20AC";break;case"pound":i="\xA3";break;case"usd":break}r=(0,iz.format)(`${i}#,##0.00`,e)}else if(n.has("percent"))r=(0,iz.format)("#,##0.00%",e);else if(n.has("duration")){let s=n.text("duration")??"seconds",o=e,a=0,u=[],l=!1;for(let[c,f]of fNt)if(c===s&&(l=!0),!!l&&(a=o%f,o=Math.floor(o/=f),a>0&&(u=[FIe(a,c),...u]),o===0))break;u.length>0?r=u.slice(0,2).join(" "):r=FIe(0,s)}else n.has("number")?r=(0,iz.format)(n.text("number"),e):r=e.toLocaleString();return r}var sz="malloy-render-result";var xNt=32,dNt=384,wIe=12,LIe="table",_u=class extends qf{constructor(){super(...arguments);this.rowLimit=1/0;this.pinnedHeader=!1;this._scrolling=!1;this.measuringCanvas=document.createElement("canvas")}connectedCallback(){super.connectedCallback(),typeof this.parentCtx>"u"?this.ctx={root:!0,widthCache:new Map}:this.ctx={root:!1,widthCache:this.parentCtx.widthCache}}_handleScroll(r){let n=r.target;this._scrolling=n.scrollTop>0}createRenderRoot(){return this.pinnedHeader?this:super.createRenderRoot()}renderHeader(r){let n=tz(r),i=tz(r.parentExplore),s=!r.parentExplore.isExploreField(),o=n&&(i||s),a=ez(r),u=ez(r.parentExplore),l=a&&(u||s);return G0`<th
      class="column-cell ${O_({numeric:r.isAtomicField()&&r.isNumber()})}"
    >
      ${this.renderCell(r,r.name,{hideStartGutter:o,hideEndGutter:l})}
    </th>`}renderField(r,n){return G0`<td
      class="column-cell ${O_({numeric:n.isAtomicField()&&n.isNumber()})}"
    >
      ${this.renderFieldContent(r,n)}
    </td>`}getCellFontStyling(){let r=getComputedStyle(this),n=r.getPropertyValue("--malloy-render--font-family").trim(),i=r.getPropertyValue("--malloy-render--table-font-size").trim();return{fontFamily:n,fontSize:i}}getColumnWidth(r){let n=JSON.stringify(r.fieldPath),i=this.metadata.fields[n],s=this.ctx.widthCache.get(r);if(typeof s>"u"){let o=this.getCellFontStyling(),a=`${o.fontSize} ${o.fontFamily}`,u=nz(r.name,a,this.measuringCanvas);if(r.isAtomicField()&&r.isString())s=Math.max(nz(i.maxString,a,this.measuringCanvas),u)+wIe;else if(r.isAtomicField()&&r.isNumber()){let l=D0e(r,i.max);s=Math.max(nz(l,a,this.measuringCanvas),u)+wIe}else s=130;s=NIe(xNt,dNt,s),this.ctx.widthCache.set(r,s)}return s}getContentStyle(r){if(r.isAtomicField()){let n=this.getColumnWidth(r);return`width: ${n}px; min-width: ${n}px; max-width: ${n}px;`}return""}renderCell(r,n,i){return G0`<div class="cell-wrapper">
      <div
        class=${O_({"cell-gutter":!0,"hide-gutter-border":i.hideStartGutter})}
      ></div>
      <div
        class="cell-content"
        style="${this.getContentStyle(r)}"
        title="${n}"
      >
        ${n}
      </div>
      <div
        class=${O_({"cell-gutter":!0,"hide-gutter-border":i.hideEndGutter})}
      ></div>
    </div>`}renderFieldContent(r,n){if(n.isExploreField())return G0`<malloy-table
        .data=${r.cell(n)}
        .pinnedHeader=${this.pinnedHeader??!1}
        .rowLimit=${this.pinnedHeader?1:1/0}
      ></malloy-table>`;let i=r.cell(n).value;return this.pinnedHeader?i="":rz(n,i)?i=D0e(n,i):i===null&&(i="\u2205"),this.renderCell(n,i,{hideStartGutter:tz(n),hideEndGutter:ez(n)})}render(){let r=this.data.field.allFields,n=r.map(a=>this.renderHeader(a)),i=[],s=0;for(let a of this.data){if(s>=this.rowLimit)break;i.push(G0`<tr>
          ${r.map(u=>this.renderField(a,u))}
        </tr>`),s++}let o=()=>this.ctx.root?G0`<div class="sticky-header">
          <div class="sticky-header-content">
            <malloy-table
              class=${O_({"pinned-header":!0,scrolled:this._scrolling})}
              .rowLimit=${1}
              .data=${this.data}
              .pinnedHeader=${!0}
            ></malloy-table>
          </div>
        </div>`:wn;return G0`<div
      @scroll=${this._handleScroll}
      class="table-wrapper"
      part=${this.ctx.root?"table-container":wn}
    >
      ${o()}
      <table>
        <thead>
          <tr>
            ${n}
          </tr>
        </thead>
        <tbody>
          ${i}
        </tbody>
      </table>
    </div>`}};_u.styles=AD`
    .table-wrapper {
      width: 100%;
      height: 100%;
      position: relative;
      overflow: auto;
    }

    .sticky-header {
      position: sticky;
      top: 0px;
      z-index: 100;
    }

    .sticky-header-content {
      position: absolute;
      top: 0px;
      left: 0px;
      pointer-events: none;
    }

    .sticky-header-content th {
      pointer-events: all;
    }

    table {
      border-collapse: collapse;
      background: var(--malloy-render--table-background);
    }

    th {
      transition: background-color 0.25s;
    }

    table * {
      box-sizing: border-box;
    }

    .column-cell {
      height: var(--malloy-render--table-row-height);
      overflow: hidden;
      white-space: nowrap;
      text-align: left;
      padding: 0px;
      vertical-align: top;
      position: relative;
    }

    td.column-cell {
      font-weight: var(--malloy-render--table-body-weight);
      color: var(--malloy-render--table-body-color);
    }

    th.column-cell {
      font-weight: var(--malloy-render--table-header-weight);
      color: var(--malloy-render--table-header-color);
    }

    .column-cell.numeric {
      text-align: right;
      font-variant-numeric: tabular-nums;
    }

    .cell-wrapper {
      height: var(--malloy-render--table-row-height);
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .cell-content {
      border-top: var(--malloy-render--table-border);
      height: var(--malloy-render--table-row-height);
      line-height: var(--malloy-render--table-row-height);
      flex: 1;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .cell-gutter {
      border-top: var(--malloy-render--table-border);
      height: var(--malloy-render--table-row-height);
      width: var(--malloy-render--table-gutter-size);
      transition: border-color 0.25s;
    }

    .cell-gutter.hide-gutter-border {
      border-color: transparent;
    }

    .pinned-header table {
      background: transparent;
    }

    .pinned-header th {
      background: var(--malloy-render--table-background);
    }

    .pinned-header.scrolled th {
      background: var(--malloy-render--table-pinned-background);
      box-shadow: 0 0 0.5em rgba(0, 0, 0, 0.5);
    }

    .pinned-header.scrolled {
      .cell-content,
      .cell-gutter,
      .cell-gutter.hide-gutter-border {
        border-top: var(--malloy-render--table-pinned-border);
      }
    }
  `,Uo([Uf({attribute:!1})],_u.prototype,"data",2),Uo([Uf({type:Number})],_u.prototype,"rowLimit",2),Uo([Uf({type:Boolean})],_u.prototype,"pinnedHeader",2),Uo([_Ie()],_u.prototype,"_scrolling",2),Uo([ZH({context:LIe}),Uf({attribute:!1})],_u.prototype,"parentCtx",2),Uo([OD({context:LIe})],_u.prototype,"ctx",2),Uo([ZH({context:sz}),Uf({attribute:!1})],_u.prototype,"metadata",2),Uo([bIe({passive:!0})],_u.prototype,"_handleScroll",1),_u=Uo([YH("malloy-table")],_u);function IIe(t){let e=new WeakMap,r=o=>{if(e.has(o))return e.get(o);let a=JSON.stringify(o.fieldPath);return e.set(o,a),a},n={fields:{}};function i(o){for(let a of o.allFields)if(a.isAtomicField()){let u=r(a);n.fields[u]={field:a,min:null,max:null,minString:null,maxString:null}}else a.isExploreField()&&i(a)}let s=(o,a)=>{for(let u of o)for(let l of o.field.allFields){let c=l.isAtomicField()?u.cell(l).value:void 0,f=r(l),x=a.fields[f];if(rz(l,c)){let d=c;x.min=Math.min(x.min??d,d),x.max=Math.max(x.max??d,d)}else if(DIe(l,c)){let d=c;(!x.minString||x.minString.length>d.length)&&(x.minString=d),(!x.maxString||x.maxString.length<d.length)&&(x.maxString=d)}else if(l.isExploreField()){let d=u.cell(l);s(d,a)}}};return i(t.data.field),s(t.data,n),n}function Ol(t,...e){let r;for(let n of e)if(r=n?.text(t),typeof r<"u")break;return r??`var(--malloy-theme--${t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()})`}var $3=class extends qf{willUpdate(e){e.has("result")&&(this.metadata=IIe(this.result))}render(){let e=this.result.modelTag,{tag:r}=this.result.tagParse(),n=e.tag("theme"),i=r.tag("theme"),s=Ol("tableRowHeight",i,n),o=Ol("tableBodyColor",i,n),a=Ol("tableFontSize",i,n),u=Ol("tableHeaderColor",i,n),l=Ol("tableHeaderWeight",i,n),c=Ol("tableBodyWeight",i,n),f=Ol("tableBorder",i,n),x=Ol("tableBackground",i,n),d=Ol("tableGutterSize",i,n),h=Ol("tablePinnedBackground",i,n),p=Ol("tablePinnedBorder",i,n),m=Ol("fontFamily",i,n),g=G0`<style>
      :host {
        --malloy-render--table-row-height: ${s};
        --malloy-render--table-body-color: ${o};
        --malloy-render--table-font-size: ${a};
        --malloy-render--font-family: ${m};
        --malloy-render--table-header-color: ${u};
        --malloy-render--table-header-weight: ${l};
        --malloy-render--table-body-weight: ${c};
        --malloy-render--table-border: ${f};
        --malloy-render--table-background: ${x};
        --malloy-render--table-gutter-size: ${d};
        --malloy-render--table-pinned-background: ${h};
        --malloy-render--table-pinned-border: ${p};
      }
    </style>`;return G0`${g}<malloy-table
        exportparts="table-container: container"
        .data=${this.result.data}
      ></malloy-table>`}};$3.styles=AD`
    :host {
      --malloy-theme--table-row-height: 28px;
      --malloy-theme--table-font-size: 12px;
      --malloy-theme--table-header-color: #5d626b;
      --malloy-theme--table-header-weight: bold;
      --malloy-theme--table-body-color: #727883;
      --malloy-theme--table-body-weight: 400;
      --malloy-theme--table-border: 1px solid #e5e7eb;
      --malloy-theme--table-background: white;
      --malloy-theme--table-gutter-size: 15px;
      --malloy-theme--table-pinned-background: #f5fafc;
      --malloy-theme--table-pinned-border: 1px solid #daedf3;
      --malloy-theme--font-family: Inter, system-ui, sans-serif;

      font-family: var(--malloy-render--font-family);
      font-size: var(--malloy-render--table-font-size);
    }

    @supports (font-variation-settings: normal) {
      :host {
        font-family:
          InterVariable,
          Inter,
          system-ui sans-serif;

        font-feature-settings:
          'liga' 1,
          'calt' 1;
      }
    }
  `,Uo([Uf({attribute:!1})],$3.prototype,"result",2),Uo([OD({context:sz})],$3.prototype,"metadata",2),$3=Uo([YH("malloy-render")],$3);var uz=class{constructor(e){this.document=e}async render(e,r){if(e.modelTag.has("renderer_next")){let o=this.document.createElement("malloy-render");return o.result=e,o}let i=e.data,s=PIe(i.field,this.document,r,{size:"large"},i.field.structDef.queryTimezone,e.tagParse().tag);try{return await s.render(i)}catch(o){return o instanceof Error?Mi(this.document,o):Mi(this.document,"Internal error - Exception not an Error object.")}}};var MIe={shape_map:"shape_map",point_map:"point_map",bar_chart:"bar_chart",image:"image",json:"json",segment_map:"segment_map",dashboard:"dashboard",line_chart:"line_chart",scatter_chart:"scatter_chart",url:"url",list:"list",list_detail:"list_detail",sparkline:"sparkline",sparkline_area:"sparkline",sparkline_column:"sparkline",sparkline_bar:"sparkline"};function hNt(t,e){let r=e[t.name];if(!r)for(let i of t.sourceClasses)r||(r=e[i]);let{name:n}=t;for(let i in MIe)if(n.endsWith(`_${i}`)){let s=n.slice(0,n.length-i.length-1);return pNt(i,s,MIe,r)}return r}function pNt(t,e,r,n){return n?(n.renderer??=r[t],n.data??={},n.data.label??=e):n={renderer:r[t],data:{label:e}},n}function oz(t){if(t.isExplore())return t;throw new Error(`${t.name} does not contain fields and cannot be rendered this way`)}function PIe(t,e,r,n,i,s){let o=hNt(t,r.dataStyles);r.dataStyles[t.name]=o;let a=new jH().create(o,s,e,n,r,t,i);if(a)return a;if(o?.renderer==="dashboard"||s.has("dashboard"))return az(tk,e,oz(t),r,s);if(o?.renderer==="list"||s.has("list"))return az(ZS,e,oz(t),r,s);if(o?.renderer==="list_detail"||s.has("list_detail"))return az(rk,e,oz(t),r,s);if(o?.renderer==="table"||s.has("table")||!t.hasParentExplore()||t.isExploreField())return az(GC,e,oz(t),r,s);throw new Error(`Could not find a proper renderer for field ${t.name}`)}function az(t,e,r,n,i){let s=Jc.make(t,e,r,n,i),o={};return r.intrinsicFields.forEach(a=>{o[a.name]=PIe(a,e,n,s.defaultStylesForChildren,r.queryTimezone,a.tagParse().tag)}),s.childRenderers=o,s}function BIe(t){console.log("struct is",t);let e=JSON.parse(t);console.log("modeldef is ",e.contents)}async function qIe(t,e,r){console.log("Rendering Malloy results");let n=JSON.parse(t),i=JSON.parse(r),s={queryResult:{...i._rawQuery,result:n,totalRows:e},modelDef:i._modelDef},o=kIe.Result.fromJSON(s);return await new uz(document).render(o,{dataStyles:{},isDrillingEnabled:!1})}window.getModelDef=t=>{BIe(t)};window.renderMalloyResults=(t,e,r)=>qIe(t,e,r);})();
/*! Bundled license information:

antlr4ts/ANTLRErrorListener.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/ANTLRErrorStrategy.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

assert/build/internal/util/comparisons.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)

antlr4ts/Decorators.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/IntStream.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/ANTLRInputStream.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/ATNState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/ATNStateType.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/RecognitionException.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/Transition.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/AbstractPredicateTransition.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/MurmurHash.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/ObjectEqualityComparator.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/DefaultEqualityComparator.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/Array2DHashSet.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/ArrayEqualityComparator.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/Utils.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/SemanticContext.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/PredicateTransition.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/FailedPredicateException.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/InputMismatchException.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/Arrays.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/IntegerList.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/Interval.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/Token.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/CommonToken.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/CommonTokenFactory.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/IntegerStack.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/dfa/AcceptStateInfo.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/Array2DHashMap.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/DecisionState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/PredictionContextCache.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/PredictionContext.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/ATNConfig.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/BitSet.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/ATNConfigSet.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/dfa/DFAState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/ATNSimulator.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/ConsoleErrorListener.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/ProxyErrorListener.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/Recognizer.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/VocabularyImpl.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/dfa/DFASerializer.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/dfa/LexerDFASerializer.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/StarLoopEntryState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/dfa/DFA.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/BasicState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/InvalidState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/SetTransition.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/NotSetTransition.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/RuleStopState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/RuleTransition.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/WildcardTransition.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/LL1Analyzer.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/ATN.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/LexerIndexedCustomAction.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/LexerActionExecutor.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/LexerNoViableAltException.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/OrderedATNConfigSet.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/LexerATNSimulator.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/Lexer.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/IntervalSet.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/ATNDeserializationOptions.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/ActionTransition.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/AtomTransition.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/BlockStartState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/BasicBlockStartState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/BlockEndState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/EpsilonTransition.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/LexerChannelAction.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/LexerCustomAction.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/LexerModeAction.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/LexerMoreAction.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/LexerPopModeAction.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/LexerPushModeAction.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/LexerSkipAction.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/LexerTypeAction.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/LoopEndState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/ConflictInfo.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/TerminalNode.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/ErrorNode.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/RuleNode.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/Trees.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/RuleContext.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/ParserRuleContext.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/PredictionMode.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/SimulatorState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/ParserATNSimulator.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/PlusBlockStartState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/PlusLoopbackState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/PrecedencePredicateTransition.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/RangeTransition.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/RuleStartState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/StarBlockStartState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/StarLoopbackState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/TokensStartState.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/UUID.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/ATNDeserializer.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/ParseInfo.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/ProxyParserErrorListener.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/Character.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/CodePointBuffer.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/CodePointCharStream.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/CharStreams.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/BufferedTokenStream.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/CommonTokenStream.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/ListTokenSource.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/MultiMap.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/misc/ParseCancellationException.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/InterpreterRuleContext.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/ParserInterpreter.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/pattern/ParseTreeMatch.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/xpath/XPathLexerErrorListener.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/xpath/XPathElement.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/xpath/XPathRuleAnywhereElement.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/xpath/XPathRuleElement.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/xpath/XPathTokenAnywhereElement.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/xpath/XPathTokenElement.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/xpath/XPathWildcardAnywhereElement.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/xpath/XPathWildcardElement.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/xpath/XPath.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/pattern/ParseTreePattern.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/pattern/RuleTagToken.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/pattern/Chunk.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/pattern/TagChunk.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/pattern/TextChunk.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/pattern/TokenTagToken.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/pattern/ParseTreePatternMatcher.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/DecisionEventInfo.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/AmbiguityInfo.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/ContextSensitivityInfo.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/DecisionInfo.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/ErrorInfo.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/LookaheadEventInfo.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/PredicateEvalInfo.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/atn/ProfilingATNSimulator.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/Parser.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/NoViableAltException.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/DefaultErrorStrategy.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/BailErrorStrategy.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/CharStream.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/Dependents.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/DiagnosticErrorListener.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/LexerInterpreter.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/ParserErrorListener.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/RuleContextWithAltNum.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/RuleDependency.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/RuleVersion.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/TokenFactory.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/TokenSource.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/TokenStream.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/TokenStreamRewriter.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/Vocabulary.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/WritableToken.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/index.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/AbstractParseTreeVisitor.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/ParseTree.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/ParseTreeListener.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/ParseTreeProperty.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/ParseTreeVisitor.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/ParseTreeWalker.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/SyntaxTree.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/Tree.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

antlr4ts/tree/index.js:
  (*!
   * Copyright 2016 The ANTLR Project. All rights reserved.
   * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
   *)

@lit/reactive-element/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/reactive-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/lit-html.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-element/lit-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/is-server.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/custom-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/property.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/state.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/event-options.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/base.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-all.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-async.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-elements.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-nodes.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/class-map.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/context-request-event.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/create-context.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/controllers/context-consumer.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/value-notifier.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/controllers/context-provider.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/context-root.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/decorators/provide.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/decorators/consume.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
